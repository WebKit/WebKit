2012-11-12  Gustavo Noronha Silva  <gns@gnome.org>

        Unreviewed. Removing myself from the list of address to CC on EWS
        build failure; the CC turned out to just be too noisy so I'm
        tracking those in a different way.

        * Scripts/webkitpy/tool/commands/earlywarningsystem.py:
        (GtkEWS):

2012-11-12  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Can not load MHTML documents
        https://bugs.webkit.org/show_bug.cgi?id=101765

        Reviewed by Simon Hausmann.

        Enable MHTML feature.

        * qmake/mkspecs/features/features.pri:

2012-11-12  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Schedule the RTCDataChannel events to be triggered at idle state
        https://bugs.webkit.org/show_bug.cgi?id=101751

        Reviewed by Adam Barth.

        Makes the data channel mocks to be synchronous instead of asynchronous to be able to
        properly test RTCDataChannel event handling.

        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.cpp:
        (MockWebRTCPeerConnectionHandler::sendStringData):
        (MockWebRTCPeerConnectionHandler::sendRawData):

2012-11-12  Jochen Eisinger  <jochen@chromium.org>

        [chromium] move TestRunner implementation into WebTestRunner namespace
        https://bugs.webkit.org/show_bug.cgi?id=101837

        Reviewed by Adam Barth.

        That way, we don't get collisions when linking e.g. against chromium's
        net test support library.

        * DumpRenderTree/chromium/DRTTestRunner.h:
        (DRTTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/AccessibilityControllerChromium.h:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/AccessibilityUIElementChromium.cpp:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/AccessibilityUIElementChromium.h:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/CppBoundClass.cpp:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/CppBoundClass.h:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/CppVariant.cpp:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/CppVariant.h:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/EventSender.h:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/GamepadController.cpp:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/GamepadController.h:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/TestDelegate.h:
        (WebTestRunner):
        (TestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/TestInterfaces.cpp:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/TestInterfaces.h:
        (WebTestRunner):
        (TestInterfaces):
        * DumpRenderTree/chromium/TestRunner/src/TestRunner.cpp:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/TestRunner.h:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/TextInputController.cpp:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/TextInputController.h:
        (WebTestRunner):

2012-11-12  Zeno Albisser  <zeno@webkit.org>

        [Qt] MiniBrowser should not strongly depend on QtTestSupport.
        https://bugs.webkit.org/show_bug.cgi?id=101775

        Introducing HAVE(QTTESTSUPPORT) to allow building
        MiniBrowser without QtTestSupport.
        This is necessary when using a production build.

        Reviewed by Tor Arne Vestbø.

        * MiniBrowser/qt/MiniBrowserApplication.cpp:
        (MiniBrowserApplication::handleUserOptions):
        * qmake/mkspecs/features/configure.prf:
        * qmake/mkspecs/features/features.prf:

2012-11-11  Kangil Han  <kangil.han@samsung.com>

        Change build congratulation message in EFL
        https://bugs.webkit.org/show_bug.cgi?id=101833

        Reviewed by Gyuyoung Kim.

        EFL port is currently supporting both WK1 and WK2.
        But, build congratulation message still shows WK1(EWebLauncher) only.
        Therefore, this patch adopts WK2 reference execution(MiniBrowser) in its message.

        From 'To run EWebLauncher with this newly-built code, use the'
        to 'To run EWebLauncher/MiniBrowser with this newly-built code, use the'.

        * Scripts/build-webkit:
        (writeCongrats):
        * Scripts/webkitdirs.pm:
        (launcherName):

2012-11-09  Ryosuke Niwa  <rniwa@webkit.org>

        People with dichromacy can't tell crashes and passes on flakiness dashboard
        https://bugs.webkit.org/show_bug.cgi?id=101711

        Reviewed by Ojan Vafai.

        Lower the brightness of orange, and raise the brightness of green so that
        people with color blindnes can still distinguish passes and crashes easily.

        * TestResultServer/static-dashboards/flakiness_dashboard_tests.css:
        (.P):
        (.C):

2012-11-09  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Deleting all files relating to the deprecated PeerConnection00
        https://bugs.webkit.org/show_bug.cgi?id=101730

        Reviewed by Adam Barth.

        Since RTCPeerConenction has superseeded PeerConnection00 this patch removes all
        files relating to the old API.

        * DumpRenderTree/chromium/MockWebMediaStreamCenter.cpp:
        * DumpRenderTree/chromium/MockWebMediaStreamCenter.h:
        (MockWebMediaStreamCenter):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell):

2012-11-09  Yael Aharon  <yael.aharon@intel.com>

        [EFL] Give the view a size in TestWebKitAPI
        https://bugs.webkit.org/show_bug.cgi?id=101770

        Reviewed by Laszlo Gombos.

        2 tests are currently failing, because they expect us to paint, but we don't paint if the view size is empty.

        * TestWebKitAPI/efl/PlatformWebView.cpp:
        (TestWebKitAPI::PlatformWebView::PlatformWebView):
        (TestWebKitAPI::PlatformWebView::~PlatformWebView):
        (TestWebKitAPI):
        (TestWebKitAPI::PlatformWebView::resizeTo):

2012-11-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r134068.
        http://trac.webkit.org/changeset/134068
        https://bugs.webkit.org/show_bug.cgi?id=101766

        Caused crashes on the bots. (Requested by rakuco on #webkit).

        * WebKitTestRunner/cairo/TestInvocationCairo.cpp:
        (WTR::TestInvocation::dumpPixelsAndCompareWithExpected):

2012-11-09  Zan Dobersek  <zandobersek@gmail.com>

        [GTK] Bump the jhbuild Cairo version to 1.12.8
        https://bugs.webkit.org/show_bug.cgi?id=101721

        Bump the Cairo version in Jhbuild moduleset to 1.12.8. This version
        should fix multiple failures in canvas tests and also contains
        fixes for X-related crashes that occurred from the 1.12.4 version onwards.

        * gtk/jhbuild.modules:

2012-11-09  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [WTR][Cairo] Do not call paintRepaintRectOverlay() when there is no repaint rect.
        https://bugs.webkit.org/show_bug.cgi?id=101759

        Reviewed by Kenneth Rohde Christiansen.

        * WebKitTestRunner/cairo/TestInvocationCairo.cpp:
        (WTR::TestInvocation::dumpPixelsAndCompareWithExpected): Improve
        the check for an empty repaintRect -- we need to check if the
        WKArrayRef has any items. `if (repaintRect)' will return true
        regardless of whether the array is empty or not.


2012-11-09  Tor Arne Vestbø  <tor.arne.vestbo@digia.com>

        [Qt] Stop watchlist from triggering QtBuildSystem rule on DerivedSources

        Having DerivedSources.pri in the watchlist regexp was creating too much
        noise.

        Reviewed by Ossy.

        * Scripts/webkitpy/common/config/watchlist:

2012-11-09  Dominik Röttsches  <dominik.rottsches@intel.com>

        webkitpy/layouttests integration test fails if high shards/processes environment variables are used
        https://bugs.webkit.org/show_bug.cgi?id=101455

        Reviewed by Dirk Pranke.

        Updating test to disregard WEBKIT_TEST_MAX_LOCKED_SHARDS environment variable.

        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (MainTest.test_max_locked_shards):

2012-11-09  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [EFL][DRT] Force a repaint before tracking repaint rects.
        https://bugs.webkit.org/show_bug.cgi?id=101743

        Reviewed by Kenneth Rohde Christiansen.

        Do like other ports and force a repaint before we start tracking
        repaints so that the pixel results generated look more in line
        with what's expected.

        * DumpRenderTree/efl/DumpRenderTree.cpp:
        (displayWebView): Call DRTSupport::forceLayout() before start
        tracking repaints.

2012-11-09  Xiaobo Wang  <xbwang@torchmobile.com.cn>

        [BlackBerry] DRT - eventSender.keyDown() needs to support pageUp, pageDown, home, end key
        https://bugs.webkit.org/show_bug.cgi?id=100937

        Reviewed by Rob Buis.

        1. Translate these keys to their corresponding BlackBerry key code.
        2. Break down a KeyChar event to a KeyDown/KeyUp pair. This is required
        because we only handle scrolling on a KeyDown event in WebPage::keyEvent()
        , and internally a KeyChar event is interpreted as a KeyDown event + a
        KeyUp event in InputHandler::handleKeyboardInput().

        Tests fixed:
        1. editing/input/scroll-viewport-page-up-down.html
        2. editing/selection/move-begin-end.html
        3. fast/forms/select-popup-pagekeys.html

        * DumpRenderTree/blackberry/EventSender.cpp:
        (keyDownCallback):

2012-11-09  Simon Hausmann  <simon.hausmann@digia.com>

        Unreviewed prospective Qt/Windows build bot fix:

        Make determination of qmake mkspec work with older versions of Qt that
        still create a "mkspecs/default" directory.

        * Scripts/webkitdirs.pm:
        (qtMakeCommand):

2012-11-09  Jochen Eisinger  <jochen@chromium.org>

        [chromium] Introduce a WebTestProxy to override methods in WebViewClient for layout tests
        https://bugs.webkit.org/show_bug.cgi?id=101452

        Reviewed by Adam Barth.

        The WebTestProxy is template, so it can derive from an implementation
        of the WebViewClient interface. That way, WebTestProxy can hook into
        individual methods of the WebViewClient and forward all the rest to the
        actual implementation.

        To demonstrate how I want to use this, I moved the
        postAccessibilityNotification method from WebViewHost to WebTestProxy.

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/TestRunner/public/WebTestProxy.h: Added.
        (WebKit):
        (WebTestRunner):
        (WebTestProxyBase):
        (WebTestProxy):
        (WebTestRunner::WebTestProxy::WebTestProxy):
        (WebTestRunner::WebTestProxy::~WebTestProxy):
        (WebTestRunner::WebTestProxy::postAccessibilityNotification):
        * DumpRenderTree/chromium/TestRunner/src/WebTestProxy.cpp: Added.
        (WebTestRunner):
        (WebTestRunner::WebTestProxyBase::WebTestProxyBase):
        (WebTestRunner::WebTestProxyBase::~WebTestProxyBase):
        (WebTestRunner::WebTestProxyBase::setInterfaces):
        (WebTestRunner::WebTestProxyBase::setDelegate):
        (WebTestRunner::WebTestProxyBase::doPostAccessibilityNotification):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::createNewWindow):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost):

2012-11-09  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Build with MSVC fails to use nmake instead of make
        https://bugs.webkit.org/show_bug.cgi?id=98645

        Reviewed by Tor Arne Vestbø.

        Don't rely on the "default" mkspec but instead query the target
        mkspec variable from qmake to find the right qmake.conf.

        * Scripts/webkitdirs.pm:
        (qtMakeCommand):

2012-11-08  Sudarsana Nagineni  <sudarsana.nagineni@intel.com>

        [EFL] about:blank should display the blank page
        https://bugs.webkit.org/show_bug.cgi?id=101566

        Reviewed by Laszlo Gombos.

        Add a check to return early without prepending http:// scheme, if the
        URL is 'about:blank'.

        * EWebLauncher/url_utils.c:
        (url_from_user_input):

2012-11-08  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Add proper support for fullscreen API to MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=101615

        Reviewed by Kenneth Rohde Christiansen.

        Implement fullscreen API support in MiniBrowser. When entering
        fullscreen a popup is shown to notify the user that something
        is displayed in fullscreen and to advertise that the Escape
        key can be used to exit fullscreen. This behavior is according
        to specification.

        * MiniBrowser/efl/main.c:
        (on_key_down):
        (on_fullscreen_accept):
        (on_fullscreen_deny):
        (on_fullscreen_enter):
        (on_fullscreen_exit):
        (window_create):

2012-11-08  Slavomir Kaslev  <skaslev@google.com>

        [Chromium] DumpRenderTree fix for canvas in software compositing
        https://bugs.webkit.org/show_bug.cgi?id=101509

        Reviewed by Adrienne Walker.

        Don't use accelerated canvas 2d when in software compositing mode.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::runFileTest):

2012-11-08  Jakob Petsovits  <jpetsovits@rim.com>

        [BlackBerry] Rework the API to use document coordinates
        https://bugs.webkit.org/show_bug.cgi?id=101608
        RIM PR 173292

        Reviewed by Adam Treat.

        Adapt to changed WebPage API.
        See Source/WebKit/blackberry/ChangeLog for details.

        * DumpRenderTree/blackberry/DumpRenderTree.cpp:
        (BlackBerry::WebKit::DumpRenderTree::DumpRenderTree):
        (BlackBerry::WebKit::DumpRenderTree::resetToConsistentStateBeforeTesting):

2012-11-08  Yael Aharon  <yael.aharon@intel.com>

        [EFL] Turn on WTF_USE_TILED_BACKING_STORE by default
        https://bugs.webkit.org/show_bug.cgi?id=101526

        Reviewed by Kenneth Rohde Christiansen.

        Turn on WTF_USE_TILED_BACKING_STORE for EFL port.

        * Scripts/webkitperl/FeatureList.pm:

2012-11-08  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Fix build with MSVC 2012 and Angle
        https://bugs.webkit.org/show_bug.cgi?id=101588

        Reviewed by Tor Arne Vestbø.

        Angle includes STL's <memory> header file, which with MSVC 2012 includes stdint.h. MSVC 2012
        does ship stdint.h, but it's lacking other headers such as inttypes.h.

        So for the rest of WebKit we have to continue to use our own versions of these files from
        JavaScriptCore/os-win32. But for Angle we are just including a shipped STL header file (memory)
        and so it's up to the compiler to make that work, i.e. using the stdint.h it ships.

        This patch moves the addition of JavaScriptCore/os-win32 out of default_post.prf, so that it
        doesn't apply to each and every target anymore. In particular it won't apply to Angle anymore,
        because its presence causes a build issue where due to the addition of os-win32/ we end up
        including our own stdint.h but are lacking WTF/ to be in the include search path (which our own
        stdint.h requires). So out of default_post.prf and into WTF.pri, our own wrappers are now only
        used where WTF is also needed, and since os-win32/stdint.h depends on wtf/Platform.h, it seems
        like a logical location.

        * qmake/mkspecs/features/default_post.prf:

2012-11-08  Dominik Röttsches  <dominik.rottsches@intel.com>

        Unreviewed, rolling out r133859.
        http://trac.webkit.org/changeset/133859
        https://bugs.webkit.org/show_bug.cgi?id=101526

        Breaks EFL bots test execution.

        * Scripts/webkitperl/FeatureList.pm:

2012-11-08  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Reduce the number of clean builds
        https://bugs.webkit.org/show_bug.cgi?id=100844

        Reviewed by Tor Arne Vestbø.

        A change in any Qt project file shouldn't trigger clean
        build always, but only if the incremental build failed.

        * Scripts/webkitdirs.pm:
        (buildQMakeProjects):

2012-11-08  Kangil Han  <kangil.han@samsung.com>

        [EFL][MiniBrowser] Add encoding detector option.
        https://bugs.webkit.org/show_bug.cgi?id=100931

        Reviewed by Gyuyoung Kim.

        Add a runtime option to enable/disable encoding detector.

        * MiniBrowser/efl/main.c:
        (window_create):
        (elm_main):

2012-11-08  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] DumpRenderTree does not honor the shouldDumpPixels boolean argument of dumpAsText
        https://bugs.webkit.org/show_bug.cgi?id=101485

        Reviewed by Csaba Osztrogonác.

        [Qt] DumpRenderTree does not honor the shouldDumpPixels boolean argument of dumpAsText

        Support dumpAsText(true) which means we should not dump a render tree
        but should dump pixels. All other platforms already support it.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::dump):
        * DumpRenderTree/qt/TestRunnerQt.cpp:
        (TestRunner::reset):
        (TestRunner::dumpAsText):
        * DumpRenderTree/qt/TestRunnerQt.h:
        (TestRunner::shouldDumpPixels):
        (TestRunner):

2012-11-08  Yael Aharon  <yael.aharon@intel.com>

        [EFL] Turn on WTF_USE_TILED_BACKING_STORE by default
        https://bugs.webkit.org/show_bug.cgi?id=101526

        Reviewed by Kenneth Rohde Christiansen.

        Turn on WTF_USE_TILED_BACKING_STORE for EFL port.

        * Scripts/webkitperl/FeatureList.pm:

2012-11-07  Csaba Osztrogonác  <ossy@webkit.org>

        Make wait-for-SVN-server.py accept empty string as revision
        https://bugs.webkit.org/show_bug.cgi?id=98014

        Reviewed by Dirk Pranke.

        * BuildSlaveSupport/wait-for-SVN-server.py:
        (waitForSVNRevision):

2012-11-07  Dirk Pranke  <dpranke@chromium.org>

        garden-o-matic should handle concurrent requests
        https://bugs.webkit.org/show_bug.cgi?id=101407

        Reviewed by Ojan Vafai.

        Garden-o-Matic is implemented on top of the BaseHttpServer
        python library, which implements a single-threaded (one request at
        a time) server. This means that we can only rebaseline one test at
        a time, and when using a local results file, even fetching the results
        for diffs is single-threaded.

        Mixing in the ThreadingMixin enables concurrent requests (subject
        to the global python interpreter lock). Given that we're doing all
        of the work in webkit-patch subprocesses, I think this is safe.

        Of course, it may not be safe to do some of the subprocesses in
        parallel (e.g., rollout), but I think as long as we don't issue
        commands that touch overlapping sets of files things should be fine.
        The file locking over modifying testexpectations should keep that
        from being corrupted.

        * Scripts/webkitpy/tool/servers/gardeningserver.py:
        (GardeningHTTPServer):
        (GardeningHTTPRequestHandler):

2012-11-07  Andreas Kling  <akling@apple.com>

        Remove build-webkit dependency on Java SDK for Apple Mac WebKit.
        <http://webkit.org/b/101492>

        Reviewed by Anders Carlsson.

        Don't check for a Java SDK before building the Apple Mac port. It's no longer needed for
        the build after the Java bridge was removed.

        * Scripts/build-webkit:
        (cMakeArgsFromFeatures):

2012-11-07  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Allow client to override setWindowFrame() / getWindowFrame()
        https://bugs.webkit.org/show_bug.cgi?id=101496

        Reviewed by Kenneth Rohde Christiansen.

        Provide implementation for on_window_geometry_get() / on_window_geometry_set()
        smart functions that interact with the elm_win widget.

        * MiniBrowser/efl/main.c:
        (on_window_geometry_get):
        (on_window_geometry_set):
        (window_create):

2012-11-07  Yael Aharon  <yael.aharon@intel.com>

        [EFL][WK2][AC] API tests crash
        https://bugs.webkit.org/show_bug.cgi?id=101480

        Reviewed by Kenneth Rohde Christiansen.

        When AC is enabled, 8 API tests are crashing. We need to properly set the evas engine for these tests.

        * TestWebKitAPI/efl/PlatformWebView.cpp:
        (TestWebKitAPI::initEcoreEvas):

2012-11-07  Peter Beverloo  <peter@chromium.org>

        Don't show the Android tester in garden-o-matic yet
        https://bugs.webkit.org/show_bug.cgi?id=101476

        Reviewed by Adam Barth.

        The Android tester just started running layout tests, and doesn't upload its
        results yet. Don't show it for now. This exception will be removed once it
        has a baseline of greenness.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        (.):

2012-11-07  Balazs Kelemen  <kbalazs@webkit.org>

        WebKitTestRunner flakily hangs when running pixel tests on Qt
        https://bugs.webkit.org/show_bug.cgi?id=100686

        Reviewed by Csaba Osztrogonác.

        Make WebKitTestRunner harden against the situation when the coordinated
        graphics rendering synchronisation fails. If we time out when waiting
        for the forced repaint to finish it usually a symptom of the synchronisation
        has been broken. In this case all other tests will fail with the same error.
        The underlying problem is not yet known. Ths patch make us report this situation
        as web process unresponsiveness, so the test harness will kill us and launch
        a new instance. This will make our pixel test bot usable while it should not limit
        us debugging the underlying bug.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::run):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::TestInvocation):
        (WTR::TestInvocation::invoke):
        (WTR::TestInvocation::dumpWebProcessUnresponsiveness):
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/TestInvocation.h:
        (TestInvocation): Introduce new members to hold our state
        that was local to invoke() so far.
        * WebKitTestRunner/qt/TestInvocationQt.cpp:
        (WTR::TestInvocation::dumpPixelsAndCompareWithExpected):

2012-11-07  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Open link in this window action
        https://bugs.webkit.org/show_bug.cgi?id=101226

        Reviewed by Simon Hausmann.

        Populates the context-menu with the new action when the default action is to open in a new window.

        * QtTestBrowser/webview.cpp:
        (createContextMenu):

2012-11-07  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL][WK2] Add ewk_settings_preferred_minimum_contents_width_get/set API
        https://bugs.webkit.org/show_bug.cgi?id=101467

        Reviewed by Kenneth Rohde Christiansen.

        Added ewk_settings_preferred_minimum_contents_width_get/set API which is used for setting/getting
        of default minimum contents width for non viewport meta element sites.
        Set default minimum contents width to '0' for MiniBrowser as it should behave like desktop browser.

        * MiniBrowser/efl/main.c:
        (window_create):

2012-11-07  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        [EFL] Add EFL to garden-o-matic
        https://bugs.webkit.org/show_bug.cgi?id=101444

        Reviewed by Kenneth Rohde Christiansen.

        Added the EFL bots running layout tests to the garden-o-matic report
        page. We are skipping here the bot that just builds WebKit EFL to make
        the data fetching faster.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        (.):

2012-11-07  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL][WK2] Make EWK classes Ewk_Objects
        https://bugs.webkit.org/show_bug.cgi?id=101057

        Reviewed by Kenneth Rohde Christiansen.

        Now all the existing EWK classes share common Ewk_Object ref/unref API.

        * MiniBrowser/efl/main.c:
        (close_file_picker):
        (on_file_chooser_request):

2012-11-07  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Unreviewed. Add Qt EWS bots to the watchers list.

        * Scripts/webkitpy/tool/commands/earlywarningsystem.py:
        (QtEWS):
        (QtWK2EWS):

2012-11-07  Grzegorz Czajkowski  <g.czajkowski@samsung.com>

        WebKitTestRunner needs to turn on 'setContinuousSpellCheckingEnabled'
        https://bugs.webkit.org/show_bug.cgi?id=93611

        Reviewed by Gyuyoung Kim.

        WebKitTestRunner enables spelling feature to pass the layout tests from editing/spelling.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::resetStateToConsistentValues):
        Enables spelling by WebKit2 C API.

2012-11-07  Dominik Röttsches  <dominik.rottsches@intel.com>

        [EFL] Switch the efl-linux-slave-2 to Wk2 Release
        https://bugs.webkit.org/show_bug.cgi?id=101345

        Reviewed by Gyuyoung Kim.

        Switching efl-linux-slave-2 to Wk2 Release.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2012-11-07  Christophe Dumez  <christophe.dumez@intel.com>

        Add replaceWithLiteral() method to WTF::String
        https://bugs.webkit.org/show_bug.cgi?id=101257

        Reviewed by Benjamin Poulain.

        Add API tests for String::replaceWithLiteral() and corresponding
        StringImpl methods.

        * TestWebKitAPI/CMakeLists.txt: Add WTFString API tests to CMake.
        * TestWebKitAPI/Tests/WTF/StringImpl.cpp:
        (TestWebKitAPI::TEST):
        (TestWebKitAPI):
        * TestWebKitAPI/Tests/WTF/WTFString.cpp:
        (TestWebKitAPI::TEST):

2012-11-07  Oswald Buddenhagen <oswald.buddenhagen@nokia.com>

        [Qt] Fix build of modules depending on QtWebKit when using prefix
        https://bugs.webkit.org/show_bug.cgi?id=101437

        Reviewed by Simon Hausmann.

        Remove setting of MODULE_QMAKE_OUTDIR from here, it's been moved to .qmake.conf.

        * qmake/mkspecs/features/default_pre.prf:

2012-11-06  Dan Beam  <dbeam@chromium.org>

        Enable REQUEST_AUTOCOMPLETE for chromium port
        https://bugs.webkit.org/show_bug.cgi?id=101376

        Reviewed by Adam Barth.

        This patch enables the feature flag REQUEST_AUTOCOMPLETE in WebKit/chromium only to allow web authors to start to use
        HTMLFormElement#requestAutocomplete as the chrome-side work progresses further.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell):

        Enables the requestAutocomplete runtime feature flag during tests.

2012-11-06  KyungTae Kim  <ktf.kim@samsung.com>

        [WK2][EFL] Add shortcut for setting a pagination mode on Minibrowser
        https://bugs.webkit.org/show_bug.cgi?id=100301

        Reviewed by Gyuyoung Kim.

        Setting pagination modes is for a paginated view - left to right / right to left / top to bottom / bottom to top.
        Assign a shortcut "F7" to set pagination modes for tests.

        * MiniBrowser/efl/main.c:
        (on_key_down):

2012-11-06  KyungTae Kim  <ktf.kim@samsung.com>

        [EFL][EWebLauncher] Use Ctrl +/-  to zoom in EWebLauncher
        https://bugs.webkit.org/show_bug.cgi?id=100207

        Reviewed by Gyuyoung Kim.

        Use "Ctrl -" instead of "F7" to zoom out, and use "Ctrl +" instead of "F8" to zoom in, 
        and use "Ctrl 0" to set to default zoom level.
        They are more common shortcuts on usual browsers.

        * EWebLauncher/main.c:
        (on_key_down):

2012-11-06  Oliver Hunt  <oliver@apple.com>

        Don't warn about RefPtr* parameters
        https://bugs.webkit.org/show_bug.cgi?id=101403

        Reviewed by Gavin Barraclough.

        RefPtr<>* is a valid parameter type.

        * Scripts/webkitpy/style/checkers/cpp.py:
        (check_function_definition_and_pass_ptr):
        * Scripts/webkitpy/style/checkers/cpp_unittest.py:
        (PassPtrTest.test_ref_ptr_parameter_value):

2012-11-06  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [WTR] Reset EventSender before running each test.
        https://bugs.webkit.org/show_bug.cgi?id=101353

        Reviewed by Simon Fraser.

        Contrary to what was done to at least some ports in DumpRenderTree,
        EventSender did not currently reset its values in WTR. This caused
        flakiness if a test such as editing/selection/fake-doubleclick.html was
        run twice in a row, since the click count was not reset across each
        run.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::TestController): Do not create m_eventSenderProxy
        in the constructor anymore, it is created in
        resetStateToConsistentValues now.
        (WTR::TestController::resetStateToConsistentValues): Recreate
        m_eventSenderProxy every time this method is run.
        * WebKitTestRunner/TestController.h: Make m_eventSenderProxy an OwnPtr
        and guard it with a platform #ifdef.
        * WebKitTestRunner/gtk/EventSenderProxyGtk.cpp:
        (WTR::EventSenderProxy::~EventSenderProxy): Add an empty
        implementation.
        * WebKitTestRunner/mac/EventSenderProxy.mm:
        (WTR::EventSenderProxy::~EventSenderProxy): Ditto.
        * WebKitTestRunner/qt/EventSenderProxyQt.cpp:
        (WTR::EventSenderProxy::~EventSenderProxy): Ditto.

2012-11-06  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL][WK2] Refactor Ewk_Auth_Request, Ewk_Url_Scheme_Request and Ewk_Download_Job to be Ewk_Objects
        https://bugs.webkit.org/show_bug.cgi?id=101383

        Reviewed by Kenneth Rohde Christiansen.

        Ewk_Auth_Request, Ewk_Url_Scheme_Request and Ewk_Download_Job are Ewk_Objects now.

        * MiniBrowser/efl/main.c:
        (auth_popup_close):
        (on_authentication_request):

2012-11-06  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Remove the valgrind issue with MockWebRTCPeerConnectionHandler
        https://bugs.webkit.org/show_bug.cgi?id=101336

        Reviewed by Andreas Kling.

        This patch changes the delete to delete [] to match the new[].

        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.cpp:

2012-11-06  Mihai Balan  <mibalan@adobe.com>

        Add Adobe's bug tracker to committers.py
        https://bugs.webkit.org/show_bug.cgi?id=101338

        Reviewed by Kentaro Hara.

        Adding Adobe's bug tracker mailing list to committers.py
        to enable its inclusion in the autocomplete list.

        * Scripts/webkitpy/common/config/committers.py:

2012-11-06  Sami Kyostila  <skyostil@chromium.org>

        [chromium] Enable fixed position compositing on Android DRT
        https://bugs.webkit.org/show_bug.cgi?id=100263

        Reviewed by James Robinson.

        Chrome on Android forces composited mode for every page and creates
        stacking contexts and graphics layers for fixed positioned elements.
        Change the DumpRenderTree settings to match this.

        * DumpRenderTree/chromium/DumpRenderTree.cpp:
        (main):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell):
        (TestShell::resetWebSettings):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell::setAcceleratedCompositingForFixedPositionEnabled):
        (TestShell):
        * DumpRenderTree/chromium/WebPreferences.cpp:
        (WebPreferences::reset):
        (WebPreferences::applyTo):
        * DumpRenderTree/chromium/WebPreferences.h:
        (WebPreferences):
        * Scripts/webkitpy/layout_tests/port/chromium_android.py:
        (ChromiumAndroidPort.additional_drt_flag):

2012-11-06  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [EFL][WTR] EventSender: Get rid of the WTRMouseButton enum.
        https://bugs.webkit.org/show_bug.cgi?id=101340

        Reviewed by Kenneth Rohde Christiansen.

        Get rid of an enum which was basically a duplicate of the
        WKEventMouseButton one in the shared API.

        The only difference is that it also had a case for a 4th mouse
        button that we treat in a special way in evasMouseButton() now.

        * WebKitTestRunner/EventSenderProxy.h:
        (EventSenderProxy):
        * WebKitTestRunner/efl/EventSenderProxyEfl.cpp:
        (WTR::evasMouseButton):
        (WTR::EventSenderProxy::EventSenderProxy):
        (WTR::EventSenderProxy::mouseUp):
        (WTR::EventSenderProxy::mouseMoveTo):
        (WTR::EventSenderProxy::mouseScrollBy):
        (WTR::EventSenderProxy::leapForward):

2012-11-06  Jussi Kukkonen  <jussi.kukkonen@intel.com>

        [EFL][WK2] Minibrowser forgets http variables when url includes ampersand
        https://bugs.webkit.org/show_bug.cgi?id=101061

        Reviewed by Kenneth Rohde Christiansen.

        Elementary entry only returns 'markup' text, meaning ampersands
        in a url will become "&amp;". Use elm_entry_markup_to_utf8() and
        elm_entry_utf8_to_markup() when interacting with the entry.

        * MiniBrowser/efl/main.c:
        (on_url_changed):
        (on_url_bar_activated):

2012-11-06  Balazs Kelemen  <kbalazs@webkit.org>

        DumpRenderTree should have --pixel-tests option again
        https://bugs.webkit.org/show_bug.cgi?id=98648

        Reviewed by Dirk Pranke.

        Add back the --pixel-tests command line option to DumpRenderTree.
        It was removed r124581 because tools don't use it after that patch.
        However, it turned out that it is useful for debugging and working
        with pixel tests.

        * DumpRenderTree/efl/DumpRenderTree.cpp:
        (parseCommandLineOptions):
        (runTest):
        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (initializeGlobalsFromCommandLineOptions):
        (runTest):
        * DumpRenderTree/mac/DumpRenderTree.mm:
        (initializeGlobalsFromCommandLineOptions):
        (runTest):
        * DumpRenderTree/qt/DumpRenderTreeMain.cpp:
        (isOption):
        (printUsage):
        (main):
        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::processLine):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:
        (WebCore::DumpRenderTree::setShouldDumpPixelsForAllTests):
        (DumpRenderTree):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (runTest):
        (dllLauncherEntryPoint):
        * DumpRenderTree/wx/DumpRenderTreeWx.cpp:
        (runTest):
        (MyApp::OnInit):
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::TestController):
        (WTR::TestController::initialize):
        (WTR::TestController::runTest):
        * WebKitTestRunner/TestController.h:
        (TestController):

2012-11-05  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch rebaseline*: fix typo for --results-directory
        https://bugs.webkit.org/show_bug.cgi?id=101295

        Reviewed by Ojan Vafai.

        Had --results_directory instead of --results-directory in both the
        code and the unit test.

        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (AbstractParallelRebaselineCommand._rebaseline_commands):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (TestRebaselineJson.test_results_directory):

2012-11-05  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch rebaseline*: fix handling of local file urls
        https://bugs.webkit.org/show_bug.cgi?id=101296

        Reviewed by Ojan Vafai.

        When using --results-directory, we need to make sure we're converting
        paths to file:/// urls for urllib to work correctly. Also, this
        patch reworks the unit tests to get better coverage (of the execute()
        command) and reduce copy/pasting of mock options.

        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineTest._rebaseline_test_and_update_expectations):
        (RebaselineTest.execute):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (TestRebaselineTest.setUp):
        (test_rebaseline_updates_expectations_file):
        (test_rebaseline_does_not_include_overrides):
        (test_rebaseline_test_with_results_directory):
        (test_rebaseline_test_internal_with_move_overwritten_baselines_to):

2012-11-05  Kenneth Russell  <kbr@google.com>

        Added secondary email address and IRC nick.
        https://bugs.webkit.org/show_bug.cgi?id=101290

        Unreviewed change to committers.py.

        * Scripts/webkitpy/common/config/committers.py:

2012-11-05  Glenn Adams  <glenn@skynav.com>

        Add IRC alias for Glenn Adams
        https://bugs.webkit.org/show_bug.cgi?id=101262

        Reviewed by Eric Seidel.

        Add IRC alias for Glenn Adams.

        * Scripts/webkitpy/common/config/committers.py:

2012-11-05  Dima Gorbik  <dgorbik@apple.com>

        Back out controversial changes from Bug 98665.
        https://bugs.webkit.org/show_bug.cgi?id=101244

        Reviewed by David Kilzer.

        Backing out changes from Bug 98665 until further discussions take place on rules for including Platform.h in Assertions.h.

        * DumpRenderTree/mac/MockGeolocationProvider.mm:

2012-11-05  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: lint, clean up rebaseline.py
        https://bugs.webkit.org/show_bug.cgi?id=101240

        Reviewed by Ojan Vafai.

        Miscellaneous cleanup of lint errors and warnings.

        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (AbstractRebaseliningCommand):
        (RebaselineTest._test_root):
        (OptimizeBaselines._optimize_baseline):
        (OptimizeBaselines.execute):
        (AnalyzeBaselines.__init__):
        (AbstractParallelRebaselineCommand):
        (AbstractParallelRebaselineCommand._builders_to_fetch_from):
        (AbstractParallelRebaselineCommand._files_to_add):
        (AbstractParallelRebaselineCommand._rebaseline):
        (RebaselineExpectations.__init__):
        (Rebaseline.execute):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (_BaseTestCase.setUp):
        (TestAnalyzeBaselines.setUp):

2012-11-05  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch optimize-baselines should take a --platform arg
        https://bugs.webkit.org/show_bug.cgi?id=97623

        Reviewed by Ojan Vafai.

        So that we can optionally limit/control which platforms' results
        are affected.

        This patch adds --platform to analyze-baselines as well.

        * Scripts/webkitpy/common/checkout/baselineoptimizer.py:
        (_baseline_search_hypergraph):
        (BaselineOptimizer.__init__):
        * Scripts/webkitpy/common/checkout/baselineoptimizer_unittest.py:
        (TestBaselineOptimizer.__init__):
        (BaselineOptimizerTest.test_move_baselines):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (OptimizeBaselines.__init__):
        (OptimizeBaselines.execute):
        (AnalyzeBaselines.__init__):
        (AnalyzeBaselines.execute):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (TestAnalyzeBaselines.test_default):
        (TestAnalyzeBaselines.test_missing_baselines):

2012-11-05  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch rebaseline-expectations should take a --platform arg
        https://bugs.webkit.org/show_bug.cgi?id=97621

        Reviewed by Ojan Vafai.

        So that we can limit which platforms we attempt to rebaseline;
        this can reduce the noise the command produces if some ports
        have errors or warnings in their TestExpectations files and/or
        help produce more predictable results.

        In testing this patch, I realized that the rebaseline-in-parallel
        commands (rebaseline-json, rebaseline-expectations, etc.) can
        cause multiple rebaseline-test-internal commands to attempt to
        modify the TestExpectations files concurrently, and that we needed
        to lock the files to prevent corruption; it would be nice if
        we can split the updating-the-expectations-files out separately
        from updating the filesystem (much like we do with the scm updates)
        to avoid this concurrency.

        * Scripts/webkitpy/common/system/file_lock_mock.py: Added.
        (MockFileLock):
        (MockFileLock.__init__):
        (MockFileLock.acquire_lock):
        (MockFileLock.release_lock):
        * Scripts/webkitpy/common/system/systemhost.py:
        (SystemHost.copy_current_environment):
        (SystemHost):
        (SystemHost.make_file_lock):
        * Scripts/webkitpy/common/system/systemhost_mock.py:
        (MockSystemHost.copy_current_environment):
        (MockSystemHost):
        (MockSystemHost.make_file_lock):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineTest._update_expectations_file):
        (RebaselineExpectations.__init__):
        (RebaselineExpectations._add_tests_to_rebaseline_for_port):
        (RebaselineExpectations.execute):

2012-11-05  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: clean up options for specifying multiple platforms at once
        https://bugs.webkit.org/show_bug.cgi?id=101140

        Reviewed by Ojan Vafai.

        This patch reworks how we display the help strings for --platform
        options and how we filter out platforms matching a glob. This will
        be useful as I add patches to ensure that all the webkit-patch
        commands are using --platform consistently to filter ports.

        There should be no functional changes resulting from this patch.

        * Scripts/webkitpy/layout_tests/port/factory.py:
        (platform_options):
        (PortFactory.all_port_names):
        (PortFactory.get_from_builder_name):
        * Scripts/webkitpy/tool/commands/queries.py:
        (PrintExpectations.__init__):
        (PrintBaselines.__init__):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (AbstractRebaseliningCommand):
        (RebaselineJson.__init__):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (TestRebaselineExpectations.setUp):
        (TestRebaselineExpectations.test_rebaseline_expectations):

2012-11-05  Peter Beverloo  <peter@chromium.org>

        The layout test runner shouldn't wait for data if stdout/stderr have been closed
        https://bugs.webkit.org/show_bug.cgi?id=101233

        Reviewed by Dirk Pranke.

        Trying to read the file descriptor for the stdout or stderr pipes when DumpRenderTree
        has crashed during a Chromium Android layout test-run, which uses FIFOs for
        communication, causes the File.fileno() method to raise a ValueError. Return early
        if either of the pipes has already been closed.

        * Scripts/webkitpy/layout_tests/port/server_process.py:
        (ServerProcess._wait_for_data_and_update_buffers_using_select):

2012-11-05  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch rebaseline is broken
        https://bugs.webkit.org/show_bug.cgi?id=101235

        Reviewed by Ojan Vafai.

        It didn't get updated to handle the change in parsing --suffixes
        properly, and the unit test didn't get updated either, masking the
        problem.

        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (Rebaseline._tests_to_update):
        (Rebaseline.execute):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (TestRebaseline.test_rebaseline):

2012-11-05  Dirk Pranke  <dpranke@chromium.org>

        lint-webkitpy doesn't autoinstall pylint properly.
        https://bugs.webkit.org/show_bug.cgi?id=101106

        Reviewed by Ojan Vafai.

        Re-land r133381 with fix; ironically, lint-webkitpy would've
        complained about the problem. Also modify pylintrc and clean up
        any other lint errors in the modified files.

        * Scripts/webkitpy/common/system/autoinstall.py:
        (AutoInstaller._set_up_target_dir):
        (AutoInstaller):
        (AutoInstaller._make_package):
        (AutoInstaller._create_scratch_directory):
        (AutoInstaller._install):
        (AutoInstaller.install):
        * Scripts/webkitpy/pylintrc:
        * Scripts/webkitpy/thirdparty/__init__.py:
        (AutoinstallImportHook._ensure_autoinstalled_dir_is_in_sys_path):
        (AutoinstallImportHook):
        (AutoinstallImportHook.find_module):
        (AutoinstallImportHook._install_pylint):
        (AutoinstallImportHook._install_coverage):
        (AutoinstallImportHook._install_eliza):
        (AutoinstallImportHook._install_webpagereplay):
        (AutoinstallImportHook._install):
        * Scripts/webkitpy/thirdparty/__init___unittest.py:
        (ThirdpartyTest.test_import_hook.MockImportHook.__init__):
        (ThirdpartyTest.test_import_hook):
        (ThirdpartyTest.test_imports):

2012-11-05  KyungTae Kim  <ktf.kim@samsung.com>

        [EFL] Fix build warning in EWebLauncher/main.c
        https://bugs.webkit.org/show_bug.cgi?id=101197

        Reviewed by Kentaro Hara.

        Because the strp of _Ecore_Getopt_Value is char** (Ecore_Getopt.h),
        The parameter of ECORE_GETOPT_VALUE_STR should be char*

        * EWebLauncher/main.c:
        (_User_Arguments):

2012-11-05  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL][WK2] Add --window-size command line option to EFL MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=100942

        Reviewed by Kenneth Rohde Christiansen.

        Added window-size (-s) command line option to EFL MiniBrowser.

        * MiniBrowser/efl/main.c:
        (window_create):
        (parse_window_size):
        (elm_main):

2012-11-05  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] The icon database path should be set by the client
        https://bugs.webkit.org/show_bug.cgi?id=101182

        Reviewed by Kenneth Rohde Christiansen.

        Enable favicon database functionality in MiniBrowser since
        it is used and it is no longer enabled by default.

        * MiniBrowser/efl/main.c:
        (elm_main):

2012-11-03  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt][WK2] setPlatformStrategies always asserts after r132744
        https://bugs.webkit.org/show_bug.cgi?id=100838

        Reviewed by Simon Hausmann.

        Reland with build fixes.

        Turned test runners to use the new QtTestSupport.

        * DumpRenderTree/qt/DumpRenderTree.pro:
        * DumpRenderTree/qt/DumpRenderTreeMain.cpp:
        (main):
        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::open):
        * DumpRenderTree/qt/QtInitializeTestFonts.h: Removed.
        * MiniBrowser/qt/MiniBrowser.pro:
        * QtTestBrowser/QtTestBrowser.pro:
        * QtTestBrowser/qttestbrowser.cpp:
        (LauncherApplication::handleUserOptions):
        * WebKitTestRunner/InjectedBundle/Target.pri:
        * WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp:
        (WTR::activateFonts):
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.cpp: Removed.
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.h: Removed.
        * WebKitTestRunner/InjectedBundle/qt/TestRunnerQt.cpp:
        (WTR::TestRunner::platformInitialize):  Removed the comment from here
        because it was just lying, apparently two times. First, it is not incorrect
        to reinitialize our font set and clear font caches, it is what the tests
        expect. Second, the use of QRawFont has nothing to do with the font cache.
        * WebKitTestRunner/Target.pri:
        * WebKitTestRunner/qt/main.cpp:
        (main):

2012-11-04  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r133381.
        http://trac.webkit.org/changeset/133381
        https://bugs.webkit.org/show_bug.cgi?id=101161

        It made webkit-patch useless (Requested by Ossy_weekend on
        #webkit).

        * Scripts/webkitpy/common/system/autoinstall.py:
        (AutoInstaller._create_scratch_directory):
        (AutoInstaller._install):
        (AutoInstaller.install):
        * Scripts/webkitpy/thirdparty/__init__.py:
        (AutoinstallImportHook.__init__):
        (AutoinstallImportHook._install_pylint):
        (AutoinstallImportHook._install_coverage):
        (AutoinstallImportHook._install_eliza):
        (AutoinstallImportHook._install):
        * Scripts/webkitpy/thirdparty/__init___unittest.py:
        (ThirdpartyTest.test_import_hook.MockImportHook.__init__):
        (ThirdpartyTest.test_import_hook):

2012-11-03  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r133403, r133404, and r133409.
        http://trac.webkit.org/changeset/133403
        http://trac.webkit.org/changeset/133404
        http://trac.webkit.org/changeset/133409
        https://bugs.webkit.org/show_bug.cgi?id=101158

        "Broke tests" (Requested by kbalazs on #webkit).

        * DumpRenderTree/qt/DumpRenderTree.pro:
        * DumpRenderTree/qt/DumpRenderTreeMain.cpp:
        (main):
        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::open):
        * DumpRenderTree/qt/QtInitializeTestFonts.cpp: Renamed from Source/WebCore/platform/qt/QtTestSupport.cpp.
        (WebKit):
        (WebKit::initializeTestFonts):
        * DumpRenderTree/qt/QtInitializeTestFonts.h: Copied from Tools/WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp.
        (WebKit):
        * MiniBrowser/qt/MiniBrowser.pro:
        * MiniBrowser/qt/MiniBrowserApplication.cpp:
        (MiniBrowserApplication::handleUserOptions):
        * QtTestBrowser/QtTestBrowser.pro:
        * QtTestBrowser/qttestbrowser.cpp:
        (LauncherApplication::handleUserOptions):
        * WebKitTestRunner/InjectedBundle/Target.pri:
        * WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp:
        (WTR::activateFonts):
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.cpp: Copied from Tools/WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp.
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.h: Copied from Tools/WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp.
        * WebKitTestRunner/InjectedBundle/qt/TestRunnerQt.cpp:
        (WTR::TestRunner::platformInitialize):
        * WebKitTestRunner/Target.pri:
        * WebKitTestRunner/qt/main.cpp:
        (main):

2012-11-03  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt][WK2] setPlatformStrategies always asserts after r132744
        https://bugs.webkit.org/show_bug.cgi?id=100838

        2nd unreviewed buildfix.

        * MiniBrowser/qt/MiniBrowserApplication.cpp:

2012-11-03  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt][WK2] setPlatformStrategies always asserts after r132744
        https://bugs.webkit.org/show_bug.cgi?id=100838

        Unreviewed buildfix.

        * WebKitTestRunner/Target.pri:

2012-11-03  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt][WK2] setPlatformStrategies always asserts after r132744
        https://bugs.webkit.org/show_bug.cgi?id=100838

        Reviewed by Simon Hausmann.

        Reland with build fix.

        Turned test runners to use the new QtTestSupport.

        * DumpRenderTree/qt/DumpRenderTree.pro:
        * DumpRenderTree/qt/DumpRenderTreeMain.cpp:
        (main):
        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::open):
        * DumpRenderTree/qt/QtInitializeTestFonts.h: Removed.
        * MiniBrowser/qt/MiniBrowser.pro:
        * QtTestBrowser/QtTestBrowser.pro:
        * QtTestBrowser/qttestbrowser.cpp:
        (LauncherApplication::handleUserOptions):
        * WebKitTestRunner/InjectedBundle/Target.pri:
        * WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp:
        (WTR::activateFonts):
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.cpp: Removed.
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.h: Removed.
        * WebKitTestRunner/InjectedBundle/qt/TestRunnerQt.cpp:
        (WTR::TestRunner::platformInitialize):  Removed the comment from here
        because it was just lying, apparently two times. First, it is not incorrect
        to reinitialize our font set and clear font caches, it is what the tests
        expect. Second, the use of QRawFont has nothing to do with the font cache.
        * WebKitTestRunner/Target.pri:
        * WebKitTestRunner/qt/main.cpp:
        (main):

2012-11-03  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r133397.
        http://trac.webkit.org/changeset/133397
        https://bugs.webkit.org/show_bug.cgi?id=101155

        "Broke Qt. No way to force the damn bots to do a clean build.
        I'm giving up." (Requested by kbalazs on #webkit).

        * DumpRenderTree/qt/DumpRenderTree.pro:
        * DumpRenderTree/qt/DumpRenderTreeMain.cpp:
        (main):
        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::open):
        * DumpRenderTree/qt/QtInitializeTestFonts.cpp: Renamed from Source/WebCore/platform/qt/QtTestSupport.cpp.
        (WebKit):
        (WebKit::initializeTestFonts):
        * DumpRenderTree/qt/QtInitializeTestFonts.h: Copied from Tools/WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp.
        (WebKit):
        * QtTestBrowser/QtTestBrowser.pro:
        * QtTestBrowser/qttestbrowser.cpp:
        (LauncherApplication::handleUserOptions):
        * WebKitTestRunner/InjectedBundle/Target.pri:
        * WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp:
        (WTR::activateFonts):
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.cpp: Copied from Tools/WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp.
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.h: Copied from Tools/WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp.
        * WebKitTestRunner/InjectedBundle/qt/TestRunnerQt.cpp:
        (WTR::TestRunner::platformInitialize):
        * WebKitTestRunner/Target.pri:
        * WebKitTestRunner/qt/main.cpp:
        (main):

2012-11-03  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt][WK2] setPlatformStrategies always asserts after r132744
        https://bugs.webkit.org/show_bug.cgi?id=100838

        Reviewed by Simon Hausmann.

        Turned test runners to use the new QtTestSupport.

        * DumpRenderTree/qt/DumpRenderTree.pro:
        * DumpRenderTree/qt/DumpRenderTreeMain.cpp:
        (main):
        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::open):
        * QtTestBrowser/QtTestBrowser.pro:
        * QtTestBrowser/qttestbrowser.cpp:
        (LauncherApplication::handleUserOptions):
        * WebKitTestRunner/InjectedBundle/Target.pri:
        * WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp:
        (WTR::activateFonts):
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.cpp: Removed.
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.h: Removed.
        * WebKitTestRunner/InjectedBundle/qt/InjectedBundleQt.cpp:
        * WebKitTestRunner/InjectedBundle/qt/TestRunnerQt.cpp:
        (WTR::TestRunner::platformInitialize): Removed the comment from here
        because it was just lying, apparently two times. First, it is not incorrect
        to reinitialize our font set and clear font caches, it is what the tests
        expect. Second, the use of QRawFont has nothing to do with the font cache.
        * WebKitTestRunner/Target.pri:
        * WebKitTestRunner/qt/main.cpp:
        (main):

2012-11-02  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch rebaseline is broken
        https://bugs.webkit.org/show_bug.cgi?id=101081

        Reviewed by Ojan Vafai.

        I broke this in r133061 and the unit tests weren't covering this
        code path. Fixed the issue and the tests. --results-directory
        doesn't make sense for either 'webkit-patch rebaseline' or
        'webkit-patch rebaseline-expectations', so we don't want to expose
        that as a command line option, but they all call a common
        _rebaseline() routine that references options.results_directory,
        so we need to set a default value.

        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineExpectations.execute):
        (Rebaseline.execute):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (TestRebaseline):
        (TestRebaseline.test_rebaseline):

2012-11-02  Dirk Pranke  <dpranke@chromium.org>

        lint-webkitpy doesn't autoinstall pylint properly
        https://bugs.webkit.org/show_bug.cgi?id=101106

        Reviewed by Ojan Vafai.

        Turns out the autoinstalling code for pylint didn't install
        pylint's dependencies, and the autoinstaller code didn't work
        using nested directories (e.g., "logilab/astng"). Fix those issues,
        clean up the autoinstaller code, and add tests to make sure everything
        imports successfully.

        * Scripts/webkitpy/common/system/autoinstall.py:
        (AutoInstaller._create_scratch_directory):
        (AutoInstaller._install):
        (AutoInstaller.install):
        * Scripts/webkitpy/thirdparty/__init__.py:
        (AutoinstallImportHook._ensure_autoinstalled_dir_is_in_sys_path):
        (AutoinstallImportHook._install_pylint):
        (AutoinstallImportHook._install_coverage):
        (AutoinstallImportHook._install_eliza):
        (AutoinstallImportHook._install):
        * Scripts/webkitpy/thirdparty/__init___unittest.py:
        (ThirdpartyTest.test_import_hook.MockImportHook.__init__):
        (ThirdpartyTest.test_import_hook):
        (ThirdpartyTest.test_imports):

2012-11-02  Dirk Pranke  <dpranke@chromium.org>

        nrwt prints an awkward result message for missing results
        https://bugs.webkit.org/show_bug.cgi?id=100915

        Reviewed by Ojan Vafai.

        Completely rework how we print out the description of
        each tests's result - we now will print either "passed" or "failed",
        followed by " unexpectedly" if we weren't expecting the result,
        followed by a short description of each type of failure that happened
        (in parentheses). Also reworked the description of each type of
        failure slightly to be clearer.

        Also rework the tests to make sure we have coverage of all of the
        messages. Examples of the new output are posted as an attachment to
        the bug.

        * Scripts/webkitpy/layout_tests/models/test_expectations.py:
        (TestExpectations):
        * Scripts/webkitpy/layout_tests/models/test_failures.py:
        (FailureTimeout.message):
        (FailureMissingResult.message):
        (FailureTextMismatch.message):
        (FailureMissingImageHash.message):
        (FailureMissingImage.message):
        (FailureImageHashMismatch.message):
        (FailureImageHashIncorrect.message):
        (FailureReftestMismatch.message):
        (FailureReftestMismatchDidNotOccur.message):
        (FailureReftestNoImagesGenerated.message):
        (FailureMissingAudio.message):
        (FailureAudioMismatch.message):
        (FailureEarlyExit.message):
        * Scripts/webkitpy/layout_tests/port/test.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (MainTest.test_run_singly_actually_runs_tests):
        (MainTest.test_missing_and_unexpected_results):
        * Scripts/webkitpy/layout_tests/views/printing.py:
        (Printer._print_result_summary_entry):
        (Printer.print_finished_test):
        (Printer._result_message):
        (Printer._print_unexpected_results):
        * Scripts/webkitpy/tool/bot/flakytestreporter_unittest.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:

2012-11-02  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: clean up logging in common.system.autoinstall
        https://bugs.webkit.org/show_bug.cgi?id=101090

        Reviewed by Ojan Vafai.

        This module logged way too much, much of which was logging that
        was either really redundant or useful only during initial development.
        This patch deletes a lot of code and tweaks the remaining log messages
        to be more useful now.

        Also, clean up a bunch of lint errors and warnings.

        * Scripts/webkitpy/common/system/autoinstall.py:
        (AutoInstaller.__init__):
        (AutoInstaller._write_file):
        (AutoInstaller._set_up_target_dir):
        (AutoInstaller._create_scratch_directory):
        (AutoInstaller._url_downloaded_path):
        (AutoInstaller._is_downloaded):
        (AutoInstaller._record_url_downloaded):
        (AutoInstaller._extract_targz):
        (AutoInstaller._extract_all):
        (AutoInstaller._unzip):
        (AutoInstaller._download_to_stream):
        (AutoInstaller._download):
        (AutoInstaller._install):
        (AutoInstaller.install):

2012-11-02  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch analyze-baselines output is weak
        https://bugs.webkit.org/show_bug.cgi?id=100998

        Reviewed by Ojan Vafai.

        Currently analyze-baselines prints a list of baselines that have
        the same checksum per line, but the format is hard to read;
        this patch cleans up the output to print by directory instead
        and use the same format I recently added for debugging optimize-baselines,
        then refactors the code so that we share and adds tests for
        analyze-baselines (which was untested).

        Also, I got rid of a couple of unnecessarily-hardcoded port names,
        and modified the baseline optimizer to log the current world when
        optimize fails.

        * Scripts/webkitpy/common/checkout/baselineoptimizer.py:
        (BaselineOptimizer.read_results_by_directory):
        (BaselineOptimizer.write_by_directory):
        (BaselineOptimizer.optimize):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (OptimizeBaselines.execute):
        (AnalyzeBaselines.__init__):
        (AnalyzeBaselines._write):
        (AnalyzeBaselines._analyze_baseline):
        (AnalyzeBaselines.execute):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (_FakeOptimizer):
        (_FakeOptimizer.read_results_by_directory):
        (TestAnalyzeBaselines):
        (TestAnalyzeBaselines.setUp):
        (TestAnalyzeBaselines.test_default):
        (TestAnalyzeBaselines.test_missing_baselines):

2012-11-02  Adam Barth  <abarth@webkit.org>

        ENABLE(UNDO_MANAGER) is disabled everywhere and is not under active development
        https://bugs.webkit.org/show_bug.cgi?id=100711

        Reviewed by Eric Seidel.

        * Scripts/webkitperl/FeatureList.pm:
        * qmake/mkspecs/features/features.pri:

2012-11-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r133303.
        http://trac.webkit.org/changeset/133303
        https://bugs.webkit.org/show_bug.cgi?id=101068

        "Broke qt wk2 build (seems like bots fails to rerun qmake if
        needed)" (Requested by kbalazs on #webkit).

        * DumpRenderTree/qt/DumpRenderTree.pro:
        * DumpRenderTree/qt/DumpRenderTreeMain.cpp:
        (main):
        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::open):
        * DumpRenderTree/qt/QtInitializeTestFonts.cpp: Renamed from Source/WebCore/platform/qt/QtTestSupport.cpp.
        (WebKit):
        (WebKit::initializeTestFonts):
        * DumpRenderTree/qt/QtInitializeTestFonts.h: Copied from Tools/WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp.
        (WebKit):
        * QtTestBrowser/QtTestBrowser.pro:
        * QtTestBrowser/qttestbrowser.cpp:
        (LauncherApplication::handleUserOptions):
        * WebKitTestRunner/InjectedBundle/Target.pri:
        * WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp:
        (WTR::activateFonts):
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.cpp: Copied from Tools/WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp.
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.h: Copied from Tools/WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp.
        * WebKitTestRunner/InjectedBundle/qt/TestRunnerQt.cpp:
        (WTR::TestRunner::platformInitialize):
        * WebKitTestRunner/Target.pri:
        * WebKitTestRunner/qt/main.cpp:
        (main):

2012-11-02  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt][WK2] setPlatformStrategies always asserts after r132744
        https://bugs.webkit.org/show_bug.cgi?id=100838

        Reviewed by Simon Hausmann.

        Turned test runners to use the new QtTestSupport.

        * DumpRenderTree/qt/DumpRenderTree.pro:
        * DumpRenderTree/qt/DumpRenderTreeMain.cpp:
        (main):
        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::open):
        * QtTestBrowser/QtTestBrowser.pro:
        * QtTestBrowser/qttestbrowser.cpp:
        (LauncherApplication::handleUserOptions):
        * WebKitTestRunner/InjectedBundle/Target.pri:
        * WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp:
        (WTR::activateFonts):
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.cpp: Removed.
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.h: Removed.
        * WebKitTestRunner/InjectedBundle/qt/InjectedBundleQt.cpp:
        * WebKitTestRunner/InjectedBundle/qt/TestRunnerQt.cpp:
        (WTR::TestRunner::platformInitialize): Removed the comment from here
        because it was just lying, apparently two times. First, it is not incorrect
        to reinitialize our font set and clear font caches, it is what the tests
        expect. Second, the use of QRawFont has nothing to do with the font cache.
        * WebKitTestRunner/Target.pri:
        * WebKitTestRunner/qt/main.cpp:
        (main):

2012-11-02  Peter Beverloo  <peter@chromium.org>

        Output Android's device status before running tests on the bots
        https://bugs.webkit.org/show_bug.cgi?id=100944

        Reviewed by Dirk Pranke.

        This adds a new step to the build master which will be run prior to the
        actual tests-suites on the Chromium Android tester, and soon the Chromium
        Android Perf bot. For each attached device, it outputs the build
        information, battery level, battery temperature and username.

        The Android tester currently is very flaky, and this will help tremendously
        in being able to figure out what's wrong with the bot.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        (OutputAndroidDeviceStatus):
        (TestFactory.__init__):
        * BuildSlaveSupport/chromium/output-android-device-status: Added.
        (GetAttachedDevices):
        (AndroidDeviceStatus):
        (AndroidDeviceStatus.__init__):
        (AndroidDeviceStatus._run_adb_command):
        (AndroidDeviceStatus.device_type):
        (AndroidDeviceStatus.device_build):
        (AndroidDeviceStatus.device_fingerprint):
        (AndroidDeviceStatus.battery_level):
        (AndroidDeviceStatus.battery_temperature):
        (AndroidDeviceStatus.username):
        (main):

2012-11-02  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] WTR: Make sure that eventSender.mouseDown sends a press event for the second press
        https://bugs.webkit.org/show_bug.cgi?id=101033

        Reviewed by Simon Hausmann.

        eventSender.mouseDown doesn't work properly since r133153 where
        MouseButtonDblClick events aren't interpreted as Press events anymore.
        The problem is that mouseDown sends a DblClick event instead of a Press,
        while the correct way is to send both events.

        Since QQuickWebView isn't doing anything with DblClick events anymore,
        simply send Press events all the time and let WebCore figure out
        where the double clicks are.

        * WebKitTestRunner/qt/EventSenderProxyQt.cpp:
        (WTR::EventSenderProxy::updateClickCountForButton):
        (WTR::EventSenderProxy::mouseDown):

2012-11-02  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Add HTTP authentication support to MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=100953

        Reviewed by Kenneth Rohde Christiansen.

        Add HTTP authentication support to MiniBrowser. An authentication
        dialog now pops up to ask the user for credentials whenever
        a Web site requires authentication.

        * MiniBrowser/efl/main.c:
        (auth_popup_close):
        (on_auth_cancel):
        (on_auth_ok):
        (on_authentication_request):
        (window_create):

2012-11-01  Yury Semikhatsky  <yurys@chromium.org>

        Memory instrumentation: do not call checkCountedObject with wrong pointers
        https://bugs.webkit.org/show_bug.cgi?id=100958

        Reviewed by Alexander Pavlov.

        * TestWebKitAPI/Tests/WTF/MemoryInstrumentationTest.cpp: test that if there
        if there is class A derived from classes B and C and we have pointer B* to an
        object of class A then MemoryInstrumentationClient::checkoutCountedObject won't
        be called for B* but only for A*

        Also MemoryInstrumentation implementation used in the test was refactored to
        allow passing client as a parameter. The client implementation was extracted into
        a top-level class MemoryInstrumentationTestClient.

2012-11-01  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Make File Chooser dialog modal in MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=100962

        Reviewed by Gyuyoung Kim.

        Make File Chooser dialog modal in MiniBrowser and make
        sure it is closed and freed when its parent window is
        closed.

        * MiniBrowser/efl/main.c:
        (close_file_picker):
        (on_filepicker_parent_deletion):
        (on_file_chooser_request):

2012-11-01  Seonae Kim  <sunaeluv.kim@samsung.com>

        [EFL][DRT] Support Geolocation
        https://bugs.webkit.org/show_bug.cgi?id=97427

        Reviewed by Gyuyoung Kim. 

        Implement methods to use GeolocationClientMock in DumpRenderTree.
        This client attaches to the page whenever a view is created.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::createView):
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):
        * DumpRenderTree/efl/TestRunnerEfl.cpp:
        (TestRunner::setMockGeolocationPosition):
        (TestRunner::setMockGeolocationPositionUnavailableError):
        (TestRunner::setGeolocationPermission):
        (TestRunner::numberOfPendingGeolocationPermissionRequests):

2012-11-01  Ryosuke Niwa  <rniwa@webkit.org>

        Remove tests no longer needed after r133229.

        * Scripts/webkitpy/performance_tests/perftest_unittest.py:
        (TestPerfTestFactory.test_inspector_test):
        * Scripts/webkitpy/performance_tests/perftestsrunner_unittest.py:
        (test_collect_tests_with_skipped_list):

2012-11-01  Nico Weber  <thakis@chromium.org>

        [chromium] Try to find ninja if it's not in the path already
        https://bugs.webkit.org/show_bug.cgi?id=100988

        Reviewed by Ryosuke Niwa.

        Similar to the gclient detection logic in update-webkit-chromium

        * Scripts/webkitdirs.pm:
        (buildChromiumNinja):

2012-11-01  Eric Seidel  <eric@webkit.org>

        Add Glenn Adams to the Contributor list
        https://bugs.webkit.org/show_bug.cgi?id=100982

        Reviewed by Adam Barth.

        I CC him enough on bugs it would help me to have him listed here.

        * Scripts/webkitpy/common/config/committers.py:

2012-11-01  Jer Noble  <jer.noble@apple.com>

        Add Python-LLDB support for WTF::Vector types.
        https://bugs.webkit.org/show_bug.cgi?id=100980

        Reviewed by Anders Carlsson.

        Add a synthetic child provider for WTF::Vector types.

        * lldb/lldb_webkit.py:
        (__lldb_init_module): Add both the summary and synthetic providers for WTF::Vector
        (WTFVector_SummaryProvider): Wrapper around WTFVectorProvider
        (WTFVectorProvider):
        (WTFVectorProvider.__init__):
        (WTFVectorProvider.num_children): Return m_size+2 children to account for synthesized children.
        (WTFVectorProvider.get_child_index): Synthesize child indexes for each entry in the Vector.
        (WTFVectorProvider.get_child_at_index): Synthesize children for each entry in the Vector.
        (WTFVectorProvider.update): Retrieve state from the underlying Vector.
        (WTFVectorProvider.has_children): Vectors always have children.

2012-11-01  Zoltan Horvath  <zoltan@webkit.org>

        Remove PageLoad directory entry from PerformanceTests pattern_map
        https://bugs.webkit.org/show_bug.cgi?id=100989

        Reviewed by Ryosuke Niwa.

        Since we removed PageLoad directory from PerformanceTests we don't need this entry in pattern_map.

        * Scripts/webkitpy/performance_tests/perftest.py:
        (PerfTestFactory):

2012-11-01  Jer Noble  <jer.noble@apple.com>

        Add LLDB-Python scripts to support WebKit data types.
        https://bugs.webkit.org/show_bug.cgi?id=100898

        Reviewed by Anders Carlsson.

        Add Summary providers for common WebKit string types.

        * lldb/lldb_webkit.py: Added.
        (__lldb_init_module): Register these providers with the debugger.
        (WTFString_SummaryProvider): Wrapper around WTFStringProvider.
        (WTFStringImpl_SummaryProvider): Wrapper around WTFStringImplProvider.
        (WTFAtomicString_SummaryProvider): Ditto.
        (guess_string_length): Walk through the string looking for a null-byte(s).
        (ustring_to_string): Walk through the string, extracting two-byte values, and concatenate them.
        (lstring_to_string): Walk through the string, extracting byte values, and concatenate them.
        (WTFStringImplProvider): 
        (WTFStringImplProvider.__init__):
        (WTFStringImplProvider.get_length): Extract the m_length variable.
        (WTFStringImplProvider.get_data8): Extract the m_data8 variable.
        (WTFStringImplProvider.get_data16): Extract the m_data16 variable.
        (WTFStringImplProvider.to_string): Pass the appropriate data variable to {u,l}string_to_string.
        (WTFStringImplProvider.is_8bit): Check the m_hashAndFlags variable.
        (WTFStringProvider):
        (WTFStringProvider.__init__):
        (WTFStringProvider.stringimpl): Extract the m_impl variable.
        (WTFStringProvider.get_length): Pass through to WTFStringImplProvider.
        (WTFStringProvider.to_string): Ditto.

2012-11-01  Peter Beverloo  <peter@chromium.org>

        [Chromium-Android] Apache doesn't properly clean up ipc semaphores after a layout test run
        https://bugs.webkit.org/show_bug.cgi?id=100950

        Reviewed by Dirk Pranke.

        When a test run would fail to complete due to an exception in one of
        the workers, the HTTP server wouldn't get a chance to gracefully shut
        down. This caused too much IPC semaphores to be left on the server,
        causing Apache to fail to start in subsequent runs.

        By unifying the Android-specific code with other ports, we no longer
        fail to call the ChromiumPort/Base setup_test_run() and clean_up_test_run()
        methods either. Furthermore, the number_of_servers argument for starting
        the HTTP server is now available as well.

        Because not all tests require an HTTP server, it's not guaranteed that
        it will be started. Android depends on this, so add a new method to Port
        and override it for Android: requires_http_server().

        * Scripts/webkitpy/layout_tests/controllers/layout_test_runner.py:
        (LayoutTestRunner.run_tests):
        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (Manager._run_tests):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.to.requires_http_server):
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        (PortTest.test_dont_require_http_server):
        * Scripts/webkitpy/layout_tests/port/chromium_android.py:
        (ChromiumAndroidPort.requires_http_server):
        (ChromiumAndroidPort.start_http_server):
        * Scripts/webkitpy/layout_tests/port/chromium_android_unittest.py:
        (ChromiumAndroidPortTest.test_must_require_http_server):

2012-11-01  Adam Roben  <aroben@webkit.org>

        Crash beneath WKRelease after failed load in MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=100954

        Reviewed by Sam Weinig.

        There were just some simple retain/release bugs.

        * MiniBrowser/mac/WK2BrowserWindowController.m:
        (-[WK2BrowserWindowController updateTextFieldFromURL:]):
        (-[WK2BrowserWindowController updateProvisionalURLForFrame:]):
        Don't try to release null URLs.

        (-[WK2BrowserWindowController updateCommittedURLForFrame:]): Don't
        release a URL for which we don't have ownership.

2012-10-31  Rob Buis  <rbuis@rim.com>

        [BlackBerry] Fix editing/text-iterator/findString-expected.html fail
        https://bugs.webkit.org/show_bug.cgi?id=100902

        Reviewed by Yong Li.

        PR 210039

        Fix the test my using the Page::findString method instead of our own in-page searcher.
        This also syncs some of the changes we did regarding String usage.

        * DumpRenderTree/blackberry/DumpRenderTree.cpp:
        (BlackBerry::WebKit::DumpRenderTree::dumpFramesAsText):
        (BlackBerry::WebKit::dumpHistoryItem):
        (BlackBerry::WebKit::dumpBackForwardListForWebView):
        (BlackBerry::WebKit::DumpRenderTree::dump):
        (BlackBerry::WebKit::DumpRenderTree::didFinishDocumentLoadForFrame):
        (BlackBerry::WebKit::DumpRenderTree::didReceiveTitleForFrame):
        (BlackBerry::WebKit::DumpRenderTree::runJavaScriptAlert):
        * DumpRenderTree/blackberry/DumpRenderTreeBlackBerry.h:
        (DumpRenderTree):
        * DumpRenderTree/blackberry/TestRunnerBlackBerry.cpp:
        (TestRunner::setMockGeolocationError):
        (TestRunner::layerTreeAsText):
        (TestRunner::findString):
        (TestRunner::setStorageDatabaseIdleInterval):

2012-11-01  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Add File Chooser dialog support to MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=100822

        Reviewed by Kenneth Rohde Christiansen.

        Add very basic file picker dialog to MiniBrowser so that
        the user can select a file from the file system when
        clicking an input element of type "file".

        * MiniBrowser/efl/main.c:
        (close_file_picker):
        (on_filepicker_deletion):
        (on_fileselector_done):
        (on_file_chooser_request):
        (window_create):

2012-11-01  Yael Aharon  <yael.aharon@intel.com>

        Unreviewed. Change my email address.

        * Scripts/webkitpy/common/config/committers.py:

2012-11-01  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Double clicks/taps aren't passed down to the page
        https://bugs.webkit.org/show_bug.cgi?id=100949

        Reviewed by Kenneth Rohde Christiansen.

        Touch mocking shouldn't transform double click events as well,
        this adds an extra touch update between clicks which prevents
        double-tap detection from triggering on web pages.

        Tested on the mobile version of Google maps.

        * MiniBrowser/qt/MiniBrowserApplication.cpp:
        (MiniBrowserApplication::notify):

2012-10-31  Dirk Pranke  <dpranke@chromium.org>

        NRWT: lint warnings don't show up by default
        https://bugs.webkit.org/show_bug.cgi?id=100914

        Reviewed by Ryosuke Niwa.

        NRWT wasn't printing any warnings if you had errors in your
        TestExpectations files; this means you would only notice this
        with --lint-test-files, which is probably bad. I'm not sure
        when this requested, but perhaps when we changed the
        warnings to not be fatal if you weren't linting the files.

        Now they're still not fatal, but at least we print them.

        Also fix one warning message where we were printing the test name twice.

        * Scripts/webkitpy/layout_tests/models/test_expectations.py:
        (TestExpectationsModel._already_seen_better_match):
        (TestExpectations._report_warnings):
        * Scripts/webkitpy/layout_tests/models/test_expectations_unittest.py:
        (MiscTests.test_parse_warnings_are_logged_if_not_in_lint_mode(self): Added.

2012-10-31  Terry Anderson  <tdanderson@chromium.org>

        Missing stderr output when using run-webkit-tests
        https://bugs.webkit.org/show_bug.cgi?id=100709

        Reviewed by Dirk Pranke.

        Appends #EOF to the end of the stderr output only at the end of a test,
        not possibly part-way through. This will allow all of the stderr output 
        to appear on the results page after running run-webkit-tests.

        * DumpRenderTree/chromium/TestEventPrinter.cpp:
        (TestEventPrinter::handleTextFooter):
        (TestEventPrinter::handleTestFooter):

2012-10-30  Mark Lam  <mark.lam@apple.com>

        A JSC printf (support for %J+s and %b).
        https://bugs.webkit.org/show_bug.cgi?id=100566.

        Reviewed by Michael Saboff.

        Added regression tests for VMInspector::fprintf() sprintf() and snprintf().

        * TestWebKitAPI/TestWebKitAPI.xcodeproj/project.pbxproj:
        * TestWebKitAPI/Tests/JavaScriptCore: Added.
        * TestWebKitAPI/Tests/JavaScriptCore/VMInspector.cpp: Added.

2012-10-31  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        Added viewport at-rule to the CSS parser and tokenizer
        https://bugs.webkit.org/show_bug.cgi?id=95961

        Reviewed by Kenneth Rohde Christiansen.

        Enable CSS Device Adaptation by default on EFL.

        * Scripts/webkitperl/FeatureList.pm:

2012-10-31  Terry Anderson  <tdanderson@chromium.org>

        [touchadjustment] touch-links-two-finger-tap test pass incorrectly
        https://bugs.webkit.org/show_bug.cgi?id=100619

        Reviewed by Antonio Gomes.

        Store the touch area when sending a GestureTwoFingerTap event.

        * DumpRenderTree/chromium/TestRunner/src/EventSender.cpp:
        (WebTestRunner):
        (WebTestRunner::EventSender::gestureEvent):

2012-10-31  Dirk Pranke  <dpranke@chromium.org>

        nrwt is not killing stuck DRTs on chromium win
        https://bugs.webkit.org/show_bug.cgi?id=100886

        Unreviewed, build fix.

        In the original implementation of NRWT for Chromium, we used
        to assume that DRT would always manage to exit on its own and
        so NRWT wouldn't attempt to kill DRT if it was stuck (this was the
        "hung worker" problem, and meant that if DRT hung, NRWT would hang).

        Eventually, we merged the chromium code with the other ports and
        now will always try to shut down DRTs if a test times out, but as
        part of that merge we left in a code path where we wouldn't
        shut the driver down on windows. This was resulting in stray
        DRTs being left around, and NRWT sometimes not exiting cleanly as
        a result.

        No unit tests added because this was a windows-only code path (hence
        hard to test) and that is now gone.

        * Scripts/webkitpy/layout_tests/port/server_process.py:
        (ServerProcess.stop):

2012-10-31  Ami Fischman  <fischman@chromium.org>

        [chromium] DRT and WTR should clear the cache between tests
        https://bugs.webkit.org/show_bug.cgi?id=93195

        Reviewed by Tony Chang.

        This change makes chromium DRT match the GTK+, Qt, and EFL ports.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::resetTestController): added a WebCache::clear() call to achieve the goal of the bug.

2012-10-31  Dirk Pranke  <dpranke@chromium.org>

        Fix typos introduced in r133061.
        Unreviewed, build fix.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results.js:
        * Scripts/webkitpy/tool/servers/reflectionhandler.py:
        (ReflectionHandler._serve_file):

2012-10-31  Dirk Pranke  <dpranke@chromium.org>

        garden-o-matic should work for local results
        https://bugs.webkit.org/show_bug.cgi?id=100805

        Reviewed by Adam Barth.

        This is the next step in making garden-o-matic replace
        'webkit-patch rebaseline-server' and be able to deal with local
        results. garden-o-matic now accepts a '--results-directory' option
        that will point to a layout-test-results directory. At the moment
        this will only work if you are also filtering to a single bot/
        platform at a time (we can't handle multiple bots' worth of local
        results, but that is a logical next step).

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/garden-o-matic.html:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results.js:
        * Scripts/webkitpy/tool/commands/gardenomatic.py:
        (GardenOMatic.__init__):
        (GardenOMatic.execute):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (AbstractRebaseliningCommand):
        (RebaselineTest.__init__):
        (RebaselineTest._rebaseline_test):
        (RebaselineTest._rebaseline_test_and_update_expectations):
        (RebaselineTest.execute):
        (AbstractParallelRebaselineCommand._rebaseline_commands):
        (AbstractParallelRebaselineCommand._rebaseline):
        (RebaselineJson.__init__):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (_BaseTestCase):
        (test_rebaseline_updates_expectations_file):
        (test_rebaseline_does_not_include_overrides):
        (test_rebaseline_test):
        (test_rebaseline_test_and_print_scm_changes):
        (test_rebaseline_and_copy_test):
        (test_rebaseline_and_copy_test_no_existing_result):
        (test_rebaseline_and_copy_test_with_lion_result):
        (test_rebaseline_and_copy_no_overwrite_test):
        (test_rebaseline_test_internal_with_move_overwritten_baselines_to):
        (TestRebaselineJson.test_rebaseline_all):
        (TestRebaselineJson.test_rebaseline_debug):
        (TestRebaselineJson.test_move_overwritten):
        (TestRebaselineJson.test_no_optimize):
        (TestRebaselineExpectations.test_rebaseline_expectations):
        * Scripts/webkitpy/tool/servers/gardeningserver.py:
        (GardeningHTTPRequestHandler.rebaselineall):
        (GardeningHTTPRequestHandler):
        (GardeningHTTPRequestHandler.localresult):
        * Scripts/webkitpy/tool/servers/reflectionhandler.py:
        (ReflectionHandler.do_POST):
        (ReflectionHandler):
        (ReflectionHandler.do_HEAD):

2012-10-31  Dirk Pranke  <dpranke@chromium.org>

        garden-o-matic should support gardening a single port and specifying how to deal with overwritten baselines
        https://bugs.webkit.org/show_bug.cgi?id=100563

        Reviewed by Ojan Vafai.

        This patch starts the process of making garden-o-matic more useful for
        bringing up a single new port in two ways. The goal is to fully
        obsolete webkit-patch rebaseline-server.
        
        First, it adds support for the --platform arguments to garden-o-matic
        (so that the UI will default to the right cluster of bots), and if the platform arg
        specifies a single bot, filters the results down to just that bot.

        Second, it adds support for --move-overwritten-baselines and changes
        the implementation of the move_overwritten_baselines setting in builders.py
        so that it is only used if this flag is provided.

        Future patches will make it possible to use local copies of the build
        results (rather than going to the bots) and other optimizations to make
        it faster to review lots of changes on a single bot.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/garden-o-matic.html:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        (.):
        * Scripts/webkitpy/layout_tests/port/builders.py:
        * Scripts/webkitpy/tool/commands/gardenomatic.py:
        (GardenOMatic):
        (GardenOMatic.execute):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (AbstractRebaseliningCommand):
        (AbstractRebaseliningCommand.__init__):
        (RebaselineTest):
        (OptimizeBaselines):
        (AnalyzeBaselines):
        (AbstractParallelRebaselineCommand):
        (AbstractParallelRebaselineCommand._rebaseline_commands):
        (AbstractParallelRebaselineCommand._rebaseline):
        (Rebaseline.__init__):
        * Scripts/webkitpy/tool/servers/gardeningserver.py:
        (GardeningHTTPServer.url):
        (GardeningHTTPRequestHandler.rebaselineall):

2012-10-31  Dirk Pranke  <dpranke@chromium.org>

        test-webkitpy: fix running modules and classes on the command line
        https://bugs.webkit.org/show_bug.cgi?id=100787

        Reviewed by Eric Seidel.

        Handling modules and classes are arguments on the command line
        was broken due to the way we were parsing test names looking for
        parallel and serial tests.

        * Scripts/webkitpy/test/main.py:
        (Tester._test_names):
        (_Loader):
        * Scripts/webkitpy/test/main_unittest.py:
        (TestStubs.integration_test_empty):
        (TestStubs):
        (TestStubs.serial_test_empty):
        (TestStubs.serial_integration_test_empty):
        (TesterTest._find_test_names):
        (TesterTest):
        (TesterTest.test_individual_names_are_not_run_twice):
        (TesterTest.test_integration_tests_are_not_found_by_default):
        (TesterTest.test_integration_tests_are_found):

2012-10-31  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: refactor common command line arguments for --platform, rebaseline commands
        https://bugs.webkit.org/show_bug.cgi?id=100800

        Reviewed by Ojan Vafai.

        This change shuffles around how we share command-line options
        between NRWT and the various webkit-patch rebaselining commands.

        There are no functional changes in this patch but it should make
        things clearer and will be useful in a couple of upcoming patches.

        * Scripts/webkitpy/layout_tests/port/__init__.py:
        * Scripts/webkitpy/layout_tests/port/factory.py:
        (platform_options):
        (configuration_options):
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (parse_args):
        * Scripts/webkitpy/tool/commands/queries.py:
        (PrintExpectations.__init__):
        (PrintBaselines.__init__):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (AbstractRebaseliningCommand):
        (AbstractRebaseliningCommand.__init__):
        (RebaselineTest.__init__):
        (OptimizeBaselines.__init__):
        (AnalyzeBaselines.__init__):
        (AbstractParallelRebaselineCommand):
        (RebaselineJson.__init__):
        (RebaselineExpectations.__init__):
        (Rebaseline.__init__):

2012-10-31  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        [NRWT] Xvfb driver is leaking application cache files
        https://bugs.webkit.org/show_bug.cgi?id=100864

        Reviewed by Kenneth Rohde Christiansen.

        Application Cache looks for XDG_CACHE_HOME which is now
        prepended with DUMPRENDERTREE_TEMP and cleaned up when
        the test worker finishes his job.

        * Scripts/webkitpy/layout_tests/port/xvfbdriver.py:
        (XvfbDriver._start):

2012-10-31  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        [EFL] DRT doesn't clean up after itself
        https://bugs.webkit.org/show_bug.cgi?id=100346

        Reviewed by Kenneth Rohde Christiansen.

        The test driver exports an environment variable DUMPRENDERTREE_TEMP
        which is used by both DRT and WTR as the folder for storing icons,
        databases, application cache, etc, overriding the default XDG_* path.

        We don't need to create these folders because in fact, they are never
        used and also never cleaned. Things created inside DUMPRENDERTREE_TEMP
        are automatically removed after the test run.

        * Scripts/webkitpy/layout_tests/port/efl.py:
        (EflPort.setup_environ_for_server):

2012-10-31  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        [WTR] WebKitTestRunner is not cleaning up the icon database
        https://bugs.webkit.org/show_bug.cgi?id=100678

        Reviewed by Kenneth Rohde Christiansen.

        The icon database was not being set to the temporary folder created for
        the test runner by the test driver, which is removed automatically
        after the run.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):

2012-10-31  Mike West  <mkwst@chromium.org>

        Script run from an isolated world should bypass a page's CSP.
        https://bugs.webkit.org/show_bug.cgi?id=97398

        Reviewed by Adam Barth.

        * DumpRenderTree/chromium/DRTTestRunner.cpp:
        (DRTTestRunner::DRTTestRunner):
        (DRTTestRunner::setIsolatedWorldContentSecurityPolicy):
        * DumpRenderTree/chromium/DRTTestRunner.h:
        (DRTTestRunner):
            Adding a mechanism to set the Content Security Policy for an
            isolated world to Chromium's testRunner.

2012-10-31  Michał Pakuła vel Rutka  <m.pakula@samsung.com>

        [EFL][DRT] EventSender requires contextClick implementation
        https://bugs.webkit.org/show_bug.cgi?id=86091

        Reviewed by Gyuyoung Kim.

        Add contextClick for DumpRenderTreeEventSender basing on WebKit GTK
        implementation.

        * DumpRenderTree/efl/EventSender.cpp:
        (getMenuItemTitleCallback):
        (setMenuItemTitleCallback):
        (menuItemClickCallback):
        (contextClickCallback):

2012-10-30  Sudarsana Nagineni  <sudarsana.nagineni@intel.com>

        [WTR] Memory leaks in TestWebKitAPI::didReceiveMessageFromInjectedBundle()
        https://bugs.webkit.org/show_bug.cgi?id=100770

        Reviewed by Sam Weinig.

        Adopt strings returned by WKStringCreateWithUTF8CString() in
        didReceiveMessageFromInjectedBundle() to avoid memory leaks.

        * TestWebKitAPI/Tests/WebKit2/WillSendSubmitEvent.cpp:
        (TestWebKitAPI::didReceiveMessageFromInjectedBundle):

2012-10-30  Kangil Han  <kangil.han@samsung.com>

        Fix broken python unit test
        https://bugs.webkit.org/show_bug.cgi?id=100810

        Reviewed by Dirk Pranke.

        BUG 100755 has broken python unit test, e.g. assertion fail, since it modified baseline path.
        Therefore, this patch fixes it.

        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (TestRebaselineTest.test_baseline_directory):

2012-10-30  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch rebaseline*: add more helpful logging
        https://bugs.webkit.org/show_bug.cgi?id=100562

        Reviewed by Ojan Vafai.

        This change rewires the garden-o-matic and rebaseline* commands
        in webkit-patch so that --verbose propagates through all the
        subcommand invocations properly, and cleans up the logging so
        that you can actually tell what is happening. For now, we
        leave all of the logging at the logging.DEBUG level, which
        means that it gets mixed in will all the other debug logging noise
        and is harder to read, but we'll fix that in subsequent patches.

        * Scripts/webkitpy/common/checkout/baselineoptimizer.py:
        (BaselineOptimizer._platform):
        (BaselineOptimizer._move_baselines):
        (BaselineOptimizer.optimize):
        * Scripts/webkitpy/tool/commands/gardenomatic.py:
        (GardenOMatic.execute):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineTest._copy_existing_baseline):
        (RebaselineTest._rebaseline_test):
        (OptimizeBaselines._optimize_baseline):
        (OptimizeBaselines.execute):
        (AbstractParallelRebaselineCommand._run_webkit_patch):
        (AbstractParallelRebaselineCommand._rebaseline_commands):
        (AbstractParallelRebaselineCommand._files_to_add):
        (AbstractParallelRebaselineCommand._optimize_baselines):
        (AbstractParallelRebaselineCommand._rebaseline):
        (RebaselineExpectations._add_tests_to_rebaseline_for_port):
        (Rebaseline.execute):
        * Scripts/webkitpy/tool/servers/gardeningserver.py:
        (GardeningHTTPServer.__init__):
        (GardeningHTTPRequestHandler):
        (GardeningHTTPRequestHandler._run_webkit_patch):
        (GardeningHTTPRequestHandler.rebaselineall):

2012-10-30  Dirk Pranke  <dpranke@chromium.org>

        clean up tests for webkit-patch rebaseline* commands
        https://bugs.webkit.org/show_bug.cgi?id=100793

        Reviewed by Ojan Vafai.

        The tests in rebaseline_unittest.py had a lot of code cloning,
        and many of the tests tested whether things passed or failed by
        looking at what was logged instead of what was actually done;
        as a result the tests were kinda hard to understand and harder to
        maintain.

        This patch adds hooks to MockWeb() and MockExecutive() so we can
        directly see which URLs were fetched and calls invoked, and
        then reworks all of the unit tests to be easier to follow and
        maintain and not sensitive to the logging. Also there were a
        couple of tests that were redundant.

        There are no functional changes in this patch, and I verified that
        the coverage remains the same.

        * Scripts/webkitpy/common/net/web_mock.py:
        (MockWeb.__init__):
        (MockWeb.get_binary):
        * Scripts/webkitpy/common/system/executive_mock.py:
        (MockExecutive.__init__):
        (MockExecutive.run_command):
        (MockExecutive.kill_all):
        (MockExecutive):
        (MockExecutive.kill_process):
        (MockExecutive.popen):
        (MockExecutive.run_in_parallel):
        (MockExecutive2):
        (MockExecutive2.__init__):
        (MockExecutive2.run_command):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (_BaseTestCase):
        (_BaseTestCase.setUp):
        (_BaseTestCase._expand):
        (_BaseTestCase._read):
        (_BaseTestCase._write):
        (_BaseTestCase._zero_out_test_expectations):
        (TestRebaselineTest):
        (TestRebaselineTest.test_baseline_directory):
        (TestRebaselineTest.test_rebaseline_updates_expectations_file_noop):
        (test_rebaseline_updates_expectations_file):
        (test_rebaseline_does_not_include_overrides):
        (test_rebaseline_test):
        (test_rebaseline_test_and_print_scm_changes):
        (test_rebaseline_and_copy_test):
        (test_rebaseline_and_copy_test_no_existing_result):
        (test_rebaseline_and_copy_test_with_lion_result):
        (test_rebaseline_and_copy_no_overwrite_test):
        (test_rebaseline_test_internal_with_move_overwritten_baselines_to):
        (TestRebaselineJson):
        (TestRebaselineJson.setUp):
        (TestRebaselineJson.tearDown):
        (TestRebaselineJson.test_rebaseline_all):
        (TestRebaselineJson.test_rebaseline_debug):
        (TestRebaseline):
        (TestRebaseline.test_tests_to_update):
        (TestRebaseline.test_rebaseline):
        (TestRebaseline.test_rebaseline.rebaseline_stub):
        (TestRebaselineExpectations):
        (TestRebaselineExpectations.setUp):
        (TestRebaselineExpectations.test_rebaseline_expectations):
        (TestRebaselineExpectations.test_rebaseline_expectations_noop):
        (TestRebaselineExpectations.disabled_test_overrides_are_included_correctly):

2012-10-30  Dirk Pranke  <dpranke@chromium.org>

        test-webkitpy: fix import of coverage so that it works in a clean install
        https://bugs.webkit.org/show_bug.cgi?id=100780

        Reviewed by Tony Chang.

        The coverage module is written so that the parent directory needs
        to be in PYTHONPATH; work around that ...

        * Scripts/webkitpy/test/main_unittest.py:
        (TestStubs.test_empty):
        (TesterTest.test_individual_names_are_not_run_twice):
        (TesterTest):
        (TesterTest.integration_test_coverage_works):
        * Scripts/webkitpy/thirdparty/__init__.py:
        (AutoinstallImportHook._install_coverage):

2012-10-30  Anders Carlsson  <andersca@apple.com>

        Another build fix.

        * TestWebKitAPI/Tests/WebKit2/WebArchive.cpp:
        (TestWebKitAPI::didReceiveMessageFromInjectedBundle):

2012-10-30  Anders Carlsson  <andersca@apple.com>

        Build fix.

        * WebKitTestRunner/mac/EventSenderProxy.mm:
        (WTR::EventSenderProxy::mouseScrollBy):

2012-10-30  Rick Byers  <rbyers@chromium.org>

        [touchadjustment] touch-links-longpress tests passes incorrectly
        https://bugs.webkit.org/show_bug.cgi?id=96810

        Reviewed by Antonio Gomes.

        Add support for suppling width/height information for longpress
        gesture (as for other gestures like tapDown) for the purposes
        of touch adjustment.

        * DumpRenderTree/chromium/TestRunner/src/EventSender.cpp:
        (WebTestRunner):
        (WebTestRunner::EventSender::gestureEvent):

2012-10-29  Anders Carlsson  <andersca@apple.com>

        Build WebKit as C++11 on Mac
        https://bugs.webkit.org/show_bug.cgi?id=100720

        Reviewed by Daniel Bates.

        * DumpRenderTree/mac/Configurations/Base.xcconfig:
        * MiniBrowser/Configurations/Base.xcconfig:
        * TestWebKitAPI/Configurations/Base.xcconfig:
        * WebKitTestRunner/Configurations/Base.xcconfig:
        Add CLANG_CXX_LANGUAGE_STANDARD=gnu++0x.

2012-10-30  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][JHBUILD] Update EFL libraries to v1.7.1 stable release
        https://bugs.webkit.org/show_bug.cgi?id=100759

        Reviewed by Kenneth Rohde Christiansen.

        Update Bump EFL libraries to the new stable release (v1.7.1)
        in JHBuild to pull the latest bug fixes.

        * efl/jhbuild.modules:

2012-10-29  Anders Carlsson  <andersca@apple.com>

        String::createCFString should return a RetainPtr
        https://bugs.webkit.org/show_bug.cgi?id=100419

        Reviewed by Andreas Kling.

        Update callers of String::createCFString.

        * WebKitTestRunner/InjectedBundle/mac/InjectedBundlePageMac.mm:
        (WTR::InjectedBundlePage::platformDidStartProvisionalLoadForFrame):

2012-10-30  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [WK2][WTR] WebKitTestRunner needs testRunner.queueLoadHTMLString
        https://bugs.webkit.org/show_bug.cgi?id=100747

        Reviewed by Kenneth Rohde Christiansen.

        Added testRunner.queueLoadHTMLString implementation.

        * WebKitTestRunner/InjectedBundle/Bindings/TestRunner.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::queueLoadHTMLString):
        (WTR):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (InjectedBundle):
        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        (WTR::TestRunner::queueLoadHTMLString):
        (WTR):
        * WebKitTestRunner/InjectedBundle/TestRunner.h:
        (TestRunner):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/WorkQueueManager.cpp:
        (WTR::WorkQueueManager::queueLoadHTMLString):
        (WTR):
        * WebKitTestRunner/WorkQueueManager.h:
        (WorkQueueManager):

2012-10-30  Kangil Han  <kangil.han@samsung.com>

        [EFL] Baseline search path should consider both WK1 and WK2 on layout test.
        https://bugs.webkit.org/show_bug.cgi?id=100755

        Reviewed by Gyuyoung Kim.

        Current implementation doesn't consider WK1 case in baseline search path.
        Therefore, this patch fixes it.

        * Scripts/webkitpy/layout_tests/port/efl.py:
        (EflPort.default_baseline_search_path):

2012-10-30  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [QT][DRT] Remove unneeded testRunner.setMediaType() implementation
        https://bugs.webkit.org/show_bug.cgi?id=100740

        Reviewed by Kenneth Rohde Christiansen.

        Removed unneeded testRunner.setMediaType() implementation, as tests use
        cross-platform window.internals.settings.setMediaTypeOverride instead.

        * DumpRenderTree/qt/TestRunnerQt.cpp:
        * DumpRenderTree/qt/TestRunnerQt.h:
        (TestRunner):

2012-10-30  Kangil Han  <kangil.han@samsung.com>

        [EFL][DRT] Bitmap should show whole view area.
        https://bugs.webkit.org/show_bug.cgi?id=100642

        Reviewed by Gyuyoung Kim.

        css sticky position test cases haven't been passed even though implementation has been landed by BUG 95182.
        This is because current create bitmap implementation refers to geometry position that considers scroll movement even though
        paint does it. Therefore, this patch always reflects current view size and remove duplicated graphic operation to dump correct bitmap image.

        * DumpRenderTree/efl/PixelDumpSupportEfl.cpp:
        (createBitmapContextFromWebView):

2012-10-30  Jinwoo Song  <jinwoo7.song@samsung.com>

        [EFL] Refactor tooltip callback signal in WebKit1
        https://bugs.webkit.org/show_bug.cgi?id=100571

        Reviewed by Gyuyoung Kim.

        Separate tooltip callback signal into 'tooltip,text,set'
        and 'tooltip,text,unset' to be consistent with WebKit2.

        * EWebLauncher/main.c:
        (on_tooltip_text_set):
        (on_tooltip_text_unset):
        (browserCreate):

2012-10-29  Csaba Osztrogonác  <ossy@webkit.org>

        Unreviewed, rolling out r132819.
        http://trac.webkit.org/changeset/132819
        https://bugs.webkit.org/show_bug.cgi?id=100388

        It made layout testing 40% slower and storage tests assert

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):
        (WebCore::DumpRenderTree::dump):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:
        (DumpRenderTree):
        * DumpRenderTree/qt/TestRunnerQt.cpp:
        (TestRunner::reset):
        * DumpRenderTree/qt/TestRunnerQt.h:
        (TestRunner):

2012-10-29  Jochen Eisinger  <jochen@chromium.org>

        [chromium] TestRunner needs to compile ChromiumCurrentTime and ChromiumThreading in components build
        https://bugs.webkit.org/show_bug.cgi?id=100658

        Reviewed by Tony Chang.

        Before, this was compiled into DumpRenderTree. I also dropped the
        include_dirs and dependencies block as TestRunner already has them.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:

2012-10-29  Takashi Sakamoto  <tasak@google.com>

        Unreviewed. Adding myself as a committer.

        * Scripts/webkitpy/common/config/committers.py:

2012-10-28  Mark Rowe  <mrowe@apple.com>

        Simplify Xcode configuration settings that used to vary between OS versions.

        Reviewed by Dan Bernstein.

        * DumpRenderTree/mac/Configurations/Base.xcconfig:
        * DumpRenderTree/mac/Configurations/DebugRelease.xcconfig:
        * MiniBrowser/Configurations/Base.xcconfig:
        * MiniBrowser/Configurations/DebugRelease.xcconfig:
        * TestWebKitAPI/Configurations/Base.xcconfig:
        * TestWebKitAPI/Configurations/DebugRelease.xcconfig:
        * WebKitTestRunner/Configurations/Base.xcconfig:
        * WebKitTestRunner/Configurations/DebugRelease.xcconfig:

2012-10-28  Mark Rowe  <mrowe@apple.com>

        Remove references to unsupported OS and Xcode versions.

        Reviewed by Anders Carlsson.

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        * DumpRenderTree/mac/Configurations/Base.xcconfig:
        * DumpRenderTree/mac/Configurations/CompilerVersion.xcconfig: Removed.
        * DumpRenderTree/mac/Configurations/DebugRelease.xcconfig:
        * MiniBrowser/Configurations/Base.xcconfig:
        * MiniBrowser/Configurations/CompilerVersion.xcconfig: Removed.
        * MiniBrowser/Configurations/DebugRelease.xcconfig:
        * TestWebKitAPI/Configurations/Base.xcconfig:
        * TestWebKitAPI/Configurations/CompilerVersion.xcconfig: Removed.
        * TestWebKitAPI/Configurations/DebugRelease.xcconfig:
        * TestWebKitAPI/TestWebKitAPI.xcodeproj/project.pbxproj:
        * WebKitTestRunner/Configurations/Base.xcconfig:
        * WebKitTestRunner/Configurations/CompilerVersion.xcconfig: Removed.
        * WebKitTestRunner/Configurations/DebugRelease.xcconfig:
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:

2012-10-26  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: change non-verbose log format for webkit-patch
        https://bugs.webkit.org/show_bug.cgi?id=100561

        Reviewed by Ojan Vafai.

        Logging the module name and the log level is annoying and nearly useless.
        For starters, this change removes that unless you are doing verbose/
        debug logging. In the future we should split out the concepts of
        verbose and debug logging (like we did in test-webkitpy and
        run-webkit-tests) so that you could get this in debug logging.

        * Scripts/webkitpy/common/system/logutils.py:
        (_default_handlers):
        (configure_logging):
        * Scripts/webkitpy/common/system/logutils_unittest.py:
        (ConfigureLoggingTest.test_info_message):
        (ConfigureLoggingTest):
        (ConfigureLoggingTest.test_debug_message):
        (ConfigureLoggingTest.test_two_messages):
        (ConfigureLoggingVerboseTest):
        (ConfigureLoggingVerboseTest._logging_level):
        (ConfigureLoggingVerboseTest.test_info_message):
        (ConfigureLoggingVerboseTest.test_debug_message):
        (ConfigureLoggingCustomLevelTest.test_logged_message):

2012-10-29  Christophe Dumez  <christophe.dumez@intel.com>

        [CMAKE] Add TestNetscapePlugIn/Tests/NPRuntimeCallsWithNullNPP.cpp to CMakeLists.txt
        https://bugs.webkit.org/show_bug.cgi?id=100681

        Reviewed by Anders Carlsson.

        Add TestNetscapePlugIn/Tests/NPRuntimeCallsWithNullNPP.cpp to CMake since
        it is needed by plugins/npruntime/npruntime-calls-with-null-npp.html
        layout test.

        * DumpRenderTree/TestNetscapePlugIn/CMakeLists.txt:

2012-10-29  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Flaky security tests
        https://bugs.webkit.org/show_bug.cgi?id=100388

        Reviewed by Jocelyn Turcotte.

        Disable text dumping and load a blank URL to ensure the documentLoader is cleared 
        before we start dumping text for the new page. Otherwise messages from the old page
        may end up in the text output of the new test.

        This matches what WebKitTestRunner does, and reuses the Qt code for waiting for flag.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):
        (WebCore::runUntil):
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):
        (WebCore::DumpRenderTree::finishedResetting):
        (WebCore::DumpRenderTree::dump):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:
        (DumpRenderTree):
        * DumpRenderTree/qt/TestRunnerQt.cpp:
        (TestRunner::resetDumping):
        (TestRunner::reset):
        * DumpRenderTree/qt/TestRunnerQt.h:
        (TestRunner):

2012-10-29  Christophe Dumez  <christophe.dumez@intel.com>

        [WK2][WKTR] Enable Shadow DOM at runtime if compiled with SHADOW_DOM support
        https://bugs.webkit.org/show_bug.cgi?id=100668

        Reviewed by Kenneth Rohde Christiansen.

        Enable Shadow DOM functionality at run time in WebKitTestRunner
        if compiled with SHADOW_DOM flag set. This is needed to run
        the Shadow DOM layout tests.

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::beginTesting):

2012-10-29  Yael Aharon  <yael.aharon@intel.com>

        [EFL][AC] Fix bugs preventing us from running layout tests with AC turned on
        https://bugs.webkit.org/show_bug.cgi?id=100598

        Reviewed by Kenneth Rohde Christiansen.

        Make sure to use opengl_x11 engine when AC is turned on and X11 is in use.
        We cannot create a gl context otherwise.

        * MiniBrowser/efl/main.c:
        (elm_main):
        * WebKitTestRunner/efl/PlatformWebViewEfl.cpp:
        (WTR::initEcoreEvas):
        * DumpRenderTree/efl/DumpRenderTree.cpp:
        (initEcoreEvas):
        * EWebLauncher/efl/main.c:
        (windowCreate):

2012-10-29  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [EFL][WK2] REGRESSION(r132342): fast/events/frame-tab-focus.html fails
        https://bugs.webkit.org/show_bug.cgi?id=100646

        Reviewed by Kenneth Rohde Christiansen.

        * WebKitTestRunner/efl/PlatformWebViewEfl.cpp:
        (WTR::PlatformWebView::focus): Improve the check we perform to
        decide whether the focus should be taken out of the view before
        focusing it again so that we do not unnecessarily unfocus it and
        cause blur/focus events to be triggered. Instead of just verifying
        if the Evas_Object representing the view has focus, use the WK C
        API to check that the currently focused frame is not the main
        frame.

2012-10-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r132782.
        http://trac.webkit.org/changeset/132782
        https://bugs.webkit.org/show_bug.cgi?id=100653

        It made 400+ tests fail and 180 tests flakey on Qt (Requested
        by Ossy on #webkit).

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):

2012-10-29  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Flaky security tests
        https://bugs.webkit.org/show_bug.cgi?id=100388

        Reviewed by Jocelyn Turcotte.

        Disable text output and load a blank URL to ensure the documentLoader is cleared
        before we start dumping text for the new page. Otherwise messages from the old page
        may end up in the text output of the new test.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):

2012-10-29  Jochen Eisinger  <jochen@chromium.org>

        [chromium] remove remaining usages of webkit_support from the TestRunner library
        https://bugs.webkit.org/show_bug.cgi?id=100344

        Reviewed by Adam Barth.

        The most important part is to not rely on calling out to gdk/X11 to
        translate keycodes to hardware keycodes, as this is not possible inside
        the sandbox.

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/DRTTestRunner.h:
        (WebKit):
        (webkit_support):
        * DumpRenderTree/chromium/TestRunner/public/WebTestDelegate.h:
        (WebTestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/CppVariant.h:
        * DumpRenderTree/chromium/TestRunner/src/EventSender.cpp:
        (WebTestRunner):
        (WebTestRunner::EventSender::doDragDrop):
        (WebTestRunner::EventSender::updateClickCountForButton):
        (WebTestRunner::EventSender::mouseDown):
        (WebTestRunner::EventSender::mouseUp):
        (WebTestRunner::EventSender::mouseMoveTo):
        (WebTestRunner::EventSender::keyDown):
        (WebTestRunner::EventSender::replaySavedEvents):
        (WebTestRunner::EventSender::contextClick):
        (WebTestRunner::EventSender::beginDragWithFiles):
        (WebTestRunner::EventSender::sendCurrentTouchEvent):
        (WebTestRunner::EventSender::handleMouseWheel):
        (WebTestRunner::EventSender::gestureEvent):
        (WebTestRunner::EventSender::gestureFlingCancel):
        (WebTestRunner::EventSender::gestureFlingStart):
        * DumpRenderTree/chromium/TestRunner/src/KeyCodeMapping.cpp: Added.
        (WebTestRunner):
        (WebTestRunner::NativeKeyCodeForWindowsKeyCode):
        * DumpRenderTree/chromium/TestRunner/src/KeyCodeMapping.h: Copied from Tools/DumpRenderTree/chromium/TestRunner/src/TestRunner.h.
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/TestDelegate.h:
        (TestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/TestRunner.cpp:
        * DumpRenderTree/chromium/TestRunner/src/TestRunner.h:
        * DumpRenderTree/chromium/TestRunner/src/WebTestInterfaces.cpp:
        (WebTestInterfaces::Internal):
        (WebTestRunner::WebTestInterfaces::Internal::getCurrentTimeInMillisecond):
        (WebTestRunner):
        (WebTestRunner::WebTestInterfaces::Internal::getAbsoluteWebStringFromUTF8Path):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::getCurrentTimeInMillisecond):
        (WebViewHost::getAbsoluteWebStringFromUTF8Path):
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost):

2012-10-29  Jonathan Dong  <jonathan.dong@torchmobile.com.cn>

        Unreviewed. Add jonathan.dong@torchmobile.com.cn as a committer.
        https://bugs.webkit.org/show_bug.cgi?id=100629

        * Scripts/webkitpy/common/config/committers.py:

2012-10-27  Dan Bernstein  <mitz@apple.com>

        REAL_PLATFORM_NAME build setting is no longer needed
        https://bugs.webkit.org/show_bug.cgi?id=100587

        Reviewed by Mark Rowe.

        Removed the definition of REAL_PLATFORM_NAME and replaced references to it with references
        to PLATFORM_NAME.

        * DumpRenderTree/mac/Configurations/Base.xcconfig:
        * DumpRenderTree/mac/Configurations/CompilerVersion.xcconfig:
        * DumpRenderTree/mac/Configurations/DebugRelease.xcconfig:
        * MiniBrowser/Configurations/Base.xcconfig:
        * MiniBrowser/Configurations/CompilerVersion.xcconfig:
        * TestWebKitAPI/Configurations/Base.xcconfig:
        * TestWebKitAPI/Configurations/CompilerVersion.xcconfig:
        * WebKitTestRunner/Configurations/Base.xcconfig:
        * WebKitTestRunner/Configurations/CompilerVersion.xcconfig:
        * WebKitTestRunner/Configurations/DebugRelease.xcconfig:

2012-10-26  Anders Carlsson  <andersca@apple.com>

        Crash when making NPRuntime calls with a null NPP pointer
        https://bugs.webkit.org/show_bug.cgi?id=100569

        Reviewed by Darin Adler.

        Add new NPRuntimeCallsWithNullNPP plug-in test.

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        * DumpRenderTree/TestNetscapePlugIn/PluginTest.cpp:
        (PluginTest::NPN_ReleaseVariantValue):
        (PluginTest::netscapeFuncs):
        * DumpRenderTree/TestNetscapePlugIn/PluginTest.h:
        (PluginTest):
        * DumpRenderTree/TestNetscapePlugIn/Tests/NPRuntimeCallsWithNullNPP.cpp: Added.
        (NPRuntimeCallsWithNullNPP):
        (NPRuntimeCallsWithNullNPP::NPRuntimeCallsWithNullNPP):
        (NPRuntimeCallsWithNullNPP::NPP_New):
        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin.vcproj:
        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:
        * GNUmakefile.am:

2012-10-26  Dominic Mazzoni  <dmazzoni@google.com>

        AX: Notification should be sent when accessibilityIsIgnored changes
        https://bugs.webkit.org/show_bug.cgi?id=99547

        Reviewed by Chris Fleizach.

        Add additional accessibility notifications.

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::postAccessibilityNotification):

2012-10-25  Roger Fong  <roger_fong@apple.com>

        Get rid of (<X%) failing output for old-run-webkit-tests.
        https://bugs.webkit.org/show_bug.cgi?id=100447

        Reviewed by Jessie Berlin.

        Not a particularly useful piece of information. It's pretty much never above 1%.
        new-run-webkit-tests does not output this either.

        * Scripts/old-run-webkit-tests:
        (printResults):

2012-10-26  Xianzhu Wang  <wangxianzhu@chromium.org>

        Build bot gives incorrect link to EWS build failure
        https://bugs.webkit.org/show_bug.cgi?id=100436

        Reviewed by Adam Barth.

        * Scripts/webkitpy/tool/bot/commitqueuetask_unittest.py:
        (MockCommitQueue.__init__):
        (MockCommitQueue.command_failed): Return incremental failure_status_id
        (CommitQueueTaskTest.test_red_tree_patch_rejection): Check failure_status_id
        * Scripts/webkitpy/tool/bot/patchanalysistask.py:
        (PatchAnalysisTask._test_patch): Use the failure_status_id of test with patch when test without patch fails and test with patch has unexpected failures.

2012-10-26  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        webkitpy: Pass the `Listen' Apache directive from webkitpy, not the httpd.conf files.
        https://bugs.webkit.org/show_bug.cgi?id=98602

        Reviewed by Dirk Pranke.

        Unify all the different `Listen' directives present in the several
        httpd.conf files we have in LayoutTests/http/conf. For one, we
        were already passing `Listen 127.0.0.1:8000' via webkitpy before,
        and opening the other ports from the conf files.

        The configuration files differed mostly in the way they handled
        IPV6 ports. Some of them did not listen to IPV6 ports because the
        systems which used them sometimes did not have IPV6 support. The
        `http_server_supports_ipv6' method has been added to Port to
        address that. cygwin, on its turn, still seems to use Apache 1.3,
        which does not support IPV6 at all; the newly-added method has a
        special case for that. Plus, perform a socket.getaddrinfo() call
        the same way Apache itself does so we are sure we only enable IPV6
        when setting that up in the httpd server is not going to fail.

        * Scripts/webkitpy/common/system/platforminfo_mock.py:
        (MockPlatformInfo.is_cygwin):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.baseline_version_dir):
        (Port.to.start_websocket_server):
        (Port.to):
        (Port.to.http_server_supports_ipv6):
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        (PortTest.test_http_server_supports_ipv6):
        (PortTest.test_build_path):
        * Scripts/webkitpy/layout_tests/servers/apache_http_server.py:
        (LayoutTestApacheHttpd):
        (LayoutTestApacheHttpd.__init__):

2012-10-26  David Barton  <dbarton@mathscribe.com>

        Unreviewed. Update my IRC nickname to a registered one.

        * Scripts/webkitpy/common/config/committers.py:

2012-10-26  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Fix the LLInt build on Windows
        https://bugs.webkit.org/show_bug.cgi?id=97648

        Reviewed by Tor Arne Vestbø.

        Added BIN_EXTENSION variable - similar to automake - that expands to .exe as suffix for
        executable programs on Windows. Empty otherwise. Also added support for force_build_all
        to allow overriding us disabling build_all for TEMPLATE = app.

        * qmake/mkspecs/features/default_pre.prf:

2012-10-26  Xiaobo Wang  <xbwang@torchmobile.com.cn>

        [BlackBerry] Support pixel tests for BlackBerry DRT
        https://bugs.webkit.org/show_bug.cgi?id=100210

        Reviewed by Rob Buis.

        (The following 2 files are missed in previous patch(r132582), adding them
        again.)

        * DumpRenderTree/blackberry/build: Added.
        * DumpRenderTree/blackberry/src.pro: Added.
        Adds 2 files for building ImageDiff, by Christopher Wells.

2012-10-26  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        Add feature flags for CSS Device Adaptation
        https://bugs.webkit.org/show_bug.cgi?id=95960

        Reviewed by Kenneth Rohde Christiansen.

        * Scripts/webkitperl/FeatureList.pm:

2012-10-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r132552.
        http://trac.webkit.org/changeset/132552
        https://bugs.webkit.org/show_bug.cgi?id=100486

        Makes typeahead tests crash in debug. (Requested by pfeldman
        on #webkit).

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/DRTTestRunner.h:
        * DumpRenderTree/chromium/TestRunner/public/WebTestDelegate.h:
        (WebTestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/CppVariant.h:
        * DumpRenderTree/chromium/TestRunner/src/EventSender.cpp:
        (WebTestRunner):
        (WebTestRunner::EventSender::doDragDrop):
        (WebTestRunner::EventSender::updateClickCountForButton):
        (WebTestRunner::EventSender::mouseDown):
        (WebTestRunner::EventSender::mouseUp):
        (WebTestRunner::EventSender::mouseMoveTo):
        (WebTestRunner::EventSender::keyDown):
        (WebTestRunner::EventSender::replaySavedEvents):
        (WebTestRunner::EventSender::contextClick):
        (WebTestRunner::EventSender::beginDragWithFiles):
        (WebTestRunner::EventSender::sendCurrentTouchEvent):
        (WebTestRunner::EventSender::handleMouseWheel):
        (WebTestRunner::EventSender::gestureEvent):
        (WebTestRunner::EventSender::gestureFlingCancel):
        (WebTestRunner::EventSender::gestureFlingStart):
        * DumpRenderTree/chromium/TestRunner/src/KeyCodeMapping.cpp: Removed.
        * DumpRenderTree/chromium/TestRunner/src/KeyCodeMapping.h: Removed.
        * DumpRenderTree/chromium/TestRunner/src/TestDelegate.h:
        (TestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/TestRunner.cpp:
        * DumpRenderTree/chromium/TestRunner/src/TestRunner.h:
        (WebKit):
        (webkit_support):
        * DumpRenderTree/chromium/TestRunner/src/WebTestInterfaces.cpp:
        (WebTestInterfaces::Internal):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost):

2012-10-26  Xiaobo Wang  <xbwang@torchmobile.com.cn>

        [BlackBerry] Support pixel tests for BlackBerry DRT
        https://bugs.webkit.org/show_bug.cgi?id=100210

        Reviewed by Rob Buis.

        The implementation is based on the patch from Christopher Wells.

        * DumpRenderTree/blackberry/DumpRenderTree.cpp:
        (BlackBerry::WebKit::DumpRenderTree::DumpRenderTree):
        (BlackBerry::WebKit::DumpRenderTree::runTest):
        (BlackBerry::WebKit::DumpRenderTree::runCurrentTest):
        (BlackBerry::WebKit::DumpRenderTree::resetToConsistentStateBeforeTesting):
        (BlackBerry::WebKit::DumpRenderTree::runTests):
        (BlackBerry::WebKit::DumpRenderTree::dump):
        * DumpRenderTree/blackberry/DumpRenderTreeBlackBerry.h:
        (DumpRenderTree):

        * DumpRenderTree/blackberry/PNGImageEncoder.cpp:
        (BGRAtoRGBA):
        (encodeBitmapToPNG):
        * DumpRenderTree/blackberry/PNGImageEncoder.h:
        The changes to PNGImageEncoder files are from master_40, patched by Tyler
        Abbott and Rob Buis.

        * DumpRenderTree/blackberry/PixelDumpSupportBlackBerry.cpp:
        (createBitmapContextFromWebView):
        (computeMD5HashStringForBitmapContext):
        (printPNG):
        (dumpBitmap):
        * DumpRenderTree/blackberry/PixelDumpSupportBlackBerry.h:
        (BitmapContext::createByAdoptingData):
        (BitmapContext::~BitmapContext):
        (BitmapContext):
        (BitmapContext::BitmapContext):

        * DumpRenderTree/blackberry/build: Added.
        * DumpRenderTree/blackberry/src.pro: Added.
        Adds 2 files for building ImageDiff, by Christopher Wells.

2012-10-25  Min Qin  <qinmin@chromium.org>

        Fix a layout test crash if a TestWebkitPlugin is put inside an iframe
        https://bugs.webkit.org/show_bug.cgi?id=100406

        Reviewed by Adam Barth.

        Resize the context with an empty rect will cause a gl_error in gles2_cmd_decoder.cc.
        Don't paint the plugin if m_rect is empty.

        * DumpRenderTree/chromium/TestWebPlugin.cpp:
        (TestWebPlugin::updateGeometry):

2012-10-25  Jinwoo Song  <jinwoo7.song@samsung.com>

        [EFL][WK2] Display tooltip in MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=99322

        Reviewed by Kenneth Rohde Christiansen.

        Display tooltip in MiniBrowser using elm_object_tooltip_text_set().

        * MiniBrowser/efl/main.c:
        (on_tooltip_text_set):
        (on_tooltip_text_unset):
        (window_create):

2012-10-25  Jochen Eisinger  <jochen@chromium.org>

        [chromium] remove remaining usages of webkit_support from the TestRunner library
        https://bugs.webkit.org/show_bug.cgi?id=100344

        Reviewed by Adam Barth.

        The most important part is to not rely on calling out to gdk/X11 to
        translate keycodes to hardware keycodes, as this is not possible inside
        the sandbox.

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/DRTTestRunner.h:
        (WebKit):
        (webkit_support):
        * DumpRenderTree/chromium/TestRunner/public/WebTestDelegate.h:
        (WebTestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/CppVariant.h:
        * DumpRenderTree/chromium/TestRunner/src/EventSender.cpp:
        (WebTestRunner):
        (WebTestRunner::EventSender::doDragDrop):
        (WebTestRunner::EventSender::updateClickCountForButton):
        (WebTestRunner::EventSender::mouseDown):
        (WebTestRunner::EventSender::mouseUp):
        (WebTestRunner::EventSender::mouseMoveTo):
        (WebTestRunner::EventSender::keyDown):
        (WebTestRunner::EventSender::replaySavedEvents):
        (WebTestRunner::EventSender::contextClick):
        (WebTestRunner::EventSender::beginDragWithFiles):
        (WebTestRunner::EventSender::sendCurrentTouchEvent):
        (WebTestRunner::EventSender::handleMouseWheel):
        (WebTestRunner::EventSender::gestureEvent):
        (WebTestRunner::EventSender::gestureFlingCancel):
        (WebTestRunner::EventSender::gestureFlingStart):
        * DumpRenderTree/chromium/TestRunner/src/KeyCodeMapping.cpp: Added.
        (WebTestRunner):
        (WebTestRunner::NativeKeyCodeForWindowsKeyCode):
        * DumpRenderTree/chromium/TestRunner/src/KeyCodeMapping.h: Copied from Tools/DumpRenderTree/chromium/TestRunner/src/TestRunner.h.
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/TestDelegate.h:
        (TestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/TestRunner.cpp:
        * DumpRenderTree/chromium/TestRunner/src/TestRunner.h:
        * DumpRenderTree/chromium/TestRunner/src/WebTestInterfaces.cpp:
        (WebTestInterfaces::Internal):
        (WebTestRunner::WebTestInterfaces::Internal::getCurrentTimeInMillisecond):
        (WebTestRunner):
        (WebTestRunner::WebTestInterfaces::Internal::getAbsoluteWebStringFromUTF8Path):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::getCurrentTimeInMillisecond):
        (WebViewHost::getAbsoluteWebStringFromUTF8Path):
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost):

2012-10-25  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r132514.
        http://trac.webkit.org/changeset/132514
        https://bugs.webkit.org/show_bug.cgi?id=100440

        "Broke chromium content_browsertests AccessibilityAriaMenu
        AccessibilityInputRange AccessibilityListMarkers" (Requested
        by scheib on #webkit).

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::postAccessibilityNotification):

2012-10-25  Dirk Pranke  <dpranke@chromium.org>

        rwt --lint-test-files doesn't handle the cascade properly
        https://bugs.webkit.org/show_bug.cgi?id=100315

        Reviewed by Ojan Vafai.

        We were only linting the first file in each port's list of
        expectations.

        This change pushes more of the logic for linting files into
        the TestExpectations classes themselves, but it's still a bit of
        a hack. A better solution will require splitting out the actual
        parsing of the files from the TestExpectations constructor.

        * Scripts/webkitpy/layout_tests/models/test_expectations.py:
        (TestExpectations):
        (TestExpectations.__init__):
        * Scripts/webkitpy/layout_tests/models/test_expectations_unittest.py:
        (parse_exp):
        (SkippedTests.check):
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (lint):
        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (LintTest.test_all_configurations.FakePort.__init__):
        (LintTest.test_all_configurations):
        (LintTest.test_lint_test_files__errors):
        * Scripts/webkitpy/style/checkers/test_expectations.py:
        (TestExpectationsChecker.check_test_expectations):

2012-10-25  Zan Dobersek  <zandobersek@gmail.com>

        Unreviewed GTK gardening.

        Skipping the atspi-basic-hierarchy test case in the TestWebKitAccessibility
        WebKit2 API test since the test is currently failing.

        * Scripts/run-gtk-tests:
        (TestRunner):

2012-10-25  Dominic Mazzoni  <dmazzoni@google.com>

        AX: Notification should be sent when accessibilityIsIgnored changes
        https://bugs.webkit.org/show_bug.cgi?id=99547

        Reviewed by Chris Fleizach.

        Add additional accessibility notifications.

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::postAccessibilityNotification):

2012-10-25  Dominik Röttsches  <dominik.rottsches@intel.com>

        Conditionalize XHR timeout support
        https://bugs.webkit.org/show_bug.cgi?id=100356

        Reviewed by Adam Barth.

        Adding XHR_TIMEOUT feature in perl and qmake files.

        * Scripts/webkitperl/FeatureList.pm:
        * qmake/mkspecs/features/features.pri:

2012-10-25  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Unreviewed. Update my contact info.

        * Scripts/webkitpy/common/config/committers.py:

2012-10-25  Terry Anderson  <tdanderson@chromium.org>

        Unreviewed. Adding myself as a committer.

        * Scripts/webkitpy/common/config/committers.py:

2012-10-25  Zeno Albisser  <zeno@webkit.org>

        [Qt] Adjust library name in webkitdirs.pm after r131300.
        https://bugs.webkit.org/show_bug.cgi?id=100376

        The library was renamed from QtWebKit to QtWebKitWidgets.
        run-launcher was still looking for QtWebKit.

        Reviewed by Simon Hausmann.

        * Scripts/webkitdirs.pm:
        (builtDylibPathForName):

2012-10-22  Mikhail Naganov  <mnaganov@chromium.org>

        [Chromium] Add supportMultipleWindows setting, needed for Android
        https://bugs.webkit.org/show_bug.cgi?id=99716

        Reviewed by Adam Barth.

        Add supportMultipleWindows settings for reusing the same view when
        opening popups. This is required for emulating the behavior of
        Android WebView. Adding into WebCore, as other ports might want to
        use this setting in the future.

        * DumpRenderTree/chromium/DRTTestRunner.cpp:
        (DRTTestRunner::overridePreference):
        * DumpRenderTree/chromium/WebPreferences.cpp:
        (WebPreferences::reset):
        (WebPreferences::applyTo):
        * DumpRenderTree/chromium/WebPreferences.h:
        (WebPreferences):

2012-10-25  Sudarsana Nagineni  <sudarsana.nagineni@intel.com>

        [EFL][WK2] JavaScript popups are not focused when opened
        https://bugs.webkit.org/show_bug.cgi?id=100354

        Reviewed by Kenneth Rohde Christiansen.

        Move focus to the JavaScript popups when opened so that the key events
        are forwarded to the popups instead of web view.

        * MiniBrowser/efl/main.c:
        (on_javascript_alert):
        (on_javascript_confirm):
        (on_javascript_prompt):

2012-10-25  Eugene Klyuchnikov  <eustas.bug@gmail.com>

        Web Inspector: Fix "check-inspector-strings" script and fix localized strings.
        https://bugs.webkit.org/show_bug.cgi?id=100090

        Reviewed by Vsevolod Vlasov.

        Script "check-inspector-strings" seems to be broken.
        Fixed it, refined search algorithm.

        * Scripts/check-inspector-strings: Fixed and refined.

2012-10-24  Dirk Pranke  <dpranke@chromium.org>

        nrwt: fix a couple of minor crashing issues under cygwin
        https://bugs.webkit.org/show_bug.cgi?id=100309

        Reviewed by Ojan Vafai.

        Cygwin was crashing on a null object reference and then
        an oserror in kill().

        * Scripts/webkitpy/common/system/executive.py:
        (Executive.kill_process):
        * Scripts/webkitpy/layout_tests/port/server_process.py:
        (ServerProcess.stop):

2012-10-24  Dirk Pranke  <dpranke@chromium.org>

        nrwt: truncate meter lines properly on windows
        https://bugs.webkit.org/show_bug.cgi?id=100062

        Reviewed by Tony Chang.

        This change adds the code to figure out the terminal width
        on windows (it was already there for Unixen) and moves it
        to a platform-specific object.

        * Scripts/webkitpy/common/system/platforminfo.py:
        (PlatformInfo.terminal_width):
        * Scripts/webkitpy/common/system/platforminfo_mock.py:
        (MockPlatformInfo.total_bytes_memory):
        (MockPlatformInfo):
        (MockPlatformInfo.terminal_width):
        * Scripts/webkitpy/layout_tests/views/metered_stream.py:
        (MeteredStream.__init__):
        (MeteredStream.number_of_columns):
        (MeteredStream.flush):
        * Scripts/webkitpy/layout_tests/views/printing.py:
        (Printer.__init__):
        (Printer._test_status_line):

2012-10-24  Dirk Pranke  <dpranke@chromium.org>

        tweak debug logging in webkit-patch optimize-baselines
        https://bugs.webkit.org/show_bug.cgi?id=100294

        Reviewed by Ojan Vafai.

        This changes the logging to print out the baselines found
        (and their checksums) even when we don't do anything.

        * Scripts/webkitpy/common/checkout/baselineoptimizer.py:
        (BaselineOptimizer.optimize):

2012-10-24  Sailesh Agrawal  <sail@chromium.org>

        Incorrect keycodes for numpad /, -, +, .
        https://bugs.webkit.org/show_bug.cgi?id=99188

        Reviewed by Tony Chang.

        Add key mappings for all numpad keys.

        * DumpRenderTree/mac/EventSendingController.mm:
        (KeyMappingEntry):
        (-[EventSendingController keyDown:withModifiers:withLocation:]): Added all numpad keys.

2012-10-24  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: clean up references to Skipped files
        https://bugs.webkit.org/show_bug.cgi?id=100045

        Reviewed by Ojan Vafai.

        Since they are no longer used or needed ...

        * Scripts/webkitpy/layout_tests/port/apple.py:
        (ApplePort._generate_all_test_configurations):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.skipped_layout_tests):
        (Port.expectations_files):
        (Port._wk2_port_name):
        * Scripts/webkitpy/layout_tests/port/gtk.py:
        (GtkPort):
        * Scripts/webkitpy/layout_tests/port/mac_unittest.py:
        (MacTest.test_default_timeout_ms):
        * Scripts/webkitpy/layout_tests/port/port_testcase.py:
        (test_expectations_files):
        (test_expectations_files.platform_dirs):
        * Scripts/webkitpy/layout_tests/port/qt.py:
        (QtPort.__init__):

2012-10-24  Jochen Eisinger  <jochen@chromium.org>

        [chromium] Use include paths relative to Source/ in the TestRunner's public API
        https://bugs.webkit.org/show_bug.cgi?id=100079

        Reviewed by Adam Barth.

        For a inside-chromium build, we usually don't add the WebKit API paths
        as include paths, so including files by name only does not work.

        Eventually we might want to move to a model where all includes are
        relative to Source/, so we're using that here already now.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * DumpRenderTree/chromium/TestRunner/public/WebEventSender.h:
        * DumpRenderTree/chromium/TestRunner/public/WebTestDelegate.h:

2012-10-24  Ojan Vafai  <ojan@chromium.org>

        Show an error when there are no completed builds in the past 20 runs
        https://bugs.webkit.org/show_bug.cgi?id=100266

        Reviewed by Dimitri Glazkov.

        Right now we get a cryptic JS error in the console when loading the gtk port. This at least gives an error in
        the notification stream. We should probably tweak this UI to make it so we can make
        errors in the notification stream stick out (e.g. make the text red).

        We should also consider making the number of runs to load dynamic (e.g. if 20 runs don't work,
        try 40).

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/garden-o-matic.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results_unittests.js:

2012-10-24  Ian Vollick  <vollick@chromium.org>

        [chromium] Explicitly disable accelerated animations in DRT
        https://bugs.webkit.org/show_bug.cgi?id=100241

        Reviewed by Adrienne Walker.

        Disable accelerated animations by default in DRT.        

        * DumpRenderTree/chromium/DumpRenderTree.cpp:
        (main):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::setAcceleratedAnimationEnabled):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell):

2012-10-24  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Move the QQuickWebViewExperimental pointer to QQuickWebViewPrivate
        https://bugs.webkit.org/show_bug.cgi?id=100253

        Reviewed by Kenneth Rohde Christiansen.

        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::WrapperWindow::handleStatusChanged):
        Use QQuickWebView::experimental rather than creating a new instance.

2012-10-24  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        [EFL] run-webkit-tests writes garbage on stderr when running on Xvfb
        https://bugs.webkit.org/show_bug.cgi?id=100243

        Reviewed by Kenneth Rohde Christiansen.

        These errors generate noise on the reports and in some cases, like when
        running perf tests, makes the test fail. By using Xext, we can add a
        dummy handler to ignore these errors.

        We could have added this handler on the top level EWK API, but that
        would be intrusive and could override handlers defined by the user.

        * WebKitTestRunner/PlatformEfl.cmake:
        * WebKitTestRunner/efl/main.cpp:
        (dummyExtensionErrorHandler):
        (main):

2012-10-24  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed. Fix the GTK+ build.

        * TestWebKitAPI/GNUmakefile.am: Add GTK_FLAGS to
        libTestWebKitAPIMain and webcore cflags to TestGtk.

2012-10-24  Zeno Albisser  <zeno@webkit.org>

        Implement GraphicsSurface for Windows.
        https://bugs.webkit.org/show_bug.cgi?id=98147

        Reviewed by Kenneth Rohde Christiansen.

        * qmake/mkspecs/features/features.prf:
                Activate GraphicsSurface on windows in case opengles2 (ANGLE)
                is available in QT_CONFIG.

2012-10-24  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [EFL][WK2] fast/repaint/delete-into-nested-block.html and fast/repaint/4776765.html are flaky
        https://bugs.webkit.org/show_bug.cgi?id=100010

        Reviewed by Kenneth Rohde Christiansen.

        Force the main view to receive focus even if Evas already
        considers it to be focused.

        It might happen that a different frame is focused by a page and
        the focus change notification does not reach Evas. When another
        test is run, the main frame is then not considered to be focused
        by WebCore, and things such as focus rings are not drawn as
        expected.

        * WebKitTestRunner/efl/PlatformWebViewEfl.cpp:
        (WTR::PlatformWebView::focus):

2012-10-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r132333.
        http://trac.webkit.org/changeset/132333
        https://bugs.webkit.org/show_bug.cgi?id=100234

        Crashes many tests on the EFL-WK2 bot. (Requested by rakuco on
        #webkit).

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::resetStateToConsistentValues):
        * WebKitTestRunner/efl/TestControllerEfl.cpp:
        (WTR::TestController::platformInitializeContext):

2012-10-24  Dongwoo Joshua Im  <dw.im@samsung.com>

        [GTK] Fix build break - undefined reference to 'gtk_init'
        https://bugs.webkit.org/show_bug.cgi?id=100221

        Unreviewed build fix.

        GTK_LIBS is needed for TestWTF.

        * TestWebKitAPI/GNUmakefile.am:

2012-10-24  Grzegorz Czajkowski  <g.czajkowski@samsung.com>

        WebKitTestRunner needs to turn on 'setContinuousSpellCheckingEnabled'
        https://bugs.webkit.org/show_bug.cgi?id=93611

        Reviewed by Hajime Morita.

        WebKitTestRunner enables spelling feature to pass the layout tests from editing/spelling.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::resetStateToConsistentValues):
        Enables spelling by WebKit2 C API.

        * WebKitTestRunner/efl/TestControllerEfl.cpp:
        (WTR::TestController::platformInitializeContext):
        Attaches WKTextChecker's client and sets default language for WebKit2-EFL port.

2012-10-24  Mario Sanchez Prada  <mario@webkit.org>

        [WK2] [GTK] TestWebKitAccessibility is not being run
        https://bugs.webkit.org/show_bug.cgi?id=100102

        Reviewed by Carlos Garcia Campos.

        Removed wrong early return in _start_accessibility_daemons().

        * Scripts/run-gtk-tests:
        (TestRunner._lookup_atspi2_binary): Removed wrong line.

2012-10-24  Noel Gordon  <noel.gordon@gmail.com>

        [chromium] Plumb DRT WebkitShouldRespectImageOrientation through to page settings 
        https://bugs.webkit.org/show_bug.cgi?id=100197

        Reviewed by Kent Tamura.

        fast/images/exif-orientation.html and fast/images/exif-orientation-css.html require a DRT
        WebkitShouldRespectImageOrientation preference.  Add the chromium implementation for this
        preference and plumb it through to page settings.

        * DumpRenderTree/chromium/DRTTestRunner.cpp:
        (DRTTestRunner::overridePreference): Update the tests WebkitShouldRespectImageOrientation
        setting in DRT prefs.
        * DumpRenderTree/chromium/WebPreferences.cpp:
        (WebPreferences::reset): Disable the preference before and after each test.
        (WebPreferences::applyTo): Apply the preference to the page settings of each test.
        * DumpRenderTree/chromium/WebPreferences.h:
        (WebPreferences):

2012-10-23  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] TestWebKitAPI/TestWebKit2 and TestWebKitAPI/TestGtk link to the installed libs
        https://bugs.webkit.org/show_bug.cgi?id=100134

        Reviewed by Martin Robinson.

        Do not share the LDADD variable among TestWTF, TestWebKit2 and
        TestGtk.

        * TestWebKitAPI/GNUmakefile.am:

2012-10-23  Kihong Kwon  <kihong.kwon@samsung.com>

        Unreviewed. Adding myself as committer.

        * Scripts/webkitpy/common/config/committers.py:

2012-10-23  Dan Bernstein  <mitz@apple.com>

        Tools changes for <rdar://problem/2966974> [mac] Kerning and ligatures are not enabled by default
        https://bugs.webkit.org/show_bug.cgi?id=100188

        Reviewed by Sam Weinig.

        Disable kerning and ligatures by default when running the tests.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues): Set a value of NO for the
        WebKitKerningAndLigaturesEnabledByDefault user default.
        * WebKitTestRunner/mac/main.mm:
        (main): Register a value of NO for the WebKitKerningAndLigaturesEnabledByDefault user
        default.

2012-10-23  Simon Fraser  <simon.fraser@apple.com>

        Allow tests to run with a tile cache, and optionally dump the tile cache via layerTreeAsText()
        https://bugs.webkit.org/show_bug.cgi?id=100159

        Reviewed by Tim Horton.

        Make WebKitTestRunner use a WKView with a tile cache for tests run in a directory
        whose path includes "tiled-drawing". It does this by passing around a WKDictionary 
        of options, and if the current PlatformWebView doesn't support those options, it will
        create a new one.

        * WebKitTestRunner/PlatformWebView.h:
        (PlatformWebView): Add a WKDictionaryRef options dictionary argument.
        (WTR::PlatformWebView::viewSupportsOptions): Returns true if the view
        supports the options in the WKDictionaryRef.
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize): Call createWebViewWithOptions() with
        no options in the normal case.
        (WTR::TestController::createWebViewWithOptions): Moved code into this fuction
        so we can call it in two places.
        (WTR::TestController::ensureViewSupportsOptions): If the current view
        doesn't support the given options, throw it away and makea  new one that does.
        * WebKitTestRunner/TestController.h:
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::shouldUseTiledDrawing): Return true if the directory contains "tiled-drawing".
        (WTR::updateTiledDrawingForCurrentTest): Tell the TestController to check whether
        the view supports the given options. No-op for non-Mac platforms.
        (WTR::TestInvocation::invoke): Call updateTiledDrawingForCurrentTest().
        * WebKitTestRunner/efl/PlatformWebViewEfl.cpp:
        (WTR::PlatformWebView::PlatformWebView): New constructor parameter.
        * WebKitTestRunner/gtk/PlatformWebViewGtk.cpp:
        (WTR::PlatformWebView::PlatformWebView):  New constructor parameter.
        * WebKitTestRunner/mac/PlatformWebViewMac.mm:
        (-[TestRunnerWKView initWithFrame:contextRef:pageGroupRef:useTiledDrawing:]):
        (-[TestRunnerWKView _shouldUseTiledDrawingArea]): Subclass the WKView so we can return
        a custom value from this method.
        (WTR::PlatformWebView::PlatformWebView):
        (WTR::PlatformWebView::viewSupportsOptions):
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::PlatformWebView::PlatformWebView): New constructor parameter.
        * WebKitTestRunner/win/PlatformWebViewWin.cpp:
        (WTR::PlatformWebView::PlatformWebView): New constructor parameter.

2012-10-23  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r132276.
        http://trac.webkit.org/changeset/132276
        https://bugs.webkit.org/show_bug.cgi?id=100189

        It broke the Qt-WK2 build intentionally (Requested by
        Ossy_night on #webkit).

        * WebKitTestRunner/PlatformWebView.h:
        (PlatformWebView):
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):
        * WebKitTestRunner/TestController.h:
        (TestController):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR):
        (WTR::TestInvocation::invoke):
        * WebKitTestRunner/efl/PlatformWebViewEfl.cpp:
        (WTR::PlatformWebView::PlatformWebView):
        * WebKitTestRunner/gtk/PlatformWebViewGtk.cpp:
        (WTR::PlatformWebView::PlatformWebView):
        * WebKitTestRunner/mac/PlatformWebViewMac.mm:
        (WTR::PlatformWebView::PlatformWebView):
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::PlatformWebView::PlatformWebView):
        * WebKitTestRunner/win/PlatformWebViewWin.cpp:
        (WTR::PlatformWebView::PlatformWebView):

2012-10-23  Martin Robinson  <mrobinson@igalia.com>

        [GTK][Soup] Implement the default authentication dialog via WebCoreSupport
        https://bugs.webkit.org/show_bug.cgi?id=99351

        Reviewed by Carlos Garcia Campos.

        We no longer need to turn off the soup authentication dialog soup feature,
        because it's not installed.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (setDefaultsToConsistentStateValuesForTesting): Don't turn off the feature any longer.

2012-10-23  Simon Fraser  <simon.fraser@apple.com>

        Allow tests to run with a tile cache, and optionally dump the tile cache via layerTreeAsText()
        https://bugs.webkit.org/show_bug.cgi?id=100159

        Reviewed by Tim Horton.

        Make WebKitTestRunner use a WKView with a tile cache for tests run in a directory
        whose path includes "tiled-drawing". It does this by passing around a WKDictionary 
        of options, and if the current PlatformWebView doesn't support those options, it will
        create a new one.

        * WebKitTestRunner/PlatformWebView.h:
        (PlatformWebView): Add a WKDictionaryRef options dictionary argument.
        (WTR::PlatformWebView::viewSupportsOptions): Returns true if the view
        supports the options in the WKDictionaryRef.
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize): Call createWebViewWithOptions() with
        no options in the normal case.
        (WTR::TestController::createWebViewWithOptions): Moved code into this fuction
        so we can call it in two places.
        (WTR::TestController::ensureViewSupportsOptions): If the current view
        doesn't support the given options, throw it away and makea  new one that does.
        * WebKitTestRunner/TestController.h:
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::shouldUseTiledDrawing): Return true if the directory contains "tiled-drawing".
        (WTR::updateTiledDrawingForCurrentTest): Tell the TestController to check whether
        the view supports the given options. No-op for non-Mac platforms.
        (WTR::TestInvocation::invoke): Call updateTiledDrawingForCurrentTest().
        * WebKitTestRunner/efl/PlatformWebViewEfl.cpp:
        (WTR::PlatformWebView::PlatformWebView): New constructor parameter.
        * WebKitTestRunner/gtk/PlatformWebViewGtk.cpp:
        (WTR::PlatformWebView::PlatformWebView):  New constructor parameter.
        * WebKitTestRunner/mac/PlatformWebViewMac.mm:
        (-[TestRunnerWKView initWithFrame:contextRef:pageGroupRef:useTiledDrawing:]):
        (-[TestRunnerWKView _shouldUseTiledDrawingArea]): Subclass the WKView so we can return
        a custom value from this method.
        (WTR::PlatformWebView::PlatformWebView):
        (WTR::PlatformWebView::viewSupportsOptions):
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::PlatformWebView::PlatformWebView): New constructor parameter.
        * WebKitTestRunner/win/PlatformWebViewWin.cpp:
        (WTR::PlatformWebView::PlatformWebView): New constructor parameter.

2012-10-23  David Barton  <dbarton@mathscribe.com>

        [MathML] Symbol font uses greek letters for roman ones on linux and Windows
        https://bugs.webkit.org/show_bug.cgi?id=99921

        Reviewed by Eric Seidel.

        Enable the STIXSizeOneSym font for testing.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (allowedFontFamilySet):
        * WebKitTestRunner/InjectedBundle/mac/ActivateFonts.mm:
        (WTR::allowedFontFamilySet):

2012-10-23  Tony Chang  <tony@chromium.org>

        [chromium] Chromium window build system does not rebuild correctly when enabling/disabling a feature
        https://bugs.webkit.org/show_bug.cgi?id=38926

        Reviewed by Eric Seidel.

        Remove hack for clobbering build when features.gypi changes. Now that
        Chromium requires VS2010 or newer, this bug has gone away.

        * Scripts/update-webkit:

2012-10-23  Jochen Eisinger  <jochen@chromium.org>

        [chromium] remove the const qualifier from WebTestDelegate::printMessage
        https://bugs.webkit.org/show_bug.cgi?id=100082

        Reviewed by Adam Barth.

        There's no reason the method should be const, and indeed for
        content_shell we want to send an IPC which is a non-const operation.

        * DumpRenderTree/chromium/TestRunner/public/WebTestDelegate.h:
        (WebTestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/TestDelegate.h:
        (TestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/WebTestInterfaces.cpp:
        (WebTestInterfaces::Internal):
        (WebTestRunner::WebTestInterfaces::Internal::printMessage):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::printMessage):
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost):

2012-10-23  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Add support for resolution media query
        https://bugs.webkit.org/show_bug.cgi?id=99077

        Reviewed by Antti Koivisto.

        Add support for the RESOLUTION_MEDIA_QUERY feature flag.

        * Scripts/webkitperl/FeatureList.pm:
        * qmake/mkspecs/features/features.pri:

2012-10-23  Bruno de Oliveira Abinader  <bruno.abinader@basyskom.com>

        Adding myself to commiters.py
        https://bugs.webkit.org/show_bug.cgi?id=100122

        Unreviewed update to commiters.py.

        * Scripts/webkitpy/common/config/committers.py:

2012-10-23  Timothy Hatcher  <timothy@apple.com>

        Unreviewed watchlist change to monitor Inspector IDLs.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-23  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [WK2] [WTR] WebKitTestRunner needs testRunner.queueForwardNavigation
        https://bugs.webkit.org/show_bug.cgi?id=99700

        Reviewed by Kenneth Rohde Christiansen.

        Implemented testRunner.queueForwardNavigation, made little refactoring in Work Queue
        to obviate code duplication.

        * WebKitTestRunner/InjectedBundle/Bindings/TestRunner.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::queueBackNavigation):
        (WTR):
        (WTR::InjectedBundle::queueForwardNavigation):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (InjectedBundle):
        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        (WTR::TestRunner::queueForwardNavigation):
        (WTR):
        * WebKitTestRunner/InjectedBundle/TestRunner.h:
        (TestRunner):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/WorkQueueManager.cpp:
        (NavigationItem):
        (WTR::NavigationItem::NavigationItem):
        (WTR::NavigationItem::invoke):
        (WTR):
        (WTR::WorkQueueManager::queueBackNavigation):
        (WTR::WorkQueueManager::queueForwardNavigation):
        * WebKitTestRunner/WorkQueueManager.h:
        (WorkQueueManager):

2012-10-23  Simon Hausmann  <simon.hausmann@digia.com>

        Unreviewed trivial Qt build fix: Fix build without USE_3D_GRAPHICS

        Disable USE_GRAPHICS_SURFACE if we don't have USE_3D_GRAPHICS because
        GraphicsSurface.h needs GraphicsContext3D.

        * qmake/mkspecs/features/features.prf:

2012-10-23  Simon Pena  <spena@igalia.com>

        Unreviewed. Adding myself as committer.

        * Scripts/webkitpy/common/config/committers.py:

2012-10-22  Jochen Eisinger  <jochen@chromium.org>

        [chromium] Move the call to RegisterIsolatedFileSystem to the WebTestDelegate interface
        https://bugs.webkit.org/show_bug.cgi?id=100048

        Reviewed by Adam Barth.

        The call needs to be done outside of the sandbox.

        * DumpRenderTree/chromium/TestRunner/public/WebTestDelegate.h:
        (WebTestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/EventSender.cpp:
        (WebTestRunner):
        (WebTestRunner::EventSender::beginDragWithFiles):
        * DumpRenderTree/chromium/TestRunner/src/TestDelegate.h:
        (TestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/WebTestInterfaces.cpp:
        (WebTestInterfaces::Internal):
        (WebTestRunner::WebTestInterfaces::Internal::registerIsolatedFileSystem):
        (WebTestRunner):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::registerIsolatedFileSystem):
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost):

2012-10-22  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: remove unneeded debug messages from find_files()
        https://bugs.webkit.org/show_bug.cgi?id=100041

        Reviewed by Adam Barth.

        This routine gets called all the time when loading the virtual
        suites, and the debug messages were spamming me.

        * Scripts/webkitpy/common/find_files.py:
        (_normalized_find):

2012-10-22  Tony Chang  <tony@chromium.org>

        [chromium] Add Mac 10.7 Debug bot since it's on the waterfall
        https://bugs.webkit.org/show_bug.cgi?id=100028

        Reviewed by Eric Seidel.

        garden-o-matic can't baseline without this entry.

        * Scripts/webkitpy/layout_tests/port/builders.py:

2012-10-22  Jochen Eisinger  <jochen@chromium.org>

        [chromium] introduce WebTask to the TestRunner library
        https://bugs.webkit.org/show_bug.cgi?id=99964

        Reviewed by Adam Barth.

        I'm also removing the dependency on webkit_support, and instead go
        through the WebTestDelegate interface.

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp:
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:
        (DRTDevToolsAgent::taskList):
        * DumpRenderTree/chromium/DRTDevToolsClient.cpp:
        * DumpRenderTree/chromium/DRTDevToolsClient.h:
        (DRTDevToolsClient::taskList):
        * DumpRenderTree/chromium/DRTTestRunner.cpp:
        (InvokeCallbackTask::InvokeCallbackTask):
        * DumpRenderTree/chromium/DRTTestRunner.h:
        (DRTTestRunner::taskList):
        (DRTTestRunner::WorkQueue::taskList):
        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.cpp:
        (RTCSessionDescriptionRequestSuccededTask::RTCSessionDescriptionRequestSuccededTask):
        (RTCSessionDescriptionRequestFailedTask::RTCSessionDescriptionRequestFailedTask):
        (RTCStatsRequestSucceededTask::RTCStatsRequestSucceededTask):
        (RTCVoidRequestTask::RTCVoidRequestTask):
        (StringDataTask::StringDataTask):
        (CharPtrDataTask::CharPtrDataTask):
        (DataChannelReadyStateTask::DataChannelReadyStateTask):
        (RTCPeerConnectionReadyStateTask::RTCPeerConnectionReadyStateTask):
        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.h:
        (MockWebRTCPeerConnectionHandler):
        (MockWebRTCPeerConnectionHandler::taskList):
        * DumpRenderTree/chromium/MockWebSpeechInputController.cpp:
        (MockWebSpeechInputController::SpeechTask::SpeechTask):
        * DumpRenderTree/chromium/MockWebSpeechInputController.h:
        (MockWebSpeechInputController::taskList):
        (MockWebSpeechInputController):
        * DumpRenderTree/chromium/MockWebSpeechRecognizer.cpp:
        * DumpRenderTree/chromium/MockWebSpeechRecognizer.h:
        (MockWebSpeechRecognizer::taskList):
        (MockWebSpeechRecognizer):
        (MockWebSpeechRecognizer::StepTask::StepTask):
        * DumpRenderTree/chromium/Task.cpp: Copied from Tools/DumpRenderTree/chromium/TestRunner/src/Task.cpp.
        (WebTestRunner):
        (WebTestRunner::invokeTask):
        (TaskWrapper):
        (WebTestRunner::TaskWrapper::TaskWrapper):
        (WebTestRunner::TaskWrapper::~TaskWrapper):
        (WebTestRunner::TaskWrapper::Run):
        (postTask):
        (postDelayedTask):
        * DumpRenderTree/chromium/Task.h: Copied from Tools/DumpRenderTree/chromium/TestRunner/src/TestRunner.h.
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/public/WebTask.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/src/Task.h.
        (WebTestRunner):
        (WebTask):
        (WebTaskList):
        (WebMethodTask):
        (WebTestRunner::WebMethodTask::WebMethodTask):
        (WebTestRunner::WebMethodTask::~WebMethodTask):
        (WebTestRunner::WebMethodTask::run):
        (WebTestRunner::WebMethodTask::cancel):
        * DumpRenderTree/chromium/TestRunner/public/WebTestDelegate.h:
        (WebTestRunner):
        (WebTestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/EventSender.cpp:
        (WebTestRunner):
        (WebTestRunner::EventSender::scheduleAsynchronousClick):
        (WebTestRunner::KeyDownTask::KeyDownTask):
        (WebTestRunner::EventSender::scheduleAsynchronousKeyDown):
        * DumpRenderTree/chromium/TestRunner/src/EventSender.h:
        (WebTestRunner::EventSender::taskList):
        (EventSender):
        * DumpRenderTree/chromium/TestRunner/src/TestDelegate.h:
        (WebTestRunner):
        (TestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/TestRunner.h:
        * DumpRenderTree/chromium/TestRunner/src/WebTask.cpp: Renamed from Tools/DumpRenderTree/chromium/TestRunner/src/Task.cpp.
        (WebTestRunner):
        (WebTestRunner::WebTask::WebTask):
        (WebTestRunner::WebTask::~WebTask):
        (WebTestRunner::WebTaskList::WebTaskList):
        (WebTestRunner::WebTaskList::~WebTaskList):
        (WebTestRunner::WebTaskList::registerTask):
        (WebTestRunner::WebTaskList::unregisterTask):
        (WebTestRunner::WebTaskList::revokeAll):
        * DumpRenderTree/chromium/TestRunner/src/WebTestInterfaces.cpp:
        (WebTestInterfaces::Internal):
        (WebTestRunner::WebTestInterfaces::Internal::postTask):
        (WebTestRunner):
        (WebTestRunner::WebTestInterfaces::Internal::postDelayedTask):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::initialize):
        * DumpRenderTree/chromium/WebUserMediaClientMock.cpp:
        (UserMediaRequestTask::UserMediaRequestTask):
        * DumpRenderTree/chromium/WebUserMediaClientMock.h:
        (WebUserMediaClientMock::taskList):
        (WebUserMediaClientMock):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::postTask):
        (WebViewHost::postDelayedTask):
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost):
        (WebViewHost::taskList):
        (WebViewHost::HostMethodTask::HostMethodTask):

2012-10-22  Ojan Vafai  <ojan@chromium.org>

        Update flakiness dashboard to match the state of the builders.
        * TestResultServer/static-dashboards/builders.js:
        (isChromiumDepsGTestRunner):
        Broaden the filter since Chromium naming scheme is not consistent.
        (loadBuildersList):
        The main Chromium master now only runs builders, no tests.
        * TestResultServer/static-dashboards/dashboard_base.js:
        Remove test suites that no longer run on any of these masters.

2012-10-22  Jochen Eisinger  <jochen@chromium.org>

        [chromium] add a method for printing message to the WebTestDelegate
        https://bugs.webkit.org/show_bug.cgi?id=99960

        Reviewed by Adam Barth.

        When using the TestRunner library from the content_shell, we can't print
        message directly but need to send them to the browser process.

        * DumpRenderTree/chromium/TestRunner/public/WebTestDelegate.h:
        (WebTestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/AccessibilityControllerChromium.cpp:
        (WebTestRunner::AccessibilityController::fallbackCallback):
        * DumpRenderTree/chromium/TestRunner/src/AccessibilityControllerChromium.h:
        (WebTestRunner::AccessibilityController::setDelegate):
        (AccessibilityController):
        * DumpRenderTree/chromium/TestRunner/src/EventSender.cpp:
        (WebTestRunner):
        (WebTestRunner::EventSender::dumpFilenameBeingDragged):
        * DumpRenderTree/chromium/TestRunner/src/GamepadController.cpp:
        (GamepadController::connect):
        (GamepadController::disconnect):
        (GamepadController::setId):
        (GamepadController::setButtonCount):
        (GamepadController::setButtonData):
        (GamepadController::setAxisCount):
        (GamepadController::setAxisData):
        (GamepadController::fallbackCallback):
        * DumpRenderTree/chromium/TestRunner/src/TestDelegate.h:
        (TestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/TestInterfaces.cpp:
        (TestInterfaces::~TestInterfaces):
        (TestInterfaces::setDelegate):
        * DumpRenderTree/chromium/TestRunner/src/WebTestInterfaces.cpp:
        (WebTestInterfaces::Internal):
        (WebTestRunner::WebTestInterfaces::Internal::printMessage):
        (WebTestRunner):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::didBeginEditing):
        (WebViewHost::lastContextMenuData):
        (WebViewHost::clearContextMenuData):
        (WebViewHost::setEditCommand):
        (WebViewHost::clearEditCommand):
        (WebViewHost::fillSpellingSuggestionList):
        (WebViewHost::setGamepadData):
        (WebViewHost::printMessage):
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost):

2012-10-22  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        I now only watch Selectors instead of all of CSS.

        Unreviewed update of watchlist.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-22  Yury Semikhatsky  <yurys@chromium.org>

        Make sure base and derived class pointers are different in MemoryInstrumentationTest.instrumentedWithMultipleAncestors
        https://bugs.webkit.org/show_bug.cgi?id=99987

        Reviewed by Alexander Pavlov.

        * TestWebKitAPI/Tests/WTF/MemoryInstrumentationTest.cpp: changed first parent
        class in the list so that it has virtual table as well as the second one. This
        way we may be sure that pointer to the second ancestor class will differ from
        the pointer to the derived class.

2012-10-22  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Fix compilation after r132059.

        * TestWebKitAPI/Tests/WTF/MemoryInstrumentationTest.cpp:

2012-10-22  Dominik Röttsches  <dominik.rottsches@intel.com>

        Adding Cairo and Harfbuzz watchlist entries

        Unreviewed watchlist update.

        Added myself to these new ones and SVG.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-22  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: do not double count memory of objects with multiple ancestors
        https://bugs.webkit.org/show_bug.cgi?id=99958

        Reviewed by Alexander Pavlov.

        * TestWebKitAPI/Tests/WTF/MemoryInstrumentationTest.cpp: Test that there
        is no double counting in case of multiple inheritance.

2012-10-22  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Basic gesture event handling
        https://bugs.webkit.org/show_bug.cgi?id=66173

        Reviewed by Simon Hausmann.

        Add support for eventSender.gestureLongPress.

        * DumpRenderTree/qt/EventSenderQt.cpp:
        (EventSender::EventSender):
        (EventSender::gestureLongPress):
        * DumpRenderTree/qt/EventSenderQt.h:
        (EventSender):

2012-10-22  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [WTR] Properly initialize TestRunner::m_dumpSelectionRect.
        https://bugs.webkit.org/show_bug.cgi?id=99970

        Reviewed by Kenneth Rohde Christiansen.

        Follow-up to r131476: actually initialize m_dumpSelectionRect to
        some value to avoid some flakyness in the tests.

        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        (WTR::TestRunner::TestRunner):

2012-10-22  Tor Arne Vestbø  <tor.arne.vestbo@digia.com>

        [Qt] Don't build any of the tools in production_build

        Reviewed by Simon Hausmann.

        * Tools.pro:
        * qmake/mkspecs/features/configure.prf:

2012-10-22  Tor Arne Vestbø  <tor.arne.vestbo@digia.com>

        [Qt] Move OBJECTS_DIR and friends to default_pre.prf

        The introduction of load(qt_build_config) in .qmake.conf meant
        that we started loading qtmodule.pri, which in turn set both
        MOC_DIR, RCC_DIR, and OBJECTS_DIR.

        We were setting OBJECTS_DIR in default_post under a isEmpty() guard
        so that project files could override the objects dir. Instead of
        using the isEmpty() check we move it to defaul_pre, which will
        override the qtmodule.pri settings, but still allow project files
        to override it.

        Reviewed by Ossy.

        * qmake/mkspecs/features/default_post.prf:
        * qmake/mkspecs/features/default_pre.prf:

2012-10-22  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        WebKitTestRunner needs testRunner.queueLoadingScript and testRunner.queueNonLoadingScript
        https://bugs.webkit.org/show_bug.cgi?id=42675

        Reviewed by Kenneth Rohde Christiansen.

        Added implementation of testRunner.queueLoadingScript and testRunner.queueNonLoadingScript.

        * WebKitTestRunner/InjectedBundle/Bindings/TestRunner.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::queueLoadingScript):
        (WTR):
        (WTR::InjectedBundle::queueNonLoadingScript):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (InjectedBundle):
        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        (WTR::TestRunner::queueLoadingScript):
        (WTR):
        (WTR::TestRunner::queueNonLoadingScript):
        * WebKitTestRunner/InjectedBundle/TestRunner.h:
        (TestRunner):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/WorkQueueManager.cpp:
        (WTR):
        (WTR::runJavaScriptFunction):
        (ScriptItem):
        (WTR::ScriptItem::ScriptItem):
        (WTR::ScriptItem::invoke):
        (WTR::WorkQueueManager::queueBackNavigation):
        (WTR::WorkQueueManager::queueLoadingScript):
        (WTR::WorkQueueManager::queueNonLoadingScript):
        * WebKitTestRunner/WorkQueueManager.h:
        (WorkQueueManager):

2012-10-22  Zan Dobersek  <zandobersek@gmail.com>

        Unreviewed, a follow-up to r132034 where I forgot to address
        Ojan's review comment about the race condition in handleLocationChange.

        * TestResultServer/static-dashboards/dashboard_base.js:
        (handleLocationChange):

2012-10-22  Zan Dobersek  <zandobersek@gmail.com>

        [TestResultServer] Move the resource loading into a dedicated class
        https://bugs.webkit.org/show_bug.cgi?id=99246

        Reviewed by Ojan Vafai.

        A new 'loader' namespace is created, containing the request method (previously located in dashboard_base.js)
        and the new Loader object, which handles the loading of all the necessary data the dashboard might require.

        * TestResultServer/static-dashboards/aggregate_results.html: Include the loader.js source file.
        * TestResultServer/static-dashboards/builders.js:
        (requestBuilderList): Use the request method located in the loader namespace instead of the removed doXHR method.
        (onBuilderListLoad): Now parses the response text of the passed-in XHR. When all the builder lists are loaded the
        resource loader object is notified appropriately.
        (onErrorLoadingBuilderList): The partial function that calls this function also adds an XHR parameter.
        * TestResultServer/static-dashboards/dashboard_base.js: Much of the resource loading-related code is moved to loader.js.
        The Loader object is now used to load all the required resources.
        (parseParameters): Don't push the 'builder' parameter into the current state if the unit tests are being run.
        (resourceLoadingComplete): This method gets called when all the resources are loaded and the dashboard should
        proceed with generating the page.
        (handleLocationChange):
        * TestResultServer/static-dashboards/flakiness_dashboard.html: Include the loader.js source file.
        * TestResultServer/static-dashboards/flakiness_dashboard.js: The request method has been relocated to the loader namespace.
        * TestResultServer/static-dashboards/flakiness_dashboard_unittests.js: The affected test cases are modified appropriately.
        (test):
        * TestResultServer/static-dashboards/loader.js: Added.
        (.): A new namespace is introduced, publicly exporting the request method that performs an XHR operation and a Loader object
        which oversees resource loading. The loading is done in steps, first loading the builders list, after that the results files
        the current dashboard needs, and lastly the TestExpectations files if they are required by the dashboard. When done the loader
        calls the resourceLoadingComplete method located in dashboard_base.js. This signals the dashboard all resources are available
        and it can proceed with generating the dashboard page.
        * TestResultServer/static-dashboards/loader_unittests.js: Added. Contains unit tests for the Loader object, covering the
        incremental loading and the loading of results files and TestExpectations files. The builders list loading is currently not
        tested as the unit tests page overrides related methods that possibly affect other tests' behavior.
        * TestResultServer/static-dashboards/run-unittests.html: Now includes the loader.js and loader_unittests.js source file.
        Refactors the code a bit due to changes in how onBuilderListLoad behaves.
        * TestResultServer/static-dashboards/timeline_explorer.html: Now includes the loader.js source file.
        * TestResultServer/static-dashboards/treemap.html: Ditto. Also refactors the code to take into account
        that all the test files are now loaded before generating the dashboard page.

2012-10-21  Jochen Eisinger  <jochen@chromium.org>

        [chromium] introduce a public API for the TestRunner library
        https://bugs.webkit.org/show_bug.cgi?id=99904

        Reviewed by Adam Barth.

        The API decouples the public API from the underlying implementation, so
        embedders can depend on it. I'm also changing DRT to consume the
        TestRunner API through the public API, except for DRTTestRunner and all
        places that require Task.h. These two will be migrated in later changes.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:
        * DumpRenderTree/chromium/DRTDevToolsClient.h:
        * DumpRenderTree/chromium/MockSpellCheck.cpp:
        (MockSpellCheck::fillSuggestionList):
        * DumpRenderTree/chromium/MockSpellCheck.h:
        (MockSpellCheck):
        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.h:
        * DumpRenderTree/chromium/MockWebSpeechInputController.h:
        * DumpRenderTree/chromium/MockWebSpeechRecognizer.h:
        * DumpRenderTree/chromium/TestRunner/public/WebAccessibilityController.h: Copied from Tools/DumpRenderTree/chromium/TestRunner/src/TestDelegate.h.
        (WebKit):
        (WebTestRunner):
        (WebAccessibilityController):
        * DumpRenderTree/chromium/TestRunner/public/WebEventSender.h: Copied from Tools/DumpRenderTree/chromium/TestRunner/src/TestDelegate.h.
        (WebKit):
        (WebTestRunner):
        (WebEventSender):
        * DumpRenderTree/chromium/TestRunner/public/WebTestDelegate.h: Copied from Tools/DumpRenderTree/chromium/TestRunner/src/TestDelegate.h.
        (WebKit):
        (WebTestRunner):
        (WebTestDelegate):
        * DumpRenderTree/chromium/TestRunner/public/WebTestInterfaces.h: Copied from Tools/DumpRenderTree/chromium/TestRunner/src/TestInterfaces.h.
        (WebKit):
        (WebTestRunner):
        (WebTestInterfaces):
        * DumpRenderTree/chromium/TestRunner/src/AccessibilityControllerChromium.cpp:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/AccessibilityControllerChromium.h:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/EventSender.cpp:
        (WebTestRunner):
        (WebTestRunner::makeMenuItemStringsFor):
        * DumpRenderTree/chromium/TestRunner/src/EventSender.h:
        (WebTestRunner):
        * DumpRenderTree/chromium/TestRunner/src/TestDelegate.h:
        (TestDelegate):
        * DumpRenderTree/chromium/TestRunner/src/TestInterfaces.cpp:
        * DumpRenderTree/chromium/TestRunner/src/TestInterfaces.h:
        (TestInterfaces):
        * DumpRenderTree/chromium/TestRunner/src/WebAccessibilityController.cpp: Copied from Tools/DumpRenderTree/chromium/TestRunner/src/TestDelegate.h.
        (WebTestRunner):
        (WebTestRunner::WebAccessibilityController::WebAccessibilityController):
        (WebTestRunner::WebAccessibilityController::setFocusedElement):
        (WebTestRunner::WebAccessibilityController::notificationReceived):
        (WebTestRunner::WebAccessibilityController::shouldLogAccessibilityEvents):
        * DumpRenderTree/chromium/TestRunner/src/WebEventSender.cpp: Copied from Tools/DumpRenderTree/chromium/TestRunner/src/TestDelegate.h.
        (WebTestRunner):
        (WebTestRunner::WebEventSender::WebEventSender):
        (WebTestRunner::WebEventSender::doDragDrop):
        * DumpRenderTree/chromium/TestRunner/src/WebTestInterfaces.cpp: Added.
        (WebTestRunner):
        (WebTestInterfaces::Internal):
        (WebTestRunner::WebTestInterfaces::Internal::testInterfaces):
        (WebTestRunner::WebTestInterfaces::Internal::accessibilityController):
        (WebTestRunner::WebTestInterfaces::Internal::eventSender):
        (WebTestRunner::WebTestInterfaces::Internal::Internal):
        (WebTestRunner::WebTestInterfaces::Internal::~Internal):
        (WebTestRunner::WebTestInterfaces::Internal::setDelegate):
        (WebTestRunner::WebTestInterfaces::Internal::clearContextMenuData):
        (WebTestRunner::WebTestInterfaces::Internal::clearEditCommand):
        (WebTestRunner::WebTestInterfaces::Internal::fillSpellingSuggestionList):
        (WebTestRunner::WebTestInterfaces::Internal::setEditCommand):
        (WebTestRunner::WebTestInterfaces::Internal::lastContextMenuData):
        (WebTestRunner::WebTestInterfaces::Internal::setGamepadData):
        (WebTestRunner::WebTestInterfaces::WebTestInterfaces):
        (WebTestRunner::WebTestInterfaces::~WebTestInterfaces):
        (WebTestRunner::WebTestInterfaces::setWebView):
        (WebTestRunner::WebTestInterfaces::setDelegate):
        (WebTestRunner::WebTestInterfaces::bindTo):
        (WebTestRunner::WebTestInterfaces::resetAll):
        (WebTestRunner::WebTestInterfaces::accessibilityController):
        (WebTestRunner::WebTestInterfaces::eventSender):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::initialize):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell::eventSender):
        (TestShell::accessibilityController):
        (TestShell):
        * DumpRenderTree/chromium/WebUserMediaClientMock.h:
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::finishLastTextCheck):
        (WebViewHost::fillSpellingSuggestionList):
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost):

2012-10-21  Viatcheslav Ostapenko  <v.ostapenko@samsung.com>

        Unreviewed. Updating my emails.

        * Scripts/webkitpy/common/config/committers.py:

2012-10-20  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [EFL][DRT] Implement tracking and painting repaint rectangles.
        https://bugs.webkit.org/show_bug.cgi?id=99838

        Reviewed by Gyuyoung Kim.

        Implement displayWebView() and start tracking/painting the repaint
        rectangles for the repaint tests that rely on it.

        * DumpRenderTree/efl/DumpRenderTree.cpp:
        (displayWebView):
        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):
        * DumpRenderTree/efl/PixelDumpSupportEfl.cpp:
        (createBitmapContextFromWebView):

2012-10-19  Dan Bernstein  <mitz@apple.com>

        Add bundle API for hit-testing
        https://bugs.webkit.org/show_bug.cgi?id=99907

        Reviewed by Sam Weinig.

        Added an API test for WKBundleFrameCreateHitTest().

        * TestWebKitAPI/TestWebKitAPI.xcodeproj/project.pbxproj: Added InjectedBundleFrameHitTest.cpp,
        InjectedBundleFrameHitTest_bundle.cpp, and link-with-title.html.

        * TestWebKitAPI/Tests/WebKit2/InjectedBundleFrameHitTest.cpp: Added.
        (TestWebKitAPI::didReceiveMessageFromInjectedBundle): Checks that the message contains the
        title of the link in link-with-title.html.
        (TestWebKitAPI::setInjectedBundleClient):
        (TestWebKitAPI::TEST):
        * TestWebKitAPI/Tests/WebKit2/InjectedBundleFrameHitTest_Bundle.cpp: Added.
        (TestWebKitAPI::InjectedBundleFrameHitTestTest::InjectedBundleFrameHitTestTest):
        (TestWebKitAPI::didFinishLoadForFrameCallback): Hit tests at (50, 50) and sends the link title
        from the result back to the UI process.
        (TestWebKitAPI::InjectedBundleFrameHitTestTest::didCreatePage):
        (TestWebKitAPI::InjectedBundleFrameHitTestTest::frameLoadFinished):
        * TestWebKitAPI/Tests/WebKit2/link-with-title.html: Added.

2012-10-19  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r131944.
        http://trac.webkit.org/changeset/131944
        https://bugs.webkit.org/show_bug.cgi?id=99891

        On second thoughts, not such a great idea (Requested by jamesr
        on #webkit).

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::createNewWindow):

2012-10-19  Alexandre Elias  <aelias@chromium.org>

        [chromium] API to pass impl thread via WebLayerTreeView
        https://bugs.webkit.org/show_bug.cgi?id=99863

        Reviewed by James Robinson.

        This adds an API to pass the compositor impl thread via WebView and
        WebLayerTreeView. This is currently a no-op change, but in the future
        this codepath will supercede WebCompositor. The goal is to avoid statics
        in compositor initialization.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::createNewWindow):

2012-10-19  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [Cairo][WTR] Implement the painting of repaint rectangles.
        https://bugs.webkit.org/show_bug.cgi?id=99839

        Reviewed by Martin Robinson.

        Implement the required code to paint the gray overlay with
        transparent regions for the repaint rectangles, as other ports
        already do and as is already done in most WK1 ports.

        * WebKitTestRunner/cairo/TestInvocationCairo.cpp:
        (WTR::paintRepaintRectOverlay):
        (WTR::TestInvocation::dumpPixelsAndCompareWithExpected):

2012-09-08  Alpha Lam  <hclam@chromium.org>

        [chromium] Implement deferred image decoding
        https://bugs.webkit.org/show_bug.cgi?id=94240

        Reviewed by Stephen White.

        Add --enable-deferred-image-decoding to DRT.

        * DumpRenderTree/chromium/DumpRenderTree.cpp:
        (main):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell):
        (TestShell::resetWebSettings):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell::setDeferredImageDecodingEnabled):
        (TestShell):
        * DumpRenderTree/chromium/WebPreferences.cpp:
        (WebPreferences::reset):
        (WebPreferences::applyTo):
        * DumpRenderTree/chromium/WebPreferences.h:
        (WebPreferences):
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort.virtual_test_suites):

2012-10-19  Dongwoo Joshua Im  <dw.im@samsung.com>

        Rename ENABLE_CSS3_TEXT_DECORATION to ENABLE_CSS3_TEXT
        https://bugs.webkit.org/show_bug.cgi?id=99804

        Reviewed by Julien Chaffraix.

        CSS3 text related properties will be implemented under this flag,
        including text decoration, text-align-last, and text-justify.

        * Scripts/webkitperl/FeatureList.pm:
        * qmake/mkspecs/features/features.pri:

2012-10-19  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt][WTR] renderToOffscreenBuffer should not be set if the real render loop is active
        https://bugs.webkit.org/show_bug.cgi?id=99831

        Reviewed by Jocelyn Turcotte.

        Do not set renderToOffscreenBuffer if we have called setRenderWithoutShowing.
        We do not need it in this case and these things are actually conflicting.

        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::WrapperWindow::handleStatusChanged):
        (WTR::PlatformWebView::PlatformWebView):
        (WTR::PlatformWebView::windowShapshotEnabled): Added a comment
        describing why this workaround is needed.

2012-10-19  Zan Dobersek  <zandobersek@gmail.com>

        [WK2][GTK] Fullscreen tests timing out in bots
        https://bugs.webkit.org/show_bug.cgi?id=93973

        Reviewed by Philippe Normand.

        Add webcore_cppflags to the CPPFLAGS for WebKitTestRunner and the
        injected bundle library. webcore_cppflags contains all the feature
        defines' macros so the ENABE(*) compilation guards should now work
        properly (i.e. enable the code behind them when the feature is enabled).

        * WebKitTestRunner/GNUmakefile.am:

2012-10-19  Simon Hausmann  <simon.hausmann@digia.com>

        Unreviewed, rolling out r131734.
        http://trac.webkit.org/changeset/131734

        Broke ANGLE build where we end up with @echo foo && @echo -n

        * qmake/mkspecs/features/default_post.prf:

2012-10-19  Carlos Garcia Campos  <cgarcia@igalia.com>

        REGRESSION (r130640 - r130644): TestCookieManager API test is failing
        https://bugs.webkit.org/show_bug.cgi?id=98738

        Reviewed by Philippe Normand.

        * Scripts/run-gtk-tests:
        (TestRunner): Unskip /webkit2/WebKitCookieManager/accept-policy.

2012-10-19  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Update the RuntimeEnabledFeatures flags
        https://bugs.webkit.org/show_bug.cgi?id=99714

        Reviewed by Adam Barth.

        Enabling the DeprecatedPeerConnection so that all tests still run.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell):

2012-10-18  Dominic Mazzoni  <dmazzoni@google.com>

        AX: labelForElement is slow when there are a lot of DOM elements
        https://bugs.webkit.org/show_bug.cgi?id=97825

        Reviewed by Ryosuke Niwa.

        Implement titleUIElement in the chromium port of DRT, and
        fix getAccessibleElementById so that it ensures the backing store
        is up-to-date.

        * DumpRenderTree/chromium/TestRunner/AccessibilityControllerChromium.cpp:
        (AccessibilityController::getAccessibleElementById):
        * DumpRenderTree/chromium/TestRunner/AccessibilityUIElementChromium.cpp:
        (AccessibilityUIElement::titleUIElementCallback):

2012-10-17  Ilya Tikhonovsky  <loislo@chromium.org>

        Web Inspector: NMI provide data for mixing with tcmalloc heap dumps.
        https://bugs.webkit.org/show_bug.cgi?id=99457

        Reviewed by Yury Semikhatsky.

        countObjectSize now requires pointer to object as the first argument.

        * TestWebKitAPI/Tests/WTF/MemoryInstrumentationTest.cpp:

2012-10-18  Dirk Pranke  <dpranke@chromium.org>

        make move_overwritten_baselines_to work again while rebaselining
        https://bugs.webkit.org/show_bug.cgi?id=99793

        Reviewed by Ojan Vafai.

        We used to have code that would help when rebaselining results
        for new ports (e.g., when moving from Lion to Mountain Lion) but
        it appears that code bitrotted during all the refactoring since
        the last time we needed this. This patch makes things work
        again, adds more tests that will hopefully make clearer what
        is supposed to work, and renames various parameters to be
        consistent.

        * Scripts/webkitpy/layout_tests/port/builders.py:
        (move_overwritten_baselines_to):
        (builder_path_for_port_name):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineTest.__init__):
        (RebaselineTest._copy_existing_baseline):
        (RebaselineTest._rebaseline_test):
        (RebaselineTest.execute):
        (AbstractParallelRebaselineCommand._rebaseline_commands):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (test_rebaseline_json_with_move_overwritten_baselines_to):
        (test_rebaseline_test_internal_with_move_overwritten_baselines_to):
        * Scripts/webkitpy/tool/servers/gardeningserver_unittest.py:
        (GardeningServerTest.test_rebaselineall):

2012-10-18  Roger Fong  <roger_fong@apple.com>

        Unreviewed. Skip really old flaky failing jscore date test. 
        There's a bug tracking it here: https://bugs.webkit.org/show_bug.cgi?id=53712.

        * Scripts/run-javascriptcore-tests:

2012-10-18  Byungwoo Lee  <bw80.lee@samsung.com>

        Fix build warning.
        https://bugs.webkit.org/show_bug.cgi?id=99788

        Reviewed by Kentaro Hara.

        Use return value of mktemp() for removing -Wunused-result.

        * MiniBrowser/efl/main.c:
        (on_download_request):

2012-10-18  Benjamin Poulain  <bpoulain@apple.com>

        [WK2] WebKit2 does not build without PLUGIN_PROCESS on Mac
        https://bugs.webkit.org/show_bug.cgi?id=99771

        Reviewed by Anders Carlsson.

        * DumpRenderTree/mac/MockWebNotificationProvider.mm: The file was not including config.h,
        effectively breaking feature flags.

2012-10-18  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [EFL][DRT] Make textareas resizable by default.
        https://bugs.webkit.org/show_bug.cgi?id=99719

        Reviewed by Gyuyoung Kim.

        Enable painting the textarea resizer at the corner by default,
        just as it already is the case for WK2. This eases the work needed
        to get the pixel tests in shape and run by the bots, as both the
        WK1 and WK2 ports will have more similar results.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):

2012-10-18  Jochen Eisinger  <jochen@chromium.org>

        [chromium] Add a webkit_test_support target that WebTestingSupport
        https://bugs.webkit.org/show_bug.cgi?id=99772

        Reviewed by Adam Barth.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:

2012-10-18  Jochen Eisinger  <jochen@chromium.org>

        [chromium] move TestRunner files into a src/ sub directory
        https://bugs.webkit.org/show_bug.cgi?id=99776

        Reviewed by Adam Barth.

        This is in preparation of adding a public API to the TestRunner library.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/DRTTestRunner.h:
        * DumpRenderTree/chromium/TestRunner/src/AccessibilityControllerChromium.cpp: Renamed from Tools/DumpRenderTree/chromium/TestRunner/AccessibilityControllerChromium.cpp.
        * DumpRenderTree/chromium/TestRunner/src/AccessibilityControllerChromium.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/AccessibilityControllerChromium.h.
        * DumpRenderTree/chromium/TestRunner/src/AccessibilityUIElementChromium.cpp: Renamed from Tools/DumpRenderTree/chromium/TestRunner/AccessibilityUIElementChromium.cpp.
        * DumpRenderTree/chromium/TestRunner/src/AccessibilityUIElementChromium.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/AccessibilityUIElementChromium.h.
        * DumpRenderTree/chromium/TestRunner/src/CppBoundClass.cpp: Renamed from Tools/DumpRenderTree/chromium/TestRunner/CppBoundClass.cpp.
        * DumpRenderTree/chromium/TestRunner/src/CppBoundClass.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/CppBoundClass.h.
        * DumpRenderTree/chromium/TestRunner/src/CppVariant.cpp: Renamed from Tools/DumpRenderTree/chromium/TestRunner/CppVariant.cpp.
        * DumpRenderTree/chromium/TestRunner/src/CppVariant.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/CppVariant.h.
        * DumpRenderTree/chromium/TestRunner/src/EventSender.cpp: Renamed from Tools/DumpRenderTree/chromium/TestRunner/EventSender.cpp.
        * DumpRenderTree/chromium/TestRunner/src/EventSender.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/EventSender.h.
        * DumpRenderTree/chromium/TestRunner/src/GamepadController.cpp: Renamed from Tools/DumpRenderTree/chromium/TestRunner/GamepadController.cpp.
        * DumpRenderTree/chromium/TestRunner/src/GamepadController.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/GamepadController.h.
        * DumpRenderTree/chromium/TestRunner/src/Task.cpp: Renamed from Tools/DumpRenderTree/chromium/TestRunner/Task.cpp.
        * DumpRenderTree/chromium/TestRunner/src/Task.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/Task.h.
        * DumpRenderTree/chromium/TestRunner/src/TestDelegate.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/TestDelegate.h.
        * DumpRenderTree/chromium/TestRunner/src/TestInterfaces.cpp: Renamed from Tools/DumpRenderTree/chromium/TestRunner/TestInterfaces.cpp.
        * DumpRenderTree/chromium/TestRunner/src/TestInterfaces.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/TestInterfaces.h.
        * DumpRenderTree/chromium/TestRunner/src/TestRunner.cpp: Renamed from Tools/DumpRenderTree/chromium/TestRunner/TestRunner.cpp.
        * DumpRenderTree/chromium/TestRunner/src/TestRunner.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/TestRunner.h.
        * DumpRenderTree/chromium/TestRunner/src/TextInputController.cpp: Renamed from Tools/DumpRenderTree/chromium/TestRunner/TextInputController.cpp.
        * DumpRenderTree/chromium/TestRunner/src/TextInputController.h: Renamed from Tools/DumpRenderTree/chromium/TestRunner/TextInputController.h.

2012-10-18  Dirk Pranke  <dpranke@chromium.org>

        [chromium] garden-o-matic should ignore the 10.8 Tests bot
        https://bugs.webkit.org/show_bug.cgi?id=99765

        Reviewed by Adam Barth.

        It's really more of an FYI bot at this point and can be safely
        ignored like the Content Shell bots.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        (.):

2012-10-18  Jochen Eisinger  <jochen@chromium.org>

        [chromium] Simplify TestInterfaces, as this class won't be directly exposed in the TestRunner library's interface
        https://bugs.webkit.org/show_bug.cgi?id=99766

        Reviewed by Adam Barth.

        This reverts http://trac.webkit.org/changeset/123240

        * DumpRenderTree/chromium/TestRunner/TestInterfaces.cpp:
        (TestInterfaces::TestInterfaces):
        (TestInterfaces::~TestInterfaces):
        (TestInterfaces::setWebView):
        (TestInterfaces::setDelegate):
        (TestInterfaces::bindTo):
        (TestInterfaces::resetAll):
        (TestInterfaces::accessibilityController):
        (TestInterfaces::eventSender):
        * DumpRenderTree/chromium/TestRunner/TestInterfaces.h:
        (TestInterfaces):

2012-10-18  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r131810.
        http://trac.webkit.org/changeset/131810
        https://bugs.webkit.org/show_bug.cgi?id=99762

        Broke linux debug webkit_unit_tests (Requested by
        danakj|gardening on #webkit).

        * DumpRenderTree/chromium/DumpRenderTree.cpp:
        (main):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell):
        (TestShell::resetWebSettings):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell):
        * DumpRenderTree/chromium/WebPreferences.cpp:
        (WebPreferences::reset):
        (WebPreferences::applyTo):
        * DumpRenderTree/chromium/WebPreferences.h:
        (WebPreferences):
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort.virtual_test_suites):

2012-10-18  Alpha Lam  <hclam@chromium.org>

        [chromium] Implement deferred image decoding
        https://bugs.webkit.org/show_bug.cgi?id=94240

        Reviewed by Stephen White.

        Add --enable-deferred-image-decoding to DRT.

        * DumpRenderTree/chromium/DumpRenderTree.cpp:
        (main):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell):
        (TestShell::resetWebSettings):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell::setDeferredImageDecodingEnabled):
        (TestShell):
        * DumpRenderTree/chromium/WebPreferences.cpp:
        (WebPreferences::reset):
        (WebPreferences::applyTo):
        * DumpRenderTree/chromium/WebPreferences.h:
        (WebPreferences):
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort.virtual_test_suites):

2012-10-18  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: fix chromium bot configs in builders.py
        https://bugs.webkit.org/show_bug.cgi?id=99638

        Reviewed by Ojan Vafai.

        Updating after the great bot-renaming and deleting a test case
        that is no longer needed.

        * Scripts/webkitpy/layout_tests/port/builders.py:
        * Scripts/webkitpy/tool/servers/gardeningserver_unittest.py:
        (BuildCoverageExtrapolatorTest.test_extrapolate):

2012-10-18  Dirk Pranke  <dpranke@chromium.org>

        [chromium] Add 10.8 bot into fallback path, make work with garden-o-matic
        https://bugs.webkit.org/show_bug.cgi?id=99748

        Reviewed by Ryosuke Niwa.

        Subject pretty much says it all ...

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        * Scripts/webkitpy/layout_tests/port/builders.py:
        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        (ChromiumMacPort):
        * Scripts/webkitpy/layout_tests/port/chromium_mac_unittest.py:
        (ChromiumMacPortTest.test_versions):
        (ChromiumMacPortTest.test_baseline_path):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (TestRebaseline.test_baseline_directory):
        (test_rebaseline_and_copy_test_with_lion_result):
        (test_rebaseline_expectations):

2012-10-18  Timothy Hatcher  <timothy@apple.com>

        Teach prepare-ChangeLog how to handle non-function properties in JavaScript prototypes.

        https://bugs.webkit.org/show_bug.cgi?id=99747

        Reviewed by Joseph Pecoraro.

        * Scripts/prepare-ChangeLog:
        (get_function_line_ranges_for_javascript): Clear currentIdentifiers when comma is encountered
        so it does not tack those identifiers onto the next changed function.

2012-10-18  James Simonsen  <simonjam@chromium.org>

        Add a script for exporting http/tests/w3c/webperf/submission to W3C
        https://bugs.webkit.org/show_bug.cgi?id=99675

        Reviewed by Tony Gentilcore.

        This does the inverse of Scripts/import-w3c-performance-wg-tests.

        * Scripts/export-w3c-performance-wg-tests: Added.

2012-10-18  Pablo Flouret  <pablof@motorola.com>

        Implement css3-conditional's @supports rule
        https://bugs.webkit.org/show_bug.cgi?id=86146

        Reviewed by Antti Koivisto.

        * Scripts/webkitperl/FeatureList.pm:
        * qmake/mkspecs/features/features.pri:
            Add an ENABLE_CSS3_CONDITIONAL_RULES flag.

2012-10-18  Xiaobo Wang  <xbwang@torchmobile.com.cn>

        [BlackBerry] Dump DRT output to stdout if test is passed as command line argument
        https://bugs.webkit.org/show_bug.cgi?id=99150

        Reviewed by Rob Buis.

        Fixed some code style errors as well.

        * DumpRenderTree/blackberry/DumpRenderTree.cpp:
        (BlackBerry::WebKit::DumpRenderTree::runTest):
        (BlackBerry::WebKit::DumpRenderTree::runRemainingTests):
        (BlackBerry::WebKit::DumpRenderTree::runTests):
        (BlackBerry::WebKit::DumpRenderTree::isHTTPTest):
        (BlackBerry::WebKit::DumpRenderTree::dump):
        (BlackBerry::WebKit::DumpRenderTree::addMessageToConsole):
        * DumpRenderTree/blackberry/DumpRenderTreeBlackBerry.h:
        (DumpRenderTree):

2012-10-18  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Improved support for silent builds

        Reviewed by Tor Arne Vestbø.

        Silence our extra compilers when CONFIG+=silent is set.

        * qmake/mkspecs/features/default_post.prf:

2012-10-18  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Reduce memory pressure at link time with less compromise on speed of linking

        Reviewed by Csaba Osztrogonác.

        Revert r131718 that made us pass -fno-keep-memory to the linker for any
        i386 builds. The downside of passing that option is that it slows down
        the process of linking and as Ossy determined, release builds do _not_
        take as much memory (2.x GB) for linking but much less (~350MB).

        However there is one condition where even release builds do take up too
        much memory, and that is when Qt is configured with
        -separate-debug-info, because it adds a -g next to -O2. The recent
        introduction of loading qt_build_config enabled us to read qmodule.pri,
        which adds the -g if Qt is configured with -separate-debug-info. So
        instead of playing with -fno-keep-memory (which is a last resort
        measure for debug builds) we should tweak our existing mechanism of
        dealing with the debug info:

        production_build.prf tries to ensure that we use -g only in static
        libraries that contain API facing code, so that we get nice backtraces
        at least into the API layer. For other static libraries such as WebCore
        we skip -g via CONFIG += no_debug_info. One of the conditions for
        enabling this tweak is CONFIG(debug, debug|release). This patch adds
        contains(QT_CONFIG,separate_debug_info) to the conditions.

        The patch also extend the CONFIG += no_debug_info part with the removal
        of no_separate_debug_info. There is no point in running an extra
        build step to strip out debug info into a separate file if at the same
        time we tell the compiler to not generate any debug info altogether.

        * qmake/mkspecs/features/production_build.prf:
        * qmake/mkspecs/features/unix/default_post.prf:

2012-10-18  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] OpenGL rendering is not possible on bots using Xvfb
        https://bugs.webkit.org/show_bug.cgi?id=99463

        Reviewed by Jocelyn Turcotte.

        Added a workaround to be able to disallow UI side OpenGL rendering
        if the environment is not suitable because it can be extremely slow
        with a software backend.

        * Scripts/webkitpy/layout_tests/port/qt.py:
        (QtPort.setup_environ_for_server): Let the environment variable
        QT_WEBKIT_DISABLE_UIPROCESS_DUMPPIXELS reach the driver. This variable
        should be defined on bots that don't have a suitable OpenGL environment.
        * WebKitTestRunner/PlatformWebView.h:
        (PlatformWebView):
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::WrapperWindow::handleStatusChanged): Don't try to create an OpenGL
        surface and set the setRenderWithoutShowing flag on the window if the
        variable is set.
        (WTR::PlatformWebView::windowSnapshotImage):
        (WTR::PlatformWebView::windowShapshotEnabled):
        (WTR):
        * WebKitTestRunner/qt/TestInvocationQt.cpp:
        (WTR::TestInvocation::dumpPixelsAndCompareWithExpected): Use the old method
        of evaluating pixel results if the snapshot is not supported, that is to check
        the image we got from the web process. This is necessary for the bots to be able
        to run ref tests.

2012-10-15  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] Implement pixel snapshot generation in WTR
        https://bugs.webkit.org/show_bug.cgi?id=95992

        Reviewed by Jocelyn Turcotte.

        Switch the Qt implementation of the PlatformWebView to use
        QQuickWindow::grabWindow to generate the pixel results. This way
        we will go through the scenegraph and test the actual rendering backend.
        We use QQuickWindowPrivate::setRenderWithoutShowing to avoid the need of
        showing the window.

        * WebKitTestRunner/Target.pri: Had to added a bunch
        of modules to be able to use QQuickWindowPrivate.
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::WrapperWindow::handleStatusChanged):
        (WTR::PlatformWebView::windowSnapshotImage):

2012-10-15  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt][WTR] Do a forced repaint before generating pixel results
        https://bugs.webkit.org/show_bug.cgi?id=98654

        Reviewed by Jocelyn Turcotte.

        Do a forced repaint before grabbing the pixel snapshot. This extra
        synchronisation is necessary with the CoordinatedGraphics rendering
        backend because it has a fully asynchronous nature. This patch make
        us using the window snapshot for pixel results which is necessary to
        capture animations and other dynamic content. The actual grabbing of
        the window has not been implemented in this patch. It will come in
        a follow-up.

        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::invoke):
        (WTR::TestInvocation::dump): Store results in member variables.
        Don't close output channels yet.
        (WTR::TestInvocation::dumpResults): Added. This is where we dump
        the results if no error happened.
        (WTR):
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/TestInvocation.h:
        (TestInvocation):
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::PlatformWebView::windowSnapshotImage):
        * WebKitTestRunner/qt/TestInvocationQt.cpp:
        (WTR::TestInvocation::forceRepaintDoneCallback):
        (WTR):
        (WTR::TestInvocation::dumpPixelsAndCompareWithExpected):

2012-10-18  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Clean up variables controlling Qt module creation/handling

        Reviewed by Tor Arne Vestbø.

        We now depend on a Qt 5 version that is new enough to allow us to
        clean this up. Qt's default_pre.prf uses MODULE_QMAKE_OUTDIR, but
        the other MODULE_BASE_* variables are onl used in qmodule.prf.

        * qmake/mkspecs/features/default_pre.prf:

2012-10-18  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Reduce memory pressure during link time

        Reviewed by Tor Arne Vestbø.

        If possible always pass -fkeep-memory to the linker on i386. The
        library has grown so big that we need this not only for i386 debug
        builds but at least also for release.

        * qmake/mkspecs/features/unix/default_post.prf:

2012-10-17  Tor Arne Vestbø  <tor.arne.vestbo@digia.com>

        [Qt] Modularize documentation for QtWebKit

        Running 'make docs' would fail unless 'make qmake_all' was ran first,
        but qmake_all involved generating all the derived sources, which seems
        overly complex just for building documentation.

        We solve this by preventing all subdirs except QtWebKit from having a
        docs target. This would normally work fine on its own, but since we
        use CONFIG += ordered, there's now a missing doc target for the
        immediate dependency of the QtWebKit subdir. We solve this by adding
        a dummy-target ourselves.

        Finally, we clean up the qdocconf file to match the rest of the Qt
        documentation modularization efforts.

        Reviewed by Simon Hausmann.

        * qmake/mkspecs/features/default_post.prf:

2012-10-17  Zoltan Horvath  <zoltan@webkit.org>

        Remove the JSHeap memory measurement of the PageLoad performacetests since it creates bogus JSGlobalDatas
        https://bugs.webkit.org/show_bug.cgi?id=99609 

        Reviewed by Ryosuke Niwa.

        Remove the implementation since it creates bogus JSGlobalDatas in the layout tests.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (dump):

2012-10-17  Dirk Pranke  <dpranke@chromium.org>

        [chromium] stop falling back to platform/mac for LayoutTest results
        https://bugs.webkit.org/show_bug.cgi?id=99666

        Reviewed by James Robinson.

        Previously the Chromium ports would fall back to results in
        platform/mac if a result was not found in platform/chromium-*.
        This allowed us to share a lot of results w/ the Apple Mac port,
        but often surprised people (especially at Apple ;) when changing
        something in that directory would break a Chromium build.

        The tests that are deleted in baselineoptimizer were for cases
        that are no longer relevant or possible in the current fallback
        graph.

        * Scripts/webkitpy/common/checkout/baselineoptimizer_unittest.py:
        (BaselineOptimizerTest.test_move_baselines):
        (BaselineOptimizerTest.test_chromium_covers_mac_win_linux):
        * Scripts/webkitpy/layout_tests/port/chromium_android.py:
        (ChromiumAndroidPort):
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:
        (ChromiumLinuxPort):
        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        (ChromiumMacPort):
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        (ChromiumWinPort):
        * TestResultServer/static-dashboards/flakiness_dashboard.js:

2012-10-17  Shashi Shekhar  <shashishekhar@google.com>

        Remove redundant sdk_build parameter.
        https://bugs.webkit.org/show_bug.cgi?id=99648

        Reviewed by Adam Barth.

        sdk_build parameter is no longer needed.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * TestWebKitAPI/TestWebKitAPI.gyp/TestWebKitAPI.gyp:

2012-10-17  Joanmarie Diggs  <jdiggs@igalia.com>

        [GTK] AccessibilityUIElement::role() should be consistent across platforms wherever possible
        https://bugs.webkit.org/show_bug.cgi?id=99640

        Reviewed by Chris Fleizach.

        Convert AtkRole instances to the Mac/Safari-style AXRole string.

        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (roleToString): New method to convert AtkRole instances to the Mac/Safari-style AXRole string
        (AccessibilityUIElement::role): Output the Mac/Safair-style AXRole string rather than the AtkRole's name

2012-10-17  Anders Carlsson  <andersca@apple.com>

        Clean up Vector.h
        https://bugs.webkit.org/show_bug.cgi?id=99622

        Reviewed by Benjamin Poulain.

        Remove ReversedProxy test.

        * TestWebKitAPI/Tests/WTF/Vector.cpp:

2012-10-17  Scott Graham  <scottmg@chromium.org>

        Integer overflows/underflows in all Gamepad controller api calls.
        https://bugs.webkit.org/show_bug.cgi?id=97262

        Reviewed by Abhishek Arya.

        Range check controller inputs. This code is not exposed to the web,
        but makes fuzzers try less hard to break uninteresting code.

        * DumpRenderTree/chromium/TestRunner/GamepadController.cpp:
        (GamepadController::setButtonCount):
        (GamepadController::setButtonData):
        (GamepadController::setAxisCount):
        (GamepadController::setAxisData):

2012-10-17  Joseph Pecoraro  <pecoraro@apple.com>

        Unreviewed watchlist email change.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-17  Dan Carney  <dcarney@google.com>

        Bind isolatedWorldSecurityOrigin to world
        https://bugs.webkit.org/show_bug.cgi?id=99582

        Reviewed by Adam Barth.

        Added ability to unset isolatedWorldSecurityOrigin.

        * DumpRenderTree/chromium/DRTTestRunner.cpp:
        (DRTTestRunner::setIsolatedWorldSecurityOrigin):

2012-10-17  Joseph Pecoraro  <pecoraro@apple.com>

        Unreviewed watchlist addition.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-17  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        plugins: Allow a plugin to dictate whether it can receive drag events or not.
        https://bugs.webkit.org/show_bug.cgi?id=99355

        Reviewed by Tony Chang.

        Update the TestWebPlugin to implement the new |canProcessDrag| interface.

        * DumpRenderTree/chromium/TestWebPlugin.h:
        (TestWebPlugin::canProcessDrag):

2012-10-17  Dominic Mazzoni  <dmazzoni@google.com>

        Unreviewed. Create an accessibility watchlist.

        * Scripts/webkitpy/common/config/committers.py:
        * Scripts/webkitpy/common/config/watchlist:

2012-10-17  Jochen Eisinger  <jochen@chromium.org>

        [gyp] fix bundle resources for DumpRenderTree on mac
        https://bugs.webkit.org/show_bug.cgi?id=99558

        Reviewed by Adam Barth.

        mac_bundle_resources doesn't propagate to targets that depend on it,
        so I'm wrapping it in an all_dependent_settings block.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:

2012-10-17  Harald Alvestrand  <hta@google.com>

        Add myself to the MediaStream watchlist
        https://bugs.webkit.org/show_bug.cgi?id=99589

        Reviewed by Adam Barth.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-17  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [WK2][WTR] InjectedBundlePage::decidePolicyForNavigationAction() should print only filename part of local URLs
        https://bugs.webkit.org/show_bug.cgi?id=99581

        Reviewed by Kenneth Rohde Christiansen.

        Now InjectedBundlePage::decidePolicyForNavigationAction() prints only filename part of local URLs (URLs where scheme
        equals to 'file').

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::decidePolicyForNavigationAction):

2012-10-17  Harald Alvestrand  <hta@google.com>

        Implement the Selector argument to RTCPeerConnection.getStats
        https://bugs.webkit.org/show_bug.cgi?id=99460

        Reviewed by Adam Barth.

        The MockWebRTCPeerConnectionHandler will return one object only
        when it gets a selector, and an even number when there is no selector.
        This allows to verify that the argument is passed, but not its value.

        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.cpp:
        (MockWebRTCPeerConnectionHandler::getStats):

2012-10-17  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        WebKitTestRunner needs layoutTestController.queueReload
        https://bugs.webkit.org/show_bug.cgi?id=42672

        Reviewed by Kenneth Rohde Christiansen.

        Added implementation of testRunner.queueReload().

        * WebKitTestRunner/InjectedBundle/Bindings/TestRunner.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::queueReload):
        (WTR):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (InjectedBundle):
        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        (WTR::TestRunner::queueReload):
        (WTR):
        * WebKitTestRunner/InjectedBundle/TestRunner.h:
        (TestRunner):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/WorkQueueManager.cpp:
        (WTR::WorkQueueManager::queueReload):
        (WTR):
        * WebKitTestRunner/WorkQueueManager.h:
        (WorkQueueManager):

2012-10-17  Mark Rowe  <mrowe@apple.com>

        Fix the build with a newer version of clang.

        Reviewed by Dan Bernstein.

        Update to accommodate the renamed methods in WebCoreStatistics.

        * DumpRenderTree/mac/PixelDumpSupportMac.mm:
        (createPagedBitmapContext):

2012-10-17  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        WebKitTestRunner needs testRunner.queueLoad
        https://bugs.webkit.org/show_bug.cgi?id=42674

        Reviewed by Kenneth Rohde Christiansen.

        Added testRunner.queueLoad() and testRunner.queueBackNavigation() implementation to WTR including
        Work Queue implementation. Work Queue is managed by WorkQueueManager which belongs to UI process
        (as the needed functionality, like loading initiation, has to be invoked from UI process) and
        exchanges messages with Injected bundle.

        * WebKitTestRunner/CMakeLists.txt:
        * WebKitTestRunner/GNUmakefile.am:
        * WebKitTestRunner/InjectedBundle/Bindings/TestRunner.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::InjectedBundle):
        (WTR::InjectedBundle::didReceiveMessage):
        (WTR::InjectedBundle::done):
        (WTR::InjectedBundle::shouldProcessWorkQueue):
        (WTR):
        (WTR::InjectedBundle::processWorkQueue):
        (WTR::InjectedBundle::queueBackNavigation):
        (WTR::InjectedBundle::queueLoad):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (InjectedBundle):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::didFailProvisionalLoadWithErrorForFrame):
        (WTR::InjectedBundlePage::didFinishLoadForFrame):
        (WTR::InjectedBundlePage::didFailLoadWithErrorForFrame):
        (WTR::InjectedBundlePage::locationChangeForFrame):
        (WTR):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:
        (InjectedBundlePage):
        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        (WTR::TestRunner::queueBackNavigation):
        (WTR):
        (WTR::TestRunner::queueLoad):
        * WebKitTestRunner/InjectedBundle/TestRunner.h:
        (TestRunner):
        * WebKitTestRunner/Target.pri:
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::resetStateToConsistentValues):
        * WebKitTestRunner/TestController.h:
        (WTR::TestController::workQueueManager):
        (TestController):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        (WTR::TestInvocation::didReceiveSynchronousMessageFromInjectedBundle):
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:
        * WebKitTestRunner/WorkQueueManager.cpp: Added.
        (WTR):
        (WTR::mainPage):
        (WTR::goToItemAtIndex):
        (WTR::WorkQueueManager::WorkQueueManager):
        (WTR::WorkQueueManager::clearWorkQueue):
        (WTR::WorkQueueManager::processWorkQueue):
        (WTR::WorkQueueManager::queueLoad):
        (WTR::WorkQueueManager::queueBackNavigation):
        (WTR::WorkQueueManager::enqueue):
        * WebKitTestRunner/WorkQueueManager.h: Added.
        (WTR):
        (WorkQueueManager):
        (WTR::WorkQueueManager::isWorkQueueEmpty):
        (WorkQueueItem):
        (WTR::WorkQueueManager::WorkQueueItem::~WorkQueueItem):
        * WebKitTestRunner/win/WebKitTestRunner.vcproj:

2012-10-16  Andy Estes  <aestes@apple.com>

        [WebKit2] Create Objective-C API for adding and removing user scripts
        https://bugs.webkit.org/show_bug.cgi?id=99528

        Reviewed by Anders Carlsson.

        Add three new API tests.

        * TestWebKitAPI/Tests/WebKit2ObjC/UserContentTest.mm:
        (expectScriptValueIsString):
        (expectScriptValueIsBoolean):
        (expectScriptValueIsUndefined):

2012-10-16  Dirk Pranke  <dpranke@chromium.org>

        [chromium] add Mountain Lion baselines
        https://bugs.webkit.org/show_bug.cgi?id=99505

        Reviewed by Ojan Vafai.

        This change adds a temporary 10.8/MountainLion-specific
        expectations file for Chromium so that the bot can be green
        while we are updating all the baselines and triaging failures.

        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        (ChromiumMacPort.expectations_files):
        * Scripts/webkitpy/layout_tests/port/chromium_mac_unittest.py:
        (ChromiumMacPortTest.test_ml_expectations):

2012-10-16  Dima Gorbik  <dgorbik@apple.com>

        Remove Platform.h include from the header files.
        https://bugs.webkit.org/show_bug.cgi?id=98665

        Reviewed by Eric Seidel.

        We don't want other clients that include WebKit headers to know about Platform.h.

        * DumpRenderTree/mac/MockGeolocationProvider.mm:

2012-10-16  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Add the chromium API for RTCDataChannel
        https://bugs.webkit.org/show_bug.cgi?id=99435

        Reviewed by Adam Barth.

        Adding mock support for WebRTCDataChannel.

        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.cpp:
        (StringDataTask):
        (StringDataTask::StringDataTask):
        (CharPtrDataTask):
        (CharPtrDataTask::CharPtrDataTask):
        (DataChannelReadyStateTask):
        (DataChannelReadyStateTask::DataChannelReadyStateTask):
        (RTCPeerConnectionReadyStateTask):
        (RTCPeerConnectionReadyStateTask::RTCPeerConnectionReadyStateTask):
        (MockWebRTCPeerConnectionHandler::MockWebRTCPeerConnectionHandler):
        (MockWebRTCPeerConnectionHandler::initialize):
        (MockWebRTCPeerConnectionHandler::stop):
        (MockWebRTCPeerConnectionHandler::openDataChannel):
        (MockWebRTCPeerConnectionHandler::closeDataChannel):
        (MockWebRTCPeerConnectionHandler::sendStringData):
        (MockWebRTCPeerConnectionHandler::sendRawData):
        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.h:
        (MockWebRTCPeerConnectionHandler):

2012-10-16  Chris Rogers  <crogers@google.com>

        Rename some AudioNodes
        https://bugs.webkit.org/show_bug.cgi?id=99358

        Reviewed by Daniel Bates.

        * Scripts/do-webcore-rename:

2012-10-16  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        Implement testRunner.dumpSelectionRect() in WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=69545

        Reviewed by Simon Fraser.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::dump): Set the
        kWKSnapshotOptionsPaintSelectionRectangle option if
        testRunner.dumpSelectionRect() is called.
        * WebKitTestRunner/InjectedBundle/TestRunner.h:
        (WTR::TestRunner::dumpSelectionRect):
        (WTR::TestRunner::shouldDumpSelectionRect):
        (TestRunner):

2012-10-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r131461.
        http://trac.webkit.org/changeset/131461
        https://bugs.webkit.org/show_bug.cgi?id=99474

        Broke win7 bots (Requested by danakj|gardening on #webkit).

        * DumpRenderTree/chromium/TestEventPrinter.cpp:
        * DumpRenderTree/chromium/TestEventPrinter.h:
        (TestEventPrinter):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::dump):

2012-10-16  Zoltan Horvath  <zoltan@webkit.org>

        [chromium] Provide used JSHeap size in chromium's DRT for pageloadtest memory measurements
        https://bugs.webkit.org/show_bug.cgi?id=99288

        Reviewed by Ryosuke Niwa.

        Provide used JSHeap size as we did it for the Apple port.

        * DumpRenderTree/chromium/TestEventPrinter.cpp:
        (TestEventPrinter::handleDumpMemoryHeader): Add new function to print the JSHeap memory result.
        * DumpRenderTree/chromium/TestEventPrinter.h:
        (TestEventPrinter): handleDumpMemoryHeader declaration.
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::dump): Dump JSHeap value.

2012-10-16  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Fix nmake wipeclean on Windows

        Reviewed by Tor Arne Vestbø.

        Delete all subdirectories and no files instead of ".".

        * qmake/mkspecs/features/configure.prf:

2012-10-16  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Fix wipeclean on Windows

        Reviewed by Csaba Osztrogonác.

        Make sure to close the .qmake.cache file after opening it, otherwise it cannot be deleted on
        a clean build because this process (build-webkit) is still using it due to Windows' exclusive
        way of opening files.

        * Scripts/webkitdirs.pm:
        (buildQMakeProjects):

2012-10-16  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Fix determination of changed files from SVN revisions

        Reviewed by Csaba Osztrogonác.

        isSVN() doesn't work from within the build directory, so change to the source directory before
        doing any VCS operations.

        * Scripts/VCSUtils.pm:
        * Scripts/webkitdirs.pm:
        (buildQMakeProjects):

2012-10-16  Simon Hausmann  <simon.hausmann@digia.com>

        Fix build-webkit bailing out of !isSVN() and !isGit()

        Reviewed by Tor Arne Vestbø.

        Added missing else case with early return.

        * Scripts/VCSUtils.pm:

2012-10-16  Simon Hausmann  <simon.hausmann@digia.com>, Tor Arne Vestbø <tor.arne.vestbo@digia.com>

        [Qt] Add logic for triggering clean builds on changes to build system files

        Reviewed by Csaba Osztrogonác.

        Re-use the existing logic that gives us a range between old and new SVN revision and
        parse the summarized output of diff to see if any of the changed files include files
        that are part of the Qt build system. If they change we likely need a clean build and
        trigger it just to be on the safe side and reduce the amount of manual intervention
        needed on the Qt build bots.

        * Scripts/VCSUtils.pm:
        * Scripts/webkitdirs.pm:
        (buildQMakeProjects):

2012-10-16  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        Fix the paths for QtGraphics related WebKit2 files.

        Unreviewed update of watchlist.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-16  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        CSS and TouchAdjustment - I am watching you!

        Unreviewed update of watchlist.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-16  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Silence C++11 warnings with older versions of clang

        Rubber-stamped by Tor Arne Vestbø.

        Some clang versions support -Wno-c++11-extensions and some use -Wno-c++0x-extensions.
        We cater both :)

        * qmake/mkspecs/features/unix/default_post.prf:

2012-10-16  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [WK2] Provide WKURL API for resolving the relative URL with the given base URL
        https://bugs.webkit.org/show_bug.cgi?id=99317

        Reviewed by Kenneth Rohde Christiansen.

        Added API test for newly added WKURLCreateWithBaseURL().

        * TestWebKitAPI/PlatformEfl.cmake:
        * TestWebKitAPI/Tests/WebKit2/WKURL.cpp: Added.
        (TestWebKitAPI):
        (TestWebKitAPI::TEST):

2012-10-16  Zan Dobersek  <zandobersek@gmail.com>

        [GTK] Decrease the Cario jhbuild dep version back to 1.10.2
        https://bugs.webkit.org/show_bug.cgi?id=99443

        Reviewed by Philippe Normand.

        Crashes started to occur after the Cairo version in the JHBuild dependencies
        was bumped up to 1.12.4. This change brings it back down to 1.10.2, which
        worked fine.

        * gtk/jhbuild.modules:

2012-10-16  Szilard Ledan  <szledan@inf.u-szeged.hu>

        Separate WebKit2 instances use the same local storage
        https://bugs.webkit.org/show_bug.cgi?id=89666

        Reviewed by Simon Hausmann.

        TestController has been modified to get the local storage from
        DUMPRENDERTREE_TEMP environment variable. If it's undefined
        then it works with the default directory. The aim is for the parallelly
        started WTRs to use separate directories. It was implemented for WK1
        long time ago and it works fine.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):

2012-10-15  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Display page favicons in MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=99265

        Reviewed by Gyuyoung Kim.

        Display current page favicon in the URL bar.
        This uses the new favicon database API in
        EFL WebKit2.

        * MiniBrowser/efl/main.c:
        (on_favicon_received):
        (on_view_icon_changed):
        (window_create):

2012-10-15  Simon Fraser  <simon.fraser@apple.com>

        Update the url bar in MiniBrowser when getting the committed URL
        https://bugs.webkit.org/show_bug.cgi?id=99388

        Reviewed by Sam Weinig.

        Fix both WK1 and WK2 window controllers to update the URL in the 
        text field when transitioning to the committed URL. This fixes
        the URL when dragging local files into the window.

        * MiniBrowser/mac/WK1BrowserWindowController.m:
        (-[WK1BrowserWindowController webView:didCommitLoadForFrame:]):
        * MiniBrowser/mac/WK2BrowserWindowController.m:
        (-[WK2BrowserWindowController updateTextFieldFromURL:]):
        (-[WK2BrowserWindowController updateProvisionalURLForFrame:]):
        (-[WK2BrowserWindowController updateCommittedURLForFrame:]):
        (-[WK2BrowserWindowController didCommitLoadForFrame:]):

2012-10-15  Ojan Vafai  <ojan@chromium.org>

        Don't show the content shell and android test bots for webkit ToT
        https://bugs.webkit.org/show_bug.cgi?id=99380

        Reviewed by Dirk Pranke.

        Content shell used to coincidentally be skipped because it spelled WebKit correctly.
        Now skip it explicitly. The Android bot is up and running, but only has a stub for
        running tests. Skip it so we don't show a false error.
        * TestResultServer/static-dashboards/builders.js:
        (isChromiumWebkitTipOfTreeTestRunner):

2012-10-15  Zoltan Horvath  <zoltan@webkit.org>

        Add MountainLion Performance-bot to the Performance bots waterfall link
        https://bugs.webkit.org/show_bug.cgi?id=99378

        Reviewed by Dirk Pranke.

        Add MountainLion Performance-bot to the Performance bots waterfall link on the buildbots frontpage.

        * BuildSlaveSupport/build.webkit.org-config/templates/root.html:

2012-10-15  Yael Aharon  <yael.aharon@intel.com>

        [EFL][WK2] Cannot set evas engine from command line
        https://bugs.webkit.org/show_bug.cgi?id=99286

        Reviewed by Kenneth Rohde Christiansen.

        If an engine name is passed on the command line, pass it along to evas.

        * MiniBrowser/efl/main.c:
        (elm_main):

2012-10-15  Ojan Vafai  <ojan@chromium.org>

        Lower the minimum time required to keep a test in the test results json
        https://bugs.webkit.org/show_bug.cgi?id=99346

        Reviewed by Eric Seidel.

        On the run-webkit-tests side, we floor the time. So, 5 seconds is too close to
        the 6 second timeout. Lower the time so that we can get a better sense of tests
        that are close to timing out.

        * TestResultServer/model/jsonresults.py:
        * TestResultServer/model/jsonresults_unittest.py:
        (JsonResultsTest.test_merge_keep_test_with_all_pass_but_slow_time):

2012-10-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r131306 and r131307.
        http://trac.webkit.org/changeset/131306
        http://trac.webkit.org/changeset/131307
        https://bugs.webkit.org/show_bug.cgi?id=99354

        It made layout testing extremely slow again (Requested by
        Ossy_night on #webkit).

        * WebKitTestRunner/Target.pri:
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::invoke):
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/TestInvocation.h:
        (TestInvocation):
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::WrapperWindow::handleStatusChanged):
        (WTR::PlatformWebView::windowSnapshotImage):
        * WebKitTestRunner/qt/TestInvocationQt.cpp:
        (WTR::TestInvocation::dumpPixelsAndCompareWithExpected):

2012-10-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r131327.
        http://trac.webkit.org/changeset/131327
        https://bugs.webkit.org/show_bug.cgi?id=99353

        broke the build (Requested by danakj|gardening on #webkit).

        * DumpRenderTree/chromium/TestEventPrinter.cpp:
        * DumpRenderTree/chromium/TestEventPrinter.h:
        (TestEventPrinter):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::dump):

2012-10-15  Kenichi Ishibashi  <bashi@chromium.org>

        [WebSocket] Update pywebsocket to 0.7.8
        https://bugs.webkit.org/show_bug.cgi?id=99293

        Reviewed by Yuta Kitamura.

        Version 0.7.8 supports WebSocket frames and messages compression
        with blocks in which BFINAL bit is set to 1.
        We need this feature to add a test case of compression extension.

        * Scripts/webkitpy/thirdparty/mod_pywebsocket/extensions.py:
        (DeflateFrameExtensionProcessor.__init__):
        (DeflateFrameExtensionProcessor.set_bfinal):
        (DeflateFrameExtensionProcessor._outgoing_filter):
        (DeflateMessageProcessor.__init__):
        (DeflateMessageProcessor.set_bfinal):
        (DeflateMessageProcessor._process_outgoing_message):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/util.py:
        (_Deflater.compress_and_finish):
        (_RFC1979Deflater.filter):

2012-10-15  Zan Dobersek  <zandobersek@gmail.com>

        [TestResultServer] TestExpectations should only be loaded for the flakiness dashboard
        https://bugs.webkit.org/show_bug.cgi?id=99245

        Reviewed by Ojan Vafai.

        Only load the TestExpectations when using the flakiness dashboard. Other dashboards
        don't need them so there's no reason to load them.

        * TestResultServer/static-dashboards/dashboard_base.js:
        (isFlakinessDashboard):
        (appendJSONScriptElements):

2012-10-15  Zoltan Horvath  <zoltan@webkit.org>

        [chromium] Provide used JSHeap size in chromium's DRT for pageloadtest memory measurements 
        https://bugs.webkit.org/show_bug.cgi?id=99288

        Reviewed by Ryosuke Niwa.

        Provide used JSHeap size as we did it for the Apple port.

        * DumpRenderTree/chromium/TestEventPrinter.cpp:
        (TestEventPrinter::handleDumpMemoryHeader): Add new function to print the JSHeap memory result.
        * DumpRenderTree/chromium/TestEventPrinter.h:
        (TestEventPrinter): handleDumpMemoryHeader declaration.
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::dump): Dump JSHeap value.

2012-10-15  George Staikos  <staikos@webkit.org>

        [BlackBerry] Adapt to Platform API changes in string handling
        https://bugs.webkit.org/show_bug.cgi?id=99248

        Reviewed by Yong Li.

        Convert usage of WebString, char* and std::string to BlackBerry::Platform::String.

        * DumpRenderTree/blackberry/DumpRenderTree.cpp:
        (BlackBerry::WebKit::DumpRenderTree::runTest):
        * DumpRenderTree/blackberry/WorkQueueItemBlackBerry.cpp:
        (LoadHTMLStringItem::invoke):
        (ScriptItem::invoke):

2012-10-15  Kangil Han  <kangil.han@samsung.com>

        [EFL][EWebLauncher] Add encoding detector option.
        https://bugs.webkit.org/show_bug.cgi?id=98726

        Reviewed by Gyuyoung Kim.

        Added an option to test WebCore's encoding detector functionality on EWebLauncher.
        With this patch, EWebLauncher would display text correctly even if web page wouldn't specify charset information.

        * EWebLauncher/main.c:
        (_User_Arguments):
        (windowCreate):
        (parseUserArguments):

2012-10-15  Ilya Tikhonovsky  <loislo@chromium.org>

        Build fix for Mac debug build.

        * TestWebKitAPI/Tests/WTF/MemoryInstrumentationTest.cpp:

2012-10-15  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] Implement pixel snapshot generation in WTR
        https://bugs.webkit.org/show_bug.cgi?id=95992

        Reviewed by Jocelyn Turcotte.

        Switch the Qt implementation of the PlatformWebView to use
        QQuickWindow::grabWindow to generate the pixel results. This way
        we will go through the scenegraph and test the actual rendering backend.
        We use QQuickWindowPrivate::setRenderWithoutShowing to avoid the need of
        showing the window.

        * WebKitTestRunner/Target.pri: Had to added a bunch
        of modules to be able to use QQuickWindowPrivate.
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::WrapperWindow::handleStatusChanged):
        (WTR::PlatformWebView::windowSnapshotImage):

2012-10-15  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt][WTR] Do a forced repaint before generating pixel results
        https://bugs.webkit.org/show_bug.cgi?id=98654

        Reviewed by Jocelyn Turcotte.

        Do a forced repaint before grabbing the pixel snapshot. This extra
        synchronisation is necessary with the CoordinatedGraphics rendering
        backend because it has a fully asynchronous nature. This patch make
        us using the window snapshot for pixel results which is necessary to
        capture animations and other dynamic content. The actual grabbing of
        the window has not been implemented in this patch. It will come in
        a follow-up.

        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::invoke):
        (WTR::TestInvocation::dump): Store results in member variables.
        Don't close output channels yet.
        (WTR::TestInvocation::dumpResults): Added. This is where we dump
        the results if no error happened.
        (WTR):
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/TestInvocation.h:
        (TestInvocation):
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::PlatformWebView::windowSnapshotImage):
        * WebKitTestRunner/qt/TestInvocationQt.cpp:
        (WTR::TestInvocation::forceRepaintDoneCallback):
        (WTR):
        (WTR::TestInvocation::dumpPixelsAndCompareWithExpected):

2012-10-15  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Separate Qt WebKit into Qt WebKit and Qt WebKit Widgets
        https://bugs.webkit.org/show_bug.cgi?id=88162

        Reviewed by Kenneth Rohde Christiansen.

        Rename the QtWebKit module to QtWebKitWidgets.

        * DumpRenderTree/qt/DumpRenderTree.pro:
        * MiniBrowser/qt/MiniBrowser.pro:
        * MiniBrowser/qt/raw/Target.pri:
        * QtTestBrowser/QtTestBrowser.pro:
        * Scripts/webkitpy/layout_tests/port/qt.py:
        (QtPort._path_to_webcore_library):
        * WebKitTestRunner/InjectedBundle/Target.pri:
        * WebKitTestRunner/Target.pri:
        * qmake/mkspecs/features/default_post.prf:
        * qmake/mkspecs/features/webkit_modules.prf:
        * qmake/mkspecs/features/win32/default_post.prf:

2012-10-11  Kinuko Yasuda  <kinuko@chromium.org>

        [chromium] Removes unnecessary dependencies in DumpRenderTree.gyp
        https://bugs.webkit.org/show_bug.cgi?id=99132

        Reviewed by Kent Tamura.

        Removing webkit_support:blob dependency for DumpRenderTree target as it doesn't seem necessary.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:

2012-10-15  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt][WK2] Buildfix for newer Qt5.
        https://bugs.webkit.org/show_bug.cgi?id=99303

        Reviewed by Simon Hausmann.

        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::PlatformWebView::resizeTo):

2012-10-14  Jon Lee  <jonlee@apple.com>

        Allow notification origin permission request when no js callback is provided
        https://bugs.webkit.org/show_bug.cgi?id=63615
        <rdar://problem/11059590>

        Reviewed by Sam Weinig.

        Teach DRT to look at the existing entries in the permission hash map when permission is requested.

        * DumpRenderTree/mac/MockWebNotificationProvider.h: Expose policyForOrigin.
        * DumpRenderTree/mac/MockWebNotificationProvider.mm:
        (-[MockWebNotificationProvider setWebNotificationOrigin:permission:]):
        * DumpRenderTree/mac/UIDelegate.mm:
        (-[UIDelegate webView:decidePolicyForNotificationRequestFromOrigin:listener:]): Look at whether a
        policy for the origin already exists. If so, accept or deny the request as appropriate. Otherwise,
        accept by default.

2012-10-13  Zan Dobersek  <zandobersek@gmail.com>

        [TestResultServer] Unit tests require an update after r131239
        https://bugs.webkit.org/show_bug.cgi?id=99236

        Reviewed by Ojan Vafai.

        Replacing 'Webkit' with 'WebKit' in builder names througout the unit tests
        after the Chromium builders have been renamed recently.

        * TestResultServer/static-dashboards/flakiness_dashboard_unittests.js:

2012-10-12  Zan Dobersek  <zandobersek@gmail.com>

        [TestResultServer] Add support for non-Chromium TestExpectations files
        https://bugs.webkit.org/show_bug.cgi?id=98422

        Reviewed by Ojan Vafai.

        Loads TestExpectations files for several other non-Chromium ports, parses them and
        properly distributes them per various platforms.

        * TestResultServer/static-dashboards/dashboard_base.js: g_expectations is replaced by
        g_expectationsByPlatform, an object that holds raw TestExpectations file contents for
        various platforms.
        (requestExpectationsFiles): First traverses through the platforms tree to gather all
        the TestExpectations files that should be loaded, then loads them in parallel.
        (appendJSONScriptElements):
        * TestResultServer/static-dashboards/flakiness_dashboard.js: The platforms tree is reorganized
        to describe each platform and possible subplatforms plainly yet in detail. The PLATFORM_FALLBACKS
        object is removed as it's not used anywhere. g_allTestsByPlatformAndBuildType is now filled by
        traversing the platforms tree.
        (traversePlatformsTree.traverse):
        (traversePlatformsTree): A helper function that traverses the platforms tree, invoking
        callback on each leaf node.
        (determineWKPlatform): A helper function to determine whether the builder is running WebKit1 or
        WebKit2 layer of a given platform.
        (chromiumPlatform): Chromium-specific platforms are now properly prefixed with 'CHROMIUM_'.
        (TestTrie): A new class that holds all the tests in a trie. The trie is constructed by iterating
        through the tests for each builder, adding each test to the trie.
        (TestTrie.prototype.forEach.traverse):
        (TestTrie.prototype.forEach): A helper function that traverses the tests trie, invoking callback on each leaf.
        (TestTrie.prototype._addTest): Aligns the test into the specified trie based on the test's path.
        (getAllTestsTrie): Instead of in list, the problematic tests from each builder are now stored in a trie.
        (individualTestsForSubstringList): Modified to traverse the trie instead of iterating the list.
        (allTestsWithResult): Ditto.
        (platformObjectForName): Splits the platform name by underscores and finds the appropriate platform object.
        (getParsedExpectations): Now operates on the passed-in parameter rather than on a global variable.
        (addTestToAllExpectationsForPlatform): Links expectations and modifiers to the test on the specified platform
        and any build type the modifiers might apply to (or all build types if there are no such modifiers).
        (processExpectationsForPlatform): Determines if the expectation should actually be processed for the given
        platform by checking if any platform's fallback platforms support platform modifier unions and if any modifiers
        represent such an union. If so, the expectation is then only processed if the given platform is in the union
        the modifier presents or there are no such modifiers.
        (processExpectations): Processes all acquired expectations by traversing the platforms tree and taking into
        account possible fallback platforms.
        (processTestRunsForBuilder):
        (realModifiers.return.modifiers.filter):
        (realModifiers): Modifiers other than build configurations and bug handles are now filtered out only if they
        are present in the platform's platform modifier unions or represent subplatforms of a platform that supports
        platform modifier unions.
        * TestResultServer/static-dashboards/flakiness_dashboard_unittests.js: The test cases are updated and expanded
        where necessary to cover the changes.
        (resetGlobals):
        (test): Added a TestTrie test.

2012-10-12  Dirk Pranke  <dpranke@chromium.org>

        Update chromium bot names in garden-o-matic.

        Unreviewed, build fix.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:

2012-10-12  Ojan Vafai  <ojan@chromium.org>

        Fix bot name filters now that the Chromium bots have been renamed.
        * TestResultServer/static-dashboards/builders.js:
        (isChromiumWebkitTipOfTreeTestRunner):
        (isChromiumWebkitDepsTestRunner):
        (isChromiumTipOfTreeGTestRunner):

2012-10-12  Dirk Pranke  <dpranke@chromium.org>

        [chromium] add ML bot and update bot names
        https://bugs.webkit.org/show_bug.cgi?id=99209

        Reviewed by Eric Seidel.

        This change adds proper baseline support for Mac10.8 (Mountain
        Lion or ML) to chromium and updates the bot names from "Webkit" 
        to "WebKit" and ensures that all the bots have the OS version in
        the name on Mac and Win.

        We don't yet include a ML bot in garden-o-matic since it isn't
        green yet.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/builders_unittests.js:
        (.):
        * Scripts/webkitpy/layout_tests/port/builders.py:
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort):
        * Scripts/webkitpy/layout_tests/port/factory_unittest.py:
        (FactoryTest.test_get_from_builder_name):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (TestRebaseline.test_baseline_directory):
        (TestRebaseline.test_rebaseline_updates_expectations_file_noop):
        (test_rebaseline_updates_expectations_file):
        (test_rebaseline_does_not_include_overrides):
        (test_rebaseline_test):
        (test_rebaseline_test_and_print_scm_changes):
        (test_rebaseline_and_copy_test):
        (test_rebaseline_and_copy_test_with_lion_result):
        (test_rebaseline_and_copy_no_overwrite_test):
        (test_rebaseline_expectations):
        * Scripts/webkitpy/tool/servers/gardeningserver_unittest.py:
        (BuildCoverageExtrapolatorTest.test_extrapolate):

2012-10-12  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [Qt][WK2] REGRESSION(r131057): It made plugins/plugin-document-back-forward.html timeout
        https://bugs.webkit.org/show_bug.cgi?id=99152

        Reviewed by Simon Fraser.

        Even though Response was already checked in WTR WKBundlePagePolicyClient decidePolicyForResponse callback,
        this check did not take plugins into consideration when deciding whether we can show the given MIME type or not
        so added another check in WTR UI process which also includes plugins.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::decidePolicyForResponse):
        * WebKitTestRunner/TestController.h:
        (TestController):

2012-10-12  Rob Buis  <rbuis@rim.com>

        [BlackBerry] Add tests of WebSocketEnabled preference
        https://bugs.webkit.org/show_bug.cgi?id=84982

        Reviewed by Yong Li.

        PR 209265.

        Allow WebSocketsEnabled preference setting.

        * DumpRenderTree/blackberry/TestRunnerBlackBerry.cpp:
        (TestRunner::overridePreference):

2012-10-12  Tommy Widenflycht  <tommyw@google.com>

        Creating a MediaStream subscription in watchlist
        https://bugs.webkit.org/show_bug.cgi?id=99172

        Reviewed by Yuta Kitamura.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r131160.
        http://trac.webkit.org/changeset/131160
        https://bugs.webkit.org/show_bug.cgi?id=99163

        "It should not be landed without it's follow-up because it
        break pixal and ref tests without it." (Requested by kbalazs
        on #webkit).

        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::invoke):
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/TestInvocation.h:
        (TestInvocation):
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::PlatformWebView::windowSnapshotImage):
        * WebKitTestRunner/qt/TestInvocationQt.cpp:
        (WTR::TestInvocation::dumpPixelsAndCompareWithExpected):

2012-10-12  Jochen Eisinger  <jochen@chromium.org>

        Create a separate gyp target for dependencies of DumpRenderTree
        https://bugs.webkit.org/show_bug.cgi?id=99023

        Reviewed by Tony Chang.

        This allows for pulling in the fonts and helpers required to run layout
        tests in the content_shell without depending on DumpRenderTree.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:

2012-10-12  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt][WTR] Do a forced repaint before generating pixel results
        https://bugs.webkit.org/show_bug.cgi?id=98654

        Reviewed by Jocelyn Turcotte.

        Do a forced repaint before grabbing the pixel snapshot. This extra
        synchronisation is necessary with the CoordinatedGraphics rendering
        backend because it has a fully asynchronous nature. This patch make
        us using the window snapshot for pixel results which is necessary to
        capture animations and other dynamic content. The actual grabbing of
        the window has not been implemented in this patch. It will come in
        a follow-up.

        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::invoke):
        (WTR::TestInvocation::dump): Store results in member variables.
        Don't close output channels yet.
        (WTR::TestInvocation::dumpResults): Added. This is where we dump
        the results if no error happened.
        (WTR):
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/TestInvocation.h:
        (TestInvocation):
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        (WTR::PlatformWebView::windowSnapshotImage):
        * WebKitTestRunner/qt/TestInvocationQt.cpp:
        (WTR::TestInvocation::forceRepaintDoneCallback):
        (WTR):
        (WTR::TestInvocation::dumpPixelsAndCompareWithExpected):

2012-10-12  Ilya Tikhonovsky  <loislo@chromium.org>

        Unreviewed compile error fix for chromium windows bot.

        * TestWebKitAPI/Tests/WTF/MemoryInstrumentationTest.cpp:

2012-10-12  Ilya Tikhonovsky  <loislo@chromium.org>

        Another unreviewed fix for clang builders.

        * TestWebKitAPI/Tests/WTF/MemoryInstrumentationTest.cpp:

2012-10-12  Ilya Tikhonovsky  <loislo@chromium.org>

        Unreviewed compile error fix for clang builders.

        * TestWebKitAPI/Tests/WTF/MemoryInstrumentationTest.cpp:

2012-10-11  Ilya Tikhonovsky  <loislo@chromium.org>

        Web Inspector: NMI move instrumentation tests from chromium test set to the cross platform test set.
        https://bugs.webkit.org/show_bug.cgi?id=99046

        Reviewed by Yury Semikhatsky.

        * TestWebKitAPI/Tests/WTF/MemoryInstrumentationTest.cpp:

2012-10-11  Takashi Sakamoto  <tasak@google.com>

        [WebKit IDL] remove all module from idl files.
        https://bugs.webkit.org/show_bug.cgi?id=99007

        Reviewed by Kentaro Hara.

        Since current WebIDL spec doesn't support "module", remove
        module from all idl files.

        No new tests. I ran run-bindings-tests and no error was reported.

        * WebKitTestRunner/InjectedBundle/Bindings/AccessibilityController.idl:
        * WebKitTestRunner/InjectedBundle/Bindings/AccessibilityTextMarker.idl:
        * WebKitTestRunner/InjectedBundle/Bindings/AccessibilityTextMarkerRange.idl:
        * WebKitTestRunner/InjectedBundle/Bindings/AccessibilityUIElement.idl:
        * WebKitTestRunner/InjectedBundle/Bindings/EventSendingController.idl:
        * WebKitTestRunner/InjectedBundle/Bindings/GCController.idl:
        * WebKitTestRunner/InjectedBundle/Bindings/TestRunner.idl:
        * WebKitTestRunner/InjectedBundle/Bindings/TextInputController.idl:
        Removed "module".

2012-10-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r131107.
        http://trac.webkit.org/changeset/131107
        https://bugs.webkit.org/show_bug.cgi?id=99126

        Causes an ASSERT (Requested by abarth|gardening on #webkit).

        * DumpRenderTree/chromium/TestRunner/AccessibilityControllerChromium.cpp:
        (AccessibilityController::getAccessibleElementById):
        * DumpRenderTree/chromium/TestRunner/AccessibilityUIElementChromium.cpp:
        (AccessibilityUIElement::titleUIElementCallback):

2012-10-11  Seokju Kwon  <seokju.kwon@samsung.com>

        [EFL][WK2] Add support for Inspector
        https://bugs.webkit.org/show_bug.cgi?id=98639

        Reviewed by Kenneth Rohde Christiansen.

        Enable developer extensions when browser is created.
        And Inspector can be opened by pressing Ctrl+i on browser.

        * MiniBrowser/efl/main.c:
        (on_key_down):
        (window_create):

2012-10-11  Gyuyoung Kim  <gyuyoung.kim@samsung.com>

        [EFL] Remove "web" word in web inspector
        https://bugs.webkit.org/show_bug.cgi?id=98724

        Reviewed by Laszlo Gombos.

        *web* word is redundant in web inspector. Beside r130494 and r130479 removed *web* from EFL WK2.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::createInspectorView):
        (DumpRenderTreeChrome::removeInspectorView):
        (DumpRenderTreeChrome::waitInspectorLoadFinished):
        (DumpRenderTreeChrome::onInspectorViewCreate):
        (DumpRenderTreeChrome::onInspectorViewClose):
        (DumpRenderTreeChrome::onInspectorFrameLoadFinished):
        * DumpRenderTree/efl/DumpRenderTreeChrome.h:
        (DumpRenderTreeChrome):
        * DumpRenderTree/efl/TestRunnerEfl.cpp:
        (TestRunner::showWebInspector):
        (TestRunner::closeWebInspector):
        * EWebLauncher/main.c:
        (on_inspector_ecore_evas_resize):
        (on_key_down):
        (on_inspector_view_create):
        (on_inspector_view_close):
        (on_inspector_view_destroyed):
        (browserCreate):
        (webInspectorCreate):
        (closeWindow):
        (main_signal_exit):

2012-10-11  Timothy Hatcher  <timothy@apple.com>

        Unreviewed watch list addition for Inspector.json.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-11  Dominic Mazzoni  <dmazzoni@google.com>

        AX: labelForElement is slow when there are a lot of DOM elements
        https://bugs.webkit.org/show_bug.cgi?id=97825

        Reviewed by Ryosuke Niwa.

        Implement titleUIElement in the chromium port of DRT, and
        fix getAccessibleElementById so that it ensures the backing store
        is up-to-date.

        * DumpRenderTree/chromium/TestRunner/AccessibilityControllerChromium.cpp:
        (AccessibilityController::getAccessibleElementById):
        * DumpRenderTree/chromium/TestRunner/AccessibilityUIElementChromium.cpp:
        (AccessibilityUIElement::titleUIElementCallback):

2012-10-11  Dirk Pranke  <dpranke@chromium.org>

        test-webkitpy runs individual tests twice
        https://bugs.webkit.org/show_bug.cgi?id=99098

        Reviewed by Adam Barth.

        If you were to run 'test-webkitpy webkitpy.test.main_unittests.TesterTests.test_no_tests_found',
        it would actually run the test twice. This fixes that.

        * Scripts/webkitpy/test/main.py:
        (Tester._parse_args):
        (Tester._test_names):
        * Scripts/webkitpy/test/main_unittest.py:
        (TesterTest.test_no_tests_found):
        (TesterTest):
        (TesterTest.test_individual_names_are_not_run_twice):

2012-10-11  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Exception when the layout test driver is stopped
        https://bugs.webkit.org/show_bug.cgi?id=99084

        Reviewed by Dirk Pranke.

        On chromium-android, the process is killed directly in ServerProcess.stop() as the pipes are closed first.
        Should not try to read data from the pipes after the process is killed.

        * Scripts/webkitpy/layout_tests/port/server_process.py:
        (ServerProcess.stop): Don't read data after the process is killed.

2012-10-11  Mario Sanchez Prada  <msanchez@igalia.com>

        [GTK] REGRESSION(r131033): Favicons don't work in MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=99019

        Reviewed by Carlos Garcia Campos.

        Enable the favicons database by specifying the default path for
        the directory where the actual data will be stored.

        * MiniBrowser/gtk/main.c:
        (main): Set the default directory for the favicon database calling
        webkit_web_context_set_favicon_database_directory().

2012-10-11  Sudarsana Nagineni  <sudarsana.nagineni@intel.com>

        [EFL][WK2] NWTR should launch MiniBrowser instead of EWebLauncher after test run
        https://bugs.webkit.org/show_bug.cgi?id=99075

        Reviewed by Kenneth Rohde Christiansen.

        Pass the '-2' flag when executing run-launcher script after
        testing with WebKitTestRunner.

        * Scripts/webkitpy/layout_tests/port/efl.py:
        (EflPort.show_results_html_file):

2012-10-11  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Add support for Javascript popup boxes to MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=99021

        Reviewed by Kenneth Rohde Christiansen.

        Add support for JavaScript popups (alert, confirm, prompt)
        to MiniBrowser.

        * MiniBrowser/efl/main.c:
        (miniBrowserViewSmartClass):
        (browser_view_find):
        (quit_event_loop):
        (on_ok_clicked):
        (on_javascript_alert):
        (on_javascript_confirm):
        (on_javascript_prompt):
        (window_create):
        (elm_main):

2012-10-11  Ryuan Choi  <ryuan.choi@samsung.com>

        [EFL][jhbuild] Disable elm-web in elementary
        https://bugs.webkit.org/show_bug.cgi?id=99005

        Reviewed by Laszlo Gombos.

        * efl/jhbuild.modules: Added --disable-web to elementary.

2012-10-11  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        REGRESSION (r129478-r129480): http/tests/loading/text-content-type-with-binary-extension.html failing on Apple MountainLion Debug WK2 (Tests)
        https://bugs.webkit.org/show_bug.cgi?id=98527

        Reviewed by Kenneth Rohde Christiansen.

        Added decidePolicyForResponse callback for WTR PagePolicyClient.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):
        (WTR::TestController::decidePolicyForResponse):
        (WTR):
        * WebKitTestRunner/TestController.h:
        (TestController):

2012-10-11  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Make sure that -Wno-c++0x-compat is set even with production_build

        Reviewed by Simon Hausmann.

        This makes sure that QtWebKit can be built inside Qt without nullptr
        and narrowing warnings producing noise during compilation.

        * qmake/mkspecs/features/unix/default_post.prf:

2012-10-11  Jinwoo Song  <jinwoo7.song@samsung.com>

        [EFL][WK2] Revisit setting API names and documentation
        https://bugs.webkit.org/show_bug.cgi?id=98793

        Reviewed by Kenneth Rohde Christiansen.

        Make frame flattening setting APIs to be consistent with others.

        * MiniBrowser/efl/main.c:
        (window_create):

2012-10-11 Vivek Galatage <vivekgalatage@gmail.com>

        Fix committers.py for the names of contributors to appear on webkit.org/team.html
        https://bugs.webkit.org/show_bug.cgi?id=99004

        Reviewed by Yuta Kitamura

        Some of the nicknames in the committers.py file are using the single quotes (')
        but while parsing these, JSON throws an error: Single quotes (') are not allowed in JSON
        Hence coverting these single quotes to (") so as the contributor names appear properly
        on http://www.webkit.org/team.html

        * Scripts/webkitpy/common/config/committers.py:

2012-10-10  Lucas Forschler  <lforschler@apple.com>

        Remove Apple Mac Snow Leopard bots.
        
        * BuildSlaveSupport/build.webkit.org-config/config.json:

2012-10-10  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Add toolbar buttons to MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=98883

        Reviewed by Kenneth Rohde Christiansen.

        Add toolbar buttons to MiniBrowser to support
        navigation back / forward, refresh and go
        to home page.

        * MiniBrowser/efl/main.c:
        (_Browser_Window):
        (on_back_forward_list_changed):
        (on_back_button_clicked):
        (on_forward_button_clicked):
        (on_refresh_button_clicked):
        (on_home_button_clicked):
        (create_toolbar_button):
        (window_create):

2012-10-10  Andy Estes  <aestes@apple.com>

        Fix the Lion build after r130948.

        * TestWebKitAPI/Tests/WebKit2ObjC/UserContentTest.mm:

2012-10-10  Andy Estes  <aestes@apple.com>

        Speculative build fix for Snow Leopard after r130948.

        * TestWebKitAPI/Tests/WebKit2ObjC/UserContentTest.mm: Pull the
        declaration of backgroundColorQuery out of a block to appease GCC.

2012-10-10  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [WK2][WTR] WebKitTestRunner UI process should be aware of Custom Policy Delegate
        https://bugs.webkit.org/show_bug.cgi?id=95974

        Reviewed by Kenneth Rohde Christiansen.

        Added TestController::decidePolicyForNavigationAction() function as a 'decidePolicyForNavigationAction' WKPagePolicyClient callback
        for WTR UI process. WTR bundle client notifies UI process about Custom Policy Delegate via newly added message,
        so that TestController is aware of whether Custom Policy Delegate as enabled and
        permissive. This data is used then in TestController::decidePolicyForNavigationAction for making policy decision.

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::setCustomPolicyDelegate):
        (WTR):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (InjectedBundle):
        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        (WTR::TestRunner::setCustomPolicyDelegate):
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::TestController):
        (WTR::TestController::initialize):
        (WTR::TestController::resetStateToConsistentValues):
        (WTR::TestController::setCustomPolicyDelegate):
        (WTR):
        (WTR::TestController::decidePolicyForNavigationAction):
        * WebKitTestRunner/TestController.h:
        (TestController):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):

2012-10-10  Zoltan Horvath  <zoltan@webkit.org>

        Pageload tests should measure memory usage
        https://bugs.webkit.org/show_bug.cgi?id=93958

        Reviewed by Ryosuke Niwa.

        Add JS Heap and Heap memory measurement to PageLoad tests.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (dump): Print memory results with DRT.
        * Scripts/old-run-webkit-tests:
        (readFromDumpToolWithTimer): Hadle memory results.
        * Scripts/webkitpy/layout_tests/port/driver.py:
        (DriverOutput.__init__): Add new parameter for the results.
        (Driver.__init__): Initialize the new parameter.
        (Driver.run_test):
        (Driver._read_first_block): Add support for the new headers.
        (Driver._process_stdout_line):
        (ContentBlock.__init__):
        * Scripts/webkitpy/performance_tests/perftest.py:
        (PageLoadingPerfTest.calculate_statistics): Move statistics calculation into a function.
        (PageLoadingPerfTest.run): Handle the new memory results.
        (PageLoadingPerfTest.run.in):
        (PageLoadingPerfTest):
        * Scripts/webkitpy/performance_tests/perftest_unittest.py: Add test for memory results of pageloadtests.
        (TestPageLoadingPerfTest.MockDriver.__init__):
        (TestPageLoadingPerfTest.MockDriver.run_test):
        (TestPageLoadingPerfTest.test_run_with_memory_output):

2012-10-04  Andy Estes  <aestes@apple.com>

        [WebKit2] Create an API for adding and removing user stylesheets from a page group
        https://bugs.webkit.org/show_bug.cgi?id=98432

        Reviewed by Sam Weinig.

        Add three new API tests:

        - Test adding a user stylesheet before a page is created. This tests
        the code path where the sheet is sent to the web process as part of
        the new page's WebPageCreationParameters.
        - Test adding a user stylesheet after a page is created. This tests the
        code patch where the sheet is sent as a separate message to all
        processes containing the given page group.
        - Test removing all user stylesheets.

        * TestWebKitAPI/TestWebKitAPI.xcodeproj/project.pbxproj:
        * TestWebKitAPI/Tests/WebKit2ObjC/UserContentTest.mm: Added.
        (-[UserContentTestLoadDelegate initWithBlockToRunOnLoad:]):
        (-[UserContentTestLoadDelegate browsingContextControllerDidFinishLoad:]):
        (expectScriptValue):
        * TestWebKitAPI/Tests/WebKit2ObjC/WKBrowsingContextGroupTest.mm:

2012-10-10  Dan Bernstein  <mitz@apple.com>

        Changed debug-safari, debug-minibrowser and debug-test-runner to use LLDB by default when
        using Xcode 4.5 or later.

        Reviewed by Anders Carlsson.

        * Scripts/webkitdirs.pm:
        (determineDebugger): Changed the default debugger from GDB to LLDB when the Xcode version
        is 4.5 or later. Added a --use-gdb switch for overriding this.
        (printHelpAndExitForRunAndDebugWebKitAppIfNeeded): Updated to mention --use-gdb and the
        how the default debugger choice depends on the Xcode version. Also changed the description
        of --no-saved-state to use the same terminology Xcode’s scheme editor uses to describe this
        option, and clarified to which OS X versions it applies.

2012-10-10  Antonio Gomes  <agomes@rim.com>

        Unreviewed watch list addition.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-10  Dirk Pranke  <dpranke@chromium.org>

        NRWT crashes on too many timeouts
        https://bugs.webkit.org/show_bug.cgi?id=97047

        Reviewed by Tony Chang.

        Apparently if you kill a subprocess directly python doesn't
        auto-close the file descriptors.

        * Scripts/webkitpy/layout_tests/port/server_process.py:
        (ServerProcess._reset):
        * Scripts/webkitpy/layout_tests/port/server_process_unittest.py:

2012-10-10  Zan Dobersek  <zandobersek@gmail.com>

        [TestResultServer] Enable CORS for test files
        https://bugs.webkit.org/show_bug.cgi?id=98918

        Reviewed by Dirk Pranke.

        Serve the JSON test files with the Access-Control-Allow-Origin
        response header to enable cross-origin sharing of these files.
        This eases up hacking on TestResultServer.

        * TestResultServer/handlers/testfilehandler.py:
        (GetFile._serve_json):

2012-10-10  Andreas Kling  <kling@webkit.org>

        Future-proof the WTF.DoubleHashCollisions test.
        <http://webkit.org/b/98853>

        Reviewed by Anders Carlsson.

        Add a check that the two keys that are supposed to clobber each other actually end up
        in the same bucket with the DefaultHash<double> hash function.

        * TestWebKitAPI/Tests/WTF/HashMap.cpp:
        (TestWebKitAPI::bucketForKey):
        (TestWebKitAPI):
        (TestWebKitAPI::TEST):

2012-10-10  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] Test drivers should handle repaint rects
        https://bugs.webkit.org/show_bug.cgi?id=68870

        Reviewed by Zoltan Herczeg.

        Implemented masking the area not covered by repaint rects.
        This is equivalent with the implementation for Mac.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::dump):
        * DumpRenderTree/qt/TestRunnerQt.cpp:
        (TestRunner::display):
        * WebKitTestRunner/qt/PlatformWebViewQt.cpp:
        * WebKitTestRunner/qt/TestInvocationQt.cpp:
        (WTR::TestInvocation::dumpPixelsAndCompareWithExpected):

2012-10-10  Vivek Galatage  <vivekgalatage@gmail.com>

        [Qt]QtTestBrowser should have default url(google.com) when no command line args
        https://bugs.webkit.org/show_bug.cgi?id=98880

        Reviewed by Simon Hausmann.

        Making QtTestBrowser use www.google.com as default url when no arguments are passed

        * QtTestBrowser/qttestbrowser.cpp:
        (main):

2012-10-10  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Port MiniBrowser to Elementary
        https://bugs.webkit.org/show_bug.cgi?id=98748

        Reviewed by Kenneth Rohde Christiansen.

        Port MiniBrowser to Elementary to simplify the
        code and make future improvements easier. The
        URL bar is now an Elementary Entry widget and
        supports additional functionality like copy /
        paste.

        * CMakeLists.txt:
        * EWebLauncher/url_bar.c:
        (on_urlbar_key_down): Remove WK2-specific code
        now that this file is no longer used by MiniBrowser.
        * MiniBrowser/efl/CMakeLists.txt:
        * MiniBrowser/efl/main.c:
        (_Browser_Window):
        (window_free):
        (window_close):
        (view_focus_set):
        (on_mouse_down):
        (title_set):
        (on_title_changed):
        (on_url_changed):
        (on_close_window):
        (on_progress):
        (quit):
        (on_url_bar_activated):
        (on_url_bar_clicked):
        (on_window_deletion):
        (window_create):
        (elm_main):
        * efl/jhbuild.modules: Add Elementary to jhbuild and bump
        EFL dependencies to 1.7.

2012-10-10  Christophe Dumez  <christophe.dumez@intel.com>

        [WK2][SOUP] ResourceError.isCancellation() is not carried over IPC
        https://bugs.webkit.org/show_bug.cgi?id=98882

        Reviewed by Kenneth Rohde Christiansen.

        Do not display the error page in MiniBrowser if the loading
        error corresponds to a cancellation.

        * MiniBrowser/efl/main.c:
        (on_error):

2012-10-09  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] WTR: Fix an assert triggered by EventSenderProxy::touchEnd
        https://bugs.webkit.org/show_bug.cgi?id=98735

        Reviewed by Kenneth Rohde Christiansen.

        ASSERT: "itemForTouchPointId.isEmpty()" in file qt5/qtdeclarative/src/quick/items/qquickwindow.cpp, line 1563
        This assert is caused by QQuickWindow not registering our TouchPointReleased
        since it expects QTouchEvent::touchPointStates() to be filled by the event's sender.

        This patch calculates the touchPointStates like QQuickWindowPrivate::touchEventWithPoints does.

        * WebKitTestRunner/qt/EventSenderProxyQt.cpp:
        (WTR::EventSenderProxy::sendTouchEvent):

2012-10-10  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] DumpRenderTree needs a beginDragWithFiles implementation
        https://bugs.webkit.org/show_bug.cgi?id=50902

        Reviewed by Simon Hausmann.

        Implement support for beginDragWithFiles. This function similates dragging without going
        though regular event handling. Which allows us to test effects of dropping files on
        different elements.

        * DumpRenderTree/qt/EventSenderQt.cpp:
        (EventSender::EventSender):
        (EventSender::mouseUp):
        (EventSender::mouseMoveTo):
        (EventSender::beginDragWithFiles):
        * DumpRenderTree/qt/EventSenderQt.h:
        (EventSender):

2012-10-10  KwangYong Choi  <ky0.choi@samsung.com>

        [EFL][WTR][CMake] Add a missing TestNetscapePlugin file
        https://bugs.webkit.org/show_bug.cgi?id=98637

        Reviewed by Kenneth Rohde Christiansen.

        PluginScriptableObjectOverridesAllProperties.cpp is used during
        plugins/npruntime/overrides-all-properties.html test introduced by r123936.

        * DumpRenderTree/TestNetscapePlugIn/CMakeLists.txt:

2012-10-10  Kenichi Ishibashi  <bashi@chromium.org>

        Update pywebsocket to 0.7.7
        https://bugs.webkit.org/show_bug.cgi?id=98872

        Reviewed by Yuta Kitamura.

        This version contains server-side permessage-compress extension support.
        We need this version to add tests for permessage-compress extension.

        I confirmed all tests under http/tests/websocket passed.

        * Scripts/webkitpy/thirdparty/mod_pywebsocket/__init__.py:
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/_stream_hixie75.py:
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/_stream_hybi.py:
        (parse_frame):
        (FragmentedFrameBuilder.__init__):
        (FragmentedFrameBuilder.build):
        (create_closing_handshake_body):
        (StreamOptions.__init__):
        (Stream.__init__):
        (Stream._receive_frame._receive_bytes):
        (Stream._receive_frame):
        (Stream.receive_filtered_frame):
        (Stream.send_message):
        (Stream._get_message_from_frame):
        (Stream):
        (Stream._process_close_message):
        (Stream._process_ping_message):
        (Stream._process_pong_message):
        (Stream.receive_message):
        (Stream._send_closing_handshake):
        (Stream.get_last_received_opcode):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/common.py:
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/dispatch.py:
        (Dispatcher.transfer_data):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/extensions.py:
        (ExtensionProcessorInterface.name):
        (DeflateStreamExtensionProcessor):
        (DeflateStreamExtensionProcessor.name):
        (_log_compression_ratio):
        (_log_decompression_ratio):
        (DeflateFrameExtensionProcessor):
        (DeflateFrameExtensionProcessor.name):
        (DeflateFrameExtensionProcessor._outgoing_filter):
        (DeflateFrameExtensionProcessor._incoming_filter):
        (CompressionExtensionProcessorBase):
        (CompressionExtensionProcessorBase.for):
        (CompressionExtensionProcessorBase.__init__):
        (CompressionExtensionProcessorBase.name):
        (CompressionExtensionProcessorBase._get_compression_processor_response):
        (CompressionExtensionProcessorBase.set_compression_processor_hook):
        (PerFrameCompressionExtensionProcessor):
        (PerFrameCompressionExtensionProcessor.__init__):
        (PerFrameCompressionExtensionProcessor.name):
        (PerFrameCompressionExtensionProcessor._lookup_compression_processor):
        (DeflateMessageProcessor):
        (DeflateMessageProcessor.__init__):
        (DeflateMessageProcessor.name):
        (DeflateMessageProcessor.get_extension_response):
        (DeflateMessageProcessor.setup_stream_options):
        (DeflateMessageProcessor.setup_stream_options._OutgoingMessageFilter):
        (DeflateMessageProcessor.setup_stream_options._OutgoingMessageFilter.__init__):
        (DeflateMessageProcessor.setup_stream_options._OutgoingMessageFilter.filter):
        (DeflateMessageProcessor.setup_stream_options._IncomingMessageFilter):
        (DeflateMessageProcessor.setup_stream_options._IncomingMessageFilter.__init__):
        (DeflateMessageProcessor.setup_stream_options._IncomingMessageFilter.decompress_next_message):
        (DeflateMessageProcessor.setup_stream_options._IncomingMessageFilter.filter):
        (DeflateMessageProcessor.setup_stream_options._OutgoingFrameFilter):
        (DeflateMessageProcessor.setup_stream_options._OutgoingFrameFilter.__init__):
        (DeflateMessageProcessor.setup_stream_options._OutgoingFrameFilter.set_compression_bit):
        (DeflateMessageProcessor.setup_stream_options._OutgoingFrameFilter.filter):
        (DeflateMessageProcessor.setup_stream_options._IncomingFrameFilter):
        (DeflateMessageProcessor.setup_stream_options._IncomingFrameFilter.__init__):
        (DeflateMessageProcessor.setup_stream_options._IncomingFrameFilter.filter):
        (DeflateMessageProcessor.set_c2s_max_window_bits):
        (DeflateMessageProcessor.set_c2s_no_context_takeover):
        (DeflateMessageProcessor.enable_outgoing_compression):
        (DeflateMessageProcessor.disable_outgoing_compression):
        (DeflateMessageProcessor._process_incoming_message):
        (DeflateMessageProcessor._process_outgoing_message):
        (DeflateMessageProcessor._process_incoming_frame):
        (DeflateMessageProcessor._process_outgoing_frame):
        (PerMessageCompressionExtensionProcessor):
        (PerMessageCompressionExtensionProcessor.__init__):
        (PerMessageCompressionExtensionProcessor.name):
        (PerMessageCompressionExtensionProcessor._lookup_compression_processor):
        (MuxExtensionProcessor):
        (MuxExtensionProcessor.__init__):
        (MuxExtensionProcessor.name):
        (MuxExtensionProcessor.get_extension_response):
        (MuxExtensionProcessor.setup_stream_options):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/handshake/__init__.py:
        (do_handshake):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/handshake/_base.py:
        (validate_subprotocol):
        (check_request_line):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/handshake/draft75.py: Removed.
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/handshake/hybi.py:
        (Handshaker.do_handshake):
        (Handshaker._set_protocol):
        (Handshaker._create_stream):
        (Handshaker):
        (Handshaker._create_handshake_response):
        (Handshaker._send_handshake):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/headerparserhandler.py:
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/msgutil.py:
        (send_message):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/mux.py: Added.
        (MuxUnexpectedException):
        (MuxNotImplementedException):
        (LogicalConnectionClosedException):
        (PhysicalConnectionError):
        (PhysicalConnectionError.__init__):
        (LogicalChannelError):
        (LogicalChannelError.__init__):
        (_encode_channel_id):
        (_encode_number):
        (_create_add_channel_response):
        (_create_drop_channel):
        (_create_flow_control):
        (_create_new_channel_slot):
        (_create_fallback_new_channel_slot):
        (_parse_request_text):
        (_ControlBlock):
        (_ControlBlock.__init__):
        (_MuxFramePayloadParser):
        (_MuxFramePayloadParser.that):
        (_MuxFramePayloadParser.__init__):
        (_MuxFramePayloadParser.read_channel_id):
        (_MuxFramePayloadParser.read_inner_frame):
        (_MuxFramePayloadParser._read_number):
        (_MuxFramePayloadParser._read_size_and_contents):
        (_MuxFramePayloadParser._read_add_channel_request):
        (_MuxFramePayloadParser._read_add_channel_response):
        (_MuxFramePayloadParser._read_flow_control):
        (_MuxFramePayloadParser._read_drop_channel):
        (_MuxFramePayloadParser._read_new_channel_slot):
        (_MuxFramePayloadParser.read_control_blocks):
        (_MuxFramePayloadParser.remaining_data):
        (_LogicalRequest):
        (_LogicalRequest.__init__):
        (_LogicalRequest.is_https):
        (_LogicalConnection):
        (_LogicalConnection.__init__):
        (_LogicalConnection.get_local_addr):
        (_LogicalConnection.get_remote_addr):
        (_LogicalConnection.get_memorized_lines):
        (_LogicalConnection.write):
        (_LogicalConnection.write_control_data):
        (_LogicalConnection.notify_write_done):
        (_LogicalConnection.append_frame_data):
        (_LogicalConnection.read):
        (_LogicalConnection.set_read_state):
        (_LogicalStream):
        (_LogicalStream.interprets):
        (_LogicalStream.__init__):
        (_LogicalStream._create_inner_frame):
        (_LogicalStream._write_inner_frame):
        (_LogicalStream.replenish_send_quota):
        (_LogicalStream.consume_receive_quota):
        (_LogicalStream.send_message):
        (_LogicalStream._receive_frame):
        (_LogicalStream.receive_message):
        (_LogicalStream._send_closing_handshake):
        (_LogicalStream.send_ping):
        (_LogicalStream._send_pong):
        (_LogicalStream.close_connection):
        (_LogicalStream._drain_received_data):
        (_OutgoingData):
        (_OutgoingData.__init__):
        (_PhysicalConnectionWriter):
        (_PhysicalConnectionWriter.__init__):
        (_PhysicalConnectionWriter.put_outgoing_data):
        (_PhysicalConnectionWriter._write_data):
        (_PhysicalConnectionWriter.run):
        (_PhysicalConnectionWriter.stop):
        (_PhysicalConnectionReader):
        (_PhysicalConnectionReader.__init__):
        (_PhysicalConnectionReader.run):
        (_Worker):
        (_Worker.__init__):
        (_Worker.run):
        (_MuxHandshaker):
        (_MuxHandshaker.__init__):
        (_MuxHandshaker._create_stream):
        (_MuxHandshaker._create_handshake_response):
        (_MuxHandshaker._send_handshake):
        (_LogicalChannelData):
        (_LogicalChannelData.__init__):
        (_HandshakeDeltaBase):
        (_HandshakeDeltaBase.that):
        (_HandshakeDeltaBase.__init__):
        (_HandshakeDeltaBase.create_headers):
        (_MuxHandler):
        (_MuxHandler.are):
        (_MuxHandler.__init__):
        (_MuxHandler.start):
        (_MuxHandler.add_channel_slots):
        (_MuxHandler.wait_until_done):
        (_MuxHandler.notify_write_done):
        (_MuxHandler.send_control_data):
        (_MuxHandler.send_data):
        (_MuxHandler._send_drop_channel):
        (_MuxHandler._send_error_add_channel_response):
        (_MuxHandler._create_logical_request):
        (_MuxHandler._do_handshake_for_logical_request):
        (_MuxHandler._add_logical_channel):
        (_MuxHandler._process_add_channel_request):
        (_MuxHandler._process_flow_control):
        (_MuxHandler._process_drop_channel):
        (_MuxHandler._process_control_blocks):
        (_MuxHandler._process_logical_frame):
        (_MuxHandler.dispatch_message):
        (_MuxHandler.notify_worker_done):
        (_MuxHandler.notify_reader_done):
        (_MuxHandler.fail_physical_connection):
        (_MuxHandler.fail_logical_channel):
        (use_mux):
        (start):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/standalone.py:
        (_StandaloneRequest.get_protocol):
        (_StandaloneRequest):
        (_alias_handlers):
        (WebSocketServer.__init__):
        (WebSocketServer._create_sockets):
        (WebSocketServer.server_bind):
        (WebSocketServer.server_activate):
        (WebSocketRequestHandler.parse_request):
        (_configure_logging):
        (_build_option_parser):
        (_main):
        (_main.if):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/stream.py:
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/util.py:
        (_Deflater.compress):
        (_RFC1979Deflater.filter):

2012-10-09  Damian Kaleta  <dkaleta@apple.com>

        extract-localizable-strings script should be able to handle paths to files containing whitespaces.
        https://bugs.webkit.org/show_bug.cgi?id=98844

        Reviewed by Dan Bernstein.

        * Scripts/extract-localizable-strings: Added ability to handle whitespace.

2012-10-09  Sudarsana Nagineni  <sudarsana.nagineni@intel.com>

        [Cairo] Bump Cairo to fix more canvas/philip tests
        https://bugs.webkit.org/show_bug.cgi?id=97658

        Reviewed by Martin Robinson.

        Bumping cairo to version 1.12.4 which fixes more canvas/philip tests.

        * efl/jhbuild.modules:
        * gtk/jhbuild.modules:

2012-10-09  Julien Chaffraix  <jchaffraix@webkit.org>

        Unreviewed Chromium Windows build fix after r130823.

        * DumpRenderTree/chromium/TestRunner/AccessibilityUIElementChromium.cpp:
        (roleToString): Re-added the 'default' label as some cases are not handled.

2012-10-09  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Add drop event for plugins.
        https://bugs.webkit.org/show_bug.cgi?id=98827

        Reviewed by Adam Barth.

        Update the test plugin to receive drop events.

        * DumpRenderTree/chromium/TestWebPlugin.cpp:
        (TestWebPlugin::handleDragStatusUpdate):

2012-10-09  Dominic Mazzoni  <dmazzoni@google.com>

        AX: 5 accessibility tests just need minor tweaks to pass on chromium
        https://bugs.webkit.org/show_bug.cgi?id=98311

        Reviewed by Chris Fleizach.

        Update roleToString on Chromium to include all missing roles,
        which enables some layout tests to pass.

        * DumpRenderTree/chromium/TestRunner/AccessibilityUIElementChromium.cpp:
        (roleToString):

2012-10-09  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch rebaseline-expectations doesn't work w/o failures specified
        https://bugs.webkit.org/show_bug.cgi?id=98810

        Reviewed by Ojan Vafai.

        If you try to mark a test as foo.html [ Rebaseline ] it wasn't
        getting picked up for rebaselining; we needed to think the test
        was failing.

        * Scripts/webkitpy/layout_tests/models/test_expectations.py:
        (TestExpectations.get_rebaselining_failures):
        * Scripts/webkitpy/layout_tests/models/test_expectations_unittest.py:
        (RebaseliningTest.test_get_rebaselining_failures):

2012-10-09  Daniel Bates  <dbates@webkit.org>

        VCSUtils.pm doesn't support SVN 1.7 diff files
        <https://bugs.webkit.org/show_bug.cgi?id=80762>

        Reviewed by Eric Seidel.

        Implement support for the SVN 1.7 diff format.

        * Scripts/VCSUtils.pm:
        (parseChunkRange): Modified to support parsing an SVN 1.7 chunk range
        that begins and ends with "##" (e.g. ## -0,0 +1,7 ##). For comparison,
        earlier versions of SVN parsed chunk ranges of the form "@@ -0,0 +1,7 @@".

        (parseSvnDiffHeader): Modified to parse an SVN 1.7 binary diff; SVN 1.7
        has an unusual display format for a binary diff. It repeats the first
        two lines of the diff header.

        (parseSvnProperty): Modified to ignore both an SVN 1.7 chunk range and
        lines of the form "\ No newline at end of property". SVN 1.7 emits the latter
        message after a property value that doesn't end in a newline.

        (parseSvnPropertyValue): Stop parsing an SVN property value when we encounter
        a line of the form "\ No newline at end of property" (emitted by svn diff as of
        SVN 1.7).

        * Scripts/webkitperl/VCSUtils_unittest/parseChunkRange.pl:
          - Added the following unit tests:
          "Line count is 0"
          "New line count is 1"

        * Scripts/webkitperl/VCSUtils_unittest/parseSvnDiffFooter.pl:
          - Added the following unit tests:
          "svn:executable followed by custom property using SVN 1.7 syntax"
          "svn:executable followed by custom property without newline using SVN 1.7 syntax"

        * Scripts/webkitperl/VCSUtils_unittest/parseSvnDiffHeader.pl:
          - Updated test results for test "binary file".
          - Added unit test "binary file using SVN 1.7 syntax".

        * Scripts/webkitperl/VCSUtils_unittest/parseSvnProperty.pl:
          - Added the following unit tests:
          "simple: add svn:executable using SVN 1.7 syntax"
          "simple: delete svn:executable using SVN 1.7 syntax"
          "add svn:mime-type and add svn:executable using SVN 1.7 syntax"

        * Scripts/webkitperl/VCSUtils_unittest/parseSvnPropertyValue.pl:
          - Added the following unit tests:
          "singe-line '+' change using SVN 1.7 syntax"
          "single-line '-' change using SVN 1.7 syntax"

2012-10-09  James Robinson  <jamesr@chromium.org>

        Unreviewed, rolling out r128488.
        http://trac.webkit.org/changeset/128488
        https://bugs.webkit.org/show_bug.cgi?id=96678

        The bot is fixed now

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        (.):

2012-10-09  Zan Dobersek  <zandobersek@gmail.com>

        XvfbDriver unit test is flaky on Linux builders
        https://bugs.webkit.org/show_bug.cgi?id=98346

        Reviewed by Adam Barth.

        Temporarily skip the XvfbDriver test case that tests
        the display number of the next free display. The test
        is flaky on Linux builders.

        * Scripts/webkitpy/layout_tests/port/xvfbdriver_unittest.py:
        (XvfbDriverTest.disabled_test_next_free_display):

2012-10-09  Ojan Vafai  <ojan@chromium.org>

        Don't duplicated build numbers when merging flakiness dashboard JSON
        https://bugs.webkit.org/show_bug.cgi?id=98812

        Reviewed by Dirk Pranke.

        In general, build numbers are not unique, but we should basically never
        get the same build number uploaded twice in a row. This is a workaround
        for https://bugs.webkit.org/show_bug.cgi?id=97643, which frequently hits this
        because we update results_small.json and timeout updating results.json and then
        we retry the whole request.

        * TestResultServer/model/jsonresults.py:
        (JsonResults.merge):
        * TestResultServer/model/jsonresults_unittest.py:
        (JsonResultsTest.test_merge_duplicate_build_number):

2012-10-09  Alexis Menard  <alexis@webkit.org>

        [GTK] Shadow builds are not working anymore.
        https://bugs.webkit.org/show_bug.cgi?id=98785

        Reviewed by Martin Robinson.

        When setting WEBKITOUTPUTDIR the build was failing with a python
        error : the os.execve expect three arguments. Also the condition
        to check whether we build the GTK port with jhbuild or not was buggy
        as it was always assuming an in source build. We can use now jhbuildutils
        which has a convenient function to locate the directory where 
        the dependencies built with jhbuild are and take into account WEBKITOUTPUTDIR.
        If the Dependencies path does not exist then the build was not done using
        jhbuild so we can fallback to a regular build against system libraries.

        * gtk/run-with-jhbuild:

2012-10-08  Simon Fraser  <simon.fraser@apple.com>

        Remove DRT/WTR implementations of layerTreeAsText
        https://bugs.webkit.org/show_bug.cgi?id=98697

        Reviewed by Tim Horton, James Robinson, Alexey Proskuryakov.

        Remove code related to layerTreeAsText(), which is now on window.internals.

        * DumpRenderTree/TestRunner.cpp:
        (TestRunner::staticFunctions):
        * DumpRenderTree/TestRunner.h:
        (TestRunner):
        * DumpRenderTree/blackberry/TestRunnerBlackBerry.cpp:
        * DumpRenderTree/chromium/DRTTestRunner.cpp:
        (DRTTestRunner::DRTTestRunner):
        * DumpRenderTree/chromium/DRTTestRunner.h:
        (DRTTestRunner):
        * DumpRenderTree/efl/TestRunnerEfl.cpp:
        * DumpRenderTree/gtk/TestRunnerGtk.cpp:
        * DumpRenderTree/mac/TestRunnerMac.mm:
        * DumpRenderTree/qt/TestRunnerQt.cpp:
        * DumpRenderTree/qt/TestRunnerQt.h:
        (TestRunner):
        * DumpRenderTree/win/TestRunnerWin.cpp:
        * DumpRenderTree/wx/TestRunnerWx.cpp:
        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        * WebKitTestRunner/InjectedBundle/TestRunner.h:

2012-10-09  Zoltan Horvath  <zoltan@webkit.org>

        Unreviewed. Remove myself from QtWebKit2 subscriptions.

        * Scripts/webkitpy/common/config/watchlist:

2012-10-09  Harald Alvestrand  <hta@google.com>

        Change PeerConnection getStats function to single value local / remote
        elements in RTCStatsReport.
        https://bugs.webkit.org/show_bug.cgi?id=98753

        Reviewed by Adam Barth.

        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.cpp:
        (MockWebRTCPeerConnectionHandler::getStats):

2012-10-09  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Make sure events are transformed correctly for plugins.
        https://bugs.webkit.org/show_bug.cgi?id=89250

        Reviewed by Tony Chang.

        Update the test plugin to print event details for mouse and gesture events.

        * DumpRenderTree/chromium/TestWebPlugin.cpp:
        (printEventDetails):

2012-10-09  Simon Hausmann  <simon.hausmann@digia.com>

        Unreviewed trivial Qt build fix: Remove stray closing braces from r130758.

        * qmake/mkspecs/features/features.prf:

2012-10-09  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Clean up Qt module detection

        Reviewed by Tor Arne Vestbø.

        Replace the use of MOBILITY_CONFIG (not supported anymore) with modern use of haveQtModule.

        * qmake/mkspecs/features/features.prf:

2012-10-09  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [GTK] Respect WEBKITOUTPUTDIR in run-with-jhbuild.
        https://bugs.webkit.org/show_bug.cgi?id=98732

        Reviewed by Gustavo Noronha Silva.

        Follow-up to r113066: if the WEBKITOUTPUTDIR environment variable
        was used when running update-webkitgtk-libs,
        WebKitBuild/Dependencies will not exist, so we now check its
        contents first and then fall back to WebKitBuild/.

        * gtk/run-with-jhbuild:

2012-10-09  Zan Dobersek  <zandobersek@gmail.com>

        Unreviewed GTK gardening.

        Skipping the accept-policy test in TestCookieManager API test that's
        currently failing. The test failure is covered by
        https://bugs.webkit.org/show_bug.cgi?id=98738.

        * Scripts/run-gtk-tests:
        (TestRunner):

2012-10-09  Laszlo Gombos  <l.gombos@samsung.com>

        [Qt] Remove redundant JAVASCRIPTCORE_JIT variable
        https://bugs.webkit.org/show_bug.cgi?id=50000

        Reviewed by Simon Hausmann.

        Use ENABLE_JIT instead.

        * qmake/mkspecs/features/valgrind.prf:

2012-10-08  Kiran Muppala  <cmuppala@apple.com>

        Throttle DOM timers on hidden pages.
        https://bugs.webkit.org/show_bug.cgi?id=98474

        Reviewed by Maciej Stachowiak.

        Implement testRunner.setPageVisibility on mac for testing throttling
        of timers on hidden pages using DumpRenderTree.

        * DumpRenderTree/mac/Configurations/Base.xcconfig:
        Fix build error on mac-ews bot.  Add JSC copy of ICU headers to search path.

        * DumpRenderTree/mac/TestRunnerMac.mm:
        (TestRunner::resetPageVisibility):
        (TestRunner::setPageVisibility):

2012-10-08  Dirk Pranke  <dpranke@chromium.org>

        results.html and garden-o-matic are ignoring IMAGE failures when expected to FAIL
        https://bugs.webkit.org/show_bug.cgi?id=98706

        Reviewed by Ojan Vafai.

        FAIL is supposed to map onto Failure which is supposed to map
        onto the old [ TEXT, IMAGE_PLUS_TEXT, AUDIO ] mapping.
        results.html was including IMAGE in this and garden-o-matic was
        including CRASH and TIMEOUT as well :(.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results_unittests.js:

2012-10-08  Ryuan Choi  <ryuan.choi@samsung.com>

        [EFL] Build ControlTheme only when necessary
        https://bugs.webkit.org/show_bug.cgi?id=98519

        Reviewed by Eric Seidel.

        * EWebLauncher/ControlTheme/CMakeLists.txt:
        Added custom command keyword not to build ControlTheme every time.
        In addition, removed `ALL` keyword because targets, which use ControlTheme,
        already have dependency.

2012-10-08  Peter Rybin  <peter.rybin@gmail.com>

        Do not swallow fatal messages in qt/DumpRenderTree
        https://bugs.webkit.org/show_bug.cgi?id=98211

        Reviewed by Eric Seidel.

        Fix condition in message type filtering.

        * DumpRenderTree/qt/DumpRenderTreeMain.cpp:
        (messageHandler):

2012-10-08  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Unreviewed. Moving myself from Committer to Reviewer list.
        http://lists.webkit.org/pipermail/webkit-dev/2012-October/022460.html

        * Scripts/webkitpy/common/config/committers.py:

2012-10-08  Dirk Pranke  <dpranke@chromium.org>

        nrwt: [chromium] run http tests in parallel on bigger machines
        https://bugs.webkit.org/show_bug.cgi?id=98562

        Reviewed by Eric Seidel.

        The "locked tests" shard (which includes the http tests and the
        perf tests) is the long pole on machines where we have 4 or more
        workers, so we should start making sure that
        we can run http tests in parallel, following the normal sharding
        rules (all tests in the same directory are in the same shard by
        default). We should still probably limit the number of workers
        hitting the web server in parallel where we can; a heuristic of
        no more than 25% of them seems okay for a start. This will
        likely only affect developer workstations and a couple of bots
        at first, so should be low risk and a good reward.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.default_max_locked_shards):
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort.default_max_locked_shards):
        * Scripts/webkitpy/layout_tests/port/chromium_port_testcase.py:
        (ChromiumPortTestCase.test_default_max_locked_shards):
        * Scripts/webkitpy/layout_tests/port/port_testcase.py:
        (PortTestCase.test_default_max_locked_shards):
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (_set_up_derived_options):
        (parse_args):
        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (MainTest.test_max_locked_shards):

2012-10-08  Zan Dobersek  <zandobersek@gmail.com>

        GTK port should warn if bug modifier is missing in TestExpectations
        https://bugs.webkit.org/show_bug.cgi?id=98678

        Reviewed by Dirk Pranke.

        Reimplement the warn_if_bug_missing_in_test_expectations method in
        GtkPort, returning True for producing a warning in such cases.

        * Scripts/webkitpy/layout_tests/port/gtk.py:
        (GtkPort.warn_if_bug_missing_in_test_expectations):

2012-10-08  Ryuan Choi  <ryuan.choi@samsung.com>

        [EFL][DRT] Switch default backing store to single
        https://bugs.webkit.org/show_bug.cgi?id=98591

        Reviewed by Eric Seidel.

        There are two backing stores for WebKit/Efl, Single Backing Store(SBS) and
        Tiled Backing Store(TBS), and DRT/Efl has used TBS.
        But, TBS is not suitable to run pixel tests because it does not have a good way
        to render mock scrollbars well.

        So, this patch changes the default backing store to SBS.
        In addition, this changes the environment variable from DRT_USE_SINGLE_BACKING_STORE
        to DRT_USE_TILED_BACKING_STORE.

        * DumpRenderTree/efl/DumpRenderTreeView.cpp:
        (shouldUseTiledBackingStore):
        (chooseAndInitializeAppropriateSmartClass):

2012-10-08  Sudarsana Nagineni  <sudarsana.nagineni@intel.com>

        [WK2][WTR] WebKitTestRunner needs testRunner.dispatchPendingLoadRequests
        https://bugs.webkit.org/show_bug.cgi?id=98638

        Reviewed by Eric Seidel.

        Add implementation for testRunner.dispatchPendingLoadRequests in
        WebKitTestRunner.

        * WebKitTestRunner/InjectedBundle/Bindings/TestRunner.idl:
        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        (WTR::TestRunner::dispatchPendingLoadRequests):
        (WTR):
        * WebKitTestRunner/InjectedBundle/TestRunner.h:
        (TestRunner):

2012-10-08  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Add support for window.close in Minibrowser
        https://bugs.webkit.org/show_bug.cgi?id=98667

        Reviewed by Laszlo Gombos.

        When calling window.close() from JavaScript, MiniBrowser
        now closes the given window.

        * MiniBrowser/efl/main.c:
        (window_close):
        (on_ecore_evas_delete):
        (on_close_window):
        (window_create):

2012-10-08  Ojan Vafai  <ojan@chromium.org>

        Properly strip new tests from the test results json if they are pass/nodata/skip.
        https://bugs.webkit.org/show_bug.cgi?id=98669

        Reviewed by Eric Seidel.

        In _merge_json, we had a codepath that didn't call _normalize_results_json
        for tests that aren't already in the aggregated results.
        Instead, now do all the merging first and then normalize the aggregated results.

        * TestResultServer/model/jsonresults.py:
        (JsonResults._merge_json):
        (JsonResults._merge_tests):
        (JsonResults._normalize_results):
        (JsonResults):
        (JsonResults._should_delete_leaf):
        * TestResultServer/model/jsonresults_unittest.py:
        Removed test_merge_build_directory_hierarchy_old_version since there is
        no longer any version 3 json to support.
        (JsonResultsTest.test_merge_remove_new_test):
        (JsonResultsTest.test_merge_prune_extra_results_with_new_result_of_same_type):

2012-10-08  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Simplify frame flattening support in MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=98657

        Reviewed by Kenneth Rohde Christiansen.

        Simplify frame flattening support code in MiniBrowser to
        avoid passing the setting around to window_create()
        function().

        * MiniBrowser/efl/main.c:
        (on_key_down):
        (on_new_window):
        (window_create):
        (main):

2012-10-08  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] Use Ctrl+n shortcut to create a new window in MiniBrowser / EWebLauncher
        https://bugs.webkit.org/show_bug.cgi?id=98655

        Reviewed by Kenneth Rohde Christiansen.

        Use "Ctrl+n" shortcut instead of "F9" to open a new window in
        MiniBrowser and EWebLauncher. This is the shortcut that is
        commonly used for this action.

        * EWebLauncher/main.c:
        (on_key_down):
        * MiniBrowser/efl/main.c:
        (on_key_down):

2012-10-08  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Add support for window.create in Minibrowser
        https://bugs.webkit.org/show_bug.cgi?id=98649

        Reviewed by Kenneth Rohde Christiansen.

        Calling window.create() from JavaScript now creates a
        new window in Minibrowser, as directed.

        * MiniBrowser/efl/main.c:
        (on_new_window):
        (window_create):

2012-10-08  Andreas Kling  <kling@webkit.org>

        Using float/double as WTF hash table key is unreliable.
        <http://webkit.org/b/98627>

        Reviewed by Geoffrey Garen.

        Add a test case checking that using double as the hash table key type won't
        have problems distinguishing between keys that are considered equal by operator==
        but have different binary representations.

        * TestWebKitAPI/Tests/WTF/HashMap.cpp:
        (TestDoubleHashTraits):

2012-10-08  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Use URL instead of URI in the API
        https://bugs.webkit.org/show_bug.cgi?id=98643

        Reviewed by Kenneth Rohde Christiansen.

        Update Minibrowser to reflect API changes. We now
        use URL instead of URI in WK2 EFL API.

        * EWebLauncher/url_bar.c:
        (on_urlbar_key_down):
        * MiniBrowser/efl/CMakeLists.txt:
        * MiniBrowser/efl/main.c:
        (on_url_changed):
        (window_create):

2012-10-08  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] Reenable plugin tests
        https://bugs.webkit.org/show_bug.cgi?id=98528

        Reviewed by Csaba Osztrogonác.

        Uncomment this function so we can pick up the test plugin.
        It was commented out because of https://bugs.webkit.org/show_bug.cgi?id=86620
        and that bug seems to be fixed now.

        * WebKitTestRunner/qt/TestControllerQt.cpp:
        (WTR::TestController::initializeTestPluginDirectory):

2012-10-08  Jinwoo Song  <jinwoo7.song@samsung.com>

        [EFL][WK2] Support multiple window creation for MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=97884

        Reviewed by Kenneth Rohde Christiansen.

        Implement the multiple window creation for MiniBrowser and bind the 'F9' key for opening a new window.
        Also, refactored MiniBrowser codes according to EFL coding style.

        * MiniBrowser/efl/main.c:
        (_Browser_Window):
        (window_free):
        (main_signal_exit):
        (on_ecore_evas_delete):
        (on_ecore_evas_resize):
        (on_key_down):
        (on_title_changed):
        (on_url_changed):
        (on_progress):
        (window_create):
        (main):

2012-10-07  Seokju Kwon  <seokju.kwon@samsung.com>

        [EFL] Add Web Inspector to EWebLauncher
        https://bugs.webkit.org/show_bug.cgi?id=91718

        Reviewed by Gyuyoung Kim.

        Implementation of Web Inspector in EWebLauncher.
        The Web Inspector can be opened or closed by pressing ctrl+i on web page.

        * EWebLauncher/main.c:
        (on_browser_ecore_evas_resize):
        (on_web_inspector_ecore_evas_resize):
        (on_key_down):
        (on_web_inspector_view_create):
        (on_web_inspector_view_close):
        (on_web_inspector_view_destroyed):
        (browserCreate):
        (webInspectorCreate):
        (windowCreate):
        (closeWindow):
        (main_signal_exit):
        (parseUserArguments):

2012-10-07  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Rename first/second to key/value in HashMap iterators
        https://bugs.webkit.org/show_bug.cgi?id=82784

        Reviewed by Eric Seidel.

        * DumpRenderTree/chromium/MockWebSpeechInputController.cpp:
        (MockWebSpeechInputController::addMockRecognitionResult):
        * DumpRenderTree/chromium/NotificationPresenter.cpp:
        (NotificationPresenter::simulateClick):
        (NotificationPresenter::show):
        * DumpRenderTree/chromium/TestRunner/CppBoundClass.cpp:
        (CppBoundClass::~CppBoundClass):
        (CppBoundClass::invoke):
        (CppBoundClass::getProperty):
        (CppBoundClass::setProperty):
        (CppBoundClass::bindCallback):
        (CppBoundClass::bindProperty):
        * DumpRenderTree/chromium/WebPreferences.cpp:
        (applyFontMap):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::printResourceDescription):
        * DumpRenderTree/mac/TestRunnerMac.mm:
        (worldIDForWorld):
        (TestRunner::evaluateScriptInIsolatedWorld):
        * DumpRenderTree/win/AccessibilityControllerWin.cpp:
        (AccessibilityController::~AccessibilityController):
        (AccessibilityController::winNotificationReceived):
        * DumpRenderTree/win/ResourceLoadDelegate.cpp:
        (ResourceLoadDelegate::descriptionSuitableForTestResult):
        * DumpRenderTree/win/TestRunnerWin.cpp:
        (worldIDForWorld):
        (TestRunner::evaluateScriptInIsolatedWorld):
        * TestWebKitAPI/Tests/WebKit2/DOMWindowExtensionBasic_Bundle.cpp:
        (TestWebKitAPI::DOMWindowExtensionBasic::willDestroyPage):
        * TestWebKitAPI/Tests/WebKit2/DOMWindowExtensionNoCache_Bundle.cpp:
        (TestWebKitAPI::DOMWindowExtensionNoCache::willDestroyPage):
        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        (WTR::TestRunner::worldIDForWorld):
        (WTR::TestRunner::evaluateScriptInIsolatedWorld):

2012-10-07  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        Unreviewed, rolling out r130596.
        http://trac.webkit.org/changeset/130596
        https://bugs.webkit.org/show_bug.cgi?id=98616

        Broke build bots without IPV6 support

        * Scripts/webkitpy/common/system/platforminfo_mock.py:
        (MockPlatformInfo.is_cygwin):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.baseline_version_dir):
        (Port.to.start_websocket_server):
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        (PortTest.test_operating_system):
        (PortTest.test_build_path):
        * Scripts/webkitpy/layout_tests/servers/apache_http_server.py:
        (LayoutTestApacheHttpd):
        (LayoutTestApacheHttpd.__init__):

2012-10-07  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        webkitpy: Pass the `Listen' Apache directive from Apache, not the httpd.conf files.
        https://bugs.webkit.org/show_bug.cgi?id=98602

        Reviewed by Eric Seidel.

        Unify all the different `Listen' directives present in the several
        httpd.conf files we have in LayoutTests/http/conf. For one, we
        were already passing `Listen 127.0.0.1:8000' via webkitpy before,
        and opening the other ports from the conf files.

        The configuration files differed mostly in the way they handled
        IPV6 ports. Some of them did not listen to IPV6 ports because the
        systems which used them sometimes did not have IPV6 support. The
        `http_server_supports_ipv6' method has been added to Port to
        address that. cygwin, on its turn, still seems to use Apache 1.3,
        which does not support IPV6 at all; the newly-added method has a
        special case for that.

        * Scripts/webkitpy/common/system/platforminfo_mock.py:
        (MockPlatformInfo.is_cygwin):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.baseline_version_dir):
        (Port.to.start_websocket_server):
        (Port.to):
        (Port.to.http_server_supports_ipv6):
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        (PortTest.test_http_server_supports_ipv6):
        (PortTest.test_build_path):
        * Scripts/webkitpy/layout_tests/servers/apache_http_server.py:
        (LayoutTestApacheHttpd):
        (LayoutTestApacheHttpd.__init__):

2012-10-05  Simon Fraser  <simon.fraser@apple.com>

        Attempt to fix the SnowLeopard build to making the implementation of
        -isPaginated come before its use.

        * MiniBrowser/mac/WK1BrowserWindowController.m:
        (-[WK1BrowserWindowController reload:]):
        (-[WK1BrowserWindowController forceRepaint:]):
        (-[WK1BrowserWindowController goBack:]):
        (-[WK1BrowserWindowController goForward:]):
        (-[WK1BrowserWindowController isPaginated]):

2012-10-05  Simon Fraser  <simon.fraser@apple.com>

        Provide a way to run WebKit1
        https://bugs.webkit.org/show_bug.cgi?id=98568

        Reviewed by Tim Horton.

        Make it possible to create both WebKit1 and WebKit2 windows in MiniBrowser.
        
        Turn BrowserWindowController into a base class; subclassed by
        WK1BrowserWindowController and WK2BrowserWindowController, each of
        which implement the BrowserController protocol.
        
        Use Command-N to get a WebKit1 window, and Command-Option-N to
        get a WK2 window. Also add "Open Location" to focus the URL bar,
        and code to add an http:// if missing.
        
        Hook up window title callbacks; append " [WK1/2]" to window title
        as appropriate.

        * MiniBrowser/MiniBrowser.xcodeproj/project.pbxproj:
        * MiniBrowser/mac/AppDelegate.m:
        (-[BrowserAppDelegate newWindow:]):
        (-[BrowserAppDelegate openPanelDidEnd:returnCode:contextInfo:]):
        * MiniBrowser/mac/BrowserWindowController.h:
        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController initWithWindow:]):
        (-[BrowserWindowController windowDidLoad]):
        (-[BrowserWindowController openLocation:]):
        (-[BrowserWindowController loadURLString:]):
        (-[BrowserWindowController applicationTerminating]):
        (-[BrowserWindowController addProtocolIfNecessary:]):
        * MiniBrowser/mac/MainMenu.xib:
        * MiniBrowser/mac/WK1BrowserWindowController.h: Copied from Tools/MiniBrowser/mac/BrowserWindowController.h.
        (WebView):
        * MiniBrowser/mac/WK1BrowserWindowController.m: Added.
        (-[WK1BrowserWindowController awakeFromNib]):
        (-[WK1BrowserWindowController dealloc]):
        (-[WK1BrowserWindowController loadURLString:]):
        (-[WK1BrowserWindowController fetch:]):
        (-[WK1BrowserWindowController showHideWebView:]):
        (-[WK1BrowserWindowController removeReinsertWebView:]):
        (-[WK1BrowserWindowController validateMenuItem:]):
        (-[WK1BrowserWindowController reload:]):
        (-[WK1BrowserWindowController forceRepaint:]):
        (-[WK1BrowserWindowController goBack:]):
        (-[WK1BrowserWindowController goForward:]):
        (-[WK1BrowserWindowController validateUserInterfaceItem:]):
        (-[WK1BrowserWindowController validateToolbar]):
        (-[WK1BrowserWindowController windowShouldClose:]):
        (-[WK1BrowserWindowController windowWillClose:]):
        (-[WK1BrowserWindowController applicationTerminating]):
        (-[WK1BrowserWindowController currentZoomFactor]):
        (-[WK1BrowserWindowController canZoomIn]):
        (-[WK1BrowserWindowController zoomIn:]):
        (-[WK1BrowserWindowController canZoomOut]):
        (-[WK1BrowserWindowController zoomOut:]):
        (-[WK1BrowserWindowController canResetZoom]):
        (-[WK1BrowserWindowController resetZoom:]):
        (-[WK1BrowserWindowController toggleZoomMode:]):
        (-[WK1BrowserWindowController isPaginated]):
        (-[WK1BrowserWindowController togglePaginationMode:]):
        (-[WK1BrowserWindowController find:]):
        (-[WK1BrowserWindowController dumpSourceToConsole:]):
        (-[WK1BrowserWindowController webView:didStartProvisionalLoadForFrame:]):
        (-[WK1BrowserWindowController webView:didReceiveTitle:forFrame:]):
        * MiniBrowser/mac/WK2BrowserWindowController.h: Copied from Tools/MiniBrowser/mac/BrowserWindowController.h.
        * MiniBrowser/mac/WK2BrowserWindowController.m: Copied from Tools/MiniBrowser/mac/BrowserWindowController.m.
        (-[WK2BrowserWindowController initWithContext:pageGroup:]):
        (-[WK2BrowserWindowController dealloc]):
        (-[WK2BrowserWindowController fetch:]):
        (-[WK2BrowserWindowController showHideWebView:]):
        (-[WK2BrowserWindowController removeReinsertWebView:]):
        (-[WK2BrowserWindowController validateMenuItem:]):
        (-[WK2BrowserWindowController reload:]):
        (-[WK2BrowserWindowController forceRepaint:]):
        (-[WK2BrowserWindowController goBack:]):
        (-[WK2BrowserWindowController goForward:]):
        (-[WK2BrowserWindowController validateUserInterfaceItem:]):
        (-[WK2BrowserWindowController validateToolbar]):
        (-[WK2BrowserWindowController windowShouldClose:]):
        (-[WK2BrowserWindowController windowWillClose:]):
        (-[WK2BrowserWindowController applicationTerminating]):
        (-[WK2BrowserWindowController currentZoomFactor]):
        (-[WK2BrowserWindowController setCurrentZoomFactor:]):
        (-[WK2BrowserWindowController canZoomIn]):
        (-[WK2BrowserWindowController zoomIn:]):
        (-[WK2BrowserWindowController canZoomOut]):
        (-[WK2BrowserWindowController zoomOut:]):
        (-[WK2BrowserWindowController canResetZoom]):
        (-[WK2BrowserWindowController resetZoom:]):
        (-[WK2BrowserWindowController toggleZoomMode:]):
        (-[WK2BrowserWindowController isPaginated]):
        (-[WK2BrowserWindowController togglePaginationMode:]):
        (-[WK2BrowserWindowController dumpSourceToConsole:]):
        (didStartProvisionalLoadForFrame):
        (didReceiveServerRedirectForProvisionalLoadForFrame):
        (didFailProvisionalLoadWithErrorForFrame):
        (didCommitLoadForFrame):
        (didFinishDocumentLoadForFrame):
        (didFinishLoadForFrame):
        (didFailLoadWithErrorForFrame):
        (didSameDocumentNavigationForFrame):
        (didReceiveTitleForFrame):
        (didFirstLayoutForFrame):
        (didFirstVisuallyNonEmptyLayoutForFrame):
        (didRemoveFrameFromHierarchy):
        (didDisplayInsecureContentForFrame):
        (didRunInsecureContentForFrame):
        (didDetectXSSForFrame):
        (didStartProgress):
        (didChangeProgress):
        (didFinishProgress):
        (didBecomeUnresponsive):
        (didBecomeResponsive):
        (processDidExit):
        (didChangeBackForwardList):
        (decidePolicyForNavigationAction):
        (decidePolicyForNewWindowAction):
        (decidePolicyForResponse):
        (createNewPage):
        (showPage):
        (closePage):
        (runJavaScriptAlert):
        (runJavaScriptConfirm):
        (runJavaScriptPrompt):
        (setStatusText):
        (mouseDidMoveOverElement):
        (getWindowFrame):
        (setWindowFrame):
        (runBeforeUnloadConfirmPanel):
        (runOpenPanel):
        (-[WK2BrowserWindowController awakeFromNib]):
        (-[WK2BrowserWindowController didStartProgress]):
        (-[WK2BrowserWindowController didChangeProgress:]):
        (-[WK2BrowserWindowController didFinishProgress]):
        (-[WK2BrowserWindowController updateProvisionalURLForFrame:]):
        (-[WK2BrowserWindowController didStartProvisionalLoadForFrame:]):
        (-[WK2BrowserWindowController didReceiveServerRedirectForProvisionalLoadForFrame:]):
        (-[WK2BrowserWindowController didFailProvisionalLoadWithErrorForFrame:]):
        (-[WK2BrowserWindowController didFailLoadWithErrorForFrame:]):
        (-[WK2BrowserWindowController didSameDocumentNavigationForFrame:]):
        (-[WK2BrowserWindowController didCommitLoadForFrame:]):
        (-[WK2BrowserWindowController loadURLString:]):
        (-[WK2BrowserWindowController performFindPanelAction:]):
        (-[WK2BrowserWindowController find:]):

2012-10-05  Sudarsana Nagineni  <sudarsana.nagineni@intel.com>

        [WK2][WTR] WebKitTestRunner needs testRunner.setSerializeHTTPLoads
        https://bugs.webkit.org/show_bug.cgi?id=98524

        Reviewed by Alexey Proskuryakov.

        Add implementation for testRunner.setSerializeHTTPLoads in
        WebKitTestRunner.

        * WebKitTestRunner/InjectedBundle/Bindings/TestRunner.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::beginTesting):
        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        (WTR::TestRunner::setSerializeHTTPLoads):
        (WTR):
        * WebKitTestRunner/InjectedBundle/TestRunner.h:
        (TestRunner):

2012-10-05  Richard Larocque  <rlarocque@chromium.org>

        TestResultsServer does not display sync_integration_tests results
        https://bugs.webkit.org/show_bug.cgi?id=98551

        Reviewed by Ojan Vafai.

        Allow builders whose name contains "Sync" to pass through the
        isChromiumWebkitDepsTestRunner filter.

        The test expectations in flakiness_dashboard_unittests.js have been
        updated to match the new behaviour.

        * TestResultServer/static-dashboards/builders.js:
        (isChromiumDepsGTestRunner):

2012-10-05  Roger Fong  <roger_fong@apple.com>

        Tests in webkitpy involving child processes are flaky. 
        Skipping run_webkit_tests_integrationtest.py.
        https://bugs.webkit.org/show_bug.cgi?id=98559

        Reviewed by Dirk Pranke.

        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (MainTest.test_verbose_in_child_processes):

2012-10-05  Zan Dobersek  <zandobersek@gmail.com>

        [Gtk] fast/xsl/xslt-missing-namespace-in-xslt.xml is failing on the 64-bit Debug builder
        https://bugs.webkit.org/show_bug.cgi?id=91009

        Reviewed by Martin Robinson.

        Include libxml2 into the jhbuild module. Version 2.8.0 introduces
        a more correct (but not completely correct) behavior in the
        fast/xsl/xslt-missing-namespace-in-xslt.html test.

        * gtk/jhbuild.modules:

2012-10-05  Rob Buis  <rbuis@rim.com>

        [BlackBerry] Implement TestRunner.setMockDeviceOrientation
        https://bugs.webkit.org/show_bug.cgi?id=98542

        Reviewed by Antonio Gomes.

        PR 120681

        This fixes tests in fast/dom/DeviceOrientation.

        * DumpRenderTree/blackberry/TestRunnerBlackBerry.cpp:
        (TestRunner::setMockDeviceOrientation):

2012-10-05  Christophe Dumez  <christophe.dumez@intel.com>

        [WK2][WKTR] Implement UIClient focus callbacks in WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=98256

        Reviewed by Kenneth Rohde Christiansen.

        Implement UIClient's focus callbacks for the main page in
        WebKitTestRunner.

        * WebKitTestRunner/TestController.cpp:
        (WTR::focus):
        (WTR::TestController::initialize):

2012-10-05  Mark Hahnenberg  <mhahnenberg@apple.com>

        JSC should have a way to gather and log Heap memory use and pause times
        https://bugs.webkit.org/show_bug.cgi?id=98431

        Reviewed by Geoffrey Garen.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (main): Added a check as to whether we should dump our JSC Heap statistics on exit.

2012-10-05  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Fix mktemp() compilation warning in Minibrowser
        https://bugs.webkit.org/show_bug.cgi?id=98493

        Reviewed by Kenneth Rohde Christiansen.

        Fix wrong mktemp usage causing a compilation warning
        in MiniBrowser.

        * MiniBrowser/efl/main.c:
        (on_download_request):

2012-10-05  Christophe Dumez  <christophe.dumez@intel.com>

        [WK2][WKTR] Avoid duplication of UIClient callbacks for main page and other pages
        https://bugs.webkit.org/show_bug.cgi?id=98503

        Reviewed by Kenneth Rohde Christiansen.

        Avoid the need for duplicating UIClient callbacks for main page
        and other pages by passing the view as clientInfo
        for those callbacks.

        Previously, callbacks for the main page were passed the
        TestController as clientInfo while the callbacks for other pages
        were passed the PlatformWebView as clientInfo. This was error prone
        and leads to useless code duplication.

        * WebKitTestRunner/TestController.cpp:
        (WTR::getWindowFrame):
        (WTR::setWindowFrame):
        (WTR::runBeforeUnloadConfirmPanel):
        (WTR::TestController::createOtherPage):
        (WTR::TestController::initialize):
        (WTR::TestController::decidePolicyForNotificationPermissionRequest):

2012-10-05  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Allow dragging into plugins.
        https://bugs.webkit.org/show_bug.cgi?id=98277

        Reviewed by Tony Chang.

        Update the TestWebPlugin to receive drag events and print them out.

        * DumpRenderTree/chromium/TestWebPlugin.cpp:
        (TestWebPlugin::handleDragStatusUpdate):
        * DumpRenderTree/chromium/TestWebPlugin.h:
        (TestWebPlugin):

2012-10-05  Jongseok Yang  <js45.yang@samsung.com>

        [EFL][WK2] Remove "web" word from ewk_web_error APIs
        https://bugs.webkit.org/show_bug.cgi?id=97886

        Reviewed by Gyuyoung Kim.

        Remove "web" word from ewk_web_error APIs.
        "web" word was redundant because "ewk" means "EFL WebKit" and WK APIs for error does not have "web" word.

        * MiniBrowser/efl/main.c:
        (on_error):

2012-10-05  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Enable CSS compositing by default
        https://bugs.webkit.org/show_bug.cgi?id=98490

        Reviewed by Simon Hausmann.

        * qmake/mkspecs/features/features.pri:

2012-10-05  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r130466.
        http://trac.webkit.org/changeset/130466
        https://bugs.webkit.org/show_bug.cgi?id=98495

        It made 12 tests crash on Qt-WK2 (Requested by Ossy on
        #webkit).

        * WebKitTestRunner/TestController.cpp:
        (WTR::focus):
        (WTR::TestController::initialize):

2012-10-05  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] Fix window resizing / moving in WK1 and WKTR
        https://bugs.webkit.org/show_bug.cgi?id=98486

        Reviewed by Gyuyoung Kim.

        Fix PlatformWebView::windowFrame() and
        PlatformWebView::setWindowFrame() in EFL's WKTR so
        that it resizes / moves the window, not the view.

        The new code matches the implementation in EwkView's
        UIClient.

        * WebKitTestRunner/efl/PlatformWebViewEfl.cpp:
        (WTR::PlatformWebView::windowFrame):
        (WTR::PlatformWebView::setWindowFrame):

2012-10-04  KyungTae Kim  <ktf.kim@samsung.com>

        [EFL][WK2] Fix destination path when download with suggested filename on the Minibrowser
        https://bugs.webkit.org/show_bug.cgi?id=98334

        Reviewed by Gyuyoung Kim.

        Add callback functions for download requests to Minibrowser to set the destination path for download.
        Set the destination path with suggested file name as (destination folder) + (suggested file name).
        The 'destination folder' should be a specific folder user selected, but is set to '/tmp' for now.

        Additionally, for printing out the download status, 
        use the info macro and set the verbose variable to 1 to enable it.

        * MiniBrowser/efl/main.c:
        (on_download_request):
        (on_download_finished):
        (on_download_failed):
        (browserCreate):

2012-10-04  Christophe Dumez  <christophe.dumez@intel.com>

        [WK2][WKTR] Implement UIClient focus callbacks in WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=98256

        Reviewed by Kenneth Rohde Christiansen.

        Implement UIClient's focus callbacks in WebKitTestRunner.

        * WebKitTestRunner/TestController.cpp:
        (WTR::focus):
        (WTR::TestController::initialize):

2012-10-04  Rik Cabanier  <cabanier@adobe.com>

        Turn Compositing on by default in WebKit build
        https://bugs.webkit.org/show_bug.cgi?id=98315

        Reviewed by Simon Fraser.

        enable -webkit-blend-mode on trunk.

        * Scripts/webkitperl/FeatureList.pm:

2012-10-04  Ryuan Choi  <ryuan.choi@samsung.com>

        [EFL][WK2] Add APIs to get/set the frame flattening.
        https://bugs.webkit.org/show_bug.cgi?id=95982

        Reviewed by Gyuyoung Kim.

        * MiniBrowser/efl/main.c: Added frame flattening option to test.
        (browserCreate):
        (main):

2012-10-04  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] Add libxml 2.8.0 to jhbuild
        https://bugs.webkit.org/show_bug.cgi?id=98418

        Reviewed by Laszlo Gombos.

        Add libxml 2.8.0 to EFL's jhbuild for consistency.

        * efl/jhbuild.modules:

2012-10-03  Benjamin Poulain  <bpoulain@apple.com>

        [WK2] Support all attributes of GeolocationPosition
        https://bugs.webkit.org/show_bug.cgi?id=98212

        Reviewed by Sam Weinig.

        Expand WebKitTestRunner and DumpRenderTree to test all the attributes
        of GeolocationPosition.

        * DumpRenderTree/TestRunner.cpp:
        (setMockGeolocationPositionCallback):
        * DumpRenderTree/TestRunner.h:
        (TestRunner):
        * DumpRenderTree/efl/TestRunnerEfl.cpp:
        (TestRunner::setMockGeolocationPosition):
        * DumpRenderTree/gtk/TestRunnerGtk.cpp:
        (TestRunner::setMockGeolocationPosition):
        * DumpRenderTree/mac/TestRunnerMac.mm:
        (TestRunner::setMockGeolocationPosition):
        * DumpRenderTree/win/TestRunnerWin.cpp:
        (TestRunner::setMockGeolocationPosition):
        * DumpRenderTree/wx/TestRunnerWx.cpp:
        (TestRunner::setMockGeolocationPosition):
        * WebKitTestRunner/GeolocationProviderMock.cpp:
        (WTR::GeolocationProviderMock::setPosition):
        * WebKitTestRunner/GeolocationProviderMock.h:
        (GeolocationProviderMock):
        * WebKitTestRunner/InjectedBundle/Bindings/CodeGeneratorTestRunner.pm:
        (_platformTypeVariableDeclaration):
        Use a proper constructor for the JSValueRef, it is an opaque type, we are not supposed
        to build the pointer outself.
        This is necessary to support optional JSValueRef properly.

        * WebKitTestRunner/InjectedBundle/Bindings/TestRunner.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::setMockGeolocationPosition):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (InjectedBundle):
        * WebKitTestRunner/InjectedBundle/TestRunner.cpp:
        (WTR::TestRunner::setMockGeolocationPosition):
        * WebKitTestRunner/InjectedBundle/TestRunner.h:
        (TestRunner):
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::setMockGeolocationPosition):
        * WebKitTestRunner/TestController.h:
        (TestController):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):

2012-10-04  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        Make the Xvfb driver recognize `X' as a valid X server binary.
        https://bugs.webkit.org/show_bug.cgi?id=98434

        Reviewed by Dirk Pranke.

        The X server binary can also be called `X', so account for that
        possibility in the _next_free_display regexp.

        Additionally, make the regular expression require at least one
        space character after the `ps comm' part.

        * Scripts/webkitpy/layout_tests/port/xvfbdriver.py:
        (XvfbDriver._next_free_display):
        * Scripts/webkitpy/layout_tests/port/xvfbdriver_unittest.py:
        (XvfbDriverTest.test_next_free_display):

2012-10-04  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        webkitpy: Accept WEBKITOUTPUTDIR in Port._setup_environ_for_server.
        https://bugs.webkit.org/show_bug.cgi?id=98436

        Reviewed by Dirk Pranke.

        The Xvfb driver (ab)uses Port._setup_environ_for_server() to set
        the environment for the server process, and the WEBKITOUTPUTDIR
        environment variable was not being passed through, causing the
        build directory to be wrongfully set to WebKitBuild/ all the time.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.to.setup_environ_for_server):

2012-10-04  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Add setting to allow file access from file:// URLs
        https://bugs.webkit.org/show_bug.cgi?id=98121

        Reviewed by Laszlo Gombos.

        Allow file access from file:// URLs by default in Minibrowser
        to facilitate testing.

        * MiniBrowser/efl/main.c:
        (browserCreate):

2012-10-04  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] Run unit tests with Xvfb
        https://bugs.webkit.org/show_bug.cgi?id=98389

        Reviewed by Laszlo Gombos.

        Run EFL unit tests with Xvfb, similarly to GTK port.

        * Scripts/run-efl-tests:

2012-10-04  Adrian Perez de Castro  <aperez@igalia.com>

        [GTK] Enable inspector by default in GtkLauncher/MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=98333

        Reviewed by Xan Lopez.

        Both MiniBrowser and GtkLauncher are tools for testing, so in
        the end every time we want to test the inspector we have to
        manually enable enable the “developer extras” setting when using
        them. It make sense to have this setting enabled by default.

        * GtkLauncher/main.c:
        (main):
        * MiniBrowser/gtk/main.c:
        (main):

2012-10-04  Harald Alvestrand  <hta@google.com>

        Change RTCPeerConnection GetStats to use Date timestamp format
        https://bugs.webkit.org/show_bug.cgi?id=98263

        Reviewed by Yury Semikhatsky.

        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.cpp:
        (MockWebRTCPeerConnectionHandler::getStats):

2012-10-04  Dirk Pranke  <dpranke@chromium.org>

        [NRWT] --skipped option is ignored when --test-list is used
        https://bugs.webkit.org/show_bug.cgi?id=98260

        Reviewed by Ojan Vafai.

        Adds a --skipped=always flag that will skip any tests listed in
        TestExpectations even if they're listed explicitly on the
        command line.

        This is most useful if you are using --test-list to specify a
        long list of files but you still want to skip some of them
        depending on what's in TestExpectations.

        * Scripts/webkitpy/layout_tests/controllers/layout_test_finder.py:
        (LayoutTestFinder.skip_tests):
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (parse_args):
        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (MainTest.test_skipped_flag):

2012-10-04  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r130377.
        http://trac.webkit.org/changeset/130377
        https://bugs.webkit.org/show_bug.cgi?id=98392

        Chromium Win compilation is broken (Requested by yurys on
        #webkit).

        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.cpp:
        (MockWebRTCPeerConnectionHandler::getStats):

2012-10-04  Harald Alvestrand  <hta@google.com>

        Change RTCPeerConnection GetStats to use Date timestamp format
        https://bugs.webkit.org/show_bug.cgi?id=98263

        Reviewed by Adam Barth.

        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.cpp:
        (MockWebRTCPeerConnectionHandler::getStats):

2012-10-04  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        Unreviewed, remove unused $legacyWebKitBlobBuilderSupport variable after r130343.

        * Scripts/webkitperl/FeatureList.pm:

2012-10-03  Philip Rogers  <pdr@google.com>

        Force GC between PageLoad tests.
        https://bugs.webkit.org/show_bug.cgi?id=98203

        Reviewed by Ryosuke Niwa.

        Previously, our PageLoad PerfTests had multi-modal distributions,
        typically with a small cluster at 1-2x the median. This turned out
        to be caused by not garbage collecting between tests!

        This patch adds a new file, force-gc.html, and loads this file between
        PageLoad tests to force a GC. I manually verified that this cleans up
        our perf test outliers.

        * Scripts/webkitpy/performance_tests/perftest.py:
        (PageLoadingPerfTest.__init__):
        (PageLoadingPerfTest):
        (PageLoadingPerfTest.run_single):

            This function now loads two pages: one to force a gc and
            then the test to run.

        * Scripts/webkitpy/performance_tests/perftest_unittest.py:

            Modified several existing tests to show that the force-gc file
            is loaded.

        (MockPort):
        (MockPort.__init__):
        (MockPort.perf_tests_dir):
        (TestPageLoadingPerfTest.MockDriver.__init__):
        (TestPageLoadingPerfTest.MockDriver.run_test):
        (TestPageLoadingPerfTest.test_run):
        (TestPageLoadingPerfTest.test_run_with_bad_output):
        (TestReplayPerfTest.ReplayTestPort):
        (TestReplayPerfTest.ReplayTestPort.__init__):
        (TestReplayPerfTest.test_run_single.run_test):
        (TestReplayPerfTest.test_run_single):
        (TestReplayPerfTest.test_run_single_fails_when_output_has_error):
        (TestPerfTestFactory.test_regular_test):
        (TestPerfTestFactory.test_inspector_test):
        (TestPerfTestFactory.test_page_loading_test):

2012-10-03  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] Enable use of X11 in DumpRenderTree / WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=98231

        Reviewed by Gyuyoung Kim.

        Enable use of X11 in DumpRenderTree / WebKitTestRunner.
        Call ecore_evas_new() instead of ecore_evas_buffer_new()
        in EFL's DumpRenderTree and WebKitTestRunner.
        It is safe to do this now that we are using XvfbDriver
        for the layout tests.

        * DumpRenderTree/efl/DumpRenderTree.cpp:
        (parseCommandLineOptions):
        (initEcoreEvas):
        * WebKitTestRunner/efl/PlatformWebViewEfl.cpp:
        (WTR::initEcoreEvas):
        * WebKitTestRunner/efl/main.cpp:
        (main):

2012-10-03  Dirk Pranke  <dpranke@chromium.org>

        run-webkit-tests tests on win32 after r127302
        https://bugs.webkit.org/show_bug.cgi?id=98323

        Reviewed by Eric Seidel.

        run-webkit-tests tests on win32 after r127302
        https://bugs.webkit.org/show_bug.cgi?id=98323

        Reviewed by Eric Seidel.

        Looks like when we converted the json-building logic to use scm
        to try and get the svn revision, we missed a win32-ism and
        didn't check to make sure had initialized the scm subsystem.

        This change fixes that and renames _initialize_scm to be a public method.

        * Scripts/webkitpy/common/host.py:
        (Host.initialize_scm):
        * Scripts/webkitpy/common/host_mock.py:
        (MockHost.__init__):
        (MockHost.initialize_scm):
        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (summarize_results):
        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator.py:
        (JSONResultsGeneratorBase.get_json):
        (JSONResultsGeneratorBase._get_result_char):
        (JSONResultsGeneratorBase._get_svn_revision):
        * Scripts/webkitpy/performance_tests/perftestsrunner.py:
        (PerfTestsRunner.__init__):
        * Scripts/webkitpy/style/checkers/test_expectations.py:
        (TestExpectationsChecker.__init__):
        * Scripts/webkitpy/style/main.py:
        (CheckWebKitStyle.main):
        * Scripts/webkitpy/tool/main.py:
        (WebKitPatch.handle_global_options):
        * Scripts/webkitpy/tool/servers/rebaselineserver.py:
        (get_test_baselines):

2012-10-03  Adrian Perez de Castro  <aperez@igalia.com>

        [GTK] Make inspector directly useable in GtkLauncher/MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=98310

        Reviewed by Martin Robinson.

        Make MiniBrowser/GtkLauncher define the path to the inspector
        resources by setting the WEBKIT_INSPECTOR_PATH environment
        variable pointing to the copy of the inspector resources in
        the build directory. If the environment variable is already
        defined, its value is not overwritten. The path is derived
        from the WEBKIT_EXEC_PATH macro defined in the makefiles.

        * GNUmakefile.am:
        * GtkLauncher/main.c:
        (main):
        * MiniBrowser/gtk/main.c:
        (main):

2012-10-03  Benjamin Poulain  <bpoulain@apple.com>

        Fix Geolocation/window-close-crash.html and harden WebKitTestRunner for Geolocation
        https://bugs.webkit.org/show_bug.cgi?id=97608

        Reviewed by Sam Weinig.

        The test fast/dom/Geolocation/window-close-crash.html was crashing because
        handleGeolocationPermissionRequest() was executed on the wrong pointer. Depending on how
        the page was created, the void* clientInfo can either be a PlatformWebView or
        a TestController.

        Using the global TestController fixes the issue.

        * WebKitTestRunner/GeolocationProviderMock.cpp:
        (WTR::GeolocationProviderMock::setPosition):
        (WTR::GeolocationProviderMock::setPositionUnavailableError):
        To be reliable, the test fast/dom/Geolocation/maximum-age.html needs the setting the position
        to clear the error and vice versa.
        This is the same behavior as GeolocationClientMock and MockGeolocationProvider of WebKit1.

        (WTR::GeolocationProviderMock::sendPositionIfNeeded):
        (WTR::GeolocationProviderMock::sendErrorIfNeeded):
        Some tests expect the position/error cant be sent multiple time,
        just keep the position after sending.

        * WebKitTestRunner/TestController.cpp:
        (WTR::decidePolicyForGeolocationPermissionRequest):
        (WTR::TestController::decidePolicyForGeolocationPermissionRequestIfPossible):
        * WebKitTestRunner/TestController.h:
        Let's play as if we did not know what is in GeolocationPermissionRequestManagerProxy like a real
        client would have to do.

2012-10-03  Otto Derek Cheung  <otcheung@rim.com>

        [BlackBerry] Implementing the NetworkInfo API for BB port
        https://bugs.webkit.org/show_bug.cgi?id=98273

        Reviewed by Rob Buis.

        Enabling NetworkInfo API for the BlackBerry port.

        * Scripts/webkitperl/FeatureList.pm:

2012-10-03  Anders Carlsson  <andersca@apple.com>

        Exception thrown when running accessibility/container-node-delete-causes-crash.html test
        https://bugs.webkit.org/show_bug.cgi?id=98291

        Reviewed by Andreas Kling.

        The accessibility/container-node-delete-causes-crash.html test will cause a full accessibility tree
        to be created by trying to look up an element with a non-existent ID. This caused an exception to be thrown
        when trying to access the children of an element that didn't have any children. Fix this by adding
        BEGIN_AX_OBJC_EXCEPTIONS/END_AX_OBJC_EXCEPTIONS around the call to get the children.

        * DumpRenderTree/mac/AccessibilityControllerMac.mm:
        (findAccessibleObjectById):

2012-10-03  Ojan Vafai  <ojan@chromium.org>

        Make partytime work when loading garden-o-matic from trac.webkit.org
        https://bugs.webkit.org/show_bug.cgi?id=98283

        Reviewed by Adam Barth.

        CSP was blocking the reqest for partytime.gif because 'self' wasn't on the img-src directive.
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/garden-o-matic.html:

2012-10-03  Roger Fong  <roger_fong@apple.com>

        Unreviewed. Adding sys.platform check to skip a failing assert on the Apple Windows platform.
        https://bugs.webkit.org/show_bug.cgi?id=98288

        * Scripts/webkitpy/layout_tests/port/chromium_android_unittest.py:
        (ChromiumAndroidDriverTest.test_command_from_driver_input):

2012-10-03  Ojan Vafai  <ojan@chromium.org>

        Get rid of warning about non-existant platform name when loading garden-o-matic
        https://bugs.webkit.org/show_bug.cgi?id=98282

        Reviewed by Adam Barth.

        If you loaded without a platform query parameter we'd return "null" as the platform name
        instead of null.
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/base.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/base_unittests.js:

2012-10-03  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] Enable mock scrollbars
        https://bugs.webkit.org/show_bug.cgi?id=98011

        Reviewed by Csaba Osztrogonác.

        Enable mock scrollbars for the Qt port. This patch will require a huge rebaseline.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::resetStateToConsistentValues):

2012-10-03  Alberto Garcia  <agarcia@igalia.com>

        [GTK] [WK2] Add favicon support to the MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=98063

        Reviewed by Carlos Garcia Campos.

        Set the icon in the URI text entry using the favicon property of
        the WebKitWebView.

        * MiniBrowser/gtk/BrowserWindow.c:
        (_BrowserWindow):
        (updateUriEntryIcon):
        (uriEntryTextChanged):
        (faviconChanged):
        (browserWindowFinalize):
        (browser_window_init):
        (browserWindowConstructed):

2012-10-03  Raphael Kubo da Costa  <raphael.kubo.da.costa@intel.com>

        [Qt][DRT] Add support for overriding the "WebKitDisplayImagesKey" preference.
        https://bugs.webkit.org/show_bug.cgi?id=98200

        Reviewed by Csaba Osztrogonác.

        * DumpRenderTree/qt/TestRunnerQt.cpp:
        (TestRunner::overridePreference):

2012-10-03  Zoltan Arvai  <zarvai@inf.u-szeged.hu>

        [Qt][WRT] Fix build error with MSVC on Windows.
        https://bugs.webkit.org/show_bug.cgi?id=97697

        Reviewed by Simon Hausmann.

        WTR build is failing when WebKit directory is located on a longer path.
        This seems to caused by source files that has the same name in
        WTR and DRT directories. The solution is removing referencies 
        from Target.pri to DRT directory and adding an alternate version of
        the required files to WTR. Those files simply include the real ones from DRT.

        * WebKitTestRunner/InjectedBundle/Target.pri:
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.cpp: Added.
        * WebKitTestRunner/InjectedBundle/qt/QtInitializeTestFonts.h: Added.

2012-10-03  Christophe Dumez  <christophe.dumez@intel.com>

        [WK2][WKTR] TestRunner.setAlwaysAcceptCookies() causes flakiness
        https://bugs.webkit.org/show_bug.cgi?id=98238

        Reviewed by Csaba Osztrogonác.

        Reset AlwaysAcceptCookies setting between tests to avoid
        flakiness due to TestRunner.setAlwaysAcceptCookies().

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::beginTesting):

2012-10-03  Harald Alvestrand  <hta@google.com>

        Add data passing to the GetStats interface of RTCPeerConnection
        https://bugs.webkit.org/show_bug.cgi?id=98003

        Reviewed by Adam Barth.

        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.cpp:
        (RTCStatsRequestSucceededTask::RTCStatsRequestSucceededTask):
        (MockWebRTCPeerConnectionHandler::MockWebRTCPeerConnectionHandler):
        (MockWebRTCPeerConnectionHandler::addStream):
        (MockWebRTCPeerConnectionHandler::removeStream):
        (MockWebRTCPeerConnectionHandler::getStats):
        * DumpRenderTree/chromium/MockWebRTCPeerConnectionHandler.h:
        (MockWebRTCPeerConnectionHandler):

== Rolled over to ChangeLog-2012-10-02 ==
