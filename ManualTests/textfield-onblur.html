<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <script>
        function init () {
            document.getElementById("test").focus();
        }

        function foo () {
            document.open();
            document.write('Test has passed.');
            document.close();
        }
    </script>
</head>
<body onload="init();">
<p><b>BUG ID:</b> <a href="rdar://problem/4181058">4181058</a> 8C45: Safari repro crash with document.write (WebCore::Node::dispatchEvent)</p>

<p id="test" style="background-color:skyblue; padding:3px;"><b>STEPS TO TEST:</b> 
<ul>
<li> Press the Tab key.  This will remove focus from the text field, and should call document.write without crashing.
</ul>
</p>

<p id="success" style="background-color:palegreen; padding:3px;"><b>TEST PASS:</b> 
You should see text that says "Test has passed".
</p>

<p id="failure" style="background-color:#FF3300; padding:3px;"><b>TEST FAIL:</b>  
If the test fails, the browser will crash.
</p>

<input type="text" id="test" onblur="foo();" />  

</body>
</html>