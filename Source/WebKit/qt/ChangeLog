2013-03-03  Adam Barth  <abarth@webkit.org>

        Unreviewed attempted build fix. Adds back some includes removed in
        http://trac.webkit.org/changeset/144565.

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        * WebCoreSupport/QWebPageAdapter.cpp:

2013-03-03  Adam Barth  <abarth@webkit.org>

        Unreviewed rollout of http://trac.webkit.org/r144530
        As described in https://bugs.webkit.org/show_bug.cgi?id=111167 and
        https://bugs.webkit.org/show_bug.cgi?id=111035, this patch caused a
        large number of ASSERTs in chromium-win.

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        * WebCoreSupport/QWebPageAdapter.cpp:

2013-03-02  Benjamin Poulain  <bpoulain@apple.com>

        Move computedStyleIncludingVisitedInfo from TestRunner to Internals
        https://bugs.webkit.org/show_bug.cgi?id=109772

        Reviewed by Andreas Kling.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2013-02-28  Alexey Proskuryakov  <ap@apple.com>

        Reduce amount of rebuilding when touching networking headers
        https://bugs.webkit.org/show_bug.cgi?id=111035

        Reviewed by Eric Seidel.

        Adding includes that are now necessary because WebCore headers don't have them
        any more.

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        * WebCoreSupport/QWebPageAdapter.cpp:

2013-03-01  Jason Anderssen  <janderssen@gmail.com>

        Move markerTextForListItem from TestRunner to Internals
        https://bugs.webkit.org/show_bug.cgi?id=110939

        Reviewed by Benjamin Poulain.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2013-03-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r144422 and r144424.
        http://trac.webkit.org/changeset/144422
        http://trac.webkit.org/changeset/144424
        https://bugs.webkit.org/show_bug.cgi?id=111167

        Caused over 20 tests to fail assertion on Chromium Win port as
        ASSERTION FAILED: m_platformRequestUpdated (Requested by
        toyoshim on #webkit).

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        * WebCoreSupport/QWebPageAdapter.cpp:

2013-02-28  Alexey Proskuryakov  <ap@apple.com>

        Reduce amount of rebuilding when touching networking headers
        https://bugs.webkit.org/show_bug.cgi?id=111035

        Reviewed by Eric Seidel.

        Adding includes that are now necessary because WebCore headers don't have them
        any more.

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        * WebCoreSupport/QWebPageAdapter.cpp:

2013-02-24  Andreas Kling  <akling@apple.com>

        StyledElement: Don't expose a mutable direct interface to the inline style.
        <http://webkit.org/b/110711>

        Reviewed by Antti Koivisto.

        QWebElement::styleProperty() is a read-only method, so rewrite it to use StyledElement::inlineStyle().

        * Api/qwebelement.cpp:
        (QWebElement::styleProperty):

2013-02-23  Jason Anderssen  <janderssen@gmail.com>

        Move setAutofilled from TestRunner to WebCore
        https://bugs.webkit.org/show_bug.cgi?id=110521

        Reviewed by Benjamin Poulain.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2013-02-21  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Replace QWebPageAdaptor::TouchAdjuster
        https://bugs.webkit.org/show_bug.cgi?id=110226

        Reviewed by Antonio Gomes.

        * WebCoreSupport/QWebPageAdapter.cpp:
        (QWebPageAdapter::adjustPointForClicking):
        * WebCoreSupport/QWebPageAdapter.h:

2013-02-15  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        Simplify hitTestResultAtPoint and nodesFromRect APIs
        https://bugs.webkit.org/show_bug.cgi?id=95720

        Reviewed by Julien Chaffraix.

        Update calls to new API.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForNavigationAction):
        * WebCoreSupport/QWebFrameAdapter.cpp:
        (QWebFrameAdapter::hitTestContent):
        * WebCoreSupport/QWebPageAdapter.cpp:
        (QWebPageAdapter::TouchAdjuster::findCandidatePointForTouch):
        (QWebPageAdapter::handleSoftwareInputPanel):
        (QWebPageAdapter::updatePositionDependentMenuActions):

2013-02-15  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Port GCController to JSC C API
        https://bugs.webkit.org/show_bug.cgi?id=109690

        Reviewed by Benjamin Poulain.

        Add hooks to retrieve JSContextRef and window object.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::getJSWindowObject):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2013-02-13  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] window.open passes height and width parameters even if not defined in a page
        https://bugs.webkit.org/show_bug.cgi?id=107705

        Reviewed by Kenneth Rohde Christiansen.

        Test that minimum size is applied only when the requested size is too small,
        not when default is requested.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage):
        (TestPage):
        (TestPage::TestPage):
        (TestPage::createWindow):
        (TestPage::slotGeometryChangeRequested):
        (tst_QWebPage::openWindowDefaultSize):

2013-02-12  Huang Dongsung  <luxtella@company100.net>

        [TexMap] Apply frames-per-second debug counter to WK1.
        https://bugs.webkit.org/show_bug.cgi?id=109540

        Reviewed by Noam Rosenthal.

        Make TextureMapperLayerClientQt use TextureMapperFPSCounter.

        * WebCoreSupport/TextureMapperLayerClientQt.cpp:
        (TextureMapperLayerClientQt::renderCompositedLayers):
        * WebCoreSupport/TextureMapperLayerClientQt.h:
        (TextureMapperLayerClientQt):

2013-02-11  Ryosuke Niwa  <rniwa@webkit.org>

        Disable delete button controller on non-Mac ports and delete EditorClient::shouldShowDeleteInterface
        https://bugs.webkit.org/show_bug.cgi?id=109534

        Reviewed by Anders Carlsson.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore):
        * WebCoreSupport/EditorClientQt.h:
        (EditorClientQt):

2013-02-11  Benjamin Poulain  <benjamin@webkit.org>

        Kill TestRunner::setMinimumTimerInterval; implement the feature with InternalSettings
        https://bugs.webkit.org/show_bug.cgi?id=109349

        Reviewed by Sam Weinig.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2013-02-08  Benjamin Poulain  <bpoulain@apple.com>

        Move workerThreadCount from TestRunner to WebCore Internals
        https://bugs.webkit.org/show_bug.cgi?id=109239

        Reviewed by Darin Adler.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2013-02-07  Benjamin Poulain  <bpoulain@apple.com>

        Move pauseAnimation/pauseTransition from TestRunner to Internals
        https://bugs.webkit.org/show_bug.cgi?id=109107

        Reviewed by Anders Carlsson.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2013-02-04  Benjamin Poulain  <bpoulain@apple.com>

        Kill suspendAnimation(), resumeAnimation() and numberOfActiveAnimations() from DRT/WTR; use Internals
        https://bugs.webkit.org/show_bug.cgi?id=108741

        Reviewed by Tony Chang.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2013-02-04  Enrica Casucci  <enrica@apple.com>

        Add specific EditActions for Bold and Italic commands.
        https://bugs.webkit.org/show_bug.cgi?id=108842.
        <rdar://problem/13098252>

        Reviewed by Ryosuke Niwa.

        * WebCoreSupport/UndoStepQt.cpp:
        (undoNameForEditAction):

2013-02-04  Abhishek Arya  <inferno@chromium.org>

        Add ASSERT_WITH_SECURITY_IMPLICATION to detect bad cast in DOM, CSS, etc.
        https://bugs.webkit.org/show_bug.cgi?id=108688

        Reviewed by Eric Seidel.

        * WebCoreSupport/FrameLoaderClientQt.cpp:

2013-02-03  KwangYong Choi  <ky0.choi@samsung.com>

        Fix build warning after r141473
        https://bugs.webkit.org/show_bug.cgi?id=108782

        Reviewed by Kentaro Hara.

        Fix -Wunused-parameter build warning.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::getClientPasteboardDataForRange):

2013-02-01  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Make QWebHistory unit tests more robust

        Reviewed by Jocelyn Turcotten.

        The tests were using a QEventLoop::exec() call to verify the emission
        of the loadFinished() signal after calling for example back() or forward().
        However sometimes the call to back() may emit the signal immediately and
        sometimes async, causing instabilities in test runs. The call to exec()
        also means that if there was a bug then the rest would hang forever because
        exec() has no timeout.

        This patch introduces a simple SignalBarrier class that solves both issues:

        (1) ensureSignalEmitted() supports the immediate signal emission case as well
        as the async one.

        (2) Through the use of QSignalSpy's wait() there's an actual timeout.

        * tests/qwebhistory/tst_qwebhistory.cpp:
        (tst_QWebHistory::init):
        (tst_QWebHistory::cleanup):
        (tst_QWebHistory::back):
        (tst_QWebHistory::forward):
        (tst_QWebHistory::goToItem):
        (tst_QWebHistory::serialize_2):
        * tests/util.h:
        (waitForSignal):
        (SignalBarrier):
        (SignalBarrier::SignalBarrier):
        (SignalBarrier::ensureSignalEmitted):

2013-02-01  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Fix hanging deleteQWebViewTwice test

        Reviewed by Allan Sandfeld Jensen.

        Don't use QCoreApplication::instance()->exec(), because in case of a bug
        that never finishes. Instead use waitForSignal() which has the concept of
        a timeout.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::deleteQWebViewTwice):

2013-02-01  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Skip hanging WebGL software fallback tests

        Reviewed by Allan Sandfeld Jensen.

        See also https://bugs.webkit.org/show_bug.cgi?id=105820.

        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView::webglSoftwareFallbackVerticalOrientation):
        (tst_QGraphicsWebView::webglSoftwareFallbackHorizontalOrientation):

2013-02-01  Pierre Rossi  <pierre.rossi@digia.com>

        [Qt] visibility of embedded widget
        https://bugs.webkit.org/show_bug.cgi?id=108327

        Rubber-stamped by Simon Hausmann.

        In overriding Widget::hide in QtPluginWidget, we forgot to call the
        parent implementation, which as it turns, out does sensible stuff.

        * WebCoreSupport/FrameLoaderClientQt.cpp:

2013-02-01  Pierre Rossi  <pierre.rossi@digia.com>

        [Qt] visibility of embedded widget
        https://bugs.webkit.org/show_bug.cgi?id=108327

        Rubber-stamped by Simon Hausmann.

        In overriding Widget::show in QtPluginWidget, we forgot to call the
        parent implementation, which as it turns, out does sensible stuff.

        * WebCoreSupport/FrameLoaderClientQt.cpp:

2013-01-31  Enrica Casucci  <enrica@apple.com>

        WebKit2: provide new bundle APIs to allow bundle clients to be notified of pasteboard access.
        https://bugs.webkit.org/show_bug.cgi?id=108396.
        <rdar://problem/12920461>

        Reviewed by Alexey Proskuryakov.

        Adds stub implementation for WebKit of the new EditorClient methods.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::willWriteSelectionToPasteboard):
        (WebCore::EditorClientQt::getClientPasteboardDataForRange):
        * WebCoreSupport/EditorClientQt.h:

2013-01-30  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Fix minimal build after r141259.

        Unreviewed build fix.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::clearNotificationPermissions):

2013-01-26  Philippe Normand  <pnormand@igalia.com>

        [GStreamer] USE(NATIVE_FULLSCREEN_VIDEO) support
        https://bugs.webkit.org/show_bug.cgi?id=106760

        Reviewed by Gustavo Noronha Silva.

        Build fixes for GStreamer NATIVE_FULLSCREEN_VIDEO support. Some
        more changes will be needed to use the new
        FullscreenVideoController though.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::ChromeClientQt):
        (WebCore::ChromeClientQt::~ChromeClientQt):
        * WebCoreSupport/FullScreenVideoQt.cpp:
        (WebCore):
        (WebCore::FullScreenVideoQt::FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::~FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::enterFullScreenForNode):
        (WebCore::FullScreenVideoQt::exitFullScreenForNode):
        (WebCore::FullScreenVideoQt::isValid):
        * WebCoreSupport/FullScreenVideoQt.h:
        (WebCore):
        (FullScreenVideoQt):

2013-01-30  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt][WK1] Support better testing of Web Notifications
        https://bugs.webkit.org/show_bug.cgi?id=107696

        Reviewed by Jocelyn Turcotte.

        Implement support for the DRT to clear notification permissions.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::clearNotificationPermissions):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationPresenterClientQt::clearCachedPermissions):
        (WebCore):
        * WebCoreSupport/NotificationPresenterClientQt.h:
        (NotificationPresenterClientQt):

2013-01-30  Huang Dongsung  <luxtella@company100.net>

        [TexMap] Remove GraphicsLayer in TextureMapperLayer.
        https://bugs.webkit.org/show_bug.cgi?id=107073

        Reviewed by Noam Rosenthal.

        Include GraphicsLayerTextureMapper.h to use toTextureMapperLayer().

        * WebCoreSupport/TextureMapperLayerClientQt.cpp:

2013-01-30  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt][WK1] Remember denied permission for notifications 
        https://bugs.webkit.org/show_bug.cgi?id=107694

        Reviewed by Jocelyn Turcotte.

        Store denied permissions. According to the specification, we should
        ask the user again if he has already granted or denied permission.

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationPresenterClientQt::requestPermission):
        (WebCore::NotificationPresenterClientQt::setNotificationsAllowedForFrame):
        * WebCoreSupport/NotificationPresenterClientQt.h:
        (NotificationPresenterClientQt):
        * WebCoreSupport/QWebPageAdapter.cpp:
        (QWebPageAdapter::setNotificationsAllowedForFrame):
        * WebCoreSupport/QWebPageAdapter.h:
        * WidgetApi/qwebpage.cpp:
        (QWebPage::setFeaturePermission):

2013-01-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r140983.
        http://trac.webkit.org/changeset/140983
        https://bugs.webkit.org/show_bug.cgi?id=108277

        Unfortunately, this API has one last client (Requested by
        abarth on #webkit).

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationPresenterClientQt::displayNotification):
        (WebCore::NotificationPresenterClientQt::cancel):
        (WebCore::NotificationPresenterClientQt::notificationClicked):
        (WebCore::NotificationPresenterClientQt::removeReplacedNotificationFromQueue):
        (WebCore::NotificationPresenterClientQt::dumpReplacedIdText):
        (WebCore::NotificationPresenterClientQt::dumpShowText):

2013-01-29  Michael Brüning  <michael.bruning@digia.com>

        [Qt][WK1] Fix QObject Bridge tests expected output.
        https://bugs.webkit.org/show_bug.cgi?id=107827

        Reviewed by Simon Hausmann.

        The "not a function" TypeError now includes the call that caused the error.
        Correct expected values accordingly.

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::connectAndDisconnect):

2013-01-28  Huang Dongsung  <luxtella@company100.net>

        [TexMap] Enable debug borders and repaint counter via Settings.
        https://bugs.webkit.org/show_bug.cgi?id=107198

        Reviewed by Benjamin Poulain.

        If WEBKIT_SHOW_COMPOSITING_DEBUG_VISUALS is set to 1, set
        showDebugBorders and showRepaintCounter in Settings to true.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):

2013-01-24  Hajime Morrita  <morrita@google.com>

        There are a few of wrong removeAllChildren() call
        https://bugs.webkit.org/show_bug.cgi?id=107790

        Reviewed by Ryosuke Niwa.

        * Api/qwebelement.cpp: Repalced removeAllChildren() with safer removeChildren()
        (QWebElement::removeAllChildren):

2013-01-23  Shinya Kawanaka  <shinyak@chromium.org>

        shadowAncestorNode() should be renamed to deprecatedShadowAncestorNode()
        https://bugs.webkit.org/show_bug.cgi?id=107624

        Reviewed by Dimitri Glazkov.

        Since Node::shadowAncestorNode() is deprecated, we would like to rename it to prevent from further use.

        * WebCoreSupport/QWebPageAdapter.cpp:
        (QWebPageAdapter::inputMethodEvent):
        (QWebPageAdapter::inputMethodQuery):

2013-01-22  Anders Carlsson  <andersca@apple.com>

        Use a platforom strategy for local storage
        https://bugs.webkit.org/show_bug.cgi?id=107600

        Reviewed by Andreas Kling.

        Update for new storage strategy.

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::createStorageStrategy):
        * WebCoreSupport/PlatformStrategiesQt.h:
        (PlatformStrategiesQt):

2013-01-21  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt][WK1] Permission request callbacks for non-legacy notifications
        https://bugs.webkit.org/show_bug.cgi?id=107438

        Reviewed by Jocelyn Turcotte.

        Tracks the new callbacks the same way legacy callbacks are tracked.

        No test affected yet as we are still lacking support for testing
        feature permission callbacks.

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationPresenterClientQt::requestPermission):
        (WebCore::NotificationPresenterClientQt::allowNotificationForFrame):
        * WebCoreSupport/NotificationPresenterClientQt.h:
        (NotificationPresenterClientQt):
        (CallbacksInfo):

2013-01-21  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Update the documentation about the storage of inspector settings
        https://bugs.webkit.org/show_bug.cgi?id=106777

        Reviewed by Allan Sandfeld Jensen.

        Since r76770, QSettings isn't queried anymore to persist inspector
        settings like whether or not the debugger is enabled by default.
        It still seems to be used for the default attach height.

        Update the documentation accordingly.

        * WidgetApi/qwebinspector.cpp:

2013-01-21  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Crash in gmail on enabling desktop notifications
        https://bugs.webkit.org/show_bug.cgi?id=106699

        Patch by David Rosca.
        Reviewed by Jocelyn Turcotte.

        Protect against callback that may be null. This also matches WebKit2 behaviour.

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationPresenterClientQt::allowNotificationForFrame):

2013-01-18  Shinya Kawanaka  <shinyak@chromium.org>

        Introduce isHTMLTextFormControlElement and toHTMLTextFormControlElement instead of toTextFormControl
        https://bugs.webkit.org/show_bug.cgi?id=107089

        Reviewed by Kent Tamura.

        Updated code to use isHTMLTextFormControlElement and toHTMLTextFormControlElement combination instead of
        toTextFormControl.

        * WebCoreSupport/QWebPageAdapter.cpp:
        (QWebPageAdapter::inputMethodEvent):

2013-01-18  Seokju Kwon  <seokju.kwon@gmail.com>

        Add explicit keyword to constructors in platform-specific InspectorClient
        https://bugs.webkit.org/show_bug.cgi?id=107255

        Reviewed by Kentaro Hara.

        Add explicit keyword to constructors that take one argument
        in platform-specific implementation of InspectorClient.

        * WebCoreSupport/InspectorClientQt.h:
        (InspectorClientQt):

2013-01-16  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Use the shared HistoryItem serialization for QWebHistory
        https://bugs.webkit.org/show_bug.cgi?id=106671

        Reviewed by Allan Sandfeld Jensen.

        Bump the serialization version and change the code to abort the
        restore of a previous stream version rather than trying to keep the
        support of restoring previous versions. This is mainly to simplify
        things given that HistoryItem itself aborts in that case.
 
        * Api/qwebhistory.cpp:
        (operator<<):
        (operator>>):
        * tests/qwebhistory/tst_qwebhistory.cpp:
        (tst_QWebHistory::serialize_2): Modify the test to cover same-document navigations.
        (tst_QWebHistory::restoreIncompatibleVersion1): Add a previous version
        hard-coded stream to verify that the deserialization doesn't hang or
        crash.

2013-01-16  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Crash in WebCore::CachedFrame::destroy
        https://bugs.webkit.org/show_bug.cgi?id=104525

        Reviewed by Adam Barth.

        Remove the call to HistoryController::setCurrentItem which is ultimately
        causing the initial empty document of a page to be added to the page cache.

        This re-introduce the bug that was fixed by this line, which will be
        properly fixed in a follow-up patch.

        * Api/qwebhistory.cpp:
        (operator>>):
        * tests/qwebhistory/tst_qwebhistory.cpp:
        (tst_QWebHistory::saveAndRestore_crash_4): Cover the crash.

2013-01-11  Huang Dongsung  <luxtella@company100.net>

        [TexMap] Rename current[Transform|Opacity|Filters] in TextureMapperLayer.
        https://bugs.webkit.org/show_bug.cgi?id=105760

        Reviewed by Noam Rosenthal.

        TextureMapperLayerClientQt uses setTransform() and setOpacity() in
        GraphicsLayer instead of TextureMapperLayer like LayerTreeRenderer.
        This removes unnecessary public API for TextureMapperLayer.

        * WebCoreSupport/TextureMapperLayerClientQt.cpp:
        (TextureMapperLayerClientQt::renderCompositedLayers):

2013-01-11  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt][WK1] Web Audio support
        https://bugs.webkit.org/show_bug.cgi?id=106651

        Reviewed by Jocelyn Turcotte.

        Expose setting to enable WebAudio at runtime.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):
        (QWebSettings::QWebSettings):
        * Api/qwebsettings.h:

2013-01-08  Mark Lam  <mark.lam@apple.com>

        Removed the need for the ProposedDatabase mechanism.
        https://bugs.webkit.org/show_bug.cgi?id=106292.

        Reviewed by Sam Weinig.

        * WebCoreSupport/ChromeClientQt.cpp:
        * WebCoreSupport/ChromeClientQt.h:
        (ChromeClientQt):

2013-01-07  Mike West  <mkwst@chromium.org>

        [qt] Fix ENABLE_IFRAME_SEAMLESS=0 builds.
        https://bugs.webkit.org/show_bug.cgi?id=106252

        Reviewed by Eric Seidel.

        Wrap the call to setSeamlessIFramesEnabled in an ifdef in order
        to ensure that it's only called when IFRAME_SEAMLESS is enabled.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setSeamlessIFramesEnabled):

2013-01-07  Mike West  <mkwst@chromium.org>

        Make the IFRAME_SEAMLESS flag runtime-enabled.
        https://bugs.webkit.org/show_bug.cgi?id=106213

        Reviewed by Ojan Vafai.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setSeamlessIFramesEnabled):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
            Add a toggle for seamless IFrames to QT's DRTSuport.

2013-01-07  Michael Brüning  <michael.bruning@digia.com>

        [Qt] Apply correct patch for the scrolling issue from bug 105014
        https://bugs.webkit.org/show_bug.cgi?id=106219

        Correct the if condition when overwriting the layout direction option
        with the values from the facade options to only overwrite if the facade
        direction is not equal to LayoutDirectionAuto.

        Reviewed by Allan Sandfeld Jensen.

        * WidgetSupport/QStyleFacadeImp.cpp:
        (WebKit::initGenericStyleOption):

2013-01-07  Michael Brüning  <michael.bruning@digia.com>

        [Qt] Horizontal scrollbars events are offseted making them difficult to use
        https://bugs.webkit.org/show_bug.cgi?id=105014

        Reviewed by Allan Sandfeld Jensen.

        Patch co-authored by Simon Hausmann.

        Only copy the layout direction from the facade options if the
        current option is Qt::LayoutDirectionAuto in order to prevent
        misinterpretations as different layout direction when hit testing.

        Tests added to tst_qwebview and tst_qgraphicswebview to verify
        that the view actually is scrolled in the right direction.

        * WidgetSupport/QStyleFacadeImp.cpp:
        (WebKit::initGenericStyleOption):
        * tests/qgraphicswebview/resources/scrolltest_page.html: Added.
        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView):
        (tst_QGraphicsWebView::horizontalScrollbarTest):
        * tests/qgraphicswebview/tst_qgraphicswebview.qrc:
        * tests/qwebview/resources/scrolltest_page.html: Added.
        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView):
        (tst_QWebView::horizontalScrollbarTest):
        * tests/qwebview/tst_qwebview.qrc:

2012-12-23  Alexey Proskuryakov  <ap@apple.com>

        <rdar://problem/12808377> Network process should respect cookie accept policy
        https://bugs.webkit.org/show_bug.cgi?id=105684

        Reviewed by Sam Weinig.

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        * WebCoreSupport/PlatformStrategiesQt.h:
        CookiesStrategy no longer has notifyCookiesChanged(). This port didn't use it anyway.

2012-12-22  Alexey Proskuryakov  <ap@apple.com>

        Add a separate class for networking related storage
        https://bugs.webkit.org/show_bug.cgi?id=105676

        Reviewed by Sam Weinig.

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::cookiesForDOM):
        (PlatformStrategiesQt::setCookiesFromDOM):
        (PlatformStrategiesQt::cookiesEnabled):
        (PlatformStrategiesQt::cookieRequestHeaderFieldValue):
        (PlatformStrategiesQt::getRawCookies):
        (PlatformStrategiesQt::deleteCookie):
        * WebCoreSupport/PlatformStrategiesQt.h:
        Cookie functions now take a NetworkStorageSession, not a NetworkingContext.

        * WebCoreSupport/QWebFrameAdapter.cpp:
        * WebCoreSupport/QWebPageAdapter.cpp:
        Updated for ResourceHandle include changes.

2012-12-18  Alexey Proskuryakov  <ap@apple.com>

        Remove unnecessary functions from CookiesStrategy
        https://bugs.webkit.org/show_bug.cgi?id=105369

        Reviewed by Brady Eidson.

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        * WebCoreSupport/PlatformStrategiesQt.h:

2012-12-17  Oswald Buddenhagen  <oswald.buddenhagen@digia.com>

        [Qt] remove some unnecessary CONFIG additions

        Reviewed by Simon Hausmann.

        qt is already added by spec_pre.prf, warn_on and depend_includepath by
        default_pre.prf.

        * declarative/experimental/experimental.pri:
        * declarative/public.pri:

2012-12-15  Anders Carlsson  <andersca@apple.com>

        Rename FrameLoaderClient::download to convertMainResourceLoadToDownload
        https://bugs.webkit.org/show_bug.cgi?id=105122

        Reviewed by Andreas Kling.

        Update for WebCore changes.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::convertMainResourceLoadToDownload):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (FrameLoaderClientQt):

2012-12-15  Mark Lam  <mark.lam@apple.com>

        Re-landing patch for "Introducing the DatabaseStrategy and database servers".
        https://bugs.webkit.org/show_bug.cgi?id=104934.

        Not reviewed.

        Merged from r137767. Previously reviewed by Sam Weinig.

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::createDatabaseStrategy):
        * WebCoreSupport/PlatformStrategiesQt.h:
        (PlatformStrategiesQt):

2012-12-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r137767.
        http://trac.webkit.org/changeset/137767
        https://bugs.webkit.org/show_bug.cgi?id=105062

        Broke Mac builds. (Requested by mlam on #webkit).

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        * WebCoreSupport/PlatformStrategiesQt.h:
        (PlatformStrategiesQt):

2012-12-14  Mark Lam  <mark.lam@apple.com>

        Introducing the DatabaseStrategy and database servers.
        https://bugs.webkit.org/show_bug.cgi?id=104934.

        Reviewed by Sam Weinig.

        The database server is currently a placeholder that does nothing.

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::createDatabaseStrategy):
        * WebCoreSupport/PlatformStrategiesQt.h:
        (PlatformStrategiesQt):

2012-12-13  Jerome Pasion  <jerome.pasion@digia.com>

        [Qt] Doc: Fixing Qt WebKit reference documentation.

        Reviewed by Simon Hausmann.

        Fixes:
        -added \module for C++ classes and \qmlmodule for QML types
        -added links to the Qt WebKit Examples pages
        -fixed the qhp settings for Qt Creator

        Task-number: QTBUG-28583
        Task-number: QTBUG-28418
        Task-number: QTBUG-27646

        * docs/qtwebkit.qdoc:

2012-12-12  Mark Lam  <mark.lam@apple.com>

        Encapsulate externally used webdatabase APIs in DatabaseManager.
        https://bugs.webkit.org/show_bug.cgi?id=104741.

        Reviewed by Sam Weinig.

        Use DatabaseManager instead of accessing DatabaseTracker, AbstractDatabase,
        and DatabaseContext directly. This is to prepare for upcoming webkit2
        refactoring.

        * Api/qwebdatabase.cpp:
        (QWebDatabase::displayName):
        (QWebDatabase::expectedSize):
        (QWebDatabase::size):
        (QWebDatabase::fileName):
        (QWebDatabase::removeDatabase):
        (QWebDatabase::removeAllDatabases):
        * Api/qwebsecurityorigin.cpp:
        (QWebSecurityOrigin::databaseUsage):
        (QWebSecurityOrigin::databaseQuota):
        (QWebSecurityOrigin::setDatabaseQuota):
        (QWebSecurityOrigin::allOrigins):
        (QWebSecurityOrigin::databases):
        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):
        (QWebSettings::setOfflineStoragePath):
        (QWebSettings::offlineStoragePath):
        * WebCoreSupport/ChromeClientQt.cpp:

2012-12-12  Alexey Proskuryakov  <ap@apple.com>

        Make LOG() work in WebProcess and NetworkProcess
        https://bugs.webkit.org/show_bug.cgi?id=104718

        Reviewed by Tim Horton.

        * WebCoreSupport/InitWebCoreQt.cpp: Include InitializeLogging.h

2012-12-11  Mike West  <mkwst@chromium.org>

        Web Inspector: ConsoleTypes should not expose MessageType - it should be private to inspector.
        https://bugs.webkit.org/show_bug.cgi?id=66371

        Reviewed by Pavel Feldman.

        Drops WebCore::MessageType from the addMessageToConsole method.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::addMessageToConsole):
        * WebCoreSupport/ChromeClientQt.h:
        (ChromeClientQt):

2012-12-11  Stephen Kelly  <stephen.kelly@kdab.com>

        WebKit tests for the Qt API should include tests of CMake config files
        https://bugs.webkit.org/show_bug.cgi?id=104003

        Reviewed by Simon Hausmann.

        The Qt WebKit CI system is not going to run this test, but it can
        be run locally and to test packages.

        * tests/cmake/CMakeLists.txt: Added.
        * tests/cmake/cmake.pro: Added.

2012-12-10  Andy Shaw  <andy.shaw@digia.com>
        
        Check that plugin functionality is enabled before querying the database for installed plugins.
        https://bugs.webkit.org/show_bug.cgi?id=73671

        Reviewed by Jocelyn Turcotte.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::objectContentType):

2012-12-07  Sergio Martins  <sergio.martins@kdab.com>

        [Qt][Qnx] Fix QNX build by adding missing include.
        https://bugs.webkit.org/show_bug.cgi?id=104359

        Reviewed by Jocelyn Turcotte.

        It's where WEBKIT_EXPORTDATA is defined, so include it. Not sure why other
        platforms aren't failing.

        * WebCoreSupport/QWebPageAdapter.h:

2012-12-06  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] QWebView uses the mobile style and doesn't follow Qt's style
        https://bugs.webkit.org/show_bug.cgi?id=104134

        Reviewed by Simon Hausmann.

        Another issue introduced by r136235.
        Fix the order of initialization of the styleFactory and creation of the
        WebCore Page. Since the latter has a RenderTheme member and the creation
        of the appropriate RenderTheme type (QStyle-backed) is dependant on having
        first initialized the theme factory function, we need to postpone this just
        a little bit.

        * WebCoreSupport/QWebPageAdapter.cpp:
        (QWebPageAdapter::QWebPageAdapter):
        (QWebPageAdapter::initializeWebCorePage): Added.
        * WebCoreSupport/QWebPageAdapter.h:
        * WidgetApi/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate): call initializeWebCorePage only after 
        having initialized WebKitWidgets related logic (QStyle hooks in this case).

2012-12-05  Zeno Albisser  <zeno@webkit.org>

        [Qt][Mac] QWebView disappears when the system tries to hide the scrollbars.
        https://bugs.webkit.org/show_bug.cgi?id=104116

        This is a workaround for an issue in Qt that was
        caused by Change-Id: I2000fa50d46b153e981ceafc12a53932a196382e
        in qtbase.
        Since we are drawing the scrollbars by ourselves, there is no
        widget available that needs to be hidden by the style.
        Therefore we have to disable transient scrollbar
        animations on Mac.

        Patch by: J-P Nurmi <jpnurmi@digia.com>

        Reviewed by Simon Hausmann.

        * WidgetSupport/QStyleFacadeImp.cpp:
        (WebKit::QStyleFacadeImp::paintScrollBar):

2012-12-04  Pierre Rossi  <pierre.rossi@digia.com>

        [Qt] Yet another unreviewed speculative windows build fix. 

        WebKit2 relies on the QWEBKIT_EXPORT macro from WebKit1 as well.

        * Api/qwebkitglobal.h:

2012-12-03  Pierre Rossi  <pierre.rossi@digia.com>

        [Qt] Unreviewed speculative Windows buildfix.

        Somehow it seems messing around with the export macros made some old issues resurface. 

        * Api/qwebsettings.cpp:
        (qt_networkAccessAllowed):
        * Api/qwebsettings.h:
        * Api/qwebkitglobal.h: fix an obvious blunder from r136394.

2012-12-03  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        Document::initSecurityContext() fails to call securityOrigin().grantLoadLocalResources()
        https://bugs.webkit.org/show_bug.cgi?id=68711

        Reviewed by Adam Barth.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::testStopScheduledPageRefresh): Unmark the expected failure.

2012-12-03  Pierre Rossi  <pierre.rossi@digia.com>

        [Qt] Use a separate QWEBKITWIDGETS_EXPORT macro for WebKitWidgets
        https://bugs.webkit.org/show_bug.cgi?id=103844

        Reviewed by Simon Hausmann.

        Let's follow the common practice and have one export macro per library.
        We can't rely on BUILDING_WEBKIT anymore in that case, so we use the
        qmake defines instead.

        * Api/qwebkitglobal.h: Updated the import/export logic.
        * WidgetApi/qgraphicswebview.h: s/QWEBKIT/QWEBKITWIDGETS/
        * WidgetApi/qwebframe.h: Ditto.
        * WidgetApi/qwebinspector.h: Ditto.
        * WidgetApi/qwebpage.h: Ditto.
        * WidgetApi/qwebview.h: Ditto.
        * WidgetSupport/InitWebKitQt.cpp:
        (WebKit::initializeWebKitWidgets): use QWEBKITWIDGETS_EXPORT.
        * WidgetSupport/InitWebKitQt.h:
        (WebKit): Ditto.

2012-11-30  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Introduce setTextSizeMultiplier in the page adapter as well.

        Rubber-stamped by Simon Hausmann.

        As it turns out it the bots didn't like the previous attempt.

        * WebCoreSupport/QWebFrameAdapter.cpp:
        (QWebFrameAdapter::setTextSizeMultiplier):
        * WebCoreSupport/QWebFrameAdapter.h:
        * WidgetApi/qwebframe.cpp:
        (QWebFrame::setTextSizeMultiplier):

2012-11-30  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Unreviewed build fix.

        In the same vein as r136245. Include PlatformExportMacros proper.

        * WebCoreSupport/QtPrintContext.h:

2012-11-30  Simon Hausmann  <simon.hausmann@digia.com>

        Unreviewed prospective MIPS build fix:

        Explicitly include PlatformExportMacros for the correct export macro to be find.
        Not really MIPS specific but rather to a minimal build configuration with less implicit
        includes.

        * WebCoreSupport/UndoStepQt.h:

2012-11-30  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Unreviewed build un-break

        Revert r136243 and hope it served its purpose.

        * WidgetApi/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):

2012-11-30  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Unreviewed build break

        Rubber-stamped by Simon Hausmann.

        Poor man's way to trigger a clean build on a bot.

        * WidgetApi/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):

2012-11-30  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Fix QML import installation with newer Qt

        Reviewed by Tor Arne Vestbø.

        The import path has been separated between QML1 and QML2. Use
        QT_INSTALL_QML if it's available.

        * declarative/experimental/experimental.pri:
        * declarative/public.pri:

2012-11-30  Simon Hausmann  <simon.hausmann@digia.com>

        Prospective build fix for --minimal build.

        * WebCoreSupport/QWebPageAdapter.cpp:
        (QWebPageAdapter::triggerAction):
        (QWebPageAdapter::contextMenuItemTagForAction):

2012-11-30  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Fix zoomIn/zoomOut related regression.

        Reviewed by Simon Hausmann.

        Following r136235, fix a case of refactoring gone wrong.
        Implementing setTextSizeMultiplier in terms of
        setZoomFactor, and not the other way around.

        * WebCoreSupport/QWebFrameAdapter.cpp:
        (QWebFrameAdapter::setZoomFactor):
        * WidgetApi/qwebframe.cpp:
        (QWebFrame::setTextSizeMultiplier):

2012-11-30  Simon Hausmann  <simon.hausmann@digia.com>, Pierre Rossi  <pierre.rossi@digia.com>

        [Qt] Separate Qt WebKit into Qt WebKit and Qt WebKit Widgets
        https://bugs.webkit.org/show_bug.cgi?id=99314

        Reviewed by Tor Arne Vestbø.

        This big change separates QtWebKit into QtWebKit and QtWebKitWidgets as
        shared libraries.

        It's a big refactoring that mostly involves moving WebCore dependent
        code into QtWebKit and accessing it through exported QWebFrameAdapter
        and QWebPageAdapter classes.

        The QtWebKit version macros are now generated by syncqt and the version
        query functions have moved to qwebkitglobal.h, similar to qVersion() in
        qglobal.h.

        API wise qwebframe sees some small cleanups.

        * Api/qwebelement.h:
        * Api/qwebframe_p.h: Removed.
        * Api/qwebhistory.h:
        * Api/qwebkitglobal.cpp: Renamed from Source/WebKit/qt/Api/qwebkitversion.cpp.
        (qWebKitVersion):
        (qWebKitMajorVersion):
        (qWebKitMinorVersion):
        * Api/qwebkitglobal.h:
        * Api/qwebkitversion.h: Removed.
        * Api/qwebsecurityorigin.h:
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::allowsAcceleratedCompositing):
        * WebCoreSupport/ChromeClientQt.h:
        (WebCore):
        (ChromeClientQt):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::frameRenderTreeDump):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebKit):
        (WebKit::setWebKitWidgetsInitCallback):
        (WebKit::createStyleForPage):
        (WebKit::initializeWebKitQt):
        * WebCoreSupport/InitWebCoreQt.h:
        (WebKit):
        * WebCoreSupport/InspectorServerQt.cpp:
        * WebCoreSupport/QWebFrameAdapter.cpp:
        (QWebFrameAdapter::QWebFrameAdapter):
        (QWebFrameAdapter::hasView):
        (QWebFrameAdapter::handleGestureEvent):
        (QWebFrameAdapter::evaluateJavaScript):
        (QWebFrameAdapter::addToJavaScriptWindowObject):
        (QWebFrameAdapter::toHtml):
        (QWebFrameAdapter::toPlainText):
        (QWebFrameAdapter::setContent):
        (QWebFrameAdapter::setHtml):
        (QWebFrameAdapter::metaData):
        (QWebFrameAdapter::scrollPosition):
        (QWebFrameAdapter::frameRect):
        (QWebFrameAdapter::contentsSize):
        (QWebFrameAdapter::setZoomFactor):
        (QWebFrameAdapter::zoomFactor):
        (QWebFrameAdapter::ensureAbsoluteUrl):
        (QWebFrameAdapter::hitTestContent):
        (QWebFrameAdapter::documentElement):
        (QWebFrameAdapter::title):
        (QWebFrameAdapter::clearCoreFrame):
        (isCoreFrameClear):
        (QWebFrameAdapter::baseUrl):
        (QWebFrameAdapter::renderCompositedLayers):
        (QWebFrameAdapter::coreFrameUrl):
        (QWebFrameAdapter::lastRequestedUrl):
        (QWebFrameAdapter::securityOrigin):
        (QWebFrameAdapter::uniqueName):
        (coalesceRectsIfPossible):
        (QWebFrameAdapter::renderRelativeCoords):
        (QWebFrameAdapter::renderFrameExtras):
        (QWebFrameAdapter::setTiledBackingStoreFrozen):
        (QWebFrameAdapter::tiledBackingStoreFrozen):
        (QWebFrameAdapter::setTiledBackingStoreContentsScale):
        (QWebFrameAdapter::renderFromTiledBackingStore):
        (QWebFrameAdapter::_q_orientationChanged):
        (QWebFrameAdapter::childFrames):
        (QWebFrameAdapter::hasFocus):
        (QWebFrameAdapter::setFocus):
        (QWebFrameAdapter::setScrollBarPolicy):
        (QWebFrameAdapter::scrollToAnchor):
        (QWebFrameAdapter::scrollBy):
        (QWebFrameAdapter::setScrollBarValue):
        (QWebFrameAdapter::scrollBarValue):
        (QWebFrameAdapter::scrollBarMaximum):
        (QWebFrameAdapter::scrollBarGeometry):
        (QWebFrameAdapter::horizontalScrollBar):
        (QWebFrameAdapter::verticalScrollBar):
        (QWebFrameAdapter::updateBackgroundRecursively):
        (QWebFrameAdapter::cancelLoad):
        (QWebHitTestResultPrivate::QWebHitTestResultPrivate):
        (QWebHitTestResultPrivate::operator=):
        (QWebHitTestResultPrivate::~QWebHitTestResultPrivate):
        (QWebHitTestResultPrivate::elementForInnerNode):
        (QWebFrameAdapter::customLayoutSize):
        (QWebFrameAdapter::setCustomLayoutSize):
        (QWebFrameAdapter::setFixedVisibleContentRect):
        (QWebFrameAdapter::setViewportSize):
        (QWebFrameAdapter::setPaintsEntireContents):
        (QWebFrameAdapter::setDelegatesScrolling):
        * WebCoreSupport/QWebFrameAdapter.h:
        (WebCore):
        * WebCoreSupport/QWebPageAdapter.cpp:
        (dropActionToDragOp):
        (dragOpToDropAction):
        (frameLoadRequest):
        (openNewWindow):
        (QWebPageAdapter::QWebPageAdapter):
        (QWebPageAdapter::~QWebPageAdapter):
        (QWebPageAdapter::deletePage):
        (QWebPageAdapter::viewportArguments):
        (QWebPageAdapter::hasSelection):
        (QWebPageAdapter::selectedText):
        (QWebPageAdapter::selectedHtml):
        (QWebPageAdapter::isContentEditable):
        (QWebPageAdapter::setContentEditable):
        (QWebPageAdapter::findText):
        (QWebPageAdapter::adjustPointForClicking):
        (hasMouseListener):
        (isClickableElement):
        (isValidFrameOwner):
        (QWebPageAdapter::TouchAdjuster::TouchAdjuster):
        (QWebPageAdapter::TouchAdjuster::findCandidatePointForTouch):
        (QWebPageAdapter::mouseMoveEvent):
        (QWebPageAdapter::mousePressEvent):
        (QWebPageAdapter::mouseDoubleClickEvent):
        (QWebPageAdapter::mouseTripleClickEvent):
        (QWebPageAdapter::mouseReleaseEvent):
        (QWebPageAdapter::handleSoftwareInputPanel):
        (QWebPageAdapter::wheelEvent):
        (QWebPageAdapter::dragEntered):
        (QWebPageAdapter::dragLeaveEvent):
        (QWebPageAdapter::dragUpdated):
        (QWebPageAdapter::performDrag):
        (QWebPageAdapter::inputMethodEvent):
        (QWebPageAdapter::inputMethodQuery):
        (QWebPageAdapter::dynamicPropertyChangeEvent):
        (adapterActionForContextMenuAction):
        (descriptionForPlatformMenu):
        (QWebPageAdapter::updatePositionDependentMenuActions):
        (extractContentTypeFromHash):
        (extractContentTypeFromPluginVector):
        (QWebPageAdapter::supportedContentTypes):
        (QWebPageAdapter::_q_cleanupLeakMessages):
        (QWebPageAdapter::_q_onLoadProgressChanged):
        (QWebPageAdapter::supportsContentType):
        (QWebPageAdapter::didShowInspector):
        (QWebPageAdapter::didCloseInspector):
        (QWebPageAdapter::updateActionInternal):
        (QWebPageAdapter::triggerAction):
        (QWebPageAdapter::contextMenuItemTagForAction):
        (QWebPageAdapter::allowNotificationsForFrame):
        (QWebPageAdapter::addNotificationPresenterClient):
        (QWebPageAdapter::hasSystemTrayIcon):
        (QWebPageAdapter::setSystemTrayIcon):
        (QWebPageAdapter::setGeolocationEnabledForFrame):
        (QWebPageAdapter::defaultUserAgentString):
        (QWebPageAdapter::treatSchemeAsLocal):
        (QWebPageAdapter::currentFrame):
        (QWebPageAdapter::hasFocusedNode):
        (QWebPageAdapter::viewportAttributesForSize):
        (QWebPageAdapter::handleKeyEvent):
        (QWebPageAdapter::handleScrolling):
        (QWebPageAdapter::focusInEvent):
        (QWebPageAdapter::focusOutEvent):
        (QWebPageAdapter::handleShortcutOverrideEvent):
        (QWebPageAdapter::touchEvent):
        (QWebPageAdapter::swallowContextMenuEvent):
        * WebCoreSupport/QWebPageAdapter.h:
        (WebCore):
        * WebCoreSupport/QtPluginWidgetAdapter.cpp: Copied from Source/WebKit/qt/WebCoreSupport/InitWebKitQt.h.
        (QtPluginWidgetAdapter::QtPluginWidgetAdapter):
        * WebCoreSupport/QtPluginWidgetAdapter.h:
        * WebCoreSupport/QtPrintContext.cpp: Added.
        (QtPrintContext::QtPrintContext):
        (QtPrintContext::~QtPrintContext):
        (QtPrintContext::pageCount):
        (QtPrintContext::spoolPage):
        * WebCoreSupport/QtPrintContext.h: Renamed from Source/WebCore/platform/qt/QStyleFacade.cpp.
        (WebCore):
        * WebCoreSupport/TextureMapperLayerClientQt.cpp: Added.
        (TextureMapperLayerClientQt::TextureMapperLayerClientQt):
        (TextureMapperLayerClientQt::~TextureMapperLayerClientQt):
        (TextureMapperLayerClientQt::syncRootLayer):
        (TextureMapperLayerClientQt::markForSync):
        (TextureMapperLayerClientQt::rootLayer):
        (TextureMapperLayerClientQt::setRootGraphicsLayer):
        (TextureMapperLayerClientQt::syncLayers):
        (TextureMapperLayerClientQt::renderCompositedLayers):
        * WebCoreSupport/TextureMapperLayerClientQt.h: Added.
        (WebCore):
        (TextureMapperLayerClientQt):
        * WebCoreSupport/UndoStepQt.h:
        * WidgetApi/qgraphicswebview.cpp: Renamed from Source/WebKit/qt/Api/qgraphicswebview.cpp.
        (QGraphicsWebViewPrivate):
        (QGraphicsWebViewPrivate::QGraphicsWebViewPrivate):
        (QGraphicsWebViewPrivate::overlay):
        (QGraphicsWebViewPrivate::pageClient):
        (QGraphicsWebViewPrivate::~QGraphicsWebViewPrivate):
        (QGraphicsWebViewPrivate::_q_doLoadFinished):
        (QGraphicsWebViewPrivate::_q_pageDestroyed):
        (QGraphicsWebViewPrivate::updateResizesToContentsForPage):
        (QGraphicsWebViewPrivate::_q_contentsSizeChanged):
        (QGraphicsWebViewPrivate::_q_scaleChanged):
        (QGraphicsWebView::QGraphicsWebView):
        (QGraphicsWebView::~QGraphicsWebView):
        (QGraphicsWebView::page):
        (QGraphicsWebView::paint):
        (QGraphicsWebView::sceneEvent):
        (QGraphicsWebView::itemChange):
        (QGraphicsWebView::sizeHint):
        (QGraphicsWebView::inputMethodQuery):
        (QGraphicsWebView::renderHints):
        (QGraphicsWebView::setRenderHints):
        (QGraphicsWebView::setRenderHint):
        (QGraphicsWebView::event):
        (QGraphicsWebViewPrivate::detachCurrentPage):
        (QGraphicsWebView::setPage):
        (QGraphicsWebView::setUrl):
        (QGraphicsWebView::url):
        (QGraphicsWebView::title):
        (QGraphicsWebView::icon):
        (QGraphicsWebView::setZoomFactor):
        (QGraphicsWebView::zoomFactor):
        (QGraphicsWebView::updateGeometry):
        (QGraphicsWebView::setGeometry):
        (QGraphicsWebView::stop):
        (QGraphicsWebView::back):
        (QGraphicsWebView::forward):
        (QGraphicsWebView::reload):
        (QGraphicsWebView::load):
        (QGraphicsWebView::setHtml):
        (QGraphicsWebView::setContent):
        (QGraphicsWebView::history):
        (QGraphicsWebView::isModified):
        (QGraphicsWebView::settings):
        (QGraphicsWebView::pageAction):
        (QGraphicsWebView::triggerPageAction):
        (QGraphicsWebView::findText):
        (QGraphicsWebView::setResizesToContents):
        (QGraphicsWebView::resizesToContents):
        (QGraphicsWebView::isTiledBackingStoreFrozen):
        (QGraphicsWebView::setTiledBackingStoreFrozen):
        (QGraphicsWebView::hoverMoveEvent):
        (QGraphicsWebView::hoverLeaveEvent):
        (QGraphicsWebView::mouseMoveEvent):
        (QGraphicsWebView::mousePressEvent):
        (QGraphicsWebView::mouseReleaseEvent):
        (QGraphicsWebView::mouseDoubleClickEvent):
        (QGraphicsWebView::keyPressEvent):
        (QGraphicsWebView::keyReleaseEvent):
        (QGraphicsWebView::focusInEvent):
        (QGraphicsWebView::focusOutEvent):
        (QGraphicsWebView::focusNextPrevChild):
        (QGraphicsWebView::dragEnterEvent):
        (QGraphicsWebView::dragLeaveEvent):
        (QGraphicsWebView::dragMoveEvent):
        (QGraphicsWebView::dropEvent):
        (QGraphicsWebView::contextMenuEvent):
        (QGraphicsWebView::wheelEvent):
        (QGraphicsWebView::inputMethodEvent):
        * WidgetApi/qgraphicswebview.h: Renamed from Source/WebKit/qt/Api/qgraphicswebview.h.
        * WidgetApi/qwebframe.cpp: Renamed from Source/WebKit/qt/Api/qwebframe.cpp.
        (QWebFramePrivate::setPage):
        (QWebFramePrivate::emitUrlChanged):
        (QWebFramePrivate::didStartProvisionalLoad):
        (QWebFramePrivate::didClearWindowObject):
        (QWebFramePrivate::handleProgressFinished):
        (QWebFramePrivate::emitInitialLayoutCompleted):
        (QWebFramePrivate::emitIconChanged):
        (QWebFramePrivate::emitLoadStarted):
        (QWebFramePrivate::emitLoadFinished):
        (QWebFramePrivate::createChildFrame):
        (QWebFramePrivate::apiHandle):
        (QWebFramePrivate::handle):
        (QWebFramePrivate::contentsSizeDidChange):
        (QWebFramePrivate::scrollBarPolicy):
        (QWebFrame::QWebFrame):
        (QWebFrame::~QWebFrame):
        (QWebFrame::addToJavaScriptWindowObject):
        (QWebFrame::toHtml):
        (QWebFrame::toPlainText):
        (QWebFrame::title):
        (QWebFrame::metaData):
        (QWebFrame::setUrl):
        (QWebFrame::url):
        (QWebFrame::requestedUrl):
        (QWebFrame::baseUrl):
        (QWebFrame::icon):
        (QWebFrame::frameName):
        (QWebFrame::page):
        (QWebFrame::load):
        (QWebFrame::setHtml):
        (QWebFrame::setContent):
        (QWebFrame::parentFrame):
        (QWebFrame::childFrames):
        (QWebFrame::scrollBarPolicy):
        (QWebFrame::setScrollBarPolicy):
        (QWebFrame::setScrollBarValue):
        (QWebFrame::scrollBarValue):
        (QWebFrame::scrollBarMaximum):
        (QWebFrame::scrollBarMinimum):
        (QWebFrame::scrollBarGeometry):
        (QWebFrame::scroll):
        (QWebFrame::scrollPosition):
        (QWebFrame::setScrollPosition):
        (QWebFrame::scrollToAnchor):
        (QWebFrame::render):
        (QWebFrame::setTextSizeMultiplier):
        (QWebFrame::textSizeMultiplier):
        (QWebFrame::setZoomFactor):
        (QWebFrame::zoomFactor):
        (QWebFrame::hasFocus):
        (QWebFrame::setFocus):
        (QWebFrame::pos):
        (QWebFrame::geometry):
        (QWebFrame::contentsSize):
        (QWebFrame::documentElement):
        (QWebFrame::findAllElements):
        (QWebFrame::findFirstElement):
        (QWebFrame::hitTestContent):
        (QWebFrame::event):
        (QWebFrame::print):
        (QWebFrame::evaluateJavaScript):
        (QWebFrame::securityOrigin):
        (QWebFramePrivate::kit):
        (QWebHitTestResult::QWebHitTestResult):
        (QWebHitTestResult::operator=):
        (QWebHitTestResult::~QWebHitTestResult):
        (QWebHitTestResult::isNull):
        (QWebHitTestResult::pos):
        (QWebHitTestResult::boundingRect):
        (QWebHitTestResult::enclosingBlockElement):
        (QWebHitTestResult::title):
        (QWebHitTestResult::linkText):
        (QWebHitTestResult::linkUrl):
        (QWebHitTestResult::linkTitle):
        (QWebHitTestResult::linkElement):
        (QWebHitTestResult::linkTargetFrame):
        (QWebHitTestResult::alternateText):
        (QWebHitTestResult::imageUrl):
        (QWebHitTestResult::pixmap):
        (QWebHitTestResult::isContentEditable):
        (QWebHitTestResult::isContentSelected):
        (QWebHitTestResult::element):
        (QWebHitTestResult::frame):
        (QWebFrame::handle):
        * WidgetApi/qwebframe.h: Renamed from Source/WebKit/qt/Api/qwebframe.h.
        (WebCore):
        * WidgetApi/qwebframe_p.h: Added.
        (WebCore):
        (QWebFramePrivate):
        (QWebFramePrivate::QWebFramePrivate):
        (QWebFramePrivate::parentFrame):
        * WidgetApi/qwebinspector.cpp: Renamed from Source/WebKit/qt/Api/qwebinspector.cpp.
        (QWebInspector::QWebInspector):
        (QWebInspector::~QWebInspector):
        (QWebInspector::setPage):
        (QWebInspector::page):
        (QWebInspector::sizeHint):
        (QWebInspector::event):
        (QWebInspector::resizeEvent):
        (QWebInspector::showEvent):
        (QWebInspector::hideEvent):
        (QWebInspector::closeEvent):
        (QWebInspectorPrivate::setFrontend):
        (QWebInspectorPrivate::adjustFrontendSize):
        * WidgetApi/qwebinspector.h: Renamed from Source/WebKit/qt/Api/qwebinspector.h.
        * WidgetApi/qwebinspector_p.h: Renamed from Source/WebKit/qt/Api/qwebinspector_p.h.
        (QWebInspectorPrivate):
        (QWebInspectorPrivate::QWebInspectorPrivate):
        * WidgetApi/qwebpage.cpp: Renamed from Source/WebKit/qt/Api/qwebpage.cpp.
        (QWebPagePrivate::QWebPagePrivate):
        (QWebPagePrivate::~QWebPagePrivate):
        (QWebPagePrivate::show):
        (QWebPagePrivate::setFocus):
        (QWebPagePrivate::unfocus):
        (QWebPagePrivate::setWindowRect):
        (QWebPagePrivate::viewportSize):
        (QWebPagePrivate::createWindow):
        (QWebPagePrivate::javaScriptConsoleMessage):
        (QWebPagePrivate::javaScriptAlert):
        (QWebPagePrivate::javaScriptConfirm):
        (QWebPagePrivate::javaScriptPrompt):
        (QWebPagePrivate::shouldInterruptJavaScript):
        (QWebPagePrivate::printRequested):
        (QWebPagePrivate::databaseQuotaExceeded):
        (QWebPagePrivate::applicationCacheQuotaExceeded):
        (QWebPagePrivate::setToolTip):
        (QWebPagePrivate::createFullScreenVideoHandler):
        (QWebPagePrivate::mainFrameAdapter):
        (QWebPagePrivate::chooseFiles):
        (QWebPagePrivate::acceptNavigationRequest):
        (QWebPagePrivate::emitRestoreFrameStateRequested):
        (QWebPagePrivate::emitSaveFrameStateRequested):
        (QWebPagePrivate::emitDownloadRequested):
        (QWebPagePrivate::emitFrameCreated):
        (QWebPagePrivate::errorPageExtension):
        (QWebPagePrivate::createPlugin):
        (QWebPagePrivate::adapterForWidget):
        (QWebPagePrivate::createMainFrame):
        (webActionForAdapterMenuAction):
        (adapterMenuActionForWebAction):
        (createContextMenu):
        (QWebPagePrivate::createAndSetCurrentContextMenu):
        (QWebPagePrivate::_q_webActionTriggered):
        (QWebPagePrivate::updateAction):
        (QWebPagePrivate::updateNavigationActions):
        (QWebPagePrivate::inspectorHandle):
        (QWebPagePrivate::setInspectorFrontend):
        (QWebPagePrivate::setInspectorWindowTitle):
        (QWebPagePrivate::createWebInspector):
        (iterateContextMenu):
        (QWebPagePrivate::menuActionsAsText):
        (QWebPagePrivate::emitViewportChangeRequested):
        (QWebPagePrivate::updateEditorActions):
        (QWebPagePrivate::timerEvent):
        (QWebPagePrivate::requestSoftwareInputPanel):
        (QWebPagePrivate::contextMenuEvent):
        (QWebPage::createStandardContextMenu):
        (QWebPagePrivate::editorActionForKeyEvent):
        (QWebPagePrivate::keyPressEvent):
        (QWebPagePrivate::keyReleaseEvent):
        (QWebPagePrivate::dragEnterEvent):
        (QWebPagePrivate::dragMoveEvent):
        (QWebPagePrivate::dropEvent):
        (QWebPagePrivate::leaveEvent):
        (QWebPage::setPalette):
        (QWebPage::palette):
        (QWebPagePrivate::shortcutOverrideEvent):
        (QWebPagePrivate::gestureEvent):
        (QWebPage::inputMethodQuery):
        (QWebPagePrivate::setInspector):
        (QWebPagePrivate::getOrCreateInspector):
        (QWebPage::ViewportAttributes::ViewportAttributes):
        (QWebPage::ViewportAttributes::~ViewportAttributes):
        (QWebPage::ViewportAttributes::operator=):
        (QWebPage::QWebPage):
        (QWebPage::~QWebPage):
        (QWebPage::mainFrame):
        (QWebPage::currentFrame):
        (QWebPage::frameAt):
        (QWebPage::history):
        (QWebPage::setView):
        (QWebPage::view):
        (QWebPage::javaScriptConsoleMessage):
        (QWebPage::javaScriptAlert):
        (QWebPage::javaScriptConfirm):
        (QWebPage::javaScriptPrompt):
        (QWebPage::shouldInterruptJavaScript):
        (QWebPage::setFeaturePermission):
        (QWebPage::createWindow):
        (QWebPage::createPlugin):
        (QWebPage::supportedContentTypes):
        (QWebPage::supportsContentType):
        (collectChildFrames):
        (QWebPage::triggerAction):
        (QWebPagePrivate::colorSelectionRequested):
        (QWebPagePrivate::createSelectPopup):
        (QWebPagePrivate::viewRectRelativeToWindow):
        (QWebPagePrivate::geolocationPermissionRequested):
        (QWebPagePrivate::geolocationPermissionRequestCancelled):
        (QWebPagePrivate::notificationsPermissionRequested):
        (QWebPagePrivate::notificationsPermissionRequestCancelled):
        (QWebPagePrivate::respondToChangedContents):
        (QWebPagePrivate::respondToChangedSelection):
        (QWebPagePrivate::microFocusChanged):
        (QWebPagePrivate::triggerCopyAction):
        (QWebPagePrivate::triggerActionForKeyEvent):
        (QWebPagePrivate::clearUndoStack):
        (QWebPagePrivate::canUndo):
        (QWebPagePrivate::canRedo):
        (QWebPagePrivate::undo):
        (QWebPagePrivate::redo):
        (QWebPagePrivate::createUndoStep):
        (QWebPagePrivate::editorCommandForKeyEvent):
        (QWebPage::viewportSize):
        (QWebPage::setViewportSize):
        (getintenv):
        (queryDeviceSizeForScreenContainingWidget):
        (QWebPage::viewportAttributesForSize):
        (QWebPage::preferredContentsSize):
        (QWebPage::setPreferredContentsSize):
        (QWebPage::setActualVisibleContentRect):
        (QWebPage::acceptNavigationRequest):
        (QWebPage::hasSelection):
        (QWebPage::selectedText):
        (QWebPage::selectedHtml):
        (QWebPage::action):
        (QWebPage::isModified):
        (QWebPage::undoStack):
        (QWebPage::event):
        (QWebPage::focusNextPrevChild):
        (QWebPage::setContentEditable):
        (QWebPage::isContentEditable):
        (QWebPage::setForwardUnsupportedContent):
        (QWebPage::forwardUnsupportedContent):
        (QWebPage::setLinkDelegationPolicy):
        (QWebPage::linkDelegationPolicy):
        (QWebPagePrivate::handleScrollbarContextMenuEvent):
        (QWebPage::swallowContextMenuEvent):
        (QWebPage::updatePositionDependentActions):
        (QWebPage::extension):
        (QWebPage::supportsExtension):
        (QWebPage::handle):
        (QWebPage::findText):
        (QWebPage::settings):
        (QWebPage::chooseFile):
        (QWebPage::setNetworkAccessManager):
        (QWebPage::networkAccessManager):
        (QWebPage::setPluginFactory):
        (QWebPage::pluginFactory):
        (QWebPage::userAgentForUrl):
        (QWebPage::totalBytes):
        (QWebPage::bytesReceived):
        * WidgetApi/qwebpage.h: Renamed from Source/WebKit/qt/Api/qwebpage.h.
        (WebCore):
        * WidgetApi/qwebpage_p.h: Renamed from Source/WebKit/qt/Api/qwebpage_p.h.
        (WebCore):
        (QtViewportAttributesPrivate):
        (QtViewportAttributesPrivate::QtViewportAttributesPrivate):
        (QWebPagePrivate):
        * WidgetApi/qwebview.cpp: Renamed from Source/WebKit/qt/Api/qwebview.cpp.
        (QWebViewPrivate):
        (QWebViewPrivate::QWebViewPrivate):
        (QWebViewPrivate::~QWebViewPrivate):
        (QWebViewPrivate::_q_pageDestroyed):
        (accessibleInterfaceFactory):
        (QWebView::QWebView):
        (QWebView::~QWebView):
        (QWebView::page):
        (QWebViewPrivate::detachCurrentPage):
        (QWebView::setPage):
        (QWebView::load):
        (QWebView::setHtml):
        (QWebView::setContent):
        (QWebView::history):
        (QWebView::settings):
        (QWebView::title):
        (QWebView::setUrl):
        (QWebView::url):
        (QWebView::icon):
        (QWebView::hasSelection):
        (QWebView::selectedText):
        (QWebView::selectedHtml):
        (QWebView::pageAction):
        (QWebView::triggerPageAction):
        (QWebView::isModified):
        (QWebView::sizeHint):
        (QWebView::setZoomFactor):
        (QWebView::zoomFactor):
        (QWebView::setTextSizeMultiplier):
        (QWebView::textSizeMultiplier):
        (QWebView::renderHints):
        (QWebView::setRenderHints):
        (QWebView::setRenderHint):
        (QWebView::findText):
        (QWebView::event):
        (QWebView::print):
        (QWebView::stop):
        (QWebView::back):
        (QWebView::forward):
        (QWebView::reload):
        (QWebView::resizeEvent):
        (QWebView::paintEvent):
        (QWebView::createWindow):
        (QWebView::mouseMoveEvent):
        (QWebView::mousePressEvent):
        (QWebView::mouseDoubleClickEvent):
        (QWebView::mouseReleaseEvent):
        (QWebView::contextMenuEvent):
        (QWebView::wheelEvent):
        (QWebView::keyPressEvent):
        (QWebView::keyReleaseEvent):
        (QWebView::focusInEvent):
        (QWebView::focusOutEvent):
        (QWebView::dragEnterEvent):
        (QWebView::dragLeaveEvent):
        (QWebView::dragMoveEvent):
        (QWebView::dropEvent):
        (QWebView::focusNextPrevChild):
        (QWebView::inputMethodQuery):
        (QWebView::inputMethodEvent):
        (QWebView::changeEvent):
        * WidgetApi/qwebview.h: Renamed from Source/WebKit/qt/Api/qwebview.h.
        * WidgetApi/qwebviewaccessible.cpp: Renamed from Source/WebKit/qt/Api/qwebviewaccessible.cpp.
        (QWebFrameAccessible::QWebFrameAccessible):
        (QWebFrameAccessible::frame):
        (QWebFrameAccessible::parent):
        (QWebFrameAccessible::text):
        (QWebFrameAccessible::childCount):
        (QWebFrameAccessible::child):
        (QWebFrameAccessible::indexOfChild):
        (QWebFrameAccessible::state):
        (QWebFrameAccessible::role):
        (QWebFrameAccessible::navigate):
        (QWebPageAccessible::QWebPageAccessible):
        (QWebPageAccessible::page):
        (QWebPageAccessible::text):
        (QWebPageAccessible::parent):
        (QWebPageAccessible::child):
        (QWebPageAccessible::childCount):
        (QWebPageAccessible::indexOfChild):
        (QWebPageAccessible::navigate):
        (QWebPageAccessible::role):
        (QWebPageAccessible::state):
        (QWebViewAccessible::QWebViewAccessible):
        (QWebViewAccessible::view):
        (QWebViewAccessible::childCount):
        (QWebViewAccessible::child):
        * WidgetApi/qwebviewaccessible_p.h: Renamed from Source/WebKit/qt/Api/qwebviewaccessible_p.h.
        (QWebFrameAccessible):
        (QWebPageAccessible):
        (QWebViewAccessible):
        * WidgetSupport/DefaultFullScreenVideoHandler.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/DefaultFullScreenVideoHandler.cpp.
        (DefaultFullScreenVideoHandler::DefaultFullScreenVideoHandler):
        (DefaultFullScreenVideoHandler::~DefaultFullScreenVideoHandler):
        (DefaultFullScreenVideoHandler::requiresFullScreenForVideoPlayback):
        (DefaultFullScreenVideoHandler::enterFullScreen):
        (DefaultFullScreenVideoHandler::exitFullScreen):
        * WidgetSupport/DefaultFullScreenVideoHandler.h: Renamed from Source/WebKit/qt/WebCoreSupport/DefaultFullScreenVideoHandler.h.
        (WebKit):
        (DefaultFullScreenVideoHandler):
        * WidgetSupport/FullScreenVideoWidget.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/FullScreenVideoWidget.cpp.
        (WebKit):
        (WebKit::FullScreenVideoWidget::FullScreenVideoWidget):
        (WebKit::FullScreenVideoWidget::~FullScreenVideoWidget):
        (WebKit::FullScreenVideoWidget::show):
        (WebKit::FullScreenVideoWidget::closeEvent):
        (WebKit::FullScreenVideoWidget::event):
        (WebKit::FullScreenVideoWidget::keyPressEvent):
        (WebKit::FullScreenVideoWidget::hideCursor):
        (WebKit::FullScreenVideoWidget::showCursor):
        * WidgetSupport/FullScreenVideoWidget.h: Renamed from Source/WebKit/qt/WebCoreSupport/FullScreenVideoWidget.h.
        (WebKit):
        (FullScreenVideoWidget):
        * WidgetSupport/InitWebKitQt.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/InitWebKitQt.cpp.
        (WebKit):
        (WebKit::initializeWebKitWidgets):
        * WidgetSupport/InitWebKitQt.h: Renamed from Source/WebKit/qt/WebCoreSupport/InitWebKitQt.h.
        (WebKit):
        * WidgetSupport/InspectorClientWebPage.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/InspectorClientWebPage.cpp.
        (InspectorClientWebPage::InspectorClientWebPage):
        (InspectorClientWebPage::createWindow):
        (InspectorClientWebPage::javaScriptWindowObjectCleared):
        * WidgetSupport/InspectorClientWebPage.h: Renamed from Source/WebKit/qt/WebCoreSupport/InspectorClientWebPage.h.
        (WebKit):
        (InspectorClientWebPage):
        * WidgetSupport/PageClientQt.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/PageClientQt.cpp.
        (QWebPageClient::ownerWindow):
        (WebCore):
        (WebCore::PageClientQWidget::scroll):
        (WebCore::PageClientQWidget::update):
        (WebCore::PageClientQWidget::repaintViewport):
        (WebCore::PageClientQWidget::setInputMethodEnabled):
        (WebCore::PageClientQWidget::inputMethodEnabled):
        (WebCore::PageClientQWidget::setInputMethodHints):
        (WebCore::PageClientQWidget::~PageClientQWidget):
        (WebCore::PageClientQWidget::cursor):
        (WebCore::PageClientQWidget::updateCursor):
        (WebCore::PageClientQWidget::palette):
        (WebCore::PageClientQWidget::screenNumber):
        (WebCore::PageClientQWidget::ownerWidget):
        (WebCore::PageClientQWidget::geometryRelativeToOwnerWidget):
        (WebCore::PageClientQWidget::pluginParent):
        (WebCore::PageClientQWidget::style):
        (WebCore::PageClientQWidget::windowRect):
        (WebCore::PageClientQWidget::setWidgetVisible):
        (WebCore::PageClientQGraphicsWidget::~PageClientQGraphicsWidget):
        (WebCore::PageClientQGraphicsWidget::scroll):
        (WebCore::PageClientQGraphicsWidget::update):
        (WebCore::PageClientQGraphicsWidget::repaintViewport):
        (WebCore::PageClientQGraphicsWidget::makeOpenGLContextCurrentIfAvailable):
        (WebCore::PageClientQGraphicsWidget::setInputMethodEnabled):
        (WebCore::PageClientQGraphicsWidget::inputMethodEnabled):
        (WebCore::PageClientQGraphicsWidget::setInputMethodHints):
        (WebCore::PageClientQGraphicsWidget::cursor):
        (WebCore::PageClientQGraphicsWidget::updateCursor):
        (WebCore::PageClientQGraphicsWidget::palette):
        (WebCore::PageClientQGraphicsWidget::screenNumber):
        (WebCore::PageClientQGraphicsWidget::ownerWidget):
        (WebCore::PageClientQGraphicsWidget::geometryRelativeToOwnerWidget):
        (WebCore::PageClientQGraphicsWidget::graphicsItemVisibleRect):
        (WebCore::PageClientQGraphicsWidget::pluginParent):
        (WebCore::PageClientQGraphicsWidget::style):
        (WebCore::PageClientQGraphicsWidget::setWidgetVisible):
        (WebCore::PageClientQGraphicsWidget::windowRect):
        * WidgetSupport/PageClientQt.h: Renamed from Source/WebKit/qt/WebCoreSupport/PageClientQt.h.
        (WebCore):
        (PageClientQWidget):
        (WebCore::PageClientQWidget::PageClientQWidget):
        (WebCore::PageClientQWidget::isQWidgetClient):
        (WebCore::PageClientQWidget::viewResizesToContentsEnabled):
        (QGraphicsItemOverlay):
        (WebCore::QGraphicsItemOverlay::QGraphicsItemOverlay):
        (WebCore::QGraphicsItemOverlay::boundingRect):
        (WebCore::QGraphicsItemOverlay::paint):
        (WebCore::QGraphicsItemOverlay::prepareGraphicsItemGeometryChange):
        (PageClientQGraphicsWidget):
        (WebCore::PageClientQGraphicsWidget::PageClientQGraphicsWidget):
        (WebCore::PageClientQGraphicsWidget::isQWidgetClient):
        (WebCore::PageClientQGraphicsWidget::viewResizesToContentsEnabled):
        * WidgetSupport/QGraphicsWidgetPluginImpl.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/QGraphicsWidgetPluginImpl.cpp.
        (QGraphicsWidgetPluginImpl::~QGraphicsWidgetPluginImpl):
        (QGraphicsWidgetPluginImpl::update):
        (QGraphicsWidgetPluginImpl::setGeometryAndClip):
        (QGraphicsWidgetPluginImpl::setVisible):
        (QGraphicsWidgetPluginImpl::setWidgetParent):
        (QGraphicsWidgetPluginImpl::handle):
        * WidgetSupport/QGraphicsWidgetPluginImpl.h: Renamed from Source/WebKit/qt/WebCoreSupport/QGraphicsWidgetPluginImpl.h.
        (QGraphicsWidgetPluginImpl):
        (QGraphicsWidgetPluginImpl::QGraphicsWidgetPluginImpl):
        * WidgetSupport/QStyleFacadeImp.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/QStyleFacadeImp.cpp.
        (WebKit):
        (WebKit::convertToQStyleState):
        (WebKit::convertToQStyleSubControl):
        (WebKit::initGenericStyleOption):
        (WebKit::initSpecificStyleOption):
        (MappedStyleOption):
        (WebKit::MappedStyleOption::MappedStyleOption):
        (WebKit::convertPixelMetric):
        (WebKit::convertToQStyleFacadeSubControl):
        (WebKit::QStyleFacadeImp::QStyleFacadeImp):
        (WebKit::QStyleFacadeImp::~QStyleFacadeImp):
        (WebKit::QStyleFacadeImp::buttonSubElementRect):
        (WebKit::QStyleFacadeImp::findFrameLineWidth):
        (WebKit::QStyleFacadeImp::simplePixelMetric):
        (WebKit::QStyleFacadeImp::buttonMargin):
        (WebKit::QStyleFacadeImp::sliderLength):
        (WebKit::QStyleFacadeImp::sliderThickness):
        (WebKit::QStyleFacadeImp::progressBarChunkWidth):
        (WebKit::QStyleFacadeImp::getButtonMetrics):
        (WebKit::QStyleFacadeImp::comboBoxSizeFromContents):
        (WebKit::QStyleFacadeImp::pushButtonSizeFromContents):
        (WebKit::QStyleFacadeImp::paintButton):
        (WebKit::QStyleFacadeImp::paintTextField):
        (WebKit::QStyleFacadeImp::paintComboBox):
        (WebKit::QStyleFacadeImp::paintComboBoxArrow):
        (WebKit::QStyleFacadeImp::paintSliderTrack):
        (WebKit::QStyleFacadeImp::paintSliderThumb):
        (WebKit::QStyleFacadeImp::paintInnerSpinButton):
        (WebKit::QStyleFacadeImp::paintProgressBar):
        (WebKit::QStyleFacadeImp::scrollBarExtent):
        (WebKit::QStyleFacadeImp::scrollBarMiddleClickAbsolutePositionStyleHint):
        (WebKit::QStyleFacadeImp::paintScrollCorner):
        (WebKit::QStyleFacadeImp::hitTestScrollBar):
        (WebKit::QStyleFacadeImp::scrollBarSubControlRect):
        (WebKit::QStyleFacadeImp::paintScrollBar):
        (WebKit::QStyleFacadeImp::widgetForPainter):
        (WebKit::QStyleFacadeImp::style):
        * WidgetSupport/QStyleFacadeImp.h: Renamed from Source/WebKit/qt/WebCoreSupport/QStyleFacadeImp.h.
        (WebKit):
        (QStyleFacadeImp):
        (WebKit::QStyleFacadeImp::create):
        (WebKit::QStyleFacadeImp::isValid):
        * WidgetSupport/QWebUndoCommand.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/QWebUndoCommand.cpp.
        (QWebUndoCommand::QWebUndoCommand):
        (QWebUndoCommand::undo):
        (QWebUndoCommand::redo):
        * WidgetSupport/QWebUndoCommand.h: Renamed from Source/WebKit/qt/WebCoreSupport/QWebUndoCommand.h.
        (QWebUndoCommand):
        * WidgetSupport/QWidgetPluginImpl.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/QWidgetPluginImpl.cpp.
        (QWidgetPluginImpl::~QWidgetPluginImpl):
        (QWidgetPluginImpl::update):
        (QWidgetPluginImpl::setGeometryAndClip):
        (QWidgetPluginImpl::setVisible):
        (QWidgetPluginImpl::setStyleSheet):
        (QWidgetPluginImpl::setWidgetParent):
        (QWidgetPluginImpl::handle):
        * WidgetSupport/QWidgetPluginImpl.h: Renamed from Source/WebKit/qt/WebCoreSupport/QWidgetPluginImpl.h.
        (QWidgetPluginImpl):
        (QWidgetPluginImpl::QWidgetPluginImpl):
        * WidgetSupport/QtFallbackWebPopup.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/QtFallbackWebPopup.cpp.
        (WebCore):
        (WebCore::QtFallbackWebPopup::QtFallbackWebPopup):
        (WebCore::QtFallbackWebPopup::~QtFallbackWebPopup):
        (WebCore::QtFallbackWebPopup::show):
        (WebCore::QtFallbackWebPopup::hide):
        (WebCore::QtFallbackWebPopup::populate):
        (WebCore::QtFallbackWebPopup::activeChanged):
        (WebCore::QtFallbackWebPopup::deleteComboBox):
        (WebCore::QtFallbackWebPopup::pageClient):
        * WidgetSupport/QtFallbackWebPopup.h: Renamed from Source/WebKit/qt/WebCoreSupport/QtFallbackWebPopup.h.
        (WebCore):
        (QtFallbackWebPopup):
        (WebCore::QtFallbackWebPopup::setGeometry):
        (WebCore::QtFallbackWebPopup::geometry):
        (WebCore::QtFallbackWebPopup::setFont):
        (WebCore::QtFallbackWebPopup::font):
        * WidgetSupport/QtWebComboBox.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/QtWebComboBox.cpp.
        (WebCore):
        (WebCore::QtWebComboBox::QtWebComboBox):
        (WebCore::QtWebComboBox::showPopupAtCursorPosition):
        (WebCore::QtWebComboBox::eventFilter):
        * WidgetSupport/QtWebComboBox.h: Renamed from Source/WebKit/qt/WebCoreSupport/QtWebComboBox.h.
        (WebCore):
        (QtWebComboBox):
        * declarative/experimental/experimental.pri:
        * declarative/public.pri:
        * tests/qwebview/tst_qwebview.cpp:

2012-11-30  Zeno Albisser  <zeno@webkit.org>

        [Qt] Enable WebGL by default.
        https://bugs.webkit.org/show_bug.cgi?id=103731

        Reviewed by Simon Hausmann.

        * Api/qwebsettings.cpp:
        (QWebSettings::QWebSettings):

2012-11-30  Mihai Maerean  <mmaerean@adobe.com>

        [CSSRegions] when WebKit uses V8, there should be a single variable to store if the CSS Regions feature is enabled
        https://bugs.webkit.org/show_bug.cgi?id=101192

        Reviewed by Hajime Morita.

        Removed the CSS Regions flag in Settings and switched to using the new flag I have added in RuntimeEnabledFeatures.

        Tests: No new tests because there is no functional change.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):

2012-11-29  Alexey Proskuryakov  <ap@apple.com>

        [WK2] Forward cookie jar calls to NetworkProcess
        https://bugs.webkit.org/show_bug.cgi?id=103457

        Reviewed by Darin Adler.

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::cookiesForDOM):
        (PlatformStrategiesQt::setCookiesFromDOM):
        (PlatformStrategiesQt::cookiesEnabled):
        (PlatformStrategiesQt::cookieRequestHeaderFieldValue):
        (PlatformStrategiesQt::getRawCookies):
        (PlatformStrategiesQt::deleteCookie):
        (PlatformStrategiesQt::getHostnamesWithCookies):
        (PlatformStrategiesQt::deleteCookiesForHostname):
        (PlatformStrategiesQt::deleteAllCookies):

2012-11-28  Huang Dongsung  <luxtella@company100.net>

        [Texmap] REGRESSION(r135620) QtTestBrowser crashes on Google-gravity.
        https://bugs.webkit.org/show_bug.cgi?id=103410

        Reviewed by Noam Rosenthal.

        TextureMapperLayerClientQt::setTextureMapper() must call
        flushCompositingStateForThisLayerOnly() of the root layer.

        Currently, PageClientQGraphicsWidget::setRootGraphicsLayer does not flush layer
        states of the root layer after setting TextureMapper while
        PageClientQWidget::setRootGraphicsLayer() flushes them of the root layer.  If
        not flushing states, descendant layers can not reach the root layer. It means
        descendant layers can not reach the TextureMapper that the root layer has.

        This is already the behavior for PageClientQWidget, which should be the case
        for PageClientQGraphicsWidget as well.

        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::TextureMapperLayerClientQt::setTextureMapper):
        (WebCore::PageClientQWidget::setRootGraphicsLayer):

2012-11-27  James Simonsen  <simonjam@chromium.org>

        Consolidate FrameLoader::load() into one function taking a FrameLoadRequest
        https://bugs.webkit.org/show_bug.cgi?id=102151

        Reviewed by Adam Barth.

        * Api/qwebframe.cpp:
        (QWebFrame::QWebFrame):
        (QWebFrame::load):
        (QWebFrame::setHtml):
        (QWebFrame::setContent):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setAlternateHtml):
        (qt_dump_set_accepts_editing):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::callErrorPageExtension):

2012-11-27  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r135786.
        http://trac.webkit.org/changeset/135786
        https://bugs.webkit.org/show_bug.cgi?id=103379

        It made 3 plugin tests timeout on several platforms (Requested
        by Ossy on #webkit).

        * Api/qwebframe.cpp:
        (QWebFrame::setHtml):
        (QWebFrame::setContent):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setAlternateHtml):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::callErrorPageExtension):
        * WebCoreSupport/QWebFrameAdapter.cpp:
        (QWebFrameAdapter::load):

2012-11-26  James Simonsen  <simonjam@chromium.org>

        Consolidate FrameLoader::load() into one function taking a FrameLoadRequest
        https://bugs.webkit.org/show_bug.cgi?id=102151

        Reviewed by Adam Barth.

        * Api/qwebframe.cpp:
        (QWebFrame::QWebFrame):
        (QWebFrame::load):
        (QWebFrame::setHtml):
        (QWebFrame::setContent):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setAlternateHtml):
        (qt_dump_set_accepts_editing):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::callErrorPageExtension):

2012-11-26  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] REGRESSION(r135575): It made all tests assert
        https://bugs.webkit.org/show_bug.cgi?id=103169

        Reviewed by Simon Hausmann.

        This fixes another regression introduced in r135515:
        initializeWebKitQt shouldn't implicitely call initializeWebCoreQt
        since it can be called from WebKit2 to initialize QStyle for testing.
        This would then lead to things such as PlatformStrategies being
        initialized twice.

        * Api/qwebpage.cpp: Explicitely call initializeWebCoreQt().
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebKit::initializeWebKitQt):
        (WebCore::initializeWebCoreQt):
        * WebCoreSupport/InitWebCoreQt.h:
        (WebCore):

2012-11-26  Zeno Albisser  <zeno@webkit.org>

        [Qt] Make sure the QGLWidget context is current when creating the TextureMapper.
        https://bugs.webkit.org/show_bug.cgi?id=103142

        When creating the TextureMapperGL for WK1 we have to make sure
        that the GL context provided by the QGLWidget is current.
        Otherwise the GraphicsContext3DQt created by TextureMapperGL will pick up
        the wrong pointer by calling QOpenGLContext::currentContext().

        Reviewed by Simon Hausmann.

        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQGraphicsWidget::setRootGraphicsLayer):

2012-11-26  Michael Brüning  <michael.bruning@digia.com>

        [Qt] QStyleFacadeImp build break with latest Qt 5
        https://bugs.webkit.org/show_bug.cgi?id=103198

        Reviewed by Simon Hausmann.

        Original patch by J-P Nurmi <jpnurmi@digia.com>.

        Fixes QtWebKit build by replacing qobject_cast to
        QMacStyle with calls to QObject::inherits. Also
        replaces Q_WS_MAC preprocesser directives with Q_OS_MAC
        for Qt 5 compatibility.

        * WebCoreSupport/QStyleFacadeImp.cpp:
        (WebKit::QStyleFacadeImp::getButtonMetrics):
        (WebKit::QStyleFacadeImp::paintComboBox):
        (WebKit::QStyleFacadeImp::paintInnerSpinButton):
        (WebKit::QStyleFacadeImp::paintScrollBar):

2012-11-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r135648 and r135649.
        http://trac.webkit.org/changeset/135648
        http://trac.webkit.org/changeset/135649
        https://bugs.webkit.org/show_bug.cgi?id=103176

        This change cannot be built with a qt-minimal configuration.
        (Requested by zalbisser on #webkit).

        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQGraphicsWidget::setRootGraphicsLayer):

2012-11-24  Zeno Albisser  <zeno@webkit.org>

        Unreviewed Qt build fix:

        Make sure QGLWidget definition is available.

        * WebCoreSupport/PageClientQt.cpp:

2012-11-24  Zeno Albisser  <zeno@webkit.org>

        [Qt] Make sure the QGLWidget context is current when creating the TextureMapper.
        https://bugs.webkit.org/show_bug.cgi?id=103142

        When creating the TextureMapperGL for WK1 we have to make sure
        that the GL context provided by the QGLWidget is current.
        Otherwise the GraphicsContext3DQt created by TextureMapperGL will pick up
        the wrong pointer by calling QOpenGLContext::currentContext().

        Reviewed by Kenneth Rohde Christiansen.

        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQGraphicsWidget::setRootGraphicsLayer):

2012-11-23  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r135575.
        http://trac.webkit.org/changeset/135575
        https://bugs.webkit.org/show_bug.cgi?id=103169

        It made all tests assert (Requested by Ossy on #webkit).

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebKit::initializeWebKitQt):

2012-11-23  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        tst_qwebpage fails after QMimeDatabase patch
        https://bugs.webkit.org/show_bug.cgi?id=103125

        Reviewed by Simon Hausmann.

        Replace the static extension->mimetype table with a QMimeDatabase lookup

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::findText):
        (tst_QWebPage::supportedContentType):

2012-11-23  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Compiling against QtWebkit API requires QT_DLL to be defined
        https://bugs.webkit.org/show_bug.cgi?id=102942

        Reviewed by Tor Arne Vestbø.

        Remove the requirement of having QT_DLL defined in order for the QWEBKIT_EXPORT
        macro to be defined as Q_DECL_IMPORT. Instead unify the export macro definition
        to follow the same rules as other Qt 5 modules, with the exception that instead of
        QT_BUILD_WEBKIT_LIB we continue to use BUILDING_WEBKIT, because that's used also
        in other cross-platform header files to determine the correct meaning of export
        macros.

        * Api/qwebkitglobal.h:

2012-11-23  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] QWebPage::shouldInterruptJavaScript should be virtual in Qt 5
        https://bugs.webkit.org/show_bug.cgi?id=103111

        Reviewed by Kenneth Rohde Christiansen.

        This function was added as a slot during Qt 4.x times because adding
        virtual functions breaks binary compatibility. This constraint is gone
        with the initial release of WebKit with Qt 5, and therefore we can
        make it virtual now.

        The change is fully source compatible as existing "re-implementations"
        as slots will now be called through it being a virtual function. They
        become unused slots.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::shouldInterruptJavaScript):
        * Api/qwebpage.h:
        * Api/qwebpage_p.h:
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::shouldInterruptJavaScript):
        * WebCoreSupport/QWebPageAdapter.h:
        (QWebPageAdapter):
        * tests/qwebpage/tst_qwebpage.cpp:
        (JSTestPage::shouldInterruptJavaScript):
        (JSTestPage):

2012-11-23  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] REGRESSION(r135515): 3 appcache tests still failing
        https://bugs.webkit.org/show_bug.cgi?id=103073

        Rubber-stamped by Simon Hausmann.

        Another sneaky typo.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::applicationCacheQuotaExceeded):

2012-11-22  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Avoid initializing PlatformStrategies twice.

        Rubber-stamped by Simon Hausmann.

        This fixes another regression introduced in r135515:
        initializeWebKitQt shouldn't implicitely call initializeWebCoreQt
        since it can be called from WebKit2 to initialize QStyle for testing.
        This would then lead to things such as PlatformStrategies being
        initialized twice.

        * Api/qwebpage.cpp: Explicitely call initializeWebCoreQt().
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebKit::initializeWebKitQt):

2012-11-23  Simon Hausmann  <simon.hausmann@digia.com>

        Unreviewed trivial Qt/Win build fix:

        Include FormState.h/HTMLFormElement.h in the FrameLoaderClient
        declaration because MSVC needs it. Also fix Q_DECL_EXPORT declarations
        for functions that are supposed to be exported.

        * Api/qwebelement.cpp:
        * WebCoreSupport/FrameLoaderClientQt.h:
        * WebCoreSupport/InitWebCoreQt.h:
        (WebKit):
        * WebCoreSupport/InitWebKitQt.h:
        (WebKit):

2012-11-22  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] REGRESSION(r135515): It made 3-3 tests fail and crash
        https://bugs.webkit.org/show_bug.cgi?id=103073

        Rubber-stamped by Simon Hausmann.

        Removing the QNetworkAccessManager member in FrameNetworkingContextQt
        was right, but we need to be careful as to how we fetch it back.
        Since the WebCore Page is not always valid, get the QNAM instance
        straight from the frame adapter through its page adapter instead.

        * WebCoreSupport/ChromeClientQt.cpp: [Style nit] Remove stray emit.
        * WebCoreSupport/FrameNetworkingContextQt.cpp:
        (WebCore::FrameNetworkingContextQt::networkAccessManager):

2012-11-22  Simon Hausmann  <simon.hausmann@digia.com>

        Unreviewed MSVC Windows build fix: Include header files referenced in RefPtr
        instances.

        * Api/qwebelement.cpp:

2012-11-22  Simon Hausmann  <simon.hausmann@digia.com>, Pierre Rossi <pierre.rossi@digia.com>

        [Qt] Separate QWidget dependant code into separate WebKitWidgets static library
        https://bugs.webkit.org/show_bug.cgi?id=102800

        Reviewed by Tor Arne Vestbø.

        This patch separates code that needs to use QWidget related APIs in
        WebKit/qt/WebCoreSupport and Api from code that doesn't. This means for
        example FrameLoaderClientQt.cpp remains in the WebKit1 static library,
        while qwebpage.cpp and qwebframe.cpp become part of the WebKitWidgets
        static library. WebKit1 is compiled without QT += widgets and therefore
        any widget related dependency has been moved "up" and out of WebKit1 into
        the WebKitWidgets library.

        Between the code in WebKit.a and WebKitWidgets.a new adapters and
        interfaces have been introduced, such as QWebPageAdapter and
        QWebFrameAdapter. QWebPageAdapter, when used from WebKit1, is a way to
        call out into the API layer, implemented by QWebPage (QWebPagePrivate).
        The other way around if QWebPage wants to access WebCore or
        WebCoreSupport related functionality, it will go through
        QWebPageAdapater (as base class). The separation in the direction up
        into the API layer is complete with this patch, no code in WebKit1
        depends on QtWidgets. The separation the other way around, code in the
        API layer not using any WebCore types, is not complete yet.

        Some classes such as QWebSettings, QWebElement or
        DumpRenderTreeSupportQt remain in WebKit1. While they are API layer,
        they do not depend on widget related Qt APIs and they make much more
        use of WebCore internal APIs and therefore are easier to keep in
        WebKit1.

        In the future we plan to place a real shared library boundary between
        WebKit1 and WebKitWidgets, by keeping the WebKit1 static library as
        part of the QtWebKit shared library and by turning the WebKitWidgets
        static library into a shared one.


        * Api/qgraphicswebview.cpp:
        (QGraphicsWebViewPrivate::pageClient):
        (QGraphicsWebViewPrivate::detachCurrentPage):
        (QGraphicsWebView::setPage):
        * Api/qwebelement.cpp:
        (QWebElement::webFrame):
        * Api/qwebframe.cpp:
        (QWebFramePrivate::setPage):
        (QWebFramePrivate::didStartProvisionalLoad):
        (QWebFramePrivate::handleProgressFinished):
        (QWebFramePrivate::emitInitialLayoutCompleted):
        (QWebFramePrivate::emitIconChanged):
        (QWebFramePrivate::emitLoadStarted):
        (QWebFramePrivate::emitLoadFinished):
        (QWebFramePrivate::createChildFrame):
        (QWebFramePrivate::apiHandle):
        (QWebFramePrivate::handle):
        (QWebFramePrivate::contentsSizeDidChange):
        (QWebFramePrivate::scrollBarPolicy):
        (QWebFrame::QWebFrame):
        (QWebFrame::~QWebFrame):
        (QWebFrame::setUrl):
        (QWebFrame::load):
        (QWebFrame::scrollPosition):
        (QWebFrame::geometry):
        (QWebFramePrivate::kit):
        (QWebFrame::handle):
        * Api/qwebframe.h:
        * Api/qwebframe_p.h:
        (QWebFramePrivate::QWebFramePrivate):
        (QWebFramePrivate):
        * Api/qwebhistory.cpp:
        (QWebHistoryPrivate::page):
        * Api/qwebhistory_p.h:
        (QWebHistoryPrivate):
        * Api/qwebinspector.cpp:
        (QWebInspectorPrivate::setFrontend):
        * Api/qwebinspector_p.h:
        (QWebInspectorPrivate):
        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        (QWebPagePrivate::~QWebPagePrivate):
        (QWebPagePrivate::core):
        (QWebPagePrivate::show):
        (QWebPagePrivate::setFocus):
        (QWebPagePrivate::unfocus):
        (QWebPagePrivate::setWindowRect):
        (QWebPagePrivate::viewportSize):
        (QWebPagePrivate::createWindow):
        (QWebPagePrivate::javaScriptConsoleMessage):
        (QWebPagePrivate::javaScriptAlert):
        (QWebPagePrivate::javaScriptConfirm):
        (QWebPagePrivate::javaScriptPrompt):
        (QWebPagePrivate::printRequested):
        (QWebPagePrivate::databaseQuotaExceeded):
        (QWebPagePrivate::applicationCacheQuotaExceeded):
        (QWebPagePrivate::setToolTip):
        (QWebPagePrivate::createFullScreenVideoHandler):
        (QWebPagePrivate::mainFrameAdapter):
        (QWebPagePrivate::chooseFiles):
        (QWebPagePrivate::acceptNavigationRequest):
        (QWebPagePrivate::emitRestoreFrameStateRequested):
        (QWebPagePrivate::emitSaveFrameStateRequested):
        (QWebPagePrivate::emitDownloadRequested):
        (QWebPagePrivate::emitFrameCreated):
        (QWebPagePrivate::errorPageExtension):
        (QWebPagePrivate::createPlugin):
        (QWebPagePrivate::adapterForWidget):
        (QWebPagePrivate::createMainFrame):
        (QWebPagePrivate::createContextMenu):
        (QWebPagePrivate::inspectorHandle):
        (QWebPagePrivate::setInspectorFrontend):
        (QWebPagePrivate::setInspectorWindowTitle):
        (QWebPagePrivate::createWebInspector):
        (iterateContextMenu):
        (QWebPagePrivate::menuActionsAsText):
        (QWebPagePrivate::emitViewportChangeRequested):
        (QWebPagePrivate::mouseMoveEvent):
        (QWebPagePrivate::mousePressEvent):
        (QWebPagePrivate::mouseDoubleClickEvent):
        (QWebPagePrivate::mouseTripleClickEvent):
        (QWebPagePrivate::mouseReleaseEvent):
        (QWebPagePrivate::handleSoftwareInputPanel):
        (QWebPagePrivate::wheelEvent):
        (QWebPagePrivate::gestureEvent):
        (QWebPage::setView):
        (QWebPage::javaScriptConsoleMessage):
        (QWebPage::javaScriptAlert):
        (QWebPage::javaScriptConfirm):
        (QWebPage::javaScriptPrompt):
        (QWebPage::shouldInterruptJavaScript):
        (QWebPage::setFeaturePermission):
        (QWebPagePrivate::colorSelectionRequested):
        (QWebPagePrivate::createSelectPopup):
        (QWebPagePrivate::viewRectRelativeToWindow):
        (QWebPagePrivate::geolocationPermissionRequested):
        (QWebPagePrivate::geolocationPermissionRequestCancelled):
        (QWebPagePrivate::notificationsPermissionRequested):
        (QWebPagePrivate::notificationsPermissionRequestCancelled):
        (QWebPagePrivate::respondToChangedContents):
        (QWebPagePrivate::respondToChangedSelection):
        (QWebPagePrivate::microFocusChanged):
        (QWebPagePrivate::triggerCopyAction):
        (QWebPagePrivate::triggerActionForKeyEvent):
        (QWebPagePrivate::clearUndoStack):
        (QWebPagePrivate::canUndo):
        (QWebPagePrivate::canRedo):
        (QWebPagePrivate::undo):
        (QWebPagePrivate::redo):
        (QWebPagePrivate::createUndoStep):
        (QWebPagePrivate::editorCommandForKeyEvent):
        (QWebPage::viewportSize):
        (QWebPage::setViewportSize):
        (QWebPage::viewportAttributesForSize):
        (QWebPage::event):
        (QWebPage::extension):
        (QWebPage::handle):
        (QWebPage::chooseFile):
        (QWebPage::setNetworkAccessManager):
        (QWebPage::networkAccessManager):
        * Api/qwebpage.h:
        * Api/qwebpage_p.h:
        (WebCore):
        (QWebPagePrivate):
        * Api/qwebsettings.cpp:
        * Api/qwebsettings.h:
        * Api/qwebview.cpp:
        (QWebViewPrivate::detachCurrentPage):
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::ChromeClientQt):
        (WebCore::ChromeClientQt::setWindowRect):
        (WebCore::ChromeClientQt::focus):
        (WebCore::ChromeClientQt::unfocus):
        (WebCore::ChromeClientQt::createWindow):
        (WebCore::ChromeClientQt::show):
        (WebCore::ChromeClientQt::setToolbarsVisible):
        (WebCore::ChromeClientQt::setStatusbarVisible):
        (WebCore::ChromeClientQt::setMenubarVisible):
        (WebCore::ChromeClientQt::addMessageToConsole):
        (WebCore::ChromeClientQt::closeWindowSoon):
        (WebCore::ChromeClientQt::runJavaScriptAlert):
        (WebCore::ChromeClientQt::runJavaScriptConfirm):
        (WebCore::ChromeClientQt::runJavaScriptPrompt):
        (WebCore::ChromeClientQt::setStatusbarText):
        (WebCore::ChromeClientQt::shouldInterruptJavaScript):
        (WebCore::ChromeClientQt::keyboardUIMode):
        (WebCore::ChromeClientQt::windowResizerRect):
        * WebCoreSupport/ChromeClientQt.h:
        (ChromeClientQt):
        * WebCoreSupport/ContextMenuClientQt.cpp:
        * WebCoreSupport/ContextMenuClientQt.h:
        (ContextMenuClientQt):
        * WebCoreSupport/DefaultFullScreenVideoHandler.cpp: Added.
        (DefaultFullScreenVideoHandler::DefaultFullScreenVideoHandler):
        (DefaultFullScreenVideoHandler::~DefaultFullScreenVideoHandler):
        (DefaultFullScreenVideoHandler::requiresFullScreenForVideoPlayback):
        (DefaultFullScreenVideoHandler::enterFullScreen):
        (DefaultFullScreenVideoHandler::exitFullScreen):
        * WebCoreSupport/DefaultFullScreenVideoHandler.h: Copied from Source/WebKit/qt/WebCoreSupport/QtWebComboBox.h.
        (WebKit):
        (DefaultFullScreenVideoHandler):
        * WebCoreSupport/DragClientQt.cpp:
        (WebCore::DragClientQt::startDrag):
        * WebCoreSupport/DragClientQt.h:
        (WebCore):
        (WebCore::DragClientQt::DragClientQt):
        (DragClientQt):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (toGeolocationClientMock):
        (toDeviceOrientationClientMock):
        (DumpRenderTreeSupportQt::initialize):
        (DumpRenderTreeSupportQt::setDumpRenderTreeModeEnabled):
        (DumpRenderTreeSupportQt::setFrameFlatteningEnabled):
        (DumpRenderTreeSupportQt::webPageSetGroupName):
        (DumpRenderTreeSupportQt::webPageGroupName):
        (DumpRenderTreeSupportQt::webInspectorExecuteScript):
        (DumpRenderTreeSupportQt::webInspectorShow):
        (DumpRenderTreeSupportQt::webInspectorClose):
        (DumpRenderTreeSupportQt::hasDocumentElement):
        (DumpRenderTreeSupportQt::pauseAnimation):
        (DumpRenderTreeSupportQt::pauseTransitionOfProperty):
        (DumpRenderTreeSupportQt::numberOfActiveAnimations):
        (DumpRenderTreeSupportQt::clearFrameName):
        (DumpRenderTreeSupportQt::setCaretBrowsingEnabled):
        (DumpRenderTreeSupportQt::setAuthorAndUserStylesEnabled):
        (DumpRenderTreeSupportQt::setSmartInsertDeleteEnabled):
        (DumpRenderTreeSupportQt::setSelectTrailingWhitespaceEnabled):
        (DumpRenderTreeSupportQt::executeCoreCommandByName):
        (DumpRenderTreeSupportQt::isCommandEnabled):
        (DumpRenderTreeSupportQt::findString):
        (DumpRenderTreeSupportQt::selectedRange):
        (DumpRenderTreeSupportQt::firstRectForCharacterRange):
        (DumpRenderTreeSupportQt::elementDoesAutoCompleteForElementWithId):
        (DumpRenderTreeSupportQt::setWindowsBehaviorAsEditingBehavior):
        (DumpRenderTreeSupportQt::viewportAsText):
        (DumpRenderTreeSupportQt::scalePageBy):
        (DumpRenderTreeSupportQt::setMockDeviceOrientation):
        (DumpRenderTreeSupportQt::resetGeolocationMock):
        (DumpRenderTreeSupportQt::setMockGeolocationPermission):
        (DumpRenderTreeSupportQt::setMockGeolocationPosition):
        (DumpRenderTreeSupportQt::setMockGeolocationPositionUnavailableError):
        (DumpRenderTreeSupportQt::numberOfPendingGeolocationPermissionRequests):
        (DumpRenderTreeSupportQt::shouldClose):
        (DumpRenderTreeSupportQt::evaluateScriptInIsolatedWorld):
        (DumpRenderTreeSupportQt::addUserStyleSheet):
        (DumpRenderTreeSupportQt::removeUserStyleSheets):
        (DumpRenderTreeSupportQt::setDefersLoading):
        (DumpRenderTreeSupportQt::goBack):
        (DumpRenderTreeSupportQt::responseMimeType):
        (DumpRenderTreeSupportQt::clearOpener):
        (DumpRenderTreeSupportQt::setInteractiveFormValidationEnabled):
        (DumpRenderTreeSupportQt::contextMenu):
        (DumpRenderTreeSupportQt::setMinimumTimerInterval):
        (DumpRenderTreeSupportQt::thirdPartyCookiePolicyAllows):
        (DumpRenderTreeSupportQt::mediaContentUrlByElementId):
        (DumpRenderTreeSupportQt::setAlternateHtml):
        (DumpRenderTreeSupportQt::confirmComposition):
        (DumpRenderTreeSupportQt::injectInternalsObject):
        (DumpRenderTreeSupportQt::resetInternalsObject):
        (DumpRenderTreeSupportQt::paintPagesWithBoundaries):
        (DumpRenderTreeSupportQt::setTrackRepaintRects):
        (DumpRenderTreeSupportQt::trackRepaintRects):
        (DumpRenderTreeSupportQt::getTrackedRepaintRects):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * WebCoreSupport/EditorClientQt.cpp:
        (dumpRange):
        (WebCore::EditorClientQt::shouldShowDeleteInterface):
        (WebCore::EditorClientQt::shouldInsertText):
        (WebCore::EditorClientQt::shouldChangeSelectedRange):
        (WebCore::EditorClientQt::shouldApplyStyle):
        (WebCore::EditorClientQt::respondToChangedContents):
        (WebCore::EditorClientQt::respondToChangedSelection):
        (WebCore::EditorClientQt::registerUndoStep):
        (WebCore::EditorClientQt::clearUndoRedoOperations):
        (WebCore::EditorClientQt::canUndo):
        (WebCore::EditorClientQt::canRedo):
        (WebCore::EditorClientQt::undo):
        (WebCore::EditorClientQt::redo):
        (WebCore::EditorClientQt::shouldInsertNode):
        (WebCore::EditorClientQt::smartInsertDeleteEnabled):
        (WebCore::EditorClientQt::toggleSmartInsertDelete):
        (WebCore::EditorClientQt::isSelectTrailingWhitespaceEnabled):
        (WebCore::EditorClientQt::handleKeyboardEvent):
        (WebCore::EditorClientQt::EditorClientQt):
        (WebCore::EditorClientQt::setInputMethodState):
        * WebCoreSupport/EditorClientQt.h:
        (EditorClientQt):
        (WebCore::EditorClientQt::setSmartInsertDeleteEnabled):
        (WebCore::EditorClientQt::setSelectTrailingWhitespaceEnabled):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (drtDescriptionSuitableForTestResult):
        (WebCore::FrameLoaderClientQt::setFrame):
        (WebCore::FrameLoaderClientQt::transitionToCommittedForNewPage):
        (WebCore::FrameLoaderClientQt::dispatchDidChangeLocationWithinPage):
        (WebCore::FrameLoaderClientQt::dispatchDidStartProvisionalLoad):
        (WebCore::FrameLoaderClientQt::dispatchDidCommitLoad):
        (WebCore::FrameLoaderClientQt::dispatchDidFinishDocumentLoad):
        (WebCore::FrameLoaderClientQt::dispatchDidFinishLoad):
        (WebCore::FrameLoaderClientQt::dispatchDidLayout):
        (WebCore::FrameLoaderClientQt::dispatchWillSubmitForm):
        (WebCore::FrameLoaderClientQt::postProgressStartedNotification):
        (WebCore::FrameLoaderClientQt::postProgressFinishedNotification):
        (WebCore::FrameLoaderClientQt::frameLoadCompleted):
        (WebCore::FrameLoaderClientQt::restoreViewState):
        (WebCore::FrameLoaderClientQt::userAgent):
        (WebCore::FrameLoaderClientQt::dispatchDidReceiveIcon):
        (WebCore::FrameLoaderClientQt::frameLoaderDestroyed):
        (WebCore::FrameLoaderClientQt::dispatchDidClearWindowObjectInWorld):
        (WebCore::FrameLoaderClientQt::didPerformFirstNavigation):
        (WebCore::FrameLoaderClientQt::onIconLoadedForPageURL):
        (WebCore::FrameLoaderClientQt::updateGlobalHistoryRedirectLinks):
        (WebCore::FrameLoaderClientQt::saveViewStateToItem):
        (WebCore::FrameLoaderClientQt::cancelledError):
        (WebCore::FrameLoaderClientQt::blockedError):
        (WebCore::FrameLoaderClientQt::cannotShowURLError):
        (WebCore::FrameLoaderClientQt::interruptedForPolicyChangeError):
        (WebCore::FrameLoaderClientQt::cannotShowMIMETypeError):
        (WebCore::FrameLoaderClientQt::fileDoesNotExistError):
        (WebCore::FrameLoaderClientQt::pluginWillHandleLoadError):
        (WebCore::FrameLoaderClientQt::download):
        (WebCore::FrameLoaderClientQt::dispatchWillSendRequest):
        (WebCore::FrameLoaderClientQt::dispatchDidReceiveResponse):
        (WebCore::FrameLoaderClientQt::dispatchDidFinishLoading):
        (WebCore::FrameLoaderClientQt::dispatchDidFailLoading):
        (WebCore::FrameLoaderClientQt::callErrorPageExtension):
        (WebCore::FrameLoaderClientQt::dispatchCreatePage):
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForNewWindowAction):
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForNavigationAction):
        (WebCore::FrameLoaderClientQt::startDownload):
        (WebCore::FrameLoaderClientQt::createFrame):
        (WebCore::FrameLoaderClientQt::createPlugin):
        (WebCore::FrameLoaderClientQt::createJavaAppletWidget):
        (WebCore::FrameLoaderClientQt::chooseFile):
        (WebCore::FrameLoaderClientQt::createNetworkingContext):
        (WebCore):
        (WebCore::FrameLoaderClientQt::webFrame):
        (WebCore::FrameLoaderClientQt::emitLoadStarted):
        (WebCore::FrameLoaderClientQt::emitLoadFinished):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (FrameLoaderClientQt):
        * WebCoreSupport/FrameNetworkingContextQt.cpp:
        (WebCore::FrameNetworkingContextQt::FrameNetworkingContextQt):
        (WebCore::FrameNetworkingContextQt::create):
        (WebCore::FrameNetworkingContextQt::networkAccessManager):
        * WebCoreSupport/FrameNetworkingContextQt.h:
        (FrameNetworkingContextQt):
        * WebCoreSupport/FullScreenVideoQt.cpp:
        (WebCore):
        (WebCore::FullScreenVideoQt::FullScreenVideoQt):
        * WebCoreSupport/FullScreenVideoQt.h:
        (WebCore):
        * WebCoreSupport/FullScreenVideoWidget.cpp:
        * WebCoreSupport/FullScreenVideoWidget.h:
        * WebCoreSupport/GeolocationClientQt.cpp:
        (WebCore::GeolocationClientQt::GeolocationClientQt):
        (WebCore::GeolocationClientQt::positionUpdated):
        (WebCore::GeolocationClientQt::startUpdating):
        (WebCore::GeolocationClientQt::requestPermission):
        (WebCore::GeolocationClientQt::cancelPermissionRequest):
        * WebCoreSupport/GeolocationClientQt.h:
        (GeolocationClientQt):
        * WebCoreSupport/GeolocationPermissionClientQt.cpp:
        (WebCore::GeolocationPermissionClientQt::requestGeolocationPermissionForFrame):
        (WebCore::GeolocationPermissionClientQt::cancelGeolocationPermissionRequestForFrame):
        (WebCore::GeolocationPermissionClientQt::setPermission):
        * WebCoreSupport/GeolocationPermissionClientQt.h:
        (GeolocationPermissionClientQt):
        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebKit):
        (WebKit::setWebKitWidgetsInitCallback):
        (WebKit::initializeWebKitQt):
        (WebKit::setImagePlatformResource):
        (WebCore::initializeWebCoreQt):
        * WebCoreSupport/InitWebCoreQt.h:
        (WebCore):
        (WebKit):
        * WebCoreSupport/InitWebKitQt.cpp: Added.
        (WebKit):
        (WebKit::initializeWebKitWidgets):
        * WebCoreSupport/InitWebKitQt.h: Copied from Source/WebKit/qt/WebCoreSupport/QtWebComboBox.h.
        (WebKit):
        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore):
        (WebCore::InspectorClientQt::InspectorClientQt):
        (WebCore::InspectorClientQt::openInspectorFrontend):
        (WebCore::InspectorClientQt::attachAndReplaceRemoteFrontend):
        (WebCore::InspectorClientQt::detachRemoteFrontend):
        (WebCore::InspectorClientQt::hideHighlight):
        (WebCore::InspectorClientQt::sendMessageToFrontend):
        (WebCore::InspectorFrontendClientQt::InspectorFrontendClientQt):
        (WebCore::InspectorFrontendClientQt::updateWindowTitle):
        (WebCore::InspectorFrontendClientQt::destroyInspectorView):
        * WebCoreSupport/InspectorClientQt.h:
        (InspectorClientQt):
        (InspectorFrontendClientQt):
        * WebCoreSupport/InspectorClientWebPage.cpp: Added.
        (InspectorClientWebPage::InspectorClientWebPage):
        (InspectorClientWebPage::createWindow):
        (InspectorClientWebPage::javaScriptWindowObjectCleared):
        * WebCoreSupport/InspectorClientWebPage.h: Copied from Source/WebKit/qt/WebCoreSupport/WebSystemInterface.h.
        (WebKit):
        (InspectorClientWebPage):
        * WebCoreSupport/InspectorServerQt.cpp:
        (WebCore::InspectorServerRequestHandlerQt::tcpReadyRead):
        (WebCore::InspectorServerRequestHandlerQt::webSocketReadyRead):
        * WebCoreSupport/InspectorServerQt.h:
        (InspectorServerQt):
        (InspectorServerRequestHandlerQt):
        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationWrapper::NotificationWrapper):
        (WebCore::NotificationPresenterClientQt::displayNotification):
        (WebCore::NotificationPresenterClientQt::requestPermission):
        (WebCore::NotificationPresenterClientQt::cancelRequestsForPermission):
        (WebCore::NotificationPresenterClientQt::dumpShowText):
        (WebCore::NotificationPresenterClientQt::toPage):
        (WebCore::NotificationPresenterClientQt::toFrame):
        * WebCoreSupport/NotificationPresenterClientQt.h:
        (WebCore::NotificationWrapper::~NotificationWrapper):
        (NotificationWrapper):
        (NotificationPresenterClientQt):
        (WebCore::NotificationPresenterClientQt::hasSystemTrayIcon):
        (WebCore::NotificationPresenterClientQt::setSystemTrayIcon):
        (CallbacksInfo):
        (WebCore):
        * WebCoreSupport/PageClientQt.cpp:
        (createPlatformGraphicsContext3DFromWidget):
        (QWebPageClient::ownerWindow):
        (WebCore::PageClientQWidget::ownerWidget):
        (WebCore::PageClientQWidget::createPlatformGraphicsContext3D):
        (WebCore::PageClientQGraphicsWidget::ownerWidget):
        (WebCore::PageClientQGraphicsWidget::createPlatformGraphicsContext3D):
        * WebCoreSupport/PageClientQt.h:
        (PageClientQWidget):
        (WebCore::QGraphicsItemOverlay::QGraphicsItemOverlay):
        (WebCore::PageClientQGraphicsWidget::PageClientQGraphicsWidget):
        (PageClientQGraphicsWidget):
        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::getPluginInfo):
        * WebCoreSupport/PopupMenuQt.cpp:
        (SelectData::SelectData):
        * WebCoreSupport/QGraphicsWidgetPluginImpl.cpp: Added.
        (QGraphicsWidgetPluginImpl::~QGraphicsWidgetPluginImpl):
        (QGraphicsWidgetPluginImpl::update):
        (QGraphicsWidgetPluginImpl::setGeometryAndClip):
        (QGraphicsWidgetPluginImpl::setVisible):
        (QGraphicsWidgetPluginImpl::setWidgetParent):
        (QGraphicsWidgetPluginImpl::handle):
        * WebCoreSupport/QGraphicsWidgetPluginImpl.h: Added.
        (QGraphicsWidgetPluginImpl):
        (QGraphicsWidgetPluginImpl::QGraphicsWidgetPluginImpl):
        * WebCoreSupport/QWebFrameAdapter.cpp: Added.
        (cacheLoadControlToCachePolicy):
        (QWebFrameData::QWebFrameData):
        (QWebFrameAdapter::QWebFrameAdapter):
        (QWebFrameAdapter::~QWebFrameAdapter):
        (QWebFrameAdapter::load):
        (QWebFrameAdapter::handleGestureEvent):
        (QWebFrameAdapter::scrollPosition):
        (QWebFrameAdapter::frameRect):
        (QWebFrameAdapter::init):
        (QWebFrameAdapter::kit):
        (QWebFrameAdapter::ensureAbsoluteUrl):
        * WebCoreSupport/QWebFrameAdapter.h: Added.
        (WebCore):
        (QWebFrameData):
        (QWebFrameAdapter):
        (QWebFrameAdapter::hasView):
        * WebCoreSupport/QWebPageAdapter.cpp: Added.
        (QWebPageAdapter::QWebPageAdapter):
        (QWebPageAdapter::~QWebPageAdapter):
        (QWebPageAdapter::init):
        (QWebPageAdapter::deletePage):
        (QWebPageAdapter::kit):
        (QWebPageAdapter::viewportArguments):
        (QWebPageAdapter::registerUndoStep):
        (QWebPageAdapter::setNetworkAccessManager):
        (QWebPageAdapter::networkAccessManager):
        * WebCoreSupport/QWebPageAdapter.h: Added.
        (WebCore):
        (QWebPageAdapter):
        (ErrorPageOption):
        (ErrorPageReturn):
        * WebCoreSupport/QWebUndoCommand.cpp: Copied from Source/WebKit/qt/WebCoreSupport/QtWebComboBox.h.
        (QWebUndoCommand::QWebUndoCommand):
        (QWebUndoCommand::undo):
        (QWebUndoCommand::redo):
        * WebCoreSupport/QWebUndoCommand.h: Copied from Source/WebKit/qt/WebCoreSupport/QtWebComboBox.h.
        (QWebUndoCommand):
        * WebCoreSupport/QWidgetPluginImpl.cpp: Added.
        (QWidgetPluginImpl::~QWidgetPluginImpl):
        (QWidgetPluginImpl::update):
        (QWidgetPluginImpl::setGeometryAndClip):
        (QWidgetPluginImpl::setVisible):
        (QWidgetPluginImpl::setStyleSheet):
        (QWidgetPluginImpl::setWidgetParent):
        (QWidgetPluginImpl::handle):
        * WebCoreSupport/QWidgetPluginImpl.h: Copied from Source/WebKit/qt/WebCoreSupport/QtWebComboBox.h.
        (QWidgetPluginImpl):
        (QWidgetPluginImpl::QWidgetPluginImpl):
        * WebCoreSupport/QtFallbackWebPopup.cpp:
        (WebCore::QtFallbackWebPopup::QtFallbackWebPopup):
        (WebCore::QtFallbackWebPopup::show):
        (WebCore::QtFallbackWebPopup::pageClient):
        * WebCoreSupport/QtFallbackWebPopup.h:
        (QtFallbackWebPopup):
        * WebCoreSupport/QtPluginWidgetAdapter.h: Copied from Source/WebKit/qt/WebCoreSupport/QtWebComboBox.h.
        (QtPluginWidgetAdapter):
        * WebCoreSupport/QtWebComboBox.cpp:
        (WebCore::QtWebComboBox::showPopupAtCursorPosition):
        * WebCoreSupport/QtWebComboBox.h:
        * WebCoreSupport/SearchPopupMenuQt.h:
        (SearchPopupMenuQt):
        * WebCoreSupport/UndoStepQt.cpp:
        (UndoStepQt::UndoStepQt):
        (UndoStepQt::text):
        * WebCoreSupport/UndoStepQt.h:
        (UndoStepQt):
        * WebCoreSupport/WebEventConversion.cpp:
        (WebCore::mouseEventTypeAndMouseButtonFromQEvent):
        (WebKitPlatformWheelEvent):
        (WebCore::WebKitPlatformWheelEvent::applyDelta):
        (WebCore::WebKitPlatformWheelEvent::WebKitPlatformWheelEvent):
        (WebKitPlatformGestureEvent):
        (WebCore::toPlatformEventType):
        (WebCore::WebKitPlatformGestureEvent::WebKitPlatformGestureEvent):
        (WebCore):
        (WebCore::convertWheelEvent):
        (WebCore::convertGesture):
        * WebCoreSupport/WebEventConversion.h:
        (QGestureEventFacade):
        (WebCore):
        * WebCoreSupport/WebSystemInterface.h:
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::loadHtml5Video):
        (tst_QWebPage::multiplePageGroupsAndLocalStorage):
        (tst_QWebPage::thirdPartyCookiePolicy):

2012-11-21  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        Position in QWebHitTestResult does not match documentation
        https://bugs.webkit.org/show_bug.cgi?id=102909

        Reviewed by Simon Hausmann.

        Correct documentation and simplify using the new innerNodeFrame method.

        * Api/qwebframe.cpp:
        (QWebHitTestResultPrivate::QWebHitTestResultPrivate):

2012-11-21  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        Disambiguate innerNodeFramePoint and mainFramePoint
        https://bugs.webkit.org/show_bug.cgi?id=98139

        Reviewed by Julien Chaffraix.

        * Api/qwebframe.cpp:
        (QWebHitTestResultPrivate::QWebHitTestResultPrivate):
        * Api/qwebpage.cpp:
        (QWebPagePrivate::TouchAdjuster::findCandidatePointForTouch):

2012-11-20  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r135295.
        http://trac.webkit.org/changeset/135295
        https://bugs.webkit.org/show_bug.cgi?id=102834

        This patch causes assertion to some layout tests on chromium
        (Requested by jianli on #webkit).

        * Api/qwebframe.cpp:
        (QWebFrame::QWebFrame):
        (QWebFrame::load):
        (QWebFrame::setHtml):
        (QWebFrame::setContent):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setAlternateHtml):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::callErrorPageExtension):

2012-11-20  James Simonsen  <simonjam@chromium.org>

        Consolidate FrameLoader::load() into one function taking a FrameLoadRequest
        https://bugs.webkit.org/show_bug.cgi?id=102151

        Reviewed by Adam Barth.

        * Api/qwebframe.cpp:
        (QWebFrame::QWebFrame):
        (QWebFrame::load):
        (QWebFrame::setHtml):
        (QWebFrame::setContent):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setAlternateHtml):
        (qt_dump_set_accepts_editing):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::callErrorPageExtension):

2012-11-18  Laszlo Gombos  <l.gombos@samsung.com>

        [Qt] Remove remaining traces of symbian
        https://bugs.webkit.org/show_bug.cgi?id=102634

        Reviewed by Kenneth Rohde Christiansen.

        Remove symbian related part from the API documentation.

        * Api/qgraphicswebview.cpp:
        * Api/qwebview.cpp:

2012-11-16  Kihong Kwon  <kihong.kwon@samsung.com>

        Add DeviceController base-class to remove duplication of DeviceXXXControler
        https://bugs.webkit.org/show_bug.cgi?id=96894

        Reviewed by Hajime Morita.

        Change client() to deviceOrientationClient() to get DeviceOrientationClient*.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setMockDeviceOrientation):

2012-11-14  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Fix tst_QWebFrame::setUrlWithPendingLoads() API test
        https://bugs.webkit.org/show_bug.cgi?id=63237

        Reviewed by Jocelyn Turcotte.

        Uncomment this API test, because it works fine now.

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame):
        (tst_QWebFrame::setUrlWithPendingLoads):

2012-11-14  Andras Becsi  <andras.becsi@digia.com>

        [Qt] QStyleFacadeImp should use a QPointer to store the application style
        https://bugs.webkit.org/show_bug.cgi?id=102084

        Reviewed by Simon Hausmann.

        QStyleFacadeImp implicitly creates a default style during the first
        call to QApplication::style() in QStyleFacadeImp::style() but this
        style is deleted when a custom style is set, thus the stored m_style
        raw pointer in QStyleFacadeImp becomes dangling.
        Use a QPointer to cache the style instead of a raw pointer.

        This fixes the start-up crash in the anomaly example.
        (https://bugreports.qt-project.org/browse/QTBUG-27924)

        * WebCoreSupport/QStyleFacadeImp.h:
        (QStyleFacadeImp):

2012-11-13  Andreas Kling  <kling@webkit.org>

        Move inline style logic from ElementAttributeData to StyledElement.
        <http://webkit.org/b/102120>

        Reviewed by Antti Koivisto.

        * Api/qwebelement.cpp:
        (QWebElement::styleProperty):

2012-11-09  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Fix tst_QWebPage::findText

        Reviewed by Simon Hausmann.

        Details of the failure:
        FAIL!  : tst_QWebPage::findText() Compared values are not the same
           Actual   (m_page->selectedHtml().trimmed().replace(regExp, "")): <span>foo</span>
           Expected (subString): foo
           Loc: [/home/joce/dev/webkit/Source/WebKit/qt/tests/qwebpage/tst_qwebpage.cpp(2964)]

        The format returned by selectedHtml changed.
        Make the test a bit more robust by just checking that the HTML
        contains our search value.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::findText):

2012-11-09  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Fix tst_QWebPage::testLocalStorageVisibility

        Reviewed by Simon Hausmann.

        window.localStorage is expected to work for file URLs.
        I'm not sure why it did work when this test was written,
        but I believe that it had the wrong expected value.

        * tests/qwebpage/tst_qwebpage.cpp:

2012-11-08  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Fix tst_QObjectBridge::callQtInvokable

        Reviewed by Simon Hausmann.

        Q_DECLARE_METATYPE now calls qRegisterMetaType so just prevent
        the value from being wrapped by QVariant since this code shouldn't
        be reached anyway.

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (MyQObject::myInvokableWithBrushStyleArg):

2012-11-08  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Fix tst_QWebPage::inputMethods

        Reviewed by Simon Hausmann.

        Details of the failure:
        FAIL!  : tst_QWebPage::inputMethods(QWebView) Compared values are not the same
           Actual (page->settings()->fontFamily(QWebSettings::SerifFont)): FooSerifFont
           Expected (font.family()): Helvetica
           Loc: [Source/WebKit/qt/tests/qwebpage/tst_qwebpage.cpp(1691)]

        The issue was that WebCore wouldn't find FooSerifFont and would have
        RenderStyle::font() return the fallback font it used instead.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::inputMethods):

2012-11-09  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Fix tst_QWebPage::showModalDialog() API test
        https://bugs.webkit.org/show_bug.cgi?id=63244

        Reviewed by Simon Hausmann.

        * tests/qwebpage/tst_qwebpage.cpp:

2012-11-09  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] tst_QWebElement::style() fails because QWebElement::InlineStyle now works as expected
        https://bugs.webkit.org/show_bug.cgi?id=60372

        Reviewed by Simon Hausmann.

        Update the expected value to follow this comment in StylePropertySet::addParsedProperty:
        "Only add properties that have no !important counterpart present"

        * tests/qwebelement/tst_qwebelement.cpp:
        (tst_QWebElement::style):

2012-11-09  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] tst_QWebElement::style() fails because QWebElement::CascadedStyle doesn't work as expected
        https://bugs.webkit.org/show_bug.cgi?id=65244

        Reviewed by Kenneth Rohde Christiansen.

        StyleResolver::styleRulesForElement now takes flags as parameter instead of a bool to specify
        that we want to exclude UI and user style sheets.

        * Api/qwebelement.cpp:
        (QWebElement::styleProperty):
        * tests/qwebelement/tst_qwebelement.cpp:
        (tst_QWebElement::style):

2012-11-09  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Appending "!important" to the property value of QWebElement::setStyleProperty isn't working
        https://bugs.webkit.org/show_bug.cgi?id=101763

        Reviewed by Kenneth Rohde Christiansen.

        In the pastWebCore have been considering the important token of a CSS
        property value if it was followed by !important as well as the
        important parameter of setInlineStyleProperty, but not anymore.

        Since we need to keep the behavior compatible, do the parsing of the
        value and extract the token if present. Ideally this would be passed
        as a parameter to the function but I think it's not worth deprecating
        the old mechanism.
        The parsing is pretty dumb, so this will break applications that
        passed a value with spaces between the "!" and "important".

        This fixes part of tst_QWebElement::style

        * Api/qwebelement.cpp:
        (QWebElement::setStyleProperty):

2012-11-09  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Fix URL issues in tst_qwebframe
        https://bugs.webkit.org/show_bug.cgi?id=101741

        Reviewed by Simon Hausmann.

        * tests/qwebframe/tst_qwebframe.cpp:
        (FakeReply::FakeReply):
        Properly forward the request URL to our custom reply.
        This would cause redirections not to occur. The requestedUrl and setUrlSameUrl tests
        would fail because of this.

        (tst_QWebFrame::setUrlToInvalid):
        - http:/example.com is a valid URL, but not a valid HTTP URL, so remove this check.
        - QCOMPARE uses testlib's toString on the QUrls to compare them and it now
        also output the error description. Since we want to compare the resulting
        URL instead, compare their toEncoded() value.

2012-11-08  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Fix a crash in tst_QWebInspector::attachAndDestroy
        https://bugs.webkit.org/show_bug.cgi?id=101575

        Reviewed by Simon Hausmann.

        It can now happen that destroyInspectorView is called when the Page
        is destroyed. This would call getOrCreateInspector and re-create a
        QWebInspector.

        Since the new instance is created after our setInspector(0) cleanup
        in ~QWebPagePrivate, this runs into the same crash that this line was
        protecting us against.

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorFrontendClientQt::destroyInspectorView):

2012-11-08  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Fix tst_QWebPage::inputMethods on Qt5
        https://bugs.webkit.org/show_bug.cgi?id=101571

        Reviewed by Simon Hausmann.

        QEvent::RequestSoftwareInputPanel isn't passed through event filters anymore.
        Use QInputMethodPrivate::testContext instead to capture input method events,
        the same way as qtbase tests like tst_QTextEdit are doing.

        * tests/qwebpage/tst_qwebpage.cpp:
        (TestInputContext::TestInputContext):
        (TestInputContext::~TestInputContext):
        (TestInputContext):
        (TestInputContext::showInputPanel):
        (TestInputContext::hideInputPanel):
        (TestInputContext::isInputPanelVisible):
        (tst_QWebPage::inputMethods):

2012-11-09  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Unmark now passing tests
        https://bugs.webkit.org/show_bug.cgi?id=65531

        Reviewed by Csaba Osztrogonác.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::viewModes):

2012-11-07  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] API test tst_qwebinspector crashes
        https://bugs.webkit.org/show_bug.cgi?id=101599

        Reviewed by Simon Hausmann.

        Delete the internal inspector from QWebPage destructor, instead of causing recursions
        between QWebPagePrivate::setInspector and QWebInspector::setPage.

        Also separate the three tests in tst_QWebInspector to better tell which one is failing.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::~QWebPagePrivate):
        (QWebPagePrivate::setInspector):
        * tests/qwebinspector/tst_qwebinspector.cpp:
        (tst_QWebInspector):
        (tst_QWebInspector::attachAndDestroyPageFirst):
        (tst_QWebInspector::attachAndDestroyInspectorFirst):
        (tst_QWebInspector::attachAndDestroyInternalInspector):

2012-11-08  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Open link in this window action
        https://bugs.webkit.org/show_bug.cgi?id=101226

        Reviewed by Csaba Osztrogonác.

        * Api/qwebpage.cpp: Fix after r133763, move the initialization of OpenLinkInThisWindow to the proper place.

2012-11-07  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Open link in this window action
        https://bugs.webkit.org/show_bug.cgi?id=101226

        Reviewed by Simon Hausmann.

        Adds the action to QtWebKit.

        * Api/qwebpage.cpp:
        (webActionForContextMenuAction):
        (QWebPage::triggerAction):
        (QWebPage::action):
        * Api/qwebpage.h:

2012-11-01  Stephen White  <senorblanco@chromium.org>

        Unreviewed, rolling out r133143.
        http://trac.webkit.org/changeset/133143
        https://bugs.webkit.org/show_bug.cgi?id=96894

        Causing content_browsertests failures

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setMockDeviceOrientation):

2012-11-01  Kihong Kwon  <kihong.kwon@samsung.com>

        Add DeviceController base-class to remove duplication of DeviceXXXControler
        https://bugs.webkit.org/show_bug.cgi?id=96894

        Reviewed by Hajime Morita.

        Change client() to deviceOrientationClient() to get DeviceOrientationClient*.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setMockDeviceOrientation):

2012-10-31  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r133016.
        http://trac.webkit.org/changeset/133016
        https://bugs.webkit.org/show_bug.cgi?id=100856

        broke compile-webkit on several bots (Requested by podivilov
        on #webkit).

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setMockDeviceOrientation):

2012-10-31  Kihong Kwon  <kihong.kwon@samsung.com>

        Add DeviceController base-class to remove duplication of DeviceXXXControler
        https://bugs.webkit.org/show_bug.cgi?id=96894

        Reviewed by Hajime Morita.

        Change client() to deviceOrientationClient() to get DeviceOrientationClient*.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setMockDeviceOrientation):

2012-10-30  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [QT][DRT] Remove unneeded testRunner.setMediaType() implementation
        https://bugs.webkit.org/show_bug.cgi?id=100740

        Reviewed by Kenneth Rohde Christiansen.

        Removed unneeded testRunner.setMediaType() implementation, as tests use
        cross-platform window.internals.settings.setMediaTypeOverride instead.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-10-24  Brady Eidson  <beidson@apple.com>

        Add a strategy for loader customization.
        https://bugs.webkit.org/show_bug.cgi?id=100278

        Reviewed by Alexey Proskuryakov.

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::createLoaderStrategy):
        * WebCoreSupport/PlatformStrategiesQt.h:
        (PlatformStrategiesQt):

2012-10-23  Alexey Proskuryakov  <ap@apple.com>

        Add a strategy for shared workers
        https://bugs.webkit.org/show_bug.cgi?id=100165

        Reviewed by Brady Eidson.

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::createPasteboardStrategy):
        (PlatformStrategiesQt::createSharedWorkerStrategy):
        (PlatformStrategiesQt::createVisitedLinkStrategy):
        * WebCoreSupport/PlatformStrategiesQt.h:

2012-10-24  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Expose useful WebCore::Settings
        https://bugs.webkit.org/show_bug.cgi?id=100239

        Reviewed by Kenneth Rohde Christiansen.

        Expose the two settings CaretBrowsingEnabled and NotificationsEnabled.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):
        (QWebSettings::QWebSettings):
        * Api/qwebsettings.h:

2012-10-23  Andras Becsi  <andras.becsi@digia.com>

        Remove devicePixelRatio from ViewportAttributes
        https://bugs.webkit.org/show_bug.cgi?id=99845

        Reviewed by Adam Barth.

        Pass the device pixel ratio as a function argument to
        match the new API.

        * Api/qwebpage.cpp:
        (QWebPage::viewportAttributesForSize):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::viewportAsText):

2012-10-23  Simon Hausmann  <simon.hausmann@digia.com>

        Unreviewed build fix with newer Qt 5.

        QPlastiqueStyle has been removed, but as pointed out by Jens it's also not
        maintained anymore and hence safe to remove. We can do tweaks with the new
        fusion style if required.

        * WebCoreSupport/QStyleFacadeImp.cpp:
        (WebKit::QStyleFacadeImp::paintInnerSpinButton):

2012-10-22  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Fix build without QtWidgets
        https://bugs.webkit.org/show_bug.cgi?id=99981

        Reviewed by Tor Arne Vestbø.

        Remove dependency to QtWidgets that is not needed here anymore since
        the removal of the QtQuick1 code.

        * declarative/experimental/experimental.pri:
        * declarative/public.pri:

2012-10-22  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Fix "ASSERTION FAILED: !document->inPageCache()" when loading a page
        https://bugs.webkit.org/show_bug.cgi?id=98514

        Reviewed by Kenneth Rohde Christiansen.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::transitionToCommittedForNewPage): Use FrameView::fixedVisibleContentRect
        instead of FrameView::visibleContentRect as the source to always keep the correct state.

2012-10-22  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [Qt] Basic gesture event handling
        https://bugs.webkit.org/show_bug.cgi?id=66173

        Reviewed by Simon Hausmann.

        Implement basic handling of QGestureEvent converting and forwarding
        Tap and TapAndHold gestures to WebCore.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::gestureEvent):
        (QWebPage::event):
        * Api/qwebpage_p.h:
        (QWebPagePrivate):
        * WebCoreSupport/WebEventConversion.cpp:
        (WebKitPlatformGestureEvent):
        (WebCore::WebKitPlatformGestureEvent::WebKitPlatformGestureEvent):
        (WebCore::convertGesture):
        * WebCoreSupport/WebEventConversion.h:

2012-10-17  Tor Arne Vestbø  <tor.arne.vestbo@digia.com>

        [Qt] Modularize documentation for QtWebKit

        Running 'make docs' would fail unless 'make qmake_all' was ran first,
        but qmake_all involved generating all the derived sources, which seems
        overly complex just for building documentation.

        We solve this by preventing all subdirs except QtWebKit from having a
        docs target. This would normally work fine on its own, but since we
        use CONFIG += ordered, there's now a missing doc target for the
        immediate dependency of the QtWebKit subdir. We solve this by adding
        a dummy-target ourselves.

        Finally, we clean up the qdocconf file to match the rest of the Qt
        documentation modularization efforts.

        Reviewed by Simon Hausmann.

        * docs/docs.pri: Removed.
        * docs/qtwebkit.qdocconf: Removed.

2012-10-15  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Separate Qt WebKit into Qt WebKit and Qt WebKit Widgets
        https://bugs.webkit.org/show_bug.cgi?id=88162

        Reviewed by Kenneth Rohde Christiansen.

        Rename the QtWebKit module to QtWebKitWidgets.

        * declarative/experimental/experimental.pri:
        * declarative/public.pri:
        * docs/webkitsnippets/simple/simple.pro:
        * docs/webkitsnippets/webpage/webpage.pro:
        * tests/tests.pri:

2012-10-10  Jon Lee  <jonlee@apple.com>

        [WK2] Activate plugins when user clicks on snapshot
        https://bugs.webkit.org/show_bug.cgi?id=98328
        <rdar://problem/12426681>

        Reviewed by Brady Eidson.

        * WebCoreSupport/FrameLoaderClientQt.h:
        (WebCore::FrameLoaderClientQt::recreatePlugin): Stub implementation of recreatePlugin().

2012-10-10  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] Test drivers should handle repaint rects
        https://bugs.webkit.org/show_bug.cgi?id=68870

        Reviewed by Zoltan Herczeg.

        Added helpers to enable and get the repaint rects.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setTrackRepaintRects):
        (DumpRenderTreeSupportQt::trackRepaintRects):
        (DumpRenderTreeSupportQt::getTrackedRepaintRects):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-10-08  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Make RenderThemeQStyle/ScrollbarThemeQStyle compile without QStyle/QtWidgets
        https://bugs.webkit.org/show_bug.cgi?id=98268

        Reviewed by Tor Arne Vestbø.

        Extracted QStyle/QWidget related code into a QWebStyle class that implements the QStyleFacade interface.

        QStyleFacade is a pure interface that lives in WebCore/platform/qt
        (next to RenderThemeQStyle and ScrollbarThemeQStyle) and provides a
        minimal interface of what we need to draw with QStyle as well as basic
        hit testing and metric retrieval. It also provides a
        QStyleFacadeOption class that aggregates common meta-data for
        rendering primitives, such as direction, rectangle, state (sunken,
        enabled, etc.) or palette. It also provides some more slider/scrollbar
        specific fields in a slider sub-structure.

        RenderThemeQStyle/ScrollbarThemeQStyle used to instantiate specific QStyleOption sub-classes and populate
        them with state information from render objects, before calling straight to QStyle. Most of the common code
        was encapsulated in StylePainterQStyle.

        The new RenderThemeQStyle/ScrolllbarThemeQStyle uses common code in
        StylePainterQStyle to populate state into QStyleFacadeOption before
        calling into QStyleFacade.

        The style facade is then implemented by QStyleFacadeImp, which extracts
        meta-data from QStyleFacadeOption arguments, populates style
        primitive specific QStyleOption objects and then calls on QStyle.

        RenderThemeQStyle/ScrollbarThemeQStyle can only use interface methods
        from QStyleFacade. QStyleFacadeImp on the other hand will live in the
        separate QtWebKitWidgets library in the future and therefore cannot use
        any WebCore types.

        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebCore::initializeWebCoreQt):
        * WebCoreSupport/QStyleFacadeImp.cpp: Added.
        (WebKit):
        (WebKit::convertToQStyleState):
        (WebKit::convertToQStyleSubControl):
        (WebKit::initGenericStyleOption):
        (WebKit::initSpecificStyleOption):
        (MappedStyleOption):
        (WebKit::MappedStyleOption::MappedStyleOption):
        (WebKit::convertPixelMetric):
        (WebKit::convertToQStyleFacadeSubControl):
        (WebKit::QStyleFacadeImp::QStyleFacadeImp):
        (WebKit::QStyleFacadeImp::~QStyleFacadeImp):
        (WebKit::QStyleFacadeImp::buttonSubElementRect):
        (WebKit::QStyleFacadeImp::findFrameLineWidth):
        (WebKit::QStyleFacadeImp::simplePixelMetric):
        (WebKit::QStyleFacadeImp::buttonMargin):
        (WebKit::QStyleFacadeImp::sliderLength):
        (WebKit::QStyleFacadeImp::sliderThickness):
        (WebKit::QStyleFacadeImp::progressBarChunkWidth):
        (WebKit::QStyleFacadeImp::getButtonMetrics):
        (WebKit::QStyleFacadeImp::sizeFromContents):
        (WebKit::QStyleFacadeImp::paintButton):
        (WebKit::QStyleFacadeImp::paintTextField):
        (WebKit::QStyleFacadeImp::paintComboBox):
        (WebKit::QStyleFacadeImp::paintComboBoxArrow):
        (WebKit::QStyleFacadeImp::paintSliderTrack):
        (WebKit::QStyleFacadeImp::paintSliderThumb):
        (WebKit::QStyleFacadeImp::paintInnerSpinButton):
        (WebKit::QStyleFacadeImp::paintProgressBar):
        (WebKit::QStyleFacadeImp::scrollBarExtent):
        (WebKit::QStyleFacadeImp::scrollBarMiddleClickAbsolutePositionStyleHint):
        (WebKit::QStyleFacadeImp::paintScrollCorner):
        (WebKit::QStyleFacadeImp::hitTestScrollBar):
        (WebKit::QStyleFacadeImp::scrollBarSubControlRect):
        (WebKit::QStyleFacadeImp::paintScrollBar):
        (WebKit::QStyleFacadeImp::widgetForPainter):
        (WebKit::QStyleFacadeImp::style):
        * WebCoreSupport/QStyleFacadeImp.h: Added.
        (WebCore):
        (WebKit):
        (QStyleFacadeImp):
        (WebKit::QStyleFacadeImp::create):
        (WebKit::QStyleFacadeImp::isValid):

2012-10-08  Zoltan Horvath  <zoltan@webkit.org>

        [Qt] r122720 causes performance regression with DirectFB on ARMv7
        https://bugs.webkit.org/show_bug.cgi?id=97548

        Reviewed by Jocelyn Turcotte.

        Revert the rest of r122720. This change modifies the NativeImagePtr from QImage* to QPixmap*.

        Covered by existing tests.

        * Api/qwebframe.cpp:
        (QWebHitTestResultPrivate::QWebHitTestResultPrivate):
        * Api/qwebhistory.cpp:
        (QWebHistoryItem::icon):
        * Api/qwebsettings.cpp:
        (QWebSettings::iconForUrl):
        (QWebSettings::setWebGraphic):
        (QWebSettings::webGraphic):
        * WebCoreSupport/DragClientQt.cpp:
        (WebCore::DragClientQt::startDrag):
        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebCore::initializeWebCoreQt):

2012-10-07  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Rename first/second to key/value in HashMap iterators
        https://bugs.webkit.org/show_bug.cgi?id=82784

        Reviewed by Eric Seidel.

        * Api/qwebpage.cpp:
        (extractContentTypeFromPluginVector):
        * Api/qwebplugindatabase.cpp:
        (QWebPluginInfo::mimeTypes):
        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::getPluginInfo):

2012-10-05  Simon Hausmann  <simon.hausmann@digia.com>

        Unreviewed, rolling out r130495.
        http://trac.webkit.org/changeset/130495
        https://bugs.webkit.org/show_bug.cgi?id=98268

        Made WK2 tests crash.

        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebCore::initializeWebCoreQt):
        * WebCoreSupport/QStyleFacadeImp.cpp: Removed.
        * WebCoreSupport/QStyleFacadeImp.h: Removed.
        * WebCoreSupport/RenderThemeQStyle.cpp: Renamed from Source/WebCore/platform/qt/RenderThemeQStyle.cpp.
        (WebCore):
        (WebCore::initStyleOption):
        (WebCore::RenderThemeQStyle::getStylePainter):
        (WebCore::StylePainterQStyle::StylePainterQStyle):
        (WebCore::StylePainterQStyle::init):
        (WebCore::RenderThemeQStyle::create):
        (WebCore::RenderThemeQStyle::RenderThemeQStyle):
        (WebCore::RenderThemeQStyle::~RenderThemeQStyle):
        (WebCore::RenderThemeQStyle::fallbackStyle):
        (WebCore::RenderThemeQStyle::setPaletteFromPageClientIfExists):
        (WebCore::RenderThemeQStyle::qStyle):
        (WebCore::RenderThemeQStyle::findFrameLineWidth):
        (WebCore::RenderThemeQStyle::inflateButtonRect):
        (WebCore::RenderThemeQStyle::computeSizeBasedOnStyle):
        (WebCore::RenderThemeQStyle::adjustButtonStyle):
        (WebCore::RenderThemeQStyle::setButtonPadding):
        (WebCore::RenderThemeQStyle::paintButton):
        (WebCore::RenderThemeQStyle::paintTextField):
        (WebCore::RenderThemeQStyle::adjustTextAreaStyle):
        (WebCore::RenderThemeQStyle::paintTextArea):
        (WebCore::RenderThemeQStyle::setPopupPadding):
        (WebCore::RenderThemeQStyle::colorPalette):
        (WebCore::RenderThemeQStyle::paintMenuList):
        (WebCore::RenderThemeQStyle::adjustMenuListButtonStyle):
        (WebCore::RenderThemeQStyle::paintMenuListButton):
        (WebCore::RenderThemeQStyle::animationDurationForProgressBar):
        (WebCore::RenderThemeQStyle::paintProgressBar):
        (WebCore::RenderThemeQStyle::paintSliderTrack):
        (WebCore::RenderThemeQStyle::adjustSliderTrackStyle):
        (WebCore::RenderThemeQStyle::paintSliderThumb):
        (WebCore::RenderThemeQStyle::adjustSliderThumbStyle):
        (WebCore::RenderThemeQStyle::paintSearchField):
        (WebCore::RenderThemeQStyle::adjustSearchFieldDecorationStyle):
        (WebCore::RenderThemeQStyle::paintSearchFieldDecoration):
        (WebCore::RenderThemeQStyle::adjustSearchFieldResultsDecorationStyle):
        (WebCore::RenderThemeQStyle::paintSearchFieldResultsDecoration):
        (WebCore::RenderThemeQStyle::paintInnerSpinButton):
        (WebCore::RenderThemeQStyle::initializeCommonQStyleOptions):
        (WebCore::RenderThemeQStyle::adjustSliderThumbSize):
        * WebCoreSupport/RenderThemeQStyle.h: Renamed from Source/WebCore/platform/qt/RenderThemeQStyle.h.
        (WebCore):
        (RenderThemeQStyle):
        (StylePainterQStyle):
        (WebCore::StylePainterQStyle::isValid):
        (WebCore::StylePainterQStyle::drawPrimitive):
        (WebCore::StylePainterQStyle::drawControl):
        (WebCore::StylePainterQStyle::drawComplexControl):
        * WebCoreSupport/ScrollbarThemeQStyle.cpp: Renamed from Source/WebCore/platform/qt/ScrollbarThemeQStyle.cpp.
        (WebCore):
        (WebCore::ScrollbarThemeQStyle::~ScrollbarThemeQStyle):
        (WebCore::scPart):
        (WebCore::scrollbarPart):
        (WebCore::styleOptionSlider):
        (WebCore::ScrollbarThemeQStyle::paint):
        (WebCore::ScrollbarThemeQStyle::hitTest):
        (WebCore::ScrollbarThemeQStyle::shouldCenterOnThumb):
        (WebCore::ScrollbarThemeQStyle::invalidatePart):
        (WebCore::ScrollbarThemeQStyle::scrollbarThickness):
        (WebCore::ScrollbarThemeQStyle::thumbPosition):
        (WebCore::ScrollbarThemeQStyle::thumbLength):
        (WebCore::ScrollbarThemeQStyle::trackPosition):
        (WebCore::ScrollbarThemeQStyle::trackLength):
        (WebCore::ScrollbarThemeQStyle::paintScrollCorner):
        (WebCore::ScrollbarThemeQStyle::style):
        * WebCoreSupport/ScrollbarThemeQStyle.h: Renamed from Source/WebCore/platform/qt/ScrollbarThemeQStyle.h.
        (WebCore):
        (ScrollbarThemeQStyle):

2012-10-05  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Make RenderThemeQStyle/ScrollbarThemeQStyle compile without QStyle/QtWidgets
        https://bugs.webkit.org/show_bug.cgi?id=98268

        Reviewed by Tor Arne Vestbø.

        Extracted QStyle/QWidget related code into a QWebStyle class that implements the QStyleFacade interface.

        QStyleFacade is a pure interface that lives in WebCore/platform/qt
        (next to RenderThemeQStyle and ScrollbarThemeQStyle) and provides a
        minimal interface of what we need to draw with QStyle as well as basic
        hit testing and metric retrieval. It also provides a
        QStyleFacadeOption class that aggregates common meta-data for
        rendering primitives, such as direction, rectangle, state (sunken,
        enabled, etc.) or palette. It also provides some more slider/scrollbar
        specific fields in a slider sub-structure.

        RenderThemeQStyle/ScrollbarThemeQStyle used to instantiate specific QStyleOption sub-classes and populate
        them with state information from render objects, before calling straight to QStyle. Most of the common code
        was encapsulated in StylePainterQStyle.

        The new RenderThemeQStyle/ScrolllbarThemeQStyle uses common code in
        StylePainterQStyle to populate state into QStyleFacadeOption before
        calling into QStyleFacade.

        The style facade is then implemented by QStyleFacadeImp, which extracts
        meta-data from QStyleFacadeOption arguments, populates style
        primitive specific QStyleOption objects and then calls on QStyle.

        RenderThemeQStyle/ScrollbarThemeQStyle can only use interface methods
        from QStyleFacade. QStyleFacadeImp on the other hand will live in the
        separate QtWebKitWidgets library in the future and therefore cannot use
        any WebCore types.

        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebCore::initializeWebCoreQt):
        * WebCoreSupport/QStyleFacadeImp.cpp: Added.
        (WebKit):
        (WebKit::convertToQStyleState):
        (WebKit::convertToQStyleSubControl):
        (WebKit::initGenericStyleOption):
        (WebKit::initSpecificStyleOption):
        (MappedStyleOption):
        (WebKit::MappedStyleOption::MappedStyleOption):
        (WebKit::convertPixelMetric):
        (WebKit::convertToQStyleFacadeSubControl):
        (WebKit::QStyleFacadeImp::QStyleFacadeImp):
        (WebKit::QStyleFacadeImp::~QStyleFacadeImp):
        (WebKit::QStyleFacadeImp::buttonSubElementRect):
        (WebKit::QStyleFacadeImp::findFrameLineWidth):
        (WebKit::QStyleFacadeImp::simplePixelMetric):
        (WebKit::QStyleFacadeImp::buttonMargin):
        (WebKit::QStyleFacadeImp::sliderLength):
        (WebKit::QStyleFacadeImp::sliderThickness):
        (WebKit::QStyleFacadeImp::progressBarChunkWidth):
        (WebKit::QStyleFacadeImp::getButtonMetrics):
        (WebKit::QStyleFacadeImp::sizeFromContents):
        (WebKit::QStyleFacadeImp::paintButton):
        (WebKit::QStyleFacadeImp::paintTextField):
        (WebKit::QStyleFacadeImp::paintComboBox):
        (WebKit::QStyleFacadeImp::paintComboBoxArrow):
        (WebKit::QStyleFacadeImp::paintSliderTrack):
        (WebKit::QStyleFacadeImp::paintSliderThumb):
        (WebKit::QStyleFacadeImp::paintInnerSpinButton):
        (WebKit::QStyleFacadeImp::paintProgressBar):
        (WebKit::QStyleFacadeImp::scrollBarExtent):
        (WebKit::QStyleFacadeImp::scrollBarMiddleClickAbsolutePositionStyleHint):
        (WebKit::QStyleFacadeImp::paintScrollCorner):
        (WebKit::QStyleFacadeImp::hitTestScrollBar):
        (WebKit::QStyleFacadeImp::scrollBarSubControlRect):
        (WebKit::QStyleFacadeImp::paintScrollBar):
        (WebKit::QStyleFacadeImp::widgetForPainter):
        (WebKit::QStyleFacadeImp::style):
        * WebCoreSupport/QStyleFacadeImp.h: Added.
        (WebCore):
        (WebKit):
        (QStyleFacadeImp):
        (WebKit::QStyleFacadeImp::create):
        (WebKit::QStyleFacadeImp::isValid):

2012-10-05  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Remove dead code
        https://bugs.webkit.org/show_bug.cgi?id=98491

        Reviewed by Jocelyn Turcotte.

        This code was added long time ago for a Symbian related project and is
        not needed anymore.

        * Api/qwebframe.cpp:

2012-10-04  Simon Fraser  <simon.fraser@apple.com>

        Final part of "sync" to "flush" renaming
        https://bugs.webkit.org/show_bug.cgi?id=98430

        Reviewed by Tim Horton.

        Change method names on GraphicsLayer and GraphicsLayerClient that
        refer to "sync" to use the term "flush" instead, to be consistent
        with the rest of the code.

        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::TextureMapperLayerClientQt::syncRootLayer):

2012-10-04  Simon Fraser  <simon.fraser@apple.com>

        Standardize on "flush" terminology for compositing layer flushing/syncing
        https://bugs.webkit.org/show_bug.cgi?id=98321

        Reviewed by Simon Fraser.

        Rename compositing-related methods that refer to "syncing" to instead
        refer to "flushing".

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::scheduleCompositingLayerFlush):
        * WebCoreSupport/ChromeClientQt.h:
        (ChromeClientQt):
        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQGraphicsWidget::syncLayers):

2012-10-03  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] Enable mock scrollbars
        https://bugs.webkit.org/show_bug.cgi?id=98011

        Reviewed by Csaba Osztrogonác.

        Added helper to enable mock scrollbars.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::enableMockScrollbars):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-10-01  Brady Eidson  <beidson@apple.com>

        Remove the Safari 2 -> Safari 3 icon database import code.
        https://bugs.webkit.org/show_bug.cgi?id=98113

        Reviewed by Maciej Stachowiak.

        Nuke the performImport() IconDatabaseClient method.

        * WebCoreSupport/IconDatabaseClientQt.cpp:
        * WebCoreSupport/IconDatabaseClientQt.h:
        (IconDatabaseClientQt):

2012-09-28  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        Code inside FrameLoaderClient::canShowMIMEType() implementations can be shared among different WK ports
        https://bugs.webkit.org/show_bug.cgi?id=97547

        Reviewed by Adam Barth.

        Newly added WebCore::MIMETypeRegistry::canShowMIMEType() function is used
        inside WebCore::FrameLoaderClientQt::canShowMIMEType().

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::canShowMIMEType):

2012-09-27  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        Unify event handling of middle mouse button.
        https://bugs.webkit.org/show_bug.cgi?id=97690

        Reviewed by Tony Chang.

        Remove port specific handling of middle mouse button press.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::mouseReleaseEvent):
        * Api/qwebpage_p.h:
        (QWebPagePrivate):

2012-09-26  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Remove Qt Quick 1 support

        Reviewed by Kenneth Rohde Christiansen.

        It is being moved to the Qt5 QtQuick1 module.

        A circular dependency exists otherwise in Qt, where QtWebKit would depend on QtQuick1,
        which in turn depends on QtTools (for designer plugin), which in turn depends on QtWebKit
        (for assistant help html rendering).

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):
        * declarative/public.pri:
        * declarative/qdeclarativewebview.cpp: Removed.
        * declarative/qdeclarativewebview_p.h: Removed.
        * tests/qdeclarativewebview/qdeclarativewebview.pro: Removed.
        * tests/qdeclarativewebview/resources/basic.html: Removed.
        * tests/qdeclarativewebview/resources/basic.png: Removed.
        * tests/qdeclarativewebview/resources/basic.qml: Removed.
        * tests/qdeclarativewebview/resources/elements.html: Removed.
        * tests/qdeclarativewebview/resources/elements.qml: Removed.
        * tests/qdeclarativewebview/resources/forward.html: Removed.
        * tests/qdeclarativewebview/resources/forward.png: Removed.
        * tests/qdeclarativewebview/resources/javaScript.html: Removed.
        * tests/qdeclarativewebview/resources/javaScript.qml: Removed.
        * tests/qdeclarativewebview/resources/loadError.qml: Removed.
        * tests/qdeclarativewebview/resources/newwindows.html: Removed.
        * tests/qdeclarativewebview/resources/newwindows.qml: Removed.
        * tests/qdeclarativewebview/resources/propertychanges.qml: Removed.
        * tests/qdeclarativewebview/resources/sample.html: Removed.
        * tests/qdeclarativewebview/resources/sethtml.qml: Removed.
        * tests/qdeclarativewebview/resources/webviewbackgroundcolor.qml: Removed.
        * tests/qdeclarativewebview/resources/webviewtest.qml: Removed.
        * tests/qdeclarativewebview/resources/webviewtestdefault.qml: Removed.
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp: Removed.
        * tests/qdeclarativewebview/tst_qdeclarativewebview.qrc: Removed.

2012-09-25  Beth Dakin  <bdakin@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=95397
        Need to merge didFirstVisuallyNonEmptyLayout and 
        didNewFirstVisuallyNonEmptyLayout
        -and corresponding-
        <rdar://problem/10791680>

        Reviewed by Sam Weinig.

        Remove dispatchDidFirstLayout, 
        dispatchDidFirstVisuallyNonEmptyLayout, and 
        dispatchDidNewFirstVisuallyNonEmptyLayout. Their functionality 
        is now replaced by dispatchDidLayout(LayoutMilestoneOptions)
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidLayout):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (FrameLoaderClientQt):

        It is now necessary to opt into getting any of the 
        "layout milestone" notifications.
        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):

2012-09-25  Simon Hausmann  <simon.hausmann@digia.com>

        [Qt] Fix failing assertion when calling QWebSettings::setIconDatabasePath multiple times

        Reviewed by Jocelyn Turcotte.

        This happens in various auto-tests. We can implement this by closing the database before
        opening it with the new path.

        * Api/qwebsettings.cpp:
        (QWebSettings::setIconDatabasePath):

2012-09-24  Benjamin Poulain  <bpoulain@apple.com>

        Fix Geolocation error reporting in the test support
        https://bugs.webkit.org/show_bug.cgi?id=97386

        Reviewed by Sam Weinig.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setMockGeolocationPositionUnavailableError):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-09-20  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Enable CSS regions by default
        https://bugs.webkit.org/show_bug.cgi?id=97196

        Reviewed by Dirk Schulze.

        * Api/qwebsettings.cpp:
        (QWebSettings::QWebSettings):

2012-09-17  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] Use UndoStep::editingAction() to set the text of undo/redo actions
        https://bugs.webkit.org/show_bug.cgi?id=96921

        Reviewed by Ryosuke Niwa.

        Set the text of QUndoCommands we create for undo/redo actions based on the
        editing action from UndoStep.

        This change is visible using QtTestBrowser, and looking at the Edit menu after
        doing HTML editing changes. I've used http://simple-rte.rniwa.com for testing.

        * WebCoreSupport/UndoStepQt.cpp:
        (undoNameForEditAction): This function returns a localized name of the action.
        (UndoStepQt::UndoStepQt): Set the text based on UndoStep::editingAction.
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage):
        (tst_QWebPage::undoActionHaveCustomText): Create a new test to verify that the text
        describing the undo action after inserting a text and indenting the text is different.

2012-09-17  Leo Franchi  <lfranchi@kde.org>

        [Qt] Inspector WebSocket backend protocol update
        https://bugs.webkit.org/show_bug.cgi?id=77031

        Also adds support for multi-frame messages and non-text messages.
        Thanks to Jocelyn Turcotte for most of the WebSocket update code!

        Reviewed by Simon Hausmann.

        * WebCoreSupport/InspectorServerQt.cpp:
        (WebCore):
        (WebCore::generateWebSocketChallengeResponse):
        (WebCore::InspectorServerRequestHandlerQt::tcpReadyRead):
        (WebCore::InspectorServerRequestHandlerQt::webSocketSend):
        (WebCore::applyMask):
        (WebCore::InspectorServerRequestHandlerQt::webSocketReadyRead):
        * WebCoreSupport/InspectorServerQt.h:
        (InspectorServerRequestHandlerQt):

2012-09-15  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] QDoc fixes for Qt 5 documentation
        https://bugs.webkit.org/show_bug.cgi?id=96796

        Reviewed by Simon Hausmann.

        Produce fewer warnings and a better documentation.
        Having two QML modules providing a WebView component is a bit too much for poor old qdoc to
        cope with (or would require a lot of painful disambiguation by hand). Since the plan is to have
        QDeclarativeWebView living in the qtquick1 module, we can already take it out of the 
        documentation generation for now.

        * declarative/qdeclarativewebview.cpp: s/qmlclass/qmltype/ out of principle
        * docs/qtwebkit.qdocconf: Remove the \i alias that caused a warning. Use *.h as headers suffix, not sources.
        Also remove QDeclarativeWebView from the documentation.

2012-09-13  Lauro Neto  <lauro.neto@openbossa.org>

        [Qt][WK2] fast/forms/access-key-for-all-elements.html fails
        https://bugs.webkit.org/show_bug.cgi?id=73917

        Reviewed by Simon Hausmann.

        Access-key tests were failing due to hardcoded Mac OS X in the
        Qt WK2 user agent string. This commit moves the WK1 implementation
        to a shared one to be used by both versions.

        Change QWebPage to use the shared user agent implementation.

        * Api/qwebpage.cpp:
        (QWebPage::userAgentForUrl):

2012-09-13  Oswald Buddenhagen  <oswald.buddenhagen@nokia.com>

        [Qt] Fix qdoc executable preparation

        Reviewed by Tor Arne Vestbø.

        * docs/docs.pri:

2012-09-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r127876.
        http://trac.webkit.org/changeset/127876
        https://bugs.webkit.org/show_bug.cgi?id=96600

        mouse click doesn't work for spin button if spin button in
        iframe (Requested by yosin on #webkit).

        * Api/qwebframe.cpp:
        (QWebFrame::hitTestContent):
        * Api/qwebpage.cpp:
        (QWebPagePrivate::handleSoftwareInputPanel):
        (QWebPagePrivate::TouchAdjuster::findCandidatePointForTouch):
        (QWebPage::updatePositionDependentActions):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForNavigationAction):

2012-09-12  Roland Takacs  <rtakacs@inf.u-szeged.hu>

        [Qt] Segmentation fault when closing QtTestBrowser
        https://bugs.webkit.org/show_bug.cgi?id=95003

        Reviewed by Simon Hausmann.

        Defined a new QObject* variable that points to the QGLWidget that was created
        in 'createPlatformGraphicsContext3DFromWidget'.
        It is neccessary for deallocating it.

        * WebCoreSupport/PageClientQt.cpp:
        (createPlatformGraphicsContext3DFromWidget):
        (WebCore::PageClientQWidget::createPlatformGraphicsContext3D):
        (WebCore::PageClientQGraphicsWidget::createPlatformGraphicsContext3D):
        * WebCoreSupport/PageClientQt.h:
        (PageClientQWidget):
        (PageClientQGraphicsWidget):

2012-09-12  Andras Becsi  <andras.becsi@nokia.com>

        [Qt] Add module identifier directive to the qmldir files
        https://bugs.webkit.org/show_bug.cgi?id=96406

        Reviewed by Simon Hausmann.

        Qt5 QML modules need to be identified. Type registrations are only permitted
        into the namespace identified in the qmldir file's module identifier directive.
        Additionally this also facilitates the protection against external registrations.
        This patch suppresses a warning when importing the QtWebKit module.

        * declarative/experimental/qmldir:
        * declarative/qmldir:

2012-09-11  Marcelo Lira  <marcelo.lira@openbossa.org>

        Restore original value of mock scrollbars enabled in InternalSettings
        https://bugs.webkit.org/show_bug.cgi?id=87680

        Reviewed by Adam Barth.

        Added backup support for mock scrollbars state in
        InternalSettings::Backup, and removed support for these
        from Qt's DumpRenderTree.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-09-11  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Add a configure step to the Qt build system

        This allows building the Qt port using just 'qmake WebKit.pro'. Using
        the build-webkit script is still supported, and will add slightly more
        logic to the build, such as detecting the need for clean or incremental
        builds.

        Internally, the build system now uses a new variable, WEBKIT_CONFIG, for
        all things related to configuring the build, such as use/have/enable flags,
        and these are translated to defines in default_post. Project files should
        no longer check contains(DEFINES,...) to detect features, but use the new
        enable?(), use?(), and have?() functions. The no_webkit1 and no_webkit2
        options have been translated into WEBKIT_CONFIG options as well, and can
        be checked using build?().

        Reviewed by Simon Hausmann.

        * declarative/declarative.pro:
        * declarative/public.pri:
        * tests/qgraphicswebview/qgraphicswebview.pro:

2012-09-11  Andras Becsi  <andras.becsi@nokia.com>

        [Qt][WK2] Fix the build with recent Qt5
        https://bugs.webkit.org/show_bug.cgi?id=96283

        Reviewed by Simon Hausmann.

        We should not use deprecated Qt API because doing that results
        in build failure since all the deprecated API was disabled
        in qtbase (https://codereview.qt-project.org/#change,24890).

        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView::widgetsRenderingThroughCache):
        (tst_QGraphicsWebView::setPalette):
        (tst_QGraphicsWebView::compareCanvasToImage):
        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::ownership):
        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::popupFocus):
        (tst_QWebFrame::inputFieldFocus):
        (tst_QWebFrame::evaluateWillCauseRepaint):
        * tests/qwebpage/tst_qwebpage.cpp:
        (Navigation):
        (PluginCounterPage):
        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::reusePage):
        (tst_QWebView::focusInputTypes):
        (tst_QWebView::setPalette):
        (tst_QWebView::renderingAfterMaxAndBack):

2012-09-09  Emil A Eklund  <eae@chromium.org>

        Rename Node::getRect/getPixelSnappedRect and remove ContainerNode::getRect
        https://bugs.webkit.org/show_bug.cgi?id=81413

        Reviewed by David Hyatt.

        Update qwebelement and qwebpage to call pixelSnappedBoundingBox.

        * Api/qwebelement.cpp:
        (QWebElement::geometry):
        (QWebElement::render):
        * Api/qwebpage.cpp:
        (QWebPagePrivate::TouchAdjuster::findCandidatePointForTouch):

2012-09-07  Allan Sandfeld Jensen  <allan.jensen@nokia.com>

        Simplify hitTestResultAtPoint and nodesFromRect APIs
        https://bugs.webkit.org/show_bug.cgi?id=95720

        Reviewed by Antonio Gomes.

        Update calls to new API.

        * Api/qwebframe.cpp:
        (QWebFrame::hitTestContent):
        * Api/qwebpage.cpp:
        (QWebPagePrivate::handleSoftwareInputPanel):
        (QWebPagePrivate::TouchAdjuster::findCandidatePointForTouch):
        (QWebPage::updatePositionDependentActions):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForNavigationAction):

2012-09-07  Allan Sandfeld Jensen  <allan.jensen@nokia.com>

        X11 Global Selection
        https://bugs.webkit.org/show_bug.cgi?id=88238

        Reviewed by Tony Chang.

        Use new editor command for pasting global selection, and update it using
        the respondToChangedSelection callback.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::handleClipboard):
        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::respondToChangedSelection):
        (WebCore::EditorClientQt::supportsGlobalSelection):
        * WebCoreSupport/EditorClientQt.h:
        (EditorClientQt):

2012-09-05  Sam Weinig  <sam@webkit.org>

        Part 2 of removing PlatformString.h, remove PlatformString.h
        https://bugs.webkit.org/show_bug.cgi?id=95931

        Reviewed by Adam Barth.

        Remove PlatformString.h

        * Api/qwebdatabase_p.h:
        * Api/qwebframe_p.h:
        * Api/qwebhistory.cpp:
        * Api/qwebhistoryinterface.cpp:
        * Api/qwebpage_p.h:
        * Api/qwebsettings.cpp:
        * WebCoreSupport/ChromeClientQt.h:
        * WebCoreSupport/InspectorClientQt.cpp:

2012-09-05  Kaustubh Atrawalkar  <kaustubh@motorola.com>

        [DRT] LTC:: Move printing related APIs from LayoutTestController to Internals
        https://bugs.webkit.org/show_bug.cgi?id=92735

        Reviewed by Hajime Morita.

        Move numberOfPages, pageProperty & pageSizeAndMarginsInPixels in Internals and remove duplicated code from DumprenderTree & WebkitTestRunner.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::evaluateScriptInIsolatedWorld):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-09-04  Jon Lee  <jonlee@apple.com>

        [Qt] REGRESSION(r127321): It made 3 notification test timeout
        https://bugs.webkit.org/show_bug.cgi?id=95638

        Reviewed by Csaba Osztrogonác.

        Dispatch show event instead of display after r127321.

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationPresenterClientQt::sendDisplayEvent):

2012-08-31  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Port convertValueToQVariant to use the JSC C API
        https://bugs.webkit.org/show_bug.cgi?id=94695

        Reviewed by Kenneth Rohde Christiansen.

        Minor adaptations are needed here to accomodate the changed signature of
        convertValueToQVariant.

        * Api/qwebelement.cpp:
        (QWebElement::evaluateJavaScript):
        (convertJSValueToWebElementVariant):
        * Api/qwebframe.cpp:
        (QWebFrame::evaluateJavaScript):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (convertJSValueToNodeVariant):

2012-08-30  Geoffrey Garen  <ggaren@apple.com>

        Use one object instead of two for closures, eliminating ScopeChainNode
        https://bugs.webkit.org/show_bug.cgi?id=95501

        Reviewed by Filip Pizlo.

        Mechanical change to update for JSC interface change.

        * Api/qwebelement.cpp:
        (QWebElement::evaluateJavaScript):

2012-08-30  Benjamin Poulain  <bpoulain@apple.com>

        Replace JSC::UString by WTF::String
        https://bugs.webkit.org/show_bug.cgi?id=95271

        Reviewed by Geoffrey Garen.

        Replace UString by String.

        * Api/qwebelement.cpp:
        (QWebElement::evaluateJavaScript):

2012-08-29  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Fix doc generation with make docs
        https://bugs.webkit.org/show_bug.cgi?id=95340

        Reviewed by Kenneth Rohde Christiansen.

        Fix doc target, similar to what the other Qt 5 modules are using and comment out the indexes
        line, because cross-referencing doesn't work right now and the use of the QTDIR environment
        is wrong, too.

        * docs/docs.pri:
        * docs/qtwebkit.qdocconf:

2012-08-22  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] REGRESSION(r125428): fast/profiler/nested-start-and-stop-profiler.html fails
        https://bugs.webkit.org/show_bug.cgi?id=93897

        Reviewed by Kenneth Rohde Christiansen.

        Fixed some test expectations.

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::objectDeleted): Since runtime methods are real function objects again, we
        can go back to testing Function.prototype.call, as it was done before r125428.
        (tst_QObjectBridge::introspectQtMethods_data): Removed tests for the length property.
        (tst_QObjectBridge::introspectQtMethods): Changed test expectation of the properties of
        run-time methods back to being non-configurable, as before r125428.

2012-08-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r126914.
        http://trac.webkit.org/changeset/126914
        https://bugs.webkit.org/show_bug.cgi?id=95239

        it breaks everything and fixes nothing (Requested by pizlo on
        #webkit).

        * Api/qwebpage.cpp:
        (extractContentTypeFromPluginVector):
        * Api/qwebplugindatabase.cpp:
        (QWebPluginInfo::mimeTypes):
        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::getPluginInfo):

2012-08-28  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Rename first/second to key/value in HashMap iterators
        https://bugs.webkit.org/show_bug.cgi?id=82784

        Reviewed by Eric Seidel.

        * Api/qwebpage.cpp:
        (extractContentTypeFromPluginVector):
        * Api/qwebplugindatabase.cpp:
        (QWebPluginInfo::mimeTypes):
        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::getPluginInfo):

2012-08-27  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r126836.
        http://trac.webkit.org/changeset/126836
        https://bugs.webkit.org/show_bug.cgi?id=95163

        Broke all Apple ports, EFL, and Qt. (Requested by tkent on
        #webkit).

        * Api/qwebpage.cpp:
        (extractContentTypeFromPluginVector):
        * Api/qwebplugindatabase.cpp:
        (QWebPluginInfo::mimeTypes):
        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::getPluginInfo):

2012-08-27  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Rename first/second to key/value in HashMap iterators
        https://bugs.webkit.org/show_bug.cgi?id=82784

        Reviewed by Eric Seidel.

        * Api/qwebpage.cpp:
        (extractContentTypeFromPluginVector):
        * Api/qwebplugindatabase.cpp:
        (QWebPluginInfo::mimeTypes):
        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::getPluginInfo):

2012-08-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r126287.
        http://trac.webkit.org/changeset/126287
        https://bugs.webkit.org/show_bug.cgi?id=94708

        It made WK1 layout testing 3.7x slower (>1hours) (Requested by
        ossy on #webkit).

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::objectDeleted):
        (tst_QObjectBridge::introspectQtMethods_data):
        (tst_QObjectBridge::introspectQtMethods):

2012-08-22  Allan Sandfeld Jensen  <allan.jensen@nokia.com>

        [Qt] Optionally support smooth-scrolling on all platforms
        https://bugs.webkit.org/show_bug.cgi?id=74926

        Reviewed by Simon Hausmann.

        Expose the enable scroll animator setting.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):
        (QWebSettings::QWebSettings):
        * Api/qwebsettings.h:

2012-08-22  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] REGRESSION(r125428): fast/profiler/nested-start-and-stop-profiler.html fails
        https://bugs.webkit.org/show_bug.cgi?id=93897

        Reviewed by Kenneth Rohde Christiansen.

        Fixed some test expectations.

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::objectDeleted): Since runtime methods are real function objects again, we
        can go back to testing Function.prototype.call, as it was done before r125428.
        (tst_QObjectBridge::introspectQtMethods_data): Removed tests for the length property.
        (tst_QObjectBridge::introspectQtMethods): Changed test expectation of the properties of
        run-time methods back to being non-configurable, as before r125428.

2012-08-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r126146.
        http://trac.webkit.org/changeset/126146
        https://bugs.webkit.org/show_bug.cgi?id=94606

        It made all tests assert (Requested by Ossy on #webkit).

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::objectDeleted):
        (tst_QObjectBridge::introspectQtMethods_data):
        (tst_QObjectBridge::introspectQtMethods):

2012-08-17  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] REGRESSION(r125428): fast/profiler/nested-start-and-stop-profiler.html fails
        https://bugs.webkit.org/show_bug.cgi?id=93897

        Reviewed by Kenneth Rohde Christiansen.

        Fixed some test expectations.

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::objectDeleted): Since runtime methods are real function objects again, we
        can go back to testing Function.prototype.call, as it was done before r125428.
        (tst_QObjectBridge::introspectQtMethods_data): Removed tests for the length property.
        (tst_QObjectBridge::introspectQtMethods): Changed test expectation of the properties of
        run-time methods back to being non-configurable, as before r125428.

2012-08-15  Ryosuke Niwa  <rniwa@webkit.org>

        Update manual tests and comments to refer to TestRunner instead of LayoutTestController
        https://bugs.webkit.org/show_bug.cgi?id=94168

        Reviewed by Kent Tamura.

        * Api/qwebelement.cpp:
        (convertJSValueToWebElementVariant):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-08-14  Adam Barth  <abarth@webkit.org>

        Delete Frame::domWindow() and Frame::existingDOMWindow()
        https://bugs.webkit.org/show_bug.cgi?id=93990

        Reviewed by Eric Seidel.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidFinishDocumentLoad):

2012-08-14  Lauro Neto  <lauro.neto@openbossa.org>

        Convert signals/slots to Q_* macros.

        [Qt] Use Q_SLOTS and Q_SIGNALS instead of slots and signals
        https://bugs.webkit.org/show_bug.cgi?id=93996

        Reviewed by Kenneth Rohde Christiansen.

        Change usage of keyword-conflicting 'signals' and 'slots' for
        Q_SIGNALS and Q_SLOTS macro.

        * WebCoreSupport/FrameLoaderClientQt.h:
        (FrameLoaderClientQt):
        * WebCoreSupport/FullScreenVideoQt.h:
        (FullScreenVideoQt):
        * WebCoreSupport/FullScreenVideoWidget.h:
        (FullScreenVideoWidget):
        * WebCoreSupport/IconDatabaseClientQt.h:
        (IconDatabaseClientQt):
        * WebCoreSupport/InspectorClientQt.cpp:
        (InspectorClientWebPage):
        * WebCoreSupport/InspectorServerQt.h:
        (InspectorServerQt):
        (InspectorServerRequestHandlerQt):
        * WebCoreSupport/PopupMenuQt.h:
        (PopupMenuQt):
        * WebCoreSupport/QtFallbackWebPopup.h:
        (QtFallbackWebPopup):
        * docs/webkitsnippets/qtwebkit_bridge_snippets.cpp:
        (wrapInFunction):
        * docs/webkitsnippets/webpage/main.cpp:
        (Thumbnailer):
        * examples/platformplugin/WebPlugin.h:
        (Popup):
        (WebPopup):
        * tests/benchmarks/webgl/tst_webgl.cpp:
        (tst_WebGlPerformance):
        * tests/hybridPixmap/tst_hybridPixmap.cpp:
        (tst_hybridPixmap):
        * tests/hybridPixmap/widget.h:
        (Widget):
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        (tst_QDeclarativeWebView):
        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView):
        (WebPage):
        (ResizeSpy):
        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (MyWebElementSlotOnlyObject):
        (tst_QObjectBridge):
        (TestPluginWidget):
        * tests/qwebelement/tst_qwebelement.cpp:
        (tst_QWebElement):
        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame):
        (FakeReply):
        * tests/qwebhistory/tst_qwebhistory.cpp:
        * tests/qwebhistoryinterface/tst_qwebhistoryinterface.cpp:
        (tst_QWebHistoryInterface):
        * tests/qwebinspector/tst_qwebinspector.cpp:
        (tst_QWebInspector):
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage):
        (JSTestPage):
        (RepaintRequestedRenderer):
        (SpyForLoadSignalsOrder):
        * tests/qwebplugindatabase/tst_qwebplugindatabase.cpp:
        (tst_QWebPluginDatabase):
        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView):
        (WebViewCrashTest):

2012-08-14  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Fix failing tst_QWebPage::findText unit test
        https://bugs.webkit.org/show_bug.cgi?id=93951

        Reviewed by Kenneth Rohde Christiansen.

        Adjust the expected text, as the HTML editing code improved to avoid unnecessary tags.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::findText):

2012-08-13  Tom Sepez  <tsepez@chromium.org>

        [chromium] release FrameLoaderClientImpl::m_pluginWidget refptr upon Plugin Document detach.
        https://bugs.webkit.org/show_bug.cgi?id=93283

        Reviewed by Eric Seidel.

        Change the client redirectDataToPlugin method(s) to expect the possibility of
        a NULL argument, keeping existing behaviour otherwise.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::redirectDataToPlugin):

2012-08-13  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Port meta method/signal/slot handling in run-time bridge to use JSC C API
        https://bugs.webkit.org/show_bug.cgi?id=93476

        Reviewed by Kenneth Rohde Christiansen.

        Changed semantics of some test expectations. Similarly to r125032 when generating
        error exceptions for connect/disconnect, we cannot generate explicit type error
        exceptions but only generic errors. Another change is that the meta-method wrapper
        doesn't support the call() through Function.prototype anymore. See WebCore changelog
        for details.

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::connectAndDisconnect):
        (tst_QObjectBridge::objectDeleted):
        (tst_QObjectBridge::introspectQtMethods):

2012-08-13  Kwang Yul Seo  <skyul@company100.net>

        [Qt] Add gprof.prf to build WebKit with gprof enabled
        https://bugs.webkit.org/show_bug.cgi?id=90283

        Reviewed by Eric Seidel.

        * tests/MIMESniffing/MIMESniffing.pro:
        Don't build MIMESniffing.cpp because MIMESniffing test links
        WebKitQt statically when gprof is enabled.

2012-08-12  Loïc Yhuel  <loic.yhuel@softathome.com>

        [Qt] Make it possible to build without QtTest/QtPrintSupport
        https://bugs.webkit.org/show_bug.cgi?id=93492

        Reviewed by Tor Arne Vestbø.

        * Api/qwebframe.cpp:
        (QWebFrame::print): Does nothing if no printsupport
        * Api/qwebview.cpp:
        (QWebView::print): Does nothing if no printsupport

2012-08-11  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Add support for HTML5 state object history API in FrameLoaderClientQt
        https://bugs.webkit.org/show_bug.cgi?id=93648

        Reviewed by Kenneth Rohde Christiansen.

        Add support for push/replace/pop by implementing dispatchDidNavigateWithinPage.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidNavigateWithinPage):
        (WebCore::FrameLoaderClientQt::dispatchDidPushStateWithinPage):
        (WebCore::FrameLoaderClientQt::dispatchDidReplaceStateWithinPage):
        (WebCore::FrameLoaderClientQt::dispatchDidPopStateWithinPage):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (FrameLoaderClientQt):
        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame):
        (tst_QWebFrame::setUrlUsingStateObject): Added. Tests that the urlChanged signal is fired.

2012-08-10  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Remove QRegExp <> JS RegExp conversion
        https://bugs.webkit.org/show_bug.cgi?id=93716

        Reviewed by Kenneth Rohde Christiansen.

        Removed tests that cover the automatic QRegExp <> JS RegExp conversion. See WebCore
        ChangeLog for details.

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (MyQObject::emitMySignalWithDateTimeArg):
        (MyQObject):
        (tst_QObjectBridge::overloadedSlots):
        (tst_QObjectBridge::typeConversion):

2012-08-09  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Remove support for __qt_sender__ in QObject bridge
        https://bugs.webkit.org/show_bug.cgi?id=93649

        Reviewed by Kenneth Rohde Christiansen.

        Support for __qt_sender__ has also been removed from QtScript/QJSEngine. The right
        JavaScript solution to the problem is Function.prototype.bind.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::didClearWindowObject):
        * Api/qwebframe_p.h:
        (QWebFramePrivate):
        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::connectAndDisconnect):

2012-08-08  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Port internal findMethodIndex method matcher to use JSC C API
        https://bugs.webkit.org/show_bug.cgi?id=93463

        Reviewed by Kenneth Rohde Christiansen.

        Adjust the expectations of the unit test for some of the exceptions the
        method throws when signals/slots cannot be found/matched. The C API doesn't allow
        us to create syntax (type) errors, only generic error exceptions.

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::callQtInvokable):

2012-08-08  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Add unit test for QObject bindings for scriptable plugins
        https://bugs.webkit.org/show_bug.cgi?id=93462

        Reviewed by Kenneth Rohde Christiansen.

        The bindings code is subject to refactoring in the future, so added a unit test to verify that
        accessing an embedded QWidget from JavaScript goes through the QObject bindings.

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge):
        (TestPluginWidget):
        (TestPluginWidget::TestPluginWidget):
        (TestPluginWidget::slotWithReturnValue):
        (TestWebPage):
        (TestWebPage::TestWebPage):
        (TestWebPage::createPlugin):
        (tst_QObjectBridge::scriptablePlugin):

2012-08-07  Simon Hausmann  <simon.hausmann@nokia.com>

        Unreviewed trivial fix: Missed HAVE_QT5 removal as part of r124879

        Fixes failing auto-test.

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::enumerate_data):

2012-08-02  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Remove Qt 4 specific code paths
        https://bugs.webkit.org/show_bug.cgi?id=88161

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qgraphicswebview.cpp:
        (QGraphicsWebView::sceneEvent):
        * Api/qgraphicswebview.h:
        * Api/qwebframe.cpp:
        * Api/qwebframe.h:
        * Api/qwebframe_p.h:
        * Api/qwebpage.cpp:
        (QWebPage::event):
        * Api/qwebpage.h:
        * Api/qwebsettings.cpp:
        (QWebSettings::enablePersistentStorage):
        * Api/qwebview.cpp:
        (QWebView::QWebView):
        (QWebView::event):
        * Api/qwebview.h:
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::setToolTip):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::createPlugin):
        * WebCoreSupport/GeolocationClientQt.cpp:
        * WebCoreSupport/GeolocationClientQt.h:
        * WebCoreSupport/PageClientQt.cpp:
        (createPlatformGraphicsContext3DFromWidget):
        (QWebPageClient::ownerWindow):
        * WebCoreSupport/WebEventConversion.cpp:
        (WebCore::WebKitPlatformTouchEvent::WebKitPlatformTouchEvent):
        * declarative/declarative.pro:
        * declarative/plugin.cpp:
        * declarative/public.pri:
        * examples/platformplugin/WebPlugin.cpp:
        (WebPlugin::createExtension):
        * examples/platformplugin/WebPlugin.h:
        (WebPlugin):
        * examples/platformplugin/platformplugin.pro:
        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::arrayObjectEnumerable):
        (tst_QObjectBridge::ownership):
        (tst_QObjectBridge::qObjectWrapperWithSameIdentity):
        * tests/tests.pri:
        * tests/util.h:

2012-08-01  Zeno Albisser  <zeno@webkit.org>

        [Qt]REGRESSION(r123786): It made 3 fast/animation tests fail.
        https://bugs.webkit.org/show_bug.cgi?id=92490

        QAbstractAnimation:start() is implicitly calling updateTime
        without going through the event loop. This resulted in executing
        scripted animation callbacks right when registering a first callback.

        Reviewed by Noam Rosenthal.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::RefreshAnimation::scheduleAnimation):
            Invoke QAbstractAnimation::start() method through the event loop.

2012-07-27  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt][WK2] REGRESSION(r119127): resetting window.internals settings between tests doesn't work properly
        https://bugs.webkit.org/show_bug.cgi?id=88064

        Reviewed by Zoltan Herczeg.

        Add missing DumpRenderTreeSupportQt::resetInternalsObject(JSContextRef context) function.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::resetInternalsObject):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-07-26  Zeno Albisser  <zeno@webkit.org>

        Unreviewed Qt buildfix after r123786.

        Qt-minimal builds with ENABLE_REQUEST_ANIMATION_FRAME=0.
        Therefore adding #ifdefs to allow for that configuration.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore):
        * WebCoreSupport/ChromeClientQt.h:
        (ChromeClientQt):

2012-07-26  Zeno Albisser  <zeno@webkit.org>

        [Qt] requestAnimationFrame should only trigger when a new frame can be displayed.
        https://bugs.webkit.org/show_bug.cgi?id=88638

        Disable REQUEST_ANIMATION_FRAME_TIMER for the Qt port and tie
        the servicing of scripted animations to the renderNextFrame call for WK2.
        For WK1 we rely on the RefreshAnimation that is based on QAbstractAnimation.

        Reviewed by Jocelyn Turcotte.

        * WebCoreSupport/ChromeClientQt.cpp:
        (RefreshAnimation):
            Add a RefreshAnimation that is based on QAbstractAnimation
            and drives the servicing of the scripted animations for WK1.
        (WebCore::RefreshAnimation::RefreshAnimation):
        (WebCore::RefreshAnimation::duration):
        (WebCore::RefreshAnimation::scheduleAnimation):
            Set m_animationScheduled to true and start the animation
            timer in case it is not running yet.
        (WebCore::RefreshAnimation::updateCurrentTime):
            Call serviceScriptedAnimations if m_animationScheduled is true.
            If this is not the case, the animation timer can be stopped,
            because no animation needs to be scheduled anymore.
        (WebCore):
        (WebCore::ChromeClientQt::scheduleAnimation):
            Create and start the RefreshAnimation instance with the
            first call to scheduleAnimation.
        * WebCoreSupport/ChromeClientQt.h:
        (WebCore):
        (ChromeClientQt):

2012-07-26  Kaustubh Atrawalkar  <kaustubh@motorola.com>

        [DRT] LTC:: pageNumberForElementById() could be moved to Internals
        https://bugs.webkit.org/show_bug.cgi?id=92091

        Reviewed by Adam Barth.

        Move the pageNumberForElementById from LayoutTestCotroller to Internals and
        remove the old platform specific implementations as it exclusively tests WebCore functionality.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-07-24  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt][WK1] color input type support
        https://bugs.webkit.org/show_bug.cgi?id=91998

        Reviewed by Simon Hausmann.

        Using QColorDialog. This is private for now, but
        it could be exposed via a virtual function in
        QWebPage at a later point in a Qt 5 minor release
        if there are requests for that.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::colorSelectionRequested):
        * Api/qwebpage_p.h:
        (QWebPagePrivate):
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::createColorChooser):

2012-07-23  Oswald Buddenhagen  <oswald.buddenhagen@nokia.com>

        [Qt] Fix compilation against namespaced Qt

        Reviewed by Simon Hausmann.

        * WebCoreSupport/GeolocationClientQt.h:
        * examples/platformplugin/WebPlugin.h:

2012-07-23  Pierre Rossi  <pierre.rossi@gmail.com>

        Unify numTouchEventHandlersChanged and needTouchEvents in the chrome client
        https://bugs.webkit.org/show_bug.cgi?id=91006

        Reviewed by Ryosuke Niwa.

        Remove numTouchEventHandlersChanged stub.

        * WebCoreSupport/ChromeClientQt.h:

2012-07-23  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] RenderThemeQtMobile highlight colors are not being used
        https://bugs.webkit.org/show_bug.cgi?id=92004

        Reviewed by Noam Rosenthal.

        * WebCoreSupport/RenderThemeQStyle.cpp:
        (WebCore::RenderThemeQStyle::setPaletteFromPageClientIfExists): Moved here since
        it's used only by RenderThemeQStyle. Remove unnecessary check for m_page->chrome().
        (WebCore):
        (WebCore::RenderThemeQStyle::colorPalette):
        * WebCoreSupport/RenderThemeQStyle.h:
        (RenderThemeQStyle):

2012-07-22  Kent Tamura  <tkent@chromium.org>

        Rename ENABLE_METER_TAG and ENABLE_PROGRESS_TAG to ENABLE_METER_ELEMENT and ENABLE_PROGRESS_ELEMENT respectively
        https://bugs.webkit.org/show_bug.cgi?id=91941

        Reviewed by Kentaro Hara.

        A flag name for an elmement should be ENABLE_*_ELEMENT.

        * WebCoreSupport/RenderThemeQStyle.cpp:
        (WebCore):
        * WebCoreSupport/RenderThemeQStyle.h:

2012-07-19  No'am Rosenthal  <noam.rosenthal@nokia.com>

        [Qt] Enable CSS shaders in Qt (software mode)
        https://bugs.webkit.org/show_bug.cgi?id=85140

        Reviewed by Simon Hausmann.

        Enable CSS Shaders in settings when WebGL is enabled.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):

2012-07-19  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Remove support for Qt versions before 4.8.0
        https://bugs.webkit.org/show_bug.cgi?id=91730

        Reviewed by Kenneth Rohde Christiansen.

        Remove Qt version check #ifdefs for Qt versions before 4.8.0.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate):
        (QWebSettings::QWebSettings):
        (QWebSettings::thirdPartyCookiePolicy):
        * Api/qwebsettings.h:
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::thirdPartyCookiePolicyAllows):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        (tst_QDeclarativeWebView):
        (tst_QDeclarativeWebView::backgroundColor):
        * tests/qwebelement/tst_qwebelement.cpp:
        (tst_QWebElement::render):
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage):
        (tst_QWebPage::thirdPartyCookiePolicy):

2012-07-17  Gabor Ballabas  <gaborb@inf.u-szeged.hu>

        [Qt][V8] Remove the V8 related codepaths and configuration
        https://bugs.webkit.org/show_bug.cgi?id=90863

        Reviewed by Simon Hausmann.

        * Api/qwebelement.cpp:
        (setupScriptContext):
        (QWebElement::evaluateJavaScript):
        (convertWebElementVariantToJSValue):
        (QtWebElementRuntime::initialize):
        * Api/qwebframe.cpp:
        (QWebFramePrivate::didClearWindowObject):
        (QWebFramePrivate::addQtSenderToGlobalObject):
        (QWebFrame::addToJavaScriptWindowObject):
        (QWebFrame::evaluateJavaScript):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (convertNodeVariantToJSValue):
        (QtDRTNodeRuntime::initialize):
        (DumpRenderTreeSupportQt::javaScriptObjectsCount):
        (DumpRenderTreeSupportQt::garbageCollectorCollect):
        (DumpRenderTreeSupportQt::garbageCollectorCollectOnAlternateThread):
        (DumpRenderTreeSupportQt::evaluateScriptInIsolatedWorld):
        (DumpRenderTreeSupportQt::injectInternalsObject):
        (DumpRenderTreeSupportQt::resetInternalsObject):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::createDocumentLoader):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (FrameLoaderClientQt):
        * v8/ForwardingHeaders/v8-debug.h: Removed.
        * v8/ForwardingHeaders/v8-preparser.h: Removed.
        * v8/ForwardingHeaders/v8-profiler.h: Removed.
        * v8/ForwardingHeaders/v8-testing.h: Removed.
        * v8/ForwardingHeaders/v8.h: Removed.
        * v8/ForwardingHeaders/v8stdint.h: Removed.

2012-07-17  Vivek Galatage  <vivekgalatage@gmail.com>

        Web Inspector: refactor InspectorController::connectFrontend() to accept InspectorFrontendChannel.
        https://bugs.webkit.org/show_bug.cgi?id=91196

        Reviewed by Pavel Feldman.

        Refactoring InspectorClients. InspectorClient::openInspectorFrontend
        now returning the InspectorFrontendChannel.

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::openInspectorFrontend):
        (WebCore::InspectorClientQt::attachAndReplaceRemoteFrontend):
        * WebCoreSupport/InspectorClientQt.h:
        (InspectorClientQt):

2012-07-17  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r122834.
        http://trac.webkit.org/changeset/122834
        https://bugs.webkit.org/show_bug.cgi?id=91492

        it broke the chromium (Requested by kkristof on #webkit).

        * Api/qwebelement.cpp:
        (setupScriptContext):
        (QWebElement::evaluateJavaScript):
        (QtWebElementRuntime::initialize):
        * Api/qwebframe.cpp:
        (QWebFramePrivate::didClearWindowObject):
        (QWebFrame::addToJavaScriptWindowObject):
        (QWebFrame::evaluateJavaScript):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (QtDRTNodeRuntime::initialize):
        (DumpRenderTreeSupportQt::javaScriptObjectsCount):
        (DumpRenderTreeSupportQt::garbageCollectorCollect):
        (DumpRenderTreeSupportQt::garbageCollectorCollectOnAlternateThread):
        (DumpRenderTreeSupportQt::evaluateScriptInIsolatedWorld):
        (DumpRenderTreeSupportQt::injectInternalsObject):
        (DumpRenderTreeSupportQt::resetInternalsObject):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        (Bindings):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore):
        (WebCore::FrameLoaderClientQt::didCreateScriptContext):
        (WebCore::FrameLoaderClientQt::willReleaseScriptContext):
        (WebCore::FrameLoaderClientQt::didCreateIsolatedScriptContext):
        (WebCore::FrameLoaderClientQt::createDocumentLoader):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (FrameLoaderClientQt):
        (WebCore::FrameLoaderClientQt::allowScriptExtension):
        * v8/ForwardingHeaders/v8-debug.h: Added.
        * v8/ForwardingHeaders/v8-preparser.h: Added.
        * v8/ForwardingHeaders/v8-profiler.h: Added.
        * v8/ForwardingHeaders/v8-testing.h: Added.
        * v8/ForwardingHeaders/v8.h: Added.
        * v8/ForwardingHeaders/v8stdint.h: Added.

2012-07-17  Gabor Ballabas  <gaborb@inf.u-szeged.hu>

        [Qt][V8] Remove the V8 related codepaths and configuration
        https://bugs.webkit.org/show_bug.cgi?id=90863

        Reviewed by Simon Hausmann.

        * Api/qwebelement.cpp:
        (setupScriptContext):
        (QWebElement::evaluateJavaScript):
        (convertWebElementVariantToJSValue):
        (QtWebElementRuntime::initialize):
        * Api/qwebframe.cpp:
        (QWebFramePrivate::didClearWindowObject):
        (QWebFramePrivate::addQtSenderToGlobalObject):
        (QWebFrame::addToJavaScriptWindowObject):
        (QWebFrame::evaluateJavaScript):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (convertNodeVariantToJSValue):
        (QtDRTNodeRuntime::initialize):
        (DumpRenderTreeSupportQt::javaScriptObjectsCount):
        (DumpRenderTreeSupportQt::garbageCollectorCollect):
        (DumpRenderTreeSupportQt::garbageCollectorCollectOnAlternateThread):
        (DumpRenderTreeSupportQt::evaluateScriptInIsolatedWorld):
        (DumpRenderTreeSupportQt::injectInternalsObject):
        (DumpRenderTreeSupportQt::resetInternalsObject):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::createDocumentLoader):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (FrameLoaderClientQt):
        * v8/ForwardingHeaders/v8-debug.h: Removed.
        * v8/ForwardingHeaders/v8-preparser.h: Removed.
        * v8/ForwardingHeaders/v8-profiler.h: Removed.
        * v8/ForwardingHeaders/v8-testing.h: Removed.
        * v8/ForwardingHeaders/v8.h: Removed.
        * v8/ForwardingHeaders/v8stdint.h: Removed.

2012-07-16  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Fix inconsistent DLL linkage on Windows with WebKit1
        https://bugs.webkit.org/show_bug.cgi?id=91375

        Reviewed by Laszlo Gombos.

        Export QWebHistoryItemPrivate as required for tests. Unfortunately we cannot use
        Q_AUTOTEST_EXPORT outside of Qt.

        * Api/qwebhistory_p.h:

2012-07-16  Zoltan Horvath  <zoltan@webkit.org>

        [Qt] Change NativeImagePtr from QPixmap* to QImage*
        https://bugs.webkit.org/show_bug.cgi?id=88785

        Reviewed by Simon Hausmann.

        Since we use raster engine there is no difference between QPixmap and QImage, so we are going
        to use QImage everywhere where it is possible. This refactoring contains the change of the
        NativeImagePtr typedef from QPixmap* to QImage* and covers the related modifications.

        Part of the change is similar to Viatcheslav Ostapenko's internal work.

        Covered by existing tests.

        * Api/qwebframe.cpp:
        (QWebHitTestResultPrivate::QWebHitTestResultPrivate):
        * Api/qwebhistory.cpp:
        (QWebHistoryItem::icon):
        * Api/qwebsettings.cpp:
        (QWebSettings::iconForUrl):
        (QWebSettings::setWebGraphic):
        (QWebSettings::webGraphic):
        * WebCoreSupport/DragClientQt.cpp:
        (WebCore::DragClientQt::startDrag):
        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebCore::initializeWebCoreQt):

2012-07-16  Frederik Gladhorn  <frederik.gladhorn@nokia.com>

        Accessible Widget for QWebView
        https://bugs.webkit.org/show_bug.cgi?id=91073

        Added classes that allow navigation to the web view widget.
        This is the glue to later access webkit's accessible objects
        though the Qt accessibility framework.

        Reviewed by Simon Hausmann.

        * Api/qwebview.cpp:
        (QWebView::QWebView):
        * Api/qwebviewaccessible.cpp: Added.
        (accessibleInterfaceFactory):
        (QWebFrameAccessible::QWebFrameAccessible):
        (QWebFrameAccessible::frame):
        (QWebFrameAccessible::parent):
        (QWebFrameAccessible::text):
        (QWebFrameAccessible::childCount):
        (QWebFrameAccessible::child):
        (QWebFrameAccessible::indexOfChild):
        (QWebFrameAccessible::state):
        (QWebFrameAccessible::role):
        (QWebFrameAccessible::navigate):
        (QWebPageAccessible::QWebPageAccessible):
        (QWebPageAccessible::page):
        (QWebPageAccessible::text):
        (QWebPageAccessible::parent):
        (QWebPageAccessible::child):
        (QWebPageAccessible::childCount):
        (QWebPageAccessible::indexOfChild):
        (QWebPageAccessible::navigate):
        (QWebPageAccessible::role):
        (QWebPageAccessible::state):
        (QWebViewAccessible::QWebViewAccessible):
        (QWebViewAccessible::view):
        (QWebViewAccessible::childCount):
        (QWebViewAccessible::child):
        * Api/qwebviewaccessible_p.h: Added.
        (QWebFrameAccessible):
        (QWebPageAccessible):
        (QWebViewAccessible):

2012-07-12  Huang Dongsung  <luxtella@company100.net>

        [Qt] Increase the drawing performance by merging dirty rects.
        https://bugs.webkit.org/show_bug.cgi?id=91075

        Reviewed by Noam Rosenthal.

        QWebFramePrivate calls FrameView::paintContents as many as the number of dirty
        rects, so it causes too many redundant render tree traversals.
        I changed it to merge dirty rects and call FrameView::paintContents only once.
        The algorithm to merge rects is copied from GTK.

        When parallel image decoders are in use, each image is independently repainted
        when decoding is finished. This creates a lot by repaint requests. So by merging
        these repaint requests, I could improve rendering performance.

        For example, I tested parallel image decoders on the locally mirrored Pinterest site.
        QWebFramePrivate called FrameView::paintContents 165 times after parallel image
        decoders decoded all the images. It took about 120ms on my six-core Intel Xeon machine.
        This patch decreases painting time from 120ms to 30ms.

        * Api/qwebframe.cpp:
        (coalesceRectsIfPossible):
        (QWebFramePrivate::renderRelativeCoords):

2012-07-11  Steffen Imhof  <steffen.imhof@basyskom.com>

        [Qt] Middle clicking a scrollbar causes text to be pasted.
        https://bugs.webkit.org/show_bug.cgi?id=78444

        Check if the event was already accepted before handling the clipboard.

        Reviewed by Simon Hausmann.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::mouseReleaseEvent):

2012-07-10  Adam Barth  <abarth@webkit.org>

        WebCore::Settings for Hixie76 WebSocket protocol doesn't do anything and should be removed
        https://bugs.webkit.org/show_bug.cgi?id=90910

        Reviewed by Eric Seidel.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-07-09  No'am Rosenthal  <noam.rosenthal@nokia.com>

        Shared code that is guarded with ENABLE(WEBGL) should be guarded with USE()
        https://bugs.webkit.org/show_bug.cgi?id=90506

        Reviewed by Martin Robinson.

        Updated necessary parts of PageClientQt to be guarded with USE(3D_GRAPHICS) instead of
        ENABLE(WEBGL). The WebKit1 glue to WebGL still requires the Qt OpenGL module, so it's
        disable if QT_OPENGL_LIB is not defined.

        * WebCoreSupport/PageClientQt.cpp:
        (createPlatformGraphicsContext3DFromWidget):
        (WebCore):
        * WebCoreSupport/PageClientQt.h:
        (PageClientQWidget):
        (PageClientQGraphicsWidget):

2012-07-06  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Buildfix for newer Qt5
        https://bugs.webkit.org/show_bug.cgi?id=90519

        Reviewed by Tor Arne Vestbø.

        * WebCoreSupport/QtFallbackWebPopup.cpp: Include QtGui/QStandardItemModel instead of deprecated QStandardItemModel.

2012-07-06  Oswald Buddenhagen  <oswald.buddenhagen@nokia.com>

        [Qt] Adjust to changed generation of master include file

        The responsiblity for creating the master include was moved out of syncqt.
        @ignore_for_master_contents still stays, as syncqt (ab-)uses this for
        determining whether a header is private.

        https://bugs.webkit.org/show_bug.cgi?id=90461

        Reviewed by Tor Arne Vestbø.

        * Api/qwebscriptworld.h:
        * tests/util.h:

2012-07-04  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Get rid of un-needed QT += declarative for Qt 5

        The declarative module has been renamed to quick1 in Qt 5, and the
        engine-only module for Qt 5 is named 'qml'. For many of the instances
        we could just remove 'declarative', since the project file was only
        used for Qt5/WebKit2 builds. In the other cases the module was wrapped
        in a haveQt(4) scope.

        Reviewed by Csaba Osztrogonác.

        * declarative/experimental/experimental.pri:
        * declarative/public.pri:

2012-07-03  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Make use of .qmake.cache for caching features

        Instead of loading() features from the files that need them (and re-running
        a bunch of checks), we now run feature detection as part of configure.pro,
        and have build-webkit write the computed feature-defines and CONFIG to
        .qmake.cache, which is then loaded by qmake _before_ even defaults_pre
        when building WebKit.pro.

        At some point we'll be able to selectivly prevent running of config tests
        in configure.pro, which means we don't need a separate code-path for
        the build-webkit --help case.

        We should also move the code in build-webkit that now uses .webkit.config
        to detect clean builds, to use .qmake.cache, since we now store the same
        thing there.

        Original patch by Oswald Buddenhagen <oswald.buddenhagen@nokia.com>

        Reviewed by Tor Arne Vestbø.

        * declarative/declarative.pro:
        * declarative/public.pri:
        * tests/qgraphicswebview/qgraphicswebview.pro:

2012-07-03  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r121766.
        http://trac.webkit.org/changeset/121766
        https://bugs.webkit.org/show_bug.cgi?id=90465

        It caused flakey build errors on the bots (Requested by Ossy
        on #webkit).

        * declarative/declarative.pro:
        * declarative/public.pri:
        * tests/qgraphicswebview/qgraphicswebview.pro:

2012-07-03  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Make use of .qmake.cache for caching features

        Instead of loading() features from the files that need them (and re-running
        a bunch of checks), we now run feature detection as part of configure.pro,
        and have build-webkit write the computed feature-defines and CONFIG to
        .qmake.cache, which is then loaded by qmake _before_ even defaults_pre
        when building WebKit.pro.

        At some point we'll be able to selectivly prevent running of config tests
        in configure.pro, which means we don't need a separate code-path for
        the build-webkit --help case.

        We should also move the code in build-webkit that now uses .webkit.config
        to detect clean builds, to use .qmake.cache, since we now store the same
        thing there.

        Original patch by Oswald Buddenhagen <oswald.buddenhagen@nokia.com>

        Reviewed by Tor Arne Vestbø.

        * declarative/declarative.pro:
        * declarative/public.pri:
        * tests/qgraphicswebview/qgraphicswebview.pro:

2012-07-02  No'am Rosenthal  <noam.rosenthal@nokia.com>

        [Qt] Get rid of GraphicsLayerQt
        https://bugs.webkit.org/show_bug.cgi?id=78598

        Reviewed by Luiz Agostini.

        Removed all references to GraphicsLayerQt, including #ifdef code paths that only apply
        when TEXTURE_MAPPER is disabled.

        * Api/qgraphicswebview.cpp:
        (QGraphicsWebView::paint):
        * Api/qwebframe.cpp:
        (QWebFramePrivate::renderFromTiledBackingStore):
        (QWebFramePrivate::renderRelativeCoords):
        * Api/qwebframe_p.h:
        (QWebFramePrivate::QWebFramePrivate):
        (QWebFramePrivate):
        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):
        * WebCoreSupport/PageClientQt.cpp:
        (WebCore):
        (WebCore::PageClientQGraphicsWidget::~PageClientQGraphicsWidget):
        (WebCore::PageClientQGraphicsWidget::update):
        (WebCore::PageClientQGraphicsWidget::syncLayers):
        (WebCore::PageClientQGraphicsWidget::setRootGraphicsLayer):
        * WebCoreSupport/PageClientQt.h:
        (WebCore):
        (WebCore::PageClientQWidget::PageClientQWidget):
        (PageClientQWidget):
        (PageClientQGraphicsWidget):

2012-07-02  Benjamin Poulain  <bpoulain@apple.com>

        Do not do any logging initialization when logging is disabled
        https://bugs.webkit.org/show_bug.cgi?id=90228

        Reviewed by Simon Fraser.

        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebCore::initializeWebCoreQt):

2012-06-29  Konrad Piascik  <kpiascik@rim.com>

        Don't hardcode target dpi of 160 (it should be 96 on desktop)
        https://bugs.webkit.org/show_bug.cgi?id=88114

        Reviewed by Adam Barth.

        Updated the call to computeViewportAttributes.

        * Api/qwebpage.cpp:
        (QWebPage::viewportAttributesForSize):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::viewportAsText):

2012-06-28  Alexander Pavlov  <apavlov@chromium.org>

        [Qt] inspector/styles/inject-stylesheet.html makes 4 tests flakey (TEXT PASS)
        https://bugs.webkit.org/show_bug.cgi?id=90167

        Reviewed by Csaba Osztrogonác.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::removeUserStyleSheets):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-06-28  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Restore original value of mock scrollbars between tests
        https://bugs.webkit.org/show_bug.cgi?id=90155

        Reviewed by Simon Hausmann.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setMockScrollbarsEnabled):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-06-25  Mark Hahnenberg  <mhahnenberg@apple.com>

        JSLock should be per-JSGlobalData
        https://bugs.webkit.org/show_bug.cgi?id=89123

        Reviewed by Geoffrey Garen.

        Changed all sites that used JSLock to instead use the new JSLockHolder
        and pass in the correct JS context that the code is about to interact with that 
        needs protection. Also added a couple JSLocks to places that didn't already 
        have it that needed it.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::addQtSenderToGlobalObject):
        (QWebFrame::addToJavaScriptWindowObject):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::injectInternalsObject):
        (DumpRenderTreeSupportQt::resetInternalsObject):

2012-06-27  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Fix compilation of example platform plugin with Qt 5

        Reviewed by Kenneth Christiansen.

        Use QLatin1String where appropriate and use the Qt 5 plugin
        system with Qt 5.

        * examples/platformplugin/WebPlugin.cpp:
        (SingleSelectionPopup::SingleSelectionPopup):
        (MultipleItemListDelegate::MultipleItemListDelegate):
        (MultipleSelectionPopup::MultipleSelectionPopup):
        * examples/platformplugin/WebPlugin.h:
        (WebPlugin):

2012-06-26  Tony Chang  <tony@chromium.org>

        [Qt] Enable grid layout LayoutTests
        https://bugs.webkit.org/show_bug.cgi?id=89909

        Reviewed by Csaba Osztrogonác.

        These tests pass, we just need to hook up the overridePreference.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):
        (QWebSettings::QWebSettings):
        * Api/qwebsettings.h: Add enum value for CSS grid layout

2012-06-25  Simon Hausmann  <simon.hausmann@nokia.com>

        Unreviewed build fix: Don't do QT += widgets with Qt 4

        * examples/platformplugin/platformplugin.pro:

2012-06-23  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r121058.
        http://trac.webkit.org/changeset/121058
        https://bugs.webkit.org/show_bug.cgi?id=89809

        Patch causes plugins tests to crash in GTK debug builds
        (Requested by zdobersek on #webkit).

        * Api/qwebframe.cpp:
        (QWebFramePrivate::addQtSenderToGlobalObject):
        (QWebFrame::addToJavaScriptWindowObject):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::injectInternalsObject):
        (DumpRenderTreeSupportQt::resetInternalsObject):

2012-06-20  Mark Hahnenberg  <mhahnenberg@apple.com>

        JSLock should be per-JSGlobalData
        https://bugs.webkit.org/show_bug.cgi?id=89123

        Reviewed by Gavin Barraclough.

        Changed all sites that used JSLock to instead use the new JSLockHolder
        and pass in the correct JS context that the code is about to interact with that 
        needs protection.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::addQtSenderToGlobalObject):
        (QWebFrame::addToJavaScriptWindowObject):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::injectInternalsObject):
        (DumpRenderTreeSupportQt::resetInternalsObject):

2012-06-22  Amy Ousterhout  <aousterh@chromium.org>

        Renamed DeviceOrientation to DeviceOrientationData
        https://bugs.webkit.org/show_bug.cgi?id=88663

        Reviewed by Steve Block.

        Updated files to use the renamed DeviceOrientationData instead of DeviceOrientation.
        This change makes DeviceOrientationData consistent with DeviceMotionData.
        
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setMockDeviceOrientation):
        
2012-06-21  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        [WK2][Qt] Color chooser API missing
        https://bugs.webkit.org/show_bug.cgi?id=87749

        Reviewed by Kenneth Rohde Christiansen.

        Added ColorChooser API stub to WebKit. Otherwise
        it will break the build for Qt WebKit2 (that now has
        complete support for color chooser) when INPUT_TYPE_COLOR is set.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore):
        (WebCore::ChromeClientQt::createColorChooser):
        * WebCoreSupport/ChromeClientQt.h:
        (ChromeClientQt):

2012-06-20  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Unreviewed build fix

        The platform plugin example uses QGridLayout and thus needs QT += widgets

        * examples/platformplugin/platformplugin.pro:

2012-06-19  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Buildfix for newer Qt5, use QPointer instead of the deprecated QWeakPointer.
        https://bugs.webkit.org/show_bug.cgi?id=89449

        Reviewed by Simon Hausmann.

        * Api/qwebframe_p.h:
        (QWebHitTestResultPrivate):
        * Api/qwebpage_p.h:
        (QWebPagePrivate):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::createFrame):
        * WebCoreSupport/PageClientQt.h:
        (PageClientQGraphicsWidget):

2012-06-19  Albert Astals Cid  <albert.astals@canonical.com>

        [Qt] Document the versions enums where added
        https://bugs.webkit.org/show_bug.cgi?id=89452

        Reviewed by Simon Hausmann.

        * Api/qwebpage.cpp:

2012-06-19  Sergio Villar Senin  <svillar@igalia.com>

        Calling nativeImageForCurrentFrame() causes assertion failure: m_verifier.isSafeToUse()
        https://bugs.webkit.org/show_bug.cgi?id=67582

        Reviewed by David Levin.

        Use synchronousNativeIconForPageURL() to retrieve favicons.

        * Api/qwebhistory.cpp:
        (QWebHistoryItem::icon):
        * Api/qwebsettings.cpp:
        (QWebSettings::iconForUrl):

2012-06-18  Andras Becsi  <andras.becsi@nokia.com>

        [Qt] Update QML plugins to Qt 5 style
        https://bugs.webkit.org/show_bug.cgi?id=89027

        Reviewed by Csaba Osztrogonác.

        Since support for Qt 4 style plugins was removed from Qt 5
        we need to update our plugins to the new style to be able
        to build with a more recent Qt 5 hash.
        Add empty plugin description json files for now.

        * declarative/experimental/plugin.cpp:
        * declarative/experimental/plugin.json: Added.
        * declarative/plugin.cpp:
        (WebKitQmlPlugin):
        * declarative/plugin.json: Added.

2012-06-13  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Remove dependency to QtScript for the Qt 5 build
        https://bugs.webkit.org/show_bug.cgi?id=88993

        Reviewed by Kenneth Rohde Christiansen.

        When building against Qt 5, replace the use of QScriptEngine::ValueOwnership with
        a (compatible) QWebFrame::ValueOwnership enum.

        * Api/qwebframe.cpp:
        (qtSenderCallback):
        (QWebFrame::addToJavaScriptWindowObject):
        * Api/qwebframe.h:
        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::arrayObjectEnumerable):
        (tst_QObjectBridge::ownership):
        (tst_QObjectBridge::qObjectWrapperWithSameIdentity):


2012-06-12  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt][Mac] Unreviewed buildfix after r120076.

        * WebCoreSupport/QTKitFullScreenVideoHandler.h:

2012-06-11  Kaustubh Atrawalkar  <kaustubh@motorola.com>

        [DRT] LTC:: counterValueForElementById() could be moved to Internals.
        https://bugs.webkit.org/show_bug.cgi?id=84406

        Reviewed by Hajime Morita.

        Move the counterValueForElementById from LayoutTestCotroller to Internals and
        remove the old platform specific implementations as it exclusively tests WebCore functionality.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-06-11  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt][Win] Add missing includes to fix the build
        https://bugs.webkit.org/show_bug.cgi?id=88538

        Reviewed by Simon Hausmann.

        * Api/qwebframe.cpp:
        * WebCoreSupport/ChromeClientQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/GeolocationClientQt.cpp:
        * WebCoreSupport/IconDatabaseClientQt.cpp:

2012-06-08  Simon Hausmann  <simon.hausmann@nokia.com>

        Unreviewed, fix file permissions.

        * WebCoreSupport/FrameLoaderClientQt.cpp:

2012-06-07  Zoltan Horvath  <zoltan@webkit.org>

        [Qt] Qt DRT should load external resources - cleanup
        https://bugs.webkit.org/show_bug.cgi?id=88568

        Make things more straighforward to load external URLs in DRT.

        Reviewed by Ryosuke Niwa.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchWillSendRequest):

2012-06-06  Zoltan Horvath  <zoltan@webkit.org>

        [Qt] Qt DRT / WTR should be able to load external resources
        https://bugs.webkit.org/show_bug.cgi?id=87326

        Reviewed by Hajime Morita.

        Allow external resources to be loaded when the main frame's URL is also an external resource.
        This change is analogous to r118231 for Mac port and to r119153 Chromium port.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::blockRequest):
        (WebCore):
        (WebCore::isLocalhost):
        (WebCore::hostIsUsedBySomeTestsToGenerateError):
        (WebCore::FrameLoaderClientQt::dispatchWillSendRequest):

2012-06-05  Max Feil  <mfeil@rim.com>

        [BlackBerry] Conditionally enlarge HTML5 video controls in fullscreen mode
        https://bugs.webkit.org/show_bug.cgi?id=87551

        Reviewed by Antonio Gomes.

        Add a new parameter to adjustSliderThumbSize() for BlackBerry
        port. Fixing compiles of other ports.

        * WebCoreSupport/RenderThemeQStyle.cpp:
        (WebCore::RenderThemeQStyle::adjustSliderThumbSize):
        * WebCoreSupport/RenderThemeQStyle.h:
        (RenderThemeQStyle):

2012-06-04  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r119384.
        http://trac.webkit.org/changeset/119384
        https://bugs.webkit.org/show_bug.cgi?id=88227

        Need to update some tests, I'll roll in later. (Requested by
        Zoltan on #webkit).

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchWillSendRequest):

2012-06-04  Zoltan Horvath  <zoltan@webkit.org>

        [Qt] Qt DRT / WTR should be able to load external resources
        https://bugs.webkit.org/show_bug.cgi?id=87326

        Reviewed by Ryosuke Niwa.

        Allow external resources to be loaded when the main frame's URL is also an external resource.
        This change is analogous to r118231 for Mac port and to r119153 Chromium port.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::blockRequest):
        (WebCore):
        (WebCore::isLocalhost):
        (WebCore::hostIsUsedBySomeTestsToGenerateError):
        (WebCore::FrameLoaderClientQt::dispatchWillSendRequest):

2012-06-04  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Don't use WebKit HAVE() macro in public Qt headers

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qgraphicswebview.h:
        * Api/qwebframe_p.h:
        * Api/qwebpage.h:
        * Api/qwebview.h:

2012-06-02  Zoltan Arvai  <zarvai@inf.u-szeged.hu>

        [Qt] Use 'Ok' and 'Cancel' buttons in JavaScript confirm box.
        https://bugs.webkit.org/show_bug.cgi?id=76190
        Based on Johannes Obermayrs (johannesobermayr@gmx.de) patch.
        See: http://www.javascripter.net/faq/confirm.htm
        Fixes: https://bugs.kde.org/show_bug.cgi?id=287629

        Reviewed by Simon Hausmann.

        * Api/qwebpage.cpp:
        (QWebPage::javaScriptConfirm):

2012-06-01  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] Fix QObject bridge tests in Qt5 after (not so) recent QVariant changes
        https://bugs.webkit.org/show_bug.cgi?id=88127

        Reviewed by Noam Rosenthal.

        We were checking for invalid QVariants in a very odd way. Since in Qt5 the
        userType of invalid changed to not be Void, this broke the tests for QtWebKit
        with Qt5. Replace those checks with QVariant::isValid() calls.

        * tests/qobjectbridge/tst_qobjectbridge.cpp:
        (tst_QObjectBridge::evalJS):
        (tst_QObjectBridge::evalJSV):

2012-06-01  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] Move QObject bridge related tests from tst_qwebframe to tst_qobjectbridge
        https://bugs.webkit.org/show_bug.cgi?id=88117

        Reviewed by Noam Rosenthal.

        Five tests (classEnums, classConstructor, transferInvokable, findObject and
        findChildren) were removed since they contained commented code since the file was
        added back in 2008. The QObject bridge tests were probably inspired in similar
        tests for QtScript, so many features not yet implemented were present in QtWebKit
        tests but commented.

        Other minor changes:
        - Moved MyEnumTestQObject near the only test function that uses it.
        - Removed unnecessary Q_INVOKABLE from setBrushProperty.
        - Removed some bits of dead / commented code.

        * tests/qobjectbridge/qobjectbridge.pro: Added.
        * tests/qobjectbridge/tst_qobjectbridge.cpp: Copied from Source/WebKit/qt/tests/qwebframe/tst_qwebframe.cpp.
        Kept only the tests related to QObject bridge implementation.
        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame):
        (tst_QWebFrame::init):
        (tst_QWebFrame::cleanup):

2012-06-01  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        [Qt] Remove deprecated to/fromAscii()
        https://bugs.webkit.org/show_bug.cgi?id=88086

        Reviewed by Simon Hausmann.

        Replacing to/fromAscii with to/fromLatin1 since it
        is deprecated on Qt5.

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore):
        * WebCoreSupport/InspectorServerQt.cpp:
        (WebCore::InspectorServerRequestHandlerQt::tcpReadyRead):
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        (tst_QDeclarativeWebView::settings):

2012-05-31  Hajime Morrita  <morrita@chromium.org>

        REGRESSION(r117572): editing/spelling/spellcheck-async-remove-frame.html crashes on Mac
        https://bugs.webkit.org/show_bug.cgi?id=86859

        Reviewed by Ryosuke Niwa.

        * WebCoreSupport/TextCheckerClientQt.h:
        (WebCore::TextCheckerClientQt::requestCheckingOfString):

2012-05-31  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Simplify QT_VERSION_CHECKS for Qt5 by introducing HAVE(QT5)
        https://bugs.webkit.org/show_bug.cgi?id=87955

        Reviewed by Simon Hausmann.

        * Api/qgraphicswebview.cpp:
        * Api/qgraphicswebview.h:
        * Api/qwebframe.cpp:
        * Api/qwebframe_p.h:
        * Api/qwebpage.cpp:
        * Api/qwebpage.h:
        * Api/qwebsettings.cpp:
        * Api/qwebview.cpp:
        * Api/qwebview.h:
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        * WebCoreSupport/GeolocationClientQt.cpp:
        * WebCoreSupport/GeolocationClientQt.h:
        * WebCoreSupport/PageClientQt.cpp:
        * WebCoreSupport/WebEventConversion.cpp:
        * declarative/plugin.cpp:
        * tests/qwebframe/tst_qwebframe.cpp:
        * tests/util.h:

2012-05-29  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Sync up favicon-implementation with WebView url changes in r118158

        https://bugs.webkit.org/show_bug.cgi?id=87133

        We now base64-encode the page url in the image-provider url, so that any
        normalization done by QUrl will not mess up the page-url. The logic of
        creating and parsing the provider-url has been moved into the image
        provider, to keep it in one place.

        We were also releasing icons (even ones we hadn't retained), which we can't
        do since we don't know when the icon url is no longer in use.

        Reviewed-by Simon Hausmann.

        * declarative/plugin.cpp:
        * declarative/public.pri:

2012-05-25  Jesus Sanchez-Palencia  <jesus.palencia@openbossa.org>

        WebKitTestRunner needs to support layoutTestController.setJavaScriptProfilingEnabled
        https://bugs.webkit.org/show_bug.cgi?id=42328

        Reviewed by Eric Seidel.

        Removed unneeded setJavaScriptProfilingEnabled function from DRT after its
        move to windows.internals.settings.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-05-27  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Trivial unreviewed build fix with newer Qt

        * Api/qwebpage.cpp:
        (QWebPage::javaScriptPrompt): Don't use deprecated QString/QChar functions.

2012-05-24  Ryosuke Niwa  <rniwa@webkit.org>

        createContextualFragment and insertAdjacentHTML should throw syntax error
        https://bugs.webkit.org/show_bug.cgi?id=87454

        Reviewed by Darin Adler.

        Pass an ExceptionCode to createContextualFragment.

        * Api/qwebelement.cpp:
        (QWebElement::appendInside):
        (QWebElement::prependInside):
        (QWebElement::prependOutside):
        (QWebElement::appendOutside):
        (QWebElement::encloseContentsWith):
        (QWebElement::encloseWith):

2012-05-25  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Buildfix for newer Qt5
        https://bugs.webkit.org/show_bug.cgi?id=87257

        Reviewed by Simon Hausmann.

        * Api/qgraphicswebview.h: QtWidgets/qicon.h -> QtGui/qicon.h renaming.
        * Api/qwebframe.h: QtWidgets/qicon.h -> QtGui/qicon.h renaming.
        * Api/qwebhistory.h: QtWidgets/qicon.h -> QtGui/qicon.h renaming.
        * Api/qwebsettings.h: QtWidgets/qicon.h -> QtGui/qicon.h renaming.
        * Api/qwebview.h: QtWidgets/qicon.h -> QtGui/qicon.h renaming.
        * WebCoreSupport/FrameLoaderClientQt.cpp: Adjust QCoreApplication::translate() parameter list to newer Qt 5.
        (WebCore::FrameLoaderClientQt::cancelledError):
        (WebCore::FrameLoaderClientQt::blockedError):
        (WebCore::FrameLoaderClientQt::cannotShowURLError):
        (WebCore::FrameLoaderClientQt::interruptedForPolicyChangeError):
        (WebCore::FrameLoaderClientQt::cannotShowMIMETypeError):
        (WebCore::FrameLoaderClientQt::fileDoesNotExistError):
        (WebCore::FrameLoaderClientQt::pluginWillHandleLoadError):
        * declarative/experimental/plugin.cpp: QDeclarativeExtensionPlugin -> QQmlExtensionPlugin renaming.
        * declarative/plugin.cpp: QDeclarativeExtensionPlugin -> QQmlExtensionPlugin renaming.
        (WebKitQmlPlugin):

2012-05-24  Ryosuke Niwa  <rniwa@webkit.org>

        There are too many poorly named functions to create a fragment from markup
        https://bugs.webkit.org/show_bug.cgi?id=87339

        Reviewed by Eric Seidel.

        Replace calls to Range::createDocumentFragmentForElement by calls to
        createContextualDocumentFragment.

        * Api/qwebelement.cpp:
        (QWebElement::appendInside):
        (QWebElement::prependInside):
        (QWebElement::prependOutside):
        (QWebElement::appendOutside):
        (QWebElement::encloseContentsWith):
        (QWebElement::encloseWith):

2012-05-24  Gabor Ballabas  <gaborb@inf.u-szeged.hu>

        [Qt]  Fix Webkit1 + V8 build.
        https://bugs.webkit.org/show_bug.cgi?id=87368

        Reviewed by Eric Seidel.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::evaluateScriptInIsolatedWorld):

2012-05-24  Steffen Imhof  <steffen.imhof@basyskom.com>

        https://bugs.webkit.org/show_bug.cgi?id=67093
        [Qt] Default window.alert shows HTML entities in certain cases

        Instead of HTML escaping the text of JS alerts (which does not work
        consistently because of Qt's automatisms), build message boxes
        explicitly to be able set the text format to plain text.
        QInputDialog is a bit hacky, because there is no way to access or
        control the contained QLabel.

        Reviewed by Simon Hausmann.

        * Api/qwebpage.cpp:
        (QWebPage::javaScriptAlert):
        (QWebPage::javaScriptConfirm):
        (QWebPage::javaScriptPrompt):

2012-05-21  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Move setEditingBehavior() from layoutTestController to window.internals
        https://bugs.webkit.org/show_bug.cgi?id=42689

        Reviewed by Hajime Morita and Kenneth Rohde Christiansen.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setWindowsBehaviorAsEditingBehavior): Reduce the job
        done by this function to the minimal.
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-05-18  MORITA Hajime  <morrita@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=85515
        Stale frame in WebCore::SpellChecker::didCheckSucceeded

        Reviewed by Ryosuke Niwa.

        * WebCoreSupport/EditorClientQt.h:
        (WebCore::EditorClientQt::frameWillDetachPage):

2012-05-17  Hironori Bono  <hbono@chromium.org>

        [Refactoring] Move platform-specific code in Editor::respondToChangedSelection to the WebKit layer
        https://bugs.webkit.org/show_bug.cgi?id=86591

        Reviewed by Ryosuke Niwa.

        This change adds a TextCheckerClient::shouldEraseMarkersAfterChangeSelection
        function to remove platform-specific code from Editor::respondToChangedSelection
        function.

        No new tests, no change in behavior.

        * WebCoreSupport/TextCheckerClientQt.cpp:
        (WebCore::TextCheckerClientQt::shouldEraseMarkersAfterChangeSelection):
        (WebCore):
        * WebCoreSupport/TextCheckerClientQt.h:
        (TextCheckerClientQt):

2012-05-17  Dan Bernstein  <mitz@apple.com>

        REGRESSION (r117428): WebKit API/SPI was removed
        https://bugs.webkit.org/show_bug.cgi?id=86748

        Reverted r117428.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setDomainRelaxationForbiddenForURLScheme):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-05-17  Tsarko Yaroslav  <eriktsarko@googlemail.com>

        Reviewed by Yury Semikhatsky.

        Bug 71271: [Qt] Web Inspector: local inspector client UI becomes unresponsive on debugger pause during
        https://bugs.webkit.org/show_bug.cgi?id=71271

        Web Inspector should not belong to any other page groups since it is a specialized debugger window.
        The reason for this change is when debugger pauses web page it pauses all the pages in the page group of debuggee.
        This leads that Web Inspector front-end is paused too leading to locked Web Inspector GUI (bugzilla ticket 71271).

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::openInspectorFrontend):

2012-05-17  Gyuyoung Kim  <gyuyoung.kim@samsung.com>

        Convert setDomainRelaxationForbiddenForURLScheme to use InternalSettings interface
        https://bugs.webkit.org/show_bug.cgi?id=86704

        Reviewed by Eric Seidel.

        Remove setDomainRelaxationForbiddenForURLScheme functions, because it is able to work in the
        cross-port way through the InternalSettings interface.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-05-15  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        [Qt] Add infra for testing double-tap to zoom functionality etc
        https://bugs.webkit.org/show_bug.cgi?id=86474

        Reviewed by Simon Hausmann.

        The WebViewportInfo class was renamed to QWebKitTest in preparation
        of becoming a separate module. Adapt the use API.

        * declarative/experimental/plugin.cpp:

2012-05-10  Gyuyoung Kim  <gyuyoung.kim@samsung.com>

        Move resumeAnimations to use Internals interface
        https://bugs.webkit.org/show_bug.cgi?id=86063

        Reviewed by Alexey Proskuryakov.

        Remove resumeAnimations functions, because it is able to work in the 
        cross-port way through the Internals interface.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-05-10  Marius Storm-Olsen  <marius.storm-olsen@nokia.com>

        [Qt] Fix \sa usage in documentation

        Ensure comma between elements (6 missing).

        Reviewed by Tor Arne Vestbø.

        * Api/qwebpage.cpp:

2012-05-09  Gyuyoung Kim  <gyuyoung.kim@samsung.com>

        Move suspendAnimations to use Internals interface.
        https://bugs.webkit.org/show_bug.cgi?id=85986

        Reviewed by Ryosuke Niwa.

        Remove suspendAnimations functions, because it is able to work in the 
        cross-port way through the Internals interface.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-05-08  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] X11 plugins need to be reworked for Qt5+WK1
        https://bugs.webkit.org/show_bug.cgi?id=80691

        Reviewed by Simon Hausmann.

        * Api/qwebsettings.cpp:
        (QWebSettings::enablePersistentStorage):
        Build fix for Qt5.
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::createPlugin):
        Inject the wmode parameter for flash so it will
        work in windowless, non-transparent mode which
        is the only one we support currently.
        * WebCoreSupport/PageClientQt.cpp:
        (WebCore):
        (WebCore::QWebPageClient::ownerWindow):
        Added a getter for the top level window so the PluginView
        can get it without calling into QtWidgets code.

2012-05-06  Gyuyoung Kim  <gyuyoung.kim@samsung.com>

        Convert isPageBoxVisible to use Internals interface.
        https://bugs.webkit.org/show_bug.cgi?id=85692

        Reviewed by Darin Adler.

        Remove isPageBoxVisible functions, because it is able to work in the
        cross-port way through the Internals interface.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-05-04  Nate Chapin  <japhet@chromium.org>

        Don't require FrameLoaderClient to manufacture a commitData() call for empty documents.
        https://bugs.webkit.org/show_bug.cgi?id=85533

        Reviewed by Alexey Proskuryakov.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::FrameLoaderClientQt):
        (WebCore):
        (WebCore::FrameLoaderClientQt::finishedLoading):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (WebCore::FrameLoaderClientQt::makeRepresentation):
        (WebCore::FrameLoaderClientQt::revertToProvisionalState):
        (FrameLoaderClientQt):

2012-05-03  Fady Samuel  <fsamuel@chromium.org>

        Removing line in computeViewportAttributes that enforces a minimum scale factor to never allow zooming out more than viewport
        https://bugs.webkit.org/show_bug.cgi?id=70609

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qwebpage.cpp:
        (QWebPage::viewportAttributesForSize):
        * Api/qwebpage.h:
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::viewportAsText):

2012-04-27  Jon Lee  <jonlee@apple.com>

        Migrate permission functions to Notification from NotificationCenter
        https://bugs.webkit.org/show_bug.cgi?id=80485
        <rdar://problem/10965458>

        Reviewed by Jian Li.

        * WebCoreSupport/NotificationPresenterClientQt.h:
        (NotificationPresenterClientQt): Add stub implementation of requestPermission.
        (WebCore::NotificationPresenterClientQt::requestPermission):

2012-05-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r115907.
        http://trac.webkit.org/changeset/115907
        https://bugs.webkit.org/show_bug.cgi?id=85458

        It broke all viewport tests on Qt and on GTK (Requested by
        Ossy on #webkit).

        * Api/qwebpage.cpp:
        (QWebPage::viewportAttributesForSize):
        * Api/qwebpage.h:
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::viewportAsText):

2012-04-18  Jon Honeycutt  <jhoneycutt@apple.com>

        FrameLoaderClient::dispatchWillSendSubmitEvent() should be given more
        information about the form being submitted
        https://bugs.webkit.org/show_bug.cgi?id=84297

        Reviewed by Andy Estes.

        * WebCoreSupport/FrameLoaderClientQt.h:
        (WebCore::FrameLoaderClientQt::dispatchWillSendSubmitEvent):
        Updated method declaration.

2012-05-02  Fady Samuel  <fsamuel@chromium.org>

        Removing line in computeViewportAttributes that enforces a minimum scale factor to never allow zooming out more than viewport
        https://bugs.webkit.org/show_bug.cgi?id=70609

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qwebpage.h:
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::viewportAsText):

2012-05-02  Milian Wolff  <milian.wolff@kdab.com>

        [Qt] Pass page-height to PrintContext::begin to fix print layouting
        https://bugs.webkit.org/show_bug.cgi?id=84864

        Reviewed by Simon Hausmann.

        * Api/qwebframe.cpp:
        (QWebFrame::print):

2012-05-02  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        [Qt] Add initial QML documentation
        https://bugs.webkit.org/show_bug.cgi?id=85370

        Reviewed by Simon Hausmann.

        * docs/qtwebkit.qdocconf: Add WebKit2 dirs.

2012-05-02  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Buildfix after r115812 for !ENABLE(DEVICE_ORIENTATION) builds.
        https://bugs.webkit.org/show_bug.cgi?id=64595

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qwebpage.cpp:

2012-04-27  Allan Sandfeld Jensen  <allan.jensen@nokia.com>

        Move WebKit1 specific conversion of touch-events to WebKit1
        https://bugs.webkit.org/show_bug.cgi?id=84951

        Reviewed by Kenneth Rohde Christiansen.

        Fix compile when touch-events are disabled.

        * WebCoreSupport/WebEventConversion.cpp:
        (WebCore):
        * WebCoreSupport/WebEventConversion.h:
        (WebCore):

2012-04-26  Allan Sandfeld Jensen  <allan.jensen@nokia.com>

        Move WebKit1 specific conversion of touch-events to WebKit1.
        https://bugs.webkit.org/show_bug.cgi?id=84951

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::touchEvent):
        * WebCoreSupport/WebEventConversion.cpp:
        (WebKitPlatformTouchEvent):
        (WebKitPlatformTouchPoint):
        (WebCore::WebKitPlatformTouchEvent::WebKitPlatformTouchEvent):
        (WebCore::WebKitPlatformTouchPoint::WebKitPlatformTouchPoint):
        (WebCore::convertTouchEvent):
        * WebCoreSupport/WebEventConversion.h:

2012-04-25  Alexis Menard  <alexis.menard@openbossa.org>

        Rename CSSStyleSelector files to StyleResolver.
        https://bugs.webkit.org/show_bug.cgi?id=84814

        Reviewed by Antti Koivisto.

        Rename CSSStyleSelector files to match the new class name StyleResolver.
        Update the includes all over the code base to the new name.

        * Api/qwebelement.cpp:
        * WebCoreSupport/RenderThemeQStyle.cpp:

2012-04-25  Milian Wolff  <milian.wolff@kdab.com>

        [Qt] add LayoutTestController::setPrinting support to Qt unit tests
        https://bugs.webkit.org/show_bug.cgi?id=84246

        Reviewed by Simon Hausmann.

        * Api/qwebframe.cpp:
        (QWebFrame::paintPagesWithBoundaries):
        * Api/qwebframe.h:
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::paintPagesWithBoundaries):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-04-24  Alexis Menard  <alexis.menard@openbossa.org>

        Replace occurences of style selector from variables and methods names by style resolver.
        https://bugs.webkit.org/show_bug.cgi?id=84765

        Reviewed by Andreas Kling.

        Rename methods and variables to follow the new name StyleResolver. It requires to update the
        local variables, methods parameters, and function names to match the new name and to remove
        the concept of "selector" to avoid clashing with the CSS concept. The next and last patch
        will be to rename CSSStyleSelector file and update the includes.

        * Api/qwebelement.cpp:
        (QWebElement::styleProperty):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setMediaType):
        * WebCoreSupport/RenderThemeQStyle.cpp:
        (WebCore::RenderThemeQStyle::adjustButtonStyle):
        (WebCore::RenderThemeQStyle::adjustTextAreaStyle):
        (WebCore::RenderThemeQStyle::adjustMenuListButtonStyle):
        (WebCore::RenderThemeQStyle::adjustSliderThumbStyle):
        (WebCore::RenderThemeQStyle::adjustSearchFieldDecorationStyle):
        (WebCore::RenderThemeQStyle::adjustSearchFieldResultsDecorationStyle):

2012-04-24  Alexis Menard  <alexis.menard@openbossa.org>

        Rename CSSStyleSelector class to StyleResolver.
        https://bugs.webkit.org/show_bug.cgi?id=84734

        Reviewed by Andreas Kling.

        The name CSSStyleSelector is confusing as it conflicts a bit with
        the CSS concept of selectors. One could think it's an encapsulation
        of the CSS selectors but it's not, in fact this class is responsible
        of finding the RenderStyle for a given element. This is the first patch
        as I will later rename the files, and then rename the local variables.

        * WebCoreSupport/RenderThemeQStyle.cpp:
        (WebCore::RenderThemeQStyle::adjustButtonStyle):
        (WebCore::RenderThemeQStyle::adjustTextAreaStyle):
        (WebCore::RenderThemeQStyle::adjustMenuListButtonStyle):
        (WebCore::RenderThemeQStyle::adjustSliderTrackStyle):
        (WebCore::RenderThemeQStyle::adjustSliderThumbStyle):
        (WebCore::RenderThemeQStyle::adjustSearchFieldDecorationStyle):
        (WebCore::RenderThemeQStyle::adjustSearchFieldResultsDecorationStyle):
        * WebCoreSupport/RenderThemeQStyle.h:
        (RenderThemeQStyle):

2012-04-24  Yael Aharon  <yael.aharon@nokia.com>

        [Qt] Move notification icon download out of WebCore
        https://bugs.webkit.org/show_bug.cgi?id=80700

        Reviewed by Simon Hausmann.

        Remove the code that handles the notification's icon and use the icon url instead.
        The "display" event has to be asynchronous, so a timer was added to achieve that.
        The platform plugin API and example were updated to reflect this change.
        This change does not address the recent changes in web notifications spec.

        * Api/qwebkitplatformplugin.h:
        (QWebNotificationData):
        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationWrapper::NotificationWrapper):
        (WebCore::NotificationWrapper::sendDisplayEvent):
        (WebCore):
        (WebCore::NotificationWrapper::iconUrl):
        (WebCore::NotificationPresenterClientQt::show):
        (WebCore::NotificationPresenterClientQt::displayNotification):
        (WebCore::NotificationPresenterClientQt::sendDisplayEvent):
        * WebCoreSupport/NotificationPresenterClientQt.h:
        (NotificationWrapper):
        (NotificationPresenterClientQt):
        * examples/platformplugin/WebNotificationPresenter.cpp:
        (WebNotificationWidget::showNotification):
        * examples/platformplugin/qwebkitplatformplugin.h:
        (QWebNotificationData):

2012-04-18  Allan Sandfeld Jensen  <allan.jensen@nokia.com>

        Clean-up WheelEvent Conversion.
        https://bugs.webkit.org/show_bug.cgi?id=84243

        Reviewed by Simon Hausmann.

        * WebCoreSupport/WebEventConversion.cpp:
        (WebCore::WebKitPlatformWheelEvent::applyDelta):

2012-04-13  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Build fix with QT_NO_BEARERMANAGEMENT

        Reviewed by Jocelyn Turcotte.

        * tests/benchmarks/loading/tst_loading.cpp:
        (tst_Loading):
        (tst_Loading::load):
        * tests/benchmarks/painting/tst_painting.cpp:
        (tst_Painting):
        (tst_Painting::paint):

2012-04-13  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Fix build on OS X

        We were manually including the directories needed from WTF, instead of
        using the WEBKIT qmake variable to add dependencies, which also adds
        other tricks from WTF.pri, such as the right include paths for ICU.

        Reviewed by Simon Hausmann.

        * declarative/experimental/experimental.pri:
        * declarative/public.pri:

2012-04-12  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] Fix WebKit1 build with V8
        https://bugs.webkit.org/show_bug.cgi?id=83322

        Reviewed by Adam Barth.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::didCreateScriptContext):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (FrameLoaderClientQt):
        (WebCore::FrameLoaderClientQt::allowScriptExtension):
        * WebCoreSupport/InitWebCoreQt.cpp:

2012-03-05  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Use QRawFont when building with Qt 5
        https://bugs.webkit.org/show_bug.cgi?id=78001

        Since QFont is not used internally, we now need
        to query for a QFont that should be a good
        enough match.

        Reviewed by Simon Hausmann.

        * Api/qwebpage.cpp:
        (QWebPage::inputMethodQuery):
        * WebCoreSupport/PopupMenuQt.cpp:
        (WebCore::PopupMenuQt::show):
        * WebCoreSupport/RenderThemeQStyle.cpp:
        (WebCore::RenderThemeQStyle::computeSizeBasedOnStyle):

2012-04-06  Levi Weintraub  <leviw@chromium.org>

        Correct LayoutUnit usgae in RenderThemeQt and RenderThemeQStyle
        https://bugs.webkit.org/show_bug.cgi?id=83376

        Reviewed by Eric Seidel.

        Calculating the progress animation using the pixel-snapped RenderProgress size instead
        of the internal sub-pixel version.

        * WebCoreSupport/RenderThemeQStyle.cpp:
        (WebCore::RenderThemeQStyle::animationDurationForProgressBar):

2012-04-05  Patrick Gansterer  <paroga@webkit.org>

        [Qt] Correct <wtf/*.h> include paths.
        https://bugs.webkit.org/show_bug.cgi?id=83270

        Reviewed by Eric Seidel.

        Modify the #include declerations so that the
        wtf types are included using the full path.

        * Api/qwebpage.cpp:
        * WebCoreSupport/ContextMenuClientQt.h:
        * WebCoreSupport/EditorClientQt.h:
        * WebCoreSupport/FrameLoaderClientQt.h:
        * WebCoreSupport/InspectorServerQt.cpp:

2012-04-05  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Fix includes after QtDeclarative -> QtQML renaming
        https://bugs.webkit.org/show_bug.cgi?id=82195

        Relanding r112651, because Qt5 is updated everywhere.

        * declarative/experimental/plugin.cpp:
        * declarative/plugin.cpp:
        (WebKitQmlPlugin::initializeEngine):

2012-04-04  Andras Becsi  <andras.becsi@nokia.com>

        [Qt][WK2] Make the WebView a subclass of Flickable
        https://bugs.webkit.org/show_bug.cgi?id=83033

        Reviewed by Kenneth Rohde Christiansen.

        Add needed dependency to quick-private for projects that include the WebView header.

        * declarative/experimental/experimental.pri:
        * declarative/public.pri:

2012-04-03  Alexis Menard  <alexis.menard@openbossa.org>

        [Part 2] We should use CSSPropertyID rather than integers when manipulating CSS property ids.
        https://bugs.webkit.org/show_bug.cgi?id=82977

        Reviewed by Andreas Kling.

        Update the code to use CSSPropertyID rather than an integer.

        * Api/qwebelement.cpp:
        (QWebElement::setStyleProperty):

2012-04-02  Alexis Menard  <alexis.menard@openbossa.org>

        We should use CSSPropertyID rather than integers when manipulating CSS property ids.
        https://bugs.webkit.org/show_bug.cgi?id=82941

        Reviewed by Andreas Kling.

        CSSPropertyID enum holds all the CSS property ids but many parts of WebKit treat the ids
        as integers. While it's not incorrect it is nicer to use the enum as a parameter of
        functions manipulating property ids, as we ensure that the value passed will be an
        existing value. It will also feel more correct after this patch that CSSProperty::id()
        return a value of the enum rather than an integer. As this modification is quite big this
        is the first part only so it will be easier to review.

        * Api/qwebelement.cpp:
        (QWebElement::styleProperty): Adapt to the API change and also remove an unecessary name->id
        conversion.

2012-04-02  Casper van Donderen  <casper.vandonderen@nokia.com>

        Qt: Doc: Fix typo which marks document to be printed in console font.
        https://bugs.webkit.org/show_bug.cgi?id=82893

        Reviewed by Simon Hausmann.

        The qtwebkit-bridge.qdoc file contained a typo where a \c {} was
        missing its closing curly bracket, this marked the rest of the page as
        text to be printed using the code/console font.
        * docs/qtwebkit-bridge.qdoc:

2012-04-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r112651.
        http://trac.webkit.org/changeset/112651
        https://bugs.webkit.org/show_bug.cgi?id=82887

        It doesn't work with older Qt5 (Requested by Ossy on #webkit).

        * declarative/experimental/plugin.cpp:
        * declarative/plugin.cpp:
        (WebKitQmlPlugin::initializeEngine):

2012-04-01  Jon Lee  <jonlee@apple.com>

        Rename notification properties and functions
        https://bugs.webkit.org/show_bug.cgi?id=80482
        <rdar://problem/10912432>

        Reviewed by Kentaro Hara.

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationPresenterClientQt::show): Refactor to call tag().
        (WebCore::NotificationPresenterClientQt::removeReplacedNotificationFromQueue): Refactor to call tag().

2012-03-30  Emil A Eklund  <eae@chromium.org>

        Change WebKit/WebKit2 platform code to use pixel snapped values
        https://bugs.webkit.org/show_bug.cgi?id=82549

        Reviewed by Eric Seidel.

        * Api/qwebelement.cpp:
        (QWebElement::geometry):
        Replace getRect with getPixelSnappedRect to avoid having to expose
        subpixel types to the platform layer.
        
        * Api/qwebpage.cpp:
        (QWebPagePrivate::TouchAdjuster::findCandidatePointForTouch):
        Use pixel snapped element rect when comparing with the touch rect as the
        touch rect use screen cordinates which are represented with pixel
        accuracy.
        
        * WebCoreSupport/ChromeClientQt.h:
        (WebCore::ChromeClientQt::scrollRectIntoView):
        Change scrollRectIntoView to take a LayoutRect to match base class
        interface.

2012-03-30  Mark Pilgrim  <pilgrim@chromium.org>

        GEOLOCATION should be implemented as Page Supplement
        https://bugs.webkit.org/show_bug.cgi?id=82228

        Reviewed by Adam Barth.

        Geolocation is now a Supplement in Page so the interface
        has changed for setting up the page's geolocation client
        initially and accessing the controller later.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::resetGeolocationMock):
        (DumpRenderTreeSupportQt::setMockGeolocationPermission):
        (DumpRenderTreeSupportQt::setMockGeolocationPosition):
        (DumpRenderTreeSupportQt::setMockGeolocationError):
        (DumpRenderTreeSupportQt::numberOfPendingGeolocationPermissionRequests):
        * WebCoreSupport/GeolocationClientQt.cpp:
        (WebCore::GeolocationClientQt::positionUpdated):
        (WebCore::GeolocationClientQt::startUpdating):

2012-03-29  Ádám Kallai  <kadam@inf.u-szeged.hu>

        [Qt] Build fix by renameing QtDeclarative to QtQml in header calls.
        https://bugs.webkit.org/show_bug.cgi?id=82195

        Reviewed by Simon Hausmann.

        * declarative/experimental/plugin.cpp:
        * declarative/plugin.cpp:
        (WebKitQmlPlugin::initializeEngine):

2012-03-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r112553.
        http://trac.webkit.org/changeset/112553
        https://bugs.webkit.org/show_bug.cgi?id=82638

        It made all tests crash on Qt WK2 (Requested by Ossy_away on
        #webkit).

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::resetGeolocationMock):
        (DumpRenderTreeSupportQt::setMockGeolocationPermission):
        (DumpRenderTreeSupportQt::setMockGeolocationPosition):
        (DumpRenderTreeSupportQt::setMockGeolocationError):
        (DumpRenderTreeSupportQt::numberOfPendingGeolocationPermissionRequests):
        * WebCoreSupport/GeolocationClientQt.cpp:
        (WebCore::GeolocationClientQt::positionUpdated):
        (WebCore::GeolocationClientQt::startUpdating):

2012-03-29  Mark Pilgrim  <pilgrim@chromium.org>

        GEOLOCATION should be implemented as Page Supplement
        https://bugs.webkit.org/show_bug.cgi?id=82228

        Reviewed by Adam Barth.

        Geolocation is now a Supplement in Page so the interface
        has changed for setting up the page's geolocation client
        initially and accessing the controller later.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::resetGeolocationMock):
        (DumpRenderTreeSupportQt::setMockGeolocationPermission):
        (DumpRenderTreeSupportQt::setMockGeolocationPosition):
        (DumpRenderTreeSupportQt::setMockGeolocationError):
        (DumpRenderTreeSupportQt::numberOfPendingGeolocationPermissionRequests):
        * WebCoreSupport/GeolocationClientQt.cpp:
        (WebCore::GeolocationClientQt::positionUpdated):
        (WebCore::GeolocationClientQt::startUpdating):

2012-03-28  Nate Chapin  <japhet@chromium.org>

        Remove dispatchDidLoadMainResource callback, since no
        port implements it.
        https://bugs.webkit.org/show_bug.cgi?id=82539

        Reviewed by Alexey Proskuryakov.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (FrameLoaderClientQt):

2012-03-20  Eric Seidel  <eric@webkit.org>

        Move wtf/Platform.h from JavaScriptCore to Source/WTF/wtf
        https://bugs.webkit.org/show_bug.cgi?id=80911

        Reviewed by Adam Barth.

        Fix WTF header include paths since although
        Source/WTF is included, no longer are all the
        subdirectories (thus "RefPtr.h" can't work).

        * Api/qwebdatabase_p.h:
        * Api/qwebscriptworld_p.h:
        * Api/qwebsecurityorigin_p.h:
        * WebCoreSupport/InspectorClientQt.h:
        * WebCoreSupport/QtFallbackWebPopup.h:
        * WebCoreSupport/QtWebComboBox.h:
        * declarative/experimental/experimental.pri:
        * declarative/public.pri:
        * tests/MIMESniffing/MIMESniffing.pro:

2012-03-19  Adam Barth  <abarth@webkit.org>

        Remove support for "magic" iframe
        https://bugs.webkit.org/show_bug.cgi?id=81590

        Reviewed by Eric Seidel.

        Remove FrameLoaderClient methods that no longer exist.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (FrameLoaderClientQt):

2012-03-19  Emil A Eklund  <eae@chromium.org>

        [mac/qt/chromium] Change platform code to use pixelSnappedRect methods
        https://bugs.webkit.org/show_bug.cgi?id=81016

        Reviewed by Eric Seidel.

        * Api/qwebelement.cpp:
        (QWebElement::geometry):
        (QWebElement::render):

2012-03-16  Teemu Katajisto  <teemu.katajisto@digia.com>

        [Qt] QtWebKit documentation missing a few since 4.6 information
        https://bugs.webkit.org/show_bug.cgi?id=81328

        Reviewed by Simon Hausmann.

        * Api/qwebpage.cpp:
        * Api/qwebsettings.cpp:

2012-03-15  Yuta Kitamura  <yutak@chromium.org>

        [Qt] Change default WebSocket protocol to the latest one
        https://bugs.webkit.org/show_bug.cgi?id=73630

        Reviewed by Simon Hausmann.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        Use RFC6455 WebSocket protocol by default.

2012-03-07  Jon Lee  <jonlee@apple.com>

        Move NotificationContents into Notification
        https://bugs.webkit.org/show_bug.cgi?id=80487
        <rdar://problem/10965519>

        Reviewed by Jian Li.

        Refactor to use accessor methods on Notification.
        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationWrapper::title):
        (WebCore::NotificationWrapper::message):
        (WebCore::NotificationPresenterClientQt::displayNotification):
        (WebCore::NotificationPresenterClientQt::cancel):
        (WebCore::NotificationPresenterClientQt::notificationClicked):
        (WebCore::NotificationPresenterClientQt::dumpReplacedIdText):
        (WebCore::NotificationPresenterClientQt::dumpShowText):

2012-03-13  Jon Lee  <jonlee@apple.com>

        Separate NOTIFICATIONS and LEGACY_NOTIFICATIONS
        https://bugs.webkit.org/show_bug.cgi?id=80922
        <rdar://problem/11035082>

        Reviewed by Jian Li.

        You can include either NOTIFICATIONS or LEGACY_NOTIFICATIONS and have a complete API.
        LEGACY_NOTIFICATIONS should cover all of the previous functionality, and NOTIFICATIONS will cover the
        new API. Therefore, APIs that are common between the two will have:
        #if ENABLE(NOTIFICATIONS) || ENABLE(LEGACY_NOTIFICATIONS)

        This patch initially sets both to be exactly the same. As other bugs with patches begin to migrate to
        the new API, the defines will begin to split. This allows ports to decide which set of APIs to include.

        Update everything to be #if ENABLE(NOTIFICATIONS) || ENABLE(LEGACY_NOTIFICATIONS)
        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        (QWebPagePrivate::~QWebPagePrivate):
        (QWebPage::setFeaturePermission):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::dumpNotification):
        (DumpRenderTreeSupportQt::simulateDesktopNotificationClick):
        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore):
        (WebCore::NotificationWrapper::NotificationWrapper):
        (WebCore::NotificationWrapper::close):
        (WebCore::NotificationWrapper::title):
        (WebCore::NotificationWrapper::message):
        (WebCore::NotificationWrapper::iconData):
        (WebCore::NotificationWrapper::openerPageUrl):
        (WebCore::NotificationWrapper::notificationClicked):
        (WebCore::NotificationWrapper::notificationClosed):
        * WebCoreSupport/NotificationPresenterClientQt.h:
        (WebCore):

2012-03-14  Csaba Osztrogonác  <ossy@webkit.org>

        Last buildfix for Qt after r110595. :)

        Reviewed by Benjamin Poulain.

        * Api/qwebpage.cpp:
        * WebCoreSupport/GeolocationClientQt.h:

2012-03-13  Benjamin Poulain  <bpoulain@apple.com>

        Attempt to fix QtMinimal bot after r110595

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):

2012-03-13  Benjamin Poulain  <bpoulain@apple.com>

        Another attempt at fixing QtMinimal bot after r110595

        Blind fix, unreviewed.

        * WebCoreSupport/GeolocationClientQt.h:

2012-03-13  Benjamin Poulain  <bpoulain@apple.com>

        Attempt to fix QtMinimal bot after r110595

        Blind fix, unreviewed.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::resetGeolocationMock):
        (DumpRenderTreeSupportQt::setMockGeolocationPermission):
        (DumpRenderTreeSupportQt::setMockGeolocationPosition):
        (DumpRenderTreeSupportQt::setMockGeolocationError):
        (DumpRenderTreeSupportQt::numberOfPendingGeolocationPermissionRequests):
        * WebCoreSupport/GeolocationPermissionClientQt.h:

2012-03-13  Adam Barth  <abarth@webkit.org> && Benjamin Poulain  <bpoulain@apple.com>

        Always enable ENABLE(CLIENT_BASED_GEOLOCATION)
        https://bugs.webkit.org/show_bug.cgi?id=78853

        Reviewed by Adam Barth.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/ChromeClientQt.h:
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (toGeolocationClientMock):
        (DumpRenderTreeSupportQt::resetGeolocationMock):
        (DumpRenderTreeSupportQt::setMockGeolocationPermission):
        (DumpRenderTreeSupportQt::setMockGeolocationPosition):
        (DumpRenderTreeSupportQt::setMockGeolocationError):
        (DumpRenderTreeSupportQt::numberOfPendingGeolocationPermissionRequests):
        * WebCoreSupport/GeolocationClientQt.h:
        (WebCore):

2012-03-12  Antonio Gomes  <agomes@rim.com>

        Convert nodesFromRect tests to use Internals interface
        https://bugs.webkit.org/show_bug.cgi?id=80886

        Reviewed by Ryosuke Niwa.

        Removed DRTSupportQt::nodesFromRect support, since
        it can work in the cross-port way through the
        Internals interface.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-03-09  Jon Lee  <jonlee@apple.com>

        Rename NotificationPresenter to NotificationClient
        https://bugs.webkit.org/show_bug.cgi?id=80488
        <rdar://problem/10965558>

        Reviewed by Kentaro Hara.

        Refactor to use renamed WebCore::NotificationClient.
        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationPresenterClientQt::checkPermission):
        (WebCore::NotificationPresenterClientQt::allowNotificationForFrame):
        * WebCoreSupport/NotificationPresenterClientQt.h:
        (NotificationPresenterClientQt):

2012-03-09  Emil A Eklund  <eae@chromium.org>

        Add roundedPoint to HitTestResult and change platform code to use it
        https://bugs.webkit.org/show_bug.cgi?id=80715

        Reviewed by James Robinson.

        Change ports to use roundedPoint to avoid exposing subpixel types to
        platform code.

        * Api/qwebframe.cpp:
        (QWebHitTestResultPrivate::QWebHitTestResultPrivate):

2012-03-09  Jon Lee  <jonlee@apple.com>

        Add support for ENABLE(LEGACY_NOTIFICATIONS)
        https://bugs.webkit.org/show_bug.cgi?id=80497

        Reviewed by Adam Barth.

        Prep for b80472: Update API for Web Notifications
        * examples/platformplugin/platformplugin.pro:

2012-03-09  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Fix compilation without QtQuick1
        https://bugs.webkit.org/show_bug.cgi?id=80503

        Qt 4.8 API test fix after r110050.

        Reviewed by Zoltan Herczeg.

        * declarative/public.pri: Add load(features) to ensure HAVE_QQUICK1=1 is set.

2012-03-08  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Use Qt's module system for install rules and depending on QtWebKit

        Instead of rolling our own install rules we now use the same approach as
        every other Qt module, by loading qt_module.prf and qt_module_config.prf.

        This ensures that we follow the same semantics as the rest of Qt on
        what sort of config options are enabled by default (create_cmake eg.).
        It also allows us to use QT += webkit instead of the workaround we had
        with CONFIG += qtwebkit.

        We do however force Qt to always treat our build as a non-developer build,
        so the libraries will end up in the WebKit lib directory instead of the
        qtbase directory (as with a normal developer-build). This allows us to
        keep the webkit-build self-contained. If Qt is a developer build we still
        copy the module file manually to Qt, so that you don't have to install
        WebKit to make it available.

        For non-developer builds of Qt, it is still possible to use the built
        WebKit libraries without having to install them, by having the variable
        QMAKE_EXTRA_MODULE_FORWARDS set in the project's .qmake.cache file,
        pointing to $WEBKITOUTUTDIR/$CONFIGURATION/modules.

        https://bugs.webkit.org/show_bug.cgi?id=80590

        Reviewed by Simon Hausmann.

        * declarative/experimental/experimental.pri:
        * declarative/experimental/plugin.cpp:
        * declarative/plugin.cpp:
        * declarative/public.pri:
        * tests/tests.pri:

2012-03-08  Antti Koivisto  <antti@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=80370
        Enable matched declaration caching for elements with a style attribute

        Reviewed by Andreas Kling

        * Api/qwebelement.cpp:
        (QWebElement::styleProperty):
        (QWebElement::setStyleProperty):

2012-03-07  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Fix compilation without QtQuick1
        https://bugs.webkit.org/show_bug.cgi?id=80503

        Reviewed by Tor Arne Vestbø.

        Compile and enable the QtQuick1/QML1 plugin and webview
        only if we're using Qt 4 at the moment. QQuick1 clashes
        with QQuick2 right now because both declare QDeclarativeEngine
        and friends as classes.

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):
        * declarative/public.pri:
        * tests/tests.pri:

2012-03-07  Kangil Han  <kangil.han@samsung.com>

        [DRT] Remove PlainTextController implementations.
        https://bugs.webkit.org/show_bug.cgi?id=79959

        Reviewed by Hajime Morita.

        PlainTextController usages in existing tests have been
        replaced by internals API by bug 78570.
        So this patch will remove PlainTextController implementations
        to avoid further usage in new tests.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-03-06  Philippe Normand  <pnormand@igalia.com>

        [GStreamer] disable GStreamerGWorld when building against 0.11
        https://bugs.webkit.org/show_bug.cgi?id=77088

        Reviewed by Martin Robinson.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::ChromeClientQt):
        (WebCore::ChromeClientQt::~ChromeClientQt):
        (WebCore):
        * WebCoreSupport/FullScreenVideoQt.cpp:
        (WebCore):
        (WebCore::FullScreenVideoQt::FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::~FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::enterFullScreenForNode):
        (WebCore::FullScreenVideoQt::exitFullScreenForNode):
        (WebCore::FullScreenVideoQt::isValid):
        * WebCoreSupport/FullScreenVideoQt.h:
        (WebCore):

2012-03-03  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Fix static_libs_as_shared build
        https://bugs.webkit.org/show_bug.cgi?id=80214

        Reviewed by Tor Arne Vestbø.

        Add helper function to be called by WebProcess main
        to potentially initialize the QStyle theme.

        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebKit):
        (WebKit::initializeWebKit2Theme):

2012-03-02  Casper van Donderen  <casper.vandonderen@nokia.com>

        [Qt] Documentation cleanup
        https://bugs.webkit.org/show_bug.cgi?id=80131

        Reviewed by Simon Hausmann.

        QDoc uses different commands to do bold, lists, and italics.
        This change updates the documentation accordingly.
        QTBUG-24578

        * Api/qwebframe.cpp:
        * Api/qwebhistory.cpp:
        * Api/qwebinspector.cpp:
        * Api/qwebpage.cpp:
        * Api/qwebpluginfactory.cpp:
        * Api/qwebsettings.cpp:
        * declarative/qdeclarativewebview.cpp:
        * docs/qtwebkit-bridge.qdoc:
        * docs/qtwebkit.qdoc:
        * docs/qtwebkit.qdocconf:

2012-03-02  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Build system cleanup

        Rubber-stamped by Antti Koivisto.

        * tests/MIMESniffing/MIMESniffing.pro: Don't link in WTFAssertions.cpp for ASSERT, now
        that the symbols are properly exported with export macros from the DLL.

2012-03-02  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Move QStyle theming code out of WebCore into WebKit1
        https://bugs.webkit.org/show_bug.cgi?id=80128

        Reviewed by Kenneth Rohde Christiansen.

        Moved the bulk of the QStyle dependant code here, where it's okay to depend on QtWidgets/QStyle.
        Install the QStyle factory functions in initWebCoreQt.cpp.

        * Api/qwebpage.cpp:
        (QWebPage::swallowContextMenuEvent):
        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebCore::initializeWebCoreQt):
        * WebCoreSupport/RenderThemeQStyle.cpp: Renamed from Source/WebCore/platform/qt/RenderThemeQStyle.cpp.
        (WebCore):
        (WebCore::initStyleOption):
        (WebCore::RenderThemeQStyle::getStylePainter):
        (WebCore::StylePainterQStyle::StylePainterQStyle):
        (WebCore::StylePainterQStyle::init):
        (WebCore::RenderThemeQStyle::create):
        (WebCore::RenderThemeQStyle::RenderThemeQStyle):
        (WebCore::RenderThemeQStyle::~RenderThemeQStyle):
        (WebCore::RenderThemeQStyle::fallbackStyle):
        (WebCore::RenderThemeQStyle::qStyle):
        (WebCore::RenderThemeQStyle::findFrameLineWidth):
        (WebCore::RenderThemeQStyle::inflateButtonRect):
        (WebCore::RenderThemeQStyle::computeSizeBasedOnStyle):
        (WebCore::RenderThemeQStyle::adjustButtonStyle):
        (WebCore::RenderThemeQStyle::setButtonPadding):
        (WebCore::RenderThemeQStyle::paintButton):
        (WebCore::RenderThemeQStyle::paintTextField):
        (WebCore::RenderThemeQStyle::adjustTextAreaStyle):
        (WebCore::RenderThemeQStyle::paintTextArea):
        (WebCore::RenderThemeQStyle::setPopupPadding):
        (WebCore::RenderThemeQStyle::paintMenuList):
        (WebCore::RenderThemeQStyle::adjustMenuListButtonStyle):
        (WebCore::RenderThemeQStyle::paintMenuListButton):
        (WebCore::RenderThemeQStyle::animationDurationForProgressBar):
        (WebCore::RenderThemeQStyle::paintProgressBar):
        (WebCore::RenderThemeQStyle::paintSliderTrack):
        (WebCore::RenderThemeQStyle::adjustSliderTrackStyle):
        (WebCore::RenderThemeQStyle::paintSliderThumb):
        (WebCore::RenderThemeQStyle::adjustSliderThumbStyle):
        (WebCore::RenderThemeQStyle::paintSearchField):
        (WebCore::RenderThemeQStyle::adjustSearchFieldDecorationStyle):
        (WebCore::RenderThemeQStyle::paintSearchFieldDecoration):
        (WebCore::RenderThemeQStyle::adjustSearchFieldResultsDecorationStyle):
        (WebCore::RenderThemeQStyle::paintSearchFieldResultsDecoration):
        (WebCore::RenderThemeQStyle::paintInnerSpinButton):
        (WebCore::RenderThemeQStyle::initializeCommonQStyleOptions):
        (WebCore::RenderThemeQStyle::adjustSliderThumbSize):
        * WebCoreSupport/RenderThemeQStyle.h: Renamed from Source/WebCore/platform/qt/RenderThemeQStyle.h.
        (WebCore):
        (RenderThemeQStyle):
        (StylePainterQStyle):
        (WebCore::StylePainterQStyle::isValid):
        (WebCore::StylePainterQStyle::drawPrimitive):
        (WebCore::StylePainterQStyle::drawControl):
        (WebCore::StylePainterQStyle::drawComplexControl):
        * WebCoreSupport/ScrollbarThemeQStyle.cpp: Copied from Source/WebCore/platform/qt/ScrollbarThemeQt.cpp.
        (WebCore):
        (WebCore::ScrollbarThemeQStyle::~ScrollbarThemeQStyle):
        (WebCore::scPart):
        (WebCore::scrollbarPart):
        (WebCore::styleOptionSlider):
        (WebCore::ScrollbarThemeQStyle::paint):
        (WebCore::ScrollbarThemeQStyle::hitTest):
        (WebCore::ScrollbarThemeQStyle::shouldCenterOnThumb):
        (WebCore::ScrollbarThemeQStyle::invalidatePart):
        (WebCore::ScrollbarThemeQStyle::scrollbarThickness):
        (WebCore::ScrollbarThemeQStyle::thumbPosition):
        (WebCore::ScrollbarThemeQStyle::thumbLength):
        (WebCore::ScrollbarThemeQStyle::trackPosition):
        (WebCore::ScrollbarThemeQStyle::trackLength):
        (WebCore::ScrollbarThemeQStyle::paintScrollCorner):
        (WebCore::ScrollbarThemeQStyle::style):
        * WebCoreSupport/ScrollbarThemeQStyle.h: Renamed from Source/WebCore/platform/qt/ScrollbarThemeQt.h.
        (WebCore):
        (ScrollbarThemeQStyle):

2012-02-27  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] Move registration of experimental types to the proper plugin
        https://bugs.webkit.org/show_bug.cgi?id=79706

        Reviewed by Tor Arne Vestbø.

        * declarative/experimental/plugin.cpp:
        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):

2012-02-28  Antti Koivisto  <antti@apple.com>

        Try to fix build.

        Not reviewed.

        * Api/qwebelement.cpp:
        (QWebElement::styleProperty):

2012-02-26  Hajime Morrita  <morrita@chromium.org>

        Move ChromeClient::showContextMenu() to ContextMenuClient
        https://bugs.webkit.org/show_bug.cgi?id=79427

        Reviewed by Adam Barth.

        * WebCoreSupport/ChromeClientQt.h:
        (ChromeClientQt):

2012-02-24  Jocelyn Turcotte  <jocelyn.turcotte@nokia.com>

        [Qt] API: Unify the loading properties and signals.
        https://bugs.webkit.org/show_bug.cgi?id=79486

        Reviewed by Simon Hausmann.

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):

2012-02-24  Holger Hans Peter Freyther  <holger@moiji-mobile.com>

        [Qt] Build fix. macro "QSKIP" now only takes 1 argument on Qt5
        https://bugs.webkit.org/show_bug.cgi?id=79328

        Reviewed by Csaba Osztrogonác.

        Introduce an alternative QSKIP that can work with both Qt4
        and Qt5 without adding #ifdef to each usage site.

        * tests/benchmarks/loading/tst_loading.cpp:
        (tst_Loading::load):
        * tests/benchmarks/painting/tst_painting.cpp:
        (tst_Painting::paint):
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        (tst_QDeclarativeWebView::elementAreaAt):
        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::setHtmlWithBaseURL):
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::geolocationRequestJS):
        (tst_QWebPage::loadHtml5Video):
        (tst_QWebPage::screenshot):
        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::reusePage):

2012-02-24  Shinya Kawanaka  <shinyak@chromium.org>

        SpellCheckRequest needs to know the context where the spellcheck happened.
        https://bugs.webkit.org/show_bug.cgi?id=79320

        Reviewed by Hajime Morita.

        * WebCoreSupport/TextCheckerClientQt.h:
        (WebCore::TextCheckerClientQt::requestCheckingOfString):

2012-02-23  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Add support for touch cancellation
        https://bugs.webkit.org/show_bug.cgi?id=79348

        Reviewed by Kenneth Rohde Christiansen.

        Forward incoming touch cancellation events to the WebCore
        event handler.

        * Api/qgraphicswebview.cpp:
        (QGraphicsWebView::sceneEvent):
        * Api/qwebpage.cpp:
        (QWebPage::event):
        * Api/qwebview.cpp:
        (QWebView::event):

2012-02-22  Hajime Morrita  <morrita@chromium.org>

        NOTIFICATIONS should be implemented as PageSupplement
        https://bugs.webkit.org/show_bug.cgi?id=79052

        Reviewed by Adam Barth.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):

2012-02-21  Ryosuke Niwa  <rniwa@webkit.org>

        Remove the remaining uses of CSSStyleDeclaration in Editor
        https://bugs.webkit.org/show_bug.cgi?id=78939

        Reviewed by Enrica Casucci.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::shouldApplyStyle):
        * WebCoreSupport/EditorClientQt.h:
        (EditorClientQt):

2012-02-22  Mihnea Ovidenie  <mihnea@adobe.com>

        [Qt] REGRESSION(r108108): It made 3 fast/repaint tests fail
        https://bugs.webkit.org/show_bug.cgi?id=78960

        Reviewed by Csaba Osztrogonác.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):
        (QWebSettings::QWebSettings):
        * Api/qwebsettings.h:

2012-02-22  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Move QMenu dependant scrollbar context menu handling out of WebCore
        https://bugs.webkit.org/show_bug.cgi?id=79233

        Reviewed by Kenneth Rohde Christiansen.

        Move scrollbar context menu handling here, it's the only place where it is
        used.

        * Api/qwebpage.cpp:
        (handleScrollbarContextMenuEvent):
        (QWebPage::swallowContextMenuEvent):

2012-02-22  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Merge setVisibleRectTrajectoryVector and adjustVisibleRect to
        the more descriptive coverWithTilesIfNeeded
        https://bugs.webkit.org/show_bug.cgi?id=79230

        Reviewed by Simon Hausmann.

        * Api/qgraphicswebview.cpp:
        (QGraphicsWebView::paint):

            Use coverWithTilesIfNeeded().

2012-02-22  Ryosuke Niwa  <rniwa@webkit.org>

        Remove the remaining uses of CSSStyleDeclaration in Editor
        https://bugs.webkit.org/show_bug.cgi?id=78939

        Reviewed by Enrica Casucci.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::shouldApplyStyle):
        * WebCoreSupport/EditorClientQt.h:
        (EditorClientQt):

2012-02-21  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] tst_QWebPage::infiniteLoopJS() timeouts with DFG JIT
        https://bugs.webkit.org/show_bug.cgi?id=79040

        Reviewed by Simon Hausmann.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage): Disable tst_QWebPage::infiniteLoopJS() until proper fix.

2012-02-21  Andras Becsi  <andras.becsi@nokia.com>

        [Qt] Print warning when importing experimental WK2 APIs in QML
        https://bugs.webkit.org/show_bug.cgi?id=78817

        Reviewed by Simon Hausmann.

        * declarative/experimental/plugin.cpp:

2012-02-20  Benjamin Poulain  <benjamin@webkit.org>

        Get rid of the LocalizationStrategy
        https://bugs.webkit.org/show_bug.cgi?id=78324

        Reviewed by Sam Weinig.

        Move the localization code from PlatformStrategiesQt.cpp
        to LocalizedStringsQt.cpp.

        Get rid of LocalizationStrategy from PlatformStrategiesQt

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        * WebCoreSupport/PlatformStrategiesQt.h:
        (PlatformStrategiesQt):

2012-02-16  Simon Hausmann  <simon.hausmann@nokia.com>

        Unreviewed brown-paper bag build fix.

        * WebCoreSupport/WebEventConversion.cpp:
        (WebCore::WebKitPlatformWheelEvent::WebKitPlatformWheelEvent):

2012-02-16  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Move event conversion functions from WebCore to WebKit
        https://bugs.webkit.org/show_bug.cgi?id=78788

        Reviewed by Kenneth Rohde Christiansen.

        Move QtWidgets dependent mouse event constructors out of WebCore
        into WebKit, similar to the web event conversions of WebKit2.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::mouseMoveEvent):
        (QWebPagePrivate::mousePressEvent):
        (QWebPagePrivate::mouseDoubleClickEvent):
        (QWebPagePrivate::mouseTripleClickEvent):
        (QWebPagePrivate::mouseReleaseEvent):
        (QWebPagePrivate::wheelEvent):
        (QWebPage::swallowContextMenuEvent):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::postProgressFinishedNotification):
        * WebCoreSupport/WebEventConversion.cpp: Added.
        (WebCore):
        (WebCore::mouseEventModifiersFromQtKeyboardModifiers):
        (WebCore::mouseEventTypeAndMouseButtonFromQEvent):
        (WebKitPlatformMouseEvent):
        (WebCore::WebKitPlatformMouseEvent::WebKitPlatformMouseEvent):
        (WebCore::convertMouseEvent):
        (WebKitPlatformWheelEvent):
        (WebCore::WebKitPlatformWheelEvent::applyDelta):
        (WebCore::WebKitPlatformWheelEvent::WebKitPlatformWheelEvent):
        (WebCore::convertWheelEvent):
        * WebCoreSupport/WebEventConversion.h: Added.
        (WebCore):

2012-02-16  Adenilson Cavalcanti  <cavalcantii@gmail.com>

        [Qt][WK2] Split QWebPermissionRequest into QWebSecurityOrigin
        https://bugs.webkit.org/show_bug.cgi?id=73215

        Reviewed by Kenneth Rohde Christiansen.

        Adding a class to access security information data
        (e.g. port/scheme/etc),
        while allowing it to be handled in QML side.

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):

2012-02-15  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        Notify ChromeClient when touch-event handlers are installed/removed.
        https://bugs.webkit.org/show_bug.cgi?id=77440

        Reviewed by Darin Fisher and Ryosuke Niwa.

        * WebCoreSupport/ChromeClientQt.h:
        (WebCore::ChromeClientQt::numTouchEventHandlersChanged):

2012-02-15  Simon Hausmann  <simon.hausmann@nokia.com>

        Unreviewed Qt 4.x build fix.

        * WebCoreSupport/PageClientQt.cpp: Fix the QT_VERSION_CHECK pre-processor foo.

2012-02-15  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Replace use of QGLWidget/QGLContext with QOpenGLContext and QSurface for Qt 5
        https://bugs.webkit.org/show_bug.cgi?id=78694

        Reviewed by Noam Rosenthal.

        * WebCoreSupport/PageClientQt.cpp:
        (createPlatformGraphicsContext3DFromWidget): Return the QOpenGLContext and QSurface
        from the QGLWidget when compiling with Qt 5, as that's what WebCore expects.

2012-02-15  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Move Qt platform specific GL Context/Surface creation out of WebCore into WebKit
        https://bugs.webkit.org/show_bug.cgi?id=78692

        Reviewed by Noam Rosenthal.

        Implement GLWidget and GLContext creation from the page client interface.

        * WebCoreSupport/PageClientQt.cpp:
        (createPlatformGraphicsContext3DFromWidget):
        (WebCore):
        (WebCore::PageClientQWidget::createPlatformGraphicsContext3D):
        (WebCore::PageClientQGraphicsWidget::createPlatformGraphicsContext3D):
        * WebCoreSupport/PageClientQt.h:
        (PageClientQWidget):
        (PageClientQGraphicsWidget):

2012-02-14  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Eliminate first set of QtWidgets dependencies from WebCore
        https://bugs.webkit.org/show_bug.cgi?id=78611

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qwebpage.cpp: Add missing includes.
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp: Ditto.
        * WebCoreSupport/FrameLoaderClientQt.cpp: Make it compile by casting
        the QObject based PlatformWidget back to QWidget before doing QWidget
        specific function calls.
        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebCore::initializeWebCoreQt): Moved QStyle specific web-graphic initialization
        here from WebCore.
        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQWidget::setWidgetVisible): Implement show/hiding of widgets
        through delegation to QWidget.
        (WebCore):
        (WebCore::PageClientQGraphicsWidget::setWidgetVisible): Provide empty widget
        show/hide implementation, as it doesn't seem to make sense for graphicsviews.
        * WebCoreSupport/PageClientQt.h:
        (PageClientQWidget):
        (PageClientQGraphicsWidget):

2012-02-15  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        [Qt] Be smarted with tile usages during tiling
        https://bugs.webkit.org/show_bug.cgi?id=78243

        Reviewed by Simon Hausmann.

        Remove internal API used by Symbian.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::dynamicPropertyChangeEvent):

2012-02-15  No'am Rosenthal  <noam.rosenthal@nokia.com>

        [Texmap] Divide TextureMapperNode.cpp to 3 files.
        https://bugs.webkit.org/show_bug.cgi?id=76660

        Rename TextureMapperNode to TextureMapperLayer.

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::renderCompositedLayers):
        * Api/qwebframe.h:
        (WebCore):
        * Api/qwebframe_p.h:
        (WebCore):
        (QWebFramePrivate::QWebFramePrivate):
        (QWebFramePrivate):
        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::TextureMapperLayerClientQt::TextureMapperLayerClientQt):
        (WebCore::TextureMapperLayerClientQt::setTextureMapper):
        (WebCore::TextureMapperLayerClientQt::~TextureMapperLayerClientQt):
        (WebCore::TextureMapperLayerClientQt::syncRootLayer):
        (WebCore::TextureMapperLayerClientQt::rootLayer):
        (WebCore::PageClientQWidget::setRootGraphicsLayer):
        (WebCore::PageClientQWidget::syncLayers):
        (WebCore::PageClientQGraphicsWidget::syncLayers):
        (WebCore::PageClientQGraphicsWidget::setRootGraphicsLayer):
        * WebCoreSupport/PageClientQt.h:
        (TextureMapperLayerClientQt):
        (PageClientQWidget):
        (PageClientQGraphicsWidget):

2012-02-11  Nikolas Zimmermann  <nzimmermann@rim.com>

        Convert svg/animations to use SMIL methods for driving the timeline
        https://bugs.webkit.org/show_bug.cgi?id=78422

        Reviewed by Dirk Schulze.

        Remove SVG animation sampling functionality provided for DRT, which no longer uses it.
        Instead we switched the svg/animations tests to use SVGSVGElement.setCurrentTime.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2012-02-13  Enrica Casucci  <enrica@apple.com>

        Build fix. Unreviewed.

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (PlatformStrategiesQt::createPasteboardStrategy):

2012-02-13  Enrica Casucci  <enrica@apple.com>

        Refactor Mac platform implementation of the Pasteboard class to use Platform Strategies.
        https://bugs.webkit.org/show_bug.cgi?id=78282

        Build fix. Unreviewed.

        * WebCoreSupport/PlatformStrategiesQt.cpp:
        (WebPlatformStrategies::createPasteboardStrategy):
        * WebCoreSupport/PlatformStrategiesQt.h:
        (PlatformStrategiesQt):

2012-02-12  Hajime Morrita  <morrita@chromium.org>

        Page should have less intrusive way to associate API implementation objects.
        https://bugs.webkit.org/show_bug.cgi?id=78085

        Reviewed by Adam Barth.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setMockDeviceOrientation):

2012-02-09  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Fix compilation with newer Qt5
        https://bugs.webkit.org/show_bug.cgi?id=77653

        Reviewed by Tor Arne Vestbø.

        * Api/qgraphicswebview.cpp: Removed unnecessary inclusion of removed header file.
        * declarative/public.pri: Use quick1 instead of qtquick1. It's mandator with Qt 5.
        * tests/tests.pri: Ditto.
        * declarative/qdeclarativewebview_p.h: Fix includes, just use the module-less
        version that works with all Qt versions.
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp: Ditto.

2012-02-08  Leo Franchi  <lfranchi@kde.org>

        Remote web inspector reentrancy fixes
        https://bugs.webkit.org/show_bug.cgi?id=77022

        Reviewed by Joseph Pecoraro.

        * WebCoreSupport/InspectorServerQt.cpp:
        (WebCore::InspectorServerRequestHandlerQt::tcpReadyRead):
        (WebCore::InspectorServerRequestHandlerQt::webSocketReadyRead):

2012-02-06  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Provide more attribute methods in Element
        https://bugs.webkit.org/show_bug.cgi?id=77800

        Reviewed by Ryosuke Niwa.

        * Api/qwebelement.cpp:
        (QWebElement::attributeNames): access attributes via Element interface.

2012-02-03  Jocelyn Turcotte  <jocelyn.turcotte@nokia.com>

        [Qt] Don't version QtWebKit.experimental.
        https://bugs.webkit.org/show_bug.cgi?id=77739

        Reviewed by Tor Arne Vestbø.

        We won't support previous versions of the experimental API.

        * declarative/experimental/plugin.cpp:

2012-02-05  Gavin Barraclough  <barraclough@apple.com>

        Remove JSObject defineGetter/defineSetter lookupGetter/lookupSetter
        https://bugs.webkit.org/show_bug.cgi?id=77451

        Reviewed by Sam Weinig.

        These can now all be implemented in terms of defineOwnProperty & getPropertyDescriptor.
        Also remove initializeGetterSetterProperty, since this is equivalent to putDirectAccessor.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::addQtSenderToGlobalObject):

2012-02-03  Antti Koivisto  <antti@apple.com>

        Rename CSSMutableStyleDeclaration.h/.cpp to StylePropertySet.h/.cpp 
        https://bugs.webkit.org/show_bug.cgi?id=77779

        Reviewed by Darin Adler.

        * Api/qwebelement.cpp:

2012-02-03  Antti Koivisto  <antti@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=77740
        Split CSSMutableStyleDeclaration into separate internal and CSSOM types 

        Reviewed by Andreas Kling and Darin Adler.

        * Api/qwebelement.cpp:
        (QWebElement::styleProperty):

2012-02-03  No'am Rosenthal  <noam.rosenthal@nokia.com>

        [Qt][Texmap] Refactor TextureMapper API to use ImageBuffers when possible.
        https://bugs.webkit.org/show_bug.cgi?id=77148

        Reviewed by Martin Robinson.

        Use TextureMapper::create instead of creating TextureMapperGL/TextureMapperQt directly.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::renderCompositedLayers):
        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQWidget::setRootGraphicsLayer):
        (WebCore::PageClientQGraphicsWidget::setRootGraphicsLayer):

2012-02-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r106620.
        http://trac.webkit.org/changeset/106620
        https://bugs.webkit.org/show_bug.cgi?id=77716

        It broke non ENABLE(3D_RENDERING) builds (Requested by
        Ossy_morning on #webkit).

        * Api/qwebframe.cpp:
        (QWebFramePrivate::renderCompositedLayers):
        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQWidget::setRootGraphicsLayer):
        (WebCore::PageClientQGraphicsWidget::setRootGraphicsLayer):

2012-02-02  No'am Rosenthal  <noam.rosenthal@nokia.com>

        [Qt][Texmap] Refactor TextureMapper API to use ImageBuffers when possible.
        https://bugs.webkit.org/show_bug.cgi?id=77148

        Reviewed by Martin Robinson.

        Use TextureMapper::create instead of creating TextureMapperGL/TextureMapperQt directly.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::renderCompositedLayers):
        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQWidget::setRootGraphicsLayer):
        (WebCore::PageClientQGraphicsWidget::setRootGraphicsLayer):

2012-02-01  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Avoid creating NamedNodeMap unnecessarily
        https://bugs.webkit.org/show_bug.cgi?id=77574

        Reviewed by Ryosuke Niwa.

        * Api/qwebelement.cpp:
        (QWebElement::attributeNames): use updateAttributes().

2012-02-01  Alexis Menard  <alexis.menard@openbossa.org>

        CSSStyleDeclaration.getPropertyPriority() fails for CSS shorthand properties with 'important' priority
        https://bugs.webkit.org/show_bug.cgi?id=49058

        Reviewed by Andreas Kling.

        Update the code as getPropertyPriority has been renamed to propertyIsImportant.

        * Api/qwebelement.cpp:
        (QWebElement::styleProperty):

2012-01-31  Antti Koivisto  <antti@apple.com>

        Try to fix Qt build.

        Not reviewed.

        * Api/qwebelement.cpp:
        (QWebElement::styleProperty):

2012-01-30  Antti Koivisto  <antti@apple.com>

        Reduce non-CSSOM API of CSSStyleDeclaration
        https://bugs.webkit.org/show_bug.cgi?id=77299

        Reviewed by Andreas Kling.

        * Api/qwebelement.cpp:
        (QWebElement::styleProperty):
        (QWebElement::setStyleProperty):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::computedStyleIncludingVisitedInfo):

2012-01-25  Zeno Albisser  <zeno@webkit.org>

        [Qt] public.pri is missing dependency to quick module.
        https://bugs.webkit.org/show_bug.cgi?id=77016

        Reviewed by Tor Arne Vestbø.

        * declarative/public.pri:

2012-01-17  Viatcheslav Ostapenko  <ostapenko.viatcheslav@nokia.com>

        [Qt] Debug build fails with debug qt5
        https://bugs.webkit.org/show_bug.cgi?id=76463

        Reviewed by Simon Hausmann.

        Add QNetworkCookie include in order to satisfy sizeof in QTypeInfo in debug builds.

        * WebCoreSupport/FrameNetworkingContextQt.cpp:

2012-01-13  Marcelo Lira  <marcelo.lira@openbossa.org>

        [Qt] Fix missing signal in qwebframe API test for Qt5
        https://bugs.webkit.org/show_bug.cgi?id=76195

        Reviewed by Noam Rosenthal.

        In Qt5 QObject has a new signal with this signature: "objectNameChanged(QString)".

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::enumerate_data):

2012-01-11  Vsevolod Vlasov  <vsevik@chromium.org>

        Make default console messages line numbers consistent.
        https://bugs.webkit.org/show_bug.cgi?id=74075

        Reviewed by Pavel Feldman.

        Unset line numbers are not printed to console now.

        * Api/qwebpage.cpp:
        (QWebPage::javaScriptConsoleMessage):

2012-01-11  Simon Hausmann  <simon.hausmann@nokia.com>

        Unreviewed trivial build fix: Removed unnecessary QHttpRequestHeader
        inclusion (and the file is removed in newer Qt 5 versions).

        * Api/qwebpage.cpp:

2012-01-11  Rafael Brandao  <rafael.lobo@openbossa.org>

        [Qt][WK2] Fix the build for newer Qt5
        https://bugs.webkit.org/show_bug.cgi?id=75964

        Reviewed by Simon Hausmann.

        Added QHttpHeader, QHttpResponseHeader and QHttpRequestHeader
        that were removed from Qt. They are now kept under a private header
        and only the relevant code is present.

        * Api/qhttpheader.cpp: Added.
        (QHttpHeader::QHttpHeader):
        (QHttpHeader::~QHttpHeader):
        (QHttpHeader::parse):
        (QHttpHeader::value):
        (QHttpHeader::hasKey):
        (QHttpHeader::setValue):
        (QHttpHeader::addValue):
        (QHttpHeader::parseLine):
        (QHttpHeader::toString):
        (QHttpHeader::hasContentLength):
        (QHttpHeader::contentLength):
        (QHttpHeader::setContentLength):
        (QHttpHeader::hasContentType):
        (QHttpHeader::contentType):
        (QHttpHeader::setContentType):
        (QHttpResponseHeader::QHttpResponseHeader):
        (QHttpResponseHeader::parseLine):
        (QHttpResponseHeader::toString):
        (QHttpRequestHeader::QHttpRequestHeader):
        (QHttpRequestHeader::parseLine):
        (QHttpRequestHeader::toString):
        * Api/qhttpheader_p.h: Added.
        (QHttpHeader::isValid):
        (QHttpHeader::setValid):
        (QHttpResponseHeader::statusCode):
        (QHttpResponseHeader::reasonPhrase):
        (QHttpResponseHeader::majorVersion):
        (QHttpResponseHeader::minorVersion):
        (QHttpRequestHeader::method):
        (QHttpRequestHeader::path):
        (QHttpRequestHeader::majorVersion):
        (QHttpRequestHeader::minorVersion):
        * WebCoreSupport/InspectorServerQt.cpp:

2012-01-10  No'am Rosenthal  <noam.rosenthal@nokia.com>

        [Qt] Enable CSS_FILTERS in Qt build
        https://bugs.webkit.org/show_bug.cgi?id=75777

        For now, disallow compositing for filters. We will change that trigger when
        https://bugs.webkit.org/show_bug.cgi?id=75778 is implemented.

        Reviewed by Kenneth Rohde Christiansen.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::allowedCompositingTriggers):

2012-01-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r104421.
        http://trac.webkit.org/changeset/104421
        https://bugs.webkit.org/show_bug.cgi?id=75816

        Need to rebaseline some tests on Linux (Requested by noamr on
        #webkit).

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::allowedCompositingTriggers):

2012-01-08  No'am Rosenthal  <noam.rosenthal@nokia.com>

        [Qt] Enable CSS_FILTERS in Qt build
        https://bugs.webkit.org/show_bug.cgi?id=75777

        For now, disallow compositing for filters. We will change that trigger when
        https://bugs.webkit.org/show_bug.cgi?id=75778 is implemented.

        Reviewed by Kenneth Rohde Christiansen.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::allowedCompositingTriggers):

2012-01-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r104403.
        http://trac.webkit.org/changeset/104403
        https://bugs.webkit.org/show_bug.cgi?id=75803

        It broke all tests on Qt5 (Requested by Ossy_weekend on
        #webkit).

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::allowedCompositingTriggers):

2012-01-08  No'am Rosenthal  <noam.rosenthal@nokia.com>

        [Qt] Enable CSS_FILTERS in Qt build
        https://bugs.webkit.org/show_bug.cgi?id=75777

        For now, disallow compositing for filters. We will change that trigger when
        https://bugs.webkit.org/show_bug.cgi?id=75778 is implemented.

        Reviewed by Kenneth Rohde Christiansen.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::allowedCompositingTriggers):

2012-01-05  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r104231.
        http://trac.webkit.org/changeset/104231
        https://bugs.webkit.org/show_bug.cgi?id=75668

        Breaks the Qt build (Requested by abarth on #webkit).

        * Api/qwebpage.cpp:
        (QWebPage::acceptNavigationRequest):

2012-01-05  Adam Barth  <abarth@webkit.org>

        Introduce Platform namespace for WebCore/platform
        https://bugs.webkit.org/show_bug.cgi?id=75653

        Reviewed by Eric Seidel.

        * Api/qwebpage.cpp:
        (QWebPage::acceptNavigationRequest):

2012-01-05  Zeno Albisser  <zeno@webkit.org>

        [Qt][WK2] Implement custom URL schemes defined in QML.
        https://bugs.webkit.org/show_bug.cgi?id=74931

        Make classes QQuickUrlSchemeDelegate, QQuickNetworkRequest
        and QQuickNetworkReply accessible from QML.

        Reviewed by Kenneth Rohde Christiansen.

        * declarative/experimental/experimental.pri:
        * declarative/experimental/plugin.cpp:
        * declarative/public.pri:

2012-01-04  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Introduce new qmake variable 'WEBKIT' for signaling dependencies

        The custom qmake variable 'WEBKIT' is used for signaling that a
        target depends in some way on other subproject of the WebKit
        project. For now this is limited to the set of intermediate
        libraries: wtf, javascriptcore, webcore, and webkit2.

        This replaces the previous convension of using load(foo) for
        just include paths, and CONFIG += foo to also link against foo.

        Adding a dependency results in additional include paths being
        available, and potentially linking to the library. This is
        decided by the build system based on conditions such as what
        kind of target is being built and the general build config.

        An advantage to his approach is that it simplifies the individual
        foo.prf files, for example by allowing us to use INCLUDEPATH +=
        and LIBS += as normal instead of prepending.

        Reviewed by Simon Hausmann.

        * tests/qgraphicswebview/qgraphicswebview.pro:

2012-01-04  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Move use of $$qtLibraryTarget() to a single place

        Reviewed by Kenneth Rohde Christiansen.

        * declarative/experimental/experimental.pri:
        * declarative/public.pri:
        * examples/platformplugin/platformplugin.pro:

2012-01-03  Jon Lee  <jonlee@apple.com>

        Leak of WebNotificationClient when page is destroyed
        https://bugs.webkit.org/show_bug.cgi?id=74980
        <rdar://problem/10611231>

        Reviewed by Mark Rowe.

        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationPresenterClientQt::notificationControllerDestroyed): Empty implementation, because
        ownership model differs.
        * WebCoreSupport/NotificationPresenterClientQt.h:

2011-12-20  Adam Klein  <adamk@chromium.org>

        Avoid unnecessary work when removing attributes from an element
        https://bugs.webkit.org/show_bug.cgi?id=74953

        Reviewed by Ryosuke Niwa.

        * Api/qwebelement.cpp:
        (QWebElement::removeAttribute): Updated a caller of
        WebCore::Element::removeAttribute to remove ExceptionCode argument.

2011-12-20  Rafael Brandao  <rafael.lobo@openbossa.org>

        [Qt] Extend QQuickWebview::navigationRequested API
        https://bugs.webkit.org/show_bug.cgi?id=73818

        Reviewed by Simon Hausmann.

        * declarative/experimental/plugin.cpp:

2011-12-20  Jarred Nicholls  <jarred@sencha.com>

        [Qt] HTTP header injection via QWebPage::userAgentForUrl()
        https://bugs.webkit.org/show_bug.cgi?id=68560

        Strip out newline characters from the result of userAgentForUrl() to prevent additional
        HTTP headers in HTTP requests.

        New QtTest case that validates the user agent, as returned by navigator.userAgent, does not
        contain any newline characters.

        Reviewed by Simon Hausmann.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::userAgent):
        * tests/qwebpage/tst_qwebpage.cpp:
        (CustomUserAgentWebPage::userAgentForUrl):
        (tst_QWebPage::userAgentNewlineStripping):

2011-12-20  Rafael Brandao  <rafael.lobo@openbossa.org>

        [Qt][WK2] Implement favicon support
        https://bugs.webkit.org/show_bug.cgi?id=71082

        Reviewed by Simon Hausmann.

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::initializeEngine): Setup for the QDeclarativeImageProvider to display favicons.
        Its handles the following url format: "image://webicon/<iconID>#<pageURL>".

2011-12-19  Sam Weinig  <sam@webkit.org>

        More PlatformEvent cleanup
        https://bugs.webkit.org/show_bug.cgi?id=74831

        Reviewed by Dan Bernstein.

        * Api/qwebpage.cpp:
        (QWebPage::swallowContextMenuEvent):
        Update to use new names, access style.

2011-12-19  Alexander Færøy  <ahf@0x90.dk>

        [Qt] Cleanup QTM_NAMESPACE usage in DeviceOrientationProviderQt
        https://bugs.webkit.org/show_bug.cgi?id=74853

        Reviewed by Simon Hausmann.

        * Api/qwebframe_p.h:
        * WebCoreSupport/DeviceOrientationProviderQt.cpp:
        * WebCoreSupport/DeviceOrientationProviderQt.h:

2011-12-19  Alexander Færøy  <ahf@0x90.dk>

        [Qt] Cleanup DeviceMotionClientQt and friends.
        https://bugs.webkit.org/show_bug.cgi?id=74849

        This patch cleans up the DeviceMotionQt class and friends by applying
        the following changes:

        - Remove unnecessary pointer to QWebPage. This is needed to be able to
          reuse the code for WebKit2.
        - Remove QObject dependencies and all signals/slots. Instead, we call
          didChangeDeviceMotion() on the controller directly from
          DeviceMotionProviderQt.

        Reviewed by Simon Hausmann.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/DeviceMotionClientQt.cpp:
        (WebCore::DeviceMotionClientQt::DeviceMotionClientQt):
        (WebCore::DeviceMotionClientQt::~DeviceMotionClientQt):
        (WebCore::DeviceMotionClientQt::setController):
        * WebCoreSupport/DeviceMotionClientQt.h:
        * WebCoreSupport/DeviceMotionProviderQt.cpp:
        (WebCore::DeviceMotionProviderQt::DeviceMotionProviderQt):
        (WebCore::DeviceMotionProviderQt::setController):
        (WebCore::DeviceMotionProviderQt::filter):
        * WebCoreSupport/DeviceMotionProviderQt.h:

2011-12-18  Simon Hausmann  <simon.hausmann@nokia.com>

        Rename EditCommandQt to UndoStepQt
        https://bugs.webkit.org/show_bug.cgi?id=74754

        Reviewed by Ryosuke Niwa.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::registerUndoStep):
        * WebCoreSupport/UndoStepQt.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/EditCommandQt.cpp.
        (UndoStepQt::UndoStepQt):
        (UndoStepQt::~UndoStepQt):
        (UndoStepQt::redo):
        (UndoStepQt::undo):
        * WebCoreSupport/UndoStepQt.h: Renamed from Source/WebKit/qt/WebCoreSupport/EditCommandQt.h.

2011-12-16  Ryosuke Niwa  <rniwa@webkit.org>

        Rename registerCommandFor(Undo|Redo) to register(Undo|Redo)Step
        https://bugs.webkit.org/show_bug.cgi?id=74748

        Reviewed by Eric Seidel.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::registerUndoStep):
        (WebCore::EditorClientQt::registerRedoStep):
        * WebCoreSupport/EditorClientQt.h:

2011-12-16  Sam Weinig  <sam@webkit.org>

        Give PlatformEvents a base class
        https://bugs.webkit.org/show_bug.cgi?id=74685

        Reviewed by Anders Carlsson.

        Add a base class for PlatformMouseEvent, PlatformKeyboardEvent, PlatformWheelEvent
        and PlatformGestureEvent and move Type enumeration and modifiers down to it.

        * WebCoreSupport/DragClientQt.cpp:
        (WebCore::DragClientQt::startDrag):
        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::handleKeyboardEvent):

2011-12-16  Ryosuke Niwa  <rniwa@webkit.org>

        Only EditCommandComposition should implement unapply and reapply
        https://bugs.webkit.org/show_bug.cgi?id=74490

        Reviewed by Eric Seidel.

        EditCommandQt is to be renamed to UndoStepQt in a follow up patch.

        * WebCoreSupport/EditCommandQt.cpp:
        (EditCommandQt::EditCommandQt):
        * WebCoreSupport/EditCommandQt.h:
        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::registerCommandForUndo):
        (WebCore::EditorClientQt::registerCommandForRedo):

2011-12-14  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Get rid of layering violation in PluginViewQt

        PluginViewQt has a layering violation in relying on QWebPagePrivate for
        the check if running under DRT. We remove this and add a specific flag
        in the PluginView for this check, enabled from DRTSupport. This isn't
        pretty, but an improvement over what's currently there.

        Reviewed by Simon Hausmann.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setDumpRenderTreeModeEnabled):

2011-12-15  Michael Brüning  <michael.bruning@nokia.com>

        [QT][WK2]Add (experimental) viewport info view to Minibrowser/qt.
        https://bugs.webkit.org/show_bug.cgi?id=72893

        Reviewed by Kenneth Rohde Christiansen.

        This patch extends QQuickWebViewExperimental by a property named
        viewportInfo, which contains the viewport scalability and
        layout and contents size information. This property is exposed to
        QML through the experimental extension for QQuickWebView.

        * declarative/experimental/plugin.cpp:

2011-12-15  Alexander Færøy  <ahf@0x90.dk>

        [Qt] Remove unnecessary methods and members from DeviceOrientationClientQt
        https://bugs.webkit.org/show_bug.cgi?id=74588

        Reviewed by Simon Hausmann.

        Remove the unused method changeDeviceOrientation() from
        DeviceOrientationClientQt and remove the DeviceOrientationController
        member since it is unused.

        * WebCoreSupport/DeviceOrientationClientQt.cpp:
        (WebCore::DeviceOrientationClientQt::DeviceOrientationClientQt):
        (WebCore::DeviceOrientationClientQt::setController):
        * WebCoreSupport/DeviceOrientationClientQt.h:

2011-12-14  Jing Zhao  <jingzhao@chromium.org>

        Opening two popup menus by dispatchEvent() makes problems.
        https://bugs.webkit.org/show_bug.cgi?id=73304

        Reviewed by Kent Tamura.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::hasOpenedPopup): Not implemented.
        * WebCoreSupport/ChromeClientQt.h: Overrides hasOpenedPopup().

2011-12-14  Hajime Morrita  <morrita@chromium.org>

        JS_INLINE and WTF_INLINE should be visible from WebCore
        https://bugs.webkit.org/show_bug.cgi?id=73191

        Reviewed by Kevin Ollivier.
        
        Added a INCLUDEPATH to make JSExportMacros.h visible.

        * tests/MIMESniffing/MIMESniffing.pro

2011-12-14  Alexander Færøy  <ahf@0x90.dk>

        [Qt] DeviceOrientationClientQt should initialize m_controller to zero.
        https://bugs.webkit.org/show_bug.cgi?id=74522

        Reviewed by Kenneth Rohde Christiansen.

        * WebCoreSupport/DeviceOrientationProviderQt.cpp:
        (WebCore::DeviceOrientationProviderQt::DeviceOrientationProviderQt):

2011-12-14  Alexander Færøy  <alexander.faeroy@nokia.com>

        [Qt] Fix compilation of QtWebKit with --orientation-events without ENABLE_DEVICE_ORIENTATION
        https://bugs.webkit.org/show_bug.cgi?id=74492

        Reviewed by Simon Hausmann.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::_q_orientationChanged):
        * Api/qwebframe_p.h:
        * WebCoreSupport/DeviceMotionProviderQt.cpp:
        * WebCoreSupport/DeviceMotionProviderQt.h:
        * WebCoreSupport/DeviceOrientationProviderQt.cpp:
        * WebCoreSupport/DeviceOrientationProviderQt.h:

2011-12-14  Alexander Færøy  <alexander.faeroy@nokia.com>

        Fix compilation for Qt with --minimal option after r102755.

        Reviewed by Csaba Osztrogonác.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):

2011-12-14  Alexander Færøy  <alexander.faeroy@nokia.com>

        [Qt] DeviceOrientationClientMockQt should be removed in favor of DeviceOrientationClientMock
        https://bugs.webkit.org/show_bug.cgi?id=74417

        Reviewed by Simon Hausmann.

        Based on original patch by Kenneth Christiansen.

        Already covered by current tests.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/DeviceMotionProviderQt.cpp:
        (WebCore::DeviceMotionProviderQt::DeviceMotionProviderQt):
        (WebCore::DeviceMotionProviderQt::filter):
        * WebCoreSupport/DeviceMotionProviderQt.h:
        * WebCoreSupport/DeviceOrientationClientMockQt.cpp: Removed.
        * WebCoreSupport/DeviceOrientationClientMockQt.h: Removed.
        * WebCoreSupport/DeviceOrientationClientQt.cpp:
        (WebCore::DeviceOrientationClientQt::DeviceOrientationClientQt):
        (WebCore::DeviceOrientationClientQt::~DeviceOrientationClientQt):
        (WebCore::DeviceOrientationClientQt::lastOrientation):
        * WebCoreSupport/DeviceOrientationClientQt.h:
        * WebCoreSupport/DeviceOrientationProviderQt.cpp:
        (WebCore::DeviceOrientationProviderQt::DeviceOrientationProviderQt):
        (WebCore::DeviceOrientationProviderQt::setController):
        (WebCore::DeviceOrientationProviderQt::start):
        (WebCore::DeviceOrientationProviderQt::stop):
        (WebCore::DeviceOrientationProviderQt::filter):
        * WebCoreSupport/DeviceOrientationProviderQt.h:
        (WebCore::DeviceOrientationProviderQt::isActive):
        (WebCore::DeviceOrientationProviderQt::lastOrientation):
        (WebCore::DeviceOrientationProviderQt::hasAlpha):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (toDeviceOrientationClientMock):
        (DumpRenderTreeSupportQt::setMockDeviceOrientation):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-12-12  Nándor Huszka  <huszka.nandor@stud.u-szeged.hu>

        [Qt] Missing layoutTestController.dumpWillCacheResponse
        https://bugs.webkit.org/show_bug.cgi?id=74287

        Reviewed by Csaba Osztrogonác.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::dumpWillCacheResponseCallbacks):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidReceiveResponse):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-12-12  Alexis Menard  <alexis.menard@openbossa.org>

        [Qt][WK2] History is not accessible in QML.
        https://bugs.webkit.org/show_bug.cgi?id=73016

        Reviewed by Simon Hausmann.

        Register QWebNavigationHistory and QWebNavigationListModel in the QML plugin.

        * declarative/experimental/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):

2011-12-09  Jesus Sanchez-Palencia  <jesus.palencia@openbossa.org>

        [Qt] request parameter of QQuickWebView::navigationRequested is not a registered type
        https://bugs.webkit.org/show_bug.cgi?id=73826

        Reviewed by Tor Arne Vestbø.

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes): Registering QWebNavigationRequest

2011-12-08  Pierre Rossi  <pierre.rossi@gmail.com>

        Drop ENABLE_NO_LISTBOX_RENDERING, and make it a runtime decision.
        https://bugs.webkit.org/show_bug.cgi?id=73916

        Reviewed by Kent Tamura.

        * WebCoreSupport/PopupMenuQt.cpp:
        (SelectData::multiple):
        (WebCore::PopupMenuQt::selectItem):

2011-12-07  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Unreviewed buildfix after r102262.

        * Api/qwebelement.cpp:
        (QWebElement::setStyleProperty):

2011-12-07  Mary Wu  <mary.wu@torchmobile.com.cn>

        Change function name InitializeLoggingChannelsIfNecessary to follow coding style guideline
        https://bugs.webkit.org/show_bug.cgi?id=73986

        Reviewed by Kenneth Rohde Christiansen.

        * WebCoreSupport/InitWebCoreQt.cpp:
        (WebCore::initializeWebCoreQt):

2011-12-06  Zeno Albisser  <zeno@webkit.org>

        [Qt][Mac] Building debug version only fails.
        https://bugs.webkit.org/show_bug.cgi?id=73895

        WebKit pro/pri files should not explicitly adjust
        the debug_and_release settings.

        Reviewed by Kenneth Rohde Christiansen.

        * declarative/experimental/experimental.pri:
        * declarative/public.pri:

2011-12-02  Hajime Morrita  <morrita@chromium.org>

        Unreviewed, rolling out r101751 and r101775.
        http://trac.webkit.org/changeset/101751
        http://trac.webkit.org/changeset/101775
        https://bugs.webkit.org/show_bug.cgi?id=73191

        breaks Windows build

        * tests/MIMESniffing/MIMESniffing.pro:

2011-12-01  Hajime Morrita  <morrita@chromium.org>

        JS_INLINE and WTF_INLINE should be visible from WebCore
        https://bugs.webkit.org/show_bug.cgi?id=73191

        Reviewed by Kevin Ollivier.
        
        Added a INCLUDEPATH to make JSExportMacros.h visible.

        * tests/MIMESniffing/MIMESniffing.pro

2011-11-30  Alexey Proskuryakov  <ap@apple.com>

        Remove an unneeded argument from FrameLoaderClient::download
        https://bugs.webkit.org/show_bug.cgi?id=73486

        Reviewed by Andreas Kling.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::download):
        * WebCoreSupport/FrameLoaderClientQt.h:
        Updated for the change.

2011-11-30  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Fix crash when using Qt DRT with V8.

        Reviewed by Csaba Osztrogonác.

        Add missing handle scopes for the handles returned by mainWorldContext.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::injectInternalsObject):
        (DumpRenderTreeSupportQt::resetInternalsObject):

2011-11-30  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Fix crashing layout tests

        Reviewed by Kenneth Rohde Christiansen.

        Fix ASSERTION FAILED: m_key != PTHREAD_KEYS_MAX in ThreadIdentifierDataPthreads.cpp(65)
        static WTF::ThreadIdentifier WTF::ThreadIdentifierData::identifier()

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::initialize): Add missing WebCore::initializeWebCoreQt().

2011-11-30  Andrew Wason  <rectalogic@rectalogic.com>

        Replace Qt QThread threading back-end with pthread/Win32 threading back-ends
        https://bugs.webkit.org/show_bug.cgi?id=72155

        Reviewed by Simon Hausmann.

        Extract WebCore initialization out of QWebPagePrivate into a
        separate initialization function. This also needs to be called
        from public static QWebSettings methods that call into WebCore,
        since those can be used before a QWebPage has been constructed.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * Api/qwebsettings.cpp:
        (QWebSettings::globalSettings):
        (QWebSettings::setIconDatabasePath):
        (QWebSettings::iconDatabasePath):
        (QWebSettings::clearIconDatabase):
        (QWebSettings::iconForUrl):
        (QWebSettings::setWebGraphic):
        (QWebSettings::webGraphic):
        (QWebSettings::clearMemoryCaches):
        (QWebSettings::maximumPagesInCache):
        (QWebSettings::setObjectCacheCapacities):
        (QWebSettings::setOfflineStoragePath):
        (QWebSettings::offlineStoragePath):
        (QWebSettings::setOfflineWebApplicationCachePath):
        (QWebSettings::offlineWebApplicationCachePath):
        (QWebSettings::setOfflineWebApplicationCacheQuota):
        (QWebSettings::offlineWebApplicationCacheQuota):
        (QWebSettings::enablePersistentStorage):
        * WebCoreSupport/InitWebCoreQt.cpp: Added.
        (WebCore::initializeWebCoreQt):
        * WebCoreSupport/InitWebCoreQt.h: Added.

2011-11-30  Adenilson Cavalcanti  <adenilson.silva@openbossa.org>

        [Qt][WK2] Implement permission API for Qt port
        https://bugs.webkit.org/show_bug.cgi?id=59200

        Permission API hookup for Geolocation, it allows to receive in WebView
        a signal when a permission request is done (e.g. to grant permission
        for accessing geolocation information) and set it accordingly.

        Reviewed by Simon Hausmann.

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):

2011-11-29  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Make WebKit/qt build with V8 and Qt 5
        https://bugs.webkit.org/show_bug.cgi?id=73315

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qwebelement.cpp:
        (QtWebElementRuntime::initialize): #ifdef JSC code
        properly. There's no V8 equivalent just yet.
        * Api/qwebelement.h: Get rid of old V8 cruft.
        * Api/qwebframe.cpp:
        (QWebFrame::addToJavaScriptWindowObject): QScriptEngine -> QJSEngine.
        (QWebFrame::evaluateJavaScript): Ditto.
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (QtDRTNodeRuntime::initialize): #ifdef JSC code.
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::didCreateScriptContext): Adapt to FrameLoaderClient
        V8 API changes that happened long time ago.
        (WebCore::FrameLoaderClientQt::willReleaseScriptContext): Ditto.
        * WebCoreSupport/FrameLoaderClientQt.h: Ditto.
        * WebCoreSupport/InspectorClientQt.cpp: Add missing include for V8 build.

2011-11-28  Jon Lee  <jonlee@apple.com>

        Create skeleton framework for notifications support in WK2
        https://bugs.webkit.org/show_bug.cgi?id=73253
        <rdar://problem/10356943>

        Reviewed by Sam Weinig.

        * Api/qwebpage.cpp: Add notification client to pageClients.
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/ChromeClientQt.cpp: Remove notification client from ChromeClient implementation.
        * WebCoreSupport/ChromeClientQt.h:
        * WebCoreSupport/NotificationPresenterClientQt.cpp: Refactor with change of NotificationContents to struct
        (WebCore::NotificationWrapper::title):
        (WebCore::NotificationWrapper::message):
        (WebCore::NotificationPresenterClientQt::displayNotification):
        (WebCore::NotificationPresenterClientQt::cancel):
        (WebCore::NotificationPresenterClientQt::notificationClicked):
        (WebCore::NotificationPresenterClientQt::dumpReplacedIdText):
        (WebCore::NotificationPresenterClientQt::dumpShowText):

2011-11-28  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Build system fixes against V8.

        Reviewed by Tor Arne Vestbø.

        Add forwarding headers for building against Qt's v8 with
        v8 include style.

        * v8/ForwardingHeaders/v8-debug.h: Added.
        * v8/ForwardingHeaders/v8-preparser.h: Added.
        * v8/ForwardingHeaders/v8-profiler.h: Added.
        * v8/ForwardingHeaders/v8-testing.h: Added.
        * v8/ForwardingHeaders/v8.h: Added.
        * v8/ForwardingHeaders/v8stdint.h: Added.

2011-11-26  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: remove disconnectFromBackend from the protocol.
        https://bugs.webkit.org/show_bug.cgi?id=73127

        Reviewed by Yury Semikhatsky.

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::inspectorDestroyed):
        (WebCore::InspectorClientQt::closeInspectorFrontend):
        (WebCore::InspectorFrontendClientQt::inspectorClientDestroyed):
        * WebCoreSupport/InspectorClientQt.h:

2011-11-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r101193.
        http://trac.webkit.org/changeset/101193
        https://bugs.webkit.org/show_bug.cgi?id=73158

        Breaks Windows and Qt minimal. (Requested by pfeldman on
        #webkit).

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::inspectorDestroyed):
        (WebCore::InspectorFrontendClientQt::disconnectFromBackend):
        (WebCore::InspectorFrontendClientQt::inspectorClientDestroyed):
        * WebCoreSupport/InspectorClientQt.h:

2011-11-26  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: remove disconnectFromBackend from the protocol.
        https://bugs.webkit.org/show_bug.cgi?id=73127

        Reviewed by Yury Semikhatsky.

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::inspectorDestroyed):
        (WebCore::InspectorClientQt::closeInspectorFrontend):
        (WebCore::InspectorFrontendClientQt::inspectorClientDestroyed):
        * WebCoreSupport/InspectorClientQt.h:

2011-11-25  Alexis Menard  <alexis.menard@openbossa.org>

        [Qt][WK2] QWebDownloadItem should be registered in the experimental plugin.
        https://bugs.webkit.org/show_bug.cgi?id=73132

        Reviewed by Simon Hausmann.

        Make sure QWebDownloadItem is registered in the right plugin.

        * declarative/experimental/plugin.cpp:
        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):

2011-11-22  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: remove Inspector::bringToFront from the protocol.
        https://bugs.webkit.org/show_bug.cgi?id=72937

        Reviewed by Yury Semikhatsky.

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::bringFrontendToFront):
        * WebCoreSupport/InspectorClientQt.h:

2011-10-17  Antonio Gomes  <agomes@rim.com>

        Pass a Frame* parameter in EditorClient::respondToChangedSelection
        https://bugs.webkit.org/show_bug.cgi?id=70248

        Reviewed by Ryosuke Niwa.

        * WebCoreSupport/EditorClientQt.cpp: Make use of the newly added Frame* parameter.
        (WebCore::EditorClientQt::respondToChangedSelection):
        * WebCoreSupport/EditorClientQt.h:

2011-11-18  Yuta Kitamura  <yutak@chromium.org>

        [Qt] Enable WebSocket hybi tests
        https://bugs.webkit.org/show_bug.cgi?id=72687

        Reviewed by Simon Hausmann.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::defaultHixie76WebSocketProtocolEnabled):
        (DumpRenderTreeSupportQt::setHixie76WebSocketProtocolEnabled):
        Call WebCore::Settings::setUseHixie76WebSocketProtocol() to switch WebSocket protocols.
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-11-17  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Layer violation: ThirdPartyCookiesQt.cpp uses QWebSettings in two places
        https://bugs.webkit.org/show_bug.cgi?id=72597

        Reviewed by Kenneth Rohde Christiansen.

        Implemented NetworkingContext::thirdPartyCookiePolicyPermission, which queries
        the global QWebSettings.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::thirdPartyCookiePolicyAllows): Adapt to the
        changed thirdPartyCookiePolicyPermits WebCore API that operates on a networking context.
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForNewWindowAction): Pass networking
        context to ResourceRequest::toNetworkRequest.
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForNavigationAction): Ditto.
        (WebCore::FrameLoaderClientQt::startDownload): Ditto.
        * WebCoreSupport/FrameNetworkingContextQt.cpp:
        (WebCore::FrameNetworkingContextQt::thirdPartyCookiePolicyPermission): Implement.
        * WebCoreSupport/FrameNetworkingContextQt.h:
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::thirdPartyCookiePolicy): Adapt to QtDRTSupport API change.

2011-11-17  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Layer violation: qt_runtime.cpp accesses QWebElement and QTDRTNode
        https://bugs.webkit.org/show_bug.cgi?id=72595

        Reviewed by Noam Rosenthal.

        Move QWebElement and QtDRTNode JS bindings from WebCore to WebKit/qt.

        * Api/qwebelement.cpp: Add QWebElement to JSValue and JSValue to QWebElement
        conversion through intermediate QVariant.
        (QtWebElementRuntime::create):
        (QtWebElementRuntime::get):
        (convertJSValueToWebElementVariant):
        (convertWebElementVariantToJSValue):
        (QtWebElementRuntime::initialize): Register conversion functions for QWebElement.
        * Api/qwebelement.h:
        * Api/qwebelement_p.h: Added.
        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate): Initialize QWebElement conversion functions for
        the JS runtime.
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp: Add QtDRTNode to JSValue and JSValue to
        QtDRTNode conversion through intermediate QVariant.
        (QtDRTNodeRuntime::create):
        (QtDRTNodeRuntime::get):
        (convertJSValueToNodeVariant):
        (convertNodeVariantToJSValue):
        (QtDRTNodeRuntime::initialize):
        (DumpRenderTreeSupportQt::initialize): Register conversion functions for QtDRTNode.
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-11-17  Alexis Menard  <alexis.menard@openbossa.org>

        [Qt] The experimental plugin doesn't work after being renamed.

        Reviewed by Tor Arne Vestbø.

        It was renamed from private to experimental but the qmldir file
        was forgotten.

        * declarative/experimental/qmldir:

2011-11-17  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Layer violation: WebCore::dnsPrefetch uses QWebSettings::globalSettings()
        https://bugs.webkit.org/show_bug.cgi?id=72596

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply): Propagate the DNS prefetch setting to WebCore::Settings.

2011-11-17  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Layer violation: Image::loadPlatformResource uses QWebSettings::webGraphic
        https://bugs.webkit.org/show_bug.cgi?id=72594

        Reviewed by Kenneth Rohde Christiansen.

        Move resource pixmap cache into ImageQt.cpp.

        * Api/qwebsettings.cpp:
        (resourceNameForWebGraphic): Helper function to translate between public API enums and
        resource names.
        (QWebSettings::setWebGraphic): Call the new ImageQt::setPlatformResource setter.
        (QWebSettings::webGraphic): Call Image::loadPlatformResource to read from the cache
        in WebCore.

2011-11-17  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Move WebKit2 C++ APIs to private API and build QML extension plugin on top of that

        A new extension object has been added to QQuickWebView (the same approach should be used
        for other API classes that need experimental APIs). The QML extension mechanism is then
        built on top of the experimental object.

        https://bugs.webkit.org/show_bug.cgi?id=72522

        Reviewed by Simon Hausmann.

        * declarative/declarative.pro:
        * declarative/experimental/experimental.pri: Renamed from Source/WebKit/qt/declarative/private/private.pro.
        * declarative/experimental/plugin.cpp: Renamed from Source/WebKit/qt/declarative/private/plugin.cpp.
        (QQuickWebViewExperimentalExtension::QQuickWebViewExperimentalExtension):
        (QQuickWebViewExperimentalExtension::experimental):
        * declarative/experimental/qmldir: Renamed from Source/WebKit/qt/declarative/private/qmldir.
        * declarative/plugin.cpp:
        * declarative/public.pri: Copied from Source/WebKit/qt/declarative/declarative.pro.

2011-11-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r100448.
        http://trac.webkit.org/changeset/100448
        https://bugs.webkit.org/show_bug.cgi?id=72512

        It caused a regression breaking LayoutTests/http/tests/loading
        /text-content-type-with-binary-extension.html (Requested by
        jeez_ on #webkit).

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::canShowMIMEType):

2011-11-16  Jesus Sanchez-Palencia  <jesus.palencia@openbossa.org>

        [Qt] FrameLoaderClientQt::canShowMIMEType should always return true
        https://bugs.webkit.org/show_bug.cgi?id=72169

        Reviewed by Simon Hausmann.

        Currently FrameLoaderClientQt::canShowMIMEType is called after
        dispatchDecidePolicyForResponse. If decidePolicyForResponse returns
        PolicyUse and canShowMIMEType returns false, then we have a bug.
        Therefore, FrameLoaderClientQt::canShowMIMEType now will always
        return true, following the implemenation of WebKit2.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::canShowMIMEType):

2011-11-15  Huang Dongsung  <luxtella@company100.net>

        [TexMap][Qt] Start PageClientQ[Graphics]Widget::syncTimer only when the syncTimer
        is inactive.
        https://bugs.webkit.org/show_bug.cgi?id=70407

        Make sure we only activate the synchronization timer in
        PageClientQWidget/PageClientQGraphicsWidget if it's not already active,
        otherwise syncLayers may be called redundantly.

        Reviewed by Noam Rosenthal.

        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQWidget::markForSync):
        (WebCore::PageClientQWidget::syncLayers):
        (WebCore::PageClientQGraphicsWidget::syncLayers):
        (WebCore::PageClientQGraphicsWidget::markForSync):
        * WebCoreSupport/PageClientQt.h:
        (WebCore::PageClientQGraphicsWidget::PageClientQGraphicsWidget):

2011-11-15  Jochen Eisinger  <jochen@chromium.org>

        Rename ReferrerPolicy to clarify its meaning
        https://bugs.webkit.org/show_bug.cgi?id=72420

        Reviewed by Nate Chapin.

        * Api/qwebpage.cpp:
        (openNewWindow):
        (QWebPage::triggerAction):

2011-11-15  Anders Carlsson  <andersca@apple.com>

        HostWindow screenToWindow/windowToScreen should be screenToRootView/rootViewToScreen
        https://bugs.webkit.org/show_bug.cgi?id=72397

        Reviewed by Dan Bernstein.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::rootViewToScreen):
        (WebCore::ChromeClientQt::screenToRootView):
        * WebCoreSupport/ChromeClientQt.h:

2011-11-14  Anders Carlsson  <andersca@apple.com>

        HostWindow invalidation functions should use root view coordinates
        https://bugs.webkit.org/show_bug.cgi?id=72338

        Reviewed by Dan Bernstein.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::invalidateRootView):
        (WebCore::ChromeClientQt::invalidateContentsAndRootView):
        (WebCore::ChromeClientQt::invalidateContentsForSlowScroll):
        * WebCoreSupport/ChromeClientQt.h:

2011-11-11  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Remove the QStyle dependency in Qt's mobile theme
        https://bugs.webkit.org/show_bug.cgi?id=67773

        This refactoring splits up RenderThemeQt with two
        subclasses, a QStyle-backed one, and a Mobile version
        that uses the old mobile theme for now.

        QStyle availability is detected at compile time, and
        its use is determined by the QT_WEBKIT_USE_MOBILE_THEME
        environment variable.

        Reviewed by Simon Hausmann.

        * Api/qwebpage.cpp:
        (QWebPage::swallowContextMenuEvent):
        * tests/tests.pri:

2011-11-11  Luiz Agostini  <luiz.agostini@palm.com>

        [Qt] Removing unneeded #ifdef from PopupMenuQt.cpp
        https://bugs.webkit.org/show_bug.cgi?id=72193

        Reviewed by Noam Rosenthal.

        Part of PopupMenuQt.cpp code is guarded by #ifndef QT_NO_COMBOBOX although that
        code is not related to the class QComboBox.

        * WebCoreSupport/PopupMenuQt.cpp:
        (WebCore::PopupMenuQt::show):

2011-11-11  Bruno de Oliveira Abinader  <bruno.abinader@basyskom.com>

        [Qt] Skip tests when no network is present
        https://bugs.webkit.org/show_bug.cgi?id=72031

        Reviewed by Simon Hausmann.

        Some benchmark tests requires network connection (they fetch data from
        external URL's) and so they fail if no network is present. These tests
        should be skipped instead.

        * tests/benchmarks/loading/tst_loading.cpp:
        (tst_Loading::load): Skip test if no network is present.
        * tests/benchmarks/painting/tst_painting.cpp:
        (tst_Painting::paint): Skip test if no network is present.

2011-11-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r99964.
        http://trac.webkit.org/changeset/99964
        https://bugs.webkit.org/show_bug.cgi?id=72124

        Broke too many Qt tests (Requested by tronical_ on #webkit).

        * Api/qwebpage.cpp:
        (QWebPage::swallowContextMenuEvent):
        * tests/tests.pri:

2011-11-11  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Remove the QStyle dependency in Qt's mobile theme
        https://bugs.webkit.org/show_bug.cgi?id=67773

        This refactoring splits up RenderThemeQt with two
        subclasses, a QStyle-backed one, and a Mobile version
        that uses the old mobile theme for now.

        QStyle availability is detected at compile time, and
        its use is determined by the QT_WEBKIT_USE_MOBILE_THEME
        environment variable.

        Reviewed by Simon Hausmann.

        * Api/qwebpage.cpp:
        (QWebPage::swallowContextMenuEvent):
        * tests/tests.pri:

2011-11-11  Alexis Menard  <alexis.menard@openbossa.org>

        [Qt] Add a way to have experimental features in WebKit2
        https://bugs.webkit.org/show_bug.cgi?id=67707

        Reviewed by Kenneth Rohde Christiansen.

        This patch is adding a new module for accessing private
        method and property from the view. It requires an import
        QtWebKit.private in QML to be used.

        * declarative/private/plugin.cpp: Added.
        (WebKitQmlPluginPrivate::registerTypes):
        * declarative/private/private.pro: Added.
        * declarative/private/qmldir: Added.

2011-11-11  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt][WK2] Remove QWebNavigationController
        https://bugs.webkit.org/show_bug.cgi?id=72113

        Reviewed by Andreas Kling.

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes): Don't register QWebNavigationController with qml.

2011-11-03  Luiz Agostini  <luiz.agostini@palm.com>

        [Qt] Adding methods setGeometry and setFont to QWebSelectMethod class.
        https://bugs.webkit.org/show_bug.cgi?id=71530

        Reviewed by Simon Hausmann.

        Adding methods setGeometry and setFont so that users of platform plugin may show the
        popup menus in proper position and using proper font.

        * Api/qwebkitplatformplugin.h:
        * WebCoreSupport/PopupMenuQt.cpp:
        (WebCore::PopupMenuQt::show):
        * examples/platformplugin/WebPlugin.h:
        (WebPopup::setGeometry):
        (WebPopup::setFont):
        * examples/platformplugin/qwebkitplatformplugin.h:

2011-11-10  Alexis Menard  <alexis.menard@openbossa.org>

        [Qt] Merge QTouchWebView and QDesktopWebView into one class
        https://bugs.webkit.org/show_bug.cgi?id=71355

        Reviewed by Kenneth Rohde Christiansen.

        Register only QQuickWebView and QQuickWebPage in the plugin.

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):

2011-11-09  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Enable exports and constructor functions in static libs

        Reviewed by Tor Arne Vestbø.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate): Remove unnecessary manual Qt resource
        initialization.

2011-11-09  Simon Hausmann  <simon.hausmann@nokia.com>

        Unreviewed, rolling out r99701.
        http://trac.webkit.org/changeset/99701

        Breaks Qt mac build

        * Api/qwebpage.cpp:
        (initResources):
        (QWebPagePrivate::QWebPagePrivate):

2011-11-09  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Enable exports and constructor functions in static libs

        Reviewed by Tor Arne Vestbø.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate): Remove unnecessary manual Qt resource
        initialization.

2011-11-09  Deepak Sherveghar  <bpwv64@motorola.com>

        [Qt] 4 Layout test fail due to network error constant values clash with WebkitError enum values in FrameloaderclientQt
        https://bugs.webkit.org/show_bug.cgi?id=71554

        Reviewed by Simon Hausmann.

        We should check the error domain when checking the error code in shouldFallBack()

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::shouldFallBack): added error domain check

2011-11-08  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Replace use of QApplication with QGuiApplication
        https://bugs.webkit.org/show_bug.cgi?id=71794

        Reviewed by Andreas Kling.

        * WebCoreSupport/QtWebComboBox.cpp:
        (WebCore::QtWebComboBox::showPopupAtCursorPosition): Replace use of QApplication
        with QCoreApplication.

2011-11-07  Adam Barth  <abarth@webkit.org>

        Move static "policy" state from SecurityOrigin.cpp to SecurityPolicy.cpp
        https://bugs.webkit.org/show_bug.cgi?id=71755

        Reviewed by Eric Seidel.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::whiteListAccessFromOrigin):
        (DumpRenderTreeSupportQt::removeWhiteListAccessFromOrigin):
        (DumpRenderTreeSupportQt::resetOriginAccessWhiteLists):

2011-11-08  Luiz Agostini  <luiz.agostini@palm.com>

        [Qt] Removing qwebkitglobal.h inclusion from qwebkitplatformplugin.h
        https://bugs.webkit.org/show_bug.cgi?id=71759

        Reviewed by Simon Hausmann.

        qwebkitplatformplugin.h must not depend on qwebkitglobal.h.

        * Api/qwebkitplatformplugin.h:

        Updating the copy of qwebkitplatformplugin.h that is used by the example plugin. The previous
        one was very outdated.

        * examples/platformplugin/qwebkitplatformplugin.h:

2011-11-07  Adam Barth  <abarth@webkit.org>

        Move DomainRelaxationForbidden scheme registry to SchemeRegistry
        https://bugs.webkit.org/show_bug.cgi?id=71750

        Reviewed by Eric Seidel.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setDomainRelaxationForbiddenForURLScheme):

2011-11-07  Michael Saboff  <msaboff@apple.com>

        Towards 8 Bit Strings: Templatize JSC::Lexer class by character type
        https://bugs.webkit.org/show_bug.cgi?id=71331

        Changed Identifier() constructor to use JSGlobalData*.

        Reviewed by Darin Adler.

        * Api/qwebframe.cpp:
        (QWebFrame::addToJavaScriptWindowObject):

2011-11-07  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Fix failing inspector tests after build system changes
        https://bugs.webkit.org/show_bug.cgi?id=71677

        Reviewed by Tor Arne Vestbø.

        Ensure symbols from the qt resource system are referenced
        from outside the static webcore library. One way of doing that is
        to initialize the resources right away, as explained in the documentation
        of th Qt resource system.

        * Api/qwebpage.cpp:
        (initResources):
        (QWebPagePrivate::QWebPagePrivate):

2011-11-04  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Refactor and clean up the qmake build system

        The qmake build system has accumulated a bit of cruft and redundancy
        over time. There's also a fairly tight coupling between how to build
        the various targets, and _what_ to build, making it harder to add new
        rules or sources. This patch aims to elevate these issues somewhat.

        This is a short-list of the changes:

          * The rules for how to build targets are now mostly contained as
            prf-files in Tools/qmake/mkspecs/features. Using mkspecs also
            allows us to do pre- and post-processing of each project file,
            which helps to clean up the actual project files.

          * Derived sources are no longer generated as a separate make-step
            but is part of each target's project file as a subdir. Makefile
            rules are used to ensure that we run make on the derived sources
            before running qmake on the actual target makefile. This makes
            it easier to keep a proper dependency between derived sources
            and the target.

          * We use GNU make and the compiler to generate dependencies on
            UNIX-based systems running Qt 5. This allows us to lessen the
            need to run qmake, which should reduce compile time.

          * WebKit2 is now build by default if building with Qt 5. It can
            be disabled by passing --no-webkit2 to build-webkit.

        The result of these changes are hopefully a cleaner and easier
        build system to modify, and faster build times due to no longer
        running qmake on every single build. It's also a first step
        towards possibly generating the list of sources using another
        build system.

        https://bugs.webkit.org/show_bug.cgi?id=71222

        Reviewed by Simon Hausmann.

        * Api/DerivedSources.pro: Removed.
        * Api/headers.pri: Removed.
        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * QtWebKit.pro: Removed.
        * WebCoreSupport/FrameLoaderClientQt.h: Rename due to name clash with WK2 header
        * WebCoreSupport/PlatformStrategiesQt.cpp: Renamed from Source/WebKit/qt/WebCoreSupport/WebPlatformStrategies.cpp.
        (PlatformStrategiesQt::initialize):
        (PlatformStrategiesQt::PlatformStrategiesQt):
        (PlatformStrategiesQt::createCookiesStrategy):
        (PlatformStrategiesQt::createPluginStrategy):
        (PlatformStrategiesQt::createLocalizationStrategy):
        (PlatformStrategiesQt::createVisitedLinkStrategy):
        (PlatformStrategiesQt::notifyCookiesChanged):
        (PlatformStrategiesQt::refreshPlugins):
        (PlatformStrategiesQt::getPluginInfo):
        (PlatformStrategiesQt::inputElementAltText):
        (PlatformStrategiesQt::resetButtonDefaultLabel):
        (PlatformStrategiesQt::searchableIndexIntroduction):
        (PlatformStrategiesQt::submitButtonDefaultLabel):
        (PlatformStrategiesQt::fileButtonChooseFileLabel):
        (PlatformStrategiesQt::fileButtonChooseMultipleFilesLabel):
        (PlatformStrategiesQt::fileButtonNoFileSelectedLabel):
        (PlatformStrategiesQt::fileButtonNoFilesSelectedLabel):
        (PlatformStrategiesQt::defaultDetailsSummaryText):
        (PlatformStrategiesQt::contextMenuItemTagOpenLinkInNewWindow):
        (PlatformStrategiesQt::contextMenuItemTagDownloadLinkToDisk):
        (PlatformStrategiesQt::contextMenuItemTagCopyLinkToClipboard):
        (PlatformStrategiesQt::contextMenuItemTagOpenImageInNewWindow):
        (PlatformStrategiesQt::contextMenuItemTagDownloadImageToDisk):
        (PlatformStrategiesQt::contextMenuItemTagCopyImageToClipboard):
        (PlatformStrategiesQt::contextMenuItemTagCopyImageUrlToClipboard):
        (PlatformStrategiesQt::contextMenuItemTagOpenVideoInNewWindow):
        (PlatformStrategiesQt::contextMenuItemTagOpenAudioInNewWindow):
        (PlatformStrategiesQt::contextMenuItemTagCopyVideoLinkToClipboard):
        (PlatformStrategiesQt::contextMenuItemTagCopyAudioLinkToClipboard):
        (PlatformStrategiesQt::contextMenuItemTagToggleMediaControls):
        (PlatformStrategiesQt::contextMenuItemTagToggleMediaLoop):
        (PlatformStrategiesQt::contextMenuItemTagEnterVideoFullscreen):
        (PlatformStrategiesQt::contextMenuItemTagMediaPlay):
        (PlatformStrategiesQt::contextMenuItemTagMediaPause):
        (PlatformStrategiesQt::contextMenuItemTagMediaMute):
        (PlatformStrategiesQt::contextMenuItemTagOpenFrameInNewWindow):
        (PlatformStrategiesQt::contextMenuItemTagCopy):
        (PlatformStrategiesQt::contextMenuItemTagGoBack):
        (PlatformStrategiesQt::contextMenuItemTagGoForward):
        (PlatformStrategiesQt::contextMenuItemTagStop):
        (PlatformStrategiesQt::contextMenuItemTagReload):
        (PlatformStrategiesQt::contextMenuItemTagCut):
        (PlatformStrategiesQt::contextMenuItemTagPaste):
        (PlatformStrategiesQt::contextMenuItemTagSelectAll):
        (PlatformStrategiesQt::contextMenuItemTagNoGuessesFound):
        (PlatformStrategiesQt::contextMenuItemTagIgnoreSpelling):
        (PlatformStrategiesQt::contextMenuItemTagLearnSpelling):
        (PlatformStrategiesQt::contextMenuItemTagSearchWeb):
        (PlatformStrategiesQt::contextMenuItemTagLookUpInDictionary):
        (PlatformStrategiesQt::contextMenuItemTagOpenLink):
        (PlatformStrategiesQt::contextMenuItemTagIgnoreGrammar):
        (PlatformStrategiesQt::contextMenuItemTagSpellingMenu):
        (PlatformStrategiesQt::contextMenuItemTagShowSpellingPanel):
        (PlatformStrategiesQt::contextMenuItemTagCheckSpelling):
        (PlatformStrategiesQt::contextMenuItemTagCheckSpellingWhileTyping):
        (PlatformStrategiesQt::contextMenuItemTagCheckGrammarWithSpelling):
        (PlatformStrategiesQt::contextMenuItemTagFontMenu):
        (PlatformStrategiesQt::contextMenuItemTagBold):
        (PlatformStrategiesQt::contextMenuItemTagItalic):
        (PlatformStrategiesQt::contextMenuItemTagUnderline):
        (PlatformStrategiesQt::contextMenuItemTagOutline):
        (PlatformStrategiesQt::contextMenuItemTagWritingDirectionMenu):
        (PlatformStrategiesQt::contextMenuItemTagTextDirectionMenu):
        (PlatformStrategiesQt::contextMenuItemTagDefaultDirection):
        (PlatformStrategiesQt::contextMenuItemTagLeftToRight):
        (PlatformStrategiesQt::contextMenuItemTagRightToLeft):
        (PlatformStrategiesQt::contextMenuItemTagInspectElement):
        (PlatformStrategiesQt::searchMenuNoRecentSearchesText):
        (PlatformStrategiesQt::searchMenuRecentSearchesText):
        (PlatformStrategiesQt::searchMenuClearRecentSearchesText):
        (PlatformStrategiesQt::AXWebAreaText):
        (PlatformStrategiesQt::AXLinkText):
        (PlatformStrategiesQt::AXListMarkerText):
        (PlatformStrategiesQt::AXImageMapText):
        (PlatformStrategiesQt::AXHeadingText):
        (PlatformStrategiesQt::AXDefinitionListTermText):
        (PlatformStrategiesQt::AXDefinitionListDefinitionText):
        (PlatformStrategiesQt::AXButtonActionVerb):
        (PlatformStrategiesQt::AXRadioButtonActionVerb):
        (PlatformStrategiesQt::AXTextFieldActionVerb):
        (PlatformStrategiesQt::AXCheckedCheckBoxActionVerb):
        (PlatformStrategiesQt::AXUncheckedCheckBoxActionVerb):
        (PlatformStrategiesQt::AXMenuListActionVerb):
        (PlatformStrategiesQt::AXMenuListPopupActionVerb):
        (PlatformStrategiesQt::AXLinkActionVerb):
        (PlatformStrategiesQt::missingPluginText):
        (PlatformStrategiesQt::crashedPluginText):
        (PlatformStrategiesQt::multipleFileUploadText):
        (PlatformStrategiesQt::unknownFileSizeText):
        (PlatformStrategiesQt::imageTitle):
        (PlatformStrategiesQt::mediaElementLoadingStateText):
        (PlatformStrategiesQt::mediaElementLiveBroadcastStateText):
        (PlatformStrategiesQt::localizedMediaControlElementString):
        (PlatformStrategiesQt::localizedMediaControlElementHelpText):
        (PlatformStrategiesQt::localizedMediaTimeDescription):
        (PlatformStrategiesQt::validationMessageValueMissingText):
        (PlatformStrategiesQt::validationMessageTypeMismatchText):
        (PlatformStrategiesQt::validationMessagePatternMismatchText):
        (PlatformStrategiesQt::validationMessageTooLongText):
        (PlatformStrategiesQt::validationMessageRangeUnderflowText):
        (PlatformStrategiesQt::validationMessageRangeOverflowText):
        (PlatformStrategiesQt::validationMessageStepMismatchText):
        (PlatformStrategiesQt::isLinkVisited):
        (PlatformStrategiesQt::addVisitedLink):
        * WebCoreSupport/PlatformStrategiesQt.h: Renamed from Source/WebKit/qt/WebCoreSupport/WebPlatformStrategies.h.
        * declarative/declarative.pro:
        * docs/docs.pri:
        * docs/webkitsnippets/webelement/webelement.pro:
        * tests/MIMESniffing/MIMESniffing.pro:
        * tests/benchmarks/loading/loading.pro:
        * tests/benchmarks/painting/painting.pro:
        * tests/benchmarks/webgl/webgl.pro:
        * tests/hybridPixmap/hybridPixmap.pro:
        * tests/qdeclarativewebview/qdeclarativewebview.pro:
        * tests/qgraphicswebview/qgraphicswebview.pro:
        * tests/qwebelement/qwebelement.pro:
        * tests/qwebframe/qwebframe.pro:
        * tests/qwebhistory/qwebhistory.pro:
        * tests/qwebhistoryinterface/qwebhistoryinterface.pro:
        * tests/qwebinspector/qwebinspector.pro:
        * tests/qwebpage/qwebpage.pro:
        * tests/qwebplugindatabase/qwebplugindatabase.pro:
        * tests/qwebview/qwebview.pro:
        * tests/tests.pri:
        * tests/tests.pro: Removed.

2011-11-03  Rafael Brandao  <rafael.lobo@openbossa.org>

        Fix tst_QDeclarativeWebView::basicProperties() and historyNav() autotests
        https://bugs.webkit.org/show_bug.cgi?id=61042

        Reviewed by Simon Hausmann.
        
        At some points we didn't have any guarantee that a favicon has been loaded, so now
        it stops to wait for the IconChanged signal. It also had some file paths in wrong format,
        making some files to not be resolved and comparing meaningless bitmaps.

        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        (tst_QDeclarativeWebView::initTestCase):
        (tst_QDeclarativeWebView::basicProperties):
        (tst_QDeclarativeWebView::historyNav):

2011-11-03  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Remove Maemo specific code paths
        https://bugs.webkit.org/show_bug.cgi?id=71476

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qwebpage.cpp:
        (QWebPage::userAgentForUrl):
        * Api/qwebview.cpp:
        (QWebView::QWebView):
        * QtWebKit.pro:
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::createSelectPopup):
        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::setInputMethodState):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::createPlugin):
        * WebCoreSupport/QtMaemoWebPopup.cpp: Removed.
        * WebCoreSupport/QtMaemoWebPopup.h: Removed.
        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView::focusInputTypes):
        * tests/qwebframe/tst_qwebframe.cpp:
        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::focusInputTypes):

2011-11-03  Jesus Sanchez-Palencia  <jesus@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] QtWebKit should have documentation clarifying its mobile features usage
        https://bugs.webkit.org/show_bug.cgi?id=41465

        Add "QtWebKit Goes Mobile" documentation

        * docs/qtwebkit-goes-mobile.qdoc: Added.
        * docs/qtwebkit.qdoc: Linked to qtwebkit-goes-mobile documentation
        * docs/webkitsnippets/qtwebkit_goes_mobile_snippets.cpp: Added.

2011-11-03  Fady Samuel  <fsamuel@chromium.org>

        Removing line in computeViewportAttributes that enforces a minimum scale factor to never allow zooming out more than viewport
        https://bugs.webkit.org/show_bug.cgi?id=70609

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qwebpage.cpp:
        (QWebPage::viewportAttributesForSize):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::viewportAsText):

2011-11-03  Jesus Sanchez-Palencia  <jesus.palencia@openbossa.org>

        [Qt][WK2] Download support and API in UIProcess
        https://bugs.webkit.org/show_bug.cgi?id=68962

        Reviewed by Simon Hausmann.

        Registering new qml type QWebDownloadItem.

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):

2011-11-02  Jon Lee  <jonlee@apple.com>

        Expand DragController to provide more information about the dragging session
        https://bugs.webkit.org/show_bug.cgi?id=71324
        <rdar://problem/10379175>

        Reviewed by Darin Adler.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::dragEnterEvent): Minor refactoring because operation is stored in
        new DragSession struct.
        (QWebPagePrivate::dragMoveEvent): Ditto.

2011-11-02  Tom Sepez  <tsepez@chromium.org>

        XSSAuditor is silent
        https://bugs.webkit.org/show_bug.cgi?id=70973

        Reviewed by Adam Barth.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::didDetectXSS):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-11-02  Jon Lee  <jonlee@apple.com>

        <input=file multiple> default text uses singular instead of plural
        https://bugs.webkit.org/show_bug.cgi?id=71319
        <rdar://problem/10379021>

        Reviewed by Darin Adler.

        * WebCoreSupport/WebPlatformStrategies.cpp:
        (WebPlatformStrategies::fileButtonNoFilesSelectedLabel):
        * WebCoreSupport/WebPlatformStrategies.h:

2011-11-02  Deepak Sherveghar  <bpwv64@motorola.com>

        [Qt] Failing test media/video-document-types.html
        https://bugs.webkit.org/show_bug.cgi?id=62108

        Reviewed by Simon Hausmann.

        Match what Mac has been doing since r36001: cancel the main load,
        and handle failures caused by 'will be handled by plugin' errors.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::committedLoad):
        (WebCore::FrameLoaderClientQt::shouldFallBack):

2011-11-01  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt][WK2] Fix build of WebKitTestRunner with ELF symbol visibility
        https://bugs.webkit.org/show_bug.cgi?id=71299

        Reviewed by Andreas Kling.

        Export an overload of QtDRT::injectInternalsObjects that is used by
        the WK2 injected bundle.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::injectInternalsObject):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-11-01  Alexis Menard  <alexis.menard@openbossa.org>

        Unreviewed Qt documentation fix.

        This signal is Qt 4.8 material.

        * Api/qwebpage.cpp:

2011-10-31  Mark Hahnenberg  <mhahnenberg@apple.com>

        De-virtualize JSObject::defineGetter
        https://bugs.webkit.org/show_bug.cgi?id=71134

        Reviewed by Darin Adler.

        Added defineGetter to the MethodTable.  Replaced all virtual versions of defineGetter
        with static versions.  Replaced all call sites with lookups in the MethodTable.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::addQtSenderToGlobalObject):

2011-10-28  Jochen Eisinger  <jochen@chromium.org>

        Rename a number of methods mentioning JavaScript to just Script instead
        https://bugs.webkit.org/show_bug.cgi?id=71105

        Reviewed by Adam Barth.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):

2011-10-28  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Adapt to QSG* to QQuick* API change in qtdeclarative
        https://bugs.webkit.org/show_bug.cgi?id=70494

        Reviewed by Kenneth Christiansen.

        Use QQuick* instead of QSG* as well as QStandardPaths
        instead of QDesktopLocation.

        * Api/qwebsettings.cpp:
        (QWebSettings::enablePersistentStorage):

2011-10-27  Helder Correia  <helder.correia@palm.com>

        [Qt] Failure to build when QT_NO_MENU defined
        https://bugs.webkit.org/show_bug.cgi?id=70970

        Reviewed by Andreas Kling.

        iterateContextMenu() must be wrapped around #ifndef QT_NO_MENU.

        Build fix, no new tests.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:

2011-10-26  Zalan Bujtas  <zbujtas@gmail.com>

        Name viewport change event consistently.
        https://bugs.webkit.org/show_bug.cgi?id=70901

        Reviewed by Kenneth Rohde Christiansen.

        Use ViewportPropertiesDidChange term consistently throughout WebKit.
 
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::dispatchViewportPropertiesDidChange):
        * WebCoreSupport/ChromeClientQt.h:

2011-10-25  Mark Hahnenberg  <mhahnenberg@apple.com>

        Remove putVirtual
        https://bugs.webkit.org/show_bug.cgi?id=70740

        Reviewed by Geoffrey Garen.

        Removed all declarations and definitions of putVirtual.
        Also replaced all call sites to putVirtual with a 
        corresponding lookup in the MethodTable.

        * Api/qwebframe.cpp:
        (QWebFrame::addToJavaScriptWindowObject):

2011-10-24  Deepak Sherveghar  <bpwv64@motorola.com>

        [Qt] fast/events/media-focus-in-standalone-media-document.html fails
        https://bugs.webkit.org/show_bug.cgi?id=70110

        Reviewed by Simon Hausmann.

        We should check for supported media mime types as well in the MIMETypeRegistry.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::canShowMIMEType): check for supported media mime type.

2011-10-21  Luiz Agostini  <luiz.agostini@palm.com>

        [Qt] Remote debugging needs QWebInspector to work
        https://bugs.webkit.org/show_bug.cgi?id=70651

        Reviewed by Kenneth Rohde Christiansen.

        Removing QWebInspector dependency from remote inspector.

        * Api/qwebinspector.cpp:
        * Api/qwebinspector_p.h:
        (QWebInspectorPrivate::QWebInspectorPrivate):
        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::InspectorClientQt):
        (WebCore::InspectorClientQt::openInspectorFrontend):
        (WebCore::InspectorClientQt::attachAndReplaceRemoteFrontend):
        (WebCore::InspectorClientQt::detachRemoteFrontend):
        (WebCore::InspectorClientQt::sendMessageToFrontend):
        * WebCoreSupport/InspectorClientQt.h:
        * WebCoreSupport/InspectorServerQt.cpp:
        (WebCore::InspectorServerRequestHandlerQt::tcpReadyRead):
        * WebCoreSupport/InspectorServerQt.h:

2011-10-21  Luiz Agostini  <luiz.agostini@palm.com>

        [Qt] Wrong type conversion in InspectorServerQt.cpp
        https://bugs.webkit.org/show_bug.cgi?id=70639

        Reviewed by Noam Rosenthal.

        Wrong type conversion causes WebSocket handshake failures for the remote inspector.

        * WebCoreSupport/InspectorServerQt.cpp:
        (WebCore::parseWebSocketChallengeNumber):

2011-10-21  Zeno Albisser  <zeno.albisser@nokia.com>

        [Qt] WebKit build does not respect QMAKE_MAC_SDK variable.
        https://bugs.webkit.org/show_bug.cgi?id=70596

        Instead of only relying on DARWIN_MAJOR_VERSION we also
        check QMAKE_MAC_SDK. In case QMAKE_MAC_SDK is not defined
        we are still falling back to DARWIN_MAJOR_VERSION.

        Patch by Andy Shaw <andy.shaw@digia.com>

        Reviewed by Noam Rosenthal.

        * QtWebKit.pro:

2011-10-21  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt][WK2] Typo fix.

        * tests/util.h:

2011-10-21  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt][WK2] Buildfix for newer Qt5. Remove duplicated defines.

        Reviewed by Simon Hausmann.

        * tests/util.h:

2011-10-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r98085.
        http://trac.webkit.org/changeset/98085
        https://bugs.webkit.org/show_bug.cgi?id=70589

        It broke the build (Requested by Ossy on #webkit).

        * tests/util.h:

2011-10-21  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt][WK2] Unreviewed buildfix for newer Qt5. Remove duplicated defines.

        * tests/util.h:
        (waitForSignal):

2011-10-20  Carol Szabo  <carol@webkit.org>

        Tiled Backing Store does not regenerate tiles when it should
        https://bugs.webkit.org/show_bug.cgi?id=57798

        Reviewed by Darin Adler.

        Provided test for this bug. Changed the name of the resource I added
        for a previous test so that the name is descriptive such that it can
        be shared across several tests.

        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView::bug57798):
        (tst_QGraphicsWebView::bug56929):
        * tests/qgraphicswebview/tst_qgraphicswebview.qrc:

2011-10-18  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Merge QML plugin for WebKit2 with the original WebKit1 plugin

        We don't need a separate plugin, as we no longer expose the WK2
        APIs under QtWebKit.experimental, but now use QtWebKit. The version
        was also changed to 3.0 instead of 5.0, as the original plugin was
        versioned 1.0, and bumping to 3.0 fits the scheme used by QtWebKit releases.

        Reviewed by Andreas Kling.

        * declarative/declarative.pro:
        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):

2011-10-15  Adam Barth  <abarth@webkit.org>

        Rename ENABLE(TILED_BACKING_STORE) to USE(TILED_BACKING_STORE)
        https://bugs.webkit.org/show_bug.cgi?id=70194

        Reviewed by Daniel Bates.

        * Api/qgraphicswebview.cpp:
        (QGraphicsWebViewPrivate::_q_scaleChanged):
        (QGraphicsWebView::QGraphicsWebView):
        (QGraphicsWebView::paint):
        (QGraphicsWebView::isTiledBackingStoreFrozen):
        (QGraphicsWebView::setTiledBackingStoreFrozen):
        * Api/qwebframe.cpp:
        * Api/qwebframe_p.h:
        * Api/qwebpage.cpp:
        (QWebPagePrivate::dynamicPropertyChangeEvent):
        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::invalidateWindow):
        * WebCoreSupport/ChromeClientQt.h:
        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQGraphicsWidget::createOrDeleteOverlay):
        * WebCoreSupport/PageClientQt.h:
        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:

2011-10-15  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        [Qt] [Symbian] Remove support for the Symbian platform for the QtWebKit port
        https://bugs.webkit.org/show_bug.cgi?id=69920

        Reviewed by Kenneth Rohde Christiansen.

        * Api/qgraphicswebview.cpp:
        (QGraphicsWebView::setPage):
        * Api/qwebpage.cpp:
        (QWebPage::userAgentForUrl):
        * Api/qwebview.cpp:
        (QWebView::QWebView):
        * QtWebKit.pro:
        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::setInputMethodState):
        * WebCoreSupport/QtFallbackWebPopup.cpp:
        (WebCore::QtFallbackWebPopup::populate):
        * declarative/declarative.pro:
        * declarative/qdeclarativewebview.cpp:
        (QDeclarativeWebView::setPage):
        * symbian: Removed.
        * symbian/backup_registration.xml: Removed.
        * symbian/bwins: Removed.
        * symbian/bwins/QtWebKitu.def: Removed.
        * symbian/eabi: Removed.
        * symbian/eabi/QtWebKitu.def: Removed.
        * symbian/platformplugin: Removed.
        * symbian/platformplugin/HTML5VideoPlugin.cpp: Removed.
        * symbian/platformplugin/HTML5VideoPlugin.h: Removed.
        * symbian/platformplugin/HTML5VideoWidget.cpp: Removed.
        * symbian/platformplugin/HTML5VideoWidget.h: Removed.
        * symbian/platformplugin/OverlayWidget.cpp: Removed.
        * symbian/platformplugin/OverlayWidget.h: Removed.
        * symbian/platformplugin/PlayerButton.cpp: Removed.
        * symbian/platformplugin/PlayerButton.h: Removed.
        * symbian/platformplugin/PlayerLabel.cpp: Removed.
        * symbian/platformplugin/PlayerLabel.h: Removed.
        * symbian/platformplugin/WebPlugin.cpp: Removed.
        * symbian/platformplugin/WebPlugin.h: Removed.
        * symbian/platformplugin/images: Removed.
        * symbian/platformplugin/images/button_cannotplay.png: Removed.
        * symbian/platformplugin/images/button_close.png: Removed.
        * symbian/platformplugin/images/button_pause.png: Removed.
        * symbian/platformplugin/images/button_play.png: Removed.
        * symbian/platformplugin/images/button_sound_off.png: Removed.
        * symbian/platformplugin/images/button_sound_on.png: Removed.
        * symbian/platformplugin/images/loading_buffering_1.png: Removed.
        * symbian/platformplugin/images/loading_buffering_2.png: Removed.
        * symbian/platformplugin/images/loading_buffering_3.png: Removed.
        * symbian/platformplugin/images/loading_buffering_4.png: Removed.
        * symbian/platformplugin/platformplugin.pro: Removed.
        * symbian/platformplugin/platformplugin.qrc: Removed.
        * symbian/platformplugin/qss: Removed.
        * symbian/platformplugin/qss/OverlayWidget.qss: Removed.
        * symbian/platformplugin/qwebkitplatformplugin.h: Removed.
        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView::focusInputTypes):
        * tests/qwebframe/qwebframe.pro:
        * tests/qwebframe/tst_qwebframe.cpp:
        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::focusInputTypes):
        * tests/tests.pri:

2011-10-14  Mark Hahnenberg  <mhahnenberg@apple.com>

        Rename virtual put to putVirtual
        https://bugs.webkit.org/show_bug.cgi?id=69851

        Reviewed by Darin Adler.

        Renamed virtual versions of put to putVirtual in prepration for 
        adding the static put to the MethodTable in ClassInfo since the 
        compiler gets mad if the virtual and static versions have the same 
        name.

        * Api/qwebframe.cpp:
        (QWebFrame::addToJavaScriptWindowObject):

2011-10-12  Ryosuke Niwa  <rniwa@webkit.org>

        Make the interface of locationAndLengthFromRange and rangeFromLocationAndLength consistent
        https://bugs.webkit.org/show_bug.cgi?id=69964

        Reviewed by Enrica Casucci.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::firstRectForCharacterRange):

2011-10-13  Adenilson Cavalcanti  <adenilson.silva@openbossa.org>

        [Qt] GeolocationClient cleanups
        https://bugs.webkit.org/show_bug.cgi?id=69737

        Reviewed by Kenneth Rohde Christiansen.

        Qt5 has a location module, so no need to use an external
        library like Qt Mobility. This patch will allow the GeolocationClientQt
        to compile with both Qt5 and Qt4.

        * QtWebKit.pro:
        * WebCoreSupport/GeolocationClientQt.cpp:
        (WebCore::GeolocationClientQt::positionUpdated):
        * WebCoreSupport/GeolocationClientQt.h:

2011-10-11  Simon Fraser  <simon.fraser@apple.com>

        Make custom scrollbar theme for use in DRT, to reduce pixel diffs between platforms
        https://bugs.webkit.org/show_bug.cgi?id=68134

        Reviewed by Darin Adler.

        Use ScrollbarThemeMock when the setting to use mock scrollbars is enabled.
        
        Make ScrollbarTheme::nativeTheme() private, and add a new static theme() method
        that reads the setting, and returns the mock theme if set. All callers now use
        theme() rther than nativeTheme(). Add the new ScrollbarTheme.cpp file to the build.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::windowResizerRect):

2011-10-11  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Remove all references to QTDIR_build and standalone_package

        Qt is now modularized, which means we no longer import WebKit into
        the Qt source tree. Instead we use git submodules, and building
        QtWebKit as "part of Qt" is really building QtWebKit as from trunk.

        To decrease the number of buildsystem configurations we also remove
        the standalone_package code-path used when we were providing tarballs
        with the derived sources pre-generated.

        Reviewed by Simon Hausmann.

        * Api/DerivedSources.pro:
        * QtWebKit.pro:
        * declarative/declarative.pro:
        * docs/webkitsnippets/webelement/webelement.pro:
        * tests/tests.pri:

2011-10-07  Chang Shu  <cshu@webkit.org>

        Remove compile time flag ENABLE_PASSWORD_ECHO
        https://bugs.webkit.org/show_bug.cgi?id=69647

        As we have runtime flag in the page/Settings, we should remove this redundant compile time flag.

        Reviewed by Andreas Kling.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):

2011-10-06  Fady Samuel  <fsamuel@chromium.org>

        Code clean-up: Make RenderObject::absoluteBoundingBoxRect and associated methods const and make its parameter useTransforms no longer default to false
        https://bugs.webkit.org/show_bug.cgi?id=69009

        Reviewed by Simon Fraser.

        * Api/qwebframe.cpp:
        (QWebHitTestResultPrivate::QWebHitTestResultPrivate):

2011-10-06  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt][Wk2] Fix build with Qt 5 when QtScript is built as standalone module
        https://bugs.webkit.org/show_bug.cgi?id=69520

        Reviewed by Csaba Osztrogonác.

        * QtWebKit.pro: Convenience, use qt5 scope.
        * declarative/declarative.pro: Ditto.
        * tests/tests.pri: Ditto.

2011-10-03  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Build fix: Qt::escape is deprecated in Qt5
        https://bugs.webkit.org/show_bug.cgi?id=69162

        Use QString::toHtmlEscaped in the Qt5 case.

        Reviewed by Andreas.

        * Api/qwebpage.cpp:
        (QWebPage::javaScriptAlert):
        (QWebPage::javaScriptConfirm):
        (QWebPage::javaScriptPrompt):
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::setToolTip):

2011-10-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r96421.
        http://trac.webkit.org/changeset/96421
        https://bugs.webkit.org/show_bug.cgi?id=69206

        It broke Qt-WK2 build (Requested by ossy on #webkit).

        * Api/qwebpage.cpp:
        (QWebPage::javaScriptAlert):
        (QWebPage::javaScriptConfirm):
        (QWebPage::javaScriptPrompt):
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::setToolTip):

2011-09-30  Pierre Rossi  <pierre.rossi@gmail.com>

        [Qt] Build fix: Qt::escape is deprecated in Qt5
        https://bugs.webkit.org/show_bug.cgi?id=69162

        Use QString::toHtmlEscaped in the Qt5 case.

        Reviewed by Andreas Kling.

        * Api/qwebpage.cpp:
        (QWebPage::javaScriptAlert):
        (QWebPage::javaScriptConfirm):
        (QWebPage::javaScriptPrompt):
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::setToolTip):

2011-09-23  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Fix build against Qt5 after refactor of widgets out of QtGUi

        QWidget and friends now live in the QtWidgets library. We update
        includes in implementation files and private headers to us the
        non-module-prefixed path, and leave the lookup for the include
        path. For public headers we have to ifdef the includes as the
        user might now have the modules we need in his QT config.

        Finally, QSGCanvas is no longer a QWidget but a QWindow, so we
        have to update our code and use windowHandle() for setting the
        parent relationships.

        https://bugs.webkit.org/show_bug.cgi?id=68687

        Reviewed by Andreas Kling.

        * Api/qgraphicswebview.cpp:
        * Api/qgraphicswebview.h:
        * Api/qwebframe.h:
        * Api/qwebhistory.h:
        * Api/qwebpage.h:
        * Api/qwebsettings.h:
        * Api/qwebview.h:
        * QtWebKit.pro:
        * WebCoreSupport/PageClientQt.h:
        * WebCoreSupport/QtWebComboBox.cpp:
        * WebCoreSupport/QtWebComboBox.h:
        * declarative/qdeclarativewebview.cpp:
        * declarative/qdeclarativewebview_p.h:
        * docs/webkitsnippets/webpage/main.cpp:
        * examples/platformplugin/WebNotificationPresenter.h:

2011-09-27  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r96108, r96111, r96113, and r96116.
        http://trac.webkit.org/changeset/96108
        http://trac.webkit.org/changeset/96111
        http://trac.webkit.org/changeset/96113
        http://trac.webkit.org/changeset/96116
        https://bugs.webkit.org/show_bug.cgi?id=68913

        Wait for working Qt5 (Requested by ossy on #webkit).

        * Api/qgraphicswebview.cpp:
        * Api/qgraphicswebview.h:
        * Api/qwebframe.h:
        * Api/qwebhistory.h:
        * Api/qwebpage.h:
        * Api/qwebsettings.h:
        * Api/qwebview.h:
        * QtWebKit.pro:
        * WebCoreSupport/PageClientQt.h:
        * WebCoreSupport/QtWebComboBox.cpp:
        * WebCoreSupport/QtWebComboBox.h:
        * declarative/declarative.pro:
        * declarative/qdeclarativewebview.cpp:
        * declarative/qdeclarativewebview_p.h:
        * docs/webkitsnippets/webpage/main.cpp:
        * examples/platformplugin/WebNotificationPresenter.h:
        * tests/tests.pri:

2011-09-27  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt][WK2] Buildfix after r96108.

        Rubber-stamped by Andreas Kling.

        * tests/tests.pri:

2011-09-27  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Fix build of declarative plugin against Qt5

        Reviewed by Andreas Kling.

        * declarative/declarative.pro:

2011-09-23  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Fix build against Qt5 after refactor of widgets out of QtGUi

        QWidget and friends now live in the QtWidgets library. We update
        includes in implementation files and private headers to us the
        non-module-prefixed path, and leave the lookup for the include
        path. For public headers we have to ifdef the includes as the
        user might now have the modules we need in his QT config.

        Finally, QSGCanvas is no longer a QWidget but a QWindow, so we
        have to update our code and use windowHandle() for setting the
        parent relationships.

        https://bugs.webkit.org/show_bug.cgi?id=68687

        Reviewed by Andreas Kling.

        * Api/qgraphicswebview.cpp:
        * Api/qgraphicswebview.h:
        * Api/qwebframe.h:
        * Api/qwebhistory.h:
        * Api/qwebpage.h:
        * Api/qwebsettings.h:
        * Api/qwebview.h:
        * QtWebKit.pro:
        * WebCoreSupport/PageClientQt.h:
        * WebCoreSupport/QtWebComboBox.cpp:
        * WebCoreSupport/QtWebComboBox.h:
        * declarative/qdeclarativewebview.cpp:
        * declarative/qdeclarativewebview_p.h:
        * docs/webkitsnippets/webpage/main.cpp:
        * examples/platformplugin/WebNotificationPresenter.h:

2011-09-24  Adam Barth  <abarth@webkit.org>

        Always enable ENABLE(OFFLINE_WEB_APPLICATIONS)
        https://bugs.webkit.org/show_bug.cgi?id=68767

        Reviewed by Eric Seidel.

        * Api/qwebsecurityorigin.cpp:
        (QWebSecurityOrigin::setApplicationCacheQuota):
        * Api/qwebsettings.cpp:
        (QWebSettings::setOfflineWebApplicationCachePath):
        (QWebSettings::offlineWebApplicationCachePath):
        (QWebSettings::setOfflineWebApplicationCacheQuota):
        (QWebSettings::offlineWebApplicationCacheQuota):
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::reachedApplicationCacheOriginQuota):
        * WebCoreSupport/ChromeClientQt.h:
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::clearAllApplicationCaches):

2011-09-21  Andras Becsi  <andras.becsi@nokia.com>

        [Qt] Remove Qt specific code from css/SelectorChecker.cpp
        https://bugs.webkit.org/show_bug.cgi?id=67702

        Reviewed by Csaba Osztrogonác.

        * WebCoreSupport/WebPlatformStrategies.cpp: Check the Qt global history here, instead of a platform independent file.
        (WebPlatformStrategies::isLinkVisited):
        * WebCoreSupport/WebPlatformStrategies.h:

2011-09-20  Jarred Nicholls  <jarred@sencha.com>

        [Qt] Permit qrc resources to load in QWebSettings::setUserStyleSheetUrl()
        https://bugs.webkit.org/show_bug.cgi?id=51159
        
        Permit any URL with a local scheme to set a user style sheet. Allow qrc
        resource URLs as arguments to QWebSettings::setUserStyleSheetUrl().
        
        New test case makes sure a qrc URL will properly load a user stylesheet.

        Reviewed by Kenneth Rohde Christiansen.
        
        (tst_QWebPage::userStyleSheetFromQrcUrl):
        * tests/qwebpage/tst_qwebpage.qrc:

2011-09-20  Adenilson Cavalcanti  <adenilson.silva@openbossa.org>

        [Qt] resizeToContent seems to trigger infinite resize on some pages
        https://bugs.webkit.org/show_bug.cgi?id=43852

        Reviewed by Kenneth Rohde Christiansen.

        Test by Luiz Agostini.

        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (ResizeSpy::receiveResize):
        (ResizeSpy::size):
        (tst_QGraphicsWebView::windowResizeEvent):

2011-09-17  Mihai Parparita  <mihaip@chromium.org>

        FrameLoaderClient BackForwardList-related methods are unsued
        https://bugs.webkit.org/show_bug.cgi?id=68293

        Reviewed by Darin Adler.

        Remove FrameLoaderClient methods that were added by r51629, since only        
        the old (since-deleted) Android port needed them.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-09-15  Adam Barth  <abarth@webkit.org>

        Rename ENABLE(DATABASE) to ENABLE(SQL_DATABASE)
        https://bugs.webkit.org/show_bug.cgi?id=68205

        Reviewed by Eric Seidel.

        * Api/qwebdatabase.cpp:
        (QWebDatabase::displayName):
        (QWebDatabase::expectedSize):
        (QWebDatabase::size):
        (QWebDatabase::fileName):
        (QWebDatabase::removeDatabase):
        (QWebDatabase::removeAllDatabases):
        * Api/qwebsecurityorigin.cpp:
        (QWebSecurityOrigin::databaseUsage):
        (QWebSecurityOrigin::databaseQuota):
        (QWebSecurityOrigin::setDatabaseQuota):
        (QWebSecurityOrigin::allOrigins):
        (QWebSecurityOrigin::databases):
        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):
        (QWebSettings::setOfflineStoragePath):
        (QWebSettings::offlineStoragePath):
        * WebCoreSupport/ChromeClientQt.cpp:
        * WebCoreSupport/ChromeClientQt.h:

2011-09-13  Zeno Albisser  <zeno.albisser@nokia.com>

        [Qt] Fix state of stop/reload actions in QWebPage
        https://bugs.webkit.org/show_bug.cgi?id=65977

        FrameLoader does ask its DocumentLoader to stop loading subresources before
        setting the state to FrameStateCommittedPage. But it does
        not check if the the DocumentLoader actually stopped loading before
        it changes the state.
        Therefore a subresourceLoader can still be active, when we receive the
        call to dispatchDidFinishLoad(). This leads to an inconsistent behavior
        of the stop/reload actions in QWebPage.
        This changeset fixes the inconsistent state by updating the action states
        also when frameLoadCompleted() is called.

        Reviewed by Chang Shu.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::frameLoadCompleted):

2011-09-12  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Fix "Unmatched parentheses are deprecated." warnings
        https://bugs.webkit.org/show_bug.cgi?id=67775

        Reviewed by Zoltan Herczeg.

        Modify function declarations to single line to make qmake happier.

        * Api/qwebframe.h:
        * Api/qwebpluginfactory.h:
        * Api/qwebview.h:

2011-09-10  Jarred Nicholls  <jarred@sencha.com>

        [Qt] QWebSettings::setUserStyleSheetUrl() does not work with windows paths that contain drive letters
        https://bugs.webkit.org/show_bug.cgi?id=34884
        
        KURL::path() alone does not handle removing the leading slash from a windows file path.
        Using QUrl::toLocalFile() will turn file:///C:/path into C:/path appropriately.
        
        New test case that ensures a user stylesheet from the file system will load correctly
        on all platforms.

        Reviewed by Andreas Kling.

        * tests/qwebpage/resources/user.css: Added.
        (p):
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::userStyleSheetFromFile):

2011-09-09  Fady Samuel  <fsamuel@chromium.org>

        Move pageScaleFactor code from Frame.{h|cpp} to Page.{h|cpp}
        https://bugs.webkit.org/show_bug.cgi?id=67250

        Reviewed by Simon Fraser.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::scalePageBy):

2011-09-09  Zeno Albisser  <zeno.albisser@nokia.com>

        [Qt] QWebElement::encloseWith doesn't work at all
        https://bugs.webkit.org/show_bug.cgi?id=62464

        Enclosing an element means wrapping something around an element,
        not inserting something into an element. Therefore we need to check
        if the parent of the element allows insertion rather than checking
        the element itself.

        Reviewed by Andreas Kling.

        * Api/qwebelement.cpp:
        (QWebElement::prependOutside):
        (QWebElement::appendOutside):
        (QWebElement::encloseWith):
        * tests/qwebelement/tst_qwebelement.cpp:
        (tst_QWebElement::appendAndPrepend):
        (tst_QWebElement::encloseWith):

2011-09-08  Sam Weinig  <sam@webkit.org>

        Remove the Completion object from JSC, I have never liked it
        https://bugs.webkit.org/show_bug.cgi?id=67755

        Reviewed by Gavin Barraclough.

        * Api/qwebelement.cpp:
        (QWebElement::evaluateJavaScript):

2011-09-05  Jocelyn Turcotte  <jocelyn.turcotte@nokia.com>

        [Qt][WK2] Make TiledDrawingArea request tiles only in the direction the viewport is panned to.
        https://bugs.webkit.org/show_bug.cgi?id=67606

        TiledBackingStore previously used different values for horizontal and vertial multiplication
        to calculate the cover area. 
        This patch replaces this mechanism, used to give a bigger panning range to vertical panning,
        with the possibility to use the motion vector of the viewport to request tiles ahead instead.
        This allows economies on rendering resources as tiles won't be rendered beside the trajectory
        of the viewport.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::dynamicPropertyChangeEvent):

2011-09-06  Csaba Osztrogonác  <ossy@webkit.org>

        Unreviewed buildfix after r94620.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::createFrame):

2011-09-06  Alexis Menard  <alexis.menard@openbossa.org>

        [Qt] Move away from QPointer as it is slow and it has a replacement QWeakPointer.
        https://bugs.webkit.org/show_bug.cgi?id=67673

        Reviewed by Ariya Hidayat.

        Move away from QPointer as Qt provides a better and faster solution : QWeakPointer.

        * Api/qwebframe.cpp:
        (QWebHitTestResult::linkTargetFrame):
        (QWebHitTestResult::frame):
        * Api/qwebframe_p.h:
        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        (QWebPagePrivate::~QWebPagePrivate):
        (QWebPagePrivate::acceptNavigationRequest):
        (QWebPagePrivate::createMainFrame):
        (QWebPagePrivate::updateAction):
        (QWebPagePrivate::mouseMoveEvent):
        (QWebPagePrivate::mousePressEvent):
        (QWebPagePrivate::mouseDoubleClickEvent):
        (QWebPagePrivate::mouseTripleClickEvent):
        (QWebPagePrivate::mouseReleaseEvent):
        (QWebPage::createStandardContextMenu):
        (QWebPagePrivate::wheelEvent):
        (QWebPagePrivate::focusInEvent):
        (QWebPage::setPalette):
        (QWebPagePrivate::touchEvent):
        (QWebPage::~QWebPage):
        (QWebPage::mainFrame):
        (QWebPage::viewportSize):
        (QWebPage::preferredContentsSize):
        (QWebPage::setContentEditable):
        (QWebPage::updatePositionDependentActions):
        * Api/qwebpage_p.h:
        * Api/qwebview.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::contextMenu):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::createFrame):
        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::ownership):
        * tests/qwebpage/tst_qwebpage.cpp:
        (PluginCounterPage::PluginCounterPage):
        (PluginTracerPage::createPlugin):
        (tst_QWebPage::createViewlessPlugin):
        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::reusePage):

2011-09-06  Alexis Menard  <alexis.menard@openbossa.org>

        [Qt] Fix API test failure after r92823 and r93001.
        https://bugs.webkit.org/show_bug.cgi?id=67676

        Reviewed by Kenneth Rohde Christiansen.

        r92823 and r93001 make WebKit no longer produce wrapping style 
        spans on copy and paste and class="Apple-style-span" anymore.
        Our expectations need to be updated.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::cursorMovements):
        (tst_QWebPage::textSelection):
        (tst_QWebPage::findText):

2011-09-06  Ademar de Souza Reis Jr.  <ademar.reis@openbossa.org>

        [Qt][Symbian] REGRESSION[94105] DumpRenderTree.exe doesn't build on Symbian
        https://bugs.webkit.org/show_bug.cgi?id=67644

        Reviewed by Csaba Osztrogonác.

        * symbian/eabi/QtWebKitu.def: add missing entry for
        FrameLoaderClientQt::dumpProgressFinishedCallback(bool)

2011-09-05  Kaustubh Atrawalkar  <kaustubh@motorola.com>

        Logic from HTMLElement::deprecatedCreateContextualFragment moved into
        Range::createContextualFragment function.
        https://bugs.webkit.org/show_bug.cgi?id=67056

        Reviewed by Ryosuke Niwa.

        Code Refactoring for deprecatedCreateContextualFragment.

        * Api/qwebelement.cpp:
        (QWebElement::appendInside):
        (QWebElement::prependInside):
        (QWebElement::prependOutside):
        (QWebElement::appendOutside):
        (QWebElement::encloseContentsWith):
        (QWebElement::encloseWith):

2011-09-03  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        REGRESSION (r86268): Fix for qt_networkAccessAllowed()
        https://bugs.webkit.org/show_bug.cgi?id=67570

        Reviewed by Noam Rosenthal.

        Replace the ENABLE(QT_BEARER) guard with
        !defined(QT_NO_BEARERMANAGEMENT) which is true by
        default in Qt 4.7 or later versions.

        * Api/qwebsettings.cpp:
        (qt_networkAccessAllowed):

2011-09-02  Jade Han  <jade.han@nokia.com>

        [Qt][Symbian] REGRESSION(93235) Missing .def update
        https://bugs.webkit.org/show_bug.cgi?id=67307

        Reviewed by Laszlo Gombos.

        * symbian/eabi/QtWebKitu.def:

2011-09-01  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] Transform QtFallbackWebPopupCombo into QtWebComboBox
        https://bugs.webkit.org/show_bug.cgi?id=67344

        Reviewed by Andreas Kling.

        Renamed QtFallbackWebPopup to QtWebComboBox and decoupled it from
        QtFallbackWebPopup. The new class is a QComboBox with the features that
        we need for QtWebKit: tracking when the popup is hidden (via the didHide()
        signal) and a convenience method to show its popup in the cursor position.

        An important change was made to the combobox: instead of hooking our actions in
        showPopup() and hidePopup(), as well as watching for popup visibility events, we
        now just watch for the visibility events. This allowed us to get rid of
        m_popupVisible and tracking the Show event.

        This commit also removed a workaround for input focus added in r40970 after
        reviewers request. See bug report for details.

        * QtWebKit.pro:
        * WebCoreSupport/QtFallbackWebPopup.cpp:
        (WebCore::QtFallbackWebPopup::QtFallbackWebPopup):
        (WebCore::QtFallbackWebPopup::~QtFallbackWebPopup):
        (WebCore::QtFallbackWebPopup::show):
        (WebCore::QtFallbackWebPopup::deleteComboBox):
        * WebCoreSupport/QtFallbackWebPopup.h:
        * WebCoreSupport/QtWebComboBox.cpp: Added.
        (WebCore::QtWebComboBox::QtWebComboBox):
        (WebCore::QtWebComboBox::showPopupAtCursorPosition):
        (WebCore::QtWebComboBox::eventFilter):
        * WebCoreSupport/QtWebComboBox.h: Added.

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::popupFocus):
        Change the test to use QObject::findChild(). The old method couldn't find our
        new class because we defined a new metaclass for it.

2011-08-31  Ryosuke Niwa  <rniwa@webkit.org>

        Move text() and textWithHardLineBreaks() from RenderTextControl to HTMLTextFormControlElement
        https://bugs.webkit.org/show_bug.cgi?id=67320

        Reviewed by Darin Adler.

        Call HTMLTextFormControlElement::value() instead of RenderText::text()

        * Api/qwebpage.cpp:
        (QWebPage::inputMethodQuery):

2011-08-31  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] Unskip API test for load signals order
        https://bugs.webkit.org/show_bug.cgi?id=67285

        Reviewed by Andreas Kling.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::loadSignalsOrder):

2011-08-30  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r94142, r94144, r94145, and r94148.
        http://trac.webkit.org/changeset/94142
        http://trac.webkit.org/changeset/94144
        http://trac.webkit.org/changeset/94145
        http://trac.webkit.org/changeset/94148
        https://bugs.webkit.org/show_bug.cgi?id=67262

        Broke isindex element (Requested by rniwa on #webkit).

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setAutofilled):
        (DumpRenderTreeSupportQt::setValueForUser):
        (DumpRenderTreeSupportQt::elementDoesAutoCompleteForElementWithId):

2011-08-30  Ryosuke Niwa  <rniwa@webkit.org>

        Get rid of toInputElement()
        https://bugs.webkit.org/show_bug.cgi?id=67175

        Reviewed by Darin Adler.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setAutofilled):
        (DumpRenderTreeSupportQt::setValueForUser):
        (DumpRenderTreeSupportQt::elementDoesAutoCompleteForElementWithId):

2011-08-30  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Emit last progress notification before calling dispatchDidFinishLoad
        https://bugs.webkit.org/show_bug.cgi?id=28851

        Reviewed by Adam Barth.

        Add infrastructure to dump progressFinishedNotification callback in DRT.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::dumpProgressFinishedCallback):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::postProgressFinishedNotification):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-08-30  Kaustubh Atrawalkar  <kaustubh@motorola.com>

        The unused ScrollView* argument can and should be removed from
        scrollRectIntoView.
        https://bugs.webkit.org/show_bug.cgi?id=67117

        Reviewed by Darin Adler.

        * WebCoreSupport/ChromeClientQt.h:
        (WebCore::ChromeClientQt::scrollRectIntoView):

2011-08-25  Ademar de Souza Reis Jr.  <ademar.reis@openbossa.org>

        Unreviewed QtWebKit.pro fix for when building inside Qt

        Patch by Simo Fält <simo.falt@nokia.com>

        The QtWebKit version was being overwritten by a global Qt version when
        QtWebKit was built inside Qt. Fixed by moving the version
        definition after the inclusion of qbase.pri.

        * QtWebKit.pro:

2011-08-25  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r93783.
        http://trac.webkit.org/changeset/93783
        https://bugs.webkit.org/show_bug.cgi?id=66943

        Commited wrong stuff by accident. (Requested by ademar on
        #webkit).

        * Api/qwebview.cpp:
        (QWebView::load):
        (QWebView::setHtml):
        (QWebView::setContent):
        (QWebView::setUrl):
        * QtWebKit.pro:

2011-08-25  Ademar de Souza Reis Jr.  <ademar.reis@openbossa.org>

        Unreviewed QtWebKit.pro fix for when building inside Qt

        Patch by Simo Fält <simo.falt@nokia.com>

        The QtWebKit version was being overwritten by a global Qt version when
        QtWebKit was built inside Qt. Fixed by moving the version
        definition after the inclusion of qbase.pri.

        * QtWebKit.pro:

2011-08-23  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Fix build on Lion

        https://bugs.webkit.org/show_bug.cgi?id=66770

        Reviewed by Andreas Kling.

        We were mistakenly picking up mac/WebCoreSystemInterface.h instead of
        the Qt one, and building on Lion revealed this when a typedef for
        IOSurfaceRef was wrapped in PLATFORM(MAC).

        For now we fix this by including WebCoreSystemInterface using
        brackets, so that we'll pick up the right file based on the
        include paths. This also means exposing a few missing enums
        in our own version of the file, so those were added.

        Lasty, we need to link against the right system interface library
        on Lion.

        * QtWebKit.pro:

2011-08-21  Lindsay Mathieson  <lindsay.mathieson@gmail.com>

        [Qt] Fixes premature plugin unload bug
        https://bugs.webkit.org/show_bug.cgi?id=66628
        
        Reviewed by Benjamin Poulain.

        The QtPlatformPlugin was allocated on the stack, so its destructor is unloading the
        plugin at the end of the scope. This patch moves the local creation of QtPlatformPlugin
        to class member (TextCheckerClientQt::m_platformPlugin), preventing premature unloading
        of plugin.            
        
        * WebCoreSupport/TextCheckerClientQt.cpp:
        (WebCore::TextCheckerClientQt::loadSpellChecker):
        * WebCoreSupport/TextCheckerClientQt.h:

2011-08-17  Adam Roben  <aroben@apple.com>

        Make WebCore keep track of the current device scale factor

        Fixes <http://webkit.org/b/66413> WebCore requires every WebKit port to keep track of the
        device scale factor

        Reviewed by Darin Adler.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate): Removed pixelRatio.
        (QWebPage::viewportAttributesForSize): Now calls Page::setDeviceScaleFactor.

        * Api/qwebpage_p.h: Removed pixelRatio.

        * WebCoreSupport/ChromeClientQt.cpp:
        * WebCoreSupport/ChromeClientQt.h:
        Removed deviceScaleFactor.

2011-08-18  Chang Shu  <cshu@webkit.org>

        Add support of setPasswordEchoEnabled and setPasswordEchoDuration for password echo feature
        https://bugs.webkit.org/show_bug.cgi?id=66052

        Reviewed by Alexey Proskuryakov.

        Enable password echo under the build flag.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):

2011-08-16  Chang Shu  <cshu@webkit.org>

        Support reset in WebCore::Internals
        https://bugs.webkit.org/show_bug.cgi?id=66307

        Reviewed by Dimitri Glazkov.

        Added framework code in WebKit.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::resetInternalsObject):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-08-16  Lindsay Mathieson   <lindsay.mathieson@gmail.com>

        [Qt] Missing spell check support
        https://bugs.webkit.org/show_bug.cgi?id=44114

        Reviewed by Benjamin Poulain.

        Added a platform plugin to allow spell and grammar check in QtWebKit.

        * Api/qwebkitplatformplugin.h:
        * QtWebKit.pro:
        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::isContinuousSpellCheckingEnabled):
        (WebCore::EditorClientQt::isGrammarCheckingEnabled):
        (WebCore::EditorClientQt::toggleContinuousSpellChecking):
        (WebCore::EditorClientQt::toggleGrammarChecking):
        * WebCoreSupport/EditorClientQt.h:
        (WebCore::EditorClientQt::textChecker):
        * WebCoreSupport/QtPlatformPlugin.cpp:
        (WebCore::QtPlatformPlugin::createSpellChecker):
        * WebCoreSupport/QtPlatformPlugin.h:
        * WebCoreSupport/TextCheckerClientQt.cpp: Added.
        (convertToVectorList):
        (WebCore::TextCheckerClientQt::ignoreWordInSpellDocument):
        (WebCore::TextCheckerClientQt::learnWord):
        (WebCore::TextCheckerClientQt::getAutoCorrectSuggestionForMisspelledWord):
        (WebCore::TextCheckerClientQt::checkSpellingOfString):
        (WebCore::TextCheckerClientQt::checkGrammarOfString):
        (WebCore::TextCheckerClientQt::getGuessesForWord):
        (WebCore::TextCheckerClientQt::isContinousSpellCheckingEnabled):
        (WebCore::TextCheckerClientQt::toggleContinousSpellChecking):
        (WebCore::TextCheckerClientQt::isGrammarCheckingEnabled):
        (WebCore::TextCheckerClientQt::toggleGrammarChecking):
        (WebCore::TextCheckerClientQt::loadSpellChecker):
        * WebCoreSupport/TextCheckerClientQt.h: Added.
        (WebCore::TextCheckerClientQt::requestCheckingOfString):

2011-08-15  Dmitry Titov  <dimich@chromium.org>

        FrameLoaderClient::transferLoadingResourceFromPage does not have enough parameters
        https://bugs.webkit.org/show_bug.cgi?id=66165

        Reviewed by Darin Fisher.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::transferLoadingResourceFromPage):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-08-10  Adam Roben  <aroben@apple.com>

        Clear up scale factor terminology

        WebKit by and large deals with two scale factors: one intrinsic to the device on which the
        software is running, and one that is per-Page and can be controlled via API calls. This
        patch names the former "deviceScaleFactor" and the latter "pageScaleFactor", and makes the
        code use those names. It should introduce no behavior changes.

        Fixes <http://webkit.org/b/55787> WebKit uses multiple conflicting names to refer to the
        device scale factor

        Reviewed by Simon Fraser.

        * WebCoreSupport/ChromeClientQt.cpp:
        * WebCoreSupport/ChromeClientQt.h:

2011-08-12  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] Add test for correct order of load signals in QWebPage
        https://bugs.webkit.org/show_bug.cgi?id=66016

        Reviewed by Benjamin Poulain.

        Add API test to ensure the order of load signals: loadStarted() needs to be emitted
        first, then loadProgress(100), followed by loadFinished().

        The test is skipped since this right now is broken, the bug
        https://bugs.webkit.org/show_bug.cgi?id=28851 tracks one possible way to fix.

        * tests/qwebpage/tst_qwebpage.cpp:
        (SpyForLoadSignalsOrder::SpyForLoadSignalsOrder):
        (SpyForLoadSignalsOrder::isFinished):
        (SpyForLoadSignalsOrder::onLoadProgress):
        (tst_QWebPage::loadSignalsOrder_data):
        (tst_QWebPage::loadSignalsOrder):

2011-08-12  Alexis Menard  <alexis.menard@openbossa.org>

        [Qt] Make sure QtWebKit correctly compiles when building WebKit2 with Qt5.

        In order to build correctly the QtQuick1 plugin we need to explicitly
        link to the new library added in Qt5 "qtquick1".

        Reviewed by Simon Hausmann.

        * declarative/declarative.pro:

2011-08-11  Andrew Wason  <rectalogic@rectalogic.com>

        REGRESSION: Qt JavaScript bridge signal connection fails
        https://bugs.webkit.org/show_bug.cgi?id=66097

        Reviewed by Gavin Barraclough.

        Unmark tests as expected failures, they pass now.

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::connectAndDisconnect):

2011-08-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r92683.
        http://trac.webkit.org/changeset/92683
        https://bugs.webkit.org/show_bug.cgi?id=65921

         "Breaks Qt --minimal build. Revert pending update of the Qt
        minimal configuration" (Requested by simathur on #webkit).

        * Api/qwebsettings.cpp:
        (QWebSettings::enablePersistentStorage):

2011-08-09  Siddharth Mathur  <siddharth.mathur@nokia.com>

        [Qt] Simplify code by removing QT_NO_DESKTOPSERVICES and QT_NO_NETWORKDISKCACHE
        https://bugs.webkit.org/show_bug.cgi?id=65880

        Reviewed by Andreas Kling.

        QDesktopServices and QNetworkDiskCache have been around for a while now. Kill flags which 
        check for their feature flags. Assume that any reasonable Qt build provides them. 

        * Api/qwebsettings.cpp:
        (QWebSettings::enablePersistentStorage):

2011-08-05  Dawit Alemayehu  <adawit@kde.org>

        Reviewed by Andreas Kling.

        Reverted commit r87797, http://trac.webkit.org/changeset/87797, because it
        causes the regression reported under bug# 63582.

        [Qt] REGRESSION(r87797): Broke KDEWebKit's custom QNAM.
        https://bugs.webkit.org/show_bug.cgi?id=63582

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::setFrame):

2011-08-03  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: [Timeline] Hover on paint events and see rect outline around that area.
        https://bugs.webkit.org/show_bug.cgi?id=65510

        Reviewed by Yury Semikhatsky.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::renderRelativeCoords):

2011-08-03  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: remove Node parameter from the InspectorClient::highlight
        https://bugs.webkit.org/show_bug.cgi?id=65549

        Reviewed by Yury Semikhatsky.

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::highlight):
        * WebCoreSupport/InspectorClientQt.h:

2011-08-02  Kristóf Kosztyó  <Kosztyo.Kristof@stud.u-szeged.hu>

        [Qt] Fix tst_QDeclarativeWebView::basicProperties() and historyNav() autotests
        https://bugs.webkit.org/show_bug.cgi?id=61042
        Remove mark as expected fail where unexpected pass and mark failing test case as expected fail

        Reviewed by Csaba Osztrogonác.

        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        (tst_QDeclarativeWebView::basicProperties):
        (tst_QDeclarativeWebView::historyNav):

2011-08-02  Kristóf Kosztyó  <Kosztyo.Kristof@stud.u-szeged.hu>

        [Qt] Fix tst_QWebPage::viewModes() API test
        https://bugs.webkit.org/show_bug.cgi?id=65531

        Reviewed by Csaba Osztrogonác.

        * tests/qwebpage/tst_qwebpage.cpp: Mark failing test case as expected fail
        (tst_QWebPage::viewModes):

2011-08-02  Kristóf Kosztyó  <Kosztyo.Kristof@stud.u-szeged.hu>

        [Qt] Fix tst_QWebFrame::connectAndDisconnect() API test
        https://bugs.webkit.org/show_bug.cgi?id=65170

        Reviewed by Csaba Osztrogonác.

        * tests/qwebframe/tst_qwebframe.cpp: Mark failing test case as expected fail
        (tst_QWebFrame::connectAndDisconnect):

2011-08-02  Kristóf Kosztyó  <Kosztyo.Kristof@stud.u-szeged.hu>

        [Qt] Fix tst_QWebElement::render() API test
        https://bugs.webkit.org/show_bug.cgi?id=65243

        Reviewed by Csaba Osztrogonác.

        * tests/qwebelement/tst_qwebelement.cpp: Mark failing test case as expected fail
        (tst_QWebElement::render):

2011-08-02  Kristóf Kosztyó  <Kosztyo.Kristof@stud.u-szeged.hu>

        [Qt] tst_QWebElement::style() fails because QWebElement::CascadedStyle doesn't work as expected
        https://bugs.webkit.org/show_bug.cgi?id=65244

        Reviewed by Csaba Osztrogonác.

        * tests/qwebelement/tst_qwebelement.cpp: Mark failing test case as expected fail
        (tst_QWebElement::style):

2011-08-01  Kristóf Kosztyó  <Kosztyo.Kristof@stud.u-szeged.hu>

        [Qt] Fix tst_QWebPage::loadHtml5Video() API test
        https://bugs.webkit.org/show_bug.cgi?id=65452

        Reviewed by Csaba Osztrogonác.

        * tests/qwebpage/tst_qwebpage.cpp: Mark failing test case as expected fail
        (tst_QWebPage::loadHtml5Video):

2011-07-30  Patrick Gansterer  <paroga@webkit.org>

        Remove inclusion of MainThread.h from Threading.h
        https://bugs.webkit.org/show_bug.cgi?id=65081

        Reviewed by Darin Adler.

        Add missing include statements for MainThread.

        * Api/qwebpage.cpp:

2011-07-27  Benjamin Poulain  <benjamin@webkit.org>

        [WK2][Qt] Move from QGraphicsView to Qt Scene Graph
        https://bugs.webkit.org/show_bug.cgi?id=62969

        Reviewed by Andreas Kling.

        Co-authored with Simon Hausmann  <simon.hausmann@nokia.com>

        Add the declarative dependency to link WebKit.

        * QtWebKit.pro:

2011-07-27  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] QtWebkit never finishes loading sites when they are loaded after an initial QUrl fails to load.
        https://bugs.webkit.org/show_bug.cgi?id=61328

        Reviewed by Andreas Kling.

        Change the hooks in FrameLoaderClient we use for emitting signals. Instead of
        emitting signals in the progress notification functions, we use the
        dispatchDid{Start,Finish,Fail}* functions. The main reason behind this change is
        that loading code is prepared to handle load() when inside those functions.

        The crash was being caused by setUrl() (and load()) being called when
        loadFinished(false) was emitted. The problem here is that when
        postProgressFinishedNotification the FrameLoader wasn't ready for taking a load()
        call again, because it was still the ProvisionalLoadState but with the
        provisionalDocumentLoader already removed.

        To emulate the same behavior that QtWebKit had when using
        postProgressFinishedNotification, we now keep track of the frame originating the
        load, and emit the signals when this frame's client is called.

        The patch keeps the existing semantics for QWebPage signals, but we now emit the
        QWebFrame signals everytime, not only when they are the originating frame for
        loading.

        * Api/qwebframe.cpp:
        (clearCoreFrame): Document our assumption that activeDocumentLoader will exist.

        * WebCoreSupport/FrameLoaderClientQt.h: Remove m_loadError, add a boolean to keep
        track whether the frame is originating the load. Remove the signals from
        FrameLoaderClientQt since we will emit QWebFrame and QWebPage signals directly.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::FrameLoaderClientQt): Initialize m_isOriginatingLoad.

        (WebCore::FrameLoaderClientQt::setFrame): Do not connect QWebFrame and QWebPage
        signals to our signals for load/finished, signal emission will be done manually.

        (WebCore::FrameLoaderClientQt::dispatchDidStartProvisionalLoad): Emit
        loadStarted() signal and make the first notification of estimation change, that
        Qt API tests expect to exist and notify 10%.

        (WebCore::FrameLoaderClientQt::dispatchDidFinishLoad): Remove reference to
        m_loadError and emit loadFinished() signal.

        (WebCore::FrameLoaderClientQt::postProgressStartedNotification): Remove signal
        emission and mark the originating load as true, since only the originating frame
        gets this call in its client.

        (WebCore::FrameLoaderClientQt::postProgressFinishedNotification): Remove signal
        emission.

        (WebCore::FrameLoaderClientQt::callErrorPageExtension): Return whether the call
        was successful or not. This wasn't necessary before because a successful call for
        error page would lead to a load(), that cleared the m_loadError.
        (WebCore::FrameLoaderClientQt::dispatchDidFailProvisionalLoad): Remove reference
        to m_loadError and emit finished signal indicating error if ErrorPage extension
        doesn't handle it.
        (WebCore::FrameLoaderClientQt::dispatchDidFailLoad): Ditto.

        (WebCore::FrameLoaderClientQt::emitLoadStarted): Emit the loadStarted() signal
        for the QWebFrame, and if the originating load also do for the QWebPage.

        (WebCore::FrameLoaderClientQt::emitLoadFinished): Same as before but for
        loadFinished(). Take care to reset the originating load flag before the signals
        are emitted, since they might want to set it back again.

        * tests/qwebframe/tst_qwebframe.cpp:
        (URLSetter::URLSetter): Object that sets the url using either load() or setUrl()
        when a certain signal is emitted in the frame.

        (URLSetter::execute):
        (tst_QWebFrame::loadInSignalHandlers_data):
        (tst_QWebFrame::loadInSignalHandlers): New test inspired by the bug test case. This test
        crashes without this patch applied.

2011-07-27  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] Fix build in Qt 5 of QDeclarativeWebView
        https://bugs.webkit.org/show_bug.cgi?id=65258

        Reviewed by Andreas Kling.

        In Qt 5, the QGraphicsView-based classes for QtQuick are in the
        qtquick1 module, including QDeclarativeItem and QDeclarativeView.

        * declarative/qdeclarativewebview_p.h:
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        * tests/tests.pri:
        * tests/tests.pro:

2011-07-26  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        Add support for download='filename' attribute in anchors.
        https://bugs.webkit.org/show_bug.cgi?id=64580

        Reviewed by Adam Barth.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::startDownload):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-07-26  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] Change default backend to use GStreamer on Linux and QuickTime on Mac.
        https://bugs.webkit.org/show_bug.cgi?id=63472

        Use the flag WTF_USE_QTKIT=1 rather than USE_QTKIT=1 because that flag doesn't
        exist anymore, it's the default. Ditto for GStreamer.

        * QtWebKit.pro:

2011-07-25  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] Add more tests to cover the behavior of loadFinished() signal
        https://bugs.webkit.org/show_bug.cgi?id=63490

        Reviewed by Benjamin Poulain.

        * tests/qwebframe/tst_qwebframe.cpp:
        (FakeReply::FakeReply):
        (FakeNetworkManager::createRequest): Add a fake reply that gives 404 error code.

        (tst_QWebFrame::loadFinishedAfterNotFoundError): Verify that we get loadFinished(false)
        after a 404 error without contents.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::errorPageExtensionLoadFinished): Verify if the argument of loadFinished()
        is true when we use error page extension to produce our own error pages.

2011-07-19  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] Improve documentation of QWebView::setPage()
        https://bugs.webkit.org/show_bug.cgi?id=64827

        Reviewed by Noam Rosenthal.

        * Api/qwebview.cpp: Use the word 'page' to refer to a QWebPage instead of 'document'.

2011-07-19  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [Qt] Fix leak of QWebPage in errorPageExtension tests
        https://bugs.webkit.org/show_bug.cgi?id=64814

        Reviewed by Noam Rosenthal.

        QWebView::setPage() doesn't take ownership, so the ErrorPages were leaking. So now
        allocate them on the stack. This shouldn't change any behavior.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::errorPageExtension):
        (tst_QWebPage::errorPageExtensionInIFrames):
        (tst_QWebPage::errorPageExtensionInFrameset):

2011-07-18  Hui Huang  <hui.2.huang@nokia.com>

        [Qt] Compiling error in Source/WebKit/qt/tests/qwebelement/tst_qwebelement.cpp with Qt 4.7 or older
        https://bugs.webkit.org/show_bug.cgi?id=64560

        Reviewed by Noam Rosenthal.

        * tests/qwebelement/tst_qwebelement.cpp:
        (tst_QWebElement::render):

2011-07-15  Dan Bernstein  <mitz@apple.com>

        REGRESSION: Mouse cursor doesn’t hide when full screen video HUD hides
        https://bugs.webkit.org/show_bug.cgi?id=64615

        Reviewed by Anders Carlsson.

        * WebCoreSupport/ChromeClientQt.h:
        (WebCore::ChromeClientQt::setCursorHiddenUntilMouseMoves): Added this stub.

2011-07-15  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        REGRESSION(91064): Upstream QtWebKit/N9 changes related tovisibleContentRect

        Reviewed by Antonio Gomes.

        Only set setFixedVisibleContentRect when in resizesToContents mode.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::transitionToCommittedForNewPage):

2011-07-15  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Upstream QtWebKit/N9 changes related to visibleContentRect
        https://bugs.webkit.org/show_bug.cgi?id=64589

        Reviewed by Simon Hausmann.

        * Api/qwebpage.cpp:
        (QWebPage::setActualVisibleContentRect):
        Change to use setFixedVisibleContentRect.
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::transitionToCommittedForNewPage):
        Only set fixedVisibleContentRect for the mainframe.
        * symbian/eabi/QtWebKitu.def:

2011-07-13  Joseph Pecoraro  <joepeck@webkit.org>

        Improve names of some ApplicationCacheStorage accessor methods
        https://bugs.webkit.org/show_bug.cgi?id=64433

        Reviewed by Alexey Proskuryakov.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::reachedApplicationCacheOriginQuota):
        Renamed method.

2011-07-12  Joseph Pecoraro  <joepeck@webkit.org>

        ApplicationCache update should not immediately fail when reaching per-origin quota
        https://bugs.webkit.org/show_bug.cgi?id=64177

        Reviewed by Alexey Proskuryakov.

        * Api/qwebpage.cpp:
        * Api/qwebpage.h:
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::reachedApplicationCacheOriginQuota):
        * WebCoreSupport/ChromeClientQt.h:
        Pass the spaceNeeded value through to the applicationCacheQuotaExceeded signal.

2011-07-11  Ryosuke Niwa  <rniwa@webkit.org>

        Move selection related code from RenderTextControl to HTMLTextFormControlElement
        https://bugs.webkit.org/show_bug.cgi?id=64133

        Reviewed by Dimitri Glazkov.

        Replaced calls to WebCore::setSelectionRange by calls to HTMLTextFormControlElement::setSelectionRange.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::inputMethodEvent):

2011-07-08  Adam Barth  <abarth@webkit.org>

        Unreviewed, rolling out r90662.
        http://trac.webkit.org/changeset/90662
        https://bugs.webkit.org/show_bug.cgi?id=64210

        Introduced regressions in Chromium browser tests (Requested by
        rniwa on #webkit).

        * Api/qwebpage.cpp:
        (QWebPagePrivate::inputMethodEvent):

2011-07-08  Ryosuke Niwa  <rniwa@webkit.org>

        Move selection related code from RenderTextControl to HTMLTextFormControlElement
        https://bugs.webkit.org/show_bug.cgi?id=64133

        Reviewed by Dimitri Glazkov.

        Replaced calls to WebCore::setSelectionRange by calls to HTMLTextFormControlElement::setSelectionRange.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::inputMethodEvent):

2011-07-05  Rafael Brandao  <rafael.lobo@openbossa.org>

        [Qt] Fix tst_QWebFrame::setHtmlWithResource() API test
        https://bugs.webkit.org/show_bug.cgi?id=63235

        Modified baseUrl to be a local file in order to get a security origin
        that is allowed to request local resources. Removed QSignalSpy from it
        as loadFinished always happens, and the original test was split into two.

        Reviewed by Benjamin Poulain.

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::setHtmlWithImageResource):
        (tst_QWebFrame::setHtmlWithStylesheetResource):
        (tst_QWebFrame::setHtmlWithBaseURL):

2011-04-02  Robert Hogan  <robert@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] Support third-party cookie policy for Qt clients

        This adds new API to QWebSettings that allows clients to
        select one of three third-party cookie blocking policies:

          AlwaysAllowThirdPartyCookies
          AlwaysBlockThirdPartyCookies
          AllowThirdPartyWithExistingCookies

        The first two are self-explanatory, the third mimics Safari's
        default behaviour of permitting third-party cookies when the user
        already has cookies from the third-party site. This was
        introduced to allow third-party cookie blocking to play well with
        facebook sharing etc. AlwaysAllowThirdPartyCookies is the default.

        There is scope for adding an 'exceptions' list API and clients would
        struggle to implement it themselves given the paucity of information
        available from setCookiesForUrl().

        See also: http://gitorious.org/qt/qt/merge_requests/1205
                   (commit 154402f56dcf8303a6ce601a52215226af8d31ba)
                  http://bugreports.qt.nokia.com/browse/QTBUG-13601

        https://bugs.webkit.org/show_bug.cgi?id=45455

        * Api/qwebsettings.cpp:
        (QWebSettings::QWebSettings):
        (QWebSettings::setThirdPartyCookiePolicy):
        (QWebSettings::thirdPartyCookiePolicy):
        * Api/qwebsettings.h:

2011-07-01  Jade Han  <jade.han@nokia.com>

        [Qt][Symbian] Update .def file for Symbian to build Tools
        https://bugs.webkit.org/show_bug.cgi?id=61200

        Reviewed by Laszlo Gombos.

        Add newly introduced symbols to fix building the Tools directory for Symbian.

        * symbian/eabi/QtWebKitu.def:

2011-07-01  Jade Han  <jade.han@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt][Symbian] Update .def file for Symbian
        https://bugs.webkit.org/show_bug.cgi?id=61200

        Add newly introduced symbols to fix the Symbian build.

        * symbian/eabi/QtWebKitu.def:

2011-06-30  Rafael Brandao  <rafael.lobo@openbossa.org>

        Reviewed by Benjamin Poulain.

        [Qt] Fix tst_QWebFrame::renderGeometry() API test
        https://bugs.webkit.org/show_bug.cgi?id=63236
        
        This test required a security origin with granted permission to request local resources.
        By default, only local files can load local resources. So modified baseUrl to be a local file.

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::renderGeometry):

2011-06-27  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Antonio Gomes.

        [Qt] DRT: Provide LayoutTestController::setDefersLoading and ::goBack support
        https://bugs.webkit.org/show_bug.cgi?id=63489

        Unskipped:
            loader/navigation-while-deferring-loads.html

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setDefersLoading):
        (DumpRenderTreeSupportQt::goBack):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-06-30  Fabrizio Machado  <fabrizio.machado@nokia.com>

        Reviewed by Benjamin Poulain.
        
        [Qt] QML Webview causes performance drops
        https://bugs.webkit.org/show_bug.cgi?id=57554

        Remove tiledBackingStoreEnabled from QML WebView.
        
        * declarative/qdeclarativewebview.cpp:
        (QDeclarativeWebView::setPage):

2011-06-30  Kentaro Hara  <haraken@google.com>

        Reviewed by Kent Tamura.

        Change the label of an HTML5 file chooser button to "Choose Files"
        https://bugs.webkit.org/show_bug.cgi?id=49245

        We should notify capability of multiple files to users.

        Test: fast/forms/input-file-label.html

        * WebCoreSupport/WebPlatformStrategies.cpp:
        (WebPlatformStrategies::fileButtonChooseFileLabel): Updated the description for "Choose File".
        (WebPlatformStrategies::fileButtonChooseMultipleFilesLabel):  Returns a "Choose Files" label.
        * WebCoreSupport/WebPlatformStrategies.h:

2011-06-29  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Benjamin Poulain.

        [Qt] Add Qt dependencies in QtWebKit's main pro file.
        https://bugs.webkit.org/show_bug.cgi?id=63639

        syncqt, the script which generates the headers inside Qt parses
        the main pro file of QtWebKit to check the Qt dependencies. It used
        to be WebCore.pro but after the build reorganization QtWebKit.pro is
        the new main pro file so we need to add the network dependency just like
        we did in WebCore.pro.

        * QtWebKit.pro:

2011-06-28  Ilya Sherman  <isherman@chromium.org>

        Reviewed by Adam Barth.

        form.autocomplete="off" does not work
        https://bugs.webkit.org/show_bug.cgi?id=35823

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::elementDoesAutoCompleteForElementWithId): Update callsite.

2011-06-27  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] DRT support for setInteractiveFormValidationEnabled
        https://bugs.webkit.org/show_bug.cgi?id=63496

        Unskipped:
            fast/forms/interactive-validation-prevented.html
            fast/forms/interactive-validation-attach-assertion.html
            fast/forms/interactive-validation-assertion-by-validate-twice.html
            fast/forms/interactive-validation-select-crash.html
            fast/forms/interactive-validation-crash-by-style-override.html

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setInteractiveFormValidationEnabled):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-06-28  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] Use <QtX/x.h> style of headers for Qt tests which rely on it.
        https://bugs.webkit.org/show_bug.cgi?id=63562

        Some Qt auto-tests rely on <QtX/x.h> types of includes.

        * Api/qwebkitplatformplugin.h:
        * symbian/platformplugin/qwebkitplatformplugin.h:

2011-06-28  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] Use QtQuick imports in Api tests rather than old deprecated Qt 4.x imports.
        https://bugs.webkit.org/show_bug.cgi?id=63533

        We need to use the new QtQuick 1.x imports rather than the old deprecated
        version.

        * tests/qdeclarativewebview/resources/webviewbackgroundcolor.qml:
        * tests/qdeclarativewebview/resources/webviewtest.qml:
        * tests/qdeclarativewebview/resources/webviewtestdefault.qml:

2011-06-27  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Darin Adler.

        Use specific headers includes rather than full system headers.
        https://bugs.webkit.org/show_bug.cgi?id=63475

        Use only needed headers rather than system headers.

        * WebCoreSupport/QTKitFullScreenVideoHandler.mm:

2011-06-27  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Remove Phonon MediaPlayer from the tree.
        https://bugs.webkit.org/show_bug.cgi?id=63448

        Remove Phonon related stuff.

        * docs/qtwebkit.qdocconf:
        * qt_webkit_version.pri:

2011-06-27  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] tst_QWebFrame::overloadedSlots() fails
        https://bugs.webkit.org/show_bug.cgi?id=37319

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::overloadedSlots): Remove expected failure and
        fix the comment.

2011-06-20  Robert Hogan  <robert@webkit.org>

        Reviewed by Antonio Gomes.

        [Qt] Duplicate entry in context menu
        https://bugs.webkit.org/show_bug.cgi?id=62139

        contextMenuController()->populate() is called from
        ContextMenuController::handleContextMenuEvent() so
        QWebPage::updatePositionDependentActions() does not need
        to call it independently.

        Related changesets: 
         http://trac.webkit.org/changeset/73535
         http://trac.webkit.org/changeset/32389

        * Api/qwebpage.cpp:
        (QWebPage::updatePositionDependentActions):
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::contextMenuCopy):
        (tst_QWebPage::contextMenuPopulatedOnce):

2011-06-24  Dominic Cooney  <dominicc@chromium.org>

        Reviewed by Dimitri Glazkov.

        Convert shadow-DOM related tests to use window.internals
        https://bugs.webkit.org/show_bug.cgi?id=61671

        Remove shadow-DOM related methods from Qt DRT API. These are not
        required any more.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-06-23  Joe Wild  <joseph.wild@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] The Qt WebKit Symbian .def file needs to be updated so Symbian will build
        https://bugs.webkit.org/show_bug.cgi?id=61200

        Revert r87060 as it broke compatibility with QtWebKit 2.1 release
        and add some newly introduce symbols.

        * symbian/eabi/QtWebKitu.def:

2011-06-23  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Eric Carlson.

        [Qt] Implement fullscreen support on Mac with the QuickTime backend.
        https://bugs.webkit.org/show_bug.cgi?id=61728

        Implement fullscreen support for Qt when using the QuickTime backend.
        We mostly use what is already done for the Mac port.

        * QtWebKit.pro:
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::ChromeClientQt):
        (WebCore::ChromeClientQt::~ChromeClientQt):
        * WebCoreSupport/ChromeClientQt.h:
        * WebCoreSupport/FullScreenVideoQt.cpp:
        (WebCore::FullScreenVideoQt::FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::~FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::enterFullScreenForNode):
        (WebCore::FullScreenVideoQt::exitFullScreenForNode):
        (WebCore::FullScreenVideoQt::requiresFullScreenForVideoPlayback):
        (WebCore::FullScreenVideoQt::isValid):
        * WebCoreSupport/FullScreenVideoQt.h:
        * WebCoreSupport/QTKitFullScreenVideoHandler.h: Added.
        * WebCoreSupport/QTKitFullScreenVideoHandler.mm: Added.
        (QTKitFullScreenVideoHandler::QTKitFullScreenVideoHandler):
        (QTKitFullScreenVideoHandler::~QTKitFullScreenVideoHandler):
        (QTKitFullScreenVideoHandler::enterFullScreen):
        (QTKitFullScreenVideoHandler::exitFullScreen):
        * WebCoreSupport/WebSystemInterface.mm:
        (InitWebCoreSystemInterface):

2011-06-23  Yael Aharon  <yael.aharon@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] [WK2] Add drag and drop support
        https://bugs.webkit.org/show_bug.cgi?id=62838

        Call dragEnded from the DragClient to make WebKit1 and WebKit2 consistent.

        * WebCoreSupport/DragClientQt.cpp:
        (WebCore::DragClientQt::startDrag):

2011-06-23  Joe Wild  <joseph.wild@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] Export files under Symbian Qt WebKit build
        https://bugs.webkit.org/show_bug.cgi?id=61207

        Export files for the Symbian platform as this is needed by the
        production build system.

        Janne Koskinen provided the suggestion to use target_predeps,
        which is an improvement over the originally suggested patch.

        * QtWebKit.pro:

2011-06-23  Csaba Osztrogonác  <ossy@webkit.org>

        Rubber-stamped by Andreas Kling.

        [Qt] Fix tst_QWebFrame::setHtmlWithResource() API test
        https://bugs.webkit.org/show_bug.cgi?id=63235

        [Qt] Fix tst_QWebFrame::renderGeometry() API test
        https://bugs.webkit.org/show_bug.cgi?id=63236

        [Qt] Fix tst_QWebFrame::setUrlWithPendingLoads() API test
        https://bugs.webkit.org/show_bug.cgi?id=63237

        * tests/qwebframe/tst_qwebframe.cpp: Mark failing test cases as expected fails until real fix.
        (tst_QWebFrame::setHtmlWithResource):
        (tst_QWebFrame::renderGeometry):

2011-06-23  Csaba Osztrogonác  <ossy@webkit.org>

        Rubber-stamped by Andreas Kling.

        [Qt] Fix tst_QWebPage::showModalDialog() API test
        https://bugs.webkit.org/show_bug.cgi?id=63244

        [Qt] Fix tst_QWebPage::testStopScheduledPageRefresh() API test
        https://bugs.webkit.org/show_bug.cgi?id=63245

        * tests/qwebpage/tst_qwebpage.cpp: Mark failing test cases as expected fails.
        (tst_QWebPage::showModalDialog):
        (tst_QWebPage::testStopScheduledPageRefresh):

2011-06-22  Ademar de Souza Reis Jr.  <ademar.reis@openbossa.org>

        Reviewed by Holger Freyther.

        [Qt] Fix Qt namespace on QDeclarativeWebView autotest
        https://bugs.webkit.org/show_bug.cgi?id=63147

        Applications (such as the test runner) are not supposed to be wrapped
        by {QT_BEGIN,QT_END}_NAMESPACE macros, otherwise building Qt (or
        QtWebKit) with a specific namespace won't work (will result in main
        being undefined).

        This was the only test wrapped by these macros, all others are fine.

        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp: remove
        namespace macros.

2011-06-20  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Kent Tamura.

        FileChooser should be only created when we need to choose files.
        https://bugs.webkit.org/show_bug.cgi?id=63039

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::runOpenPanel): Changed to use settings.

2011-06-21  Yael Aharon  <yael.aharon@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] Regression(60942) wrong default action for drag-and-drop.
        https://bugs.webkit.org/show_bug.cgi?id=63004

        Added special handling for the case that dragOperation is not initialized.
        Save the last dropOperation and pass it to the dropEvent, so that it can 
        be accepted by QDrag.
        Call event->accepted() and not event->acceptProposedAction(), because the
        later ignores the dropAction specified in JavaScript.

        Tested with the test page attached to https://bugs.webkit.org/show_bug.cgi?id=40401
        and did not see any issue.
        Also manually tested all combinations of LayoutTests/fast/events/drag-and-drop.html
        and they all pass.

        * Api/qwebpage.cpp:
        (dropActionToDragOp):
        (QWebPagePrivate::dragMoveEvent):
        (QWebPagePrivate::dropEvent):

2011-06-20  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: remove LayoutTestController::setTimelineProfilingEnabled.
        https://bugs.webkit.org/show_bug.cgi?id=62994

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-06-18  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Darin Adler.

        Separate concerns of loading file icons and choosing files.
        https://bugs.webkit.org/show_bug.cgi?id=62931

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::loadIconForFiles): Renamed.
        * WebCoreSupport/ChromeClientQt.h:

2011-06-17  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] Fix wrong framework generation on MacOS when inside Qt 4.8.
        https://bugs.webkit.org/show_bug.cgi?id=62815

        Partially revert r85870 which assumed that QtWebKit will never be build inside Qt
        anymore. Everything inside !QTDIR_build condition is not needed in the Qt tree because
        qbase.pri is doing the job for us, i.e. using includes generated by syncqt to
        setup the mac framework. It also use a correct QMAKE_LFLAGS_SONAME making possible
        to actually run an application linked against QtWebKit.

        * QtWebKit.pro:

2011-06-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r88796.
        http://trac.webkit.org/changeset/88796
        https://bugs.webkit.org/show_bug.cgi?id=62790

        It made fast/dom/nodesFromRect-basic.html time out on Qt,
        64-bit, debug mode (Requested by Ossy on #webkit).

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::plainText):
        (DumpRenderTreeSupportQt::nodesFromRect):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::overloadedSlots):
        (tst_QWebFrame::domCycles):

2011-06-15  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Inconsistent behavior on a form submit request...
        https://bugs.webkit.org/show_bug.cgi?id=45523

        The inconsistency occurs when a form submission requests a new window.
        Two windows are opened (instead of only one) and the first window is opened
        as a blank page.

        By default each page is put into their own unique page group, which affects popup windows
        and visited links. Page groups (per process only) is a feature making it possible to use
        separate settings for each group, so that for instance an integrated browser/email reader
        can use different settings for displaying HTML pages and HTML email. To make QtWebKit work
        as expected out of the box, we use a default group similar to what other ports are doing.

        * Api/qwebpage.cpp:

2011-06-14  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] tst_QWebFrame::overloadedSlots() fails
        https://bugs.webkit.org/show_bug.cgi?id=37319

        Since the implicit conversion was removed, change support functions of DRT to
        expect a QVariantMap instead of a QWebElement. This matches the exposed function
        in the controller, which takes 'document' and not 'document.documentElement'.

        And now that Element -> QWebElement is a perfect match, we must use QWebElement
        instead of QVariantMap, like in plainText().

        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::plainText): Fix to use QWebElement instead of
        QVariantMap when getting the startContainer. Also use QVariantMap directly,
        bridge will do conversion for us now.

        (getCoreDocumentFromVariantMap): Extracts the WebCore::Document* from the
        QVariantMap that Qt bridge gives us when 'document' is passed from JS.

        (DumpRenderTreeSupportQt::nodesFromRect): Use helper function.

        * tests/qwebframe/tst_qwebframe.cpp: Splitted the test domCycles() into two
        different tests. In practice, the original test just checked whether we could
        create a QVariantMap representing 'document' without infinite looping due to
        cycles in the DOM. This was more evident before since we haven't a conversion
        from JSElement to QWebElement, but from JSElement to QVariantMap.

        (tst_QWebFrame::documentHasDocumentElement): Evaluates 'document' and extracts
        'documentElement' from it. Compares to QWebFrame::documentElement().

        (tst_QWebFrame::documentAllHasDocumentElement): Look inside 'document.all' for
        the documentElement.

        (tst_QWebFrame::overloadedSlots): Remove expected failure and fix wrong comment.

2011-06-14  Andreas Kling  <kling@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] Don't include convenience "QWebFoo" headers in WebKit code.
        https://bugs.webkit.org/show_bug.cgi?id=62632

        * WebCoreSupport/FrameNetworkingContextQt.cpp:

2011-06-12  Adam Barth  <abarth@webkit.org>

        Reviewed by Alexey Proskuryakov.

        Rename FrameLoaderClient::interruptForPolicyChangeError to use the past tense
        https://bugs.webkit.org/show_bug.cgi?id=62516

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::interruptedForPolicyChangeError):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-06-12  Adam Barth  <abarth@webkit.org>

        Attempt to fix Qt build.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (drtPrintFrameUserGestureStatus):

2011-06-12  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Remove FrameLoader::isProcessingUserGesture
        https://bugs.webkit.org/show_bug.cgi?id=62519

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (drtPrintFrameUserGestureStatus):

2011-06-10  Andreas Kling  <kling@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] Fix 'headers' autotest when building inside Qt.
        https://bugs.webkit.org/show_bug.cgi?id=62449

        * Api/qwebkitplatformplugin.h:

2011-06-10  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Keep ORIENTATION_EVENTS independent from DEVICE_ORIENTATION
        https://bugs.webkit.org/show_bug.cgi?id=62420

        ORIENTATION_EVENTS and DEVICE_ORIENTATION features are very similar
        but they meant to be independent.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::_q_orientationChanged):
        (QWebFrame::QWebFrame):
        * Api/qwebframe_p.h:

2011-06-09  Andras Becsi  <abecsi@webkit.org>

        Reviewed by Andreas Kling.

        [Qt] Fix the in-tree build on Linux
        https://bugs.webkit.org/show_bug.cgi?id=62378

        In case of an in-tree build qmake generates defect prl dependencies for
        the QtWebKit library, because the inclusion of qtbase.pri adds explicitlib to CONFIG.

        * QtWebKit.pro: Remove explicitlib and staticlib from CONFIG.

2011-06-09  Robert Hogan  <robert@webkit.org>

        Reviewed by Andreas Kling.

        Teach Qt about window.internals
        https://bugs.webkit.org/show_bug.cgi?id=61074

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::injectInternalsObject):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-06-08  Andreas Kling  <kling@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] FrameLoaderClient: Check Vector::find() return value for WTF::notFound.
        https://bugs.webkit.org/show_bug.cgi?id=62274

        Vector::find() returns size_t (which is unsigned), so we should check
        for WTF::notFound instead of -1.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::createPlugin):

2011-06-07  Noam Rosenthal  <noam.rosenthal@nokia.com>

        Reviewed by Andreas Kling.

        [Texmap][Qt] Enable TextureMapper by default
        https://bugs.webkit.org/show_bug.cgi?id=61740

        Enable TextureMapper on Windows+Symbian, disabling the direct OpenGL path. This would mean that
        for now QtWebKit on Windows/Symbian would use the Qt backend for TextureMapper.

        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQGraphicsWidget::setRootGraphicsLayer):

2011-06-07  Aravind Akella  <aravind.akella@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt][Symbian] API test failure qdeclarativewebview
        https://bugs.webkit.org/show_bug.cgi?id=59481

        QML files cannot be loaded on Symbian due to difference 
        in capabilities between qmlwebkitplugin.dll and Qtwebkit.dll.  
        A PlatSec error that Qtwebkit.dll has "DRM AllFiles" capabilities 
        missing is observed when dynamically loading the QML plugin. 

        * declarative/declarative.pro: Match capabilities in QtWebKit.pro.
        * symbian/platformplugin/platformplugin.pro: Match capabilities with the other 2 DLLs. 
        Also remove TARGET.VID from platformplugin, as it's not used in any other Qt WebKit DLL,
        and causes build warnings about undefined VENDOR_VID. 
        * tests/tests.pri: Add WriteDeviceData capability for API tests. 

2011-06-04  Robert Hogan  <robert@webkit.org>

        Reviewed by Andreas Kling.

        [Qt] Fix and unskip acid2
        https://bugs.webkit.org/show_bug.cgi?id=62089

        shouldFallBack() tells the DOM if it should attempt to render
        the next nested <object> if its parent fails to load.

        This fix is only required for the fast/css version of the ACID2
        test, which loads a non-existent file:// url. The HTTP version of the
        test already passes because the loader will render fallback content
        on a failed HTTP load without delegating the decision to the client
        ( see MainResourceLoader::continueAfterContentPolicy).

        Some ports also check for WebKitErrorPluginWillHandleLoad when deciding
        what to return. This error isn't currently set by Qt so we don't check
        it. (Other ports set it when the erring document is a MediaDocument, maybe
        we should do that too at some point).

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::shouldFallBack):

2011-06-03  Rafael Brandao  <rafael.lobo@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] It made two Qt API tests fail
        https://bugs.webkit.org/show_bug.cgi?id=58847

        Modified failing test's base url so it could get a valid origin
        and make use of local storage. Also added another test that checks
        local storage visibility in both scenarios.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::testOptionalJSObjects):
        (checkLocalStorageVisibility):
        (tst_QWebPage::testLocalStorageVisibility):

2011-06-03  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] Warning fixes on comparisons between a signed and an unsigned.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::computedStyleIncludingVisitedInfo):
        (DumpRenderTreeSupportQt::nodesFromRect):

2011-06-03  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        To support building namespaced Qt, we require that forward-declarations
        of Qt classes be wrapped in QT_BEGIN_NAMESPACE and QT_END_NAMESPACE.

        * WebCoreSupport/FrameLoaderClientQt.h:

2011-06-03  Alexis Menard  <alexis.menard@openbossa.org>

        Unreviewed build fix after r87902.

        To support building namespaced Qt, we require that forward-declarations
        of Qt classes be wrapped in QT_BEGIN_NAMESPACE and QT_END_NAMESPACE but
        only on classes inside Qt.
        
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-06-03  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Benjamin Poulain.

        Some warning fixes. Values in switch not handled, and
        a comparison between a signed and an unsigned.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::inputMethodEvent):
        (QWebPagePrivate::dynamicPropertyChangeEvent):
        (QWebPage::action):

2011-06-02  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] Fix enum order in qwebpage.h public API header
        https://bugs.webkit.org/show_bug.cgi?id=61959

        Since qwebpage.h is a public header, we can't change the values of
        the enumerations. This patch moves the new enumeration to the end
        of the list. As a bonus, adds a missing entry in
        editorCommandWebActions table.

        * Api/qwebpage.cpp:
        * Api/qwebpage.h:

2011-06-02  Andreas Kling  <kling@webkit.org>

        Rubber-stamped by Simon Hausmann.

        Remove Qt's precompiled header hack as it was broken, and was not even
        used unless building WebKit inside a Qt tree.

        * WebKit_pch.h: Removed.

2011-06-02  Andreas Kling  <kling@webkit.org>

        Unreviewed build fix.

        To support building namespaced Qt, we require that forward-declarations
        of Qt classes be wrapped in QT_BEGIN_NAMESPACE and QT_END_NAMESPACE.

        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-06-01  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt]Fix tst_QWebFrame::setUrlToInvalid() autotest after r84762
        https://bugs.webkit.org/show_bug.cgi?id=59345

        KURL and QUrl disagree whether certain URLs are valid or not. The regression here
        was caused by the fact that now KURL accepts "http:/example.com" (note only one
        slash) and our test case used a strange edge case that's transformed into a
        "one-slash" URL that now KURL can handle.

        QtWebKit approach in this case is to do a best effort and accept the QUrl if KURL
        can understand it. So I've updated the test to use a more meaningful example and
        show that an invalid URL gets converted to a valid URL if possible.

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::setUrlToInvalid):

2011-06-01  Andreas Kling  <kling@webkit.org>

        Reviewed by Benjamin Poulain.

        REGRESSION: [Qt] QNetworkReply delivered by the unsupportedContent() signal does not contain downloaded data
        https://bugs.webkit.org/show_bug.cgi?id=49650

        Defer emission of QWebPage::unsupportedContent() until we're back in the event loop.
        This lets the QNAM backend finish with the reply without handing over ownership to the user code.

        No new tests since this doesn't fail for qrc:// or file:// URLs and our tests can't depend on http:// URLs.

        To correctly solve this issue, we need changes to Qt, tracked here:
        http://bugreports.qt.nokia.com/browse/QTBUG-18718

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::setFrame):
        (WebCore::FrameLoaderClientQt::download):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-06-01  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Tor Arne Vestbø.

        [Qt] Rewrite tst_QDeclarativeWebView::multipleWindows() to not depend on Grid internals
        https://bugs.webkit.org/show_bug.cgi?id=61739

        The skipped test was imported from Qt source repository, and used private headers
        to peek in the QML Grid element. This patch changes the QML used to expose the
        information we want to test: number of pages opened and the first page opened.

        * tests/qdeclarativewebview/resources/newwindows.html:
        Added <body> tags. We have no reason to not use them in the test.

        * tests/qdeclarativewebview/resources/newwindows.qml:
        Moved the timer out of the page component, used anchors for setting webview size,
        changed the way we count pages opened. Also changed coding style a bit.

        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        (tst_QDeclarativeWebView::multipleWindows):
        We now look for properties with the information we want in the rootItem: pagesOpened and
        firstPageOpened.

2011-05-31  Rafael Brandao  <rafael.lobo@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] tst_QWebFrame::render() failing
        https://bugs.webkit.org/show_bug.cgi?id=60893
        
        The test was expecting the frame contents to be already loaded
        before rendering it into a QPicture. Renamed the test to fit
        its real purpose more accordingly.

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::renderGeometry):

2011-05-30  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] Fix unnecessary wait in API autotest tst_QWebFrame::scrollbarsOff
        https://bugs.webkit.org/show_bug.cgi?id=61711

        The loadFinished() signal was emitted directly inside the call for setHtml, so
        the test was waiting the loadFinished() signal with a big timeout. Change this by
        a very small timeout and a verification with signal spy.

        In practice, setHtml() will either directly call loadFinished() or queue it to
        the next event loop run, and test will work for both situations.

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::scrollbarsOff):

2011-05-30  Noam Rosenthal  <noam.rosenthal@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Texmap][Qt] Disable accelerated plugins/media in until they're working.
        https://bugs.webkit.org/show_bug.cgi?id=61687

        Turn off accelerated compositing for media and plugins when in texture-mapper.

        * Api/qwebsettings.cpp:
        (QWebSettingsPrivate::apply):

2011-05-28  Adam Barth  <abarth@webkit.org>

        Reviewed by Alexey Proskuryakov.

        Audit all uses of KURL::prettyURL
        https://bugs.webkit.org/show_bug.cgi?id=61201

        Update callers of prettyURL to just call string.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::mouseDidMoveOverElement):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::updateGlobalHistory):
        (WebCore::FrameLoaderClientQt::cancelledError):
        (WebCore::FrameLoaderClientQt::blockedError):
        (WebCore::FrameLoaderClientQt::objectContentType):
        (WebCore::FrameLoaderClientQt::createPlugin):

2011-05-27  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Csaba Osztrogonác.

        [Qt] Fix tst_QGraphicsWebView::setPalette(inactiveBG) autotest
        https://bugs.webkit.org/show_bug.cgi?id=61044

        Make sure to set the active window on the application too.

        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView::setPalette):

2011-05-26  Alexis Menard  <alexis.menard@openbossa.org>

        Unreviewed build fix for Qt and QuickTime backend.

        r87328 added a new system interface, we need to add it too.

        * WebCoreSupport/WebSystemInterface.mm:
        (InitWebCoreSystemInterface):

2011-05-25  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] JSC bridge: implement __qt_sender__ without using Scope Chain
        https://bugs.webkit.org/show_bug.cgi?id=61343

        Create a '__qt_sender__' property in the global object, that returns the top of
        the qtSenderStack. This is an alternative implementation for the feature of
        providing a way for a function (acting as a Qt 'slot') discover which object
        emitted the signal that caused it to be executed.

        This reduces the coupling of the Qt bridge and JSC internal implementation. The
        patch tries to use as much JSC public API as possible.

        This behavior is covered by the tst_QWebFrame::connectAndDisconnect() auto test.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidClearWindowObjectInWorld):
        Instead of emitting the QWebPage::javaScriptWindowObjectCleared() directly, calls
        a QWebPagePrivate function to do it.

        * Api/qwebframe_p.h:
        * Api/qwebframe.cpp:
        (QWebFramePrivate::didClearedWindowObject):
        Before emitting the signal mentioned, adds the '__qt_sender__' to the fresh
        global object.

        (qtSenderCallback):
        Returns the JSObjectRef corresponding to the top of qtSenderStack.

        (QWebFramePrivate::addQtSenderToGlobalObject):
        Create a property with a qtSenderCallback as getter function in the global object.

2011-05-25  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Eric Carlson.

        [Qt] Enable usage of QuickTime mediaplayer for the Qt port on Mac.
        https://bugs.webkit.org/show_bug.cgi?id=61279

        Enable the usage of QuickTime backend for the Qt port. It can be enabled by
        passing DEFINES+=USE_QTKIT=1 when calling build-webkit.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * QtWebKit.pro:
        * WebCoreSupport/FullScreenVideoQt.cpp:
        (WebCore::FullScreenVideoQt::enterFullScreenForNode):
        (WebCore::FullScreenVideoQt::requiresFullScreenForVideoPlayback):
        (WebCore::FullScreenVideoQt::isValid):
        * WebCoreSupport/WebSystemInterface.h: Added.
        * WebCoreSupport/WebSystemInterface.mm: Added.
        (InitWebCoreSystemInterface):

2011-05-25  Qi Zhang  <qi.2.zhang@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] fast/css/disabled-author-styles.html failed
        https://bugs.webkit.org/show_bug.cgi?id=61438

        Provided API setAuthorAndUserStylesEnabled for DumpRenderTree.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setAuthorAndUserStylesEnabled):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-05-24  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Add FIXME comments about removing FrameLoader::isProcessingUserGesture
        https://bugs.webkit.org/show_bug.cgi?id=61395

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (drtPrintFrameUserGestureStatus):

2011-05-23  Luiz Agostini  <luiz.agostini@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] When opening a combo-box the popup renders badly.
        https://bugs.webkit.org/show_bug.cgi?id=61288

        Removing combobox palette changes from QtFallbackWebPopup::show() because they
        are causing rendering problems for some styles.

        The changes in palette are not needed because the background and foreground
        colors are already set by QStandardItem::setBackground() and QStandardItem::setForeground()
        in method QtFallbackWebPopup::populate().

        * WebCoreSupport/QtFallbackWebPopup.cpp:
        (WebCore::QtFallbackWebPopup::show):

2011-05-23  Joe Wild  <joseph.wild@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] The Qt WebKit Symbian .def file needs to be updated so Symbian will build
        https://bugs.webkit.org/show_bug.cgi?id=61200

        * symbian/eabi/QtWebKitu.def:

2011-05-22  Hui Huang  <hui.2.huang@nokia.com>, Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] Upstream Symbian platform plugin
        https://bugs.webkit.org/show_bug.cgi?id=58435

        Upstream Symbian platform plugin with html5 video player.

        * symbian/platformplugin/HTML5VideoPlugin.cpp: Added.
        (HTML5FullScreenVideoHandler::HTML5FullScreenVideoHandler):
        (HTML5FullScreenVideoHandler::enterFullScreen):
        (HTML5FullScreenVideoHandler::exitFullScreen):
        (HTML5FullScreenVideoHandler::onPlayerError):
        (HTML5FullScreenVideoHandler::onPlayerStateChanged):
        (HTML5FullScreenVideoHandler::onMediaStatusChanged):
        (HTML5VideoPlugin::supportsExtension):
        (HTML5VideoPlugin::createExtension):
        * symbian/platformplugin/HTML5VideoPlugin.h: Added.
        (HTML5FullScreenVideoHandler::requiresFullScreenForVideoPlayback):
        (HTML5FullScreenVideoHandler::isFullScreen):
        (HTML5FullScreenVideoHandler::updateScreenRect):
        * symbian/platformplugin/HTML5VideoWidget.cpp: Added.
        (HTML5VideoWidget::HTML5VideoWidget):
        (HTML5VideoWidget::setDuration):
        (HTML5VideoWidget::mousePressEvent):
        (HTML5VideoWidget::onPlayerStopped):
        (HTML5VideoWidget::onPlayerError):
        (HTML5VideoWidget::onEndOfMedia):
        (HTML5VideoWidget::onBufferingMedia):
        (HTML5VideoWidget::onBufferedMedia):
        (HTML5VideoWidget::onControlClicked):
        (HTML5VideoWidget::onPositionChanged):
        (HTML5VideoWidget::onSliderMoved):
        (HTML5VideoWidget::onCloseClicked):
        (HTML5VideoWidget::showFullScreen):
        (HTML5VideoWidget::setVolume):
        * symbian/platformplugin/HTML5VideoWidget.h: Added.
        * symbian/platformplugin/OverlayWidget.cpp: Added.
        (OverlayWidget::OverlayWidget):
        (OverlayWidget::~OverlayWidget):
        (OverlayWidget::setDuration):
        (OverlayWidget::setPosition):
        (OverlayWidget::setVolume):
        (OverlayWidget::mousePressEvent):
        (OverlayWidget::onPlayerStopped):
        (OverlayWidget::onPlayerError):
        (OverlayWidget::onEndOfMedia):
        (OverlayWidget::onBufferingMedia):
        (OverlayWidget::onBufferedMedia):
        (OverlayWidget::timeToString):
        (OverlayWidget::applyStyleSheet):
        (OverlayWidget::onControlClicked):
        (OverlayWidget::onSliderMoved):
        (OverlayWidget::onSoundClicked):
        (OverlayWidget::onCloseClicked):
        (OverlayWidget::onVolumeSliderReleased):
        (OverlayWidget::onVolumeSliderMoved):
        (OverlayWidget::onTimerTimeout):
        (OverlayWidget::showFullScreen):
        * symbian/platformplugin/OverlayWidget.h: Added.
        * symbian/platformplugin/PlayerButton.cpp: Added.
        (PlayerButton::PlayerButton):
        (PlayerButton::event):
        * symbian/platformplugin/PlayerButton.h: Added.
        * symbian/platformplugin/PlayerLabel.cpp: Added.
        (PlayerLabel::PlayerLabel):
        (PlayerLabel::onPlayerError):
        (PlayerLabel::startBufferingAnimation):
        (PlayerLabel::stopBufferingAnimation):
        (PlayerLabel::onAnimationTimeout):
        * symbian/platformplugin/PlayerLabel.h: Added.
        * symbian/platformplugin/WebPlugin.cpp:
        (WebPlugin::createExtension):
        * symbian/platformplugin/images: Added.
        * symbian/platformplugin/images/button_cannotplay.png: Added.
        * symbian/platformplugin/images/button_close.png: Added.
        * symbian/platformplugin/images/button_pause.png: Added.
        * symbian/platformplugin/images/button_play.png: Added.
        * symbian/platformplugin/images/button_sound_off.png: Added.
        * symbian/platformplugin/images/button_sound_on.png: Added.
        * symbian/platformplugin/images/loading_buffering_1.png: Added.
        * symbian/platformplugin/images/loading_buffering_2.png: Added.
        * symbian/platformplugin/images/loading_buffering_3.png: Added.
        * symbian/platformplugin/images/loading_buffering_4.png: Added.
        * symbian/platformplugin/platformplugin.pro:
        * symbian/platformplugin/platformplugin.qrc: Added.
        * symbian/platformplugin/qss: Added.
        * symbian/platformplugin/qss/OverlayWidget.qss: Added.

2011-05-22  Robert Hogan  <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        Fix policyDelegate in Qt DRT

        https://bugs.webkit.org/show_bug.cgi?id=61247
        
        Use the 'policy delegate' implemented in FrameLoaderClient
        for layout tests. The partial implementation in DumpRenderTreeQt
        is redundant.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForNavigationAction):

2011-05-22  Andrew Wason  <rectalogic@rectalogic.com>

        Reviewed by Benjamin Poulain.

        [Qt] Implement toImageData() in QtWebKit Bridge
        https://bugs.webkit.org/show_bug.cgi?id=60897

        * docs/qtwebkit-bridge.qdoc:
        * docs/webkitsnippets/qtwebkit_bridge_snippets.cpp:
        (wrapInFunction):
         Document Qt bridge toImageData() feature.
        * tests/hybridPixmap/test.html:
        * tests/hybridPixmap/widget.cpp:
        (Widget::Widget):
        (Widget::abcImage):
        * tests/hybridPixmap/widget.h:
         Add tests for Qt bridge toImageData() feature.

2011-05-20  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Sam Weinig.

        numberOfActiveAnimations() can include animations from documents in the page cache
        https://bugs.webkit.org/show_bug.cgi?id=53641

        Pass the Frame's document as the one to count animations on.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::numberOfActiveAnimations):

2011-05-20  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] tst_QWebElement::style() fails because QWebElement::InlineStyle doesn't work as expected
        https://bugs.webkit.org/show_bug.cgi?id=60372

        * tests/qwebelement/tst_qwebelement.cpp: Mark failing test case as expected fail.
        (tst_QWebElement::style):

2011-05-20  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] Fix tst_QDeclarativeWebView::basicProperties() and historyNav() autotests
        https://bugs.webkit.org/show_bug.cgi?id=61042

        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp: Mark failing test cases as expected fails.
        (tst_QDeclarativeWebView::basicProperties):
        (tst_QDeclarativeWebView::historyNav):

2011-05-20  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] Fix tst_QWebPage::testOptionalJSObjects() autotest
        https://bugs.webkit.org/show_bug.cgi?id=61045

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::testOptionalJSObjects): Mark failing test cases as expected fails.

2011-05-20  Peter Varga  <pvarga@webkit.org>

        Reviewed by Simon Hausmann.

        [Qt][V8] Use qtscript-staging's shipped version of V8 when building with --v8
        https://bugs.webkit.org/show_bug.cgi?id=56649

        Use the provided V8 and functionality of
        http://qt.gitorious.org/+qt-developers/qt/qtscript-staging to build QtWebKit+V8.
        Based on the original patch of Andras Becsi <abecsi@webkit.org>.

        * Api/qwebframe.cpp:
        (QWebFrame::addToJavaScriptWindowObject): Fix QString deprecated
        warning.
        * QtWebKit.pro: Adding the V8 library should happen in the final build
        step.
        * WebCoreSupport/ChromeClientQt.cpp: Add missing head.
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp: Ditto.

2011-05-20  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt]Fix tst_QWebFrame::setUrlToInvalid() autotest after r84762
        https://bugs.webkit.org/show_bug.cgi?id=59345

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::setUrlToInvalid): Mark failing test cases as expected fails.

2011-05-19  Zsolt Fehér  <h490267@stud.u-szeged.hu>

        Reviewed by Csaba Osztrogonác.

        [Qt] Implement eventSender.scalePageBy
        https://bugs.webkit.org/show_bug.cgi?id=60015

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::scalePageBy):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-05-18  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] Enterkey to go to Newline does not work in the text area(in HTML form)
        https://bugs.webkit.org/show_bug.cgi?id=33179

        Remove the implementation of the handleInputMethodKeydown, which introduces
        a regression(r82243) on Linux. Also, add more Api tests for the EnterKey event.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::handleInputMethodKeydown): Remove implementation.
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::inputMethods): Add more tests.

2011-05-18  Kristóf Kosztyó  <Kosztyo.Kristof@stud.u-szeged.hu>

        Reviewed by Csaba Osztrogonác.

        [Qt] Implement layoutTestController.setValueForUser()
        https://bugs.webkit.org/show_bug.cgi?id=60956

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setValueForUser):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-05-16  Robert Hogan  <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        plugins/invalidate_rect.html fails on linux ports

        Add ChromeClientQt::allowsAcceleratedCompositing().

        https://bugs.webkit.org/show_bug.cgi?id=54051

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::allowsAcceleratedCompositing):
        * WebCoreSupport/ChromeClientQt.h:

2011-05-17  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] Simplify syntax in test code to make prepare-ChangeLog less confused
        https://bugs.webkit.org/show_bug.cgi?id=60978

        Backslash to escape newlines was confusing both prepare-ChangeLog and the
        QtCreator highlight system.

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::evalJSV):
        Remove usage of backslash to escape newlines in string literal.

2011-05-17  Young Han Lee  <joybro@company100.net>

        Reviewed by Csaba Osztrogonác.

        [Texmap][Qt] Enable strict PassOwnPtr for Qt with texmap enabled.
        https://bugs.webkit.org/show_bug.cgi?id=60947

        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQWidget::setRootGraphicsLayer):

2011-05-16  Jon Lee  <jonlee@apple.com>

        Reviewed by Simon Fraser.

        Can't horizontally scroll iframes and overflow because wheel events are always accepted
        https://bugs.webkit.org/show_bug.cgi?id=60779

        * WebCoreSupport/ChromeClientQt.h:
        (WebCore::ChromeClientQt::shouldRubberBandInDirection): Default impl of new ChromeClient method
        (WebCore::ChromeClientQt::numWheelEventHandlersChanged): Default impl of new ChromeClient method

2011-05-16  Andreas Kling  <kling@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        REGRESSION(r83820): [Qt] Accelerated compositing no longer works in QGraphicsWebView.
        https://bugs.webkit.org/show_bug.cgi?id=60892

        Don't set the ItemClipsChildrenToShape flag for the root platform layer,
        since that is now the overflow controls layer. The clip layer, which was
        previously the root platform layer, already gets the flag by way of
        the GraphicsLayer mask-to-bounds flag.

        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::PageClientQGraphicsWidget::setRootGraphicsLayer):

2011-05-16  Adam Barth  <abarth@webkit.org>

        Partial revert of r86537.  FullScreenVideoQt.h can't depend on OwnPtr.h
        because moc_FullScreenVideoQt.cpp fails to include config.h.
        Apparently, having moc_FullScreenVideoQt.cpp properly include config.h
        is hard, so we're going back to manual new and delete for this class.
        Bad times.

        * WebCoreSupport/FullScreenVideoQt.cpp:
        (WebCore::FullScreenVideoQt::FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::~FullScreenVideoQt):
        * WebCoreSupport/FullScreenVideoQt.h:

2011-05-16  Adam Barth  <abarth@webkit.org>

        Sigh.  This code is somewhat crazy.

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::openInspectorFrontend):

2011-05-16  Adam Barth  <abarth@webkit.org>

        Attempt to fix Qt build.  (Strict PassOwnPtr fix.)

        This patch requires some slightly fancy footwork.

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::openInspectorFrontend):
        (WebCore::InspectorFrontendClientQt::InspectorFrontendClientQt):

2011-05-16  Adam Barth  <abarth@webkit.org>

        Missing include.

        * WebCoreSupport/PopupMenuQt.h:

2011-05-16  Adam Barth  <abarth@webkit.org>

        [Qt] QtPlatformPlugin create methods should use PassOwnPtr
        https://bugs.webkit.org/show_bug.cgi?id=60873

        This change is slightly more than a build fix because the patch kind of
        spidered a bit while I was trying to fix the build the "right way."
        Hopefully nothing here is controversial.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::adjustPointForClicking):
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::createSelectPopup):
        * WebCoreSupport/FullScreenVideoQt.cpp:
        (WebCore::FullScreenVideoQt::FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::~FullScreenVideoQt):
        * WebCoreSupport/FullScreenVideoQt.h:
        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationWrapper::NotificationWrapper):
        (WebCore::NotificationPresenterClientQt::displayNotification):
        * WebCoreSupport/PopupMenuQt.cpp:
        (WebCore::PopupMenuQt::PopupMenuQt):
        (WebCore::PopupMenuQt::~PopupMenuQt):
        (WebCore::PopupMenuQt::show):
        * WebCoreSupport/PopupMenuQt.h:
        * WebCoreSupport/QtPlatformPlugin.cpp:
        (WebCore::QtPlatformPlugin::createSelectInputMethod):
        (WebCore::QtPlatformPlugin::createNotificationPresenter):
        (WebCore::QtPlatformPlugin::createHapticFeedbackPlayer):
        (WebCore::QtPlatformPlugin::createTouchModifier):
        (WebCore::QtPlatformPlugin::createFullScreenVideoHandler):
        * WebCoreSupport/QtPlatformPlugin.h:
        (WebCore::QtPlatformPlugin::QtPlatformPlugin):

2011-05-15  Adam Barth  <abarth@webkit.org>

        Attempt to fix the Qt build.  (Strict PassOwnPtr fix.)

        * Api/qgraphicswebview.cpp:
        (QGraphicsWebViewPrivate::detachCurrentPage):
        (QGraphicsWebView::setPage):
        * Api/qwebpage.cpp:
        (QWebPage::setView):

2011-05-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r86504.
        http://trac.webkit.org/changeset/86504
        https://bugs.webkit.org/show_bug.cgi?id=60853

        "Broke Qt EventSender in editing/selection tests" (Requested
        by mwenge on #webkit).

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-05-12  Robert Hogan  <robert@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] fix http/tests/plugins/plugin-document-has-focus.html
        https://bugs.webkit.org/show_bug.cgi?id=60722

        QWebPage::setView() will display the browser window, so
        implement a private version that does just enough to 
        satisfy EventSender's requirement to install an event
        filter on a page's web view.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setView):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-05-13  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r86447.
        http://trac.webkit.org/changeset/86447
        https://bugs.webkit.org/show_bug.cgi?id=60809

        "Broke some uses of EventSender object on Qt" (Requested by
        mwenge on #webkit).

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-05-13  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Prune #includes from FrameView.h (Part 2)
        https://bugs.webkit.org/show_bug.cgi?id=60748

        - Update files that were depending on FrameView.h #including Frame.h or
          Page.h.

        * Api/qgraphicswebview.cpp:
        * WebCoreSupport/ChromeClientQt.cpp:

2011-05-13  Robert Hogan  <robert@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] fix http/tests/plugins/plugin-document-has-focus.html
        https://bugs.webkit.org/show_bug.cgi?id=60722

        QWebPage::setView() will display the browser window, so
        implement a private version that does just enough to 
        satisfy EventSender's requirement to install an event
        filter on a page's web view.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setView):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-05-11  Jocelyn Turcotte  <jocelyn.turcotte@nokia.com>

        Reviewed by nobody, build fix.

        [Qt] Fix build on MSVC.

        qobject_cast<> requires the class to be exported on MSVC,
        removing it since the code that needs it is commented out for
        the same reason.

        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        (tst_QDeclarativeWebView::elementAreaAt):

2011-05-11  Jocelyn Turcotte  <jocelyn.turcotte@nokia.com>

        Reviewed by nobody, build fix.

        [Qt] Fix build on MSVC by only enabling tst_MIMESniffing on linux.

        * tests/tests.pro:

2011-05-12  Young Han Lee  <joybro@company100.net>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Implement layoutTestController.layerTreeAsText()
        https://bugs.webkit.org/show_bug.cgi?id=60367

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::layerTreeAsText):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-05-11  Noam Rosenthal  <noam.rosenthal@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Texmap][Qt] Upstream texture-mapper changes from Qt's WebKit2 branch
        https://bugs.webkit.org/show_bug.cgi?id=60439

        Patch 10/12: Glue the TextureMapper refactoring into Webkit(1).
        1. Pass a GraphicsLayer* instead of a PlatformLayer* to the QWebPageClient.
        2. Set parameters in TextureMapper/TextureMapperNode instead of passing them in an options argument.
        3. Rename PlatformLayerProxyQt to TextureMapperNodeClient

        * Api/qwebframe.cpp:
        (QWebFramePrivate::renderCompositedLayers):
        * Api/qwebframe.h:
        * Api/qwebframe_p.h:
        (QWebFramePrivate::QWebFramePrivate):
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::attachRootGraphicsLayer):
        * WebCoreSupport/PageClientQt.cpp:
        (WebCore::TextureMapperNodeClientQt::TextureMapperNodeClientQt):
        (WebCore::TextureMapperNodeClientQt::scroll):
        (WebCore::TextureMapperNodeClientQt::setTextureMapper):
        (WebCore::TextureMapperNodeClientQt::~TextureMapperNodeClientQt):
        (WebCore::TextureMapperNodeClientQt::computeLastModifiedRect):
        (WebCore::TextureMapperNodeClientQt::syncRootLayer):
        (WebCore::TextureMapperNodeClientQt::rootNode):
        (WebCore::PageClientQWidget::setRootGraphicsLayer):
        (WebCore::PageClientQWidget::syncLayers):
        (WebCore::PageClientQWidget::~PageClientQWidget):
        (WebCore::PageClientQGraphicsWidget::~PageClientQGraphicsWidget):
        (WebCore::PageClientQGraphicsWidget::update):
        (WebCore::PageClientQGraphicsWidget::syncLayers):
        (WebCore::PageClientQGraphicsWidget::setRootGraphicsLayer):
        (WebCore::PageClientQGraphicsWidget::markForSync):
        * WebCoreSupport/PageClientQt.h:
        (WebCore::PageClientQWidget::PageClientQWidget):
        (WebCore::PageClientQGraphicsWidget::PageClientQGraphicsWidget):
        (WebCore::PageClientQGraphicsWidget::syncLayersTimeout):


2011-05-11  Noam Rosenthal  <noam.rosenthal@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Texmap][Qt] Upstream texture-mapper changes from Qt's WebKit2 branch
        https://bugs.webkit.org/show_bug.cgi?id=60439

        Patch 4/12: Update the settings to enable accelerated compositing for all the relevant settings
        attributes.

        * Api/qwebsettings.cpp:
        (qt_networkAccessAllowed):
        (QWebSettingsPrivate::apply):

2011-05-11  Sam Weinig  <sam@webkit.org>

        Reviewed by Eric Seidel.

        Stop including Console.h just to get Console enum types
        https://bugs.webkit.org/show_bug.cgi?id=60607

        Move MessageSource, MessageType and MessageLevel into its own
        header and cleanup surrounding classes.

        * Api/qwebelement.cpp:

2011-05-10  Ademar de Souza Reis Jr.  <ademar.reis@openbossa.org>

        Reviewed by Csaba Osztrogonác.

        [Qt] Increment QtWebKit trunk version to 4.10.0
        https://bugs.webkit.org/show_bug.cgi?id=60549

        QtWebKit-2.2 (branched) will be 4.9.0, so we need to
        increase the trunk version by 1.

        * qt_webkit_version.pri:

2011-05-10  Ademar de Souza Reis Jr.  <ademar.reis@openbossa.org>

        Reviewed by Csaba Osztrogonác.

        [Qt] tst_QWebPage creates temporary files in the current working dir
        https://bugs.webkit.org/show_bug.cgi?id=60497

        tst_QWebPage was using QDir::currentPath when creating temporary dirs
        and leaving them after the test was run. I basically borrowed the fix
        from tst_QDeclarativeWebView.

        * tests/qwebpage/tst_qwebpage.cpp:
        (removeRecursive):
        (tst_QWebPage::tmpDirPath):
        (tst_QWebPage::cleanupFiles):
        (tst_QWebPage::database):
        (tst_QWebPage::multiplePageGroupsAndLocalStorage):

2011-05-09  Chang Shu  <cshu@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] DumpRenderTreeQt needs an implementation of unmarkText
        https://bugs.webkit.org/show_bug.cgi?id=60499

        The implementation is similar to gtk.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::confirmComposition):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-05-07  Joe Mason  <jmason@rim.com>

        Reviewed by Daniel Bates.

        FrameLoader::isProcessingUserGesture is wrong in dispatchWillPerformClientRedirect
        https://bugs.webkit.org/show_bug.cgi?id=52211

        Dump isUserProcessingGesture in willPerformClientRedirect so that the layout tests can be extended.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchWillPerformClientRedirect):

2011-05-06  Kent Tamura  <tkent@chromium.org>

        Reviewed by Ryosuke Niwa.

        Eliminate WebCore/dom/InputElement.{cpp,h}
        https://bugs.webkit.org/show_bug.cgi?id=60262

        * Api/qwebpage.cpp:
        (QWebPage::inputMethodQuery):
          Replace InputElement::s_maximumLength with HTMLInputElement::maximumLength.
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setAutofilled):
          Follow the return type change of Node::toInputElement().

2011-05-04  Philippe Normand  <pnormand@igalia.com>

        Reviewed by Dimitri Glazkov.

        Implement LayoutTestController::pseudoShadowId()
        https://bugs.webkit.org/show_bug.cgi?id=60034

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::shadowPseudoId):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-05-05  Prasanth Ullattil  <prasanth.ullattil@nokia.com>

        Reviewed by Simon Hausmann.

        Install correct header files for webkit.

        Since WebKit is no longer inside Qt, we can remove the detection for
        that.

        [Qt] Install targets are not working correctly for modularized Qt and QtWebkit
        https://bugs.webkit.org/show_bug.cgi?id=57621

        * QtWebKit.pro:

2011-05-05  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Eric Seidel.

        Rename SelectionController to FrameSelection
        https://bugs.webkit.org/show_bug.cgi?id=60234

        * Api/qwebframe.cpp:

2011-05-05  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] RenderThemeQt and DumpRenderTreeSupportQt should use nullptr rather than 0.
        https://bugs.webkit.org/show_bug.cgi?id=60224

        We should use nullptr rather than 0. nullptr will be added in the new C++ standard
        but WebKit already has a nullptr class if there is no c++0x support.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::addUserStyleSheet):

2011-05-04  Cris Neckar  <cdn@chromium.org>

        Reviewed by Adam Barth.

        Expose WebView directly through ChromeClient.
        https://bugs.webkit.org/show_bug.cgi?id=49902

        * WebCoreSupport/ChromeClientQt.h:
        (WebCore::ChromeClientQt::webView):

2011-05-04  Alexis Menard  <alexis.menard@openbossa.org>

        Unreviewed warning fix.

        The variable is just unused.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::inputMethods):

2011-05-04  Tao Bai  <michaelbai@chromium.org>

        Reviewed by David Kilzer.

        Populate touch-icon url to FrameLoaderClient
        https://bugs.webkit.org/show_bug.cgi?id=59143

        Respect the interface change in FrameLoaderClient.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidChangeIcons):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-03-31  Luiz Agostini  <luiz.agostini@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Qt WebKit updates view on HTTP 204 response
        https://bugs.webkit.org/show_bug.cgi?id=42529

        Ignoring http responses which have status code equal to 204 (No Content)
        or 205 (Reset Content).

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForResponse):

2011-05-04  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Benjamin Poulain.

        [Qt] Fix signals emitted in FakeReply used in autotests
        https://bugs.webkit.org/show_bug.cgi?id=60049

        The signals emitted for each case of FakeReply were swapped (error case
        emitting metaDataChanged() and redirect case emitting error()). Emitting
        readyRead() is not necessary.

        * tests/qwebframe/tst_qwebframe.cpp:
        (FakeReply::FakeReply):
        Choose the different continue function for each case of FakeReply. This removes
        the need of the if-statement in timeout() and let us replace timeout() with two
        simpler functions.

        (FakeReply::continueRedirect):
        (FakeReply::continueError):
        Continuation cases, emitting the minimal set of signals needed for each case.

2011-05-03  Julien Chaffraix  <jchaffraix@codeaurora.org>

        Reviewed by Dimitri Glazkov.

        Element:shadowRoot & Element::ensureShadowRoot should return ShadowRoot*
        https://bugs.webkit.org/show_bug.cgi?id=58703

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::shadowRoot): Added #include for ShadowRoot.h.

2011-05-03  Keith Kyzivat  <keith.kyzivat@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] QtDeclarative Webview element has a fixed white background
        https://bugs.webkit.org/show_bug.cgi?id=40918

        QProperty REVISION feature is not present in certain Qt Trunk clones.
        These builds report their version as 4.8.0, and therefore break on the
        prior #if QT_VERSION >= 0x040704.  The proper fix is to check based on
        the existance of Q_REVISION.

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):
        * declarative/qdeclarativewebview.cpp:
        * declarative/qdeclarativewebview_p.h:

2011-05-01  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Prune some unnecessary #includes
        https://bugs.webkit.org/show_bug.cgi?id=59895

        Start getting rid of unnecessary #includes and forward declares.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:

2011-04-29  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Adam Barth.

        Enable strict OwnPtr for Qt
        https://bugs.webkit.org/show_bug.cgi?id=59667

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):

2011-04-29  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Simon Hausmann.

        ENABLE(QT_BEARER) -> USE(QT_BEARER)

        * Api/qwebsettings.cpp:

2011-04-29  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Simon Hausmann.

        ENABLE(QT_USERAGENT_DEVICEMODEL) -> USE(QT_MOBILITY_SYSTEMINFO)

        * Api/qwebpage.cpp:

2011-04-28  Yael Aharon  <yael.aharon@nokia.com>

        Reviewed by Andreas Kling.

        Remove flag ENABLE_SYMBIAN_DIALOG_PROVIDER
        https://bugs.webkit.org/show_bug.cgi?id=59704

        * WebCoreSupport/QtFallbackWebPopup.cpp:
        (WebCore::QtFallbackWebPopup::show):
        * WebCoreSupport/QtFallbackWebPopup.h:

2011-04-27  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Upstream Symbian platform plugin
        https://bugs.webkit.org/show_bug.cgi?id=58435

        Upstream Symbian platform plugin.

        * QtWebKit.pro: Add platformplugin.dll to the QtWebKit.sis.
        * symbian/platformplugin: Added.
        * symbian/platformplugin/WebPlugin.cpp: Added.
        (ItemListDelegate::ItemListDelegate):
        (ItemListDelegate::paint):
        (Popup::Popup):
        (Popup::resizeEvent):
        (Popup::populateList):
        (Popup::onItemSelected):
        (Popup::updateSelectionsBeforeDialogClosing):
        (Popup::updateAndClose):
        (WebPopup::WebPopup):
        (WebPopup::~WebPopup):
        (WebPopup::createSingleSelectionPopup):
        (WebPopup::createMultipleSelectionPopup):
        (WebPopup::createPopup):
        (WebPopup::show):
        (WebPopup::hide):
        (WebPopup::popupClosed):
        (WebPopup::itemClicked):
        (SingleSelectionPopup::SingleSelectionPopup):
        (MultipleSelectionPopup::MultipleSelectionPopup):
        (WebNotificationPresenter::showNotification):
        (WebPlugin::supportsExtension):
        (WebPlugin::createExtension):
        * symbian/platformplugin/WebPlugin.h: Added.
        (Popup::preSelectedIndices):
        (Popup::listWidget):
        (WebNotificationPresenter::WebNotificationPresenter):
        (WebNotificationPresenter::~WebNotificationPresenter):
        * symbian/platformplugin/platformplugin.pro: Added.
        * symbian/platformplugin/qwebkitplatformplugin.h: Copied from WebKit/qt/Api/qwebkitplatformplugin.h.
        (QWebSelectData::~QWebSelectData):
        (QWebSelectMethod::~QWebSelectMethod):
        (QWebNotificationData::~QWebNotificationData):
        (QWebNotificationPresenter::QWebNotificationPresenter):
        (QWebNotificationPresenter::~QWebNotificationPresenter):
        (QWebTouchModifier::~QWebTouchModifier):
        (QWebFullScreenVideoHandler::QWebFullScreenVideoHandler):
        (QWebFullScreenVideoHandler::~QWebFullScreenVideoHandler):
        (QWebKitPlatformPlugin::~QWebKitPlatformPlugin):

2011-04-26  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Tor Arne Vestbø.

        [Qt][Symbian] Fix Api test failure -- tst_QWebFrame::setHtmlWithBaseURL  
        https://bugs.webkit.org/show_bug.cgi?id=56946

        Deployed the missing resource for Symbian platform.

        * tests/qwebframe/qwebframe.pro:

2011-04-26  Siddharth Mathur  <siddharth.mathur@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] Build fix: QtDeclarative Webview element has a fixed white background
        https://bugs.webkit.org/show_bug.cgi?id=40918

        Macro Q_REVISION and associated qdeclarativeitem.h signals are not available in 4.7.3 headers in Nokia Qt SDK.

        * declarative/plugin.cpp: Bump up required version to 4.7.4+
        (WebKitQmlPlugin::registerTypes):
        * declarative/qdeclarativewebview.cpp: ditto
        * declarative/qdeclarativewebview_p.h: ditto
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp: ditto

2011-04-26  Kristóf Kosztyó  <Kosztyo.Kristof@stud.u-szeged.hu>

        Reviewed by Csaba Osztrogonác.

        [Qt] Implement LayoutTestController::setAutofilled
        https://bugs.webkit.org/show_bug.cgi?id=59439

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setAutofilled):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-04-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r84627.
        http://trac.webkit.org/changeset/84627
        https://bugs.webkit.org/show_bug.cgi?id=59271

        It broke Symbian build (Requested by Ossy on #webkit).

        * QtWebKit.pro:
        * symbian/platformplugin/WebPlugin.cpp: Removed.
        * symbian/platformplugin/WebPlugin.h: Removed.
        * symbian/platformplugin/platformplugin.pro: Removed.
        * symbian/platformplugin/qwebkitplatformplugin.h: Removed.

2011-04-22  Sam Weinig  <sam@webkit.org>

        Fix qt build.

        * Api/qwebelement.cpp:
        (setupScriptContext):

2011-04-22  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Upstream Symbian platform plugin
        https://bugs.webkit.org/show_bug.cgi?id=58435

        Upstream Symbian platform plugin.

        * QtWebKit.pro: Add platformplugin.dll to the QtWebKit.sis.
        * symbian/platformplugin: Added.
        * symbian/platformplugin/WebPlugin.cpp: Added.
        (ItemListDelegate::ItemListDelegate):
        (ItemListDelegate::paint):
        (Popup::Popup):
        (Popup::resizeEvent):
        (Popup::populateList):
        (Popup::onItemSelected):
        (Popup::updateSelectionsBeforeDialogClosing):
        (Popup::updateAndClose):
        (WebPopup::WebPopup):
        (WebPopup::~WebPopup):
        (WebPopup::createSingleSelectionPopup):
        (WebPopup::createMultipleSelectionPopup):
        (WebPopup::createPopup):
        (WebPopup::show):
        (WebPopup::hide):
        (WebPopup::popupClosed):
        (WebPopup::itemClicked):
        (SingleSelectionPopup::SingleSelectionPopup):
        (MultipleSelectionPopup::MultipleSelectionPopup):
        (WebNotificationPresenter::showNotification):
        (WebPlugin::supportsExtension):
        (WebPlugin::createExtension):
        * symbian/platformplugin/WebPlugin.h: Added.
        (Popup::preSelectedIndices):
        (Popup::listWidget):
        (WebNotificationPresenter::WebNotificationPresenter):
        (WebNotificationPresenter::~WebNotificationPresenter):
        * symbian/platformplugin/platformplugin.pro: Added.
        * symbian/platformplugin/qwebkitplatformplugin.h: Copied from WebKit/qt/Api/qwebkitplatformplugin.h.
        (QWebSelectData::~QWebSelectData):
        (QWebSelectMethod::~QWebSelectMethod):
        (QWebNotificationData::~QWebNotificationData):
        (QWebNotificationPresenter::QWebNotificationPresenter):
        (QWebNotificationPresenter::~QWebNotificationPresenter):
        (QWebTouchModifier::~QWebTouchModifier):
        (QWebFullScreenVideoHandler::QWebFullScreenVideoHandler):
        (QWebFullScreenVideoHandler::~QWebFullScreenVideoHandler):
        (QWebKitPlatformPlugin::~QWebKitPlatformPlugin):

2011-04-21  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Sam Weinig.

        Add Frame* to the argument lists of canCopyCut and canPaste
        https://bugs.webkit.org/show_bug.cgi?id=59153

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::canCopyCut):
        (WebCore::EditorClientQt::canPaste):
        * WebCoreSupport/EditorClientQt.h:

2011-04-21  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Antonio Gomes.

        [Qt] Fix the style issue for Api/qwebkitplatformplugin.h
        https://bugs.webkit.org/show_bug.cgi?id=59097

        Fix the style issues for Api/qwebkitplatformplugin.h found by the webkit-check-style.

        * Api/qwebkitplatformplugin.h:

2011-04-21  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Csaba Osztrogonác.

        [Qt] REGRESSION(84057): It made 4 API tests fail
        https://bugs.webkit.org/show_bug.cgi?id=58848

        After MIME sniffing support was added, some autotests are failing because
        the sniffer doesn't recognize our HTML pages.

        This fixes tst_QWebPage::backActionUpdate(), tst_QWebPage::errorPageExtensionInFrameset()
        and tst_QWebFrame::horizontalScrollAfterBack().

        * tests/qwebframe/resources/testiframe.html:
        * tests/qwebframe/resources/testiframe2.html:
        Remove spurious </html> in beginning of the document.

        * tests/qwebpage/resources/framedindex.html:
        * tests/qwebpage/resources/index.html:
        Add <html> (and </html>) tags, <frameset> is not recognized by the sniffer as a
        possible starting tag for HTML document.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::errorPageExtensionInFrameset):
        Verify if we do have a main frame and the main frame has the children frames we
        expect. This will avoid crashing if for some reason children frames are not
        loaded.

2011-04-20  Dominic Cooney  <dominicc@chromium.org>

        Reviewed by Dimitri Glazkov.

        layoutTestController can create and destroy shadow DOM
        https://bugs.webkit.org/show_bug.cgi?id=59058

        Support for new methods in Qt DRT.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::ensureShadowRoot):
        (DumpRenderTreeSupportQt::removeShadowRoot):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-04-20  Balazs Kelemen  <kbalazs@webkit.org>

        Reviewed by Csaba Osztrogonác.

        [Qt] Cleanup includepath adjustment for generated files
        https://bugs.webkit.org/show_bug.cgi?id=58869

        * QtWebKit.pro: Revert the hacky fix in r84174. Remove
        unnecessary logic.

2011-04-19  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Andreas Kling.

        [Qt][Symbian] Fix Api test failure -- tst_QWebView::setPalette()
        https://bugs.webkit.org/show_bug.cgi?id=57254

        Skip test for setPalette() which doesn't work 
        when WTF_USE_QT_MOBILE_THEME is defined.

        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        * tests/qwebview/tst_qwebview.cpp:
        * tests/tests.pri:

2011-04-19  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt][Symbian] Fix Api test failure -- tst_QGraphicsWebView::widgetsRenderingThroughCache
        https://bugs.webkit.org/show_bug.cgi?id=58044

        Fixing this test by disabling the scrollbars on the graphics view 
        since QtWebKit handles scrolling and scrollbar automatically and correctly.

        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView::widgetsRenderingThroughCache):

2011-04-19  Igor Oliveira  <igor.oliveira@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] X11: Text selection is causing oncopy event to be called
        https://bugs.webkit.org/show_bug.cgi?id=58656

        Always when text is selected the oncopy event is fired, this behavior does
        not exist in Firefox or Chrome. Now, when selecting a text, QtWebKit
        is making multi part-copies (with rich text metadata), the multi-part
        data can be obtained by data transfer items interface when supported by QtWebKit.
        Also, copies to the clipboard of a selected image, is not supported by Chrome and
        Firefox and was removed from QtWebKit.


        * Api/qwebpage.cpp:
        (QWebPagePrivate::handleClipboard):

2011-04-18  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt][WK2] Unreviewed buildfix after r84174.

        * QtWebKit.pro: Missing includepath added.

2011-04-18  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt][Symbian] Fix Api test failure -- tst_QWebFrame::inputFieldFocus
        https://bugs.webkit.org/show_bug.cgi?id=57546

        Disable the fullscreen VKB when testing inputFieldFocus().

        * tests/qwebframe/tst_qwebframe.cpp:

2011-04-18  Andreas Kling  <kling@webkit.org>

        [Qt] DRT: Unreviewed test fix after r84168.
        
        Dump the original request KURL for blocked access attempts.
        Turns out converting it to a QUrl lower-cases the hostname.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchWillSendRequest):

2011-04-18  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] Fix Api tests for QWebPage on Symbian
        https://bugs.webkit.org/show_bug.cgi?id=56924

        Ignores the style attribute that selectedHtml() returns.

        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::cursorMovements):
        (tst_QWebPage::textSelection):
        (tst_QWebPage::findText):

2011-04-18  Andreas Kling  <kling@webkit.org>

        Reviewed by Adam Barth.

        REGRESSION (r84010): [Qt] DRT: Unbreak redirection of http:/ URLs.
        https://bugs.webkit.org/show_bug.cgi?id=58779

        KURL::host() doesn't return the host part of [broken] http:/ URLs, so use
        QUrl instead to match the behavior of other ports.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchWillSendRequest):

2011-04-18  Dominic Cooney  <dominicc@chromium.org>

        Reviewed by Andreas Kling.

        Add layoutTestController.shadowRoot to Qt DRT.
        https://bugs.webkit.org/show_bug.cgi?id=58759

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::shadowRoot): Added.
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-04-16  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] Autotest got missed in the handover of the QML WebView element
        https://bugs.webkit.org/show_bug.cgi?id=41449

        Importing WebView QML element test cases from Qt repository. I did some
        style modifications and simplifications in the original code but hopefully
        without changing the behavior.

        Tests that do not pass are marked with QEXPECT_FAIL or QSKIP. The two major
        issues currently are:

        - pixelCache() test checked the usage of pixel cache by using a subclass of
          QDeclarativeWebView. We can't do that right now because this class is not
          exported. We may need a Q_AUTOTEST_EXPORT thing for QtWebKit if we want
          this kind of test.
        - elementAtArea() test uses a function that is not exported. But in this case
          I think we should test it's user, the public method "heuristicZoom".

        * tests/qdeclarativewebview/resources/basic.html: Added.
        * tests/qdeclarativewebview/resources/basic.png: Added.
        * tests/qdeclarativewebview/resources/basic.qml: Added.
        * tests/qdeclarativewebview/resources/elements.html: Added.
        * tests/qdeclarativewebview/resources/elements.qml: Added.
        * tests/qdeclarativewebview/resources/forward.html: Added.
        * tests/qdeclarativewebview/resources/forward.png: Added.
        * tests/qdeclarativewebview/resources/javaScript.html: Added.
        * tests/qdeclarativewebview/resources/javaScript.qml: Added.
        * tests/qdeclarativewebview/resources/loadError.qml: Added.
        * tests/qdeclarativewebview/resources/newwindows.html: Added.
        * tests/qdeclarativewebview/resources/newwindows.qml: Added.
        * tests/qdeclarativewebview/resources/propertychanges.qml: Added.
        * tests/qdeclarativewebview/resources/sethtml.qml: Added.
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        (tst_QDeclarativeWebView::tmpDir):
        (strippedHtml):
        (fileContents):
        (removeRecursive):
        (tst_QDeclarativeWebView::cleanupTestCase):
        (tst_QDeclarativeWebView::basicProperties):
        (tst_QDeclarativeWebView::elementAreaAt):
        (tst_QDeclarativeWebView::historyNav):
        (callEvaluateJavaScript):
        (tst_QDeclarativeWebView::javaScript):
        (tst_QDeclarativeWebView::loadError):
        (tst_QDeclarativeWebView::multipleWindows):
        (tst_QDeclarativeWebView::newWindowComponent):
        (tst_QDeclarativeWebView::newWindowParent):
        (tst_QDeclarativeWebView::pressGrabTime):
        (tst_QDeclarativeWebView::renderingEnabled):
        (tst_QDeclarativeWebView::setHtml):
        (tst_QDeclarativeWebView::settings):
        (tst_QDeclarativeWebView::checkNoErrors):
        * tests/qdeclarativewebview/tst_qdeclarativewebview.qrc:

2011-04-08  Luiz Agostini  <luiz.agostini@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] QWebPage MIME type handling inconsistency with other web browsers
        https://bugs.webkit.org/show_bug.cgi?id=46968

        Implementing mime type sniffing based on
        http://tools.ietf.org/html/draft-abarth-mime-sniff-06.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::createNetworkingContext):
        * WebCoreSupport/FrameNetworkingContextQt.cpp:
        (WebCore::FrameNetworkingContextQt::FrameNetworkingContextQt):
        (WebCore::FrameNetworkingContextQt::create):
        (WebCore::FrameNetworkingContextQt::MIMESniffingEnabled):
        * WebCoreSupport/FrameNetworkingContextQt.h:
        * tests/MIMESniffing/MIMESniffing.pro: Added.
        * tests/MIMESniffing/TestData.h: Added.
        * tests/MIMESniffing/resources.qrc: Added.
        * tests/MIMESniffing/resources/application_atom+xml: Added.
        * tests/MIMESniffing/resources/application_ogg: Added.
        * tests/MIMESniffing/resources/application_pdf: Added.
        * tests/MIMESniffing/resources/application_postscript: Added.
        * tests/MIMESniffing/resources/application_rdf+xml: Added.
        * tests/MIMESniffing/resources/application_rss+xml: Added.
        * tests/MIMESniffing/resources/application_x-gzip: Added.
        * tests/MIMESniffing/resources/application_x-rar-compressed: Added.
        * tests/MIMESniffing/resources/application_zip: Added.
        * tests/MIMESniffing/resources/audio_x-wave: Added.
        * tests/MIMESniffing/resources/image_bmp: Added.
        * tests/MIMESniffing/resources/image_gif: Added.
        * tests/MIMESniffing/resources/image_jpeg: Added.
        * tests/MIMESniffing/resources/image_png: Added.
        * tests/MIMESniffing/resources/image_vnd.microsoft.icon: Added.
        * tests/MIMESniffing/resources/image_webp: Added.
        * tests/MIMESniffing/resources/text_html: Added.
        * tests/MIMESniffing/resources/text_xml: Added.
        * tests/MIMESniffing/resources/video_webm: Added.
        * tests/MIMESniffing/tst_MIMESniffing.cpp: Added.
        (tst_MIMESniffing::tst_MIMESniffing):
        (errorText):
        (tst_MIMESniffing::testCase1):
        * tests/tests.pro:

2011-04-15  Andreas Kling  <kling@webkit.org>

        Reviewed by Antonio Gomes.

        [Qt] DRT: Block access to external URLs.

        Implement the "Blocked access to external URL" behavior for Qt's DRT,
        based on what other ports are doing.

        Fixes <http://webkit.org/b/57306> and <http://webkit.org/b/58523>.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchWillSendRequest):

2011-01-26  Ragner Magalhaes  <ragner.magalhaes@openbossa.org>

        Reviewed by Antonio Gomes.

        [Qt] Web Inspector does not highlight elements
        https://bugs.webkit.org/show_bug.cgi?id=35125

        Adjust Web inspector to highlight elements on the page when the mouse
        hovers the element on DOM inspector.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::renderRelativeCoords):
        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::highlight):
        (WebCore::InspectorClientQt::hideHighlight):

2011-04-12  George Guo  <George.Guo@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] On Symbian got "Update Error" when installing QtWebkit.sis
        http://bugs.webkit.org/show_bug.cgi?id=58141

        If QtWebKit is already in Symbian ROM, we need package to be
        both SA and RU type

        * QtWebKit.pro:

2011-04-12  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] Private Q_SLOTS void orientationChanged() can't be in qwebframe.h public header file.
        https://bugs.webkit.org/show_bug.cgi?id=58251

        Fix an issue with slot names after http://trac.webkit.org/changeset/83512.

        * Api/qwebframe.cpp:
        (QWebFrame::QWebFrame):

2011-04-11  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Benjamin Poulain.

        [Qt] Private Q_SLOTS void orientationChanged() can't be in qwebframe.h public header file.
        https://bugs.webkit.org/show_bug.cgi?id=58251

        Qt coding conventions states that private slots should be located in private implementation of
        the class. This allows us to rename/delete the slots in the future without breaking anything.

        No new tests added, just a simple refactoring.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::_q_orientationChanged):
        * Api/qwebframe.h:
        * Api/qwebframe_p.h:

2011-04-11  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Sub-Frame content is not updated when scrolling in certain circumstances
        https://bugs.webkit.org/show_bug.cgi?id=50373

        Make sure that we invalidate the backing store when using TILED_BACKING_STORE
        and the page contains sub frames. This bug appears only when frame flattening is
        disabled and scrollable subframes.

        Original patch from Thomas Thrainer.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::invalidateWindow):

2011-04-11  Benjamin Poulain  <benjamin.poulain@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] HTML5 Drag and Drop demos not working
        https://bugs.webkit.org/show_bug.cgi?id=56486

        Handling the drop with JavaScript was not working with Qt because if the action is ignored
        in response to DragEnter, no further events are sent to the view.

        Drag and drop is defined and used differently by webpages. The drag move events are determining
        what action should take place. To adopt this behavior for Qt, we always accept drag enter events
        on the widget.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::dragEnterEvent):

2011-04-11  Andras Becsi  <abecsi@webkit.org>

        Reviewed by Andreas Kling.

        [Qt] REGRESSION(83122): tst_QWebElement::style() fails
        https://bugs.webkit.org/show_bug.cgi?id=58032

        According to the documentation of QWebElement the styleProperty method should
        not respect style inheritance and other CSS rules for the InlineStyle enum.

        r83122 fixed this behaviour.

        * tests/qwebelement/tst_qwebelement.cpp:
        (tst_QWebElement::style): Fix the expected color for QWebElement::InlineStyle.

2011-04-11  Andreas Kling  <andreas.kling@nokia.com>

        Build fix after r83436.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidReceiveResponse):

2011-04-11  Andreas Kling  <andreas.kling@nokia.com>

        Reviewed by Benjamin Poulain.

        [Qt] dumpResourceResponseMIMETypes shouldn't strip URL query string.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidReceiveResponse): Use KURL::lastPathComponent()
        for the dumpResourceResponseMIMETypes display string instead of QFileInfo::fileName().
        This is in line with the Mac port.

2011-04-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r83295.
        http://trac.webkit.org/changeset/83295
        https://bugs.webkit.org/show_bug.cgi?id=58144

        Broke 4 tests in QtWebKit (Requested by tonikitoo on #webkit).

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::handleInputMethodKeydown):

2011-04-08  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Antonio Gomes.

        [Qt]REGRESSION(r82243): fast/events/onsearch-enter.html fails
        https://bugs.webkit.org/show_bug.cgi?id=57472

        Avoid to insert new line for both keydown event & keypress event.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::handleInputMethodKeydown):

2011-04-07  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Benjamin Poulain.

        [Qt] QWebFrame::setUrl works only from second time if url fragment is present
        https://bugs.webkit.org/show_bug.cgi?id=32723

        When clearing the frame, instead of using the URL passed to QWebFrame::setUrl(),
        use an invalid URL (the begin() without arguments). Clearing the document
        with the same URL was causing problems when we had a fragment because it assume that
        only scrolling was enough and did not loaded the document again.

        When setUrl() is called but fails, url() is expected to return the requested value. The
        begin(url) guaranteed that before. This patch adds a member to track the URL, which is
        updated when the URL changes and also when setUrl() is called.

        KURL was used for the member so that when setUrl() is called, and then url() is checked
        before the page gets loaded, we perform the same conversion that will be performed by a
        successful load, e.g. add trailing '/' to an address. This behavior is checked by
        tst_QWebFrame::requestedUrl() test.

        For the record: the second QWebPage::setUrl() worked because the load was considered a
        FrameLoadTypeSame, and because of that, was not fit for just scrolling, a reload was
        needed. See FrameLoader::shouldScrollToAnchor() for details on this classification.

        * Api/qwebframe.cpp:
        (QWebFramePrivate::emitUrlChanged): update our URL member and emit the signal.
        (clearCoreFrame):
        (isCoreFrameClear):
        (QWebFrame::setUrl):
        (QWebFrame::url):
        (QWebFrame::baseUrl): look in the document for the baseURL since its contents can change
        the baseURL, e.g. by using the <base> tag.
        * Api/qwebframe_p.h:

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidChangeLocationWithinPage):
        (WebCore::FrameLoaderClientQt::dispatchDidCommitLoad):

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::setUrlWithFragment): unskip test.

2011-04-07  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        Build fix when using Phonon as a backend for the multimedia support.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::ChromeClientQt):
        (WebCore::ChromeClientQt::~ChromeClientQt):
        * WebCoreSupport/ChromeClientQt.h:

2011-04-06  Benjamin Poulain  <benjamin.poulain@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] LayoutTestController needs to implement numberOfPendingGeolocationPermissionRequests
        https://bugs.webkit.org/show_bug.cgi?id=56086

        Add the accessor numberOfPendingGeolocationPermissionRequests to call GeolocationClientMock::numberOfPendingPermissionRequests()
        from the LayoutTestController.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::numberOfPendingGeolocationPermissionRequests):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-04-06  Anders Bakken  <agbakken@gmail.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] FrameLoaderClientQt.cpp has coding-style errors
        https://bugs.webkit.org/show_bug.cgi?id=40254

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (drtDescriptionSuitableForTestResult):
        (WebCore::FrameLoaderClientQt::hasWebView):
        (WebCore::FrameLoaderClientQt::setCopiesOnScroll):
        (WebCore::FrameLoaderClientQt::dispatchDidHandleOnloadEvents):
        (WebCore::FrameLoaderClientQt::dispatchDidReceiveTitle):
        (WebCore::FrameLoaderClientQt::dispatchDidChangeIcons):
        (WebCore::FrameLoaderClientQt::cancelPolicyCheck):
        (WebCore::FrameLoaderClientQt::dispatchWillSubmitForm):
        (WebCore::FrameLoaderClientQt::postProgressStartedNotification):
        (WebCore::FrameLoaderClientQt::postProgressFinishedNotification):
        (WebCore::FrameLoaderClientQt::setMainFrameDocumentReady):
        (WebCore::FrameLoaderClientQt::willChangeTitle):
        (WebCore::FrameLoaderClientQt::didChangeTitle):
        (WebCore::FrameLoaderClientQt::finishedLoading):
        (WebCore::FrameLoaderClientQt::frameLoadCompleted):
        (WebCore::FrameLoaderClientQt::provisionalLoadStarted):
        (WebCore::FrameLoaderClientQt::didFinishLoad):
        (WebCore::FrameLoaderClientQt::setTitle):
        (WebCore::FrameLoaderClientQt::dispatchDidReceiveIcon):
        (WebCore::FrameLoaderClientQt::dispatchDidClearWindowObjectInWorld):
        (WebCore::FrameLoaderClientQt::updateGlobalHistory):
        (WebCore::FrameLoaderClientQt::shouldGoToHistoryItem):
        (WebCore::FrameLoaderClientQt::shouldStopLoadingForHistoryItem):
        (WebCore::FrameLoaderClientQt::committedLoad):
        (WebCore::FrameLoaderClientQt::download):
        (WebCore::FrameLoaderClientQt::dispatchWillSendRequest):
        (WebCore::FrameLoaderClientQt::shouldUseCredentialStorage):
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForResponse):
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForNavigationAction):
        (WebCore::FrameLoaderClientQt::createFrame):
        (WebCore::FrameLoaderClientQt::objectContentType):
        (WebCore::FrameLoaderClientQt::createPlugin):

2011-04-06  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] We should use USE(QT_MULTIMEDIA) rather than ENABLE(QT_MULTIMEDIA).
        https://bugs.webkit.org/show_bug.cgi?id=57974

        We should use USE(QT_MULTIMEDIA) rather than ENABLE(QT_MULTIMEDIA).

        No new tests needed, just a config flag rename.

        * Api/qwebkitplatformplugin.h:
        * WebCoreSupport/ChromeClientQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::mediaContentUrlByElementId):
        * WebCoreSupport/FullScreenVideoQt.cpp:
        (WebCore::FullScreenVideoQt::FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::~FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::enterFullScreenForNode):
        (WebCore::FullScreenVideoQt::exitFullScreenForNode):
        (WebCore::FullScreenVideoQt::requiresFullScreenForVideoPlayback):
        (WebCore::FullScreenVideoQt::isValid):
        * WebCoreSupport/FullScreenVideoQt.h:
        * WebCoreSupport/QtPlatformPlugin.cpp:
        * WebCoreSupport/QtPlatformPlugin.h:
        * examples/platformplugin/WebPlugin.cpp:
        (WebPlugin::supportsExtension):
        (WebPlugin::createExtension):
        * examples/platformplugin/WebPlugin.h:
        * examples/platformplugin/platformplugin.pro:
        * examples/platformplugin/qwebkitplatformplugin.h:
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::loadHtml5Video):
        * tests/tests.pri:

2011-04-06  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] Implement fullscreen playback for the GStreamer backend.
        https://bugs.webkit.org/show_bug.cgi?id=56826

        Implement support for fullscreen playback when building the
        Qt port with the GStreamer backend (DEFINES+=USE_GSTREAMER=1).
        The implementation is done in FullScreenVideoQt alongside with
        the Qt Multimedia support.

        No new tests because layout tests cover it. They are not yet activated
        but will be any time soon.

        * QtWebKit.pro:
        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::ChromeClientQt):
        (WebCore::ChromeClientQt::~ChromeClientQt):
        (WebCore::ChromeClientQt::enterFullscreenForNode):
        (WebCore::ChromeClientQt::exitFullscreenForNode):
        * WebCoreSupport/ChromeClientQt.h:
        * WebCoreSupport/FullScreenVideoQt.cpp:
        (WebCore::GStreamerFullScreenVideoHandler::GStreamerFullScreenVideoHandler):
        (WebCore::GStreamerFullScreenVideoHandler::setVideoElement):
        (WebCore::GStreamerFullScreenVideoHandler::enterFullScreen):
        (WebCore::GStreamerFullScreenVideoHandler::windowClosed):
        (WebCore::GStreamerFullScreenVideoHandler::exitFullScreen):
        (WebCore::DefaultFullScreenVideoHandler::DefaultFullScreenVideoHandler):
        (WebCore::FullScreenVideoQt::FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::~FullScreenVideoQt):
        (WebCore::FullScreenVideoQt::enterFullScreenForNode):
        (WebCore::FullScreenVideoQt::exitFullScreenForNode):
        (WebCore::FullScreenVideoQt::requiresFullScreenForVideoPlayback):
        (WebCore::FullScreenVideoQt::isValid):
        * WebCoreSupport/FullScreenVideoQt.h:
        (WebCore::GStreamerFullScreenVideoHandler::~GStreamerFullScreenVideoHandler):

2011-04-06  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Improve tests for QWebFrame::url() and related methods
        https://bugs.webkit.org/show_bug.cgi?id=57865

        * tests/qwebframe/tst_qwebframe.cpp:
        (FakeReply::FakeReply): make more URLs reply HostNotFound. We needed two different URLs in the test.
        (tst_QWebFrame::requestedUrlAfterSetAndLoadFailures): check the properties after an setUrl()
        that fails and a load() that fails (for a different URL).

        (tst_QWebFrame::setUrlWithFragment_data):
        (tst_QWebFrame::setUrlWithFragment): add other test cases similar to the original, but changing
        the URL in the frame before the test starts.

        (tst_QWebFrame::setUrlSameUrl): document existing behavior of calling setUrl() twice with
        the same URL as argument.

        (extractBaseUrl):
        (tst_QWebFrame::setUrlThenLoads_data):
        (tst_QWebFrame::setUrlThenLoads): check the URL related properties of the frame after a
        sequence of set and loads. Those tests are interesting because the properties
        react different to setUrl() and load(): 'requestedUrl' always change, 'url' only when setUrl()
        is used or after the load() is committed and baseUrl() is similar to url() but also depends
        on the contents of the page when it loads.

2011-04-04  MORITA Hajime  <morrita@google.com>

        Reviewed by Ryosuke Niwa.

        [Refactoring] SpellCheckingResult should be replaced with TextCheckingResult
        https://bugs.webkit.org/show_bug.cgi?id=56085
        
        * WebCoreSupport/EditorClientQt.h:
        (WebCore::EditorClientQt::requestCheckingOfString):

2011-04-04  Chang Shu  <cshu@webkit.org>

        Reviewed by Ryosuke Niwa.

        setContentEditable with true/false/inherit string is not working properly
        https://bugs.webkit.org/show_bug.cgi?id=52058

        Move isContentEditable from HTMLElement to Node. WebKit should only access isContentEditable
        as rendererIsEditable is for WebCore internal use.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::handleKeyboardEvent):

2011-04-01  Carol Szabo  <carol.szabo@nokia.com>

        Reviewed by Benjamin Poulain.

        Changed QWebFramePrivate::renderFromTiledBackingStore to call directly into
        Scrollbar/PanIcon rendering, bypassing the potential relayout in renderRelativeCoords.

        Tiled painting still causes synchronous layout when
        accelerated compositing and texture mapper are enabled
        https://bugs.webkit.org/show_bug.cgi?id=56929

        * Api/qwebframe.cpp:
        (QWebFramePrivate::renderFromTiledBackingStore):
        (QWebFramePrivate::renderRelativeCoords):
        (QWebFramePrivate::renderFrameWidgets):
        * Api/qwebframe_p.h:

2011-04-01  Nancy Piedra  <nancy.piedra@nokia.com>

        Reviewed by Benjamin Poulain.

        [Qt] DragClientQt.h has coding-style errors
        https://bugs.webkit.org/show_bug.cgi?id=40425

        * WebCoreSupport/DragClientQt.h:

2011-03-31  Marius Storm-Olsen  <marius.storm-olsen@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Properly detect phonon include, and avoid double qtLibraryTarget() call
        https://bugs.webkit.org/show_bug.cgi?id=57017

        Build fix. No new tests.

        * QtWebKit.pro:

2011-03-31  Evan Martin  <evan@chromium.org>

        Another build fix.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::updateGlobalHistory):

2011-03-31  Nancy Piedra  <nancy.piedra@nokia.com>

        Reviewed by Benjamin Poulain.

        [Qt] ChromeClientQt.h has coding-style errors
        https://bugs.webkit.org/show_bug.cgi?id=40239

        * WebCoreSupport/ChromeClientQt.h:
        (WebCore::ChromeClientQt::scrollbarsModeDidChange):
        (WebCore::ChromeClientQt::needTouchEvents):
        (WebCore::ChromeClientQt::formStateDidChange):
        (WebCore::ChromeClientQt::scrollRectIntoView):
        (WebCore::ChromeClientQt::requestGeolocationPermissionForFrame):
        (WebCore::ChromeClientQt::cancelGeolocationPermissionRequestForFrame):

2011-03-31  Evan Martin  <evan@chromium.org>

        Build fix from previous change.

        * Api/qwebframe.cpp:
        (QWebFrame::title):

2011-03-31  Evan Martin  <evan@chromium.org>

        Reviewed by Eric Seidel.

        <title> should support dir attribute
        https://bugs.webkit.org/show_bug.cgi?id=50961

        Update to new FrameLoaderClient interface.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidReceiveTitle):
        (WebCore::FrameLoaderClientQt::setTitle):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-03-30  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt][Symbian] Fix Api test failure -- tst_QWebView::focusInputTypes
        https://bugs.webkit.org/show_bug.cgi?id=57020

        Added a macro 'VERIFY_INPUTMETHOD_HINTS' to test inputmethodhints().

        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::focusInputTypes):

2011-03-30  Robert Hogan  <robert@webkit.org>

        Reviewed by Antonio Gomes.

        [Qt] Fix LoadHTMLStringItem::invoke() after r75966

        Add DRT support for loading an alternate HTML string
        for error pages. This allows Qt to unskip
        http/tests/navigation/go-back-to-error-page.html.

        https://bugs.webkit.org/show_bug.cgi?id=52614

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::setAlternateHtml):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-03-29  Alexis Menard  <alexis.menard@openbossa.org>

        Unreviewed build fix for build-webkit -minimal.

        Breakage introduced by http://trac.webkit.org/changeset/82238.
        The minimal option has no support for shortcuts.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::handleInputMethodKeydown):

2011-03-29  Janne Koskinen  <janne.p.koskinen@digia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Enterkey to go to Newline does not work in the text area(in HTML form)
        https://bugs.webkit.org/show_bug.cgi?id=33179

        Fixed newline generation from Qt::Key_Enter when editting text area using InputMethods.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::handleInputMethodKeydown):
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::inputMethods):

2011-03-29  Andreas Kling  <kling@webkit.org>

        Reviewed by Simon Hausmann.

        [Qt] Fix documentation for QWebPage::repaintRequested()

        This signal is always emitted when the page is dirtied, so remove
        reference to old behavior where we would only emit the signal for
        headless QWebPages.

        * Api/qwebpage.cpp:

2011-03-28  Andreas Kling  <kling@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] Pass QString() instead of String() when emitting titleChanged() for new loads.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidCommitLoad):

2011-03-28  Andreas Kling  <kling@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] Crash when calling QWebFrame::render() in response to QWebPage::repaintRequested()
        https://bugs.webkit.org/show_bug.cgi?id=52629

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::invalidateContentsAndWindow): Make the emission of
        QWebPage::repaintRequested() use a Qt::QueuedConnection.

        * tests/qwebpage/tst_qwebpage.cpp:
        (RepaintRequestedRenderer::RepaintRequestedRenderer):
        (RepaintRequestedRenderer::onRepaintRequested):
        (tst_QWebPage::renderOnRepaintRequestedShouldNotRecurse): Test that calling
        QWebFrame::render() in a slot connected to to QWebPage::repaintRequested()
        doesn't cause recursive signal emissions.

2011-03-28  Benjamin Poulain  <benjamin.poulain@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] QtWebKit will not compile with QT_ASCII_CAST_WARNINGS enabled
        https://bugs.webkit.org/show_bug.cgi?id=57087

        * QtWebKit.pro: we can now enable QT_ASCII_CAST_WARNINGS
        * tests/tests.pri: we do not require QT_ASCII_CAST_WARNINGS for tests
        since they are applications, not libraries.

2011-03-28  Andras Becsi  <abecsi@webkit.org>

        Reviewed by Csaba Osztrogonác.

        [Qt] QtWebKit does not link with --3d-canvas using MinGW
        https://bugs.webkit.org/show_bug.cgi?id=57225

        * QtWebKit.pro: Append the OpenGL libraries on MinGW so it can resolve symbols.

2011-03-28  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Andreas Kling.

        REGRESSION(r54712): [Qt] Installed QtWebKit header does not compile.
        https://bugs.webkit.org/show_bug.cgi?id=57183

        Windows buildfix after r82065.

        * Api/DerivedSources.pro: Readding escaping on Windows platforms.

2011-03-27  Andreas Kling  <kling@webkit.org>

        Fix build warning about IconDatabaseClient.h (wrong path.)

        * QtWebKit.pro:

2011-03-27  Andreas Kling  <kling@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Support for CSS color and background-color properties on select element's dropdown list
        https://bugs.webkit.org/show_bug.cgi?id=51627

        Extend the QWebSelectData interface with background and foreground colors
        for the whole menu, as well as per-item. Hook it up to the PopupMenuStyle
        getters in RenderMenuList.

        * Api/qwebkitplatformplugin.h:
        * WebCoreSupport/PopupMenuQt.cpp:
        (SelectData::backgroundColor):
        (SelectData::foregroundColor):
        (SelectData::itemBackgroundColor):
        (SelectData::itemForegroundColor):
        * WebCoreSupport/QtFallbackWebPopup.cpp:
        (WebCore::QtFallbackWebPopup::show):
        (WebCore::QtFallbackWebPopup::populate):

2011-03-27  Yi Shen  <yi.4.shen@nokia.com>

        Reviewed by Andreas Kling.

        [Qt][Symbian] Fix Api test failure -- microFocusCoordinates
        https://bugs.webkit.org/show_bug.cgi?id=57108

        Since the canvas is not self-closing tag, we need to add '</canvas>'. 

        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView::microFocusCoordinates):
        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::microFocusCoordinates):

2011-03-27  Kwang Yul Seo  <skyul@company100.net>

        Reviewed by Eric Seidel.

        [Qt] Build fix: Define WTF_USE_TEXTURE_MAPPER=1 when CONFIG contains texmap.
        https://bugs.webkit.org/show_bug.cgi?id=57143

        Qt WebKit uses USE(TEXTURE_MAPPER) guard. Check texmap in CONFIG and
        define WTF_USE_TEXTURE_MAPPER=1.

        * QtWebKit.pro:

2011-03-27  Andreas Kling  <kling@webkit.org>

        Reviewed by Benjamin Poulain.

        REGRESSION(r54712): [Qt] Installed QtWebKit header does not compile.
        https://bugs.webkit.org/show_bug.cgi?id=57183

        The convenience <QtWebKit> header would include \<QtNetwork/QtNetwork\>
        which was due to the outputting code previously being wrapped in eval().

        * Api/DerivedSources.pro:

2011-03-27  Benjamin Poulain  <benjamin.poulain@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] QtWebKit will not compile with QT_ASCII_CAST_WARNINGS enabled
        https://bugs.webkit.org/show_bug.cgi?id=57087

        Use explicit conversion for string to avoid depending on the default codec
        installed by the user code.

        * Api/qwebkitversion.cpp:
        (qWebKitVersion):
        * Api/qwebpage.cpp:
        (QWebPagePrivate::dynamicPropertyChangeEvent):
        (QWebPage::javaScriptConsoleMessage):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (convertToPropertyName):
        (DumpRenderTreeSupportQt::setEditingBehavior):
        (DumpRenderTreeSupportQt::plainText):
        * WebCoreSupport/EditorClientQt.cpp:
        (dumpRange):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (drtDescriptionSuitableForTestResult):
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForNavigationAction):
        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::openInspectorFrontend):
        * WebCoreSupport/InspectorServerQt.cpp:
        (WebCore::parseWebSocketChallengeNumber):
        (WebCore::InspectorServerRequestHandlerQt::tcpReadyRead):

2011-03-26  Andreas Kling  <kling@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] QWebFrame::iconChanged() not emitted when icon is cached but not yet loaded
        https://bugs.webkit.org/show_bug.cgi?id=57157

        Add an IconDatabaseClient for the Qt port to ensure that QWebFrame::iconChanged()
        is always emitted when appropriate.

        * QtWebKit.pro: Add new files.

        * WebCoreSupport/IconDatabaseClientQt.h: Added.
        * WebCoreSupport/IconDatabaseClientQt.cpp: Added.
        (WebCore::IconDatabaseClientQt::instance):
        (WebCore::IconDatabaseClientQt::IconDatabaseClientQt):
        (WebCore::IconDatabaseClientQt::~IconDatabaseClientQt):
        (WebCore::IconDatabaseClientQt::performImport):
        (WebCore::IconDatabaseClientQt::didRemoveAllIcons):
        (WebCore::IconDatabaseClientQt::didImportIconURLForPageURL):
        (WebCore::IconDatabaseClientQt::didImportIconDataForPageURL):
        (WebCore::IconDatabaseClientQt::didChangeIconForPageURL):
        (WebCore::IconDatabaseClientQt::didFinishURLImport):

        * WebCoreSupport/FrameLoaderClientQt.h:
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::registerForIconNotification):
        (WebCore::FrameLoaderClientQt::onIconLoadedForPageURL): New slot connected
        to the IconDatabaseClientQt::iconLoadedForPageURL() signal. This emits the
        QWebFrame::iconChanged() signal when the IconDatabases finishes loading
        a cached favicon for the frame's URL.

        * Api/qwebsettings.cpp:
        (QWebSettings::setIconDatabasePath): Make sure that IconDatabaseClientQt is
        instantiated. An IconDatabaseClient has to be registered before the IconDatabase
        spawns its reader thread.

2011-03-25  Andy Estes  <aestes@apple.com>

        Reviewed by Adele Peterson.

        REGRESSION (r70748): latest nightly builds kills AC_QuickTime.js
        https://bugs.webkit.org/show_bug.cgi?id=49016

        Update objectContentType() implementation to handle the
        shouldPreferPlugInsForImages flag.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::objectContentType):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-03-25  Chang Shu  <cshu@webkit.org>

        Reviewed by Ryosuke Niwa.

        rename Node::isContentEditable and all call sites to rendererIsEditable
        https://bugs.webkit.org/show_bug.cgi?id=54290

        This is part of the effort to separate JS API HTMLElement isContentEditable from
        internal Node::rendererIsEditable.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::handleKeyboardEvent):

2011-03-25  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] The keyboard shortcuts during fullscreen playback do not work.
        https://bugs.webkit.org/show_bug.cgi?id=57095

        We need to explicitely set the focus on the widget in order to receive the keyboard events.

        * WebCoreSupport/FullScreenVideoWidget.cpp:
        (WebCore::FullScreenVideoWidget::show):

2011-03-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81916 and r81917.
        http://trac.webkit.org/changeset/81916
        http://trac.webkit.org/changeset/81917
        https://bugs.webkit.org/show_bug.cgi?id=57071

        broke a test on platforms that do not have QuickTime installed
        (Requested by estes on #webkit).

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::objectContentType):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-03-24  Andy Estes  <aestes@apple.com>

        Reviewed by Darin Adler.

        REGRESSION (r70748): latest nightly builds kills AC_QuickTime.js
        https://bugs.webkit.org/show_bug.cgi?id=49016

        Update objectContentType() implementation to handle the
        shouldPreferPlugInsForImages flag.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::objectContentType):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-03-24  Benjamin Poulain  <benjamin.poulain@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] When we render WebGL offscreen, color conversion cost a lot of CPU cycles
        https://bugs.webkit.org/show_bug.cgi?id=40884

        Add tests and benchmarks for the software fallback of WebGL.

        * tests/benchmarks/webgl/10000_triangles.html: Added.
        * tests/benchmarks/webgl/tst_webgl.cpp: Added.
        (GraphicsView::GraphicsView):
        (GraphicsView::resizeEvent):
        (tst_WebGlPerformance::init):
        (tst_WebGlPerformance::cleanup):
        (tst_WebGlPerformance::benchSoftwareFallbackRgb16):
        (tst_WebGlPerformance::benchSoftwareFallbackRgb32):
        (tst_WebGlPerformance::benchSoftwareFallbackArgb32):
        (tst_WebGlPerformance::benchSoftwareFallbackArgb32Premultiplied):
        (tst_WebGlPerformance::benchmarkFrameRenderingOnImage):
        * tests/benchmarks/webgl/tst_webgl.qrc: Added.
        * tests/benchmarks/webgl/webgl.pro: Added.
        * tests/qgraphicswebview/qgraphicswebview.pro:
        * tests/qgraphicswebview/resources/pointing_right.html: Added.
        * tests/qgraphicswebview/resources/pointing_up.html: Added.
        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (compareImagesFuzzyPixelCount):
        (GraphicsView::GraphicsView):
        (tst_QGraphicsWebView::webglSoftwareFallbackVerticalOrientation):
        (tst_QGraphicsWebView::webglSoftwareFallbackHorizontalOrientation):
        (tst_QGraphicsWebView::compareCanvasToImage):
        * tests/qgraphicswebview/tst_qgraphicswebview.qrc:
        * tests/tests.pro:

2011-03-24  Kristian Amlie  <kristian.amlie@nokia.com>

        Reviewed by Benjamin Poulain.

        Avoided ASCII-cast warnings for WebKit.

        Normally they won't be enabled anyway, but if you build webkit from
        within the Qt mother repository it will pick up Qt's default build
        settings, which do enable it. We need to disable them because
        warnings are treated as errors and there are way too many of them in
        the WebKit code.

        [Qt] Avoid ASCII-cast warnings for WebKit.
        https://bugs.webkit.org/show_bug.cgi?id=57016

        * QtWebKit.pro:

2011-03-24  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Benjamin Poulain.

        [Qt] Resetting the URL property of a QWebView results in the current directory being set as file::-type URL
        https://bugs.webkit.org/show_bug.cgi?id=29595

        Qt Designer resets the URL by setting it to QUrl(). The bug was caused by
        ensureAbsoluteUrl() helper function treating the empty URL as a relative URL, and
        prepending the current directory.

        By fixing this, now we can pass QUrl() invalid and empty URLs to WebCore layer, which
        will end up loading "about:blank", but keeping it as a requested URL.

        This patch also simplifies the logic for requestedUrl(), since m_lastRequestedUrl
        is filled for the loaded URLs as well, we can use it in every case.

        Three new autotests were added, to better cover the expected behavior of setting
        the QUrl() in a QWebFrame.

        * Api/qwebframe.cpp:
        (ensureAbsoluteUrl): do not treat invalid URLs (empty included) as relative.
        (QWebFrame::requestedUrl): always use m_lastRequestedUrl.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidFinishLoad): do not clear m_lastRequestedUrl
        anymore, since we always rely on it even for loaded frames.

        * tests/qwebframe/tst_qwebframe.cpp:
        (tst_QWebFrame::setUrlToEmpty): verify the behavior of setting empty URLs. This includes
        the reduction of the bug report.
        (tst_QWebFrame::setUrlToInvalid): setting invalid, but not necessarily empty, URLs.
        (tst_QWebFrame::setUrlHistory): to verify how setting empty URLs affect history.

2011-03-23  Brady Eidson  <beidson@apple.com>

        Reviewed by Sam Weinig.

        Change IconDatabase opening to allow for arbitrary filenames
        https://bugs.webkit.org/show_bug.cgi?id=56977

        * Api/qwebsettings.cpp:
        (QWebSettings::setIconDatabasePath):

2011-03-23  Aparna Nandyal  <aparna.nand@wipro.com>

        Reviewed by Andreas Kling.

        [Qt] QtWebKit rendering problem when maximizing and doing a back
        https://bugs.webkit.org/show_bug.cgi?id=56669

        Added an auto test.
        Patch by Alexis Menard < alexis.menard@nokia.com> on 2011-03-21
 
        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::rendering):

2011-03-23  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [V8] Web Inspector: compile DebuggerScript.js into DebuggerScriptSource.h
        https://bugs.webkit.org/show_bug.cgi?id=56843

        * WebCoreSupport/InspectorClientQt.cpp:
        (WebCore::InspectorClientQt::openInspectorFrontend):

2011-03-22  Andrew Wason  <rectalogic@rectalogic.com>

        Reviewed by Benjamin Poulain.

        [Qt] QWebPage with WebGL content crashes when rendering if no QWebView parent
        https://bugs.webkit.org/show_bug.cgi?id=54138

        * tests/qwebpage/tst_qwebpage.cpp:
        (webGLScreenshotWithoutView):
        (tst_QWebPage::acceleratedWebGLScreenshotWithoutView):
        (tst_QWebPage::unacceleratedWebGLScreenshotWithoutView):
         Render a QWebPage (with and without accelerated compositing)
         with a WebGL context that has no owning view.  Shouldn't crash.

2011-03-21  Chang Shu  <cshu@webkit.org>

        Reviewed by Alexey Proskuryakov.

        REGRESSION (r79953): Can't type in MS Outlook 2011
        https://bugs.webkit.org/show_bug.cgi?id=56665

        r79953 removed the WebView level editablity which is persistent no matter whether
        underlying document itself is changed and editability gets lost. The resolution is to
        set this WebView editable value to WebCore. This avoids the callback from WebCore to
        WebKit which was the main goal in r79953 to improve performance.

        * Api/qwebpage.cpp:
        (QWebPage::setContentEditable):
        (QWebPage::isContentEditable):

2011-03-19  Andreas Kling  <kling@webkit.org>

        Reviewed by Benjamin Poulain.

        [Qt] Remove support for Qt 4.6
        https://bugs.webkit.org/show_bug.cgi?id=56712

        * Api/qwebframe.cpp:
        (QWebFrame::load):
        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * Api/qwebsettings.cpp:
        (QWebSettings::QWebSettings):
        * WebCoreSupport/GeolocationClientQt.cpp:
        (WebCore::GeolocationClientQt::positionUpdated):

2011-03-19  Andreas Kling  <kling@webkit.org>

        Reviewed by Antonio Gomes.

        [Qt][Doc] QWebPage::unsupportedContent() passes ownership of the QNetworkReply
        https://bugs.webkit.org/show_bug.cgi?id=56711

        Document the fact that when unsupportedContent(QNetworkReply*) is emitted,
        ownership of the reply is transferred to the receiving slot.

        * Api/qwebpage.cpp:

2011-03-17  Brady Eidson  <beidson@apple.com>

        Reviewed by Sam Weinig.

        https://bugs.webkit.org/show_bug.cgi?id=56425
        More groundwork for WebKit2 IconDatabase

        Update already-used function names:
        * Api/qwebhistory.cpp:
        (QWebHistoryItem::icon):
        * Api/qwebsettings.cpp:
        (QWebSettings::iconForUrl):

2011-03-18  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Benjamin Poulain.

        [Qt] console.log not being exposed to QmlViewer
        https://bugs.webkit.org/show_bug.cgi?id=56536

        The documentation is bogus the feature does not exist.

        * declarative/qdeclarativewebview.cpp:

2011-03-17  Andreas Kling  <kling@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] QML WebView emits iconChanged() when the page title changes
        https://bugs.webkit.org/show_bug.cgi?id=56570

        * declarative/qdeclarativewebview.cpp:
        (QDeclarativeWebView::setPage): Don't forward the frame's titleChanged
        signal to the view's iconChanged signal.

2011-03-17  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Benjamin Poulain.

        [Qt] Videos look ugly when using QGraphicsWebView.
        https://bugs.webkit.org/show_bug.cgi?id=56580

        We need to set QPainter::SmoothPixmapTransform on the painter for a proper rendering of the video.
        QWebView does it but not QGraphicsWebView because the API does not exist. This patch is fixing it
        by introducing the same API as QWebView to control the renderHints of the item. Unlike QWebView
        QGraphicsWebView inherits the painter from QGraphicsScene and those flags are not set. This patch
        ensure that before rendering the item we add QPainter::SmoothPixmapTransform and QPainter::TextAntialiasing
        in addition of what could be set on the painter. In order to not break the rendering of all the items in the
        scene we set back the painter to its original state when QGraphicsWebView is rendered.

        * Api/qgraphicswebview.cpp:
        (QGraphicsWebViewPrivate::QGraphicsWebViewPrivate):
        (QGraphicsWebView::paint):
        (QGraphicsWebView::renderHints):
        (QGraphicsWebView::setRenderHints):
        (QGraphicsWebView::setRenderHint):
        * Api/qgraphicswebview.h:
        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView::renderHints):

2011-03-16  Joseph Pecoraro  <joepeck@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        Viewport no longer allows an auto value for "user-scalable"
        https://bugs.webkit.org/show_bug.cgi?id=55416

        Make the default value for userScalable be true.

        * Api/qwebpage.cpp:
        (QWebPage::viewportAttributesForSize):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::viewportAsText): update test output to include userScalable.

2011-03-15  Kevin Ollivier  <kevino@theolliviers.com>

        Reviewed by Darin Adler.

        Introduce WTF_USE_EXPORT_MACROS, which will allow us to put shared library import/export
        info into the headers rather than in export symbol definition files, but disable it on 
        all platforms initially so we can deal with port build issues one port at a time.
        
        https://bugs.webkit.org/show_bug.cgi?id=27551

        * WebCoreSupport/GeolocationClientQt.cpp:
        * WebCoreSupport/PopupMenuQt.cpp:

2011-03-14  Brady Eidson  <beidson@apple.com>

        Reviewed by Anders Carlsson.

        https://bugs.webkit.org/show_bug.cgi?id=56320
        Remove HistoryItem::icon() and the WebCore dependency on "IconDatabaseBase::defaultIcon()"

        * Api/qwebhistory.cpp:
        (QWebHistoryItem::icon): Use IconDatabase directly.

2011-03-11  Brady Eidson  <beidson@apple.com>

        Reviewed by attempt at build fix!

        https://bugs.webkit.org/show_bug.cgi?id=56216
        Fix the Qt build following the same pattern of the patch.

        * Api/qwebsettings.cpp:
        (QWebSettings::setIconDatabasePath): Call the static method via IconDatabase:: and not via iconDatabase()

2011-03-11  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Ariya Hidayat.

        [Qt] Entering fullscreen and leaving it may hide the cursor of the application.
        https://bugs.webkit.org/show_bug.cgi?id=56181

        We need to stop the auto hide cursor timer when closing the widget otherwise the timer
        might get fired and therefore hide the cursor even when the fullscreen widget is closed.

        * WebCoreSupport/FullScreenVideoWidget.cpp:
        (WebCore::FullScreenVideoWidget::closeEvent):

2011-03-10  David Boddie <david.boddie@nokia.com>

        Reviewed by Andreas Kling.

        Fixed a qdoc warning and terminology (WebKit instead of Webkit).
        https://bugs.webkit.org/show_bug.cgi?id=55756

        * Api/qwebhistoryinterface.cpp:

2011-03-10  Andreas Kling  <kling@webkit.org>

        Unreviewed build fix after r80774.

        QML property versioning is introduced in Qt 4.7.3, not 4.7.2.
        See also: http://bugreports.qt.nokia.com/browse/QTBUG-13451

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):
        * declarative/qdeclarativewebview.cpp:
        * declarative/qdeclarativewebview_p.h:
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:

2011-03-10  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] QtDeclarative Webview element has a fixed white background
        https://bugs.webkit.org/show_bug.cgi?id=40918

        Implement a way to change the background color of the WebView QML element.
        This feature is activated for QtWebKit 1.1 version of the plugin.

        * declarative/plugin.cpp:
        (WebKitQmlPlugin::registerTypes):
        * declarative/qdeclarativewebview.cpp:
        (QDeclarativeWebView::backgroundColor):
        (QDeclarativeWebView::setBackgroundColor):
        * declarative/qdeclarativewebview_p.h:
        * tests/qdeclarativewebview/resources/webviewbackgroundcolor.qml: Added.
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        (tst_QDeclarativeWebView::backgroundColor):
        * tests/qdeclarativewebview/tst_qdeclarativewebview.qrc:

2011-03-10  Stanislav Paltis  <Stanislav.Paltis@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] MemoryCache deadDecodedDataDeletionInterval is not exposed for client's usage
        https://bugs.webkit.org/show_bug.cgi?id=55945
        
        Added handling of dynamic/runtime property _q_deadDecodedDataDeletionInterval to 
        set interval used to trigger when decoded data in dead list of object cache will 
        be purged from object cache. 

        * Api/qwebpage.cpp:
        (QWebPagePrivate::dynamicPropertyChangeEvent):

2011-03-10  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Antonio Gomes.

        Simplify how QWebFrame::requestedUrl() is obtained
        https://bugs.webkit.org/show_bug.cgi?id=55842

        When a load starts, store the requested URL until we know that it'll be
        available for us in the document loader -- after load finished.

        The existing auto tests cover the three different code paths in
        requestedUrl() and the new code passes the autotests. In each of those
        cases, we looked for the information in a different place, but in all
        of them, dispatchDidStartProvisionalLoad was called.

        This simplification will be useful to fix bug 32723. The way requestedUrl()
        is implementent, we can't use it as a fallback for url() when the setUrl()
        was called with an invalid URL.

        * Api/qwebframe.cpp:
        (QWebFrame::requestedUrl):
        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDidStartProvisionalLoad):
        (WebCore::FrameLoaderClientQt::dispatchDidFinishLoad):
        * WebCoreSupport/FrameLoaderClientQt.h:
        (WebCore::FrameLoaderClientQt::lastRequestedUrl):

2011-03-10  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Reviewed by Kenneth Rohde Christiansen.

        Tiled backing store's delegated scroll request uses incorrect convention
        https://bugs.webkit.org/show_bug.cgi?id=56011

        Adapt internal API to match the change from delta to point on the
        WebCore side, and convert the point to a delta for the public API.

        * WebCoreSupport/ChromeClientQt.cpp:
        (WebCore::ChromeClientQt::delegatedScrollRequested):
        * WebCoreSupport/ChromeClientQt.h:

2011-03-09  Peter Kasting  <pkasting@google.com>

        Reviewed by Mihai Parparita.

        Unify Windows version checks.
        https://bugs.webkit.org/show_bug.cgi?id=55979

        * Api/qwebpage.cpp:
        (QWebPage::userAgentForUrl):

2011-03-07  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Replace WebKit2's decidePolicyForMIMEType with decidePolicyForResponse
        https://bugs.webkit.org/show_bug.cgi?id=55827

        Renamed FrameLoaderClient::dispatchDecidePolicyForMIMEType to dispatchDecidePolicyForResponse
        and pass the entire response, instead of just the MIMEType.

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::dispatchDecidePolicyForResponse):
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-03-05  Qi Zhang  <qi.2.zhang@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] Mobile Devices should include Model and Firmware Version in Webkit Generated User Agent String
        https://bugs.webkit.org/show_bug.cgi?id=48636

        Add model infomation into user agent string when qtmobility is available, but only for symbian, Maemo and MeeGo.

        * Api/qwebpage.cpp:
        (QWebPage::userAgentForUrl):

2011-03-03  Mahesh Kulkarni  <mahesh.kulkarni@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [QT] Implement mock client-based geolocation for layout testing
        https://bugs.webkit.org/show_bug.cgi?id=54334

        Implement layout testing for Client-Based geolocation. If drt_run is set 
        then create mock geolocationClient and update the same with controller.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::mockGeolocationReset):
        (DumpRenderTreeSupportQt::setMockGeolocationPermission):
        (DumpRenderTreeSupportQt::setMockGeolocationPosition):
        (DumpRenderTreeSupportQt::setMockGeolocationError):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * WebCoreSupport/GeolocationClientQt.cpp:
        (WebCore::GeolocationClientQt::GeolocationClientQt):
        * WebCoreSupport/GeolocationClientQt.h:

2011-03-03  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] QWebFrame::setUrl works only from second time if url fragment is present
        https://bugs.webkit.org/show_bug.cgi?id=32723

        Create an auto-test for Qt based on the bug description.

        * tests/qwebframe/tst_qwebframe.cpp: add setUrlWithFragment() test.

2011-03-03  Brady Eidson  <beidson@apple.com>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=55721
        Global IconDatabase should be returned by reference, not as a pointer

        * Api/qwebsettings.cpp:
        (QWebSettings::setIconDatabasePath):
        (QWebSettings::iconDatabasePath):
        (QWebSettings::clearIconDatabase):
        (QWebSettings::iconForUrl):

2011-03-03  Alexey Proskuryakov  <ap@apple.com>

        Removing an include of WebCoreKeyboardUIMode.h that Ive just added. It's already included
        via ChromeClient.h

        * WebCoreSupport/ChromeClientQt.h:

2011-03-02  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Darin Adler.

        REGRESSION (WebKit2): Tab keys no longer observe Full Keyboard Access
        https://bugs.webkit.org/show_bug.cgi?id=55633
        <rdar://problem/8963023>

        * WebCoreSupport/ChromeClientQt.cpp (WebCore::ChromeClientQt::keyboardUIMode):
        * WebCoreSupport/ChromeClientQt.h:
        Implement keyboardUIMode() instead of tabsToLinks(). No change in functionality, since
        this platform doesn't observe or have full keyboard access state.

2011-03-03  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] QGraphicsWebView should use updateMicroFocus() of QGraphicsItem
        https://bugs.webkit.org/show_bug.cgi?id=55568

        We should use updateMicroFocus() from QGraphicsItem rather than the implementation
        in QGraphicsWebView. _q_updateMicroFocus was added when QGraphicsItem didn't have the feature.
        In Qt 4.7, updateMicroFocus was added, let's use it, then we can benefit of all bug fixing done
        in QGraphicsItem.

        * Api/qgraphicswebview.cpp:
        (QGraphicsWebView::setPage):
        * Api/qgraphicswebview.h:

2011-03-03  Peter Kasting  <pkasting@google.com>

        Reviewed by James Robinson.

        Drop redundant "Windows; " from the Windows-specific User Agent string.
        https://bugs.webkit.org/show_bug.cgi?id=54567

        * Api/qwebpage.cpp:
        (QWebPage::userAgentForUrl):

2011-03-01  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Adam Roben.

        Part of WebKit2: Need a way to send notifications to client when cookies change
        https://bugs.webkit.org/show_bug.cgi?id=55427
        <rdar://problem/9056027>
        
        Add stubs for CookiesStrategy on Qt WebKit1.

        * WebCoreSupport/WebPlatformStrategies.cpp:
        (WebPlatformStrategies::createCookiesStrategy):
        (WebPlatformStrategies::notifyCookiesChanged):
        * WebCoreSupport/WebPlatformStrategies.h:

2011-03-01  Joseph Pecoraro  <joepeck@webkit.org>

        Unreviewed. Roll out r80068 and r80073 due to breaking WebKit2 Qt port.

        * Api/qwebpage.cpp:
        (QWebPage::viewportAttributesForSize):
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::viewportAsText):

2011-03-01  Joseph Pecoraro  <joepeck@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        Viewport Warning/Error Messages Are Now Inaccurate
        https://bugs.webkit.org/show_bug.cgi?id=53707

        * Api/qwebpage.cpp:
        (QWebPage::viewportAttributesForSize): pass a Document into computeViewportAttributes for warnings to be reported to.
        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::viewportAsText): pass a Document into computeViewportAttributes for warnings to be reported to.

2011-03-01  Andras Becsi  <abecsi@webkit.org>

        Reviewed by Csaba Osztrogonác.

        [Qt] Clean up the project files and move common options to WebKit.pri.

        * QtWebKit.pro: Move common options to WebKit.pri.

2011-03-01  Aparna Nandyal  <aparna.nand@wipro.com>

        Reviewed by Simon Hausmann.

        [Qt]tst_QWebPage::backActionUpdate fails when there is not network connection
        https://bugs.webkit.org/show_bug.cgi?id=55319

        The test case required internet connection to be able to connect to
        google.com. Added new html file which refers to local html file.

        * tests/qwebpage/resources/content.html: Added.
        * tests/qwebpage/resources/frame_c.html: Added.
        * tests/qwebpage/resources/framedindex.html: Added.
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::backActionUpdate):
        * tests/qwebpage/tst_qwebpage.qrc:

2011-02-25 Steve Block <steveblock@google.com>

        Reviewed by Jeremy Orlow.

        Bridge.h should not include BridgeJSC.h
        https://bugs.webkit.org/show_bug.cgi?id=55212

        Include BridgeJSC.h directly instead.

        * Api/qwebframe.cpp:

2011-02-28  Chang Shu  <cshu@webkit.org>

        Reviewed by Ryosuke Niwa.

        Remove the support of Frame::isContentEditable and its dependencies.
        https://bugs.webkit.org/show_bug.cgi?id=54292

        Remove the WebKit side implementation. Make WebKit support depend on Document::inDesignMode.

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        (QWebPage::setContentEditable):
        (QWebPage::isContentEditable):
        * Api/qwebpage_p.h:
        * WebCoreSupport/EditorClientQt.cpp:
        * WebCoreSupport/EditorClientQt.h:

2011-02-28  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Oliver Hunt.

        Build fix for Qt port after API changes of http://trac.webkit.org/changeset/79904.

        * Api/qwebelement.cpp:
        (QWebElement::evaluateJavaScript):

2011-02-28  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt]tst_QDeclarativeWebView - 8 test cases fail
        https://bugs.webkit.org/show_bug.cgi?id=55214

        Fix the API tests for the QML WebView element. The default size of the element should be the size of the QGraphicsWebView
        if no preferred width or height are provided (see http://trac.webkit.org/changeset/79672).
        I also refactored the tests so we don't use the network but instead a local html file.
        QML doesn't support qrc loading so I had to workaround by using a property that I update afterwards.

        * tests/qdeclarativewebview/resources/sample.html: Added.
        * tests/qdeclarativewebview/resources/webviewtest.qml:
        * tests/qdeclarativewebview/resources/webviewtestdefault.qml:
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp:
        (tst_QDeclarativeWebView::preferredWidthTest):
        (tst_QDeclarativeWebView::preferredHeightTest):
        (tst_QDeclarativeWebView::preferredWidthDefaultTest):
        (tst_QDeclarativeWebView::preferredHeightDefaultTest):
        * tests/qdeclarativewebview/tst_qdeclarativewebview.qrc:

2011-02-28  Viatcheslav Ostapenko  <ostapenko.viatcheslav@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] Add clipped version of QWebElement::render method.
        Allows faster rendering of web element part.
        https://bugs.webkit.org/show_bug.cgi?id=50311

        * Api/qwebelement.cpp:
        (QWebElement::render):
        * Api/qwebelement.h:
        * tests/qwebelement/tst_qwebelement.cpp:
        (tst_QWebElement::render):

2011-02-28  Kristian Amlie  <kristian.amlie@nokia.com>

        Reviewed by Andreas Kling.

        Added full webkit module profile and a syncqt profile.

        This is for modularized Qt.

        [Qt] WebKit patches required to work with a modularized version of Qt
        https://bugs.webkit.org/show_bug.cgi?id=53916

        * qt_webkit_version.pri:

2011-02-27  Aparna Nandyal  <aparna.nand@wipro.com>

        Reviewed by Antonio Gomes.

        [Qt] QtTestBrowser - Horizontal scrollbar disappears on navigating pages using Back/Forward
        https://bugs.webkit.org/show_bug.cgi?id=53917

        Adding test case to check the scenario to avoid regressions in the
        future. 

        * tests/qwebframe/tst_qwebframe.cpp:

2011-02-27  Benjamin Poulain  <benjamin.poulain@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] Reference the documentation of the WebKit bridge from QWebFrame::addToJavaScriptWindowObject()
        https://bugs.webkit.org/show_bug.cgi?id=55322

        Documentation update, add a reference to the QtWebKit bridge page.

        * Api/qwebframe.cpp:

2011-02-26  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to DumpRenderTreeSupportQT.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::clearOpener):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-02-26  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Andreas Kling.

        Make it possible to test the targetdensity-dpi support
        https://bugs.webkit.org/show_bug.cgi?id=55142

        Test the viewport meta tag feature targetdensity-dpi by
        adding extra arguments to dumpConfigurationForViewport

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::viewportAsText):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-02-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r79764.
        http://trac.webkit.org/changeset/79764
        https://bugs.webkit.org/show_bug.cgi?id=55295

        "broke Chromium builds" (Requested by rniwa on #webkit).

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-02-26  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to DumpRenderTreeSupportQT.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::clearOpener):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-02-25  Andras Becsi  <abecsi@webkit.org>

        Reviewed by Csaba Osztrogonác.

        [Qt] Make the WebKit2 build system less confusing for non-Qt developers
        https://bugs.webkit.org/show_bug.cgi?id=55213

        * QtWebKit.pro: Move the WebKit2 API into a project include file
        in the WebKit2 directory and include the pri file here.

2011-02-25  Alexis Menard  <alexis.menard@openbossa.org>

        Unreviewed build fix for Intel ICC and MSVC.

        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView::setPalette):
        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::setPalette):

2011-02-25  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Properly propagate the palette to QWebPage from QGraphicsWebView
        https://bugs.webkit.org/show_bug.cgi?id=31742

        Discovered while looking at 31742. When we set a palette on the
        QGraphicsWebView we need to propagate it to the page like QWebView.
        I have added the same tests as QWebView to be sure to catch potential
        regressions as well as two extras QVERIFY to check the palette propagation.

        * Api/qgraphicswebview.cpp:
        (QGraphicsWebView::event):
        * tests/qgraphicswebview/tst_qgraphicswebview.cpp:
        (tst_QGraphicsWebView::setPalette_data):
        (tst_QGraphicsWebView::setPalette):

2011-02-25  Csaba Osztrogonác  <ossy@webkit.org>

        Unreviewed buildfix after r79672.

        [Qt] Build tst_qdeclarativewebview if QT_CONFIG contains declarative.

        * tests/tests.pri:
        * tests/tests.pro:

2011-02-25  Gopal Raghavan  <gopal.1.raghavan@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] QML WebView inside a Flickable shows checkers pattern at startup
        https://bugs.webkit.org/show_bug.cgi?id=50222.

        This patch fixes the checkerboard visible at startup even if preferredWidth and preferredHeight are not set.

        * declarative/qdeclarativewebview.cpp:
        (QDeclarativeWebView::init):
        * tests/qdeclarativewebview: Added.
        * tests/qdeclarativewebview/qdeclarativewebview.pro: Added.
        * tests/qdeclarativewebview/resources: Added.
        * tests/qdeclarativewebview/resources/webviewtest.qml: Added.
        * tests/qdeclarativewebview/resources/webviewtestdefault.qml: Added.
        * tests/qdeclarativewebview/tst_qdeclarativewebview.cpp: Added.
        (tst_QDeclarativeWebView::initTestCase):
        (tst_QDeclarativeWebView::cleanupTestCase):
        (tst_QDeclarativeWebView::init):
        (tst_QDeclarativeWebView::cleanup):
        (tst_QDeclarativeWebView::preferredWidthTest):
        (tst_QDeclarativeWebView::preferredHeightTest):
        (tst_QDeclarativeWebView::preferredWidthDefaultTest):
        (tst_QDeclarativeWebView::preferredHeightDefaultTest):
        (tst_QDeclarativeWebView::checkNoErrors):
        * tests/tests.pri:
        * tests/tests.pro:

2011-02-24  Jocelyn Turcotte  <jocelyn.turcotte@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] Revert the support for QNAM affined to a different thread.
        https://bugs.webkit.org/show_bug.cgi?id=55149

        Qt 4.8 will have QNAM use its own thread internally by default,
        no need to keep this complexity in WebKit.

        This mainly reverts:
        http://trac.webkit.org/changeset/73710
        http://trac.webkit.org/changeset/73712

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::download):
        * tests/qwebpage/tst_qwebpage.cpp:

2011-02-24  Sam Weinig  <sam@webkit.org>

        Try to fix the Qt build.

        * QtWebKit.pro:

2011-02-24  Peter Kasting  <pkasting@google.com>

        Reviewed by Eric Seidel.

        Drop the "U; " encryption level from the User Agent string.
        https://bugs.webkit.org/show_bug.cgi?id=54566

        * Api/qwebpage.cpp:
        (QWebPage::userAgentForUrl):

2011-02-24  Andrew Wilson  <atwilson@chromium.org>

        Unreviewed, rolling out r79570.
        http://trac.webkit.org/changeset/79570
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Breaks chromium build because glue/mocks/mock_web_frame.h/cc
        was not updated

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-02-24  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Alexey Proskuryakov.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to DumpRenderTreeSupportQT.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::clearOpener):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:

2011-02-24  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] tst_QWebView::setPalette(activeFG) fails
        https://bugs.webkit.org/show_bug.cgi?id=55029

        This time it should be the proper fix. The window needs to be shown before we
        call activateWindow() otherwise there is no active windows for the application.

        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::setPalette):

2011-02-24  Andras Becsi  <abecsi@webkit.org>

        Reviewed by Laszlo Gombos.

        [Qt] MinGW build fails to link
        https://bugs.webkit.org/show_bug.cgi?id=55050

        Prepend the libraries of subcomponents instead of appending them
        to fix the library order according to the dependency of the libraries

        * QtWebKit.pro: prepend libraries in the correct order

2011-02-23  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Ariya Hidayat.

        [Qt] tst_QWebView::setPalette(activeFG) fails
        https://bugs.webkit.org/show_bug.cgi?id=55029

        Attempt to make the test more robust. By investigating with the bot virtual machine
        I discovered that the activation can take some time. In this patch we make sure that
        the active window we want to have is the same as the QApplication.

        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::setPalette):

2011-02-23  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Dan Bernstein.

        [Qt]REGRESSION(r79167): It broke 3 Qt-API test cases
        http://trac.webkit.org/changeset/79167 refactored the way the bound size of
        the frame is handled. A new API setBoundsSize was added, we need to call it
        in addition to setFrameRect. I could call setBoundSize after setFrameRect but
        I thought It would be more elegant to use the resize method.

        * Api/qwebpage.cpp:
        (QWebPage::setViewportSize):

2011-02-22  Fabrizio Machado  <fabrizio.machado@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] Don't fall through case in variantToSetting() if qvariant.type() is Bool
        https://bugs.webkit.org/show_bug.cgi?id=54976

        Test not needed.
        
        * WebCoreSupport/InspectorClientQt.cpp:

2011-02-22  Alexis Menard  <alexis.menard@openbossa.org>

        Reviewed by Andreas Kling.

        [Qt] QWebView ignores a palette set with QWebView::setPalette()
        https://bugs.webkit.org/show_bug.cgi?id=31742

        Test case to check that the palette sets on the QWebView is taken
        into account.

        * tests/qwebview/tst_qwebview.cpp:
        (tst_QWebView::setPalette_data):
        (tst_QWebView::setPalette):

2011-02-22  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Alexey Proskuryakov.

        Drop the language tag part from the User Agent string
        https://bugs.webkit.org/show_bug.cgi?id=54560

        * Api/qwebpage.cpp:
        (QWebPage::userAgentForUrl):

        * tests/qwebpage/tst_qwebpage.cpp: Remove the userAgentLocaleChange
        test.

2011-02-22  Chang Shu  <cshu@webkit.org>

        Reviewed by Csaba Osztrogonác.

        [Qt] editing/deleting/5408255.html fails
        https://bugs.webkit.org/show_bug.cgi?id=54964

        Move WebCore resource file to QtWebKit since they are referred in WebKit.

        * QtWebKit.pro:

2011-02-22  Andras Becsi  <abecsi@webkit.org>

        Reviewed by Csaba Osztrogonác.

        [Qt] Redesign the build system
        https://bugs.webkit.org/show_bug.cgi?id=51339

        Move inspector's resource files into the final build step to fix the layout test regression.

        * QtWebKit.pro: Add inspector's reaource files.

2011-02-22  Andras Becsi  <abecsi@webkit.org>

        Reviewed by Laszlo Gombos.
        Rubber-stamped by Csaba Osztrogonác.

        [Qt] Redesign the build system
        https://bugs.webkit.org/show_bug.cgi?id=51339

        The patch landed in r79320 didn't contain the cleanup
        which was already addressed in the last attachment.

        * QtWebKit.pro: Move common LIB and CONFIG options to WebCore.pri.

2011-02-22  Andras Becsi  <abecsi@webkit.org>

        Reviewed by Laszlo Gombos.

        [Qt] Redesign the build system
        https://bugs.webkit.org/show_bug.cgi?id=51339

        Part 2.

        Build WebCore as a static library, compile the WebKit API and WebKit2 API
        in a final step and link to WebKit2, WebCore and JSC libraries to fix
        linking issues resulting from stripped away symbols.

        * QtWebKit.pro: Added.
        Project file for the final build step.

2011-02-17  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Kent Tamura.

        Rename Position::node() to Position::deprecatedNode()
        https://bugs.webkit.org/show_bug.cgi?id=54622

        Replaced the call to node() by a call to containerNode() because the returned node is
        used to determine whether or not the selected contents are editable and such a check
        must be done against the container node.

        * WebCoreSupport/EditorClientQt.cpp:
        (WebCore::EditorClientQt::handleKeyboardEvent):

2011-02-19  Charlie Reis  <creis@chromium.org>

        Reviewed by Mihai Parparita.

        Ensure loading has stopped in HistoryController::goToItem
        https://bugs.webkit.org/show_bug.cgi?id=54517

        Add a FrameLoaderClient callback for whether to stop loading before goToItem.

        Test: http/tests/navigation/forward-to-fragment-fires-onload.html

        * WebCoreSupport/FrameLoaderClientQt.cpp:
        (WebCore::FrameLoaderClientQt::shouldStopLoadingForHistoryItem): Added.
        * WebCoreSupport/FrameLoaderClientQt.h:

2011-02-18  Fabrizio Machado  <fabrizio.machado@nokia.com>

        Reviewed by Eric Seidel.

        Remove reduntant checks.
        https://bugs.webkit.org/show_bug.cgi?id=54764
        

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::elementDoesAutoCompleteForElementWithId):
        * WebCoreSupport/NotificationPresenterClientQt.cpp:
        (WebCore::NotificationPresenterClientQt::toPage):

2011-02-18  Csaba Osztrogonác  <ossy@webkit.org>

        Unreviewed.

        [Qt] Buildfix for platforms with geolocation disabled.

        * Api/qwebpage.cpp: Add the missing guard.

2011-02-18  Mahesh Kulkarni  <mahesh.kulkarni@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Implement client based geolocation for qtport
        https://bugs.webkit.org/show_bug.cgi?id=42629

        Implements client based geolocation for qtwebkit.
        New client based geolocation contains permission API's as well,
        so removed the implementation from ChromeClientQt.cpp. 

        * Api/qwebpage.cpp:
        (QWebPagePrivate::QWebPagePrivate):
        * WebCoreSupport/ChromeClientQt.cpp:
        * WebCoreSupport/ChromeClientQt.h:
        (WebCore::ChromeClientQt::requestGeolocationPermissionForFrame):
        (WebCore::ChromeClientQt::cancelGeolocationPermissionRequestForFrame):
        * WebCoreSupport/GeolocationClientQt.cpp: Added.
        (WebCore::GeolocationClientQt::GeolocationClientQt):
        (WebCore::GeolocationClientQt::~GeolocationClientQt):
        (WebCore::GeolocationClientQt::geolocationDestroyed):
        (WebCore::GeolocationClientQt::positionUpdated):
        (WebCore::GeolocationClientQt::startUpdating):
        (WebCore::GeolocationClientQt::stopUpdating):
        (WebCore::GeolocationClientQt::setEnableHighAccuracy):
        (WebCore::GeolocationClientQt::requestPermission):
        (WebCore::GeolocationClientQt::cancelPermissionRequest):
        * WebCoreSupport/GeolocationClientQt.h: Added.
        (WebCore::GeolocationClientQt::lastPosition):

2011-02-10  Luiz Agostini  <luiz.agostini@openbossa.org>

        Reviewed by Adam Roben.

        HTML5 <details> and <summary>: localized text
        https://bugs.webkit.org/show_bug.cgi?id=54260

        The method defaultDetailsSummaryText was added to LocalizationStrategy class. It is used to
        provide the default label to be used by a <details> tag that has no <summary> child.

        * WebCoreSupport/WebPlatformStrategies.cpp:
        (WebPlatformStrategies::defaultDetailsSummaryText):
        * WebCoreSupport/WebPlatformStrategies.h:

2011-02-17  Hui Huang  <hui.2.huang@nokia.com>

        Reviewed by Laszlo Gombos.

        The URL of HTML5 Video Element is percent encoded at websites such as youtube.
        It is percent encoded again by QUrl constructor QUrl::QUrl(QString). This causes
        the HTTP GET request for the video to be rejected by the service provider. 
        https://bugs.webkit.org/show_bug.cgi?id=53973.

        The bug is fixed by constructing QUrl from the encoded URL in 
        MediaPlayerPrivateQt::commitLoad. 

        New test function tst_QWebPage::loadHtml5Video() is added to load HTML content with
        HTML5 Video element. A new public method DumpRenderTreeSupportQt::mediaContentUrlByElementId
        is added to retrieve the URL of the media content from WebCore MediaPlayerPrivateQt.
        A new macro ENABLE_QT_MULTIMEDIA is introduced in tests.pri to make sure that the test
        is skipped if Qt Multimedia is not available.

        * WebCoreSupport/DumpRenderTreeSupportQt.cpp:
        (DumpRenderTreeSupportQt::mediaContentUrlByElementId):
        * WebCoreSupport/DumpRenderTreeSupportQt.h:
        * tests/qwebpage/tst_qwebpage.cpp:
        (tst_QWebPage::loadHtml5Video):
        * tests/tests.pri:

2011-02-17  Andreas Kling  <kling@webkit.org>

        Reviewed by Antti Koivisto.

        [Qt] Crash when calling QWebFrame::setUrl() while a previous load has pending requests
        https://bugs.webkit.org/show_bug.cgi?id=49216

        * tests/qwebframe/tst_qwebframe.cpp:

== Rolled over to ChangeLog-2011-02-16 ==
