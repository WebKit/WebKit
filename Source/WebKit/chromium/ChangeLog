2013-03-24  Alpha Lam  <hclam@chromium.org>

        GIFImageReader should reports parsing error to client
        https://bugs.webkit.org/show_bug.cgi?id=113141

        Reviewed by Stephen White.

        Updated unit test that runs on a broken GIF image file, decoding should fail.

        * tests/GIFImageDecoderTest.cpp:
        (WebKit::TEST):

2013-03-22  James Robinson  <jamesr@chromium.org>

        [chromium] Wire windows scrollByPage enum up to compositor thread input handling
        https://bugs.webkit.org/show_bug.cgi?id=113117

        Reviewed by Adrienne Walker.

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::handleInputEventInternal):
        * tests/WebCompositorInputHandlerImplTest.cpp:
        (MockWebInputHandlerClient):

2013-03-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r190276.  Requested by
        "Dana Jansens" <danakj@chromium.org> via sheriffbot.

        * DEPS:

2013-03-22  Dane Wallinga  <dgwallinga@chromium.org>

        Add client callbacks to notify of changes of associated from controls
        https://bugs.webkit.org/show_bug.cgi?id=110375

        Reviewed by Ryosuke Niwa.

        Implement form association methods of ChromeClient
        to inform autofill of form changes after a page has loaded

        * public/WebAutofillClient.h:
        (WebAutofillClient):
        (WebKit::WebAutofillClient::didAssociateInput):
        (WebKit::WebAutofillClient::didAddForm):
        (WebKit::WebAutofillClient::didAssociateFormControls):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::didAssociateFormControls):
        (WebKit):
        (WebKit::ChromeClientImpl::shouldNotifyOnFormChanges):
        * src/ChromeClientImpl.h:
        (ChromeClientImpl):

2013-03-22  Alec Flett  <alecflett@chromium.org>

        [chromium] Support Quota API in Worker
        https://bugs.webkit.org/show_bug.cgi?id=112713

        Hook up WebKit side of queryUsageAndQuota. Tests
        and WebCore code will come in https://bugs.webkit.org/show_bug.cgi?id=112972

        Reviewed by David Levin.

        * WebKit.gyp:
        * public/WebCommonWorkerClient.h:
        (WebKit::WebCommonWorkerClient::queryUsageAndQuota):
        * src/StorageQuotaChromium.cpp:
        (WebCore::StorageQuota::queryUsageAndQuota):
        (WebCore::StorageQuota::requestQuota):
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::queryUsageAndQuota):
        (WebKit):
        * src/WebWorkerClientImpl.h:
        * src/WorkerStorageQuotaCallbacksBridge.cpp: Added.
        (WebKit):
        (MainThreadStorageQuotaCallbacks):
        (WebKit::MainThreadStorageQuotaCallbacks::createLeakedPtr):
        (WebKit::MainThreadStorageQuotaCallbacks::~MainThreadStorageQuotaCallbacks):
        (WebKit::MainThreadStorageQuotaCallbacks::didQueryStorageUsageAndQuota):
        (WebKit::MainThreadStorageQuotaCallbacks::didFail):
        (WebKit::MainThreadStorageQuotaCallbacks::didGrantStorageQuota):
        (WebKit::MainThreadStorageQuotaCallbacks::MainThreadStorageQuotaCallbacks):
        (WorkerStorageQuotaContextObserver):
        (WebKit::WorkerStorageQuotaContextObserver::create):
        (WebKit::WorkerStorageQuotaContextObserver::notifyStop):
        (WebKit::WorkerStorageQuotaContextObserver::WorkerStorageQuotaContextObserver):
        (WebKit::WorkerStorageQuotaCallbacksBridge::stop):
        (WebKit::WorkerStorageQuotaCallbacksBridge::cleanUpAfterCallback):
        (WebKit::WorkerStorageQuotaCallbacksBridge::WorkerStorageQuotaCallbacksBridge):
        (WebKit::WorkerStorageQuotaCallbacksBridge::~WorkerStorageQuotaCallbacksBridge):
        (WebKit::WorkerStorageQuotaCallbacksBridge::postQueryUsageAndQuotaToMainThread):
        (WebKit::WorkerStorageQuotaCallbacksBridge::queryUsageAndQuotaOnMainThread):
        (WebKit::WorkerStorageQuotaCallbacksBridge::didFailOnMainThread):
        (WebKit::WorkerStorageQuotaCallbacksBridge::didQueryStorageUsageAndQuotaOnMainThread):
        (WebKit::WorkerStorageQuotaCallbacksBridge::didFailOnWorkerThread):
        (WebKit::WorkerStorageQuotaCallbacksBridge::didQueryStorageUsageAndQuotaOnWorkerThread):
        (WebKit::WorkerStorageQuotaCallbacksBridge::runTaskOnMainThread):
        (WebKit::WorkerStorageQuotaCallbacksBridge::runTaskOnWorkerThread):
        (WebKit::WorkerStorageQuotaCallbacksBridge::dispatchTaskToMainThread):
        (WebKit::WorkerStorageQuotaCallbacksBridge::mayPostTaskToWorker):
        * src/WorkerStorageQuotaCallbacksBridge.h: Added.
        (WebCore):
        (WebKit):
        (WorkerStorageQuotaCallbacksBridge):
        (WebKit::WorkerStorageQuotaCallbacksBridge::create):

2013-03-22  Stephen Chenney  <schenney@chromium.org>

        Skia flag removal to enable bug fixes and performance improvements.

        Unreviewed code enabling.

        * skia_webkit.gyp:

2013-03-22  Tommy Widenflycht  <tommyw@google.com>

        Clean up the speach recognintion API
        https://bugs.webkit.org/show_bug.cgi?id=112916

        Reviewed by Adam Barth.

        * public/WebSpeechRecognizerClient.h:
        * src/SpeechRecognitionClientProxy.cpp:
        * src/SpeechRecognitionClientProxy.h:
        (SpeechRecognitionClientProxy):

2013-03-22  Hajime Morrita  <morrita@google.com>

        Custom Elements: "readyCallback" lifecycle callback should be called.
        https://bugs.webkit.org/show_bug.cgi?id=112538

        Reviewed by Elliott Sprehn.

        * src/WebKit.cpp: Added deliverAllLifecycleCallbacks()

2013-03-22  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Finalize the RTCPeerConnection states
        https://bugs.webkit.org/show_bug.cgi?id=112792

        Reviewed by Adam Barth.

        * src/AssertMatchingEnums.cpp:

2013-03-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r146534 and r146565.
        http://trac.webkit.org/changeset/146534
        http://trac.webkit.org/changeset/146565
        https://bugs.webkit.org/show_bug.cgi?id=113017

        "r146534 caused perf regression on Chromium Linux x64"
        (Requested by yurys on #webkit).

        * src/WebKit.cpp:

2013-03-21  Hajime Morrita  <morrita@google.com>

        Custom Elements: "readyCallback" lifecycle callback should be called.
        https://bugs.webkit.org/show_bug.cgi?id=112538

        Reviewed by Elliott Sprehn.

        * src/WebKit.cpp: Added deliverAllLifecycleCallbacks()

2013-03-21  Garrett Casto  <gcasto@chromium.org>

        [chromium] Add possibleUserNames to WebPasswordFormData
        https://bugs.webkit.org/show_bug.cgi?id=112375

        Reviewed by Adam Barth.

        * public/WebPasswordFormData.h:
        (WebPasswordFormData):
        * src/WebPasswordFormData.cpp:
        (WebKit::WebPasswordFormData::WebPasswordFormData):
        * src/WebPasswordFormUtils.cpp:
        (WebKit::findPasswordFormFields):
        * src/WebPasswordFormUtils.h:
        (PasswordFormFields):

2013-03-21  Terry Anderson  <tdanderson@chromium.org>

        [chromium] Remove SK_SUPPORT_HINTING_SCALE_FACTOR flag and code
        https://bugs.webkit.org/show_bug.cgi?id=112928

        Reviewed by Stephen White.

        This flag was only for ChromeOS builds with HighDPI. It is no longer needed and can be removed. 
        See http://crbug.com/17550

        * features.gypi:
        * tests/OpaqueRectTrackingContentLayerDelegateTest.cpp:
        * tests/PlatformContextSkiaTest.cpp:

2013-03-21  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Remove onVersionChange(string) plumbing
        https://bugs.webkit.org/show_bug.cgi?id=112712

        Reviewed by Adam Barth.

        * public/WebIDBDatabaseCallbacks.h: Remove onVersionChange(string) overload.
        * src/IDBDatabaseCallbacksProxy.cpp: Ditto.
        * src/IDBDatabaseCallbacksProxy.h: Ditto.
        * src/WebIDBDatabaseCallbacksImpl.cpp: Ditto.
        * src/WebIDBDatabaseCallbacksImpl.h: Ditto.
        * tests/IDBAbortOnCorruptTest.cpp: Ditto.
        * tests/IDBDatabaseBackendTest.cpp: Ditto.

2013-03-20  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r189497.  Requested by
        "Dana Jansens" <danakj@chromium.org> via sheriffbot.

        * DEPS:

2013-03-20  Tien-Ren Chen  <trchen@chromium.org>

        Correct coordinated scrolling for RTL iframe and overflow:scroll
        https://bugs.webkit.org/show_bug.cgi?id=112088

        Reviewed by James Robinson.

        Added test to ensure RTL iframe has appropriate impl-side scroll position.

        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::TEST_F):
        (WebKit):
        * tests/data/rtl-iframe-inner.html: Added.
        * tests/data/rtl-iframe.html: Added.

2013-03-20  Yufeng Shen  <miletus@chromium.org>

        Remove PlatformEvent::GestureDoubleTap
        https://bugs.webkit.org/show_bug.cgi?id=93045

        Reviewed by Antonio Gomes.

        PlatformEvent::GestureDoubleTap is not currently
        used in WebCore so remove it.

        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):

2013-03-20  Justin Novosad  <junov@google.com>

        [Chromium] Code cleanup: removing support for non-deferred 2d canvas rendering
        https://bugs.webkit.org/show_bug.cgi?id=112605

        Reviewed by James Robinson.

        Deleting all the code that was used for propagating and supporting
        the Chromium setting for disabling deferred 2d canvas rendering.

        * public/WebSettings.h:
        (WebKit::WebSettings::setDeferred2dCanvasEnabled):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setDeferred2dCanvasEnabled):
        * tests/Canvas2DLayerBridgeTest.cpp:
        (Canvas2DLayerBridgeTest::fullLifecycleTest):
        * tests/Canvas2DLayerManagerTest.cpp:
        (FakeCanvas2DLayerBridge::FakeCanvas2DLayerBridge):

2013-03-20  Ken Kania  <kkania@chromium.org>

        Web Inspector: Add promptText param to Page.handleJavaScriptDialog
        https://bugs.webkit.org/show_bug.cgi?id=112706

        Reviewed by Pavel Feldman.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::handleJavaScriptDialog):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::handleJavaScriptDialog):
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2013-03-19  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Migrate to WEBKIT_USE_NEW_WEBFILESYSTEMTYPE
        https://bugs.webkit.org/show_bug.cgi?id=112754

        Reviewed by Darin Fisher.

        Remove old code behind ifndef WEBKIT_USE_NEW_WEBFILESYSTEMTYPE
        now that it's always defined.

        * public/WebCommonWorkerClient.h:
        (WebCommonWorkerClient):
        * public/WebFrame.h:
        (WebFrame):
        * public/WebFrameClient.h:
        (WebFrameClient):
        (WebKit::WebFrameClient::openFileSystem):
        (WebKit::WebFrameClient::deleteFileSystem):
        * src/LocalFileSystemChromium.cpp:
        (WebCore):
        (WebCore::openFileSystemHelper):
        (WebCore::LocalFileSystem::deleteFileSystem):
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:
        (WebFrameImpl):
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::openFileSystem):
        * src/WebWorkerClientImpl.h:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        * src/WorkerFileSystemCallbacksBridge.h:
        (WorkerFileSystemCallbacksBridge):

2013-03-19  Kenneth Russell  <kbr@google.com>

        Unreviewed, rolling out r146277.
        http://trac.webkit.org/changeset/146277
        https://bugs.webkit.org/show_bug.cgi?id=111695

        Broke Chromium Android build

        * features.gypi:

2013-03-19  James Robinson  <jamesr@chromium.org>

        [chromium] Remove compositor settings that don't go through WebKit
        https://bugs.webkit.org/show_bug.cgi?id=112718

        Reviewed by Adam Barth.

        This removes settings that used to propagate through WebLayerTreeView::Settings by way of WebViewImpl but are
        now directly set by the embedder.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2013-03-19  Alpha Lam  <hclam@chromium.org>

        GIFImageReader to count frames and decode in one pass
        https://bugs.webkit.org/show_bug.cgi?id=111144

        Reviewed by Stephen White.

        Added a new GIF unit test for progressive decoding. The test is to verify
        that continually re-decoding an image one additional byte at a time produces
        the same outputs as repeatedly decoding (with brand new decoders) truncated
        versions of the image that are one byte longer each time.

        * tests/GIFImageDecoderTest.cpp:
        (WebKit::TEST):

2013-03-19  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r189038.  Requested by
        "Mark Pilgrim" <pilgrim@chromium.org> via sheriffbot.

        * DEPS:

2013-03-19  Alexei Filippov  <alph@chromium.org>

        Web Inspector: Remove flaky part of testRendererProcessNativeMemorySize test.
        https://bugs.webkit.org/show_bug.cgi?id=112703

        Reviewed by Yury Semikhatsky.

        The memory increase size check happened to be flaky. Remove it.

        * src/js/Tests.js:
        (.TestSuite.prototype.testRendererProcessNativeMemorySize.step1):
        (.TestSuite.prototype.testRendererProcessNativeMemorySize):

2013-03-18  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] Remove NCCH code that relies on boundsContainsPageScale().
        https://bugs.webkit.org/show_bug.cgi?id=112465

        Reviewed by James Robinson.

        The boundContainsPageScale API is going away, remove code that relies
        on it.

        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::NonCompositedContentHost):
        (WebKit::NonCompositedContentHost::setViewport):

2013-03-18  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Protect against key prefix overflows
        https://bugs.webkit.org/show_bug.cgi?id=111138

        Reviewed by Tony Chang.

        Add tests for invalid indexIds in basic get/put operations.

2013-03-18  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Create WebFileSystemType enum to allow easier filesystem refactoring
        https://bugs.webkit.org/show_bug.cgi?id=112571

        Reviewed by Adam Barth.

        Update function declarations for new WebFileSystemType enum. (All
        changes are behind an #ifdef so we can sync required changes in embedders.)

        * public/WebCommonWorkerClient.h:
        (WebCommonWorkerClient):
        (WebKit::WebCommonWorkerClient::openFileSystem):
        * public/WebFrame.h:
        (WebFrame):
        * public/WebFrameClient.h:
        (WebFrameClient):
        (WebKit::WebFrameClient::openFileSystem):
        (WebKit::WebFrameClient::deleteFileSystem):
        * src/LocalFileSystemChromium.cpp:
        (WebCore):
        (WebCore::openFileSystemHelper):
        (WebCore::LocalFileSystem::deleteFileSystem):
        * src/WebFrameImpl.cpp:
        (WebKit):
        (WebKit::WebFrameImpl::createFileSystem):
        (WebKit::WebFrameImpl::createSerializableFileSystem):
        (WebKit::WebFrameImpl::createFileEntry):
        * src/WebFrameImpl.h:
        (WebFrameImpl):
        * src/WebWorkerClientImpl.cpp:
        (WebKit):
        (WebKit::WebWorkerClientImpl::openFileSystem):
        * src/WebWorkerClientImpl.h:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit):
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:
        (WorkerFileSystemCallbacksBridge):

2013-03-18  John Knottenbelt  <jknotten@chromium.org>

        [Chromium] Compositor is applying scroll offset using 'programmatic' API
        https://bugs.webkit.org/show_bug.cgi?id=109712

        Reviewed by James Robinson.

        Ensure that the compositor uses non-programmatic APIs to scroll and
        scale.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setPageScaleFactor):
        (WebKit::WebViewImpl::updateMainFrameScrollPosition):
        (WebKit):
        (WebKit::WebViewImpl::applyScrollAndScale):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebFrameTest.cpp:
        * tests/WebViewTest.cpp:
        * tests/data/long_scroll.html: Added.
        * tests/data/short_scroll.html: Added.

2013-03-18  Tao Bai  <michaelbai@chromium.org>

        Access settings.defaultVideoPosterURL
        https://bugs.webkit.org/show_bug.cgi?id=112378

        Reviewed by Dimitri Glazkov.

        The defaultVideoPosterURL setting has been added in
        https://bugs.webkit.org/show_bug.cgi?id=110263,
        this added methods to access it in Chromium.
        The settings will be used by Android WebView API
        WebChromeClient.getDefaultVideoPoster()

        * public/WebSettings.h: add setDefaultVideoPosterURL
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setDefaultVideoPosterURL): set defaultVideoPosterURL
        * src/WebSettingsImpl.h: add setDefaultVideoPosterURL

2013-03-17  Adam Barth  <abarth@webkit.org>

        [Chromium] Remove unused WebNode::hasEventListeners API
        https://bugs.webkit.org/show_bug.cgi?id=112529

        Reviewed by James Robinson.

        This API no longer has any callers and can be removed.

        * public/WebNode.h:
        * src/WebNode.cpp:

2013-03-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r145898.
        http://trac.webkit.org/changeset/145898
        https://bugs.webkit.org/show_bug.cgi?id=112512

        Causing flakiness on webkit_unit_tests on android bots on
        chromium.webkit and chromium.linux (Requested by jochen__ on
        #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setPageScaleFactor):
        (WebKit::WebViewImpl::applyScrollAndScale):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebFrameTest.cpp:
        * tests/WebViewTest.cpp:

2013-03-16  Hans Wennborg  <hans@chromium.org>

        Remove redundant checks from WebInputEvent::isGestureEventType
        https://bugs.webkit.org/show_bug.cgi?id=112503

        Reviewed by Darin Fisher.

        GesturePinchBegin, GesturePinchEnd and GesturePinchUpdate were checked
        for twice.

        This was found by experimenting with a potential new Clang warning.

        * public/WebInputEvent.h:
        (WebKit::WebInputEvent::isGestureEventType):

2013-03-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r188504.  Requested by
        "Dana Jansens" <danakj@chromium.org> via sheriffbot.

        * DEPS:

2013-03-15  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Focus Plugin on TouchStart
        https://bugs.webkit.org/show_bug.cgi?id=112385

        Reviewed by Adam Barth.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleMouseEvent):
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):

2013-03-15  Jochen Eisinger  <jochen@chromium.org>

        Expose whether a UserGestureToken still has gestures via WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=112342

        Reviewed by Adam Barth.

        * public/WebUserGestureToken.h:
        (WebUserGestureToken):
        * src/WebUserGestureToken.cpp:
        (WebKit::WebUserGestureToken::hasGestures):
        (WebKit):
        * tests/WebUserGestureTokenTest.cpp:
        (WebCore::TEST):

2013-03-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r188418.  Requested by
        "Adam Barth" <abarth@webkit.org> via sheriffbot.

        * DEPS:

2013-03-15  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Handle success events arriving after context stopped
        https://bugs.webkit.org/show_bug.cgi?id=112451

        Reviewed by Tony Chang.

        * tests/IDBRequestTest.cpp:
        (WebKit::TEST_F): Add cases for onSuccess() and onSuccess(int64_t)

2013-03-15  Nate Chapin  <japhet@chromium.org>

        Hide MainResourceLoader from the outside world
        https://bugs.webkit.org/show_bug.cgi?id=109971

        Reviewed by Adam Barth.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::convertMainResourceLoadToDownload):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2013-03-15  Abhishek Arya  <inferno@chromium.org>

        Replace static_casts with to* helper functions.
        https://bugs.webkit.org/show_bug.cgi?id=112401

        Reviewed by Stephen Chenney.

        to* helper functions are preferred over static_cast calls since they
        help to catch bad casts easily on the testing infrastructure.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::scrollRect):
        (WebKit::WebPluginContainerImpl::setWantsWheelEvents):
        (WebKit::WebPluginContainerImpl::handleMouseEvent):
        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::TEST_F):

2013-03-15  Marja Hölttä  <marja@chromium.org>

        [V8] Store main world and non-main world templates separately.
        https://bugs.webkit.org/show_bug.cgi?id=111724

        Reviewed by Jochen Eisinger.

        This is needed for generating specialized bindings for the main
        world (bug 110874).

        * src/WebArrayBuffer.cpp:
        (WebKit::WebArrayBuffer::createFromV8Value):
        * src/WebArrayBufferView.cpp:
        (WebKit::WebArrayBufferView::createFromV8Value):
        * src/WebBindings.cpp:
        (WebKit::getRangeImpl):
        (WebKit::getNodeImpl):
        (WebKit::getElementImpl):
        (WebKit::getArrayBufferImpl):
        (WebKit::getArrayBufferViewImpl):

2013-03-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r145802.
        http://trac.webkit.org/changeset/145802
        https://bugs.webkit.org/show_bug.cgi?id=112444

        This broke Chrome. (Requested by marja____ on #webkit).

        * src/WebArrayBuffer.cpp:
        (WebKit::WebArrayBuffer::createFromV8Value):
        * src/WebArrayBufferView.cpp:
        (WebKit::WebArrayBufferView::createFromV8Value):
        * src/WebBindings.cpp:
        (WebKit::getRangeImpl):
        (WebKit::getNodeImpl):
        (WebKit::getElementImpl):
        (WebKit::getArrayBufferImpl):
        (WebKit::getArrayBufferViewImpl):

2013-03-15  John Knottenbelt  <jknotten@chromium.org>

        [Chromium] Compositor is applying scroll offset using 'programmatic' API
        https://bugs.webkit.org/show_bug.cgi?id=109712

        Reviewed by James Robinson.

        Ensure that the compositor uses non-programmatic APIs to scroll and
        scale.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setPageScaleFactor):
        (WebKit::WebViewImpl::updateMainFrameScrollPosition):
        (WebKit):
        (WebKit::WebViewImpl::applyScrollAndScale):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebFrameTest.cpp:
        * tests/WebViewTest.cpp:

2013-03-14  Dana Jansens  <danakj@chromium.org>

        [chromium] Make zoom filter independent of the layer size.
        https://bugs.webkit.org/show_bug.cgi?id=112221

        Reviewed by Stephen White.

        * tests/FilterOperationsTest.cpp:
        (WebKit):
        (WebKit::TEST):

2013-03-14  Manuel Rego Casasnovas  <rego@igalia.com>

        Add selectTrailingWhitespaceEnabled setting to WebCore::Page
        https://bugs.webkit.org/show_bug.cgi?id=109404

        Reviewed by Tony Chang.

        Use new Page settings for smartInsertDeleteEnabled and
        selectTrailingWhitespaceEnabled and update API accordingly.

        WebSettings API is required by DRT in order to set the proper default
        values which are different from browser defaults.

        * public/WebSettings.h: Add new API to manage smartInsertDeleteEnabled
        and selectTrailingWhitespaceEnabled settings.
        * public/WebViewClient.h: Remove API related to smartInsertDeleteEnabled
        and selectTrailingWhitespaceEnabled as they will be managed from page
        settings from now on.
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::smartInsertDeleteEnabled):
        (WebKit::EditorClientImpl::isSelectTrailingWhitespaceEnabled): Use new
        settings for smartInsertDeleteEnabled and
        selectTrailingWhitespaceEnabled.
        * src/WebSettingsImpl.cpp: Implement methods establishing the page
        settings.
        (WebKit::WebSettingsImpl::setSelectTrailingWhitespaceEnabled):
        (WebKit):
        (WebKit::WebSettingsImpl::setSmartInsertDeleteEnabled):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl): Implement new API to manage the new settings.

2013-03-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r188004.  Requested by
        "Dana Jansens" <danakj@chromium.org> via sheriffbot.

        * DEPS:

2013-03-14  James Robinson  <jamesr@chromium.org>

        [chromium] Add tools/protoc_wrapper to directories pulled in Chromium-in-WebKit configuration
        https://bugs.webkit.org/show_bug.cgi?id=112363

        Reviewed by Kenneth Russell.

        Chromium r187704 added a reference to this script to src/gpu/gpu.gyp, which we pull in the Chromium-in-WebKit
        configuration. This adds the script to DEPS so we can roll past that rev.

        * DEPS:

2013-03-14  Abhishek Arya  <inferno@chromium.org>

        Replace static_casts with to* helper functions.
        https://bugs.webkit.org/show_bug.cgi?id=112296

        Reviewed by Kentaro Hara.

        to* helper functions are preferred over static_cast calls since they
        help to catch bad casts easily on the testing infrastructure.

        * src/WebDocument.cpp:
        (WebKit::WebDocument::images):
        * src/WebElement.cpp:
        (WebKit::WebElement::operator PassRefPtr<Element>):
        * src/WebPageSerializer.cpp:
        (WebCore::retrieveResourcesForFrame):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setFocus):
        (WebKit::WebViewImpl::clearFocusedNode):
        (WebKit::WebViewImpl::scrollFocusedNodeIntoView):
        (WebKit::WebViewImpl::scrollFocusedNodeIntoRect):

2013-03-14  Marja Hölttä  <marja@chromium.org>

        [V8] Store main world and non-main world templates separately.
        https://bugs.webkit.org/show_bug.cgi?id=111724

        Reviewed by Jochen Eisinger.

        This is needed for generating specialized bindings for the main
        world (bug 110874).

        * src/WebArrayBuffer.cpp:
        (WebKit::WebArrayBuffer::createFromV8Value):
        * src/WebArrayBufferView.cpp:
        (WebKit::WebArrayBufferView::createFromV8Value):
        * src/WebBindings.cpp:
        (WebKit::getRangeImpl):
        (WebKit::getNodeImpl):
        (WebKit::getElementImpl):
        (WebKit::getArrayBufferImpl):
        (WebKit::getArrayBufferViewImpl):

2013-03-13  Rik Cabanier  <cabanier@adobe.com>

        create runtime flags for CSS Compositing
        https://bugs.webkit.org/show_bug.cgi?id=111818

        Reviewed by Ryosuke Niwa.

        Added a runtime flags to enable CSS compositing for chromium.

        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableCSSCompositing):
        (WebKit):
        (WebKit::WebRuntimeFeatures::isCSSCompositingEnabled):

2013-03-11  Kinuko Yasuda  <kinuko@chromium.org>

        Quota API: Update IDL to make it match the latest WD
        https://bugs.webkit.org/show_bug.cgi?id=88396

        Reviewed by Adam Barth.

        Add a new interface object (navigator.StorageQuota) and deprecate the old one (window.StorageInfo)
        to make the code match with the latest Quota API WD:
        http://www.w3.org/TR/quota-api/

        * WebKit.gyp:
        * src/AssertMatchingEnums.cpp:
        * src/StorageQuotaChromium.cpp: Renamed from Source/WebKit/chromium/src/StorageInfoChromium.cpp.
        (WebCore):
        (WebCore::StorageQuota::queryUsageAndQuota):
        (WebCore::StorageQuota::requestQuota):
        * src/WebStorageQuotaCallbacksImpl.cpp:
        (WebKit::WebStorageQuotaCallbacksImpl::WebStorageQuotaCallbacksImpl):
        * src/WebStorageQuotaCallbacksImpl.h:
        (WebCore):
        (WebStorageQuotaCallbacksImpl):

2013-03-13  Chris Palmer  <palmer@google.com>

        Enable V8 binding integriy on Android.
        https://bugs.webkit.org/show_bug.cgi?id=112297

        Reviewed by Adam Barth.

        * features.gypi:

2013-03-13  Michael Nordman  <michaeln@google.com>

        [Chromium] FileSystem mods: Changes to snapshot file creation to reduce dependencies on blobs.
        No longer send a |blobURL| to the browser process, no longer expect the browser process
        to have registered a blob with that url.
        https://bugs.webkit.org/show_bug.cgi?id=108851

        Reviewed by Adam Barth.

        * src/AsyncFileSystemChromium.cpp:
        (WebCore):
        (WebCore::FileWriterHelperCallbacks::didCreateSnapshotFile):
        (WebCore::AsyncFileSystemChromium::createSnapshotFileAndReadMetadata):
        * src/AsyncFileSystemChromium.h:
        (AsyncFileSystemChromium):
        * src/LocalFileSystemChromium.cpp:
        (WebCore):
        * src/WebFileSystemCallbacksImpl.cpp:
        (WebKit::WebFileSystemCallbacksImpl::didCreateSnapshotFile):
        (WebKit):
        * src/WebFileSystemCallbacksImpl.h:
        (WebCore):
        (WebFileSystemCallbacksImpl):
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::createSnapshotFileAndReadMetadata):
        (WebCore::WorkerAsyncFileSystemChromium::createWorkerFileSystemCallbacksBridge):
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::MainThreadFileSystemCallbacks::didCreateSnapshotFile):
        (MainThreadFileSystemCallbacks):
        (WebKit::WorkerFileSystemCallbacksBridge::postCreateSnapshotFileToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::createSnapshotFileOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didCreateSnapshotFileOnMainThread):
        (WebKit):
        (WebKit::WorkerFileSystemCallbacksBridge::WorkerFileSystemCallbacksBridge):
        (WebKit::WorkerFileSystemCallbacksBridge::didCreateSnapshotFileOnWorkerThread):
        * src/WorkerFileSystemCallbacksBridge.h:
        (WebCore):
        (WebKit):
        (WebKit::WorkerFileSystemCallbacksBridge::create):
        (WorkerFileSystemCallbacksBridge):

2013-03-13  Adam Barth  <abarth@webkit.org>

        [Chromium] Restrict WebNode::addEventListener and friends to a whitelist of event types
        https://bugs.webkit.org/show_bug.cgi?id=112195

        Reviewed by Eric Seidel.

        Chromium only uses these APIs in extremely narrow ways. In order to
        discourage Chromium from using these APIs in broader ways, this patch
        restricts the APIs to a small whitelist of event types.

        We might want to add some sort of flag to let CEF use expose these APIs
        more broadly.

        * WebKit.gypi:
        * public/WebNode.h:
        * src/WebNode.cpp:
        (WebKit::WebNode::hasEventListeners):
        (WebKit::WebNode::addEventListener):
        * tests/EventListenerTest.cpp: Removed.
            - These tests of DOM mutation events are no longer needed because we
              don't support listening for DOM mutation events via the API
              anymore.

2013-03-13  Stephen Chenney  <schenney@chromium.org>

        Add new Skia code suppression flags

        Unreviewed build update.

        * skia_webkit.gyp: Add 'SK_DISABLE_BLUR_ROUNDING', 'SK_IGNORE_SUBPIXEL_AXIS_ALIGN_FIX',
            'SK_IGNORE_PICTURE_RECORD_SAVE_LAYER_OPT', 'SK_IGNORE_FAST_RECT_BLUR', 'SK_IGNORE_CUBIC_STROKE_FIX'

2013-03-13  Aaron Colwell  <acolwell@chromium.org>

        Cleanup dead MediaSource code now that the Chromium-side refactor is complete.
        https://bugs.webkit.org/show_bug.cgi?id=110371

        Reviewed by Adam Barth.

        * public/WebMediaPlayer.h:
        (WebKit):
        (WebMediaPlayer): Remove old MediaSource methods and default MediaSource load() implementation.
        * public/WebMediaPlayerClient.h: Remove old MediaSource methods.
        * src/WebMediaPlayerClientImpl.cpp: Remove WebMediaSourceClientImpl & WebSourceBufferImpl classes that
                                            are no longer needed.
        * src/WebMediaPlayerClientImpl.h: Remove old MediaSource methods.
        (WebMediaPlayerClientImpl):

2013-03-13  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: get rid of hiddenPanels filter
        https://bugs.webkit.org/show_bug.cgi?id=112252

        Reviewed by Vsevolod Vlasov.

        * src/InspectorFrontendClientImpl.cpp:
        * src/InspectorFrontendClientImpl.h:
        (InspectorFrontendClientImpl):

2013-03-13  Mikhail Naganov  <mnaganov@chromium.org>

        [Chromium] Rename android_build_type to android_webview_build in .gyp files.
        https://bugs.webkit.org/show_bug.cgi?id=112129

        Reviewed by Adam Barth.

        Following Chromium
        http://src.chromium.org/viewvc/chrome?view=rev&revision=187556
        this is being renamed to better explain what it does.

        * WebKitUnitTests.gyp:

2013-03-13  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: convert workers inspection into capability
        https://bugs.webkit.org/show_bug.cgi?id=112251

        Reviewed by Vsevolod Vlasov.

        * src/InspectorFrontendClientImpl.cpp:
        * src/InspectorFrontendClientImpl.h:
        (InspectorFrontendClientImpl):

2013-03-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r187688.  Requested by
        "James Robinson" <jamesr@chromium.org> via sheriffbot.

        * DEPS:

2013-03-12  Jun Jiang  <jun.a.jiang@intel.com>

        Enable GPU-GPU texture copy in texImage2D() for HTMLVideoElement if hardware accelerated video decode is in use
        https://bugs.webkit.org/show_bug.cgi?id=111126

        Reviewed by Kenneth Russell.

        * public/WebMediaPlayer.h:
        (WebKit::WebMediaPlayer::copyVideoTextureToPlatformTexture):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::copyVideoTextureToPlatformTexture): do a GPU-GPU textures copy if possible.
        * src/WebMediaPlayerClientImpl.h:
        (WebMediaPlayerClientImpl):

2013-03-12  Adam Barth  <abarth@webkit.org>

        [Chromium] WebFrame event listener APIs are unused and can be removed
        https://bugs.webkit.org/show_bug.cgi?id=112189

        Reviewed by Darin Fisher.

        As far as I can tell, there are no callers for these APIs. They appear
        to have been added for out-of-process postMessages, but those are now
        implemented using a different mechanism.

        * public/WebFrame.h:
        (WebFrame):
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:
        (WebFrameImpl):

2013-03-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r187660.  Requested by
        "Adam Barth" <abarth@webkit.org> via sheriffbot.

        * DEPS:

2013-03-12  Adam Barth  <abarth@webkit.org>

        [Chromium] Remove WEBKIT_USING_V8 from the WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=112120

        Reviewed by Tony Chang.

        Chromium always uses V8. This macro has outlived it's usefulness. It's
        now just noise.

        * README:
        * public/WebArrayBuffer.h:
        (WebArrayBuffer):
        * public/WebArrayBufferView.h:
        (WebArrayBufferView):
        * public/WebBindings.h:
        (WebBindings):
        * public/WebBlob.h:
        (WebBlob):
        * public/WebFrame.h:
        (WebFrame):
        * public/WebFrameClient.h:
        * public/WebSerializedScriptValue.h:
        (WebSerializedScriptValue):
        * src/WebArrayBuffer.cpp:
        (WebKit::WebArrayBuffer::createFromV8Value):
        * src/WebArrayBufferView.cpp:
        (WebKit::WebArrayBufferView::createFromV8Value):
        * src/WebBindings.cpp:
        (WebKit::WebBindings::toV8Value):
        * src/WebBlob.cpp:
        (WebKit::WebBlob::toV8Value):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrame::frameForContext):
        * src/WebFrameImpl.h:
        (WebFrameImpl):
        * src/WebSerializedScriptValue.cpp:
        (WebKit::WebSerializedScriptValue::serialize):
        (WebKit::WebSerializedScriptValue::deserialize):

2013-03-12  Abhishek Arya  <inferno@chromium.org>

        Replace static_casts with to* functions.
        https://bugs.webkit.org/show_bug.cgi?id=112072

        Reviewed by Philip Rogers.

        to* functions are preferred over static_cast calls since they
        help to catch bad casts easily on the testing infrastructure.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::focusedNodeChanged):
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/DOMUtilitiesPrivate.cpp:
        (WebCore::toHTMLElement):
        * src/WebSearchableFormData.cpp:
        (HTMLNames::IsSelectInDefaultState):

2013-03-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r145462.
        http://trac.webkit.org/changeset/145462
        https://bugs.webkit.org/show_bug.cgi?id=112097

        Compilation failure in PluginView.cpp (Requested by jamesr_ on
        #webkit).

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::focusedNodeChanged):
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/DOMUtilitiesPrivate.cpp:
        (WebCore::toHTMLElement):
        * src/WebSearchableFormData.cpp:
        (HTMLNames::IsSelectInDefaultState):

2013-03-11  Abhishek Arya  <inferno@chromium.org>

        Replace static_casts with to* functions.
        https://bugs.webkit.org/show_bug.cgi?id=112072

        Reviewed by Philip Rogers.

        to* functions are preferred over static_cast calls since they
        help to catch bad casts easily on the testing infrastructure.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::focusedNodeChanged):
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/DOMUtilitiesPrivate.cpp:
        (WebCore::toHTMLElement):
        * src/WebSearchableFormData.cpp:
        (HTMLNames::IsSelectInDefaultState):

2013-03-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r187216.  Requested by
        "James Robinson" <jamesr@chromium.org> via sheriffbot.

        * DEPS:

2013-03-11  Jochen Eisinger  <jochen@chromium.org>

        Rename DefinitelyProcessingUserGesture to DefinitelyProcessingNewUserGesture
        https://bugs.webkit.org/show_bug.cgi?id=111959

        Reviewed by Alexey Proskuryakov.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::executeScriptAndReturnValue):
        * src/WebNotification.cpp:
        (WebKit::WebNotification::dispatchClickEvent):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleEvent):
        (WebKit::WebPluginContainerImpl::loadFrameRequest):
        * src/WebScopedUserGesture.cpp:
        (WebKit::WebScopedUserGesture::initialize):
        * tests/WebUserGestureTokenTest.cpp:
        (WebCore::TEST):

2013-03-11  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move WebFileSystemCallbacks to Platform/
        https://bugs.webkit.org/show_bug.cgi?id=112049

        Reviewed by Adam Barth.

        In preparation for moving filesystem-related methods from
        WebFrameClient to Platform.

        * WebKit.gyp:
        * public/WebFileError.h:
        * public/WebFileSystemCallbacks.h:
        * public/WebFileSystemEntry.h:
        * public/WebFileWriterClient.h:
        * src/AssertMatchingEnums.cpp:
        * src/AsyncFileWriterChromium.h:
        * src/LocalFileSystemChromium.cpp:
        * src/WebFileSystemCallbacksImpl.cpp:
        * src/WebFileSystemCallbacksImpl.h:
        * src/WebSharedWorkerImpl.cpp:
        * src/WebWorkerClientImpl.cpp:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        * src/WorkerFileSystemCallbacksBridge.h:
        * src/WorkerFileWriterCallbacksBridge.h:

2013-03-11  Abhishek Arya  <inferno@chromium.org>

        Replace static_cast with to* helper functions.
        https://bugs.webkit.org/show_bug.cgi?id=112045

        Reviewed by Eric Seidel.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::findChildByExpression):
        (WebKit::WebFrameImpl::fromFrameOwnerElement):
        * src/WebHelperPluginImpl.cpp:
        (WebKit::WebHelperPluginImpl::getPlugin):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::loadInternal):
        (WebKit::WebMediaPlayerClientImpl::create):
        * src/WebPageSerializerImpl.cpp:
        (WebKit::WebPageSerializerImpl::preActionBeforeSerializeOpenTag):
        (WebKit::WebPageSerializerImpl::endTagToString):
        (WebKit::WebPageSerializerImpl::buildContentForNode):
        (WebKit::WebPageSerializerImpl::collectTargetFrames):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::autocompleteHandleKeyEvent):
        (WebKit::WebViewImpl::enterFullScreenForElement):

2013-03-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r145435.
        http://trac.webkit.org/changeset/145435
        https://bugs.webkit.org/show_bug.cgi?id=112082

        Still does not compile (Requested by jamesr on #webkit).

        * tests/IDBBackingStoreTest.cpp:
        (WebCore::IDBBackingStoreTest::SetUp):
        (IDBBackingStoreTest):
        (WebCore::TEST_F):
        * tests/IDBFakeBackingStore.h:
        * tests/IDBLevelDBCodingTest.cpp:
        (IDBLevelDBCoding):
        (IDBLevelDBCoding::TEST):

2013-03-11  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Protect against key prefix overflows
        https://bugs.webkit.org/show_bug.cgi?id=111138

        Reviewed by Tony Chang.

        Add tests for invalid indexIds in basic get/put operations.

2013-03-11  Xiyuan Xia  <xiyuan@chromium.org>

        [Chromium] chromium/linux breaks expectation of select popup background due to bad UA css rules
        https://bugs.webkit.org/show_bug.cgi?id=111873

        Reviewed by Tony Chang.

        Update PopupMenuStyle constructor call sites.

        * src/AutofillPopupMenuClient.cpp:
        (WebKit::AutofillPopupMenuClient::initialize):

2013-03-11  Abhishek Arya  <inferno@chromium.org>

        Add ASSERT_WITH_SECURITY_IMPLICATION to catch bad casts.
        https://bugs.webkit.org/show_bug.cgi?id=112060

        Reviewed by Eric Seidel.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::redirectDataToPlugin):

2013-03-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r145375.
        http://trac.webkit.org/changeset/145375
        https://bugs.webkit.org/show_bug.cgi?id=112050

        Does not compile (Requested by jamesr on #webkit).

        * tests/IDBBackingStoreTest.cpp:
        (WebCore::IDBBackingStoreTest::SetUp):
        (IDBBackingStoreTest):
        (WebCore::TEST_F):
        * tests/IDBFakeBackingStore.h:

2013-03-11  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Protect against key prefix overflows
        https://bugs.webkit.org/show_bug.cgi?id=111138

        Reviewed by Tony Chang.

        Add tests for invalid indexIds in basic get/put operations.

2013-03-11  Chris Hopman  <cjhopman@chromium.org>

        [chromium] Android apk targets should depend directly on Java library targets
        https://bugs.webkit.org/show_bug.cgi?id=111746

        Reviewed by Eric Seidel.

        * WebKitUnitTests.gyp:
        Make webkit_unit_tests_apk depend directly on base_java and net_java.

2013-03-11  Jochen Eisinger  <jochen@chromium.org>

        [chromium] remove obsolete user gesture methods from WebFrame
        https://bugs.webkit.org/show_bug.cgi?id=111696

        Reviewed by Adam Barth.

        * public/WebFrame.h:
        (WebFrame):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidNavigateWithinPage):
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:
        (WebFrameImpl):

2013-03-09  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Remove deprecated flingStart.sourceDevice from WebGestureEvent
        https://bugs.webkit.org/show_bug.cgi?id=111866

        Reviewed by James Robinson.

        * public/WebInputEvent.h:

2013-03-09  David Dorwin  <ddorwin@chromium.org>

        [chromium] Set the Helper Plugin's URL to that of the host document.
        https://bugs.webkit.org/show_bug.cgi?id=111913

        This allows content settings, etc. to be based on the document hosting
        the element that requested the Helper Plugin.

        Reviewed by Adam Barth.

        * src/WebHelperPluginImpl.cpp:
        (WebKit::writeDocument):
        (WebKit::WebHelperPluginImpl::initialize):
        (WebKit::WebHelperPluginImpl::initializePage):
        * src/WebHelperPluginImpl.h:
        (WebKit):
        (WebHelperPluginImpl):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::createHelperPlugin):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::createHelperPlugin):
        * src/WebViewImpl.h:
        (WebViewImpl):

2013-03-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r187037.  Requested by
        "James Robinson" <jamesr@chromium.org> via sheriffbot.

        * DEPS:

2013-03-08  James Robinson  <jamesr@chromium.org>

        [chromium] Remove WebLayerTreeViewClient and WebLayerTreeView::Settings
        https://bugs.webkit.org/show_bug.cgi?id=111632

        Reviewed by Adrienne Walker.

        * public/WebWidgetClient.h:
        (WebWidgetClient):
        (WebKit::WebWidgetClient::initializeLayerTreeView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:
        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::FakeWebViewClient::initializeLayerTreeView):

2013-03-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r186991.  Requested by
        "James Robinson" <jamesr@chromium.org> via sheriffbot.

        * DEPS:

2013-03-08  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Use WeakPtr for Factory-to-BackingStore reference
        https://bugs.webkit.org/show_bug.cgi?id=111459

        Reviewed by Adam Barth.

        Add new test that verifies refcounts.

        * WebKit.gyp: Don't include files depending on webkit_support.
        * tests/IDBBackingStoreTest.cpp:
        (WebCore::IDBBackingStoreTest::SetUp): No need for dummy factory.
        (MockIDBFactoryBackend): Allow access to protected openBackingStore method.
        (WebCore::TEST): Add new test that verifies refcounts.
        * tests/IDBCleanupOnIOErrorTest.cpp:
        (WebCore::TEST): No need for dummy factory.

2013-03-07  Keishi Hattori  <keishi@webkit.org>

        Update calendar picker UI
        https://bugs.webkit.org/show_bug.cgi?id=109439

        Reviewed by Kent Tamura.

        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::writeDocument): Adding shortMonthLabels property.

2013-03-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r145166.
        http://trac.webkit.org/changeset/145166
        https://bugs.webkit.org/show_bug.cgi?id=111819

        build break - no symbol
        webkit_support::CreateScopedTempDirectory() (Requested by
        hayato on #webkit).

        * tests/IDBBackingStoreTest.cpp:
        (WebCore::IDBBackingStoreTest::SetUp):
        (IDBBackingStoreTest):
        * tests/IDBCleanupOnIOErrorTest.cpp:
        (WebCore::TEST):

2013-03-07  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Use WeakPtr for Factory-to-BackingStore reference
        https://bugs.webkit.org/show_bug.cgi?id=111459

        Reviewed by Adam Barth.

        Added tests to verify refcounts on backing stores, update method signatures.

        * tests/IDBBackingStoreTest.cpp:
        (WebCore::IDBBackingStoreTest::SetUp): No dummy factory needed.
        (MockIDBFactoryBackend): Expose protected method to tests.
        (WebCore::TEST): Added BackingStoreLifetime test.
        * tests/IDBCleanupOnIOErrorTest.cpp: No dummy factory needed.

2013-03-06  James Robinson  <jamesr@chromium.org>

        [chromium] Stop using WebTransformationMatrix on WebLayer
        https://bugs.webkit.org/show_bug.cgi?id=111635

        Reviewed by Adrienne Walker.

        * src/LinkHighlight.cpp:
        (WebKit::LinkHighlight::computeEnclosingCompositingLayer):
        * tests/GraphicsLayerChromiumTest.cpp:
        (GraphicsLayerChromiumTest):

2013-03-07  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Update some #includes for WebMessagePortChannel.h
        https://bugs.webkit.org/show_bug.cgi?id=111752

        Reviewed by James Robinson.

        In anticipation of removing
        WK/chromium/public/WebMessagePortChannel.h (once all downstream
        references have been updated)

        * public/WebDOMMessageEvent.h:
        * public/WebFrame.h:
        * public/WebSharedWorkerClient.h:

2013-03-07  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove WK/chromium/public/WebStorageArea.h
        https://bugs.webkit.org/show_bug.cgi?id=111744

        Reviewed by James Robinson.

        File moved to new Platform/ directory. All references have already
        been updated (including downstream).

        * public/WebStorageArea.h: Removed.

2013-03-07  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Update some #includes for WebFileInfo.h in WK/chromium/src/
        https://bugs.webkit.org/show_bug.cgi?id=111741

        Reviewed by James Robinson.

        In preparation for removing WK/chromium/public/WebFileInfo.h.

        * src/AssertMatchingEnums.cpp:

2013-03-07  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove WK/chromium/public/WebWorkerRunLoop.h
        https://bugs.webkit.org/show_bug.cgi?id=111740

        Reviewed by James Robinson.

        No longer needed; all references have been updated to new version
        in top-level Platform/ directory.

        * public/WebWorkerRunLoop.h: Removed.

2013-03-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r186592.  Requested by
        "Dana Jansens" <danakj@chromium.org> via sheriffbot.

        * DEPS:

2013-03-07  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Update some #includes for WebVideoFrame.h
        https://bugs.webkit.org/show_bug.cgi?id=111739

        Reviewed by James Robinson.

        In anticipation of removing WebVideoFrame.h from WK/chromium/public/.

        * public/WebMediaPlayer.h:

2013-03-07  Dana Jansens  <danakj@chromium.org>

        [chromium] Remove WebView's sharedGraphicsContext3D method.
        https://bugs.webkit.org/show_bug.cgi?id=111499

        Reviewed by James Robinson.

        * public/WebView.h:
        (WebView):
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:
        (WebViewImpl):

2013-03-07  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Support a shortcut for reloading front-end in debug mode.
        https://bugs.webkit.org/show_bug.cgi?id=111709

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:

2013-03-07  Alexei Filippov  <alph@chromium.org>

        Web Inspector: Add more diagnostics output to testRendererProcessNativeMemorySize
        https://bugs.webkit.org/show_bug.cgi?id=111599

        Reviewed by Yury Semikhatsky.

        Add the process size to the test output.

        * src/js/Tests.js:

2013-03-07  Jochen Eisinger  <jochen@chromium.org>

        [chromium] expose UserGestureToken via WebKit API so PPAPI plugins can correctly consume it
        https://bugs.webkit.org/show_bug.cgi?id=104268

        Reviewed by Darin Fisher.

        Currently, the PPAPI creates a WebScopedUserGesture up to 10 seconds
        after a call with an currently active user gesture was made. It should
        use the newly added WebUserGestureToken to make sure this user gesture
        is not consumed multiple times.

        We can't require a WebUserGestureToken for a WebScopedUserGesture, since
        e.g. the extension API needs to be able to create a WebScopedUserGesture
        out of the blue.

        * WebKit.gyp:
        * WebKit.gypi:
        * public/WebScopedUserGesture.h:
        (WebKit):
        (WebKit::WebScopedUserGesture::WebScopedUserGesture):
        (WebScopedUserGesture):
        * public/WebUserGestureIndicator.h:
        (WebKit):
        (WebUserGestureIndicator):
        * public/WebUserGestureToken.h: Copied from Source/WebKit/chromium/public/WebScopedUserGesture.h.
        (WebCore):
        (WebKit):
        (WebUserGestureToken):
        (WebKit::WebUserGestureToken::WebUserGestureToken):
        (WebKit::WebUserGestureToken::operator=):
        (WebKit::WebUserGestureToken::~WebUserGestureToken):
        (WebKit::WebUserGestureToken::isNull):
        * src/WebScopedUserGesture.cpp:
        (WebKit::WebScopedUserGesture::initializeWithToken):
        (WebKit):
        * src/WebUserGestureIndicator.cpp:
        (WebKit::WebUserGestureIndicator::currentUserGestureToken):
        (WebKit):
        * src/WebUserGestureToken.cpp: Copied from Source/WebKit/chromium/src/WebUserGestureIndicator.cpp.
        (WebKit):
        (WebKit::WebUserGestureToken::WebUserGestureToken):
        (WebKit::WebUserGestureToken::operator WebCore::UserGestureToken*):
        (WebKit::WebUserGestureToken::assign):
        (WebKit::WebUserGestureToken::reset):
        * tests/WebUserGestureTokenTest.cpp: Copied from Source/WebKit/chromium/src/WebUserGestureIndicator.cpp.
        (WebCore):
        (WebCore::TEST):

2013-03-06  David Dorwin  <ddorwin@chromium.org>

        [chromium] Fix typo: destoryPage() => destroyPage()
        https://bugs.webkit.org/show_bug.cgi?id=111664

        Reviewed by Kentaro Hara.

        * src/WebHelperPluginImpl.cpp:
        (WebKit::WebHelperPluginImpl::closeHelperPlugin):
        (WebKit::WebHelperPluginImpl::destroyPage):
        * src/WebHelperPluginImpl.h:
        (WebHelperPluginImpl):
        * src/WebPagePopupImpl.cpp:
        (WebKit::WebPagePopupImpl::destroyPage):
        (WebKit::WebPagePopupImpl::close):
        (WebKit::WebPagePopupImpl::closePopup):
        * src/WebPagePopupImpl.h:
        (WebPagePopupImpl):

2013-03-06  Ankur Taly  <ataly@google.com>

        Modify log method in WebDOMActivityLogger so that the apiName and
        extraInfo arguments are of type const WebString& instead of const char*.
        This change gets rid of some of the memory ownership issues that arise
        with char* pointers.
        https://bugs.webkit.org/show_bug.cgi?id=111483

        Reviewed by Adam Barth.

        There are no new tests as there is no change in behavior.

        * public/WebDOMActivityLogger.h: Added property svn:eol-style.
        (WebKit::WebDOMActivityLogger::log):
        * src/WebDOMActivityLogger.cpp: Added property svn:eol-style.
        (WebKit::DOMActivityLoggerContainer::log):

2013-03-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r186511.  Requested by
        "James Robinson" <jamesr@chromium.org> via sheriffbot.

        * DEPS:

2013-03-06  Terry Anderson  <tdanderson@chromium.org>

        [chromium] |m_gestureScrollOnImplThread| is not reset to false following the end of a fling on the fast path
        https://bugs.webkit.org/show_bug.cgi?id=111390

        Reviewed by James Robinson.

        If there is a fast path gesture scroll which turns into a fling, the member
        |m_gestureScrollOnImplThread| is not reset to false once the fling ends. As a
        result, GestureScrollUpdate events belonging to a subsequent scroll are always
        handled on the fast path, even if they should have been handled on the slow
        path instead.

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::cancelCurrentFling):
        * src/WebCompositorInputHandlerImpl.h:
        (WebCompositorInputHandlerImpl):
        (WebKit::WebCompositorInputHandlerImpl::isGestureScrollOnImplThread):
        * tests/WebCompositorInputHandlerImplTest.cpp:
        (WebKit::TEST_F):
        (WebKit):

2013-03-06  James Robinson  <jamesr@chromium.org>

        [chromium] Express webkit_unit_tests' dependency on DumpRenderTree.pak in gyp
        https://bugs.webkit.org/show_bug.cgi?id=111508

        Reviewed by Dirk Pranke.

        Some tests in webkit_unit_tests, for example WebPageSerializerTest.HTMLNodes, depend on localizable resources
        from a pak file. Since unit tests initialize for testing with the same webkit_support functions as layout tests
        they end up using DumpRenderTree.pak, but this dependency isn't listed explicitly in the gyp so if you manage to
        run webkit_unit_tests without building DumpRenderTree first these tests just crash.

        This adds a dependency from webkit_unit_tests to DumpRenderTree_resources so the pak is always built. It's a bit
        weird for a gyp file in Source/WebKit/chromium/ to reach into Tools/DumpRenderTree, but I can't think of
        anything better.

        * WebKitUnitTests.gyp:

2013-03-06  Jochen Eisinger  <jochen@chromium.org>

        [chromium] introduce WebUserGestureIndicator
        https://bugs.webkit.org/show_bug.cgi?id=111531

        Reviewed by Adam Barth.

        Currently, an embedder needs to have a WebFrame to check whether a
        user gesture is being processed and to consume a user gesture. However,
        the user gesture state is independed of a frame.

        * WebKit.gyp:
        * public/WebFrame.h:
        (WebFrame):
        * public/WebUserGestureIndicator.h: Added.
        (WebKit):
        (WebUserGestureIndicator):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::isProcessingUserGesture):
        (WebKit::WebFrameImpl::consumeUserGesture):
        * src/WebUserGestureIndicator.cpp: Added.
        (WebKit):
        (WebKit::WebUserGestureIndicator::isProcessingUserGesture):
        (WebKit::WebUserGestureIndicator::consumeUserGesture):

2013-03-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r186371.  Requested by
        "Dana Jansens" <danakj@chromium.org> via sheriffbot.

        * DEPS:

2013-03-06  Andrey Lushnikov  <lushnikov@chromium.org>

        Web Inspector: test that "importScript" is used only in module heads.
        https://bugs.webkit.org/show_bug.cgi?id=111548

        Reviewed by Pavel Feldman.

        Test that output file after all inlines does not have any 'importScript(s)' statements.

        * scripts/inline_js_imports.py:
        (main):

2013-03-05  Alexandre Elias  <aelias@chromium.org>

        [chromium] Scroll deltas should be floats
        https://bugs.webkit.org/show_bug.cgi?id=111465

        Reviewed by James Robinson.

        This converts the remaining scroll delta fields to floats so that
        we no longer lose precision due to DIP conversion. The natural
        type for deltas is WebFloatSize, which was missing, so I also created
        that type based on the existing WebSize header.

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::handleInputEventInternal):
        (WebKit::WebCompositorInputHandlerImpl::touchpadFlingScroll):
        (WebKit::WebCompositorInputHandlerImpl::scrollBy):
        * src/WebCompositorInputHandlerImpl.h:
        (WebCompositorInputHandlerImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollBy):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebCompositorInputHandlerImplTest.cpp:
        (MockWebInputHandlerClient):
        (WebKit::TEST_F):

2013-03-05  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Add IDBBackingStoreTest
        https://bugs.webkit.org/show_bug.cgi?id=111233

        Reviewed by Adam Barth.

        Add some really simple IDBBackingStore tests
        as a seed for additional tests later.

        * WebKit.gypi:
        * tests/IDBBackingStoreTest.cpp: Added.

2013-03-04  James Robinson  <jamesr@chromium.org>

        [chromium] Move check for threaded compositing from WebCompositorSupport to Platform
        https://bugs.webkit.org/show_bug.cgi?id=111386

        Reviewed by Adrienne Walker.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::scheduleAnimation):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::scheduleComposite):
        * tests/Canvas2DLayerBridgeTest.cpp:
        (Canvas2DLayerBridgeTest::fullLifecycleTest):
        * tests/Canvas2DLayerManagerTest.cpp:
        (FakeCanvas2DLayerBridge::FakeCanvas2DLayerBridge):

2013-03-05  James Weatherall  <wez@chromium.org>

        keydown and keyup events have zero keycode for some numeric pad keys under Chromium on Linux
        https://bugs.webkit.org/show_bug.cgi?id=85642

        Add tests to verify that the fixed keys generate the same keyCode values as their equivalents.

        Reviewed by Ojan Vafai.

        * WebKit.gypi:
        * tests/KeyCodeConversionTestGtk.cpp: Added.
        (WebCore):
        (WebCore::TEST):

2013-03-05  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Properly refactor frontend/backend code by #includes
        https://bugs.webkit.org/show_bug.cgi?id=110653

        Reviewed by Dimitri Glazkov.

        Clean up the frontend/backend WebIDB* implementations to
        match the changes to webkit.

2013-03-05  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r144798.
        http://trac.webkit.org/changeset/144798
        https://bugs.webkit.org/show_bug.cgi?id=111478

        "broke chromium windows build" (Requested by dpranke on
        #webkit).

        * src/AssertMatchingEnums.cpp:
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::openCursor):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::openCursor):
        * tests/IDBAbortOnCorruptTest.cpp:
        * tests/IDBDatabaseBackendTest.cpp:
        * tests/IDBFakeBackingStore.h:

2013-03-05  Charlie Reis  <creis@chromium.org>

        Add FrameLoaderClient::didAccessInitialDocument
        https://bugs.webkit.org/show_bug.cgi?id=107963

        Notifies WebFrameClient if another page accesses the initial
        empty document of a main frame.  In this case, it is no longer
        safe to display the provisional URL.

        Reviewed by Adam Barth.

        * public/WebFrameClient.h:
        (WebFrameClient):
        (WebKit::WebFrameClient::didAccessInitialDocument):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didAccessInitialDocument):
        (WebKit):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):
        * tests/WebFrameTest.cpp:

2013-03-05  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Properly refactor frontend/backend code by #includes
        https://bugs.webkit.org/show_bug.cgi?id=110653

        Reviewed by Dimitri Glazkov.

        Clean up the frontend/backend WebIDB* implementations to
        match the changes to webkit.

2013-03-05  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r186200.  Requested by
        "James Robinson" <jamesr@chromium.org> via sheriffbot.

        * DEPS:

2013-03-05  James Robinson  <jamesr@chromium.org>

        [chromium] Clean up WebWidget / WebLayerTreeView interactions
        https://bugs.webkit.org/show_bug.cgi?id=109125

        Reviewed by Adrienne Walker.

        This removes most of the compositing control flow logic from WebViewImpl since
        it is now handled in the embedding layer (by the implementation of WebViewClient/WebWidgetClient).

        * public/WebViewClient.h:
        * public/WebWidget.h:
        (WebKit):
        (WebKit::WebWidget::animate):
        (WebWidget):
        (WebKit::WebWidget::didExitCompositingMode):
        (WebKit::WebWidget::createInputHandler):
        (WebKit::WebWidget::applyScrollAndScale):
        (WebKit::WebWidget::instrumentBeginFrame):
        (WebKit::WebWidget::instrumentWillBeginFrame):
        (WebKit::WebWidget::instrumentDidCancelFrame):
        (WebKit::WebWidget::instrumentDidBeginFrame):
        (WebKit::WebWidget::instrumentWillComposite):
        * src/WebHelperPluginImpl.cpp:
        * src/WebHelperPluginImpl.h:
        (WebHelperPluginImpl):
        * src/WebPagePopupImpl.cpp:
        * src/WebPagePopupImpl.h:
        (WebPagePopupImpl):
        * src/WebPopupMenuImpl.cpp:
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::instrumentWillBeginFrame):
        (WebKit::WebViewImpl::instrumentDidBeginFrame):
        (WebKit::WebViewImpl::instrumentDidCancelFrame):
        (WebKit::WebViewImpl::instrumentWillComposite):
        (WebKit):
        (WebKit::WebViewImpl::updateBatteryStatus):
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::didExitCompositingMode):
        * src/WebViewImpl.h:
        * tests/WebLayerTreeViewTestCommon.h:
        (MockWebLayerTreeViewClient):

2013-03-05  Alexei Filippov  <alph@chromium.org>

        Web Inspector: Add a renderer process memory size test.
        https://bugs.webkit.org/show_bug.cgi?id=111337

        Reviewed by Yury Semikhatsky.

        The test checks that the renderer process memory size
        is obtained from the browser and reported to the inspector
        frontend correctly.

        * src/js/Tests.js:
        (.TestSuite.prototype.testRendererProcessNativeMemorySize.checkFuzzyValue):
        (.TestSuite.prototype.testRendererProcessNativeMemorySize.step2):

2013-03-04  Chris Fleizach  <cfleizach@apple.com>

        AX: cellForColumnAndRow fails for tables with hidden table cells
        https://bugs.webkit.org/show_bug.cgi?id=110050

        Reviewed by Tim Horton.

        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::cellColumnIndex):
        (WebKit::WebAccessibilityObject::cellColumnSpan):
        (WebKit::WebAccessibilityObject::cellRowIndex):
        (WebKit::WebAccessibilityObject::cellRowSpan):

2013-03-04  Kunihiko Sakamoto  <ksakamoto@chromium.org>

        [Chromium] Add runtime flag for font load events
        https://bugs.webkit.org/show_bug.cgi?id=111296

        Reviewed by Kent Tamura.

        Add a runtime feature flag for FontLoader interface (disabled by default),
        and enable ENABLE_FONT_LOAD_EVENTS build flag for chromium.

        * features.gypi:
        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableFontLoadEvents):
        (WebKit):
        (WebKit::WebRuntimeFeatures::isFontLoadEventsEnabled):

2013-03-04  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r185990.  Requested by
        jamesr_ via sheriffbot.

        * DEPS:

2013-02-26  Kentaro Hara  <haraken@chromium.org>

        [chromium] Implement TRACE_EVENT macros for sampling profiling
        https://bugs.webkit.org/show_bug.cgi?id=110932

        Reviewed by Adam Barth.

        We are implementing TRACE_EVENT macros for sampling profiling.
        It works in the following mechanism:

        - Chromium defines global state variables for sampling profiling.
        (i.e. g_trace_state0, g_trace_state1, g_trace_state2 in trace_event.h)

        - WebKit gets the addresses of the global state variables at the
        initialization step. (i.e. EventTracer::initialize())

        - WebKit updates the global states by using TRACE_EVENT_SAMPLING_STATE()
        macros every time WebKit changes its state. (e.g. DOM attribute
        getters/setters/methods)

        - A sampling thread running in Chrome reads the global states
        periodically and visualizes the profiling results into about://tracing.

        This patch implements (1) a WebKit API to get the addresses of
        the global states and (2) the TRACE_EVENT_SAMPLING_STATE() macro.

        * src/WebKit.cpp:
        (WebKit::initializeWithoutV8):

2013-03-04  James Robinson  <jamesr@chromium.org>

        [chromium] Roll chromium DEPS 185662 -> 185963

        Roll roll roll the deps
          Gently from downstream.
        Merrily merrily merrily merrily
          Green bots are but a dream.

        * DEPS:

2013-03-04  Tony Chang  <tony@chromium.org>

        Unreviewed, rolling out r144562.
        http://trac.webkit.org/changeset/144562
        https://bugs.webkit.org/show_bug.cgi?id=85642

        Caused KeyPadInsert faluires in webkit_unittests

        * WebKit.gypi:
        * tests/KeyCodeConversionTestGtk.cpp: Removed.

2013-03-04  Levi Weintraub  <leviw@chromium.org>

        Add support for 8 bit TextRuns on Chromium Linux & Mac
        https://bugs.webkit.org/show_bug.cgi?id=99393

        Reviewed by Eric Seidel.

        Enabling 8 bit text runs for Linux and Mac platforms.

        * features.gypi:

2013-03-04  Peter Beverloo  <peter@chromium.org>

        [Chromium] Add a new dependency on jsr-305 for Android
        https://bugs.webkit.org/show_bug.cgi?id=111340

        Unreviewed build fix; new Android dependency. This is
        currently breaking gyp generation on the Android bots.

        * DEPS:

2013-03-04  Aaron Colwell  <acolwell@chromium.org>

        Remove unused return value from SourceBufferPrivate::abort() and WebSourceBuffer::abort().
        https://bugs.webkit.org/show_bug.cgi?id=111195

        Reviewed by Adam Barth.

        * public/WebSourceBuffer.h:
        (WebSourceBuffer):
        * src/SourceBufferPrivateImpl.cpp:
        (WebKit::SourceBufferPrivateImpl::abort):
        * src/SourceBufferPrivateImpl.h:
        (SourceBufferPrivateImpl):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebSourceBufferImpl):
        (WebKit::WebSourceBufferImpl::abort):

2013-03-04  Andrey Lushnikov  <lushnikov@chromium.org>

        Web Inspector: add Ace editor experiment
        https://bugs.webkit.org/show_bug.cgi?id=111191

        Reviewed by Pavel Feldman.

        Add target to concatenate js files for Ace Text Editor.

        * WebKit.gyp:

2013-03-04  Kunihiko Sakamoto  <ksakamoto@chromium.org>

        Add build flag for FontLoader
        https://bugs.webkit.org/show_bug.cgi?id=111289

        Reviewed by Benjamin Poulain.

        Add ENABLE_FONT_LOAD_EVENTS build flag (disabled by default).

        * features.gypi:

2013-03-04  Andrey Lushnikov  <lushnikov@chromium.org>

        Web Inspector: add runtime flag to determine if inspector's source files were flattened.
        https://bugs.webkit.org/show_bug.cgi?id=111184

        Reviewed by Pavel Feldman.

        Included "buildSystemOnly.js" in devtools.html by generate_devtools_html.py script.

        * WebKit.gyp:
        * scripts/generate_devtools_html.py: Add script tag to include buildSystemOnly.js
        (write_devtools_html):

2013-03-03  Alexandre Elias  <aelias@chromium.org>

        [chromium] Remove WebLayerTreeView::setViewportSize call
        https://bugs.webkit.org/show_bug.cgi?id=110727

        Reviewed by James Robinson.

        After https://codereview.chromium.org/12328080 lands,
        setViewportSize is called from the Chromium side. The multiplication
        by deviceScaleFactor here was prone to off-by-one errors.
        The layoutSize() function was only used here so delete it as well.

        DumpRenderTree WebViewHost must now call this method as well.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        * src/WebViewImpl.h:
        (WebViewImpl):

2013-03-03  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r144567.
        http://trac.webkit.org/changeset/144567
        https://bugs.webkit.org/show_bug.cgi?id=111266

        Does not compile on apple-win (Requested by abarth on
        #webkit).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::iconURLs):
        * src/WebFrameImpl.h:
        (WebFrameImpl):

2013-03-03  Mike West  <mkwst@chromium.org>

        CSP 1.1: Support CSP 1.1 directives on the unprefixed header.
        https://bugs.webkit.org/show_bug.cgi?id=111254

        Reviewed by Adam Barth.

        The enum names no longer made sense: the difference between the
        canonical 'Content-Security-Policy' header and 'X-WebKit-CSP' is the
        prefix, not the functionality. This patch renames them for clarity.

        * public/WebContentSecurityPolicy.h:
        * src/AssertMatchingEnums.cpp:
            Rename the Chromium side of the enums.

2013-03-03  Adam Barth  <abarth@webkit.org>

        Unreviewed attempted build fix. Adds back some includes removed in
        http://trac.webkit.org/changeset/144565.

        * src/ApplicationCacheHost.cpp:
        * src/AssociatedURLLoader.cpp:
        * src/EditorClientImpl.cpp:
        * src/SharedWorkerRepository.cpp:
        * src/WebDataSourceImpl.cpp:
        * src/WebFrameImpl.h:
        (WebCore):
        * src/WebNode.cpp:
        * src/WebSharedWorkerImpl.cpp:
        * tests/FrameLoaderClientImplTest.cpp:

2013-03-03  Adam Barth  <abarth@webkit.org>

        Unreviewed rollout of http://trac.webkit.org/r144530
        As described in https://bugs.webkit.org/show_bug.cgi?id=111167 and
        https://bugs.webkit.org/show_bug.cgi?id=111035, this patch caused a
        large number of ASSERTs in chromium-win.

        * src/ApplicationCacheHost.cpp:
        * src/AssociatedURLLoader.cpp:
        * src/EditorClientImpl.cpp:
        * src/SharedWorkerRepository.cpp:
        * src/WebDataSourceImpl.cpp:
        * src/WebFrameImpl.h:
        (WebCore):
        * src/WebNode.cpp:
        * src/WebSharedWorkerImpl.cpp:
        * tests/FrameLoaderClientImplTest.cpp:

2013-03-03  Ankur Taly  <ataly@google.com>

        WebKit API for enabling DOM logging for certain worlds
        https://bugs.webkit.org/show_bug.cgi?id=110779

        Reviewed by Kentaro Hara.

        * WebKit.gyp:

2013-03-03  James Weatherall  <wez@chromium.org>

        keydown and keyup events have zero keycode for some numeric pad keys under Chromium on Linux
        https://bugs.webkit.org/show_bug.cgi?id=85642

        Add tests to verify that the fixed keys generate the same keyCode values as their equivalents.

        Reviewed by Adam Barth.

        * WebKit.gypi:
        * tests/KeyCodeConversionTestGtk.cpp: Added.
        (WebCore):
        (WebCore::TEST):

2013-02-18  Darin Adler  <darin@apple.com>

        Cut down the number of source files that depend on Clipboard.h
        https://bugs.webkit.org/show_bug.cgi?id=110030

        Reviewed by Ryosuke Niwa.

        * src/SharedWorkerRepository.cpp: Add include of ResourceResponse.h
        here. We used to get this indirectly through Clipboard.h.

2013-02-28  Alexey Proskuryakov  <ap@apple.com>

        Reduce amount of rebuilding when touching networking headers
        https://bugs.webkit.org/show_bug.cgi?id=111035

        Reviewed by Eric Seidel.

        Adding includes that are now necessary because WebCore headers don't have them
        any more.

        * src/ApplicationCacheHost.cpp:
        * src/AssociatedURLLoader.cpp:
        * src/EditorClientImpl.cpp:
        * src/SharedWorkerRepository.cpp:
        * src/WebDataSourceImpl.cpp:
        * src/WebFrameImpl.h:
        * src/WebNode.cpp:
        * src/WebSharedWorkerImpl.cpp:
        * tests/FrameLoaderClientImplTest.cpp:

2013-03-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r185662.  Requested by
        "James Robinson" <jamesr@chromium.org> via sheriffbot.

        * DEPS:

2013-03-01  Terry Anderson  <tdanderson@chromium.org>

        EventHandler::handleGestureScrollUpdate() should invoke the user-generated scroll routines 
        so its behavior matches other user-initiated scrolls
        https://bugs.webkit.org/show_bug.cgi?id=109769

        Reviewed by James Robinson.

        Clear the nodes corresponding to a fling scroll event when the event ends.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::updateAnimations):

2013-03-01  David Dorwin  <ddorwin@chromium.org>

        [chromium] Revert r143827 to restore WebHelperPluginImpl's call to frameDetached()
        https://bugs.webkit.org/show_bug.cgi?id=111232

        Reviewed by Adam Barth.

        This patch reverts r143827, which causes a crash in failure conditions:
        http://crbug.com/178848

        * src/WebHelperPluginImpl.cpp:
        (WebKit::WebHelperPluginImpl::destoryPage):

2013-03-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r144422 and r144424.
        http://trac.webkit.org/changeset/144422
        http://trac.webkit.org/changeset/144424
        https://bugs.webkit.org/show_bug.cgi?id=111167

        Caused over 20 tests to fail assertion on Chromium Win port as
        ASSERTION FAILED: m_platformRequestUpdated (Requested by
        toyoshim on #webkit).

        * src/ApplicationCacheHost.cpp:
        * src/AssociatedURLLoader.cpp:
        * src/EditorClientImpl.cpp:
        * src/SharedWorkerRepository.cpp:
        * src/WebDataSourceImpl.cpp:
        * src/WebFrameImpl.h:
        (WebCore):
        * src/WebNode.cpp:
        * src/WebSharedWorkerImpl.cpp:
        * tests/FrameLoaderClientImplTest.cpp:

2013-03-01  Jochen Eisinger  <jochen@chromium.org>

        REGRESSION(r144422): Broke compilation on chromium-mac
        https://bugs.webkit.org/show_bug.cgi?id=111150

        Unreviewed build fix.

        * src/WebFrameImpl.h:
        (WebCore):

2013-02-28  Alexey Proskuryakov  <ap@apple.com>

        Reduce amount of rebuilding when touching networking headers
        https://bugs.webkit.org/show_bug.cgi?id=111035

        Reviewed by Eric Seidel.

        Adding includes that are now necessary because WebCore headers don't have them
        any more.

        * src/ApplicationCacheHost.cpp:
        * src/AssociatedURLLoader.cpp:
        * src/EditorClientImpl.cpp:
        * src/SharedWorkerRepository.cpp:
        * src/WebDataSourceImpl.cpp:
        * src/WebFrameImpl.h:
        * src/WebNode.cpp:
        * src/WebSharedWorkerImpl.cpp:
        * tests/FrameLoaderClientImplTest.cpp:

2013-02-28  Ankur Taly  <ataly@google.com>

        WebKit API for enabling DOM logging for certain worlds
        https://bugs.webkit.org/show_bug.cgi?id=110779

        Reviewed by Adam Barth.

        This patch adds initial plumbing for enabling logging of DOM
        activity by JavaScript code running withing v8, on a 
        per-world basis. In particular it adds methods to the chromium
        WebKit API for associating a logger object with world ids for which
        DOM activity logging is enabled.


        * WebKit.gyp:
        * public/WebDOMActivityLogger.h: Added.
        (v8):
        (WebKit):
        (WebDOMActivityLogger):
        (WebKit::WebDOMActivityLogger::~WebDOMActivityLogger):
        (WebKit::WebDOMActivityLogger::log):
        * src/WebDOMActivityLogger.cpp: Added.
        (WebKit):
        (DOMActivityLoggerContainer):
        (WebKit::DOMActivityLoggerContainer::DOMActivityLoggerContainer):
        (WebKit::DOMActivityLoggerContainer::~DOMActivityLoggerContainer):
        (WebKit::DOMActivityLoggerContainer::log):
        (WebKit::hasDOMActivityLogger):
        (WebKit::setDOMActivityLogger):

2013-02-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r185341.  Requested by
        "James Robinson" <jamesr@chromium.org> via sheriffbot.

        * DEPS:

2013-02-28  Varun Jain  <varunjain@chromium.org>

        Add new webkit API to invoke a context menu.
        https://bugs.webkit.org/show_bug.cgi?id=111040

        Reviewed by Adam Barth.

        * public/WebView.h:
        (WebView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::showContextMenu):
        (WebKit):
        * src/WebViewImpl.h:

2013-02-28  Aaron Colwell  <acolwell@chromium.org>

        Factor SourceBuffer methods out of MediaSourcePrivate & WebMediaSource
        into SourceBufferPrivate & WebSourceBuffer respectively.
        https://bugs.webkit.org/show_bug.cgi?id=110798

        Reviewed by Adam Barth, Jer Noble.

        * WebKit.gyp:
        * public/WebMediaSourceClient.h:
        (WebKit):
        (WebMediaSourceClient):
        * public/WebSourceBuffer.h: 
        (WebKit):
        (WebSourceBuffer): Contains SourceBuffer methods extracted from WebMediaSource.
        (WebKit::WebSourceBuffer::~WebSourceBuffer):
        * src/AssertMatchingEnums.cpp:
        * src/MediaSourcePrivateImpl.cpp:
        (WebKit):
        (WebKit::MediaSourcePrivateImpl::MediaSourcePrivateImpl):
        (WebKit::MediaSourcePrivateImpl::addSourceBuffer):
        (WebKit::MediaSourcePrivateImpl::duration):
        (WebKit::MediaSourcePrivateImpl::setDuration):
        (WebKit::MediaSourcePrivateImpl::endOfStream):
        * src/MediaSourcePrivateImpl.h:
        (WebKit):
        (MediaSourcePrivateImpl): Adapts MediaSourcePrivate interface to WebMediaSourceClient.
        (WebKit::MediaSourcePrivateImpl::~MediaSourcePrivateImpl):
        * src/SourceBufferPrivateImpl.cpp:
        (WebKit):
        (WebKit::SourceBufferPrivateImpl::SourceBufferPrivateImpl):
        (WebKit::SourceBufferPrivateImpl::buffered):
        (WebKit::SourceBufferPrivateImpl::append):
        (WebKit::SourceBufferPrivateImpl::abort):
        (WebKit::SourceBufferPrivateImpl::setTimestampOffset):
        (WebKit::SourceBufferPrivateImpl::removedFromMediaSource):
        * src/SourceBufferPrivateImpl.h:
        (WebKit):
        (SourceBufferPrivateImpl): Adapts SourceBufferPrivate interface to WebSourceBuffer.
        (WebKit::SourceBufferPrivateImpl::~SourceBufferPrivateImpl):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebMediaSourceClientImpl):
        (WebKit):
        (WebSourceBufferImpl): Temporary implementation of WebSourceBuffer to keep things working
                               until the Chromium side changes land.
        (WebKit::WebMediaSourceClientImpl::addSourceBuffer):
        (WebKit::WebMediaSourceClientImpl::duration):
        (WebKit::WebMediaSourceClientImpl::setDuration):
        (WebKit::WebMediaSourceClientImpl::endOfStream):
        (WebKit::WebSourceBufferImpl::WebSourceBufferImpl):
        (WebKit::WebSourceBufferImpl::buffered):
        (WebKit::WebSourceBufferImpl::append):
        (WebKit::WebSourceBufferImpl::abort):
        (WebKit::WebSourceBufferImpl::setTimestampOffset):
        (WebKit::WebSourceBufferImpl::removedFromMediaSource):
        * src/WebMediaSourceImpl.cpp:

2013-02-28  David Grogan  <dgrogan@chromium.org>

        IndexedDB: IO error when checking schema should destroy LevelDB directory
        https://bugs.webkit.org/show_bug.cgi?id=110675

        Reviewed by Adam Barth.

        * WebKit.gyp:
        This was cargo-culted. The component build wouldn't run otherwise.

        * WebKit.gypi:
        * tests/IDBCleanupOnIOErrorTest.cpp: Added.

2013-02-28  Stephen Chenney  <schenney@chromium.org>

        RenderTableCellDeathTest unit test fails on mac
        https://bugs.webkit.org/show_bug.cgi?id=110992

        Unreviewed revert of all changes. The problem seems to have resolved.

        * tests/RenderTableCellTest.cpp: Remove Mac disable code.

2013-02-28  Takashi Toyoshima  <toyoshim@chromium.org>

        Unreviewed, quick test breakage fix for android
        https://bugs.webkit.org/show_bug.cgi?id=110740

        Patch by Seigo Nonaka <nona@chromium.org> on 2013-02-27

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::textInputInfo): Reconstruct condition check order

2013-02-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r184931.  Requested by
        "Takashi Toyoshima" <toyoshim@chromium.org> via sheriffbot.

        * DEPS:

2013-02-27  Seigo Nonaka  <nona@chromium.org>

        [Chromium] Should not return WebTextInputTypeNone for date input element.
        https://bugs.webkit.org/show_bug.cgi?id=110740

        Reviewed by Kent Tamura.

        In the case of Windows 8, text input state including on-screen keyboard is controlled by the
        value of WebTextInputType returned from WebViewImpl::textInputType().
        In past, it returned WebTextInputTypeDate for date text input but now it returns
        WebTextInputTypeNone.
        WebTextInputTypeNone is used for non editable node, so on-screen keyboard will be hidden if
        the date text input is focused.  So there is no way to input on Windows 8 tablet without
        physical keyboard except tapping small up/down arrow.

        * public/WebTextInputType.h: Introduces WebTextInputTypeDateTimeField.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::textInputInfo): Fills type filed regardless of editable or not. It is
        safe because textInputType returns editable type only for known editable element.
        (WebKit::WebViewImpl::textInputType): Returns WebTextInputTypeDateTimeField for the date
        time field element.

2013-02-27  James Simonsen  <simonjam@chromium.org>

        [chromium] Lower priority of preloaded images
        https://bugs.webkit.org/show_bug.cgi?id=110527

        Plumb the didChangePriority signal into DRT so it can be tested.

        Reviewed by Nate Chapin.

        * public/WebFrameClient.h:
        (WebKit):
        (WebKit::WebFrameClient::didChangeResourcePriority):
        (WebFrameClient):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidChangeResourcePriority):
        (WebKit):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2013-02-27  Min Qin  <qinmin@chromium.org>

        Unlock partially decoded images after passing them to the ImageDecodingStore
        https://bugs.webkit.org/show_bug.cgi?id=110778

        Reviewed by Stephen White.

        Test for testing that image frames are unlocked after passing to ImageDecodingStore.

        * tests/ImageFrameGeneratorTest.cpp:
        (WebCore::ImageFrameGeneratorTest::SetUp):
        (WebCore::ImageFrameGeneratorTest::frameBuffersUnlocked):
        (ImageFrameGeneratorTest):
        (WebCore::ImageFrameGeneratorTest::frameBuffersLocked):
        (WebCore::TEST_F):
        * tests/MockImageDecoder.h:
        (WebCore::MockImageDecoderClient::frameBuffersLocked):
        (WebCore::MockImageDecoderClient::frameBuffersUnlocked):
        (WebCore::MockImageDecoder::unlockFrameBuffers):
        (WebCore::MockImageDecoder::lockFrameBuffers):
        (MockImageDecoder):

2013-02-27  John Bauman  <jbauman@chromium.org>

        Plugin in iframe may not display
        https://bugs.webkit.org/show_bug.cgi?id=109879

        Reviewed by Simon Fraser.

        Use clipRectChanged to update the geometry.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::clipRectChanged):
        * src/WebPluginContainerImpl.h:

2013-02-27  Stephen Chenney  <schenney@chromium.org>

        RenderTableCellDeathTest unit test fails on mac
        https://bugs.webkit.org/show_bug.cgi?id=110992

        Unreviewed second attempt. Trying to get the right define for the OS.

        * tests/RenderTableCellTest.cpp:

2013-02-27  Stephen Chenney  <schenney@chromium.org>

        RenderTableCellDeathTest unit test fails on mac
        https://bugs.webkit.org/show_bug.cgi?id=110992

        Unreviewed disabling of test that is hanging or crashing on Mac.

        * tests/RenderTableCellTest.cpp:

2013-02-27  James Robinson  <jamesr@chromium.org>

        [chromium] Remove suppression invalidation logic from WebViewImpl
        https://bugs.webkit.org/show_bug.cgi?id=110999

        Reviewed by Adrienne Walker.

        This suppression logic is now handled on the embedder side. In fact, scheduleComposite() is now only used
        by DumpRenderTree.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::suppressInvalidations):
        (WebKit::WebViewImpl::scheduleComposite):
        * src/WebViewImpl.h:

2013-02-27  Glenn Adams  <glenn@skynav.com>

        Add ENABLE_CSS3_TEXT_LINE_BREAK flag.
        https://bugs.webkit.org/show_bug.cgi?id=110944

        Reviewed by Dean Jackson.

        * features.gypi:

2013-02-26  James Robinson  <jamesr@chromium.org>

        [chromium] Remove WebViewImpl::animate shimmy out through compositor
        https://bugs.webkit.org/show_bug.cgi?id=110935

        Reviewed by Adrienne Walker.

        WebViewImpl::animate() and WebViewImpl::updateAnimations() are confusingly similar. ::animate() implements
        the WebWidget API and is called by content::RenderWidget and WebViewHost. ::updateAnimations() implements
        the WebLayerTreeViewClient API and is called by content::RenderWidgetCompositor and by ::animate(). The
        important part of this indirection is that whenever the compositor is active, all animation calls must
        route through cc::LayerTreeHost before entering into WebCore's animation code so that the compositor
        can set the appropriate rate limiting state. Animations may originate from
        content::RenderWidget::AnimateIfNeeded when in software and single threaded mode or from
        cc::LayerTreeHost::updateAnimations in threaded compositing mode. In the long ago, content::RenderWidget had no
        idea if compositing was active or not and always called WebWidget::animate(), so WebViewImpl::animate() had to
        redirect to the compositor when appropriate.
        
        Now (as of chromium r180947) RenderWidget calls WebWidget::animate only when in software mode and otherwise
        calls directly into the compositor. Thus WebViewImpl::animate() no longer needs to do this check. In a
        follow-up, WebViewImpl::updateAnimations will go away completely in favor of just calling WebWidget::animate in
        all cases.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::updateAnimations):

2013-02-27  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r144179.
        http://trac.webkit.org/changeset/144179
        https://bugs.webkit.org/show_bug.cgi?id=110980

        Breaks compilation (Requested by vsevik on #webkit).

        * public/WebTextInputType.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::textInputInfo):
        (WebKit::WebViewImpl::textInputType):

2013-02-27  Stephen Chenney  <schenney@chromium.org>

        [chromium] GIFImageDecoderTest.parseAndDecodeByteByByte failing on Android
        https://bugs.webkit.org/show_bug.cgi?id=110922

        Unreviewed build fix.

        * tests/GIFImageDecoderTest.cpp:
        (WebKit):
        (WebKit::TEST): Disable the entire test on Android.

2013-02-27  Seigo Nonaka  <nona@chromium.org>

        [Chromium] Should not return WebTextInputTypeNone for date input element.
        https://bugs.webkit.org/show_bug.cgi?id=110740

        Reviewed by Kent Tamura.

        In the case of Windows 8, text input state including on-screen keyboard is controlled by the
        value of WebTextInputType returned from WebViewImpl::textInputType().
        In past, it returned WebTextInputTypeDate for date text input but now it returns
        WebTextInputTypeNone.
        WebTextInputTypeNone is used for non editable node, so on-screen keyboard will be hidden if
        the date text input is focused.  So there is no way to input on Windows 8 tablet without
        physical keyboard except tapping small up/down arrow.

        * public/WebTextInputType.h: Introduces WebTextInputTypeDateTimeField.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::textInputInfo): Fills type filed regardless of editable or not. It is
        safe because textInputType returns editable type only for known editable element.
        (WebKit::WebViewImpl::textInputType): Returns WebTextInputTypeDateTimeField for the date
        time field element.

2013-02-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r144129.
        http://trac.webkit.org/changeset/144129
        https://bugs.webkit.org/show_bug.cgi?id=110947

        Breaks compilation on chromium mac and win (Requested by
        vsevik on #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::willBeginFrame):
        (WebKit):
        (WebKit::WebViewImpl::didBeginFrame):
        * src/WebViewImpl.h:
        * tests/WebLayerTreeViewTestCommon.h:

2013-02-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r184829.  Requested by
        "Mark Pilgrim" <pilgrim@chromium.org> via sheriffbot.

        * DEPS:

2013-02-26  James Robinson  <jamesr@chromium.org>

        [chromium] Remove WebLayerTreeViewClient::(will|did)BeginFrame
        https://bugs.webkit.org/show_bug.cgi?id=110928

        Reviewed by Adrienne Walker.

        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:
        * tests/WebLayerTreeViewTestCommon.h:

2013-02-26  Alpha Lam  <hclam@chromium.org>

        [chromium] GIFImageDecoderTest.parseAndDecodeByteByByte failing on Android
        https://bugs.webkit.org/show_bug.cgi?id=110922

        Unreviewed. Build fix.

        * tests/GIFImageDecoderTest.cpp:
        (WebKit):

2013-02-26  James Robinson  <jamesr@chromium.org>

        [chromium] Remove unused WebLayerTreeViewClient calls
        https://bugs.webkit.org/show_bug.cgi?id=110923

        Reviewed by Adrienne Walker.

        These notifications existed for instrumentation, but now the instrumentation routes
        through WebDevToolsAgent.

        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:
        * tests/WebLayerTreeViewTestCommon.h:

2013-02-26  Dirk Pranke  <dpranke@chromium.org>

        Roll Chromium DEPS from r183905 -> r184646.

        Unreviewed.

        * DEPS:

2013-02-26  James Robinson  <jamesr@chromium.org>

        [chromium] Remove unused WebWidget::instrument calls
        https://bugs.webkit.org/show_bug.cgi?id=110906

        Reviewed by Jochen Eisinger.

        These calls are now routed through WebDevToolsAgent.

        * public/WebWidget.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::willBeginFrame):
        * src/WebViewImpl.h:

2013-02-20  Alpha Lam  <hclam@chromium.org>

        GIFImageReader to read from source data directly
        https://bugs.webkit.org/show_bug.cgi?id=109662

        Reviewed by Stephen White.

        Added the following unit tests to test new logic in GIFImageDecoder:

        GIFImageDecoderTest.decodeTwoFrames
        Test that it can decode a multi-frame GIF image correctly.

        GIFImageDecoderTest.parseAndDecode
        First perform a parse operation and then a decode operation. Expect
        that parse and decode operates correctly.

        GIFImageDecoderTest.parseByteByByte
        Test that multi-frame GIF image can be parsed correctly byte by byte.

        GIFImageDecoderTest.parseAndDecodeByteByByte
        Run a loop to feed decoder byte by byte, perform a parse and then
        decode operation and make sure frames are decoded correctly.

        GIFImageDecoderTest.brokenSecondFrame
        Decode a GIF image with second frame broken. Expect that the first
        frame can be decoded correctly.

        * WebKit.gypi:
        * tests/GIFImageDecoderTest.cpp: Added.
        (WebKit):
        (WebKit::readFile):
        (WebKit::TEST):
        * tests/data/broken.gif: Added.

2013-02-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r144065.
        http://trac.webkit.org/changeset/144065
        https://bugs.webkit.org/show_bug.cgi?id=110896

        Causing failures and crashes on Chromium Win7 and Win XP
        (Requested by schenney on #webkit).

        * features.gypi:

2013-02-26  Levi Weintraub  <leviw@chromium.org>

        Add support for 8 bit TextRuns for Chromium/HarfBuzz
        https://bugs.webkit.org/show_bug.cgi?id=99393

        Reviewed by Eric Seidel.

        Enabling 8 bit text runs for Chromium.

        * features.gypi:

2013-02-26  Dmitry Zvorygin  <zvorygin@chromium.org>

        Merged Tip and Debug log levels for web console.
        https://bugs.webkit.org/show_bug.cgi?id=109919

        Reviewed by Pavel Feldman.

        In every component either TIP or DEBUG level was used for reporting,
        but not both. This patch is prerequisite for Web Inspector console log filtering.

        * public/WebConsoleMessage.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMessageToConsole):

2013-02-26  Andrey Kosyakov  <caseq@chromium.org>

        Plumbing trace events to Timeline

        Web Inspector: plumb trace events to Timeline agent
        https://bugs.webkit.org/show_bug.cgi?id=105796

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgentClient.h:
        (WebDevToolsAgentClient):
        (WebKit::WebDevToolsAgentClient::setTraceEventCallback):
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::setTraceEventCallback):
        (WebKit):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::setTraceEventCallback):
        (WebKit):
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2013-02-01  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: plumb trace events to Timeline agent
        https://bugs.webkit.org/show_bug.cgi?id=105796

        Reviewed by Pavel Feldman.

        Plumb trace events to Inspector.

        * public/WebDevToolsAgentClient.h:
        (WebDevToolsAgentClient):
        (WebKit::WebDevToolsAgentClient::setTraceEventCallback):
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::setTraceEventCallback):
        (WebKit):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::setTraceEventCallback):
        (WebKit):
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2013-02-26  Andrey Kosyakov  <caseq@chromium.org>

        Unreviewed, rolling out r144041, r144044, and r144048.
        http://trac.webkit.org/changeset/144041
        http://trac.webkit.org/changeset/144044
        http://trac.webkit.org/changeset/144048
        https://bugs.webkit.org/show_bug.cgi?id=105796

        Broke build

        * public/WebDevToolsAgentClient.h:
        * src/InspectorClientImpl.cpp:
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2013-02-01  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: plumb trace events to Timeline agent
        https://bugs.webkit.org/show_bug.cgi?id=105796

        Reviewed by Pavel Feldman.

        Plumb trace events to Inspector.

        * public/WebDevToolsAgentClient.h:
        (WebDevToolsAgentClient):
        (WebKit::WebDevToolsAgentClient::setTraceEventCallback):
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::setTraceEventCallback):
        (WebKit):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::setTraceEventCallback):
        (WebKit):
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2013-02-26  Tien-Ren Chen  <trchen@chromium.org>

        Implement coordinated scrollbar for subframes and overflow:scroll
        https://bugs.webkit.org/show_bug.cgi?id=109560

        Reviewed by James Robinson.

        Added ScrollingCoordinatorChromiumTest.iframeScrolling to verify
        impl-side scrolling and impl-side scrollbars for frames.

        Update ScrollingCoordinatorChromiumTest.overflowScrolling to verify
        impl-side scrollbars.

        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::ScrollingCoordinatorChromiumTest::ScrollingCoordinatorChromiumTest):
        (WebKit::TEST_F):
        (WebKit):
        * tests/data/iframe-scrolling-inner.html: Added.
        * tests/data/iframe-scrolling.html: Added.

2013-02-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r144016.
        http://trac.webkit.org/changeset/144016
        https://bugs.webkit.org/show_bug.cgi?id=110856

        Breaks compilation on chromium mac (Requested by vsevik on
        #webkit).

        * WebKit.gypi:
        * tests/KeyCodeConversionTest.cpp: Removed.

2013-02-26  James Robinson  <jamesr@chromium.org>

        [chromium] Fix continuous painting mode
        https://bugs.webkit.org/show_bug.cgi?id=110788

        Reviewed by Adrienne Walker.

        Recent instrumentation shuffling caused WebViewImpl::didBeginFrame to no longer be called, which
        broke continuous painting.  Since continuous painting mode is meant to simply invalidate layers
        on each frame, it's a better fit for the animation system. This moves the invalidation calls
        into WebViewImpl::updateAnimations along with other animation type things.

        Tested manually by enabling continuous painting mode in the inspector. There aren't any automated
        tests in WebKit for this feature.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setContinuousPaintingEnabled):
        (WebKit::WebViewImpl::didBeginFrame):
        (WebKit::WebViewImpl::updateAnimations):
        * src/painting/ContinuousPainter.cpp:
        (WebKit::ContinuousPainter::setNeedsDisplayRecursive):

2013-02-26  James Weatherall  <wez@chromium.org>

        keydown and keyup events have zero keycode for some numeric pad keys under Chromium on Linux
        https://bugs.webkit.org/show_bug.cgi?id=85642

        Add tests to verify that the fixed keys generate the same keyCode values
        as their equivalents.

        Reviewed by Ojan Vafai.

        * WebKit.gypi:
        * tests/KeyCodeConversionTest.cpp: Added.
        (WebCore):
        (WebCore::TEST):

2013-02-25  Rouslan Solomakhin  <rouslan@chromium.org>

        Add expandedToParagraph() method to WebRange
        https://bugs.webkit.org/show_bug.cgi?id=110618

        Reviewed by Adam Barth.

        Add a method expandedToParagraph() to WebRange to return a copy of the
        range expanded to paragraph boundaries. This method is to be used to
        query the spelling context around the misspelled word under cursor.

        * public/WebRange.h:
        (WebRange): Added expandedToParagraph() method declaration.
        * src/WebRange.cpp:
        (WebKit::WebRange::expandedToParagraph): Added method to copy range, expand the copied range to paragraph boundaries, and return the resulting range.
        (WebKit): Added expandedToParagraph() method definition.

2013-02-25  James Robinson  <jamesr@chromium.org>

        [chromium] WebViewImpl::m_client can be null in some unit tests, check it before calling
        https://bugs.webkit.org/show_bug.cgi?id=110834

        Reviewed by Adrienne Walker.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::suppressInvalidations):
        (WebKit::WebViewImpl::setRootGraphicsLayer):

2013-02-25  Ken Kania  <kkania@chromium.org>

        Remove browser patching mechanism for handling javascript dialogs in chromium port
        https://bugs.webkit.org/show_bug.cgi?id=110531

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::handleJavaScriptDialog):
        (WebKit::browserHintToString):
        (WebKit::browserHintFromString):
        (WebKit::WebDevToolsAgent::patchWithBrowserData):

2013-02-25  James Robinson  <jamesr@chromium.org>

        [chromium] Plumb WebViewImpl's compositor scheduling suppression out to WebWidgetClient
        https://bugs.webkit.org/show_bug.cgi?id=110640

        Reviewed by Adrienne Walker.

        This plumbs the WebViewImpl::m_suppressInvalidations logic out to the WebWidgetClient so
        it can be implemented by the embedder. The existing logic is left in place for now,
        once the embedder side has landed WebViewImpl will be purely a pass-through.

        * public/WebWidgetClient.h:
        (WebWidgetClient):
        (WebKit::WebWidgetClient::suppressCompositorScheduling):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::suppressInvalidations):
        (WebKit::WebViewImpl::setRootGraphicsLayer):

2013-02-25  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r143936.
        http://trac.webkit.org/changeset/143936
        https://bugs.webkit.org/show_bug.cgi?id=110789

        Causes webkit_unit_tests failures on android dbg (Requested by
        vollick on #webkit).

        * WebKit.gyp:
        * WebKit.gypi:
        * tests/GIFImageDecoderTest.cpp: Removed.
        * tests/data/broken.gif: Removed.

2013-02-25  Alpha Lam  <hclam@chromium.org>

        GIFImageReader to read from source data directly
        https://bugs.webkit.org/show_bug.cgi?id=109662

        Reviewed by Stephen White.

        Added the following unit tests to test new logic in GIFImageDecoder:

        GIFImageDecoderTest.decodeTwoFrames
        Test that it can decode a multi-frame GIF image correctly.

        GIFImageDecoderTest.parseAndDecode
        First perform a parse operation and then a decode operation. Expect
        that parse and decode operates correctly.

        GIFImageDecoderTest.parseByteByByte
        Test that multi-frame GIF image can be parsed correctly byte by byte.

        GIFImageDecoderTest.parseAndDecodeByteByByte
        Run a loop to feed decoder byte by byte, perform a parse and then
        decode operation and make sure frames are decoded correctly.

        GIFImageDecoderTest.brokenSecondFrame
        Decode a GIF image with second frame broken. Expect that the first
        frame can be decoded correctly.

        * WebKit.gyp:
        * WebKit.gypi:
        * tests/GIFImageDecoderTest.cpp: Added.
        (WebKit):
        (WebKit::readFile):
        (WebKit::TEST):
        * tests/data/broken.gif: Added.

2013-02-25  Andrey Kosyakov  <caseq@chromium.org>

        Unreviewed follow-up to r143725, reduce chances test flakes on a slow box.

        * src/js/Tests.js:
        (.TestSuite.prototype.testPageOverlayUpdate.step2):

2013-02-25  Anton Vayvod  <avayvod@chromium.org>

        [Chromium] Disable registerProtocolHandler on Android
        https://bugs.webkit.org/show_bug.cgi?id=110481

        Reviewed by Julien Chaffraix.

        Chromium for Android has been exposing registerProtocolHandler, but the feature wasn't
        actually wired up internally. Disable the feature to avoid breaking feature detection until
        we can implement it properly. Previous attempt is at http://trac.webkit.org/changeset/133465
        See the discussion of the future implementation at http://crbug.com/156386

        * features.gypi: Disable the flag for Android, enable it only for non-Android platforms.

        * src/ChromeClientImpl.h: Declaration is now guarded by the flag, not to break Android.

2013-02-24  Hajime Morrita  <morrita@google.com>

        [Custom Elements] Implement bare-bone document.register()
        https://bugs.webkit.org/show_bug.cgi?id=100229

        Reviewed by Adam Barth.

        Added enableCustomDOMElements flag.

        * features.gypi:
        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableCustomDOMElements):
        (WebKit):
        (WebKit::WebRuntimeFeatures::isCustomDOMElementsEnabled):

2013-02-23  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] WebKit::initialize should take a Platform* now that WebKitPlatformSupport is empty
        https://bugs.webkit.org/show_bug.cgi?id=110605

        Reviewed by Adam Barth.

        Part of a larger refactoring series; see tracking bug 82948.

        * public/WebKit.h:
        (WebKit):
        * src/WebKit.cpp:
        (WebKit::initialize):
        (WebKit::initializeWithoutV8):
        (WebKit::webKitPlatformSupport):

2013-02-22  David Dorwin  <ddorwin@chromium.org>

        [chromium] Remove call to detach WebHelperPluginImpl's frame since it is never attached
        https://bugs.webkit.org/show_bug.cgi?id=110668

        Reviewed by Adam Barth.

        This fixes http://crbug.com/172764

        * src/WebHelperPluginImpl.cpp:
        (WebKit::WebHelperPluginImpl::destoryPage):

2013-02-22  Aaron Colwell  <acolwell@chromium.org>

        Factor MediaSource methods out of MediaPlayer & MediaPlayerPrivate and into a new MediaSourcePrivate interface.
        https://bugs.webkit.org/show_bug.cgi?id=109857

        Reviewed by Adam Barth.

        WebMediaSource and WebMediaSource client were created to replace the MediaSource methods in WebMediaPlayer and
        WebMediaPlayerClient. This allows the MediaSource implementation to be updated without further polluting the
        media player interfaces.

        * WebKit.gyp:
        * public/WebMediaPlayer.h:
        (WebMediaPlayer):
        (WebKit::WebMediaPlayer::load):
        * public/WebMediaPlayerClient.h:
        (WebKit):
        * public/WebMediaSource.h: Added.
        (WebKit):
        (WebMediaSource):
        (WebKit::WebMediaSource::~WebMediaSource):
        * public/WebMediaSourceClient.h: Added.
        (WebKit):
        (WebMediaSourceClient):
        (WebKit::WebMediaSourceClient::~WebMediaSourceClient):
        * src/AssertMatchingEnums.cpp:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit):
        (WebMediaSourceClientImpl): Temporary WebMediaSourceClient implementation to keep things working until Chromium
                                    changes land.
        (WebKit::WebMediaSourceClientImpl::WebMediaSourceClientImpl):
        (WebKit::WebMediaSourceClientImpl::~WebMediaSourceClientImpl):
        (WebKit::WebMediaSourceClientImpl::addId):
        (WebKit::WebMediaSourceClientImpl::removeId):
        (WebKit::WebMediaSourceClientImpl::buffered):
        (WebKit::WebMediaSourceClientImpl::append):
        (WebKit::WebMediaSourceClientImpl::abort):
        (WebKit::WebMediaSourceClientImpl::duration):
        (WebKit::WebMediaSourceClientImpl::setDuration):
        (WebKit::WebMediaSourceClientImpl::endOfStream):
        (WebKit::WebMediaSourceClientImpl::setTimestampOffset):
        (WebKit::WebMediaPlayerClientImpl::sourceOpened):
        (WebKit::WebMediaPlayerClientImpl::sourceURL):
        (WebKit::WebMediaPlayerClientImpl::load):
        (WebKit::WebMediaPlayerClientImpl::loadRequested):
        (WebKit::WebMediaPlayerClientImpl::loadInternal):
        * src/WebMediaPlayerClientImpl.h:
        (WebMediaPlayerClientImpl):
        * src/WebMediaSourceImpl.cpp: Added.
        (WebKit):
        (MediaSourcePrivateImpl):
        (WebKit::MediaSourcePrivateImpl::~MediaSourcePrivateImpl):
        (WebKit::MediaSourcePrivateImpl::MediaSourcePrivateImpl):
        (WebKit::MediaSourcePrivateImpl::addId):
        (WebKit::MediaSourcePrivateImpl::removeId):
        (WebKit::MediaSourcePrivateImpl::buffered):
        (WebKit::MediaSourcePrivateImpl::append):
        (WebKit::MediaSourcePrivateImpl::abort):
        (WebKit::MediaSourcePrivateImpl::duration):
        (WebKit::MediaSourcePrivateImpl::setDuration):
        (WebKit::MediaSourcePrivateImpl::endOfStream):
        (WebKit::MediaSourcePrivateImpl::setTimestampOffset):
        (WebKit::WebMediaSourceImpl::WebMediaSourceImpl):
        (WebKit::WebMediaSourceImpl::~WebMediaSourceImpl):
        (WebKit::WebMediaSourceImpl::open):
        * src/WebMediaSourceImpl.h: Added.
        (WebKit):
        (WebMediaSourceImpl):

2013-02-22  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Remove old SerializedScriptValue-based get() callbacks
        https://bugs.webkit.org/show_bug.cgi?id=110626

        Reviewed by James Robinson.

        Removal now that refactoring is complete.

        * public/WebIDBCallbacks.h:
        (WebKit):

2013-02-22  Ali Juma  <ajuma@chromium.org>

        [chromium] Register newly-created layers for animation
        https://bugs.webkit.org/show_bug.cgi?id=106594

        Reviewed by James Robinson.

        * WebKit.gyp:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::ChromeClientImpl):
        (WebKit::ChromeClientImpl::graphicsLayerFactory):
        * src/ChromeClientImpl.h:
        (ChromeClientImpl):
        * src/GraphicsLayerFactoryChromium.cpp: Added.
        (WebKit):
        (WebKit::GraphicsLayerFactoryChromium::GraphicsLayerFactoryChromium):
        (WebKit::GraphicsLayerFactoryChromium::~GraphicsLayerFactoryChromium):
        (WebKit::GraphicsLayerFactoryChromium::createGraphicsLayer):
        * src/GraphicsLayerFactoryChromium.h: Added.
        (WebKit):
        (GraphicsLayerFactoryChromium):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::graphicsLayerFactory):
        (WebKit):
        (WebKit::WebViewImpl::registerForAnimations):
        * src/WebViewImpl.h:
        (WebViewImpl):

2013-02-22  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Expose shadowRoot to the WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=110522

        Reviewed by Dimitri Glazkov.

        * public/WebElement.h:
        (WebElement):
        * src/WebElement.cpp:
        (WebKit::WebElement::shadowRoot):
        (WebKit):

2013-02-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r143734.
        http://trac.webkit.org/changeset/143734
        https://bugs.webkit.org/show_bug.cgi?id=110615

        Causes linux build failures. (Requested by vollick on
        #webkit).

        * public/WebKit.h:
        (WebKit):
        * src/WebKit.cpp:
        (WebKit::initialize):
        (WebKit::initializeWithoutV8):
        (WebKit::webKitPlatformSupport):

2013-02-22  Mikhail Naganov  <mnaganov@chromium.org>

        [Chromium] Add support for emulating legacy Android WebView 'setInitialScale' method
        https://bugs.webkit.org/show_bug.cgi?id=109946

        Adding a WebView method for permanently setting initial page scale.
        This override has higher priority than any calculated page scale
        and viewport meta tag value.

        Also, this patch eliminates a dubious "fixed layout enabled, viewport disabled" mode
        previously used by Android WebView.

        Reviewed by Adam Barth.

        * public/WebView.h:
        (WebView):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setInitialPageScaleOverride):
        (WebKit):
        (WebKit::WebViewImpl::computePageScaleFactorLimits):
        * src/WebViewImpl.h:
        * tests/WebFrameTest.cpp:

2013-02-22  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] WebKit::initialize should take a Platform* now that WebKitPlatformSupport is empty
        https://bugs.webkit.org/show_bug.cgi?id=110605

        Reviewed by Adam Barth.

        Part of a larger refactoring series; see tracking bug 82948.

        * public/WebKit.h:
        (WebKit):
        * src/WebKit.cpp:
        (WebKit::initialize):
        (WebKit::initializeWithoutV8):
        (WebKit::webKitPlatformSupport):

2013-02-22  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: [Chromium] add a browser test for frames on timeline
        https://bugs.webkit.org/show_bug.cgi?id=110592

        - factor out timeline recording logic from testPageOverlayUpdate for reuse;
        - record timeline while running a simple DOM-based animation;
        - assure we have frames and Style Recalc/Layout/Paint events in between.

        Reviewed by Yury Semikhatsky.

        * src/js/Tests.js:
        (.TestSuite.prototype.assertHasKey):
        (.TestSuite.prototype.testTimelineFrames.step1):
        (.TestSuite.prototype.testTimelineFrames.onTimelineRecorded):
        (.TestSuite.prototype.testTimelineFrames):
        (.TestSuite.prototype.testPageOverlayUpdate.step4):
        (.TestSuite.prototype.testPageOverlayUpdate.onTimelineRecorded):
        (.TestSuite.prototype.recordTimeline.addRecord):
        (.TestSuite.prototype.recordTimeline.innerAddRecord):
        (.TestSuite.prototype.recordTimeline.done):
        (.TestSuite.prototype.recordTimeline):
        (.TestSuite.prototype.stopTimeline):

2013-02-21  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Implement SharedBuffer version of put() / onSuccess()
        https://bugs.webkit.org/show_bug.cgi?id=110398

        Reviewed by Tony Chang.

        Proxy new SharedBuffer calls to WebIDBCallbacks through
        to the new SharedBuffer-based IDBCallbacks.

        * public/WebIDBCursor.h:
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::onSuccess):
        (WebKit::IDBCallbacksProxy::onSuccessWithPrefetch):
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onSuccess):
        * src/WebIDBCallbacksImpl.h:
        (WebIDBCallbacksImpl):
        * tests/IDBAbortOnCorruptTest.cpp:
        (WebCore::MockIDBCallbacks::onSuccess):
        (WebCore::MockIDBCallbacks::onSuccessWithPrefetch):
        * tests/IDBDatabaseBackendTest.cpp:
        * tests/IDBRequestTest.cpp:
        (WebKit::TEST_F):

2013-02-21  Grzegorz Czajkowski  <g.czajkowski@samsung.com>

        Allow to retrieve the request data from abstract TextCheckingRequest to be accessible for WK2
        https://bugs.webkit.org/show_bug.cgi?id=110208

        Reviewed by Hajime Morrita.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::requestCheckingOfString):
        Extract the request data as it is the member of 'TextCheckingRequest'.

2013-02-21  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove chromium/public/platform directory
        https://bugs.webkit.org/show_bug.cgi?id=110471

        Reviewed by Adam Barth.

        Part of a larger refactoring series; see tracking bug 82948.
        
        * WebKit.gyp:
        * public/platform: Removed.
        * public/platform/WebKitPlatformSupport.h: Removed.
        * public/platform/android: Removed.
        * public/platform/default: Removed.
        * public/platform/linux: Removed.
        * public/platform/mac: Removed.
        * public/platform/win: Removed.
        * src/WebKit.cpp:

2013-02-21  Dirk Pranke  <dpranke@chromium.org>

        [chromium] support the lucid version of freetype on precise in DRT
        https://bugs.webkit.org/show_bug.cgi?id=107338

        Reviewed by Tony Chang.

        Add in a linux-only dependency on Freetype2 so that we can
        match the version shipped in Ubuntu Lucid.

        * DEPS:

2013-02-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r183905.  Requested by
        "Mark Pilgrim" <pilgrim@chromium.org> via sheriffbot.

        * DEPS:

2013-02-21  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Remove copying WebIDBDatabase::put() stub
        https://bugs.webkit.org/show_bug.cgi?id=109967

        Reviewed by Darin Fisher.

        Now that the chromium call to this method has
        been removed, we can remove the stub.

        * public/WebIDBDatabase.h:

2013-02-21  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, roll chromium deps 183552 -> 183788

        * DEPS:

2013-02-21  John Mellor  <johnme@chromium.org>

        [chromium] Simplify computation of screenRect/windowRect.
        https://bugs.webkit.org/show_bug.cgi?id=110456

        Reviewed by Adam Barth.

        This patch removes applyDeviceScaleFactorInCompositor checks
        added by http://trac.webkit.org/changeset/139356 because
        Chrome for Android now sizes its screen and window in DIP
        units (like other platforms), so they are no longer necessary.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::windowRect):

2013-02-21  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Get rid of parsedURL in uiSourceCode, use name and path for displayName instead.
        https://bugs.webkit.org/show_bug.cgi?id=110335

        Reviewed by Alexander Pavlov.

        * src/js/Tests.js:
        (.TestSuite.prototype._scriptsAreParsed):

2013-02-21  Ken Kania  <kkania@chromium.org>

        Web Inspector: Add command for selecting files for file input element
        https://bugs.webkit.org/show_bug.cgi?id=109308

        Reviewed by Pavel Feldman.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::canSetFileInputFiles):
        (WebKit):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):

2013-02-20  Paweł Hajdan, Jr.  <phajdan.jr@chromium.org>

        Add gyp option to switch ENABLE(SQL_DATABASE)
        https://bugs.webkit.org/show_bug.cgi?id=109303
        http://code.google.com/p/chromium/issues/detail?id=22208

        Reviewed by Tony Chang.

        This will be useful to implement build with system sqlite.

        * features.gypi:
        * src/ChromeClientImpl.cpp:
        (WebKit):
        * src/ChromeClientImpl.h:
        (ChromeClientImpl):

2013-02-20  Dirk Schulze  <krit@webkit.org>

        Enable CANVAS_PATH flag
        https://bugs.webkit.org/show_bug.cgi?id=108508

        Reviewed by Simon Fraser.

        Enable CANVAS_PATH flag on trunk.

        * features.gypi:

2013-02-15  Dirk Schulze  <krit@webkit.org>

        [Chromium] Add runtime flag for CanvasPath
        https://bugs.webkit.org/show_bug.cgi?id=109997

        Reviewed by Adam Barth.

        Add runtime flag for Chromium.

        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableCanvasPath):
        (WebKit):
        (WebKit::WebRuntimeFeatures::isCanvasPathEnabled):

2013-02-20  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move WebKitPlatformSupport declaration to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=110262

        Reviewed by Adam Barth.

        In preparation for removing WebKitPlatformSupport.h entirely (once
        downstream references to that file have been updated). Part of a
        larger refactoring series; see tracking bug 82948.

        * public/platform/WebKitPlatformSupport.h:

2013-02-20  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove idbFactory from WebKitPlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=106457

        Reviewed by Adam Barth.

        Now that https://codereview.chromium.org/12230054 has landed, the
        idbFactory method is no longer needed. (Embedders must now call
        the new setIDBFactory method upon initialization.) Part of a
        larger refactoring series; see tracking bug 82948.

        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):

2013-02-20  Mark Lam  <mark.lam@apple.com>

        Rename DatabaseBackend to DatabaseBackendBase.
        https://bugs.webkit.org/show_bug.cgi?id=110303.

        Rubber stamped by Alexey Proskuryakov.

        * public/WebDatabase.h:
        (WebDatabase):
        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::databaseOpened):
        (WebCore::DatabaseObserver::databaseModified):
        (WebCore::DatabaseObserver::databaseClosed):
        (WebCore::DatabaseObserver::reportOpenDatabaseResult):
        (WebCore::DatabaseObserver::reportChangeVersionResult):
        (WebCore::DatabaseObserver::reportStartTransactionResult):
        (WebCore::DatabaseObserver::reportCommitTransactionResult):
        (WebCore::DatabaseObserver::reportExecuteStatementResult):
        (WebCore::DatabaseObserver::reportVacuumDatabaseResult):
        * src/WebDatabase.cpp:
        (WebKit::WebDatabase::WebDatabase):

2013-02-20  Rouslan Solomakhin  <rouslan@chromium.org>

        Fix use after free in ContextMenuClientImpl.cpp
        https://bugs.webkit.org/show_bug.cgi?id=109220

        Reviewed by Tony Chang.

        ContextMenuClientImpl can use a DocumentMarker after it is freed. The DocumentMarker is originally allocated
        by the spell checker. When the user context-clicks on a misspelling, ContextMenuClientImpl saves a reference
        to the clicked DocumentMarker, changes the selection, and then uses the DocumentMarker. Changing the selection
        causes re-check of spelling. If the spell check client serves the spellcheck request from cache, then re-checking
        spelling will delete the DocumentMarker and add a new one. This invalidates the DocumentMarker reference held by
        ContextMenuClientImpl. When ContextMenuClientImpl attempts to use the DocumentMarker, Address Sanitizer detects
        use after free. The fix is to save a copy of the DocumentMarker before changing selection.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::selectMisspellingAsync): Save a copy of DocumentMarker before changing selection.
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): Use DocumentMarker instead of Vector<DocumentMarker*>.

2013-02-20  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r183552.  Requested by
        "Mark Pilgrim" <pilgrim@chromium.org> via sheriffbot.

        * DEPS:

2013-02-19  Adrienne Walker  <enne@chromium.org>

        Unreviewed, rolling out r143382 and r143401.
        http://trac.webkit.org/changeset/143382
        http://trac.webkit.org/changeset/143401
        https://bugs.webkit.org/show_bug.cgi?id=106457

        Breaks Chromium win/mac canary compilation

        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKitPlatformSupport):
        (WebKit::WebKitPlatformSupport::idbFactory):
        (WebKit::WebKitPlatformSupport::~WebKitPlatformSupport):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):

2013-02-19  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move WebKitPlatformSupport declaration to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=110262

        Reviewed by Adam Barth.

        In preparation for removing WebKitPlatformSupport.h entirely (once
        downstream references to that file have been updated). Part of a
        larger refactoring series; see tracking bug 82948.

        * public/platform/WebKitPlatformSupport.h:

2013-02-19  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove idbFactory from WebKitPlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=106457

        Reviewed by Kentaro Hara.

        Now that https://codereview.chromium.org/12230054 has landed, the
        idbFactory method is no longer needed. (Embedders must now call
        the new setIDBFactory method upon initialization.) Part of a
        larger refactoring series; see tracking bug 82948.

        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):

2013-02-19  Alexandre Elias  <aelias@chromium.org>

        [chromium] Fix races in double-tap zoom minimum scale policy
        https://bugs.webkit.org/show_bug.cgi?id=110183

        Reviewed by Adam Barth.

        Double-tap zoom on Android is supposed to return to minimum scale
        if no pinch zoom occurred since the last double-tap. Because both
        pinch zoom and the result of double-tap zoom gets passed in from CC
        via applyScrollAndScale, this logic was brittle and prone to races
        depending on when the animation update was received. This patch
        keeps track of what the target double-tap scale is to make it more
        robust.

        I also fixed double-tap zoom test mocking to exercise the entire
        page scale animation flow (our previous way of testing was hiding the
        raciness), and added a new test case in DivAutoZoomMultipleParamsTest.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::startPageScaleAnimation):
        (WebKit):
        (WebKit::WebViewImpl::enableFakeDoubleTapAnimationForTesting):
        (WebKit::WebViewImpl::computeScaleAndScrollForHitRect):
        (WebKit::WebViewImpl::animateZoomAroundPoint):
        (WebKit::WebViewImpl::didCommitLoad):
        (WebKit::WebViewImpl::applyScrollAndScale):
        * src/WebViewImpl.h:
        (WebViewImpl):
        (WebKit::WebViewImpl::fakeDoubleTapAnimationPendingForTesting):
        (WebKit::WebViewImpl::fakeDoubleTapTargetPositionForTesting):
        (WebKit::WebViewImpl::fakeDoubleTapPageScaleFactorForTesting):
        (WebKit::WebViewImpl::fakeDoubleTapUseAnchorForTesting):
        * tests/WebFrameTest.cpp:

2013-02-19  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: additional checks on LevelDB decoding
        https://bugs.webkit.org/show_bug.cgi?id=109711

        Reviewed by Tony Chang.

        * tests/IDBLevelDBCodingTest.cpp: Update test with new method signatures.

2013-02-19  Jochen Eisinger  <jochen@chromium.org>

        [chromium] fix ScrollAnimatorNoneTest after r143295
        https://bugs.webkit.org/show_bug.cgi?id=110189

        Reviewed by Nico Weber.

        * tests/ScrollAnimatorNoneTest.cpp:
        (MockScrollableArea):

2013-02-18  Simon Fraser  <simon.fraser@apple.com>

        Clean up the boolean argument to visibleContentRect
        https://bugs.webkit.org/show_bug.cgi?id=110167

        Reviewed by Simon Fraser.

        Replace the boolean argument to visibleContentRect() with
        an enum.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::popupOpened):

2013-02-18  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r183105.  Requested by
        thakis_ via sheriffbot.

        * DEPS:

2013-02-18  Nico Weber  <thakis@chromium.org>

        [chromium] Remove ahem_path from WebKit.gyp
        https://bugs.webkit.org/show_bug.cgi?id=110111

        Reviewed by Jochen Eisinger.

        It's only used in DumpRenderTree.gyp, and that file defines its own
        copy of this variable.

        * WebKit.gyp:

2013-02-18  Laszlo Gombos  <l.gombos@samsung.com>

        Move ENABLE macros for WebCore out from Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=105735

        Move the chromium specific WebCore ENABLE macro definitions
        from Platform.h to features.gypi.

        Reviewed by Darin Adler and Benjamin Poulain.

        * features.gypi: Set ENABLE_SUBPIXEL_LAYOUT to 1.

2013-02-15  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Stub out SharedBuffer version of get()
        https://bugs.webkit.org/show_bug.cgi?id=108993

        Reviewed by Darin Fisher.

        All asynchronous get()-like calls go through WebIDBCallbacks,
        so this includes both get() and cursor callbacks.

        * public/WebIDBCallbacks.h:
        (WebKit::WebIDBCallbacks::onSuccess):
        (WebKit::WebIDBCallbacks::onSuccessWithPrefetch):

2013-02-15  Alec Flett  <alecflett@chromium.org>

        IndexedDB: fix chromium windows bustage
        https://bugs.webkit.org/show_bug.cgi?id=109970

        Unreviewed build fix for Chromium Windows.

        * tests/IDBDatabaseBackendTest.cpp:

2013-02-15  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Implement SharedBuffer version of put()
        https://bugs.webkit.org/show_bug.cgi?id=109092

        Reviewed by Adam Barth.

        Implement SharedBuffer/WebData version of
        IDBDatabaseBackendInterface::put, and put
        temporary scaffolding in until chrome is ready.

        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::put):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::put):
        (WebKit):
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * tests/IDBDatabaseBackendTest.cpp:

2013-02-15  Alexandre Elias  <aelias@chromium.org>

        [chromium] WebInputEventBuilders should not reverse page scale
        https://bugs.webkit.org/show_bug.cgi?id=109901

        Reviewed by James Robinson.

        Though in theory logical that if WebInputEvent -> PlatformEvent
        conversions divide by page scale, then the reverse builders should
        multiply, in reality the only user of the reverse builders is
        plugins which expect the same coordinate space as WebCore.

        * src/WebInputEventConversion.cpp:
        (WebKit::updateWebMouseEventFromWebCoreMouseEvent):
        (WebKit::WebMouseEventBuilder::WebMouseEventBuilder):
        (WebKit::addTouchPoints):
        (WebKit::WebGestureEventBuilder::WebGestureEventBuilder):
        * tests/WebInputEventConversionTest.cpp:
        (WebCore::TEST):

2013-02-15  Anders Carlsson  <andersca@apple.com>

        Remove const from a bunch of StorageArea member functions
        https://bugs.webkit.org/show_bug.cgi?id=109957

        Reviewed by Beth Dakin.

        Update for WebCore changes.

        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::length):
        (WebCore::StorageAreaProxy::key):
        (WebCore::StorageAreaProxy::getItem):
        (WebCore::StorageAreaProxy::contains):
        (WebCore::StorageAreaProxy::canAccessStorage):
        (WebCore::StorageAreaProxy::memoryBytesUsedByCache):
        * src/StorageAreaProxy.h:
        (StorageAreaProxy):

2013-02-15  Keishi Hattori  <keishi@webkit.org>

        PagePopupController.formatMonth should support short month format
        https://bugs.webkit.org/show_bug.cgi?id=109530

        Reviewed by Kent Tamura.

        * tests/LocaleMacTest.cpp:
        (LocaleMacTest::formatMonth):
        (TEST_F):

2013-02-15  Keishi Hattori  <keishi@webkit.org>

        Add setValue and closePopup methods to PagePopupController
        https://bugs.webkit.org/show_bug.cgi?id=109897

        Reviewed by Kent Tamura.

        * src/ColorChooserPopupUIController.cpp:
        (WebKit::ColorChooserPopupUIController::setValue):
        (WebKit):
        * src/ColorChooserPopupUIController.h:
        (ColorChooserPopupUIController):
        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::setValueAndClosePopup): Use setValue and closePopup.
        (WebKit):
        (WebKit::DateTimeChooserImpl::setValue):
        (WebKit::DateTimeChooserImpl::closePopup):
        * src/DateTimeChooserImpl.h:
        (DateTimeChooserImpl):

2013-02-15  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        Simplify hitTestResultAtPoint and nodesFromRect APIs
        https://bugs.webkit.org/show_bug.cgi?id=95720

        Reviewed by Julien Chaffraix.

        Update calls to new API.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::selectMisspelledWord):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDecidePolicyForNavigationAction):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::characterIndexForPoint):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::isRectTopmost):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleMouseDown):
        (WebKit::WebViewImpl::computeBlockBounds):
        (WebKit::WebViewImpl::bestTouchLinkNode):
        (WebKit::WebViewImpl::hitTestResultForWindowPos):

2013-02-14  Vsevolod Vlasov  <vsevik@chromium.org>

        Unreviewed chromium test fix: incorrect field was used for UISourceCode url.

        * src/js/Tests.js:
        (.TestSuite.prototype.testNoScriptDuplicatesOnPanelSwitch.checkNoDuplicates):
        (.TestSuite.prototype.uiSourceCodesToString_):

2013-02-14  David Trainor  <dtrainor@chromium.org>

        [chromium] No triggering autofill on unfocus
        https://bugs.webkit.org/show_bug.cgi?id=109735

        Reviewed by James Robinson.

        Need to notify the autofill client to not process text changes when we're setting
        focus to false and are trying to commit a composition.

        * public/WebAutofillClient.h:
        (WebAutofillClient):
        (WebKit::WebAutofillClient::setIgnoreTextChanges):
        (WebKit::WebAutofillClient::~WebAutofillClient):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setFocus):
        * tests/WebViewTest.cpp:

2013-02-14  Alexandre Elias  <aelias@chromium.org>

        [chromium] Fix scaling in WebViewImpl::handleGestureEvent, second try
        https://bugs.webkit.org/show_bug.cgi?id=109671

        Reviewed by James Robinson.

        My patch 142571 broke a bunch of things in handleGestureEvent that
        assumed the event came in scaled, most notably tap highlight and
        double-tap zoom. Switch those to PlatformGestureEvent.

        142808 was an earlier version of this patch that was reverted
        due to fling events asserting they can't be converted to
        PlatformGestureEvent. This version moves fling earlier in the
        function to avoid that.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::WebViewImpl::bestTapNode):
        (WebKit::WebViewImpl::enableTapHighlight):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/LinkHighlightTest.cpp:
        (WebCore::TEST):

2013-02-14  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, rolling out r142901.
        http://trac.webkit.org/changeset/142901

        r182258 introduces a dependency on chrome.gyp that breaks the win
        build. Rolling back to r182150 until I can work up a workaround.

        * DEPS:

2013-02-14  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, chromium roll 182150 -> 182448

        * DEPS:

2013-02-14  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move PlatformMessagePortChannel to WebCore
        https://bugs.webkit.org/show_bug.cgi?id=109845

        Reviewed by Adam Barth.

        Part of a larger refactoring series; see tracking bug 106829.

        * WebKit.gyp:
        * src/PlatformMessagePortChannel.cpp: Removed.
        * src/PlatformMessagePortChannel.h: Removed.
        * src/SharedWorkerRepository.cpp:
        * src/WebDOMMessageEvent.cpp:
        * src/WebFrameImpl.cpp:
        * src/WebSharedWorkerImpl.cpp:
        * src/WebWorkerClientImpl.cpp:

2013-02-14  Min Qin  <qinmin@chromium.org>

        Passing alpha to DeferredImageDecoder once decoding completes
        https://bugs.webkit.org/show_bug.cgi?id=108892

        Reviewed by Stephen White.

        Add test to check that alpha value is passed from the decoder to ImageFrameGenerator.

        * tests/ImageFrameGeneratorTest.cpp:
        (WebCore::MockImageDecoderFactory::create):
        (WebCore::TEST_F):
        * tests/MockImageDecoder.h:
        (WebCore::MockImageDecoder::MockImageDecoder):
        (WebCore::MockImageDecoder::setFrameHasAlpha):
        (MockImageDecoder):
        (WebCore::MockImageDecoder::frameHasAlphaAtIndex):

2013-02-08  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: expose did{Begin,Cancel}Frame() and {will,did}Composite() on WebDebToolsAgent
        https://bugs.webkit.org/show_bug.cgi?id=109192

        Reviewed by Pavel Feldman.

        - expose frame and compositing insturmentation methods on WebDevToolsAgent;
        - temporarily route them from WebViewImpl to WebDevToolsAgent;

        * public/WebDevToolsAgent.h:
        (WebDevToolsAgent):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::didBeginFrame):
        (WebKit):
        (WebKit::WebDevToolsAgentImpl::didCancelFrame):
        (WebKit::WebDevToolsAgentImpl::willComposite):
        (WebKit::WebDevToolsAgentImpl::didComposite):
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::instrumentBeginFrame):
        (WebKit::WebViewImpl::instrumentCancelFrame):
        (WebKit::WebViewImpl::didBeginFrame):
        (WebKit::WebViewImpl::willCommit):

2013-02-14  Mikhail Naganov  <mnaganov@chromium.org>

        [Chromium] Add a setting to control scaling content to fit viewport
        https://bugs.webkit.org/show_bug.cgi?id=109584

        Adds a setting called 'initializeAtMinimumPageScale'. By default,
        it is set to 'true' which corresponds to Chrome on Android behavior--
        adjust the page scale to make the content fit into the viewport
        by width. When set to false, the setting instructs ChromeClientImpl to
        set page scale to 1.0, unless the scale value is set by the page
        in the viewport meta-tag.

        Reviewed by Adam Barth.

        * public/WebSettings.h:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setInitializeAtMinimumPageScale):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        (WebKit::WebSettingsImpl::initializeAtMinimumPageScale):
        * tests/WebFrameTest.cpp:
        * tests/data/viewport-2x-initial-scale.html: Added.
        * tests/data/viewport-auto-initial-scale.html: Added.

2013-02-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r142808.
        http://trac.webkit.org/changeset/142808
        https://bugs.webkit.org/show_bug.cgi?id=109816

        Crashes on chromium webkit canary bots (Requested by atwilson_
        on #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::WebViewImpl::bestTouchLinkNode):
        (WebKit::WebViewImpl::enableTouchHighlight):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/LinkHighlightTest.cpp:
        (WebCore::TEST):

2013-02-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r142841.
        http://trac.webkit.org/changeset/142841
        https://bugs.webkit.org/show_bug.cgi?id=109791

        Caused webkit_unit_tests to crash on chromium bots. (Requested
        by atwilson_ on #webkit).

        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKit::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):
        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::FakeWebViewClient::initializeLayerTreeView):

2013-02-13  Max Vujovic  <mvujovic@adobe.com>

        [CSS Filters] Refactor filter outsets into a class
        https://bugs.webkit.org/show_bug.cgi?id=109330

        Update FilterOperations unit tests to use new interface for getting filter outsets.

        Reviewed by Dean Jackson.

        * tests/FilterOperationsTest.cpp:
        (WebKit::TEST):

2013-02-13  Zan Dobersek  <zdobersek@igalia.com>

        The 'global isinf/isnan' compiler quirk required when using clang with libstdc++
        https://bugs.webkit.org/show_bug.cgi?id=109325

        Reviewed by Anders Carlsson.

        Prefix calls to the isinf and isnan methods with std::, declaring we want to use the
        two methods as they're provided by the C++ standard library being used.

        * tests/DecimalTest.cpp:
        (TEST_F):

2013-02-13  Alexandre Elias  <aelias@chromium.org>

        [chromium] Fix scaling in WebViewImpl::handleGestureEvent
        https://bugs.webkit.org/show_bug.cgi?id=109671

        Reviewed by James Robinson.

        My last patch broke a bunch of things in handleGestureEvent that
        assumed the event came in scaled, most notably tap highlight and
        double-tap zoom. Switch those to PlatformGestureEvent.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::WebViewImpl::bestTapNode):
        (WebKit::WebViewImpl::enableTapHighlight):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/LinkHighlightTest.cpp:
        (WebCore::TEST):

2013-02-13  Eberhard Graether  <egraether@google.com>

        chromium: remove CompositorHUDFontAtlas
        https://bugs.webkit.org/show_bug.cgi?id=109328

        Reviewed by James Robinson.

        After switching the HudLayer to use skia's font rendering the
        CompositorHUDFontAtlas has become obsolete. This change removes
        this class and the related WebLayerTreeView API.

        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:

2013-02-13  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r182150.  Requested by
        jamesr_ via sheriffbot.

        * DEPS:

2013-02-13  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Add acceleration ratios for the deltas to WebMouseWheelEvents.
        https://bugs.webkit.org/show_bug.cgi?id=109611

        The deltas in mousewheel events generated by track can be accelerated (e.g. when
        scrolling repeatedly). Keep track of the ratio of the acceleration since that is
        useful for some tasks (e.g. overflow navigation gesture).

        Reviewed by Adam Barth.

        * public/WebInputEvent.h:
        (WebKit::WebMouseWheelEvent::WebMouseWheelEvent):
        * src/WebInputEvent.cpp:
        (SameSizeAsWebMouseWheelEvent):

2013-02-12  Yoshifumi Inoue  <yosin@chromium.org>

        Unreviewed. Build fix for Chromium-Win.
        Add #include <functional> for std::bind1st.

        * tests/PrerenderingTest.cpp:

2013-02-12  Joshua Bell  <jsbell@chromium.org>

        [Chromium] IndexedDB/Worker crash during shutdown
        https://bugs.webkit.org/show_bug.cgi?id=109467

        Reviewed by Tony Chang.

        If the message queue has already been terminated, don't bother scheduling
        a new error event that will never be delivered. Speculative fix for the
        issue, which only repros in multiprocess ports and so far only on some
        platforms.

        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::allowIndexedDB): Early exit.

2013-02-12  Zan Dobersek  <zdobersek@igalia.com>

        Remove ENABLE_XHR_RESPONSE_BLOB handling from various build systems
        https://bugs.webkit.org/show_bug.cgi?id=109481

        Reviewed by Daniel Bates.

        The ENABLE_XHR_RESPONSE_BLOB feature define was removed from the code
        back in r120574. There are still occurrences of it in various build systems
        which should all be removed as they are useless.

        * features.gypi:

2013-02-12  Jochen Eisinger  <jochen@chromium.org>

        Disabling WebFrameTest.ReplaceMisspelledRange on Android because it crashes
        https://bugs.webkit.org/show_bug.cgi?id=109548

        Unreviewed gardening.

        * tests/WebFrameTest.cpp:

2013-02-11  James Robinson  <jamesr@chromium.org>

        [Chromium] Get rid of WebAnimationController
        https://bugs.webkit.org/show_bug.cgi?id=109235

        Reviewed by Benjamin Poulain.

        * public/WebAnimationController.h: Removed.
        * public/WebFrame.h:
        (WebFrame):
        * src/WebAnimationControllerImpl.cpp: Removed.
        * src/WebAnimationControllerImpl.h: Removed.
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:
        (WebFrameImpl):

2013-02-11  James Robinson  <jamesr@chromium.org>

        [chromium] Add WebUnitTestSupport::createLayerTreeViewForTesting for webkit_unit_tests
        https://bugs.webkit.org/show_bug.cgi?id=109403

        Reviewed by Adam Barth.

        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKit::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):
        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::FakeWebViewClient::initializeLayerTreeView):

2013-02-11  Ryosuke Niwa  <rniwa@webkit.org>

        Disable delete button controller on non-Mac ports and delete EditorClient::shouldShowDeleteInterface
        https://bugs.webkit.org/show_bug.cgi?id=109534

        Reviewed by Anders Carlsson.

        * src/EditorClientImpl.cpp:
        (WebKit):
        * src/EditorClientImpl.h:
        (EditorClientImpl):

2013-02-11  Alexandre Elias  <aelias@chromium.org>

        [chromium] Apply page scale to all WebInputEvent types
        https://bugs.webkit.org/show_bug.cgi?id=109370

        Reviewed by James Robinson.

        Previously we only adjusted a few common input event types by page
        scale, but in fact almost every position and size in WebInputEvents
        requires it.

        I also took the opportunity to change some WebGestureEvent members to
        floats (which I checked causes no warnings in Chromium-side code with
        GCC or Clang).

        New WebInputEventConversionTest: InputEventsScaling

        * public/WebInputEvent.h:
        (WebKit::WebGestureEvent::WebGestureEvent):
        * src/WebInputEventConversion.cpp:
        (WebKit::widgetScaleFactor):
        (WebKit):
        (WebKit::PlatformMouseEventBuilder::PlatformMouseEventBuilder):
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder):
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        (WebKit::PlatformTouchPointBuilder::PlatformTouchPointBuilder):
        (WebKit::updateWebMouseEventFromWebCoreMouseEvent):
        (WebKit::WebMouseEventBuilder::WebMouseEventBuilder):
        (WebKit::addTouchPoints):
        (WebKit::WebTouchEventBuilder::WebTouchEventBuilder):
        (WebKit::WebGestureEventBuilder::WebGestureEventBuilder):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::WebViewImpl::hasTouchEventHandlersAt):
        (WebKit::WebViewImpl::handleInputEvent):
        * tests/WebInputEventConversionTest.cpp:
        (WebCore::TEST):
        (WebCore):

2013-02-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r142568.
        http://trac.webkit.org/changeset/142568
        https://bugs.webkit.org/show_bug.cgi?id=109541

        Broke the build, won't compile. (Requested by alancutter on
        #webkit).

        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKit::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):
        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::FakeWebViewClient::initializeLayerTreeView):

2013-02-11  James Robinson  <jamesr@chromium.org>

        [chromium] Add WebUnitTestSupport::createLayerTreeViewForTesting for webkit_unit_tests
        https://bugs.webkit.org/show_bug.cgi?id=109403

        Reviewed by Adam Barth.

        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKit::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):
        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::FakeWebViewClient::initializeLayerTreeView):

2013-02-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r181817.  Requested by
        "James Robinson" <jamesr@chromium.org> via sheriffbot.

        * DEPS:

2013-02-11  David Grogan  <dgrogan@chromium.org>

        IndexedDB: Add UnknownError to WebIDBDatabaseException
        https://bugs.webkit.org/show_bug.cgi?id=109519

        Reviewed by Adam Barth.

        * public/WebIDBDatabaseException.h:
        * src/AssertMatchingEnums.cpp:

2013-02-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r181787.  Requested by
        thakis_ via sheriffbot.

        * DEPS:

2013-02-11  Nico Weber  <thakis@chromium.org>

        Remove web intents code
        https://bugs.webkit.org/show_bug.cgi?id=109501

        Reviewed by Eric Seidel.

        See thread "Removing ENABLE(WEB_INTENTS) code" on webkit-dev.

        * WebKit.gyp:
        * features.gypi:
        * public/WebDeliveredIntentClient.h: Removed.
        * public/WebFrame.h:
        (WebKit):
        (WebFrame):
        * public/WebFrameClient.h:
        (WebKit):
        * public/WebIntent.h: Removed.
        * public/WebIntentRequest.h: Removed.
        * public/WebIntentServiceInfo.h: Removed.
        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * src/DeliveredIntentClientImpl.cpp: Removed.
        * src/DeliveredIntentClientImpl.h: Removed.
        * src/FrameLoaderClientImpl.cpp:
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:
        (WebKit):
        (WebFrameImpl):
        * src/WebIntent.cpp: Removed.
        * src/WebIntentRequest.cpp: Removed.
        * src/WebIntentServiceInfo.cpp: Removed.
        * src/WebRuntimeFeatures.cpp:

2013-02-11  Florin Malita  <fmalita@chromium.org>

        Unreviewed.  Rolled Chromium DEPS to r181770.

        * DEPS:

2013-02-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r181742.  Requested by
        fmalita_ via sheriffbot.

        * DEPS:

2013-02-11  Rouslan Solomakhin  <rouslan@chromium.org>

        [Chromium] Replace correct misspelled range in WebKit::WebFrameImpl::replaceMisspelledRange
        https://bugs.webkit.org/show_bug.cgi?id=108513

        Reviewed by Tony Chang.

        WebKit::WebFrameImpl::replaceMisspelledRange is going to be used by Chromium instead of
        WebKit::WebFrameImpl::replaceSelection for correcting misspellings. The current implementation
        of WebKit::WebFrameImpl::replaceMisspelledRange sometimes replaces the wrong range. This change
        uses Range::create instead of TextIterator::rangeFromLocationAndLength to select the correct
        range. This change also disables smart replace in WebKit::WebFrameImpl::replaceMisspelledRange
        to avoid introducing spaces around misspellings.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::replaceMisspelledRange): Replace correct misspelled range.
        * tests/WebFrameTest.cpp: Add unit test for WebKit::WebFrameImpl::replaceMisspelledRange method.

2013-02-11  Alexei Filippov  <alph@chromium.org>

        Web Inspector: Split Profiler domain in protocol into Profiler and HeapProfiler
        https://bugs.webkit.org/show_bug.cgi?id=108653

        Reviewed by Yury Semikhatsky.

        Currently CPU and heap profilers share the same domain 'Profiler' in the protocol.
        In fact these two profile types have not too much in common. So put each into its own domain.
        It should also help when Profiles panel gets split into several tools.
        This is the phase 1 which adds InspectorHeapProfilerAgent but doesn't
        change the original InspectorProfilerAgent.

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::shouldInterruptForMessage):

2013-02-11  Abhishek Arya  <inferno@chromium.org>

        Add ASSERT_WITH_SECURITY_IMPLICATION to detect out of bounds access
        https://bugs.webkit.org/show_bug.cgi?id=108981

        Reviewed by Eric Seidel.

        * src/AutofillPopupMenuClient.cpp:
        (WebKit::AutofillPopupMenuClient::getSuggestion):
        (WebKit::AutofillPopupMenuClient::getLabel):
        (WebKit::AutofillPopupMenuClient::getIcon):
        (WebKit::AutofillPopupMenuClient::removeSuggestionAtIndex):
        (WebKit::AutofillPopupMenuClient::valueChanged):
        (WebKit::AutofillPopupMenuClient::selectionChanged):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::shouldRunModalDialogDuringPageDismissal):

2013-02-10  James Robinson  <jamesr@chromium.org>

        [chromium] Enable more of webkit_unit_tests in component builds
        https://bugs.webkit.org/show_bug.cgi?id=109369

        Reviewed by Darin Fisher.

        Updates all webkit_unit_tests (except for LevelDBTest) to go through the Platform API instead of directly
        calling into webkit_support so they work in component builds.

        * WebKit.gyp:
        * tests/AssociatedURLLoaderTest.cpp:
        * tests/EventListenerTest.cpp:
        * tests/FrameTestHelpers.cpp:
        (WebKit::FrameTestHelpers::createWebViewAndLoad):
        (QuitTask):
        (WebKit::FrameTestHelpers::QuitTask::run):
        (FrameTestHelpers):
        (WebKit::FrameTestHelpers::runPendingTasks):
        * tests/FrameTestHelpers.h:
        (FrameTestHelpers):
        * tests/ListenerLeakTest.cpp:
        * tests/PopupMenuTest.cpp:
        * tests/PrerenderingTest.cpp:
        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::ScrollingCoordinatorChromiumTest::~ScrollingCoordinatorChromiumTest):
        (WebKit::ScrollingCoordinatorChromiumTest::navigateTo):
        * tests/URLTestHelpers.cpp:
        (WebKit::URLTestHelpers::registerMockedURLLoad):
        * tests/WebFrameTest.cpp:
        * tests/WebImageTest.cpp:
        (WebKit::readFile):
        * tests/WebPageNewSerializerTest.cpp:
        * tests/WebPageSerializerTest.cpp:
        * tests/WebPluginContainerTest.cpp:
        (WebKit::WebPluginContainerTest::TearDown):
        (WebKit::TEST_F):
        * tests/WebViewTest.cpp:

2013-02-10  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r181645.  Requested by
        "James Robinson" <jamesr@chromium.org> via sheriffbot.

        * DEPS:

2013-02-09  Stephen Chenney  <schenney@chromium.org>

        Unreviewed.  Rolled Chromium DEPS to last-known good revision. Really this time.

        * DEPS: 181594

2013-02-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to last-known good revision.
        Requested by "Stephen Chenney" <schenney@chromium.org> via
        sheriffbot.

        * DEPS:

2013-02-08  Kent Tamura  <tkent@chromium.org>

        [Chromium] Disable ENABLE_INPUT_TYPE_DATETIME
        https://bugs.webkit.org/show_bug.cgi?id=109272

        Reviewed by Kentaro Hara.

        We enabled this flag for desktop Chromium, but disabled the feature by a
        runtime flag. We disables the compile flag too because we have no plan
        to ship it in near future.

        * features.gypi: Remove ENABLE_INPUT_TYPE_DATETIME.

2013-02-08  Stephen Chenney  <schenney@chromium.org>

        Remove Skia code suppressions

        Unreviewed enabling of existing optimizations

        Removing all skia_webkit.gyp code suppressions and adding expectations
        for the failures.

        * skia_webkit.gyp:

2013-02-08  Dan Carney  <dcarney@google.com>

        [v8] isolate parameter added to all v8::peristent calls
        https://bugs.webkit.org/show_bug.cgi?id=109268

        Reviewed by Kentaro Hara.

        * tests/WebFrameTest.cpp:

2013-02-07  Kent Tamura  <tkent@chromium.org>

        [Chromium-Android] Disable input[type=datetime]
        https://bugs.webkit.org/show_bug.cgi?id=107614

        Reviewed by Kentaro Hara.

        Reason:
        http://lists.webkit.org/pipermail/webkit-dev/2013-January/023404.html

        * features.gypi:
        Disable ENABLE_INPUT_TYPE_DATETIME because of a wrong UI.
        We enable it for non-Android ports but the runtime flag for it is
        disabled by default. The runtime flag is enabled only in DumpRenderTree.

2013-02-07  Terry Anderson  <tdanderson@chromium.org>

        [chromium] Flings should not bubble up to enclosing scrollables when main-thread touch scrolling
        https://bugs.webkit.org/show_bug.cgi?id=108719

        Reviewed by Eric Seidel.

        In the event of a main-thread touch fling, dispatch a series of
        GestureScrollUpdateWithoutPropagation events defined in
        https://bugs.webkit.org/show_bug.cgi?id=108849 (instead of
        GestureScrollUpdate events) so that the fling does not
        propagate to enclosing scrollables.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollBy):

2013-02-07  Kent Tamura  <tkent@chromium.org>

        [Chromium] Add a flag to enable native form validation message
        https://bugs.webkit.org/show_bug.cgi?id=109134

        Reviewed by Adam Barth.

        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures): Add enableNativeValidationMessage and
        isNativeValidationMessageEnabled.
        * src/WebRuntimeFeatures.cpp:
        (WebKit): Add nativeValidationMessageEnabled.
        (WebKit::WebRuntimeFeatures::enableNativeValidationMessage): Added.
        (WebKit::WebRuntimeFeatures::isNativeValidationMessageEnabled): Addedd.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        Fill Page::PageClients::validationMessageClient if the flag is true.

2013-02-07  Eberhard Graether  <egraether@google.com>

        Web Inspector: Add settings checkbox for composited layer borders
        https://bugs.webkit.org/show_bug.cgi?id=109096

        Reviewed by Pavel Feldman.

        This change adds a checkbox to show composited layer borders to the WebInspector's
        rendering settings and plumbs the setting to Chromium's WebLayerTreeView. The setting
        is visible if InspectorClient::canShowDebugBorders() returns true.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::canShowDebugBorders):
        (WebKit):
        (WebKit::InspectorClientImpl::setShowDebugBorders):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setShowDebugBorders):
        (WebKit):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:

2013-02-07  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2013-02-07  David Trainor  <dtrainor@chromium.org>

        Add null check to editable in moveCaretSelectionTowardsWindowPoint
        https://bugs.webkit.org/show_bug.cgi?id=108962

        Reviewed by Eric Seidel.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::moveCaretSelectionTowardsWindowPoint):
        * tests/WebFrameTest.cpp:

2013-02-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r180752.  Requested by
        thakis_ via sheriffbot.

        * DEPS:

2013-02-06  Terry Anderson  <tdanderson@chromium.org>

        Add support for gesture scroll events that do not propagate to enclosing scrollables
        https://bugs.webkit.org/show_bug.cgi?id=108849

        Reviewed by Antonio Gomes.

        Define the new event type GestureScrollUpdateWithoutPropagation.

        * public/WebInputEvent.h:
        (WebKit::WebInputEvent::isGestureEventType):
        * src/PageWidgetDelegate.cpp:
        (WebKit::PageWidgetDelegate::handleInputEvent):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebPluginContainerImpl.cpp:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):

2013-02-06  Alexandre Elias  <aelias@chromium.org>

        Make ScrollView::paint() clip by visibleContentRect
        https://bugs.webkit.org/show_bug.cgi?id=108888

        Reviewed by Levi Weintraub.

        When applyPageScaleFactorInCompositor or fixedVisibleContentRect
        are used, frameRect() and visibleContentRect(true).size() are
        no longer synonyms, and the latter is the one that should be
        used for clipping paints.

        New WebFrameTest: pageScaleFactorScalesPaintClip.

        * tests/WebFrameTest.cpp:

2013-02-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r142025.
        http://trac.webkit.org/changeset/142025
        https://bugs.webkit.org/show_bug.cgi?id=109091

        broke the build (Requested by tdanderson on #webkit).

        * public/WebInputEvent.h:
        (WebKit::WebInputEvent::isGestureEventType):
        * src/PageWidgetDelegate.cpp:
        (WebKit::PageWidgetDelegate::handleInputEvent):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebPluginContainerImpl.cpp:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):

2013-02-06  Daniel Cheng  <dcheng@google.com>

        [chromium] Remove "config.h" header from WebUnitTests.cpp
        https://bugs.webkit.org/show_bug.cgi?id=108966

        Reviewed by Tony Chang.

        This file includes headers from base/ in Chromium, and config.h
        conflicts with base/logging.h. Rather than teaching certain files in
        base/ not to #include base/logging.h, remove the config.h include
        here. The ASSERT isn't really necessary, as attempting to run a null
        test suite won't go very far anyway.

        * tests/WebUnitTests.cpp:
        (WebKit::RunAllUnitTests):

2013-02-06  Terry Anderson  <tdanderson@chromium.org>

        Add support for gesture scroll events that do not propagate to enclosing scrollables
        https://bugs.webkit.org/show_bug.cgi?id=108849

        Reviewed by Antonio Gomes.

        Define the new event type GestureScrollUpdateWithoutPropagation.

        * public/WebInputEvent.h:
        (WebKit::WebInputEvent::isGestureEventType):
        * src/PageWidgetDelegate.cpp:
        (WebKit::PageWidgetDelegate::handleInputEvent):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebPluginContainerImpl.cpp:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):

2013-02-06  Chris Hopman  <cjhopman@chromium.org>

        [Chromium] WebWidget should expose a way to determine the start/end of the selection bounds
        https://bugs.webkit.org/show_bug.cgi?id=108667

        Reviewed by Darin Fisher.

        WebWidget::selectionBounds() returns the anchor and focus of the
        selection. This matches the arguments to WebFrame::selectRange().
        Add WebWidget::isSelectionAnchorFirst so that a caller can convert the
        anchor/focus to start/end.

        * public/WebWidget.h:
        (WebWidget):
        (WebKit::WebWidget::isSelectionAnchorFirst):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::isSelectionAnchorFirst):
        (WebKit):
        * src/WebViewImpl.h:
        * tests/WebViewTest.cpp:

2013-02-06  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Stub out SharedBuffer version of put()
        https://bugs.webkit.org/show_bug.cgi?id=108986

        Reviewed by Darin Fisher.

        This is part 1 of 3 to replace Vector<uint8_t> with SharedBuffer.

        * public/WebIDBDatabase.h:
        (WebKit):
        (WebKit::WebIDBDatabase::put):

2013-02-06  Stephen Chenney  <schenney@chromium.org>

        Add Skia code suppression flags to WebKit skia.gyp

        Unreviewed.

        This is step one in removing these flags. First we get them into
        WebKit, then we can remove them from Chrome.

        * skia_webkit.gyp:

2013-02-06  Mike West  <mkwst@chromium.org>

        Add an ENABLE_NOSNIFF feature flag.
        https://bugs.webkit.org/show_bug.cgi?id=109029

        Reviewed by Jochen Eisinger.

        This new flag will control the behavior of 'X-Content-Type-Options: nosniff'
        when processing script and other resource types.

        * features.gypi:

2013-02-05  David Dorwin  <ddorwin@chromium.org>

        [chromium] Explicitly destroy the WebMediaPlayer in WebMediaPlayerClientImpl's destructor
        https://bugs.webkit.org/show_bug.cgi?id=108989

        Reviewed by Kent Tamura.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::~WebMediaPlayerClientImpl):

2013-02-04  Kentaro Hara  <haraken@chromium.org>

        [V8] Reduce usage of deprecatedString() and deprecatedInteger()
        https://bugs.webkit.org/show_bug.cgi?id=108909

        Reviewed by Adam Barth.

        No tests. No change in behavior.

        * src/WebBindings.cpp:
        (WebKit::WebBindings::toV8Value):

2013-02-05  Kentaro Hara  <haraken@chromium.org>

        [V8] Make an Isolate parameter mandatory in HasInstance()
        https://bugs.webkit.org/show_bug.cgi?id=108917

        Reviewed by Adam Barth.

        Because these methods do not have an Isolate, we have to call
        v8::Isolate::GetCurrent().

        No tests. No change in behavior.

        * src/WebArrayBuffer.cpp:
        (WebKit::WebArrayBuffer::createFromV8Value):
        * src/WebArrayBufferView.cpp:
        (WebKit::WebArrayBufferView::createFromV8Value):
        * src/WebBindings.cpp:
        (WebKit::getRangeImpl):
        (WebKit::getNodeImpl):
        (WebKit::getElementImpl):
        (WebKit::getArrayBufferImpl):
        (WebKit::getArrayBufferViewImpl):
        (WebKit::WebBindings::getRange):
        (WebKit::WebBindings::getArrayBuffer):
        (WebKit::WebBindings::getArrayBufferView):
        (WebKit::WebBindings::getNode):
        (WebKit::WebBindings::getElement):

2013-02-05  Dana Jansens  <danakj@chromium.org>

        [chromium] Provide compositor offscreen context through the WebLayerTreeViewClient interface
        https://bugs.webkit.org/show_bug.cgi?id=107776

        Reviewed by James Robinson.

        * WebKit.gyp:
        * src/WebGraphicsContext3D.cpp: Removed.

2013-02-05  Mark Lam  <mark.lam@apple.com>

        Introduced back-end database classes + a few small fixes.
        https://bugs.webkit.org/show_bug.cgi?id=108759.

        Reviewed by Brady Eidson.

        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::databaseOpened):
        (WebCore::DatabaseObserver::databaseModified):
        (WebCore::DatabaseObserver::databaseClosed):

2013-02-05  Adam Barth  <abarth@webkit.org>

        DumpRenderTree should be able to enable the threaded parser
        https://bugs.webkit.org/show_bug.cgi?id=108970

        Reviewed by Eric Seidel.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setThreadedHTMLParser):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2013-02-05  Sami Kyostila  <skyostil@chromium.org>

        [chromium] Make overlay layers slow-scrolling
        https://bugs.webkit.org/show_bug.cgi?id=108957

        Reviewed by James Robinson.

        Since overlay layers get inserted on top of everything else, we must
        mark them slow-scrolling to prevent all scroll input events to the rest
        of the page from getting blocked. This is also more correct because
        generally the overlay contents need to be repainted whenever the scroll
        offset changes, and with this patch the painting happens in sync with
        page scrolling.

2013-02-05  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r141896.
        http://trac.webkit.org/changeset/141896
        https://bugs.webkit.org/show_bug.cgi?id=108956

        crashes indexdb security tests (Requested by gavinp on
        #webkit).

        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKitPlatformSupport):
        (WebKit::WebKitPlatformSupport::idbFactory):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):

2013-02-05  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove idbFactory from WebKitPlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=106457

        Reviewed by Adam Barth.

        Now that https://codereview.chromium.org/12181010/ has landed, the
        idbFactory method is no longer needed. (Embedders must now call
        the new setIDBFactory method upon initialization.) Part of a
        larger refactoring series; see tracking bug 82948.

        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):

2013-02-05  Kentaro Hara  <haraken@chromium.org>

        Unreviewed, rolling out r141865.
        http://trac.webkit.org/changeset/141865
        https://bugs.webkit.org/show_bug.cgi?id=108909

        webkit unit tests are broken

        * src/WebBindings.cpp:
        (WebKit::WebBindings::toV8Value):

2013-02-05  Kentaro Hara  <haraken@chromium.org>

        [V8] Reduce usage of deprecatedString() and deprecatedInteger()
        https://bugs.webkit.org/show_bug.cgi?id=108909

        Reviewed by Adam Barth.

        No tests. No change in behavior.

        * src/WebBindings.cpp:
        (WebKit::WebBindings::toV8Value):

2013-02-04  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r180583.  Requested by
        "Mark Pilgrim" <pilgrim@chromium.org> via sheriffbot.

        * DEPS:

2013-02-04  James Simonsen  <simonjam@chromium.org>

        [Chromium] Add a signal for when the body is inserted in the document
        https://bugs.webkit.org/show_bug.cgi?id=108725

        Reviewed by Adam Barth.

        * public/WebFrameClient.h:
        (WebFrameClient):
        (WebKit::WebFrameClient::willInsertBody):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchWillInsertBody):
        (WebKit):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):
        * tests/WebFrameTest.cpp:

2013-02-04  Chris Hopman  <cjhopman@chromium.org>

        Make moveCaretTowardsWindowPoint not snap to the beginning/end when moved above/below editable
        https://bugs.webkit.org/show_bug.cgi?id=107850

        Reviewed by Ojan Vafai.

        On Android, EditingBehavior::shouldMoveCaret[...] controls the
        behavior of insertion handles. This change adds a new Android specific
        editing behavior type so that we can change these settings independent
        of behavior for other platforms.

        * public/WebSettings.h:
        * src/AssertMatchingEnums.cpp:
        Just add the corresponding assertion for the new editing behavior.

        * public/WebSettings.h:
        * src/AssertMatchingEnums.cpp:

        * tests/WebFrameTest.cpp:
        * tests/data/move_caret.html: Added.
        Add a test that moveCaretTowardsWindowPoint works as expected on
        Android.

2013-01-31  Kentaro Hara  <haraken@chromium.org>

        Implement WheelEvent::deltaMode
        https://bugs.webkit.org/show_bug.cgi?id=108455

        Reviewed by Adam Barth.

        * src/WebInputEventConversion.cpp:
        (WebKit::WebMouseWheelEventBuilder::WebMouseWheelEventBuilder):

2013-02-04  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move WorkerContextProxy to WebCore
        https://bugs.webkit.org/show_bug.cgi?id=108847

        Reviewed by Adam Barth.

        Part of a larger refactoring series; see tracking bug 106829.

        * WebKit.gyp:
        * src/WebKit.cpp:
        (WebKit::initializeWithoutV8):
        * src/WorkerContextProxy.cpp: Removed.

2013-02-04  Abhishek Arya  <inferno@chromium.org>

        Add ASSERT_WITH_SECURITY_IMPLICATION to detect out of bounds access
        https://bugs.webkit.org/show_bug.cgi?id=108668

        Reviewed by Eric Seidel.

        * src/ContextFeaturesClientImpl.cpp:
        (WebKit::ContextFeaturesCache::entryFor):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::selectFindMatch):

2013-02-04  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move IDBFactoryBackendInterface to WebCore
        https://bugs.webkit.org/show_bug.cgi?id=108638

        Reviewed by Adam Barth.

        Part of a larger refactoring series; see tracking bug 106829.

        * WebKit.gyp:
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendInterface.cpp: Removed.
        * src/IDBFactoryBackendProxy.h:
        * src/WebKit.cpp:
        (WebKit::initializeWithoutV8):

2013-02-04  Abhishek Arya  <inferno@chromium.org>

        Add ASSERT_WITH_SECURITY_IMPLICATION to detect bad cast in DOM, CSS, etc.
        https://bugs.webkit.org/show_bug.cgi?id=108688

        Reviewed by Eric Seidel.

        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::allowIndexedDB):
        (WebKit::getWebFrame):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::LocalFileSystem::deleteFileSystem):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::connectTask):
        (WebKit::resumeWorkerContextTask):
        (WebKit::connectToWorkerContextInspectorTask):
        (WebKit::reconnectToWorkerContextInspectorTask):
        (WebKit::disconnectFromWorkerContextInspectorTask):
        (WebKit::dispatchOnInspectorBackendTask):

2013-02-04  Sami Kyostila  <skyostil@chromium.org>

        Disable -webkit-overflow-scrolling CSS attribute on Chromium
        https://bugs.webkit.org/show_bug.cgi?id=108020

        Reviewed by James Robinson.

        Now that we can automatically promote overflow elements to accelerated
        scrolling layers there is no use for the -webkit-overflow-scrolling CSS
        attribute any longer on Chromium.

        This patch enables composited overflow scrolling in
        ScrollingCoordinatorChromiumTest. Because this also causes the overflow div
        in non-fast-scrollable.html to become composited, we also need to modify that
        test to opt it out of composited scrolling.

        * features.gypi:
        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::ScrollingCoordinatorChromiumTest::ScrollingCoordinatorChromiumTest):
        (WebKit::TEST_F):
        * tests/data/non-fast-scrollable.html:
        * tests/data/overflow-scrolling.html: Renamed from Source/WebKit/chromium/tests/data/touch-overflow-scrolling.html.

2013-02-03  KwangYong Choi  <ky0.choi@samsung.com>

        Fix build warning after r141473
        https://bugs.webkit.org/show_bug.cgi?id=108782

        Reviewed by Kentaro Hara.

        Fix -Wunused-parameter build warning.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::getClientPasteboardDataForRange):

2013-02-03  David Dorwin  <ddorwin@chromium.org>

        [chromium] Do not call m_widgetClient->show() for WebHelperPlugin.
        https://bugs.webkit.org/show_bug.cgi?id=108740

        Reviewed by Kent Tamura.

        The calls to m_widgetClient->show() and setFocus() do not appear to be
        necessary, and the former causes problems on at least on platform.

        * src/WebHelperPluginImpl.cpp:
        (WebKit::WebHelperPluginImpl::initialize): Removed calls to m_widgetClient->show() and setFocus().
        (WebKit::WebHelperPluginImpl::setFocus): Should never be called.

2013-02-02  Michael Nordman  <michaeln@google.com>

        [chromium] FileSystem mods: Changes to snapshot file creation to reduce dependencies on blobs.
        This patch just alters the WebKitAPI in advance of coding to the new API in chromium and webkit
        sources, defining two new virtual methods (unimplemented and uncalled). The existing API remains
        in place and in use.
        https://bugs.webkit.org/show_bug.cgi?id=108736

        Reviewed by Darin Fisher.

        * public/WebFileSystemCallbacks.h:
        (WebFileSystemCallbacks):
        (WebKit::WebFileSystemCallbacks::didCreateSnapshotFile):

2013-02-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r180221.  Requested by
        "Nico Weber" <thakis@chromium.org> via sheriffbot.

        * DEPS:

2013-02-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r180186.  Requested by
        "Nico Weber" <thakis@chromium.org> via sheriffbot.

        * DEPS:

2013-02-01  Chris Hopman  <cjhopman@chromium.org>

        [Chromium] WebWidget::selectionBounds should return the bounds in document space
        https://bugs.webkit.org/show_bug.cgi?id=108386

        Reviewed by James Robinson.

        When in applyPageScaleFactorInCompositor mode, selectionBounds needs
        to scale the anchor/focus window points by the pageScaleFactor.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::selectionBounds):
        (WebKit::WebViewImpl::computeScaleAndScrollForFocusedNode):

2013-02-01  Dominic Mazzoni  <dmazzoni@google.com>

        AX: memoize expensive computation during blocks where tree doesn't change
        https://bugs.webkit.org/show_bug.cgi?id=106497

        Reviewed by Ryosuke Niwa.

        Expose two methods to enable and disable caching of
        computed WebAccessibilityObject attributes, to speed up
        batch read-only operations.

        * public/WebAccessibilityObject.h:
        (WebAccessibilityObject):
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::startCachingComputedObjectAttributesUntilTreeMutates):
        (WebKit):
        (WebKit::WebAccessibilityObject::stopCachingComputedObjectAttributes):

2013-02-01  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Expose WebNode::shadowHost()
        https://bugs.webkit.org/show_bug.cgi?id=108681

        Reviewed by Dimitri Glazkov.

        BrowserPlugin needs to be able to check the event listeners attached to
        <webview> and so we expose shadowHost to permit it to poke at the webview
        node.

        * public/WebNode.h:
        * src/WebNode.cpp:
        (WebKit::WebNode::shadowHost):
        (WebKit):

2013-02-01  Rouslan Solomakhin  <rouslan@chromium.org>

        [Chromium] Ignore punctuation in spellcheck
        https://bugs.webkit.org/show_bug.cgi?id=108511

        Reviewed by Tony Chang.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::IsWhiteSpaceOrPunctuation): Added utility function to detect whitespace or punctuation.
        (WebKit::selectMisspellingAsync): Ignore punctuation when selecting the misspelling.

2013-02-01  Philip Rogers  <pdr@google.com>

        Change hasAlpha to isKnownToBeOpaque and correct the return value for SVG images.
        https://bugs.webkit.org/show_bug.cgi?id=106966

        Reviewed by Stephen White.

        * tests/DragImageTest.cpp:
        (WebCore::TestImage::currentFrameKnownToBeOpaque):
        (TestImage):
        * tests/ImageLayerChromiumTest.cpp:
        (WebCore::TestImage::currentFrameKnownToBeOpaque):
        * tests/PlatformContextSkiaTest.cpp:
        (WebCore::TEST):

2013-02-01  Nico Weber  <thakis@chromium.org>

        [chromium] Build webkit with enable_web_intents set to 0.
        https://bugs.webkit.org/show_bug.cgi?id=108408

        Reviewed by Tony Chang.

        I'll then make chromium build fine with that, then switch
        enable_web_intents to 0, roll that into webkit, and then
        actually remove the code hidden behind this flag.

        The features.gypi bit depends on https://codereview.chromium.org/12143002/
        and will disable web intents support on android. Since common.gypi
        sets enable_web_intents to 0 explicitly, it seems this is currently on
        by accident anyway.

        While it looks like this CL just removes ENABLE_WEB_INTENTS=1 from
        features.gypi completely, it's still set further down the file if
        enable_web_intents is on.

        * WebKit.gyp:
        * features.gypi:
        * src/WebFrameImpl.cpp:

2013-02-01  Rouslan Solomakhin  <rouslan@chromium.org>

        [Chromium] Ignore whitespace in spellcheck
        https://bugs.webkit.org/show_bug.cgi?id=108510

        Reviewed by Ryosuke Niwa.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::selectMisspellingAsync): Ignore whitespace when selecting the misspelling.

2013-02-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r180131.  Requested by
        "Florin Malita" <fmalita@chromium.org> via sheriffbot.

        * DEPS:

2013-02-01  Alexis Menard  <alexis@webkit.org>

        Enable unprefixed CSS transitions by default.
        https://bugs.webkit.org/show_bug.cgi?id=108216

        Reviewed by Dean Jackson.

        Rename the flag CSS_TRANSFORMS_ANIMATIONS_TRANSITIONS_UNPREFIXED
        to CSS_TRANSFORMS_ANIMATIONS_UNPREFIXED which will be used later to 
        guard the unprefixing work for CSS Transforms and animations.

        * features.gypi:

2013-02-01  Ken Kania  <kkania@chromium.org>

        Web Inspector: Add support for handling modal dialogs
        https://bugs.webkit.org/show_bug.cgi?id=107883

        Reviewed by Pavel Feldman.

        Introduce support for being notified when a JavaScript modal dialog
        is opening and closing, as well as a new command for accepting or
        dismissing the dialog.

        * public/WebDevToolsAgent.h:
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::handleJavaScriptDialog):
        (WebKit):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebDevToolsAgentImpl.cpp:
        (BrowserDataHintStringValues):
        (WebKit::WebDevToolsAgentImpl::captureScreenshot):
        (WebKit::WebDevToolsAgentImpl::handleJavaScriptDialog):
        (WebKit):
        (WebKit::browserHintToString):
        (WebKit::browserHintFromString):
        (WebKit::WebDevToolsAgent::patchWithBrowserData):
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2013-02-01  Dan Alcantara  <dfalcantara@chromium.org>

        Touch disambiguation blacklist is not being queried properly
        https://bugs.webkit.org/show_bug.cgi?id=108222

        Reviewed by Adam Barth.

        TEST=WebFrameTest::DisambiguationPopupBlacklist

        Fix the blacklist so that we check it for the right nodes.
        Add a test to check that the blacklist is being built and used
        correctly.  Also update the other DisambiguationPopup tests to
        use the new page scale method.

        * tests/WebFrameTest.cpp:
        * tests/data/disambiguation_popup_blacklist.html: Added.

2013-02-01  Eberhard Graether  <egraether@google.com>

        [chromium] only show checkboxes for FPS meter and continuous painting when compositing mode is forced
        https://bugs.webkit.org/show_bug.cgi?id=108236

        Reviewed by Pavel Feldman.

        This change hides the checkboxes for FPS meter and continuous painting if compositing mode is not forced.
        This way the checkboxes only show up for users that can make use of these features.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::canShowFPSCounter):
        (WebKit::InspectorClientImpl::canContinuouslyPaint):

2013-01-31  Aurimas Liutikas  <aurimas@chromium.org>

        Editor::m_compositionNode not updated on HTMLInputElement::setValue()
        https://bugs.webkit.org/show_bug.cgi?id=107737

        Reviewed by Ryosuke Niwa.

        * public/WebViewClient.h:
        (WebKit::WebViewClient::didCancelCompositionOnSelectionChange):
            Adding a callback to let the WebViewClient know that the composition has been cancelled.
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::respondToChangedSelection):
            Adding a call composition if it is no longer valid.

2013-01-31  Aurimas Liutikas  <aurimas@chromium.org>

        [Chromium] WebViewTest.SetCompositionFromExistingText failing after r141479
        https://bugs.webkit.org/show_bug.cgi?id=108543

        Reviewed by Ryosuke Niwa.

        Fixing a bug that was uncovered after fixing http://trac.webkit.org/changeset/141479

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setCompositionFromExistingText):
        * tests/WebViewTest.cpp:
            Re-enabling the test

2013-01-31  Hajime Morrita  <morrita@google.com> 

        Unreviewed, followup fix for r141535.

        * tests/WebFrameTest.cpp:

2013-01-31  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r180023.  Requested by
        thakis_ via sheriffbot.

        * DEPS:

2013-01-31  Hajime Morrita  <morrita@google.com>

        Unreviewed, disabling failing test.

        * tests/WebFrameTest.cpp:

2013-01-31  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r141479.
        http://trac.webkit.org/changeset/141479
        https://bugs.webkit.org/show_bug.cgi?id=108564

        breaks chromium test (Requested by morrita on #webkit).

        * public/WebViewClient.h:
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::respondToChangedSelection):

2013-01-31  Alec Flett  <alecflett@chromium.org>

        IndexedDB: remove old transaction backend bootstrap code
        https://bugs.webkit.org/show_bug.cgi?id=103923

        Reviewed by Dimitri Glazkov.

        Remove all deprecated WebKit APIs from
        the IDB backend.

        * WebKit.gyp:
        * public/WebIDBCallbacks.h:
        (WebKit):
        * public/WebIDBDatabase.h:
        (WebKit):
        * public/WebIDBTransaction.h: Removed.
        * public/WebIDBTransactionCallbacks.h: Removed.
        * src/AssertMatchingEnums.cpp:
        * src/IDBCallbacksProxy.cpp:
        * src/IDBDatabaseBackendProxy.cpp:
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/IDBTransactionBackendProxy.cpp: Removed.
        * src/IDBTransactionBackendProxy.h: Removed.
        * src/IDBTransactionCallbacksProxy.cpp: Removed.
        * src/IDBTransactionCallbacksProxy.h: Removed.
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit):
        * src/WebIDBDatabaseImpl.h:
        (WebKit):
        (WebIDBDatabaseImpl):
        * src/WebIDBTransactionCallbacksImpl.cpp: Removed.
        * src/WebIDBTransactionCallbacksImpl.h: Removed.
        * src/WebIDBTransactionImpl.cpp: Removed.
        * src/WebIDBTransactionImpl.h: Removed.
        * tests/IDBAbortOnCorruptTest.cpp:
        * tests/IDBDatabaseBackendTest.cpp:

2013-01-31  Rouslan Solomakhin  <rouslan@chromium.org>

        [Chromium] Select multi-word misspelling on context click
        https://bugs.webkit.org/show_bug.cgi?id=108509

        Reviewed by Tony Chang.

        * src/ContextMenuClientImpl.cpp:
        (WebKit):
        (WebKit::selectMisspellingAsync): Added utility function to get the misspelling for asynchronous spellcheck.
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): Select multi-word misspelling on context click.

2013-01-31  Florin Malita  <fmalita@chromium.org>

        [Chromium] Unreviewed gardening.

        WebViewTest.SetCompositionFromExistingText failing after r141479.

        * tests/WebViewTest.cpp:

2013-01-31  Alexandre Elias  <aelias@chromium.org>

        [chromium] Rework page scale factor limits initialization
        https://bugs.webkit.org/show_bug.cgi?id=108446

        Reviewed by James Robinson.

        When loading a page with viewportEnabled, both the limits
        specified by the viewport tag and the content width need to be
        considered before we initialize the minimum page scale (and
        pageScaleFactor itself usually to the same value). The timing has
        proven tricky to get correct.

        This patch simplifies the flow by computing the
        limits only at the end of layouts and at no other time. In combination
        with https://bugs.webkit.org/show_bug.cgi?id=107922 which sets
        needsLayout() appropriately, this results in a more robust and easy
        to understand sequence.

        Fixes FixedLayoutInitializeAtMinimumPageScale test.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::setPageScaleFactorLimits):
        (WebKit::WebViewImpl::computePageScaleFactorLimits):
        (WebKit::WebViewImpl::layoutUpdated):
        (WebKit::WebViewImpl::didChangeContentsSize):
        * src/WebViewImpl.h:
        (WebKit::WebViewImpl::setInitialPageScaleFactor):
        (WebViewImpl):
        * tests/WebFrameTest.cpp:

2013-01-31  Aurimas Liutikas  <aurimas@chromium.org>

        Editor::m_compositionNode not updated on HTMLInputElement::setValue()
        https://bugs.webkit.org/show_bug.cgi?id=107737

        Reviewed by Ryosuke Niwa.

        * public/WebViewClient.h:
        (WebKit::WebViewClient::didCancelCompositionOnSelectionChange):
            Adding a callback to let the WebViewClient know that the composition has been cancelled.
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::respondToChangedSelection):
            Adding a call composition if it is no longer valid.

2013-01-31  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move LocalizedStrings to WebCore
        https://bugs.webkit.org/show_bug.cgi?id=108488

        Reviewed by Adam Barth.

        Part of a larger refactoring series; see tracking bug 106829.

        * WebKit.gyp:
        * src/LocalizedStrings.cpp: Removed.

2013-01-31  Enrica Casucci  <enrica@apple.com>

        WebKit2: provide new bundle APIs to allow bundle clients to be notified of pasteboard access.
        https://bugs.webkit.org/show_bug.cgi?id=108396.
        <rdar://problem/12920461>

        Reviewed by Alexey Proskuryakov.

        Adds stub implementation for WebKit of the new EditorClient methods.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::willWriteSelectionToPasteboard):
        (WebKit::EditorClientImpl::getClientPasteboardDataForRange):
        * src/EditorClientImpl.h:

2013-01-31  Chris Hopman  <cjhopman@chromium.org>

        [chromium] Make selection handling work in applyPageScaleInCompositor mode
        https://bugs.webkit.org/show_bug.cgi?id=107831

        Reviewed by Ryosuke Niwa.

        These functions expect a window point. When in
        applyPageScaleFactorInCompositor mode, the points need to be unscaled
        by the page scale factor.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::selectRange):
        (WebKit::WebFrameImpl::moveCaretSelectionTowardsWindowPoint):

2013-01-31  Tom Sepez  <tsepez@chromium.org>

        [v8] Enable binding integrity on mac
        https://bugs.webkit.org/show_bug.cgi?id=108500

        Reviewed by Adam Barth.

        Patch is correct if existing tests pass without new crashes.
        
        * features.gypi:
        Set ENABLE_BINDING_INTEGRITY=1 when OS=="mac"

2013-01-31  Dan Alcantara  <dfalcantara@chromium.org>

        WebFrameTest.DisambiguationPopup is failing
        https://bugs.webkit.org/show_bug.cgi?id=108160

        Reviewed by Adam Barth.

        Fix the unit test so that it is using the right HTML file.

        * tests/WebFrameTest.cpp:

2013-01-31  Tony Chang  <tony@chromium.org>

        [Chromium] webkit_unit_tests should depend on base/allocator for ASAN
        https://bugs.webkit.org/show_bug.cgi?id=108497

        Reviewed by James Robinson.

        * WebKitUnitTests.gyp:

2013-01-31  Alexandre Elias  <aelias@chromium.org>

        Call FrameView::contentsResized() when setting fixed layout size
        https://bugs.webkit.org/show_bug.cgi?id=107922

        Reviewed by James Robinson.

        In fixed layout mode, we should be calling contentsResized() when the
        fixed layout size is changed, but not laying out when the visible
        content rect changes.

        Previously landed as r140869 but was reverted due to a bug in bundled
        Chromium-specific code. This patch includes just the minimum needed in
        WebCore.

        New WebFrameTest: FrameViewNeedsLayoutOnFixedLayoutResize.  Some
        flaky and obsolete tests for the old page scale mode are also deleted.

        * tests/WebFrameTest.cpp:

2013-01-31  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Rename WebMediaStreamDescriptor and WebMediaStreamComponent to WebMediaStream and WebMediaStreamTrack
        https://bugs.webkit.org/show_bug.cgi?id=108458

        Reviewed by Adam Barth.

        Only renames, no other code changes.

        * public/WebMediaStreamRegistry.h:
        (WebKit):
        (WebMediaStreamRegistry):
        * public/WebUserMediaRequest.h:
        (WebKit):
        (WebUserMediaRequest):
        * src/WebMediaStreamRegistry.cpp:
        (WebKit::WebMediaStreamRegistry::lookupMediaStreamDescriptor):
        * src/WebUserMediaRequest.cpp:
        (WebKit::WebUserMediaRequest::requestSucceeded):

2013-01-31  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Remove WebKit API for old onSuccess/onUpgradeNeeded
        https://bugs.webkit.org/show_bug.cgi?id=108399

        Reviewed by Dimitri Glazkov.

        Cleanup now that chromium proxies the new signatures through.

        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::onSuccess):
        (WebKit::IDBCallbacksProxy::onUpgradeNeeded):
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBCallbacksImpl.h:
        (WebIDBCallbacksImpl):

2013-01-31  James Robinson  <jamesr@chromium.org>

        [chromium] Remove dead transitional code from WebViewImpl
        https://bugs.webkit.org/show_bug.cgi?id=107889

        Reviewed by Adam Barth.

        The chromium side of this landed at r178256 and seems stable.

        * public/WebWidget.h:
        (WebKit::WebWidget::setCompositorSurfaceReady):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::~WebViewImpl):
        (WebKit):
        (WebKit::WebViewImpl::setIsTransparent):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:
        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::FakeWebViewClient::initializeLayerTreeView):
        (FakeWebViewClient):
        (WebKit::FakeWebViewClient::layerTreeView):
        (WebKit::ScrollingCoordinatorChromiumTest::ScrollingCoordinatorChromiumTest):
        (ScrollingCoordinatorChromiumTest):

2013-01-31  Kentaro Hara  <haraken@chromium.org>

        Rename WheelEvent::Granularity to WheelEvent::DeltaMode
        https://bugs.webkit.org/show_bug.cgi?id=108434

        Reviewed by Ryosuke Niwa.

        Per the spec, WheelEvent::Granularity should be renamed to WheelEvent::DeltaMode.

        Spec: http://www.w3.org/TR/DOM-Level-3-Events/#events-WheelEvent
        https://dvcs.w3.org/hg/d4e/raw-file/tip/source_respec.htm#constructor-wheelevent

        No tests. No change in behavior.

        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder):
        (WebKit::WebMouseWheelEventBuilder::WebMouseWheelEventBuilder):

2013-01-31  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Bump Chromium dependency to 179332

        * DEPS:

2013-01-31  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move MediaPlayerPrivateChromium to WebCore
        https://bugs.webkit.org/show_bug.cgi?id=108415

        Reviewed by Adam Barth.

        Part of a larger refactoring series; see tracking bug 106829.

        * WebKit.gyp:
        * src/MediaPlayerPrivateChromium.cpp: Removed.
        * src/WebKit.cpp:
        (WebKit::initializeWithoutV8): call new setter function in
        WebCore::MediaPlayerPrivate

2013-01-30  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r141358.
        http://trac.webkit.org/changeset/141358
        https://bugs.webkit.org/show_bug.cgi?id=108421

        breaks android builder (Requested by morrita on #webkit).

        * WebKit.gyp:
        * features.gypi:
        * src/WebFrameImpl.cpp:

2013-01-30  Nico Weber  <thakis@chromium.org>

        [chromium] Build webkit with enable_web_intents set to 0.
        https://bugs.webkit.org/show_bug.cgi?id=108408

        Reviewed by Kentaro Hara.

        I'll then make chromium build fine with that, then switch
        enable_web_intents to 0, roll that into webkit, and then
        actually remove the code hidden behind this flag.

        * WebKit.gyp:
        * features.gypi:
        * src/WebFrameImpl.cpp:

2013-01-30  Levi Weintraub  <leviw@chromium.org>

        [Chromium] WebPluginContainerImpl adding imbalanced touch handler refs
        https://bugs.webkit.org/show_bug.cgi?id=108381

        Reviewed by James Robinson.

        WebPluginContainerImpl would call Document::didAddTouchEventHandler every time the plugin requested
        touch events. Some plugins make this request more than once, leading to an imbalance in Document's
        touch event handler map, and a stale node pointer when the plugin is destroyed. This change
        has WebPluginContainerImpl only add one ref for the plugin at a time.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::requestTouchEventType):

2013-01-30  Yusuf Ozuysal  <yusufo@google.com>

        Start sending scrollType as NonBubblingGesture for flings
        https://bugs.webkit.org/show_bug.cgi?id=108372

        Reviewed by James Robinson.

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::handleGestureFling):

2013-01-30  Tien-Ren Chen  <trchen@chromium.org>

        [chromium] Add WebFrame::visibleContentRect()
        https://bugs.webkit.org/show_bug.cgi?id=108311

        Reviewed by James Robinson.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::visibleContentRect):
        (WebKit):
        * src/WebFrameImpl.h:
        (WebFrameImpl):

2013-01-30  Kentaro Hara  <haraken@chromium.org>

        Implement KeyboardEvent constructor
        https://bugs.webkit.org/show_bug.cgi?id=108320

        Reviewed by Adam Barth.

        Renamed keyboard event constant variables to avoid style errors.

        * src/WebInputEventConversion.cpp:
        (WebKit::WebKeyboardEventBuilder::WebKeyboardEventBuilder):
        * tests/WebInputEventConversionTest.cpp:
        * tests/WebInputEventFactoryTestGtk.cpp:

2013-01-30  Kentaro Hara  <haraken@chromium.org>

        Implement WheelEvent constructor
        https://bugs.webkit.org/show_bug.cgi?id=108303

        Reviewed by Adam Barth.

        This patch just renames an enum value to avoid style check error.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollBy):

2013-01-30  Dana Jansens  <danakj@chromium.org>

        [chromium] Add recordRenderingStats to WebSettings
        https://bugs.webkit.org/show_bug.cgi?id=108358

        Reviewed by James Robinson.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setRecordRenderingStats):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        (WebKit::WebSettingsImpl::recordRenderingStats):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2013-01-30  Tony Gentilcore  <tonyg@chromium.org>

        Fix compile error in WebFrameTest
        https://bugs.webkit.org/show_bug.cgi?id=108360

        Unreviewed build fix.

        Fixes compile error:
        ../../Source/WebKit/chromium/tests/WebFrameTest.cpp:330:5: error: converting false to pointer type for argument 1 of char testing::internal::IsNullLiteralHelper(testing::internal::Secret*) [-Werror=conversion-null]

        * tests/WebFrameTest.cpp:

2013-01-30  John Knottenbelt  <jknotten@chromium.org>

        [Chromium] Fix find in page rects for overflowing content.
        https://bugs.webkit.org/show_bug.cgi?id=104924

        Reviewed by Julien Chaffraix.

        If a div has overflowing content, we should only normalise its
        coordinates against the renderview or the containing scrollable block.

        TEST=WebFrameTest.FindInPageMatchRects

        * src/FindInPageCoordinates.cpp:
        (WebKit::enclosingScrollableAncestor):
            Helper function to find the enclosing containing block with an overflow clip.
        (WebKit::toNormalizedRect):
            Pass in the container as an argument.
        (WebKit::findInPageRectFromAbsoluteRect):
            Compute the container for toNormalizedRect using enclosingScrollableAncestor.
        * tests/WebFrameTest.cpp:
            Add expectations for new tests in WebFrameTest::FindInPageMatchRects and WebFrameTest::FindInPage.
        * tests/data/find.html:
            Add test case for <select> element.
        * tests/data/find_in_page_frame.html:
            Add test cases:
              - Result 15, 16 tests that containing <div> with style float:left and
                height:0px does not impact coordinate normalization.
              - Result 17, 18 tests that matches with absolute positioning are normalized containing
                relative positioned block, even if there is a closer parent block with overflow clip.
              - Result 19 adds a test case for <select> element.

2013-01-30  Dominik Röttsches  <dominik.rottsches@intel.com>

        [HarfBuzz] Remove the HarfBuzz-old code
        https://bugs.webkit.org/show_bug.cgi?id=108077

        Reviewed by Benjamin Poulain.

        Rename WTF_USE_HARFBUZZ_NG to WTF_USE_HARFBUZZ since there
        won't be a distinction between ng and non-ng HarfBuzz after
        removing the old code.

        * features.gypi:

2013-01-30  Jochen Eisinger  <jochen@chromium.org>

        [chromium] WebConsoleMessage is missing LevelDebug (chromium bug 172416)
        https://bugs.webkit.org/show_bug.cgi?id=108004
        http://code.google.com/p/chromium/issues/detail?id=172416

        console.debug triggers a NOTREACHED() assertation in Chromium. This
        is because WebCore::MessageLevel contains 5 levels, including debug,
        where WebConsoleMessage::Level is missing a "debug" level. Add a
        WebConsoleMessage::LevelDebug so that it can get passed up to the
        renderer even if it doesn't make use of that now.

        Requires another patch to chromium itself to fix chromium bug 172416
        but this is a prerequisite.

        Also add an enum compile time check to AssertMatchingEnums.cpp,

        Patch by Kevin Day <kevinday@gmail.com> on 2013-01-28
        Reviewed by Jochen Eisinger.

        * public/WebConsoleMessage.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMessageToConsole):

2013-01-30  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Correct zoom for focused node when using compositor scaling
        https://bugs.webkit.org/show_bug.cgi?id=107599

        Reviewed by Adam Barth.

        When applyDeviceScaleFactorInCompositor, targetScale should exclude device scale factor.
        When applyPageScaleFactorInCompositor, caret size and content sizes are in css pixels and they should be in the viewport of the new scale.

        Reapply r141153. Added font-size in html to ensure same caret size across platforms.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollFocusedNodeIntoRect):
        (WebKit):
        (WebKit::WebViewImpl::computeScaleAndScrollForFocusedNode): Extracted from scrollFocusedNodeIntoRect() to ease testing.
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebFrameTest.cpp: Updated test DivScrollEditableTest
        * tests/data/get_scale_for_zoom_into_editable_test.html: Moved the logic of onload script (which seems not to work) into WebFrameTest.cpp.

2013-01-29  Mark Lam  <mark.lam@apple.com>

        Rename AbstractDatabase to DatabaseBackend.
        https://bugs.webkit.org/show_bug.cgi?id=108275.

        Reviewed by Sam Weinig.

        This is a pure rename operation as part of the webdatabase refactoring
        effort. There is no semantic change in this patch.

        * public/WebDatabase.h:
        (WebDatabase):
        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::databaseOpened):
        (WebCore::DatabaseObserver::databaseModified):
        (WebCore::DatabaseObserver::databaseClosed):
        (WebCore::DatabaseObserver::reportOpenDatabaseResult):
        (WebCore::DatabaseObserver::reportChangeVersionResult):
        (WebCore::DatabaseObserver::reportStartTransactionResult):
        (WebCore::DatabaseObserver::reportCommitTransactionResult):
        (WebCore::DatabaseObserver::reportExecuteStatementResult):
        (WebCore::DatabaseObserver::reportVacuumDatabaseResult):
        * src/WebDatabase.cpp:
        (WebKit::WebDatabase::WebDatabase):

2013-01-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r141153.
        http://trac.webkit.org/changeset/141153
        https://bugs.webkit.org/show_bug.cgi?id=108280

        Caused WebFrameTest.DivScrollIntoEditableTest to fail on Mac.
        (Requested by keishi on #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollFocusedNodeIntoRect):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebFrameTest.cpp:
        * tests/data/get_scale_for_zoom_into_editable_test.html:

2013-01-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r140983.
        http://trac.webkit.org/changeset/140983
        https://bugs.webkit.org/show_bug.cgi?id=108277

        Unfortunately, this API has one last client (Requested by
        abarth on #webkit).

        * src/WebNotification.cpp:
        (WebKit::WebNotification::isHTML):
        (WebKit::WebNotification::url):
        (WebKit::WebNotification::iconURL):
        (WebKit::WebNotification::title):
        (WebKit::WebNotification::body):

2013-01-29  Shinya Kawanaka  <shinyak@chromium.org>

        [Chromium] Cannot copy text when selecting readonly (or disabled) input elements
        https://bugs.webkit.org/show_bug.cgi?id=106287

        Reviewed by Hajime Morita.

        When an input element is disabled or readonly, its inner element is not editable. So its rootEditableElement
        does not exist. In WebViewImpl::caretOrSelectionRange, if rootEditableElement does not exist, it uses
        a document element. However, the inner element and document element have a different tree scope, selection range
        cannot be gotten correctly.

        We should use ShadowRoot instead of document so that we can stay in the same tree scope.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::caretOrSelectionRange):
        * tests/WebViewTest.cpp:
        * tests/data/selection_disabled.html: Added.
        * tests/data/selection_readonly.html: Added.

2013-01-29  Tom Sepez  <tsepez@chromium.org>

        [v8] Enable binding integrity on linux
        https://bugs.webkit.org/show_bug.cgi?id=108242

        Reviewed by Adam Barth.

        * features.gypi:

2013-01-29  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Correct zoom for focused node when using compositor scaling
        https://bugs.webkit.org/show_bug.cgi?id=107599

        Reviewed by Adam Barth.

        When applyDeviceScaleFactorInCompositor, targetScale should exclude device scale factor.
        When applyPageScaleFactorInCompositor, caret size and content sizes are in css pixels and they should be in the viewport of the new scale.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollFocusedNodeIntoRect):
        (WebKit):
        (WebKit::WebViewImpl::computeScaleAndScrollForFocusedNode): Extracted from scrollFocusedNodeIntoRect() to ease testing.
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebFrameTest.cpp: Updated test DivScrollEditableTest
        * tests/data/get_scale_for_zoom_into_editable_test.html: Moved the logic of onload script (which seems not to work) into WebFrameTest.cpp.

2013-01-29  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Pass metadata in to IDBOpenDBRequest.onUpgradeNeeded/onSuccess
        https://bugs.webkit.org/show_bug.cgi?id=103920

        Reviewed by Dimitri Glazkov.

        Support the new IDBCallbacks::onSuccess and IDBCallbacks::onUpgradeNeeded
        while maintaining chromium compatibility by shimming in the old API
        in the WebKit side. Future code will clean this up so that it is just a
        pass-through as it was before.

        * public/WebIDBCallbacks.h:
        (WebKit):
        (WebKit::WebIDBCallbacks::onSuccess): new method signature.
        (WebKit::WebIDBCallbacks::onUpgradeNeeded): new method signature.
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::onSuccess): call on new method signature proxies through old API.
        (WebKit):
        (WebKit::IDBCallbacksProxy::onUpgradeNeeded): call on new method signature proxies through old API.
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onSuccess): call on old WebKit proxy signature calls new API.
        (WebKit):
        (WebKit::WebIDBCallbacksImpl::onUpgradeNeeded): call on old WebKit proxy signature calls new API.
        * src/WebIDBCallbacksImpl.h:
        (WebIDBCallbacksImpl):
        * tests/IDBAbortOnCorruptTest.cpp: new method signature.
        (WebCore::MockIDBCallbacks::onSuccess):
        * tests/IDBDatabaseBackendTest.cpp: new method signature.

2013-01-29  Alexandre Elias  <aelias@chromium.org>

        [chromium] Fix contents size calculation for page scale initialization
        https://bugs.webkit.org/show_bug.cgi?id=108204

        Reviewed by enne.

        My previous patch http://webk.it/107424 had a few issues that are
        blocking WebKit roll.

        - We still need the layout in resize() given that
        http://webk.it/107922 was reverted.

        - I deleted code used only for the old page-scale mode in
        contentsSize(), but this needs to wait until WebKit roll since it's
        making bots fail in this short term.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::contentsSize):

2013-01-29  Alpha Lam  <hclam@chromium.org>

        [chromium] Unreviewed DEPS roll.

        Roll Chromium DEPS to 179332.

        * DEPS:

2013-01-29  Joshua Bell  <jsbell@chromium.org>

        [Chromium] IndexedDB: Let callers specify reason (error) for aborting transaction
        https://bugs.webkit.org/show_bug.cgi?id=107851

        Reviewed by Tony Chang.

        Let Chromium call abort() on a transaction and specify a reason, specifically for
        QuotaExceededError.

        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::abort): New overload for abort() that takes an error.
        * public/WebIDBDatabaseError.h:
        (WebKit::WebIDBDatabaseError::WebIDBDatabaseError): Overloaded constructor/assign that takes error.
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::abort): New overload for abort() that takes an error.
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy): Ditto.
        * src/WebIDBDatabaseError.cpp: Implementation of overload ctor/assign.
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::abort): New overload for abort() that takes an error.
        * src/WebIDBDatabaseImpl.h: Ditto.
        * tests/IDBDatabaseBackendTest.cpp: Overload stubs for Mock class.

2013-01-29  Florin Malita  <fmalita@chromium.org>

        [Chromium] Unreviewed gardening.

        Disable WebFrameTest.pageScaleFactorShrinksViewport (pending investigation after r141053).

        * tests/WebFrameTest.cpp:

2013-01-29  Keishi Hattori  <keishi@webkit.org>

        [Chromium] Disabling WebFrameTest.DisambiguationPopupMobileSite because WebFrameTest is still failing after r141073.

        Unreviewed. Gardening.

        * tests/WebFrameTest.cpp:

2013-01-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r141064.
        http://trac.webkit.org/changeset/141064
        https://bugs.webkit.org/show_bug.cgi?id=108166

        [Chromium] WebFrameTest.DivScrollIntoEditableTest is failing
        on WinXP. (Requested by keishi on #webkit).

        * tests/WebFrameTest.cpp:
        * tests/data/get_scale_for_zoom_into_editable_test.html:

2013-01-29  Keishi Hattori  <keishi@webkit.org>

        [Chromium] Disabling WebFrameTest.DisambiguationPopup because it is failing.

        Unreviewed. Gardening.

        * tests/WebFrameTest.cpp:

2013-01-28  Xianzhu Wang  <wangxianzhu@chromium.org>

        Re-enable WebFrameTest.DivScrollIntoEditableTest
        https://bugs.webkit.org/show_bug.cgi?id=98558

        Reviewed by Adam Barth.

        * tests/WebFrameTest.cpp: Fixed several issues (onload script, the maximum scale factor, etc.) of WebFrameTest.DivScrollIntoEditableTest and enable it.
        * tests/data/get_scale_for_zoom_into_editable_test.html: Moved the logic of onload script (which seems not to work) into WebFrameTest.cpp.

2013-01-28  Tien-Ren Chen  <trchen@chromium.org>

        Fix disambiguation popup for new-style page scale
        https://bugs.webkit.org/show_bug.cgi?id=107391

        Reviewed by Adam Barth.

        This patch corrects various coordinate conversion for disambiguation
        popup for the new-style page scale mode.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::WebViewImpl::handleInputEvent):
        * tests/WebFrameTest.cpp:
        * tests/data/disambiguation_popup_page_scale.html: Added.

2013-01-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r141049.
        http://trac.webkit.org/changeset/141049
        https://bugs.webkit.org/show_bug.cgi?id=108151

        Caused some indexed tests to crash. (Requested by keishi on
        #webkit).

        * public/WebIDBCallbacks.h:
        (WebKit):
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::onUpgradeNeeded):
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onSuccess):
        (WebKit::WebIDBCallbacksImpl::onUpgradeNeeded):
        * src/WebIDBCallbacksImpl.h:
        (WebIDBCallbacksImpl):
        * tests/IDBAbortOnCorruptTest.cpp:
        (WebCore::MockIDBCallbacks::onSuccess):
        * tests/IDBDatabaseBackendTest.cpp:

2013-01-28  Raman Kumar  <ramankk@chromium.org>

        Expose isRadioButton and isCheckbox API in chromium-webkit glue layer.
        https://bugs.webkit.org/show_bug.cgi?id=108031

        Reviewed by Adam Barth.

        In chromium, to know if an InputElement is radiobutton or a checkbox,
        we are checking for formControlType (a string comparision), which is
        very slow. Exposing these API to chromium will make them faster.

        * public/WebInputElement.h:
        (WebInputElement):
        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::isRadioButton):
        (WebKit):
        (WebKit::WebInputElement::isCheckbox):

2013-01-28  Alexandre Elias  <aelias@chromium.org>

        Make page scale shrink FrameView in applyPageScaleInCompositor mode
        https://bugs.webkit.org/show_bug.cgi?id=107424

        Reviewed by Levi Weintraub.

        If applyPageScaleFactorInCompositor is enabled (Chromium-only setting),
        instead of the entire document expanding as the user pinch zooms, the
        viewport shrinks instead. This patch applies the pageScaleFactor to
        visibleContentRect to get this behavior, and simplifies Chromium's
        resize logic to stop hiding the true viewport size from WebCore.

        I verified that the scaling makes sense for all the callers of
        visibleContentRect. The exceptions are clip-layer size,
        layout size in non-fixed-layout mode, and text autosizing, which need
        the original unscaled size. Therefore I added a new method
        unscaledVisibleContentSize() to ScrollView/FrameView.

        This patch also modifies Page::setPageScaleFactor to perform no
        invalidates or layout when applyPageScaleFactorInCompositor is true,
        and also writes pageScaleFactor into HistoryItems instead of using
        frameScaleFactor.

        Since all behavior changes are tied to applyPageScaleFactorInCompositor,
        this patch should be a no-op for non-Chromium ports.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scaledSize): Returns the post page-scale size
        similar to what visibleContentRect() now returns, except that it may
        be at a different scale than the current one.
        (WebKit::WebViewImpl::size): Back to returning density-independent
        size without any tricks, not the "layoutSize()" fake viewport.
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::handleInputEvent): No need to apply
        implTransform anymore as WebKit knows the true scroll offset; just
        divide event coords by pageScaleFactor.
        (WebKit::WebViewImpl::clampOffsetAtScale): Make this method support
        applyPageScaleFactorInCompositor.  This is used to pre-clamp scroll
        offsets at a given viewport size.
        (WebKit::WebViewImpl::setPageScaleFactorPreservingScrollOffset): Make
        this method support applyPageScaleFactorInCompositor (don't scale
        scroll offsets as they are now scale-independent).
        (WebKit::WebViewImpl::setPageScaleFactor): Make this method always use
        clampOffsetAtScale instead of bypassing it, since it's now supported.
        Also notify the compositor to update its state.
        (WebKit::WebViewImpl::contentsSize): Convenience method, removed
        difference between scaled and unscaled.
        (WebKit::WebViewImpl::layoutSize): This method returned the "fake"
        size we used to give FrameView.  Now no longer used for much.
        (WebKit::WebViewImpl::computePageScaleFactorLimits):
        (WebKit::WebViewImpl::didChangeContentsSize): Remove unnecessary
        resize() now that we can give the true size to FrameView.
        (WebKit::WebViewImpl::updateLayerTreeViewport): Use layoutSize()
        directly now that FrameView no longer uses it.
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebFrameTest.cpp:

2013-01-28  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Pass metadata in to IDBOpenDBRequest.onUpgradeNeeded/onSuccess
        https://bugs.webkit.org/show_bug.cgi?id=103920

        Reviewed by Dimitri Glazkov.

        Support the new IDBCallbacks::onSuccess and IDBCallbacks::onUpgradeNeeded
        while maintaining chromium compatibility by shimming in the old API
        in the WebKit side. Future code will clean this up so that it is just a
        pass-through as it was before.

        * public/WebIDBCallbacks.h:
        (WebKit):
        (WebKit::WebIDBCallbacks::onSuccess): new method signature.
        (WebKit::WebIDBCallbacks::onUpgradeNeeded): new method signature.
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::onSuccess): call on new method signature proxies through old API.
        (WebKit):
        (WebKit::IDBCallbacksProxy::onUpgradeNeeded): call on new method signature proxies through old API.
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onSuccess): call on old WebKit proxy signature calls new API.
        (WebKit):
        (WebKit::WebIDBCallbacksImpl::onUpgradeNeeded): call on old WebKit proxy signature calls new API.
        * src/WebIDBCallbacksImpl.h:
        (WebIDBCallbacksImpl):
        * tests/IDBAbortOnCorruptTest.cpp: new method signature.
        (WebCore::MockIDBCallbacks::onSuccess):
        * tests/IDBDatabaseBackendTest.cpp: new method signature.

2013-01-28  Tom Sepez  <tsepez@chromium.org>

        [v8] Security feature: JavaScript Bindings hardening
        https://bugs.webkit.org/show_bug.cgi?id=106608

        Reviewed by Adam Barth.

        * features.gypi:
        Added ENABLE_BINDING_INTEGRITY option.

2013-01-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r141006.
        http://trac.webkit.org/changeset/141006
        https://bugs.webkit.org/show_bug.cgi?id=108123

        Broke chromium build (Requested by arv on #webkit).

        * public/WebConsoleMessage.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMessageToConsole):

2013-01-28  Min Qin  <qinmin@chromium.org>

        adding support for DiscardablePixelRef for caching lazily decoded images
        https://bugs.webkit.org/show_bug.cgi?id=106842

        Reviewed by Stephen White.

        Adding new tests for ImageDecodingStore

        * WebKit.gypi:
        * tests/ImageDecodingStoreTest.cpp:
        (WebCore::ImageDecodingStoreTest::createCompleteImage):
        (WebCore::ImageDecodingStoreTest::createIncompleteImage):
        (WebCore::TEST_F):
        (WebCore):
        * tests/MockDiscardablePixelRef.h: Added.
        (WebCore):
        (MockDiscardablePixelRef):
        (WebCore::MockDiscardablePixelRef::MockDiscardablePixelRef):
        (WebCore::MockDiscardablePixelRef::~MockDiscardablePixelRef):
        (WebCore::MockDiscardablePixelRef::discard):
        (WebCore::MockDiscardablePixelRef::onLockPixels):
        (WebCore::MockDiscardablePixelRef::onUnlockPixels):

2013-01-28  Stephen Chenney  <schenney@chromium.org>

        [Chromium] Fix the build.

        Unreviewed build fix.

        * src/AssertMatchingEnums.cpp: Move the include to the right place and remove the bad directory prefix.

2013-01-28  Dan Alcantara  <dfalcantara@chromium.org>

        [Chromium, Mobile] Do not show disambiguation pop up in mobile sites
        https://bugs.webkit.org/show_bug.cgi?id=107607

        Reviewed by Adam Barth.

        Add a check before showing the disambiguation popup to prevent it from appearing
        on mobile sites.  Makes a similar test to the current disambiguation popup test
        that expects the popup to never appear.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit):
        (WebKit::WebViewImpl::isLikelyMobileSite):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebFrameTest.cpp:
        * tests/data/disambiguation_popup_mobile_site.html: Added.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit):
        (WebKit::WebViewImpl::shouldDisableDesktopWorkarounds):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebFrameTest.cpp:
        * tests/data/disambiguation_popup_mobile_site.html: Added.

2013-01-28  Stephen Chenney  <schenney@chromium.org>

        [Chromium] Fix the build.

        Unreviewed build fix.

        * src/AssertMatchingEnums.cpp: Move the include to the right place and remove the bad directory prefix.

2013-01-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r140869.
        http://trac.webkit.org/changeset/140869
        https://bugs.webkit.org/show_bug.cgi?id=108120

        "Crashes on http://en.wikipedia.org/wiki/Wikipedia" (Requested
        by tonyg-cr on #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::computePageScaleFactorLimits):
        * tests/WebFrameTest.cpp:

2013-01-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r140934, r140935, and r140937.
        http://trac.webkit.org/changeset/140934
        http://trac.webkit.org/changeset/140935
        http://trac.webkit.org/changeset/140937
        https://bugs.webkit.org/show_bug.cgi?id=108117

        Re-land some speculative rollouts - see wkbug.com/108048 for
        context (Requested by jsbell on #webkit).

        * public/WebIDBCallbacks.h:
        (WebIDBCallbacks):
        * src/AssertMatchingEnums.cpp:
        * src/IDBCallbacksProxy.cpp:
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBCallbacksImpl.h:
        (WebIDBCallbacksImpl):
        * tests/IDBAbortOnCorruptTest.cpp:
        * tests/IDBDatabaseBackendTest.cpp:

2013-01-28  Kevin Day  <kevinday@gmail.com>

        [chromium] WebConsoleMessage is missing LevelDebug (chromium bug 172416)
        https://bugs.webkit.org/show_bug.cgi?id=108004
        http://code.google.com/p/chromium/issues/detail?id=172416

        console.debug triggers a NOTREACHED() assertation in Chromium. This
        is because WebCore::MessageLevel contains 5 levels, including debug,
        where WebConsoleMessage::Level is missing a "debug" level. Add a
        WebConsoleMessage::LevelDebug so that it can get passed up to the
        renderer even if it doesn't make use of that now.

        Requires another patch to chromium itself to fix chromium bug 172416
        but this is a prerequisite.

        Also add an enum compile time check to AssertMatchingEnums.cpp,

        Reviewed by Jochen Eisinger.

        * public/WebConsoleMessage.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMessageToConsole):

2013-01-28  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Correct auto-zoom when using compositor scaling
        https://bugs.webkit.org/show_bug.cgi?id=107592

        Reviewed by Adam Barth.

        1. The scale of auto-zoom should exclude deviceScaleFactor because the compositor will handle the scaling;
        2. Scroll location needs to be calculated differently when pageScaleFactor is handled by the compositor.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::computeScaleAndScrollForHitRect):
        * tests/WebFrameTest.cpp: Updated tests DivAutoZoomParamsTest, DivAutoZoomMultipleDivsTest, DivAutoZoomScaleBoundsTest and DivAutoZoomScaleFontScaleFactorTest, to make two versions of them (WebKitScaling and CompositorScaling).

2013-01-28  Laszlo Gombos  <l.gombos@samsung.com>

        Collapse OS(UNIX)||OS(ANDROID) to OS(UNIX)
        https://bugs.webkit.org/show_bug.cgi?id=108091

        Reviewed by Adam Barth.

        OS(UNIX) is defined when OS(ANDROID) is defined.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleMouseDown):

2013-01-28  Adam Barth  <abarth@webkit.org>

        Remove webkitNotifications.createHTMLNotification
        https://bugs.webkit.org/show_bug.cgi?id=107598

        Reviewed by Benjamin Poulain.

        We can remove these stubs once we've removed the Chromium-side code
        that depends on them.

        * src/WebNotification.cpp:
        (WebKit::WebNotification::isHTML):
        (WebKit::WebNotification::url):
        (WebKit::WebNotification::iconURL):
        (WebKit::WebNotification::title):
        (WebKit::WebNotification::body):

2013-01-28  James Craig  <james@cookiecrook.com>

        HTML5 promotes DL from specific 'definition list' to superset 'description list'; accessibility strings and accessors should be updated to match.
        https://bugs.webkit.org/show_bug.cgi?id=107650

        Reviewed by Chris Fleizach.

        Updating accessibility strings and accessors for DL/DT/DD; new one for [role="definition"] (previously it reused the role/desc for DD).

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:
        * src/LocalizedStrings.cpp:
        (WebCore::AXDefinitionText):
        (WebCore):
        (WebCore::AXDescriptionListTermText):
        (WebCore::AXDescriptionListDetailText):

2013-01-28  Mike West  <mkwst@chromium.org>

        [chromium] Unreviewed build fix, missing include in AssertMatchingEnums.cpp
        https://bugs.webkit.org/show_bug.cgi?id=108086

        Disabling SVG exposed a missing include in AssertMatchingEnums. This
        patch adds it in.

        * src/AssertMatchingEnums.cpp:
            Include 'ResourceLoadPriority.h'.

2013-01-28  Marja Hölttä  <marja@chromium.org>

        Add an API for retrieving native memory information without going through the remote inspecting protocol
        https://bugs.webkit.org/show_bug.cgi?id=107651

        Reviewed by Adam Barth.

        * WebKit.gyp:
        * public/WebDevToolsAgent.h:
        (WebKit):
        (WebDevToolsAgent):
        * public/WebMemoryUsageInfo.h: Added.
        (WebKit):
        (WebKit::WebMemoryUsageInfo::WebMemoryUsageInfo):
        (WebMemoryUsageInfo):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::processMemoryDistribution):
        (WebKit):
        * src/WebDevToolsAgentImpl.h:
        (WebKit):
        (WebDevToolsAgentImpl):

2013-01-27  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r140602.
        http://trac.webkit.org/changeset/140602
        https://bugs.webkit.org/show_bug.cgi?id=108045

        Caused 8 indexed tests to crash. (Requested by keishi on
        #webkit).

        * public/WebIDBCallbacks.h:
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::onBlocked):
        (WebKit):
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onBlocked):
        (WebKit):
        * src/WebIDBCallbacksImpl.h:
        (WebIDBCallbacksImpl):
        * tests/IDBAbortOnCorruptTest.cpp:
        (WebCore::MockIDBCallbacks::onBlocked):
        * tests/IDBDatabaseBackendTest.cpp:

2013-01-27  Keishi Hattori  <keishi@webkit.org>

        Unreviewed, rolling out r140850.
        http://trac.webkit.org/changeset/140850
        https://bugs.webkit.org/show_bug.cgi?id=107960

        r14602 caused 8 indexed tests to crash.

        * src/AssertMatchingEnums.cpp:

2013-01-27  Jochen Eisinger  <jochen@chromium.org>

        [chromium] add missing plumbing for Notification.requestPermission
        https://bugs.webkit.org/show_bug.cgi?id=108012

        Reviewed by Adam Barth.

        * src/NotificationPresenterImpl.cpp:
        (WebKit):
        (WebKit::VoidCallbackClient::VoidCallbackClient):
        (NotificationPermissionCallbackClient):
        (WebKit::NotificationPermissionCallbackClient::NotificationPermissionCallbackClient):
        (WebKit::NotificationPermissionCallbackClient::permissionRequestComplete):
        (WebKit::NotificationPermissionCallbackClient::~NotificationPermissionCallbackClient):
        (WebKit::NotificationPresenterImpl::requestPermission):
        * src/NotificationPresenterImpl.h:
        (NotificationPresenterImpl):

2013-01-26  James Simonsen  <simonjam@chromium.org>

        [chromium] Export ResourceRequest's priority through WebURLRequest
        https://bugs.webkit.org/show_bug.cgi?id=107985

        Reviewed by Adam Barth.

        * src/AssertMatchingEnums.cpp:

2013-01-25  Alexandre Elias  <aelias@chromium.org>

        Call FrameView::contentsResized() when setting fixed layout size
        https://bugs.webkit.org/show_bug.cgi?id=107922

        Reviewed by James Robinson.

        In fixed layout mode, we should be calling contentsResized() when the
        fixed layout size is changed; on the other hand, we don't need to layout
        when the visible contents size changes.

        This fixes test WebFrameTest::FixedLayoutInitializeAtMinimumPageScale.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::computePageScaleFactorLimits):
        * tests/WebFrameTest.cpp:

2013-01-25  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Move TaskType enum to IDBDatabaseBackendInterface
        https://bugs.webkit.org/show_bug.cgi?id=107960

        Reviewed by Tony Chang.

        Update asserts to reflect new enum location.

        * src/AssertMatchingEnums.cpp:

2013-01-25  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r140774.
        http://trac.webkit.org/changeset/140774
        https://bugs.webkit.org/show_bug.cgi?id=107932

         Tests ScrollingCoordinatorChromiumTest.fastScrollingByDefault
        and fastScrollingForFixedPosition are failing (Requested by
        keishi on #webkit).

        * public/WebWidget.h:
        (WebWidget):
        (WebKit::WebWidget::isInputThrottled):
        (WebKit::WebWidget::renderingStats):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::~WebViewImpl):
        (WebKit::WebViewImpl::renderingStats):
        (WebKit):
        (WebKit::WebViewImpl::setCompositorSurfaceReady):
        (WebKit::WebViewImpl::isInputThrottled):
        (WebKit::WebViewImpl::setIsTransparent):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:

2013-01-25  Eberhard Graether  <egraether@google.com>

        Web Inspector: add checkbox for continuous painting to the inspector's settings
        https://bugs.webkit.org/show_bug.cgi?id=107352

        Reviewed by Pavel Feldman.

        This change adds a checkbox to activate continuous painting to the WebInspector's
        rendering settings and plumbs the setting to Chromium's WebLayerTreeView. The
        setting is visible if InspectorClient::canContinuouslyPaint() returns true.

        * public/WebView.h:
        (WebView):
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::canContinuouslyPaint):
        (WebKit):
        (WebKit::InspectorClientImpl::setContinuousPaintingEnabled):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setContinuousPaintingEnabled):
        (WebKit):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:

2013-01-24  Keishi Hattori  <keishi@webkit.org>

        Adjust design of the Calendar Picker
        https://bugs.webkit.org/show_bug.cgi?id=107507

        Reviewed by Kent Tamura.

        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::writeDocument):  Include pickerCommonChromium.css and calendarPickerChromium.css.

2013-01-24  James Robinson  <jamesr@chromium.org>

        [chromium] Remove dead transitional code from WebViewImpl
        https://bugs.webkit.org/show_bug.cgi?id=107889

        Reviewed by Adrienne Walker.

        The chromium side of this landed at r178256 and seems stable.

        * public/WebWidget.h:
        (WebKit::WebWidget::setCompositorSurfaceReady):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::~WebViewImpl):
        (WebKit):
        (WebKit::WebViewImpl::setIsTransparent):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:

2013-01-24  James Robinson  <jamesr@chromium.org>

        [chromium] Null check WebLayerTreeView before dereffing in WebViewImpl::invalidateRect
        https://bugs.webkit.org/show_bug.cgi?id=107855

        Reviewed by Adrienne Walker.

        During frame shutdown, WebViewImpl::m_layerTreeView may become 0 while commits are deferred but we still
        may get invalidateRect() calls before shutdown completes.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::invalidateRect):

2013-01-24  Mihai Maerean  <mmaerean@adobe.com>

        [CSSRegions] remove setExperimentalCSSRegionsEnabled deprecated API in Source/WebKit/chromium/public/WebSettings.h
        https://bugs.webkit.org/show_bug.cgi?id=104564

        Reviewed by Adam Barth.

        Fixing bug 101192 has deprecated the use of setExperimentalCSSRegionsEnabled.
        After http://code.google.com/p/chromium/issues/detail?id=164162 , setExperimentalCSSRegionsEnabled is no longer used anywhere.

        * public/WebSettings.h:
        removed setExperimentalCSSRegionsEnabled.

2013-01-23  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r178434.  Requested by
        "Yoshifumi Inoue" <yosin@chromium.org> via sheriffbot.

        * DEPS:

2013-01-23  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove unused header files in chromium/public/platform/
        https://bugs.webkit.org/show_bug.cgi?id=107741

        Reviewed by James Robinson.

        These header files have migrated to the new Platform directory.
        This patch updates the remaining #include references and removes
        the old files that did nothing but redirect to the new ones.

        * WebKit.gyp:
        * public/WebAccessibilityObject.h:
        * public/WebAccessibilityRole.h:
        * public/WebActiveWheelFlingParameters.h:
        * public/WebAnimationController.h:
        * public/WebApplicationCacheHost.h:
        * public/WebApplicationCacheHostClient.h:
        * public/WebArrayBuffer.h:
        * public/WebArrayBufferView.h:
        * public/WebAudioSourceProvider.h:
        * public/WebBatteryStatus.h:
        * public/WebBindings.h:
        * public/WebBlob.h:
        * public/WebCache.h:
        * public/WebCachedURLRequest.h:
        * public/WebColorChooser.h:
        * public/WebColorChooserClient.h:
        * public/WebColorName.h:
        * public/WebCommonWorkerClient.h:
        * public/WebCompositionUnderline.h:
        * public/WebCompositorInputHandler.h:
        * public/WebConsoleMessage.h:
        * public/WebContentDetectionResult.h:
        * public/WebContextMenuData.h:
        * public/WebCrossOriginPreflightResultCache.h:
        * public/WebCursorInfo.h:
        * public/WebDOMEvent.h:
        * public/WebDOMEventListener.h:
        * public/WebDOMStringList.h:
        * public/WebDataSource.h:
        * public/WebDatabase.h:
        * public/WebDateTimeChooserCompletion.h:
        * public/WebDateTimeChooserParams.h:
        * public/WebDeliveredIntentClient.h:
        * public/WebDevToolsAgent.h:
        * public/WebDevToolsAgentClient.h:
        * public/WebDevToolsFrontend.h:
        * public/WebDeviceOrientationClient.h:
        * public/WebDeviceOrientationClientMock.h:
        * public/WebDeviceOrientationController.h:
        * public/WebDocument.h:
        * public/WebDraggableRegion.h:
        * public/WebExternalPopupMenuClient.h:
        * public/WebFileChooserCompletion.h:
        * public/WebFileChooserParams.h:
        * public/WebFileSystemCallbacks.h:
        * public/WebFileSystemEntry.h:
        * public/WebFileWriter.h:
        * public/WebFileWriterClient.h:
        * public/WebFindOptions.h:
        * public/WebFont.h:
        * public/WebFontCache.h:
        * public/WebFontDescription.h:
        * public/WebFormControlElement.h:
        * public/WebFormElement.h:
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        * public/WebGeolocationClientMock.h:
        * public/WebGeolocationController.h:
        * public/WebGeolocationError.h:
        * public/WebGeolocationPermissionRequest.h:
        * public/WebGeolocationPermissionRequestManager.h:
        * public/WebGeolocationPosition.h:
        * public/WebGlyphCache.h:
        * public/WebHelperPlugin.h:
        * public/WebHistoryItem.h:
        * public/WebHitTestResult.h:
        * public/WebIDBCallbacks.h:
        * public/WebIDBCursor.h:
        * public/WebIDBDatabase.h:
        * public/WebIDBDatabaseCallbacks.h:
        * public/WebIDBDatabaseError.h:
        * public/WebIDBFactory.h:
        * public/WebIDBKey.h:
        * public/WebIDBKeyPath.h:
        * public/WebIDBKeyRange.h:
        * public/WebIDBMetadata.h:
        * public/WebIDBTransaction.h:
        * public/WebIDBTransactionCallbacks.h:
        * public/WebIconURL.h:
        * public/WebImageDecoder.h:
        * public/WebInputEvent.h:
        * public/WebIntent.h:
        * public/WebIntentRequest.h:
        * public/WebIntentServiceInfo.h:
        * public/WebKit.h:
        * public/WebMediaPlayer.h:
        * public/WebMediaStreamRegistry.h:
        * public/WebMenuItemInfo.h:
        * public/WebNetworkStateNotifier.h:
        * public/WebNode.h:
        * public/WebNodeCollection.h:
        * public/WebNodeList.h:
        * public/WebNotification.h:
        * public/WebNotificationPresenter.h:
        * public/WebOptionElement.h:
        * public/WebPageOverlay.h:
        * public/WebPagePopup.h:
        * public/WebPageSerializer.h:
        * public/WebPasswordFormData.h:
        * public/WebPerformance.h:
        * public/WebPlugin.h:
        * public/WebPluginContainer.h:
        * public/WebPluginParams.h:
        * public/WebPopupMenu.h:
        * public/WebPopupMenuInfo.h:
        * public/WebPrerendererClient.h:
        * public/WebPrintParams.h:
        * public/WebRange.h:
        * public/WebRegularExpression.h:
        * public/WebRuntimeFeatures.h:
        * public/WebScopedMicrotaskSuppression.h:
        * public/WebScopedUserGesture.h:
        * public/WebScriptController.h:
        * public/WebScriptSource.h:
        * public/WebSearchableFormData.h:
        * public/WebSecurityOrigin.h:
        * public/WebSecurityPolicy.h:
        * public/WebSelectElement.h:
        * public/WebSerializedScriptValue.h:
        * public/WebSettings.h:
        * public/WebSharedWorker.h:
        * public/WebSharedWorkerRepository.h:
        * public/WebSocket.h:
        * public/WebSocketClient.h:
        * public/WebSpeechGrammar.h:
        * public/WebSpeechInputController.h:
        * public/WebSpeechInputResult.h:
        * public/WebSpeechRecognitionHandle.h:
        * public/WebSpeechRecognitionParams.h:
        * public/WebSpeechRecognitionResult.h:
        * public/WebSpeechRecognizer.h:
        * public/WebSpeechRecognizerClient.h:
        * public/WebSpellCheckClient.h:
        * public/WebStorageEventDispatcher.h:
        * public/WebSurroundingText.h:
        * public/WebTestingSupport.h:
        * public/WebTextCheckingCompletion.h:
        * public/WebTextCheckingResult.h:
        * public/WebTextFieldDecoratorClient.h:
        * public/WebTextInputInfo.h:
        * public/WebTextRun.h:
        * public/WebTimeRange.h:
        * public/WebTouchPoint.h:
        * public/WebUserMediaRequest.h:
        * public/WebView.h:
        * public/WebViewBenchmarkSupport.h:
        * public/WebViewClient.h:
        * public/WebWidget.h:
        * public/WebWidgetClient.h:
        * public/WebWindowFeatures.h:
        * public/WebWorkerInfo.h:
        * public/android/WebInputEventFactory.h:
        * public/android/WebSandboxSupport.h:
        * public/default/WebRenderTheme.h:
        * public/gtk/WebInputEventFactory.h:
        * public/linux/WebFontRendering.h:
        * public/linux/WebSandboxSupport.h:
        * public/mac/WebInputEventFactory.h:
        * public/mac/WebSandboxSupport.h:
        * public/mac/WebScreenInfoFactory.h:
        * public/mac/WebSubstringUtil.h:
        * public/platform/WebAudioBus.h: Removed.
        * public/platform/WebAudioDevice.h: Removed.
        * public/platform/WebBlobData.h: Removed.
        * public/platform/WebBlobRegistry.h: Removed.
        * public/platform/WebCString.h: Removed.
        * public/platform/WebCanvas.h: Removed.
        * public/platform/WebClipboard.h: Removed.
        * public/platform/WebColor.h: Removed.
        * public/platform/WebCommon.h: Removed.
        * public/platform/WebCookie.h: Removed.
        * public/platform/WebCookieJar.h: Removed.
        * public/platform/WebData.h: Removed.
        * public/platform/WebDragData.h: Removed.
        * public/platform/WebFileSystem.h: Removed.
        * public/platform/WebFloatPoint.h: Removed.
        * public/platform/WebFloatQuad.h: Removed.
        * public/platform/WebFloatRect.h: Removed.
        * public/platform/WebGamepad.h: Removed.
        * public/platform/WebGamepads.h: Removed.
        * public/platform/WebGraphicsContext3D.h: Removed.
        * public/platform/WebHTTPBody.h: Removed.
        * public/platform/WebHTTPHeaderVisitor.h: Removed.
        * public/platform/WebHTTPLoadInfo.h: Removed.
        * public/platform/WebImage.h: Removed.
        * public/platform/WebLocalizedString.h: Removed.
        * public/platform/WebMediaStreamCenter.h: Removed.
        * public/platform/WebMediaStreamCenterClient.h: Removed.
        * public/platform/WebMediaStreamComponent.h: Removed.
        * public/platform/WebMediaStreamDescriptor.h: Removed.
        * public/platform/WebMediaStreamSource.h: Removed.
        * public/platform/WebMediaStreamSourcesRequest.h: Removed.
        * public/platform/WebNonCopyable.h: Removed.
        * public/platform/WebPoint.h: Removed.
        * public/platform/WebPrivateOwnPtr.h: Removed.
        * public/platform/WebPrivatePtr.h: Removed.
        * public/platform/WebRect.h: Removed.
        * public/platform/WebReferrerPolicy.h: Removed.
        * public/platform/WebSize.h: Removed.
        * public/platform/WebSocketStreamError.h: Removed.
        * public/platform/WebSocketStreamHandle.h: Removed.
        * public/platform/WebSocketStreamHandleClient.h: Removed.
        * public/platform/WebString.h: Removed.
        * public/platform/WebThread.h: Removed.
        * public/platform/WebThreadSafeData.h: Removed.
        * public/platform/WebURL.h: Removed.
        * public/platform/WebURLError.h: Removed.
        * public/platform/WebURLLoadTiming.h: Removed.
        * public/platform/WebURLLoader.h: Removed.
        * public/platform/WebURLLoaderClient.h: Removed.
        * public/platform/WebURLRequest.h: Removed.
        * public/platform/WebURLResponse.h: Removed.
        * public/platform/WebVector.h: Removed.
        * public/platform/android/WebSandboxSupport.h: Removed.
        * public/platform/android/WebThemeEngine.h: Removed.
        * public/platform/default/WebThemeEngine.h: Removed.
        * public/platform/linux/WebFontFamily.h: Removed.
        * public/platform/linux/WebSandboxSupport.h: Removed.
        * public/platform/mac/WebSandboxSupport.h: Removed.
        * public/platform/mac/WebThemeEngine.h: Removed.
        * public/platform/win/WebSandboxSupport.h: Removed.
        * public/platform/win/WebThemeEngine.h: Removed.
        * public/win/WebInputEventFactory.h:
        * public/win/WebSandboxSupport.h:
        * public/win/WebScreenInfoFactory.h:
        * public/x11/WebScreenInfoFactory.h:

2013-01-23  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Remove IDBVersionChangeRequest
        https://bugs.webkit.org/show_bug.cgi?id=107711

        Reviewed by Tony Chang.

        * public/WebIDBCallbacks.h: Note to delete onBlocked() once Chromium is cleaned up.
        * src/IDBCallbacksProxy.cpp: Remove unused onBlocked() overload.
        * src/IDBCallbacksProxy.h: Ditto.
        * src/WebIDBCallbacksImpl.cpp: Ditto.
        * src/WebIDBCallbacksImpl.h: Ditto.
        * tests/IDBAbortOnCorruptTest.cpp: Ditto.
        * tests/IDBDatabaseBackendTest.cpp: Ditto.

2013-01-23  Tien-Ren Chen  <trchen@chromium.org>

        Partially revert 104427, change WebWidgetClient::didHandleGestureEvent semantics.
        https://bugs.webkit.org/show_bug.cgi?id=107605

        Reviewed by Darin Fisher.

        Per discussion in https://codereview.chromium.org/11473027/ we decided
        not to introduce an enum to WebWidgetClient::didHandleGestureEvent().
        Instead, change the semantics of the bool flag to indicate whether the
        gesture event is cancelled for disambiguation.

        * public/WebWidgetClient.h:
        (WebKit::WebWidgetClient::didHandleGestureEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        * tests/WebViewTest.cpp:

2013-01-23  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove WebArrayBufferView and WebSerializedScriptValue from chromium/public/platform/
        https://bugs.webkit.org/show_bug.cgi?id=107720

        Reviewed by Darin Fisher.

        These headers have been moved to chromium/public/ and all
        references downstream were changed in
        https://codereview.chromium.org/11946050/.
        No DEPS roll necessary because it's already above 177695.

        * WebKit.gyp:
        * public/platform/WebArrayBufferView.h: Removed.
        * public/platform/WebSerializedScriptValue.h: Removed.
        * src/DeliveredIntentClientImpl.cpp:
        * src/IDBCallbacksProxy.cpp:
        * src/IDBCursorBackendProxy.cpp:
        * src/WebArrayBufferView.cpp:
        * src/WebBindings.cpp:
        * src/WebDOMCustomEvent.cpp:
        * src/WebDOMMessageEvent.cpp:
        * src/WebFrameImpl.cpp:
        * src/WebHistoryItem.cpp:
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIntent.cpp:
        * src/WebIntentRequest.cpp:
        * src/WebSerializedScriptValue.cpp:

2013-01-23  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Fix some #includes to headers in chromium/public/platform/ that have been moved to the new Platform directory
        https://bugs.webkit.org/show_bug.cgi?id=107722

        Reviewed by Darin Fisher.

        These headers just redirect to the new versions, so call the new
        versions directly.

        * src/linux/WebFontInfo.cpp:
        * src/mac/WebSubstringUtil.mm:

2013-01-23  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Fix some #includes for WebSerializedScriptValue
        https://bugs.webkit.org/show_bug.cgi?id=107697

        Reviewed by Adam Barth.

        WebSerializedScriptValue has been moved to chromium/public/.

        * public/WebDOMCustomEvent.h:
        * public/WebDOMMessageEvent.h:
        * public/WebIDBCursor.h:

2013-01-23  Dmitry Gozman  <dgozman@chromium.org>

        Added changeAttachedWindowHeight method to inspector frontend API, which
        allows to change inspector window height from inside.
        https://bugs.webkit.org/show_bug.cgi?id=107648

        Reviewed by Pavel Feldman.

        * public/WebDevToolsFrontendClient.h:
        (WebKit::WebDevToolsFrontendClient::changeAttachedWindowHeight):
        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::changeAttachedWindowHeight):

2013-01-23  Shinya Kawanaka  <shinyak@chromium.org>

        shadowAncestorNode() should be renamed to deprecatedShadowAncestorNode()
        https://bugs.webkit.org/show_bug.cgi?id=107624

        Reviewed by Dimitri Glazkov.

        Since Node::shadowAncestorNode() is deprecated, we would like to rename it to prevent from further use.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::scopeStringMatches):
        (WebKit::WebFrameImpl::setFindEndstateFocusAndSelection):

2013-01-22  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: only allow evaluateForTestInFrontend for front-ends under test.
        https://bugs.webkit.org/show_bug.cgi?id=107523

        Reviewed by Yury Semikhatsky.

        * public/WebDevToolsFrontendClient.h:
        (WebKit::WebDevToolsFrontendClient::isUnderTest):
        (WebDevToolsFrontendClient):
        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::isUnderTest):
        * src/InspectorFrontendClientImpl.h:
        (InspectorFrontendClientImpl):

2013-01-22  Mark Lam  <mark.lam@apple.com>

        Change the Supplementable class to not use AtomicString.
        https://bugs.webkit.org/show_bug.cgi?id=107535.

        Reviewed by Adam Barth.

        Replaced the use of AtomicString keys with literal const char* keys.
        This simplifies the SupplementMap and makes it slightly leaner and faster.

        * src/ContextFeaturesClientImpl.cpp:
        (ContextFeaturesCache):
        (WebKit::ContextFeaturesCache::supplementName):

2013-01-22  Leandro Gracia Gil  <leandrogracia@chromium.org>

        [Chromium] Expose didCommitCompositorFrame in WebWidgetClient.
        https://bugs.webkit.org/show_bug.cgi?id=107325

        Reviewed by James Robinson.

        Add a notification on WebWidgetClient called when the compositor commits a frame.

        * public/WebWidgetClient.h:
        (WebWidgetClient):
        (WebKit::WebWidgetClient::didCommitCompositorFrame):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::didCommit):

2013-01-21  Kentaro Hara  <haraken@chromium.org>

        Implement UIEvent constructor
        https://bugs.webkit.org/show_bug.cgi?id=107430

        Reviewed by Adam Barth.

        Editor's draft: https://dvcs.w3.org/hg/d4e/raw-file/tip/source_respec.htm

        UIEvent constructor is implemented under a DOM4_EVENTS_CONSTRUCTOR flag,
        which is enabled on Safari and Chromium for now.

        * features.gypi:

2013-01-22  Alpha Lam  <hclam@chromium.org>

        REGRESSION(r140392): InjectIDBKeyTest.TopLevelPropertyStringValue is crashing
        https://bugs.webkit.org/show_bug.cgi?id=107578

        Unreviewed build fix. Disabled 2 tests that are crashing after r140392.

        * tests/IDBBindingUtilitiesTest.cpp:
        (WebKit::TEST_F):

2013-01-22  Eric Seidel  <eric@webkit.org>

        Turn on ENABLE_THREADED_HTML_PARSER for Chromium (it's still disabled at runtime)
        https://bugs.webkit.org/show_bug.cgi?id=107519

        Reviewed by Adam Barth.

        This makes our development lives easier, and makes it possible for the bots
        to run threaded-parser-only tests by toggling the runtime enable
        via window.internals.settings.

        * features.gypi:

2013-01-22  Kentaro Hara  <haraken@chromium.org>

        [V8] Make an Isolate parameter mandatory in toV8()
        https://bugs.webkit.org/show_bug.cgi?id=107520

        Reviewed by Adam Barth.

        Now it's safe to remove an optional Isolate parameter.

        No tests. No change in behavior.

        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::windowObjectCleared):
        * src/WebArrayBuffer.cpp:
        (WebKit::WebArrayBuffer::toV8Value):
        * src/WebBlob.cpp:
        (WebKit::WebBlob::toV8Value):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFileSystem):
        (WebKit::WebFrameImpl::createSerializableFileSystem):
        (WebKit::WebFrameImpl::createFileEntry):

2013-01-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r177962.  Requested by
        "Yoshifumi Inoue" <yosin@chromium.org> via sheriffbot.

        * DEPS:

2013-01-21  Noel Gordon  <noel.gordon@gmail.com>

        [chromium] REGRESSION(r139347) roll chromium deps broke webkit-unit-tests
        https://bugs.webkit.org/show_bug.cgi?id=106631

        Reviewed by Kent Tamura.

        Fixed in http://crrev.com/177931 and rolled. Renable these tests.

        * tests/WebImageTest.cpp:

2013-01-21  Dirk Schulze  <dschulze@adobe.com>

        Add build flag for Canvas's Path object (disabled by default)
        https://bugs.webkit.org/show_bug.cgi?id=107473

        Reviewed by Dean Jackson.

        Add CANVAS_PATH build flag to build systems.

        * features.gypi:

2013-01-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r177956.  Requested by
        thakis_ via sheriffbot.

        * DEPS:

2013-01-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r177953.  Requested by
        thakis_ via sheriffbot.

        * DEPS:

2013-01-21  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Update the RTCPeerConnection states to match the latest specification
        https://bugs.webkit.org/show_bug.cgi?id=107120

        Reviewed by Adam Barth.

        * src/AssertMatchingEnums.cpp:

2013-01-20  Dominic Mazzoni  <dmazzoni@google.com>

        Make SpeechSynthesis compile in the Chromium port
        https://bugs.webkit.org/show_bug.cgi?id=107382

        Reviewed by Adam Barth.

        Add ENABLE_SPEECH_SYNTHESIS to features.gypi, off by default.

        * features.gypi:

2013-01-20  Yoshifumi Inoue  <yosin@chromium.org>

        Dragging over an element with scrollbars should scroll the element when dragging near edges
        https://bugs.webkit.org/show_bug.cgi?id=39725

        Reviewed by Hajime Morita.

        This patch removes DragScrollTimer used for automatic scrolling of main
        frame drag-and-drop which is now implemented in EventHandler.

        Another patch will remove DragScrollTimer.{cpp,h} and update GYP files to
        make patch size small.

        No tests. Existing test covers this change.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::shouldAutoscrollForDragAndDrop): Added.
        * src/ChromeClientImpl.h:
        (ChromeClientImpl): Changed to add shouldAutoscrollForDragAndDrop().
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl): Changed to remove m_dragScrollTimer.
        (WebKit::WebViewImpl::dragSourceEndedAt): ditto
        (WebKit::WebViewImpl::dragSourceMovedTo): ditto
        (WebKit::WebViewImpl::dragTargetDrop): ditto
        (WebKit::WebViewImpl::dragTargetDragEnterOrOver): ditto
        * src/WebViewImpl.h:
        (WebKit): Chagned to remove DragScrollTimer.

2013-01-18  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Switch to new createTransaction call
        https://bugs.webkit.org/show_bug.cgi?id=107311

        Reviewed by Tony Chang.

        * public/WebIDBTransaction.h:

        Remove an old method that nobody calls.

2013-01-18  Alpha Lam  <hclam@chromium.org>

        [chromium] Roll Chromium DEPS to 177676

        Unreviewed DEPS roll.

        * DEPS:

2013-01-18  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Use new-style gesture scrolling events for fling and
        for plugin scrolling: https://bugs.webkit.org/show_bug.cgi?id=106589

        Reviewed by James Robinson.

        https://bugs.webkit.org/show_bug.cgi?id=103952 modified touchscreen
        scrolling to not use synthetic mouse wheel events. Update the fling facility
        in WebViewImpl to use these events for touchscreen-initiated flings. Also
        modify the WebPluginContainerImpl to scroll in response to touchscreen
        scroll gestures if the plugin does not itself implement gesture events. 

        * src/WebPluginContainerImpl.cpp:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::scrollBy): Handle fling callback conditionally based
        on initiating device. Touchpad flings generate wheels. Touchscreen flings
        use gesture events.
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::WebViewImpl::transferActiveWheelFlingAnimation):
        * src/WebViewImpl.h:

2013-01-18  Seokju Kwon  <seokju.kwon@gmail.com>

        Add explicit keyword to constructors in platform-specific InspectorClient
        https://bugs.webkit.org/show_bug.cgi?id=107255

        Reviewed by Kentaro Hara.

        Add explicit keyword to constructors that take one argument
        in platform-specific implementation of InspectorClient.

        * src/InspectorClientImpl.h:
        (InspectorClientImpl):

2013-01-17  Dominic Cooney  <dominicc@chromium.org>

        [Chromium] Unreviewed gardening.

        Roll Chromium to 177561.

        * DEPS:

2013-01-17  Alpha Lam  <hclam@chromium.org>

        [chromium] Disable a unit test
        https://bugs.webkit.org/show_bug.cgi?id=107206

        Unreviewed. Disable a failing test due to 140025.

        * tests/WebFrameTest.cpp:

2013-01-17  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r140023.
        http://trac.webkit.org/changeset/140023
        https://bugs.webkit.org/show_bug.cgi?id=107176

        Broke some tests (Requested by anttik on #webkit).

        * tests/RenderTableCellTest.cpp:
        * tests/RenderTableRowTest.cpp:

2013-01-17  John Mellor  <johnme@chromium.org>

        [chromium] Double-tap zoom should take into account accessibility fontScaleFactor
        https://bugs.webkit.org/show_bug.cgi?id=107123

        Reviewed by Adam Barth.

        Platforms which support Text Autosizing (currently just Chrome for
        Android) may provide a textAutosizingFontScaleFactor (defaults to 1.0).

        This value is intended to be chosen by the user to indicate how large
        they want text to appear, for example Chrome for Android has a "Text
        scaling" slider in Settings > Accessibility that lets you choose a value
        in the range 50% - 200% (defaults to 100%*).

        For text in wide columns that typically gets autosized, this value is
        applied by multiplying the textAutosizingMultiplier computed for each
        cluster by the textAutosizingFontScaleFactor. Double-tap zoom will fit
        the column to the screen (ignoring the textAutosizingFontScaleFactor)
        since the column is wide. This part already works.

        For text in narrow columns that doesn't get autosized, the
        textAutosizingFontScaleFactor is not applied through Text Autosizing,
        and instead needs to be applied by adjusting the double-tap zoom level.
        When double-tapping on narrow columns, instead of fitting the column to
        the screen (which would often zoom in excessively far), the existing
        logic in computeScaleAndScrollForHitRect applies a maximum zoom level
        called the legibleScale. This value needs to be multiplied by the
        textAutosizingFontScaleFactor, so that we zoom in proportionately
        further on non-autosized narrow columns, hence the effective text size
        (taking into account zoom) will have increased in proportion to the
        textAutosizingFontScaleFactor as expected.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::computeScaleAndScrollForHitRect):
            Multiplies legibleScale (the maximum zoom level) by the
            textAutosizingFontScaleFactor.
        * tests/WebFrameTest.cpp:
            Added WebFrameTest.DivAutoZoomScaleFontScaleFactorTest based on
            WebFrameTest.DivAutoZoomScaleBoundsTest to test the interaction
            between textAutosizingFontScaleFactor and the double-tap zoom logic.
            Also did minor cleanup to WebFrameTest.DivAutoZoomScaleBoundsTest.

2013-01-17  Alexandre Elias  <aelias@chromium.org>

        [chromium] Make new-style page scale work with fixed layout
        https://bugs.webkit.org/show_bug.cgi?id=106951

        Reviewed by Adam Barth.

        This makes non-CSS-transform page scaling work with fixed-layout mode,
        including viewport tag support.

        - dispatchViewportPropertiesDidChange() now works entirely with DIP
        pixels instead of physical pixels, and is made compatible with
        separating deviceScaleFactor from pageScaleFactor.

        - In this mode, the "layout viewport" size in the pinch-zoom model is
        made a first-class concept separate from the device size.  This
        is a viewport with the same aspect ratio as the device but with the
        layout width of the page.  This viewport is used:
          - As FrameView::visibleContentRect.
          - Returned from WebView::size().
          - Given to the compositor as layoutViewportSize.

        - m_deviceScaleInCompositor is deleted as it's clearer to use the
        applyDeviceScaleInCompositor setting directly.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::size):
        (WebKit):
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::setPageScaleFactor):
        (WebKit::WebViewImpl::setDeviceScaleFactor):
        (WebKit::WebViewImpl::layoutSize):
        (WebKit::WebViewImpl::computePageScaleFactorLimits):
        (WebKit::WebViewImpl::dipSize):
        (WebKit::WebViewImpl::didChangeContentsSize):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        * src/WebViewImpl.h:
        (WebViewImpl):

2013-01-17  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled Chromium DEPS to r177369.  Requested by
        ajuma via sheriffbot.

        * DEPS:

2013-01-17  Eugene Klyuchnikov  <eustas@chromium.org>

        Web Inspector: Profiler: split "getProfile" to "getCPUProfile" and "loadHeapSnapshot"
        https://bugs.webkit.org/show_bug.cgi?id=104545

        Reviewed by Yury Semikhatsky.

        Adopt changes: mimic old behavior.

        * src/WebDevToolsAgentImpl.cpp: Adopt signature changes.

2013-01-17  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: add WebDeToolsAgentImpl as task observer on reattach
        https://bugs.webkit.org/show_bug.cgi?id=107106

        Reviewed by Pavel Feldman.

        Register WebDevToolsAgentImpl as task observer when it client is reattached.

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::reattach):

2013-01-16  Dominic Cooney   <dominicc@chromium.org>

        [Chromium] Unreviewed gardening.

        Roll Chromium to 177350.

        * DEPS:

2013-01-16  Kristian Monsen  <kristianm@google.com>

        Fix build break for Android webview.
        https://bugs.webkit.org/show_bug.cgi?id=107072

        Reviewed by Steve Block.

        Add extra guards when checking for OS=="Android" to make sure it is not included
        for webview.

        * WebKitUnitTests.gyp:

2013-01-16  Dominic Cooney  <dominicc@chromium.org>

        [Chromium] Unreviewed gardening.

        Roll Chromium to 177310.

        * DEPS:

2013-01-16  W. James MacLean  <wjmaclean@chromium.org>

        LinkHighlight should use touch adjustment to match active state on GestureTapDown.
        https://bugs.webkit.org/show_bug.cgi?id=107032

        Reviewed by Adam Barth.

        LinkHighlight node selection should produce results that match the node marked
        active during GestureTapDown.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::bestTouchLinkNode):
        * tests/LinkHighlightTest.cpp:
        (WebCore::TEST):

2013-01-16  Kentaro Hara  <haraken@chromium.org>

        [V8] Make a creationContext parameter of toV8() mandatory
        https://bugs.webkit.org/show_bug.cgi?id=107020

        Reviewed by Adam Barth.

        We pass Handle<Object>() to a creationContext parameter of
        toV8() when we do not have a creationContext.

        No tests. No change in behavior.

        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::windowObjectCleared):
        * src/WebArrayBuffer.cpp:
        (WebKit::WebArrayBuffer::toV8Value):
        * src/WebBlob.cpp:
        (WebKit::WebBlob::toV8Value):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFileSystem):
        (WebKit::WebFrameImpl::createSerializableFileSystem):
        (WebKit::WebFrameImpl::createFileEntry):

2013-01-16  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move WebArrayBufferView and WebSerializedScriptValue out of public/platform/
        https://bugs.webkit.org/show_bug.cgi?id=106863

        Reviewed by Adam Barth.

        These are not being moved into the new top-level Platform
        directory, so into public they go.

        * WebKit.gyp:
        * public/WebArrayBufferView.h: Added.
        (v8):
        (WebKit):
        (WebArrayBufferView):
        (WebKit::WebArrayBufferView::~WebArrayBufferView):
        (WebKit::WebArrayBufferView::WebArrayBufferView):
        * public/WebSerializedScriptValue.h: Added.
        (v8):
        (WebKit):
        (WebSerializedScriptValue):
        (WebKit::WebSerializedScriptValue::~WebSerializedScriptValue):
        (WebKit::WebSerializedScriptValue::WebSerializedScriptValue):
        (WebKit::WebSerializedScriptValue::operator=):
        (WebKit::WebSerializedScriptValue::isNull):
        * public/platform/WebArrayBufferView.h:
        * public/platform/WebSerializedScriptValue.h:

2013-01-16  Chris Hopman  <cjhopman@chromium.org>

        [Chromium] Remove hardcoded chromium_*.jar in gyp files
        https://bugs.webkit.org/show_bug.cgi?id=104049

        Reviewed by Eric Seidel.

        Targets with dependencies (direct/indirect) on a java target receive
        the chromium_*.jar paths in the variable input_jars_paths. Targets
        should use that rather than hardcoding where they think the jar will
        be. These can be passed directly to ant as INPUT_JARS_PATHS rather
        than as --jars to generate_native_test.py.

        * WebKitUnitTests.gyp:

2013-01-16  Dominic Cooney   <dominicc@chromium.org>

        [Chromium] Unreviewed gardening.

        Roll Chromium to 177117.

        * DEPS:

2013-01-16  Dominic Cooney  <dominicc@chromium.org>

        [Chromium] Unreviewed gardening.

        Roll Chromium to r177080.

        * DEPS:

2013-01-15  Ian Vollick  <vollick@chromium.org>

        [chromium] Create GraphicsLayerChromiums using a factory
        https://bugs.webkit.org/show_bug.cgi?id=103635

        Reviewed by James Robinson.

        Refactor graphics layer creation for chromium to go through a factory.

        * src/ChromeClientImpl.cpp:
        (WebCore):
        (GraphicsLayerFactoryChromium):
        (WebCore::GraphicsLayerFactoryChromium::~GraphicsLayerFactoryChromium):
        (WebKit::ChromeClientImpl::ChromeClientImpl):
        (WebKit::ChromeClientImpl::graphicsLayerFactory):
        (WebKit):
        * src/ChromeClientImpl.h:
        (WebCore):
        (ChromeClientImpl):
        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::NonCompositedContentHost):
        * src/NonCompositedContentHost.h:
        (WebCore):
        (WebKit::NonCompositedContentHost::create):
        (NonCompositedContentHost):
        * src/PageOverlay.cpp:
        (WebKit::PageOverlay::update):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::graphicsLayerFactory):
        (WebKit):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:
        (WebCore):
        (WebViewImpl):
        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKit::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):
        * tests/ImageLayerChromiumTest.cpp:
        (WebCore::TEST):

2013-01-15  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move SocketStreamHandle and SocketStreamHandleInternal to WebCore/platform
        https://bugs.webkit.org/show_bug.cgi?id=106899

        Reviewed by Adam Barth.

        Part of a larger refactoring series; see tracking bug 106829.

        * WebKit.gyp:
        * src/SocketStreamHandle.cpp: Removed.
        * src/SocketStreamHandleInternal.h: Removed.

2013-01-15  Florin Malita  <fmalita@chromium.org>

        [Chromium] Incorrect opaque region tracking for PlatformContextSkia::drawRRect
        https://bugs.webkit.org/show_bug.cgi?id=106898

        Reviewed by Stephen White.

        * tests/PlatformContextSkiaTest.cpp:
        (WebCore::TEST):
        (WebCore):

2012-12-28  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Support inspector file system access with isolated file system through InspectorFrontendHost.
        https://bugs.webkit.org/show_bug.cgi?id=105727

        Reviewed by Pavel Feldman.

        File system access methods plumbing made for Chromium.

        * public/WebDevToolsFrontendClient.h:
        (WebKit::WebDevToolsFrontendClient::requestFileSystems):
        (WebKit::WebDevToolsFrontendClient::addFileSystem):
        (WebKit::WebDevToolsFrontendClient::removeFileSystem):
        (WebDevToolsFrontendClient):
        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::supportsFileSystems):
        (WebKit):
        (WebKit::InspectorFrontendClientImpl::requestFileSystems):
        (WebKit::InspectorFrontendClientImpl::addFileSystem):
        (WebKit::InspectorFrontendClientImpl::removeFileSystem):
        * src/InspectorFrontendClientImpl.h:
        (InspectorFrontendClientImpl):

2013-01-14  Dominic Cooney  <dominicc@chromium.org>

        [Chromium] Unreviewed gardening.

        Roll Chromium to r176801.

        * DEPS: Rollin' on the river.

2013-01-14  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove unused public/platform/WebColorName.h
        https://bugs.webkit.org/show_bug.cgi?id=106865

        Reviewed by Adam Barth.

        This file is no longer referenced anywhere in WebKit or Chromium.

        * public/platform/WebColorName.h: Removed.

2013-01-14  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move BlobRegistryProxy into WebCore
        https://bugs.webkit.org/show_bug.cgi?id=106831

        Reviewed by Adam Barth.

        Part of a larger refactoring series to remove layering violations
        in Chromium. See tracking bug 106829.

        * WebKit.gyp:
        * src/BlobRegistryProxy.cpp: Removed.
        * src/BlobRegistryProxy.h: Removed.

2013-01-14  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Remove IDBObjectStore/IndexBackendImpl and support functions
        https://bugs.webkit.org/show_bug.cgi?id=106605

        Remove all references to IDBObjectStoreBackend* and IDBIndexBackend*
        as they no longer exist in WebCore.

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebIDBCallbacks.h:
        (WebKit):
        * public/WebIDBDatabase.h:
        (WebKit):
        (WebKit::WebIDBDatabase::metadata):
        * public/WebIDBFactory.h:
        (WebIDBFactory):
        * public/WebIDBIndex.h: Removed.
        * public/WebIDBObjectStore.h: Removed.
        * public/WebIDBTransaction.h:
        * src/IDBCallbacksProxy.cpp:
        * src/IDBDatabaseBackendProxy.cpp:
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/IDBFactoryBackendProxy.cpp:
        * src/IDBFactoryBackendProxy.h:
        (IDBFactoryBackendProxy):
        * src/IDBIndexBackendProxy.cpp: Removed.
        * src/IDBIndexBackendProxy.h: Removed.
        * src/IDBObjectStoreBackendProxy.cpp: Removed.
        * src/IDBObjectStoreBackendProxy.h: Removed.
        * src/IDBTransactionBackendProxy.cpp:
        * src/IDBTransactionBackendProxy.h:
        (IDBTransactionBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::put):
        (WebKit::WebIDBDatabaseImpl::setIndexKeys):
        * src/WebIDBDatabaseImpl.h:
        (WebKit):
        (WebIDBDatabaseImpl):
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::getDatabaseNames):
        * src/WebIDBFactoryImpl.h:
        (WebIDBFactoryImpl):
        * src/WebIDBIndexImpl.cpp: Removed.
        * src/WebIDBIndexImpl.h: Removed.
        * src/WebIDBObjectStoreImpl.cpp: Removed.
        * src/WebIDBObjectStoreImpl.h: Removed.
        * src/WebIDBTransactionImpl.cpp:
        * src/WebIDBTransactionImpl.h:
        * tests/IDBAbortOnCorruptTest.cpp:
        (WebCore::TEST):
        * tests/IDBDatabaseBackendTest.cpp:

2013-01-14  Dominic Mazzoni  <dmazzoni@google.com>

        AX: Need to implement ColorWellRole
        https://bugs.webkit.org/show_bug.cgi?id=106756

        Reviewed by Chris Fleizach.

        Adds an accessibility interface to access the value of a
        color control.

        * public/WebAccessibilityObject.h:
        (WebAccessibilityObject):
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::colorValue):
        (WebKit):

2013-01-14  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move AudioDestinationChromium into WebCore
        https://bugs.webkit.org/show_bug.cgi?id=106803

        Reviewed by Adam Barth.

        This doesn't really belong in WebKit/chromium/src since it defines
        things directly in the WebCore namespace.

        * WebKit.gyp:
        * src/AudioDestinationChromium.cpp: Removed.
        * src/AudioDestinationChromium.h: Removed.

2013-01-14  Stephen Chenney  <schenney@chromium.org>

        Re-enabling the SK_DISABLE_DASHING_OPTIMIZATION flag for Skia

        Unreviewed build fix.

        It turns out that the change behind this flag causes crashes and image errors.

        * skia_webkit.gyp:

2013-01-14  Kentaro Hara  <haraken@chromium.org>

        [V8] Make an Isolate parameter mandatory in ScriptDebugServer::interruptAndRun()
        https://bugs.webkit.org/show_bug.cgi?id=106779

        Reviewed by Adam Barth.

        This is one of steps to make an Isolate parameter mandatory.

        No tests. No change in behavior.

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::interruptAndDispatch):

2013-01-13  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: [Chromium] DevToolsSanityTest.TestNoScriptDuplicatesOnPanelSwitch fails
        https://bugs.webkit.org/show_bug.cgi?id=106755

        Reviewed by Alexander Pavlov.

        * src/js/Tests.js:
        (.TestSuite.prototype.nonAnonymousUISourceCodes_.filterOutService):
        (.TestSuite.prototype.nonAnonymousUISourceCodes_):

2013-01-12  David Grogan  <dgrogan@chromium.org>

        Unreviewed.  Roll chromium DEPS to 176595.
        https://bugs.webkit.org/show_bug.cgi?id=106730

        * DEPS:

2013-01-11  Dan Beam  <dbeam@chromium.org>

        [clean up] Remove HTMLFormElement::AutocompleteResultError in favor of more specific Error reasons
        https://bugs.webkit.org/show_bug.cgi?id=106610

        Reviewed by Darin Fisher.

        * public/WebFormElement.h: Removed WebFormElement::AutocompleteResultError in favor of more specific error reasons.
        * src/AssertMatchingEnums.cpp: Removed enum value from compile-time asserts.

2013-01-11  Tien-Ren Chen  <trchen@chromium.org>

        WebWidgetClient::didHandleGestureEvent needs to distinguish the case if the event is processed or swallowed
        https://bugs.webkit.org/show_bug.cgi?id=104427

        Reviewed by Adam Barth.

        When a gesture needs to be disambiguated, WebKit doesn't update cursor focus.
        We added an extra status for didHandleGestureEvent(), so we can distinguish
        the case whether the event is actually delivered to the web page or cancelled.

        * public/WebViewClient.h:
        * public/WebWidgetClient.h:
        (WebKit):
        (WebWidgetClient):
        (WebKit::WebWidgetClient::didHandleGestureEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        * tests/WebViewTest.cpp:

2013-01-11  Eberhard Graether  <egraether@google.com>

        [chromium] Add ContinuousPainter to call setNeedsDisplay on all layers recursively in continuous painting mode
        https://bugs.webkit.org/show_bug.cgi?id=105458

        Reviewed by James Robinson.

        In continuous painting mode all layers are constantly repainted to allow for life measurements of page paint time,
        while changing HTML and CSS using the WebInspector. This change adds the ContinuousPainter helper object, which
        calls setNeedsDisplay() on all GraphicsLayers recursively in order to force all layers to repaint. PageOverlay
        layers get excluded from being repainted, because their extra paint time is altering the page paint time metric.

        * WebKit.gyp:
        * src/PageOverlay.h:
        (WebKit::PageOverlay::graphicsLayer):
        (PageOverlay):
        * src/PageOverlayList.cpp:
        (WebKit::PageOverlayList::findGraphicsLayer):
        (WebKit):
        * src/PageOverlayList.h:
        (WebCore):
        (PageOverlayList):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::didBeginFrame):
        * src/WebViewImpl.h:
        * src/painting/ContinuousPainter.cpp: Copied from Source/WebKit/chromium/src/PageOverlay.h.
        (WebKit):
        (WebKit::ContinuousPainter::setNeedsDisplayRecursive):
        * src/painting/ContinuousPainter.h: Copied from Source/WebKit/chromium/src/PageOverlay.h.
        (WebCore):
        (WebKit):
        (ContinuousPainter):

2013-01-11  Tony Chang  <tony@chromium.org>

        Unreviewed, revert r139157 to fix the chromium build.
        These files were deleted in a follow up and since r139044 was reverted, we need to
        add back these files.

        * WebKit.gyp:
        * src/DragScrollTimer.cpp: Added.
        (WebKit):
        (WebKit::distanceToRect):
        (WebKit::DragScrollTimer::DragScrollTimer):
        (WebKit::DragScrollTimer::~DragScrollTimer):
        (WebKit::DragScrollTimer::stop):
        (WebKit::DragScrollTimer::scroll):
        (WebKit::DragScrollTimer::update):
        (WebKit::DragScrollTimer::triggerScroll):
        (WebKit::DragScrollTimer::scrollDistanceFor):
        * src/DragScrollTimer.h: Added.
        (WebKit):
        (DragScrollTimer):
        (WebKit::DragScrollTimer::fired):
        (WebKit::DragScrollTimer::shouldScroll):

2013-01-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r139044.
        http://trac.webkit.org/changeset/139044
        https://bugs.webkit.org/show_bug.cgi?id=106702

        Caused various scrolling anomolies on Mac with drag and drop
        (Requested by smfr on #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::dragSourceEndedAt):
        (WebKit::WebViewImpl::dragSourceMovedTo):
        (WebKit::WebViewImpl::dragTargetDrop):
        (WebKit::WebViewImpl::dragTargetDragEnterOrOver):
        * src/WebViewImpl.h:
        (WebKit):

2013-01-11  Tony Chang  <tony@chromium.org>

        [chromium] Don't regenerate all bindings when any idl file changes
        https://bugs.webkit.org/show_bug.cgi?id=106604

        Reviewed by Kentaro Hara.

        * gyp_webkit: Add Source/WebCore/WebCore.gyp/scripts to the python import search path
        so we can generate idl dependencies at gyp time.

2013-01-11  Stephen Chenney  <schenney@chromium.org>

        Removing Skia flags that have been disabling oprtimizations and other improvements.

        Unreviewed build fix.

        These changes have been extensively tested by the Skia team, and
        WebKit test result changes will be monitored.

        * skia_webkit.gyp:

2013-01-11  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector [chromium]: toolbar border is missing on non-Mac in docked-to-bottom mode
        https://bugs.webkit.org/show_bug.cgi?id=106560

        Reviewed by Vsevolod Vlasov.

        * src/js/devTools.css:
        (body.dock-to-bottom.platform-mac #toolbar):

2013-01-10  Noel Gordon  <noel.gordon@gmail.com>

        [chromium] Disable PNG and ICO image webkit-unit-tests after r139347
        https://bugs.webkit.org/show_bug.cgi?id=106631

        Reviewed by Eric Seidel.

        * tests/WebImageTest.cpp:
        (WebKit::TEST): Disable ICOImage and PNGImage tests on WIN and MAC to
        green their respective webkit-unit-test bots. The tests still pass on
        LINUX so keep test coverage there for now.

2013-01-10  Dan Beam  <dbeam@chromium.org>

        Implement AutocompleteErrorEvent#reason
        https://bugs.webkit.org/show_bug.cgi?id=105568

        Reviewed by Adam Barth.

        * public/WebFormElement.h: Added matching enum values for public chromium WebKit API.
        * src/AssertMatchingEnums.cpp: Updated compile assert that WebKit and WebCore enums match.

2013-01-10  Adam Barth  <abarth@webkit.org>

        Add an ENABLE macro and a WebCore::Setting for the threaded parser
        https://bugs.webkit.org/show_bug.cgi?id=106595

        Reviewed by Benjamin Poulain.

        Explicitly disable THREADED_HTML_PARSER for Chromium so that we can
        more easily enable it locally.

        * features.gypi:

2013-01-10  John Mellor  <johnme@chromium.org>

        Fix scale of screen.width, window.outerWidth and @media device-width when page scale not applied in compositor.
        https://bugs.webkit.org/show_bug.cgi?id=106460

        Reviewed by Kenneth Rohde Christiansen.

        1. Exposes the existing applyDeviceScaleFactorInCompositor from
        WebSettings on Settings (and stores the value there instead), so it can
        be accessed from WebCore.

        2. Changes ChromeClientImpl::windowRect to return values in density
        independent (UI) pixels pixels instead of physical screen pixels (see
        explanation in Source/WebCore/ChangeLog).

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::windowRect):
            Normalizes window rect scale.
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setApplyDeviceScaleFactorInCompositor):
        (WebKit::WebSettingsImpl::applyDeviceScaleFactorInCompositor):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2013-01-10  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2013-01-10  Dimitri Glazkov  <dglazkov@chromium.org>

        Unreviewed, rolling out r139227.
        http://trac.webkit.org/changeset/139227
        https://bugs.webkit.org/show_bug.cgi?id=106227

        Broke Win component build.

        * public/WebAccessibilityObject.h:
        * public/WebAccessibilityRole.h:
        * public/WebActiveWheelFlingParameters.h:
        * public/WebAnimationController.h:
        * public/WebApplicationCacheHost.h:
        * public/WebApplicationCacheHostClient.h:
        * public/WebArrayBuffer.h:
        * public/WebAudioSourceProvider.h:
        * public/WebBatteryStatus.h:
        * public/WebBindings.h:
        * public/WebBlob.h:
        * public/WebCache.h:
        * public/WebCachedURLRequest.h:
        * public/WebColorChooser.h:
        * public/WebColorChooserClient.h:
        * public/WebColorName.h:
        * public/WebCommonWorkerClient.h:
        * public/WebCompositionUnderline.h:
        * public/WebCompositorInputHandler.h:
        * public/WebConsoleMessage.h:
        * public/WebContentDetectionResult.h:
        * public/WebContextMenuData.h:
        * public/WebCrossOriginPreflightResultCache.h:
        * public/WebCursorInfo.h:
        * public/WebDOMEvent.h:
        * public/WebDOMEventListener.h:
        * public/WebDOMStringList.h:
        * public/WebDataSource.h:
        * public/WebDatabase.h:
        * public/WebDateTimeChooserCompletion.h:
        * public/WebDateTimeChooserParams.h:
        * public/WebDeliveredIntentClient.h:
        * public/WebDevToolsAgent.h:
        * public/WebDevToolsAgentClient.h:
        * public/WebDevToolsFrontend.h:
        * public/WebDeviceOrientationClient.h:
        * public/WebDeviceOrientationClientMock.h:
        * public/WebDeviceOrientationController.h:
        * public/WebDocument.h:
        * public/WebDraggableRegion.h:
        * public/WebExternalPopupMenuClient.h:
        * public/WebFileChooserCompletion.h:
        * public/WebFileChooserParams.h:
        * public/WebFileSystemCallbacks.h:
        * public/WebFileSystemEntry.h:
        * public/WebFileWriter.h:
        * public/WebFileWriterClient.h:
        * public/WebFindOptions.h:
        * public/WebFont.h:
        * public/WebFontCache.h:
        * public/WebFontDescription.h:
        * public/WebFormControlElement.h:
        * public/WebFormElement.h:
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        * public/WebGeolocationClientMock.h:
        * public/WebGeolocationController.h:
        * public/WebGeolocationError.h:
        * public/WebGeolocationPermissionRequest.h:
        * public/WebGeolocationPermissionRequestManager.h:
        * public/WebGeolocationPosition.h:
        * public/WebGlyphCache.h:
        * public/WebHelperPlugin.h:
        * public/WebHistoryItem.h:
        * public/WebHitTestResult.h:
        * public/WebIDBCallbacks.h:
        * public/WebIDBCursor.h:
        * public/WebIDBDatabase.h:
        * public/WebIDBDatabaseCallbacks.h:
        * public/WebIDBDatabaseError.h:
        * public/WebIDBFactory.h:
        * public/WebIDBIndex.h:
        * public/WebIDBKey.h:
        * public/WebIDBKeyPath.h:
        * public/WebIDBKeyRange.h:
        * public/WebIDBMetadata.h:
        * public/WebIDBObjectStore.h:
        * public/WebIDBTransaction.h:
        * public/WebIDBTransactionCallbacks.h:
        * public/WebIconURL.h:
        * public/WebImageDecoder.h:
        * public/WebInputEvent.h:
        * public/WebIntent.h:
        * public/WebIntentRequest.h:
        * public/WebIntentServiceInfo.h:
        * public/WebMediaPlayer.h:
        * public/WebMediaStreamRegistry.h:
        * public/WebMenuItemInfo.h:
        * public/WebNetworkStateNotifier.h:
        * public/WebNode.h:
        * public/WebNodeCollection.h:
        * public/WebNodeList.h:
        * public/WebNotification.h:
        * public/WebNotificationPresenter.h:
        * public/WebOptionElement.h:
        * public/WebPageOverlay.h:
        * public/WebPagePopup.h:
        * public/WebPageSerializer.h:
        * public/WebPasswordFormData.h:
        * public/WebPerformance.h:
        * public/WebPlugin.h:
        * public/WebPluginContainer.h:
        * public/WebPluginParams.h:
        * public/WebPopupMenu.h:
        * public/WebPopupMenuInfo.h:
        * public/WebPrerendererClient.h:
        * public/WebPrintParams.h:
        * public/WebRange.h:
        * public/WebRegularExpression.h:
        * public/WebRuntimeFeatures.h:
        * public/WebScopedMicrotaskSuppression.h:
        * public/WebScopedUserGesture.h:
        * public/WebScriptController.h:
        * public/WebScriptSource.h:
        * public/WebSearchableFormData.h:
        * public/WebSecurityOrigin.h:
        * public/WebSecurityPolicy.h:
        * public/WebSelectElement.h:
        * public/WebSettings.h:
        * public/WebSharedWorker.h:
        * public/WebSharedWorkerRepository.h:
        * public/WebSpeechGrammar.h:
        * public/WebSpeechInputController.h:
        * public/WebSpeechInputResult.h:
        * public/WebSpeechRecognitionHandle.h:
        * public/WebSpeechRecognitionParams.h:
        * public/WebSpeechRecognitionResult.h:
        * public/WebSpeechRecognizer.h:
        * public/WebSpeechRecognizerClient.h:
        * public/WebSpellCheckClient.h:
        * public/WebStorageEventDispatcher.h:
        * public/WebSurroundingText.h:
        * public/WebTestingSupport.h:
        * public/WebTextCheckingCompletion.h:
        * public/WebTextCheckingResult.h:
        * public/WebTextFieldDecoratorClient.h:
        * public/WebTextInputInfo.h:
        * public/WebTextRun.h:
        * public/WebTimeRange.h:
        * public/WebTouchPoint.h:
        * public/WebUserMediaRequest.h:
        * public/WebView.h:
        * public/WebViewBenchmarkSupport.h:
        * public/WebViewClient.h:
        * public/WebWidget.h:
        * public/WebWidgetClient.h:
        * public/WebWindowFeatures.h:
        * public/WebWorkerInfo.h:

2013-01-09  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Allow createIndex/createObjectStore to be asynchronous
        https://bugs.webkit.org/show_bug.cgi?id=106377

        Reviewed by Tony Chang.

        Remove this test as it makes no sense once the objectstore/index
        hierarchy is gone.

        * tests/IDBDatabaseBackendTest.cpp:

2013-01-09  Chris Rogers  <crogers@google.com>

        Allow live/local audio input to be enabled only when needed
        https://bugs.webkit.org/show_bug.cgi?id=106490

        Reviewed by Kenneth Russell.

        * src/AudioDestinationChromium.cpp:
        (WebCore):
        (WebCore::AudioDestination::create):
        (WebCore::AudioDestinationChromium::AudioDestinationChromium):
        (WebCore::AudioDestinationChromium::render):
        * src/AudioDestinationChromium.h:
        (AudioDestinationChromium):

2013-01-09  Yue Zhang  <zysxqn@google.com>

        [Chromium] Always enable autocomplete for password fields
        https://bugs.webkit.org/show_bug.cgi?id=104600

        Reviewed by Darin Fisher.

        Don't check autocomplete in webkit code. Rather, we check it in chrome code in the following way: if the password field is chrome generated password, we ignore autocomplete=off and always fill the password; otherwise, we respect the autocomplete set. Since this is a chrome only feature, we make it configurable (default to false but enable this in chrome code).

        * src/WebPasswordFormUtils.cpp:
        (WebKit::findPasswordFormFields):
        * src/WebPasswordFormUtils.h:
        (WebKit):
        (WebKit::findPasswordFormFields):

2013-01-09  James Robinson  <jamesr@chromium.org>

        [chromium] Add a notification when a WebWidget's WebLayerTreeView is about to go away
        https://bugs.webkit.org/show_bug.cgi?id=106495

        Reviewed by Adrienne Walker.

        The WebWidget / WebLayerTreeView ownership is in a slightly awkward place. I'm moving the ownership
        of the WebLayerTreeView to the WebWidgetClient, but to stage things sanely the WebLayerTreeView's
        client is sill owned by the WebWidget implementation. Thus to shut down cleanly we need an explicit
        notification to the WebWidget that the WebLayerTreeView is going to go away.

        This API can go away once the WebWidget implementation does not provide the WebLayerTreeViewClient,
        which will take a bit more refactoring.

        * public/WebWidget.h:
        (WebWidget):
        (WebKit::WebWidget::willCloseLayerTreeView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::willCloseLayerTreeView):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):

2013-01-09  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove stray references to WebKitPlatformSupport.h
        https://bugs.webkit.org/show_bug.cgi?id=106493

        Reviewed by James Robinson.

        Part of a refactoring series. See tracking bug 82948.

        * src/SharedWorkerRepository.cpp:
        * tests/RunAllTests.cpp:

2013-01-09  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Update some #includes in WebKit/chromium/public/ for new Platform directory
        https://bugs.webkit.org/show_bug.cgi?id=106227

        Reviewed by Darin Fisher.

        Part of a larger refactoring series. See tracking bug 82948.

        * public/WebAccessibilityObject.h:
        * public/WebAccessibilityRole.h:
        * public/WebActiveWheelFlingParameters.h:
        * public/WebAnimationController.h:
        * public/WebApplicationCacheHost.h:
        * public/WebApplicationCacheHostClient.h:
        * public/WebArrayBuffer.h:
        * public/WebAudioSourceProvider.h:
        * public/WebBatteryStatus.h:
        * public/WebBindings.h:
        * public/WebBlob.h:
        * public/WebCache.h:
        * public/WebCachedURLRequest.h:
        * public/WebColorChooser.h:
        * public/WebColorChooserClient.h:
        * public/WebColorName.h:
        * public/WebCommonWorkerClient.h:
        * public/WebCompositionUnderline.h:
        * public/WebCompositorInputHandler.h:
        * public/WebConsoleMessage.h:
        * public/WebContentDetectionResult.h:
        * public/WebContextMenuData.h:
        * public/WebCrossOriginPreflightResultCache.h:
        * public/WebCursorInfo.h:
        * public/WebDOMEvent.h:
        * public/WebDOMEventListener.h:
        * public/WebDOMStringList.h:
        * public/WebDataSource.h:
        * public/WebDatabase.h:
        * public/WebDateTimeChooserCompletion.h:
        * public/WebDateTimeChooserParams.h:
        * public/WebDeliveredIntentClient.h:
        * public/WebDevToolsAgent.h:
        * public/WebDevToolsAgentClient.h:
        * public/WebDevToolsFrontend.h:
        * public/WebDeviceOrientationClient.h:
        * public/WebDeviceOrientationClientMock.h:
        * public/WebDeviceOrientationController.h:
        * public/WebDocument.h:
        * public/WebDraggableRegion.h:
        * public/WebExternalPopupMenuClient.h:
        * public/WebFileChooserCompletion.h:
        * public/WebFileChooserParams.h:
        * public/WebFileSystemCallbacks.h:
        * public/WebFileSystemEntry.h:
        * public/WebFileWriter.h:
        * public/WebFileWriterClient.h:
        * public/WebFindOptions.h:
        * public/WebFont.h:
        * public/WebFontCache.h:
        * public/WebFontDescription.h:
        * public/WebFormControlElement.h:
        * public/WebFormElement.h:
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        * public/WebGeolocationClientMock.h:
        * public/WebGeolocationController.h:
        * public/WebGeolocationError.h:
        * public/WebGeolocationPermissionRequest.h:
        * public/WebGeolocationPermissionRequestManager.h:
        * public/WebGeolocationPosition.h:
        * public/WebGlyphCache.h:
        * public/WebHelperPlugin.h:
        * public/WebHistoryItem.h:
        * public/WebHitTestResult.h:
        * public/WebIDBCallbacks.h:
        * public/WebIDBCursor.h:
        * public/WebIDBDatabase.h:
        * public/WebIDBDatabaseCallbacks.h:
        * public/WebIDBDatabaseError.h:
        * public/WebIDBFactory.h:
        * public/WebIDBIndex.h:
        * public/WebIDBKey.h:
        * public/WebIDBKeyPath.h:
        * public/WebIDBKeyRange.h:
        * public/WebIDBMetadata.h:
        * public/WebIDBObjectStore.h:
        * public/WebIDBTransaction.h:
        * public/WebIDBTransactionCallbacks.h:
        * public/WebIconURL.h:
        * public/WebImageDecoder.h:
        * public/WebInputEvent.h:
        * public/WebIntent.h:
        * public/WebIntentRequest.h:
        * public/WebIntentServiceInfo.h:
        * public/WebMediaPlayer.h:
        * public/WebMediaStreamRegistry.h:
        * public/WebMenuItemInfo.h:
        * public/WebNetworkStateNotifier.h:
        * public/WebNode.h:
        * public/WebNodeCollection.h:
        * public/WebNodeList.h:
        * public/WebNotification.h:
        * public/WebNotificationPresenter.h:
        * public/WebOptionElement.h:
        * public/WebPageOverlay.h:
        * public/WebPagePopup.h:
        * public/WebPageSerializer.h:
        * public/WebPasswordFormData.h:
        * public/WebPerformance.h:
        * public/WebPlugin.h:
        * public/WebPluginContainer.h:
        * public/WebPluginParams.h:
        * public/WebPopupMenu.h:
        * public/WebPopupMenuInfo.h:
        * public/WebPrerendererClient.h:
        * public/WebPrintParams.h:
        * public/WebRange.h:
        * public/WebRegularExpression.h:
        * public/WebRuntimeFeatures.h:
        * public/WebScopedMicrotaskSuppression.h:
        * public/WebScopedUserGesture.h:
        * public/WebScriptController.h:
        * public/WebScriptSource.h:
        * public/WebSearchableFormData.h:
        * public/WebSecurityOrigin.h:
        * public/WebSecurityPolicy.h:
        * public/WebSelectElement.h:
        * public/WebSettings.h:
        * public/WebSharedWorker.h:
        * public/WebSharedWorkerRepository.h:
        * public/WebSpeechGrammar.h:
        * public/WebSpeechInputController.h:
        * public/WebSpeechInputResult.h:
        * public/WebSpeechRecognitionHandle.h:
        * public/WebSpeechRecognitionParams.h:
        * public/WebSpeechRecognitionResult.h:
        * public/WebSpeechRecognizer.h:
        * public/WebSpeechRecognizerClient.h:
        * public/WebSpellCheckClient.h:
        * public/WebStorageEventDispatcher.h:
        * public/WebSurroundingText.h:
        * public/WebTestingSupport.h:
        * public/WebTextCheckingCompletion.h:
        * public/WebTextCheckingResult.h:
        * public/WebTextFieldDecoratorClient.h:
        * public/WebTextInputInfo.h:
        * public/WebTextRun.h:
        * public/WebTimeRange.h:
        * public/WebTouchPoint.h:
        * public/WebUserMediaRequest.h:
        * public/WebView.h:
        * public/WebViewBenchmarkSupport.h:
        * public/WebViewClient.h:
        * public/WebWidget.h:
        * public/WebWidgetClient.h:
        * public/WebWindowFeatures.h:
        * public/WebWorkerInfo.h:

2013-01-09  Stephen Chenney  <schenney@chromium.org>

        Adjust Skia build flags to WebKit skia gyp

        Unreviewed change to enable easy layout test rebaselining.

        * skia_webkit.gyp:

2013-01-09  Mikhail Naganov  <mnaganov@chromium.org>

        [Chromium] Unreviewed: A trivial fix for WebFrameTest.DivAutoZoomParamsTest after r139177.

        * tests/WebFrameTest.cpp:

2013-01-08  Mikhail Naganov  <mnaganov@chromium.org>

        [Chromium] When viewport is disabled, use display width in DIP pixels for the fallback width
        https://bugs.webkit.org/show_bug.cgi?id=106021

        This is to emulate 'UseWideViewport' setting of Android WebView properly.
        'UseWideViewport' now corresponds to the 'viewportEnabled' setting.
        When the value is false, "meta viewport" tag is ignored, and when calculating
        layout width, display width in DIP pixels is used.

        Reviewed by Adam Barth.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::dipSize):
        (WebKit):
        * src/WebViewImpl.h:
        (WebCore):
        (WebViewImpl):

2013-01-08  Chris Rogers  <crogers@google.com>

        Remove unused/deprecated render() method in chromium WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=106399

        Reviewed by Kent Tamura.

        * src/AudioDestinationChromium.cpp:
        * src/AudioDestinationChromium.h:
        (AudioDestinationChromium):

2013-01-08  Yoshifumi Inoue  <yosin@chromium.org>

        Remove WebKit/chromium/src/DragScrollTimer.{cpp,h}
        https://bugs.webkit.org/show_bug.cgi?id=106403

        This patch removes unused file DragScrollTimer.{cpp,h} obsoleted by
        r139044.

        Reviewed by Hajime Morita.

        * WebKit.gyp: Changed to remove lines for DragScroll.{cpp.h}.
        * src/DragScrollTimer.cpp: Removed.
        * src/DragScrollTimer.h: Removed.

2013-01-08  Keishi Hattori  <keishi@webkit.org>

        [Chromium] Hiding popups on mouse wheel should be handled by WebViewImpl
        https://bugs.webkit.org/show_bug.cgi?id=106312

        Reviewed by Kent Tamura.

        We had to removed the code that closed popups on mouse wheel events from
        content::RenderWidgetHostViewMac because it no longer had access to
        child popups. WebViewImpl will hide the popups on mouse wheel events so
        we can maintain the same behavior.

        https://src.chromium.org/viewvc/chrome?view=rev&revision=175488

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleMouseWheel): Overriding so we can hide popups.
        (WebKit):
        * src/WebViewImpl.h:

2013-01-08  James Robinson  <jamesr@chromium.org>

        [chromium] Remove transitional #defines from WebKit API headers
        https://bugs.webkit.org/show_bug.cgi?id=106381

        Reviewed by Adam Barth.

        * public/WebWidget.h:

2013-01-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2013-01-08  Tom Sepez  <tsepez@chromium.org>

        Copy-paste preserves <embed> tags containing active content.
        https://bugs.webkit.org/show_bug.cgi?id=77625

        Reviewed by Ryosuke Niwa.

        Adds chromium API to new unsafePluginPastingEnabled setting.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setUnsafePluginPastingEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2013-01-08  Mark Lam  <mark.lam@apple.com>

        Removed the need for the ProposedDatabase mechanism.
        https://bugs.webkit.org/show_bug.cgi?id=106292.

        Reviewed by Sam Weinig.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::exceededDatabaseQuota):
        * src/ChromeClientImpl.h:
        (ChromeClientImpl):

2013-01-08  Keishi Hattori  <keishi@webkit.org>

        [Chromium] Don't confine page popups to root view on Mac
        https://bugs.webkit.org/show_bug.cgi?id=106315

        Reviewed by Kent Tamura.

        Page popups on Mac no longer get clipped to the web view so we can
        remove the code to confine to root view.

        * src/ColorChooserPopupUIController.cpp:
        (WebKit::ColorChooserPopupUIController::writeDocument): Removing parameters confineToRootView and rootViewRectInScreen.
        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::writeDocument): Ditto.

2012-12-20  Antonio Gomes  <a1.gomes@sisa.samsung.com>

        Introduce a compositing trigger for scrollable frames
        https://bugs.webkit.org/show_bug.cgi?id=105573

        Reviewed by James Robinson.

        Set the newly added scrollable-inner-frames bit to compositing-trigger
        bitset in accordance to the respective setting value.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::allowedCompositingTriggers):

2013-01-08  Steve Block  <steveblock@chromium.org>

        Rename 'IntSize toSize(const IntPoint&)' to 'toIntSize'
        https://bugs.webkit.org/show_bug.cgi?id=106307

        This matches other method names which distinguish between sizes and
        points. See https://bugs.webkit.org/show_bug.cgi?id=105992#c4.

        Reviewed by Kentaro Hara.

        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::setViewport):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::minimumScrollOffset):
        (WebKit::WebFrameImpl::maximumScrollOffset):

2013-01-08  Yoshifumi Inoue  <yosin@chromium.org>

        Dragging over an element with scrollbars should scroll the element when dragging near edges
        https://bugs.webkit.org/show_bug.cgi?id=39725

        Reviewed by Hajime Morita.

        This patch removes DragScrollTimer used for automatic scrolling of main
        frame drag-and-drop which is now implemented in EventHandler.

        Another patch will remove DragScrollTimer.{cpp,h} and update GYP files to
        make patch size small.

        No tests. Existing test covers this change.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl): Changed to remove m_dragScrollTimer.
        (WebKit::WebViewImpl::dragSourceEndedAt): ditto
        (WebKit::WebViewImpl::dragSourceMovedTo): ditto
        (WebKit::WebViewImpl::dragTargetDrop): ditto
        (WebKit::WebViewImpl::dragTargetDragEnterOrOver): ditto
        * src/WebViewImpl.h:
        (WebKit): Chagned to remove DragScrollTimer.

2013-01-07  Steve Block  <steveblock@chromium.org>

        Use toSize() to convert from Int/FloatPoint to Int/FloatSize
        https://bugs.webkit.org/show_bug.cgi?id=105992

        Reviewed by Kentaro Hara.

        * src/LinkHighlight.cpp:
        (WebKit::LinkHighlight::computeHighlightLayerPathAndPosition):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::minimumScrollOffset):
        (WebKit::WebFrameImpl::maximumScrollOffset):

2013-01-07  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Expose compositedScrollingForFramesEnabled setting in WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=106262

        Reviewed by James Robinson.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setCompositedScrollingForFramesEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2013-01-07  Stephen White  <senorblanco@chromium.org>

        Add a flag to control canvas antialiasing.
        https://bugs.webkit.org/show_bug.cgi?id=106255

        Reviewed by Darin Fisher.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setAntialiased2dCanvasEnabled):
        * src/WebSettingsImpl.h:

2013-01-07  Yusuf Ozuysal  <yusufo@google.com>

        Don't use double tap zoom if minimum and maximum page scale is the same
        https://bugs.webkit.org/show_bug.cgi?id=106272

        Reviewed by James Robinson.

        We should only try to computed relevant scale and scrollOffset and start the animation
        if the page is zoomable. This now creates an undesired animation for mobile pages which
        are not zoomable.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):

2013-01-07  Tony Chang  <tony@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2013-01-07  Alok Priyadarshi  <alokp@chromium.org>

        [chromium] Fix PlatformContextSkia::setDrawingToImageBuffer abuse
        https://bugs.webkit.org/show_bug.cgi?id=104956

        Reviewed by James Robinson.

        Replaced PlatformContextSkia::SetDrawingToImageBuffer with GraphicsContext::setShouldSmoothFonts.

        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::paintContents):
        (WebKit):
        (WebKit::NonCompositedContentHost::setShowDebugBorders):
        * src/PageWidgetDelegate.cpp:
        (WebKit::PageWidgetDelegate::paint):
        * src/WebFontImpl.cpp:
        (WebKit::WebFontImpl::drawText):

2013-01-07  Mike West  <mkwst@chromium.org>

        Make the IFRAME_SEAMLESS flag runtime-enabled.
        https://bugs.webkit.org/show_bug.cgi?id=106213

        Reviewed by Ojan Vafai.

        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableSeamlessIFrames):
        (WebKit):
        (WebKit::WebRuntimeFeatures::areSeamlessIFramesEnabled):
            Expose the new runtime feature to the Chromium port.

2013-01-07  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Stub out async IDBDatabaseBackendInterface::createObjectStore
        https://bugs.webkit.org/show_bug.cgi?id=106148

        Reviewed by Adam Barth.

        Stub out WebKit API for async createObjectStore.

        * public/WebIDBDatabase.h:
        (WebIDBDatabase):
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::createObjectStore):
        (WebKit):
        (WebKit::IDBDatabaseBackendProxy::deleteObjectStore):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::createObjectStore):
        (WebKit):
        (WebKit::WebIDBDatabaseImpl::deleteObjectStore):
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):

2013-01-07  Stephen Chenney  <schenney@chromium.org>

        Add comment to WebKit skia gyp

        Unreviewed additon of a comment.

        * skia_webkit.gyp: Some changes should not yet be committed. Commented to that effect.

2013-01-07  Stephen Chenney  <schenney@chromium.org>

        Add Skia build flags to WebKit skia gyp

        Unreviewed change to enable easy layout test rebaselining.

        * skia_webkit.gyp: Added SK_IGNORE_QUAD_STROKE_FIX and SK_IGNORE_TREAT_AS_SPRITE

2013-01-05  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Migrate backend ObjectStore calls to use transaction id
        https://bugs.webkit.org/show_bug.cgi?id=102741

        Reviewed by Tony Chang.

        Fix a bug where an array was initialized with a large empty buffer,
        clean up whitespace, and update to match signatures that changed
        in WebCore.

        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::clear):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::put):
        * src/WebIDBIndexImpl.cpp:
        * tests/IDBDatabaseBackendTest.cpp:

2013-01-05  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Stub out IDBDatabaseBackendInterface::createIndex/deleteIndex
        https://bugs.webkit.org/show_bug.cgi?id=106117

        Reviewed by Adam Barth.

        Stubs for migration from WebIDBObjectStore.

        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::createIndex):
        (WebKit::WebIDBDatabase::deleteIndex):
        (WebIDBDatabase):
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::createIndex):
        (WebKit):
        (WebKit::IDBDatabaseBackendProxy::deleteIndex):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::createIndex):
        (WebKit):
        (WebKit::WebIDBDatabaseImpl::deleteIndex):
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * tests/IDBDatabaseBackendTest.cpp:

2013-01-05  Chris Hopman  <cjhopman@google.com>

        Add function to move caret selection towards a point
        https://bugs.webkit.org/show_bug.cgi?id=105189

        Reviewed by Eric Seidel.

        This function moves the selection to the corresponding point in the
        rootEditableElement of the current selection. Used on Android for
        the behavior of insertion handles (i.e. dragging the caret around).

        * public/WebFrame.h:
        (WebFrame):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::moveCaretSelectionTowardsWindowPoint):
        (WebKit):
        * src/WebFrameImpl.h:
        (WebFrameImpl):

2013-01-04  James Robinson  <jamesr@chromium.org>

        [chromium] Remove WebWidget::layerTreeView(), ownership is the other way around
        https://bugs.webkit.org/show_bug.cgi?id=106139

        Reviewed by Adrienne Walker.

        This was added with the thought that it would be useful for transitioning code for a world where the
        WebLayerTreeView for a given widget was owned by the WebWidgetClient instead of the WebWidget, but as it turns
        out we've transitioned without every adding any callers to this.

        * public/WebWidget.h:
        (WebWidget):
        * src/WebViewImpl.cpp:

2013-01-04  Dana Jansens  <danakj@chromium.org>

        [chromium] Remove lost-compositor-context layout tests
        https://bugs.webkit.org/show_bug.cgi?id=106089

        Reviewed by James Robinson.

        Remove the loseCompositorContext() test function.

        * public/WebView.h:
        (WebView):
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:
        (WebViewImpl):

2013-01-04  Adam Klein  <adamk@chromium.org>

        Remove ENABLE_MUTATION_OBSERVERS #define
        https://bugs.webkit.org/show_bug.cgi?id=105459

        Reviewed by Ryosuke Niwa.

        * features.gypi:
        * src/WebKit.cpp:
        (WebKit::initialize):
        (WebKit::shutdown):

2013-01-04  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Update some #includes to use headers in the new Platform directory
        https://bugs.webkit.org/show_bug.cgi?id=106092

        Reviewed by Kentaro Hara.

        Working towards getting rid of legacy header files in
        WebKit/chromium/public/ and WebKit/chromium/public/platform/

        * src/AsyncFileSystemChromium.cpp:
        * src/StorageAreaProxy.cpp:
        * src/StorageNamespaceProxy.cpp:
        * src/WebFileSystemCallbacksImpl.cpp:
        * src/WebGraphicsContext3D.cpp:
        * src/WebIDBCursorImpl.h:
        * src/WebIDBDatabaseCallbacksImpl.cpp:
        * src/WebIDBDatabaseCallbacksImpl.h:
        * src/WebIDBDatabaseError.cpp:
        * src/WebIDBDatabaseImpl.h:
        * src/WebIDBIndexImpl.h:
        * src/WebIDBKeyPath.cpp:
        * src/WebIDBMetadata.cpp:
        * src/WebIDBObjectStoreImpl.h:
        * src/WebWorkerClientImpl.cpp:
        * src/WebWorkerRunLoop.cpp:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        * tests/AssociatedURLLoaderTest.cpp:
        * tests/FrameTestHelpers.cpp:
        * tests/PopupMenuTest.cpp:
        * tests/URLTestHelpers.cpp:
        * tests/WebFrameTest.cpp:
        * tests/WebPageNewSerializerTest.cpp:
        * tests/WebPageSerializerTest.cpp:
        * tests/WebURLRequestTest.cpp:
        * tests/WebURLResponseTest.cpp:
        * tests/WebUnitTests.h:
        * tests/WebViewTest.cpp:

2013-01-04  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2013-01-03  Sami Kyostila  <skyostil@chromium.org>

        [chromium] Rename low latency rendering mode setting to vsync notification
        https://bugs.webkit.org/show_bug.cgi?id=106020

        Reviewed by James Robinson.

        Rename low latency rendering mode setting to vsync notification because
        the old name was ambiguous and bad. This setting is meant to control
        whether the renderer uses a vsync signal provided by the browser to
        schedule rendering.

2013-01-03  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove all references to sharedWorkerRepository()
        https://bugs.webkit.org/show_bug.cgi?id=104704

        Reviewed by Adam Barth.

        Now that Chromium calls setSharedWorkerRepository upon
        initializing WebKit (
        https://codereview.chromium.org/10990121/ and
        https://codereview.chromium.org/11576028/ ) and no longer
        tries to override sharedWorkerRepository, it is safe to remove
        all references to this function.

        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKit::WebKitPlatformSupport::idbFactory):
        * src/SharedWorkerRepository.cpp:
        (WebKit::sharedWorkerRepository):
        (WebCore::SharedWorkerRepository::isAvailable):

2013-01-03  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Add a missing state to RTCPeerConnection
        https://bugs.webkit.org/show_bug.cgi?id=106017

        Reviewed by Adam Barth.

        Adding the missing ReadyStateHaveRemoteOffer which will show up in the spec soon.

        * src/AssertMatchingEnums.cpp:

2013-01-03  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Simplify IDBTransactionBackendImpl::scheduleTask usage
        https://bugs.webkit.org/show_bug.cgi?id=103536

        Reviewed by Tony Chang.

        Track whether IDBCallbacks has fired before being destructed. If not it probably
        came in after a transaction had asynchronously aborted; fire an abort error which
        will be ignored on the front-end but will clean up lingering IPC tracking.

        * public/WebIDBDatabaseException.h:
        * src/AssertMatchingEnums.cpp:
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::IDBCallbacksProxy):
        (WebKit::IDBCallbacksProxy::~IDBCallbacksProxy):
        (WebKit::IDBCallbacksProxy::onError):
        (WebKit::IDBCallbacksProxy::onSuccess):
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):

2013-01-02  Kenneth Russell  <kbr@google.com>

        [chromium] Creation of dedicated workers (isolates) leaks reference to HTMLDocument
        https://bugs.webkit.org/show_bug.cgi?id=105367

        Reviewed by Dmitry Titov.

        Made WebWorkerClientImpl a subclass of WorkerMessagingProxy rather than an object wrapping
        WorkerMessagingProxy. WorkerMessagingProxy manages its own lifetime and it is impossible to
        properly synchronize the lifetime of WebWorkerClientImpl separately.

        This allowed most of WebWorkerClientImpl to be deleted, but forced a divergence in the class
        hierarchies of WebWorkerClientImpl and WebSharedWorkerImpl. Conversion methods were added to
        WorkerLoaderProxy and WebWorkerBase to bridge the hierarchies of in-process and
        out-of-process workers.

        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::canEstablishDatabase):
            Adjusted how WebWorkerBase is obtained from WorkerLoaderProxy.
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::AllowIndexedDBMainThreadBridge::signalCompleted):
            Adjusted how WorkerLoaderProxy's methods are called.
        (WebKit::IDBFactoryBackendProxy::allowIndexedDB):
            Adjusted how WebWorkerBase is obtained from WorkerLoaderProxy.
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
            Adjusted how WebWorkerBase is obtained from WorkerLoaderProxy.
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::toWebWorkerBase):
            Implemented new conversion method.
        * src/WebSharedWorkerImpl.h:
        (WebSharedWorkerImpl):
            Explicitly derive from WorkerLoaderProxy now that WebWorkerBase no longer does.
        (WebKit::WebSharedWorkerImpl::workerLoaderProxy):
            Added new conversion method.
        * src/WebWorkerBase.h:
        (WebWorkerBase):
            Removed derivation from WorkerLoaderProxy. Added method to convert to WorkerLoaderProxy.
        * src/WebWorkerClientImpl.cpp:
        (WebKit):
            Adjusted comment.
        (WebKit::WebWorkerClientImpl::createWorkerContextProxy):
            Adjusted whitespace.
        (WebKit::WebWorkerClientImpl::terminateWorkerContext):
            Eliminated delegation to separate object.
        (WebKit::WebWorkerClientImpl::toWebWorkerBase):
            Implemented new conversion method.
        (WebKit::WebWorkerClientImpl::view):
        (WebKit::WebWorkerClientImpl::allowDatabase):
        (WebKit::WebWorkerClientImpl::allowFileSystem):
        (WebKit::WebWorkerClientImpl::openFileSystem):
        (WebKit::WebWorkerClientImpl::allowIndexedDB):
            Eliminated delegation to separate object.
        (WebKit::WebWorkerClientImpl::WebWorkerClientImpl):
        * src/WebWorkerClientImpl.h:
        (WebKit):
            Changed to inherit from WorkerMessagingProxy directly.
        (WebWorkerClientImpl):
            Deleted most methods previously overridden from WorkerContextProxy, etc.
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::WorkerAsyncFileSystemChromium):
        (WebCore::WorkerAsyncFileSystemChromium::createWorkerFileSystemCallbacksBridge):
            Hold on to, and use, WorkerLoaderProxy rather than WebWorkerBase.
        * src/WorkerAsyncFileSystemChromium.h:
        (WebKit):
        (WebCore):
        (WorkerAsyncFileSystemChromium):
            Hold on to WorkerLoaderProxy rather than WebWorkerBase.

2013-01-02  James Robinson  <jamesr@chromium.org>

        [chromium] Remove unused transitional #defines from WebKit Client API
        https://bugs.webkit.org/show_bug.cgi?id=105974

        Reviewed by Adam Barth.

        The transitions these #defines helped with have completed.

        * public/WebFileSystemCallbacks.h:
        (WebKit):
        * public/WebKit.h:
        * public/WebRuntimeFeatures.h:
        * public/WebSettings.h:
        * public/WebWidget.h:

2013-01-02  Cris Neckar  <cdn@chromium.org>

        Initialize WebInputEvent to prevent sending uninitialized bytes with IPC messages.
        https://bugs.webkit.org/show_bug.cgi?id=105934

        Reviewed by James Robinson.

        * public/WebInputEvent.h:
        (WebKit::WebInputEvent::WebInputEvent):

2013-01-02  David Tseng  <dtseng@google.com>

        AX: Chromium needs platform localized strings for media controls.
        https://bugs.webkit.org/show_bug.cgi?id=105940

        Reviewed by Tony Chang.

        * src/LocalizedStrings.cpp:
        (WebCore::localizedMediaControlElementString):
        (WebCore):
        (WebCore::localizedMediaControlElementHelpText):

2013-01-02  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Add Platform/chromium to include_dirs
        https://bugs.webkit.org/show_bug.cgi?id=105955

        Reviewed by James Robinson.

        Currently the headers in WebKit/chromium/public/Web*.h can not
        include headers from the new Platform/chromium/ directory with the
        "#include <public/WebFoo.h>" syntax, because the include_dirs for
        dependent builds (like Chromium-within-WebKit) do not include the
        new Platform/chromium/ directory. This patch adds that capability
        without managing to break anything else.

        * WebKit.gyp:

2013-01-02  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Use non-const buffers in put() to avoid copies
        https://bugs.webkit.org/show_bug.cgi?id=105572

        Reviewed by Adam Barth.

        Pass on non-const Vectors to allow buffer adoption rather than copies.

        * public/WebIDBDatabase.h:
        (WebIDBDatabase):
        (WebKit::WebIDBDatabase::put):
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::put):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::put):
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * tests/IDBDatabaseBackendTest.cpp:

2013-01-02  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Use top level field for gesture event source
        https://bugs.webkit.org/show_bug.cgi?id=105664

        Reviewed by Adam Barth.

        Previously, only GestureFlingStart subtypes of WebGestureEvent
        had a deviceSource flag. A previous CL added a top-level
        deviceSource field for all WebGestureEvent. Now that this field
        is populated in Chromium, use it as necessary in the Chromium
        WebKit layer.

        No new tests: covered by existing tests.

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::handleGestureFling):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        * tests/WebCompositorInputHandlerImplTest.cpp:
        (WebKit::TEST_F):

2012-12-28  Fady Samuel  <fsamuel@chromium.org>

        Roll Chromium DEPS to r174739
        https://bugs.webkit.org/show_bug.cgi?id=105813

        Unreviewed.

        * DEPS:

2012-12-26  Nico Weber  <thakis@chromium.org>

        [chromium] Disable unprefixed css transitions until they're functional
        https://bugs.webkit.org/show_bug.cgi?id=105771

        Reviewed by Eric Seidel.

        Bug 105647 mentions that this is not fully implemented yet, and the
        partial support breaks feature detection in modernizr and friends.

        * features.gypi:

2012-12-26  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: extract JS heap profiler specifics into JSHeapSnapshot.js
        https://bugs.webkit.org/show_bug.cgi?id=105768

        Reviewed by Pavel Feldman.

        * WebKit.gyp: added new file to JS heap profiler.

2012-12-21  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Use harfbuzz-ng instead of harfbuzz-old on Android
        https://bugs.webkit.org/show_bug.cgi?id=104410

        Reviewed by Eric Seidel.

        * features.gypi: Enable harfbuzz-ng on Android.

2012-12-21  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Combine openConnection and openConnectionWithVersion
        https://bugs.webkit.org/show_bug.cgi?id=105658

        Reviewed by Tony Chang.

        * tests/IDBDatabaseBackendTest.cpp:

2012-12-20  Noel Gordon  <noel.gordon@gmail.com>

        [chromium] Disable color profile support for WebImageSkia users 
        https://bugs.webkit.org/show_bug.cgi?id=105493

        Reviewed by Eric Seidel.

        Disable color profiles to prevent null pointer dereference under some
        conditions. Tested by unittests at src.chromium.org.

        * src/WebImageSkia.cpp:
        (WebKit::WebImage::fromData):
        (WebKit::WebImage::framesFromData):

2012-12-20  Nate Chapin  <japhet@chromium.org>

        Rename shouldBufferData to dataBufferingPolicy
        https://bugs.webkit.org/show_bug.cgi?id=105450

        Reviewed by Alexey Proskuryakov.

        No new tests, simple rename.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::loadAsynchronously):

2012-12-20  Dominic Mazzoni  <dmazzoni@google.com>

        AX: support clickPoint in DRT for chromium
        https://bugs.webkit.org/show_bug.cgi?id=97359

        Reviewed by Chris Fleizach.

        Exposes the clickPoint accessibility method in WebAccessibilityObject.

        * public/WebAccessibilityObject.h:
        (WebAccessibilityObject):
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::clickPoint):
        (WebKit):

2012-12-19  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: introduce Page.captureScreenshot
        https://bugs.webkit.org/show_bug.cgi?id=105315

        Reviewed by Yury Semikhatsky.

        Introduces a way for browser to handle protocol commands:
        embedder will ask WebKit whether it should override the command
        result and will get a hint value. Based on that hint, browser
        will prepare the data and ask WebKit again to patch this data in.

        * public/WebDevToolsAgent.h:
        (WebDevToolsAgent):
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::captureScreenshot):
        (WebKit):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebDevToolsAgentImpl.cpp:
        (BrowserDataHintStringValues):
        (WebKit):
        (WebKit::WebDevToolsAgentImpl::WebDevToolsAgentImpl):
        (WebKit::WebDevToolsAgentImpl::captureScreenshot):
        (WebKit::browserHintToString):
        (WebKit::browserHintFromString):
        (WebKit::WebDevToolsAgentImpl::sendMessageToFrontend):
        (WebKit::WebDevToolsAgent::shouldPatchWithBrowserData):
        (WebKit::WebDevToolsAgent::patchWithBrowserData):
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2012-12-20  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r138215.
        http://trac.webkit.org/changeset/138215
        https://bugs.webkit.org/show_bug.cgi?id=105505

        it broke downstream compilation with clang (Requested by
        loislo on #webkit).

        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKitPlatformSupport):
        (WebKit::WebKitPlatformSupport::sharedWorkerRepository):
        * src/SharedWorkerRepository.cpp:
        (WebKit::sharedWorkerRepository):
        (WebCore::SharedWorkerRepository::isAvailable):

2012-12-19  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove idbFactory from PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=105460

        Reviewed by Darin Fisher.

        Part of a larger refactoring series; see tracking bug 82948.

        * WebKit.gyp:
        * src/IDBFactoryBackendInterface.cpp: Added.
        (WebCore):
        (WebCore::IDBFactoryBackendInterface::create):
        * src/PlatformSupport.cpp: Removed.

2012-12-19  Antoine Labour  <piman@chromium.org>

        [chromium] Remove old setBackingTextureId/setBackingIOSurfaceId API on WebPluginContainer
        https://bugs.webkit.org/show_bug.cgi?id=105472

        Reviewed by James Robinson.

        This is not called anymore by chromium (as of r173545), using
        setWebPlugin instead.

        * public/WebPluginContainer.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::WebPluginContainerImpl):
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):

2012-12-19  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] add setIDBFactory method for embedders to call
        https://bugs.webkit.org/show_bug.cgi?id=105465

        Reviewed by Darin Fisher.

        This is step 1 of getting rid of WebKitPlatform::idbFactory. This
        adds a setter for embedders to call upon initialization, which (if
        set) will be used instead of calling the idbFactory()
        method. Eventually the idbFactory() method will go away, and this
        setter will be the only way to initialize the Indexed Database API.

        * public/WebIDBFactory.h:
        (WebKit):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit):
        (WebKit::setIDBFactory):
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):

2012-12-19  Rachel Blum  <groby@chromium.org>

        [Chromium] Check Document now should work with continuous check off
        https://bugs.webkit.org/show_bug.cgi?id=105228

        Reviewed by Anders Carlsson.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::checkSpellingOfString):

2012-12-19  Rachel Blum  <groby@chromium.org>

        [Chromium] Spellchecker should provide suggestions for non-caret selection, too
        https://bugs.webkit.org/show_bug.cgi?id=104841

        Reviewed by Anders Carlsson.

        Allow spelling suggestions for a word if the word is already selected. No suggestion 
        if subset of a word or more than a word is selected.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):

2012-12-19  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove all references to sharedWorkerRepository()
        https://bugs.webkit.org/show_bug.cgi?id=104704

        Reviewed by Darin Fisher.

        Now that Chromium calls setSharedWorkerRepository upon
        initializing WebKit (
        https://codereview.chromium.org/10990121/ and
        https://codereview.chromium.org/11576028/ ) and no longer
        tries to override sharedWorkerRepository, it is safe to remove
        all references to this function.

        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKit::WebKitPlatformSupport::idbFactory):
        * src/SharedWorkerRepository.cpp:
        (WebKit::sharedWorkerRepository):
        (WebCore::SharedWorkerRepository::isAvailable):

2012-12-19  Alexis Menard  <alexis@webkit.org>

        Implement CSS parsing for CSS transitions unprefixed.
        https://bugs.webkit.org/show_bug.cgi?id=104804

        Reviewed by Dean Jackson.

        Add a new flag ENABLE_CSS_TRANSFORMS_ANIMATIONS_TRANSITIONS_UNPREFIXED
        to cover the work of unprefixing Transforms, Animations and 
        Transitions. It will let the possibility of each ports to turn it off 
        in their release branches until we're confident that these CSS 
        properties are ready to be unprefixed.

        * features.gypi:

2012-12-19  Dominic Mazzoni  <dmazzoni@google.com>

        Support titleUIElement in chromium DRT
        https://bugs.webkit.org/show_bug.cgi?id=96529

        Reviewed by Chris Fleizach.

        Fix implementation of titleUIElement - it shouldn't return anything
        if supportsTitleUIElement returns false, so that accessible label
        overriding logic works correctly.

        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::titleUIElement):

2012-12-19  Gavin Peters  <gavinp@chromium.org>

        [chromium] WebCore::Prerender::didStartPrerender depends on LinkLoader
        https://bugs.webkit.org/show_bug.cgi?id=105290

        Reviewed by Abhishek Arya.

        The LinkLoader now removes itself from its prerender in time.

        * tests/PrerenderingTest.cpp:

2012-12-18  Ilya Tikhonovsky  <loislo@chromium.org>

        Unreviewed, rolling out r138061.
        https://bugs.webkit.org/show_bug.cgi?id=105396

        Original patch:
        http://trac.webkit.org/changeset/138061
        https://bugs.webkit.org/show_bug.cgi?id=97359

        It is crashing on Debug bots

        * public/WebAccessibilityObject.h:
        (WebAccessibilityObject):
        * src/WebAccessibilityObject.cpp:

2012-12-18  David Dorwin  <ddorwin@chromium.org>

        [Chromium] Remove temporary backwards compatible interface code (from r137724).
        https://bugs.webkit.org/show_bug.cgi?id=105205

        Reviewed by James Robinson.

        * public/WebMediaPlayerClient.h:
        * src/WebMediaPlayerClientImpl.cpp:

2012-12-18  Dirk Pranke  <dpranke@chromium.org>

        [chromium] pull in the CDM module recently added to media
        https://bugs.webkit.org/show_bug.cgi?id=105360

        Unreiviewed build fix, but sanity checked by ddorwin.

        * DEPS:

2012-12-18  Dean Jackson  <dino@apple.com>

        Unreviewed attempted build fix for Chromium.

        Insert stub methods for localized text track menu labels.

        * src/LocalizedStrings.cpp:
        (WebCore):
        (WebCore::textTrackClosedCaptionsText):
        (WebCore::textTrackSubtitlesText):
        (WebCore::textTrackOffText):
        (WebCore::textTrackNoLabelText):

2012-12-18  Dirk Pranke  <dpranke@chromium.org>

        Pull in the opus codec sources.

        Unreviewed, build fix.

        * DEPS:

2012-12-18  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, roll chromium deps to r173769

        * DEPS:

2012-12-18  Dominic Mazzoni  <dmazzoni@google.com>

        AX: support clickPoint in DRT for chromium
        https://bugs.webkit.org/show_bug.cgi?id=97359

        Reviewed by Chris Fleizach.

        Exposes the clickPoint accessibility method in WebAccessibilityObject.

        * public/WebAccessibilityObject.h:
        (WebAccessibilityObject):
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::clickPoint):
        (WebKit):

2012-12-18  Wei Jia  <wjia@chromium.org>

        Enable media stream on Android for Chromium
        https://bugs.webkit.org/show_bug.cgi?id=102545

        Reviewed by Eric Seidel.

        Put all webrtc related stuff under one flag "enable_webrtc" which is set to 1
        on Linux/Windows/Mac and 0 on Android.

        * features.gypi:

2012-12-18  Yaron Friedman  <yfriedman@chromium.org>

        Chrome Android java output is too verbose
        https://bugs.webkit.org/show_bug.cgi?id=105247

        Reviewed by Tony Chang.

        Pass -quiet to ant to suppress extraneous output.

        * WebKitUnitTests.gyp:

2012-12-17  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: paint inspector overlay on a transparency layer
        https://bugs.webkit.org/show_bug.cgi?id=97659

        Reviewed by Yury Semikhatsky.

        Add a call to PlatformContextSkia::setDrawingToImageBuffer(true) to
        fix wrong rendering of content on transparent background.

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::paintPageOverlay):

2012-12-17  Alex Hutter  <ahutter@chromium.org>

        Exposing querySelector function on WebNode
        https://bugs.webkit.org/show_bug.cgi?id=105193

        Reviewed by Darin Fisher.

        This change is necessitated by the new autofill flows in chromium.

        * public/WebNode.h:
        * src/WebNode.cpp:
        (WebKit::WebNode::querySelector):
        (WebKit):

2012-12-17  Chris Fleizach  <cfleizach@apple.com>

        Seamless iframe should not announce a new browsing context
        https://bugs.webkit.org/show_bug.cgi?id=86317

        Reviewed by Eric Seidel.

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2012-12-17  Levi Weintraub  <leviw@chromium.org>

        Add support for tracking hit test rectangles to enable fast event rejection in the compositor
        https://bugs.webkit.org/show_bug.cgi?id=103914

        Reviewed by James Robinson.

        Enabling touch event target region tracking.

        * features.gypi:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::requestTouchEventType):
        (WebKit::WebPluginContainerImpl::~WebPluginContainerImpl):

2012-12-17  James Robinson  <jamesr@chromium.org>

        [chromium] Move ownership of WebLayerTreeView to WebWidgetClient
        https://bugs.webkit.org/show_bug.cgi?id=105071

        Reviewed by Adrienne Walker.

        This moves ownership of a given WebWidget's WebLayerTreeView from WebViewImpl out to the embedder by way of
        WebWidgetClient. To deal with the two-sided nature of the patch, if construction by the new path fails
        WebViewImpl constructs a WebLayerTreeView by the old path, which means it keeps ownership.

        * public/WebWidgetClient.h:
        (WebWidgetClient):
        (WebKit::WebWidgetClient::initializeLayerTreeView):
        (WebKit::WebWidgetClient::layerTreeView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::~WebViewImpl):
        (WebKit::WebViewImpl::webLayerTreeView):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:

2012-12-17  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: [chromium] make toolbar render with Mountain Lion-friendly colors
        https://bugs.webkit.org/show_bug.cgi?id=105177

        Reviewed by Vsevolod Vlasov.

        * src/js/devTools.css:
        (body.dock-to-bottom #toolbar):
        (body.undocked.platform-mac-leopard #toolbar):
        (body.undocked.platform-mac-leopard.inactive #toolbar):
        (body.undocked.platform-mac-snowleopard #toolbar):
        (body.undocked.platform-mac-snowleopard.inactive #toolbar):
        (body.undocked.platform-mac-mountain-lion #toolbar):
        (body.undocked.platform-mac-mountain-lion.inactive #toolbar):

2012-12-16  Levi Weintraub  <leviw@chromium.org>

        Push pixel snapping logic into TransformState
        https://bugs.webkit.org/show_bug.cgi?id=101779

        Reviewed by Simon Fraser.

        Eliminating use of SnapOffsetForTransforms as it's no longer needed.

        * src/FindInPageCoordinates.cpp:
        (WebKit::toNormalizedRect):
        * src/LinkHighlight.cpp:
        (WebKit::convertTargetSpaceQuadToCompositedLayer):
        * src/WebInputEventConversion.cpp:
        (WebKit::convertAbsoluteLocationForRenderObject):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::windowToLocalPoint):

2012-05-21  Jochen Eisinger  <jochen@chromium.org>

        [chromium] Build content_shell from within WebKit
        https://bugs.webkit.org/show_bug.cgi?id=87045

        Reviewed by Simon Fraser.

        * All.gyp:
        * DEPS:

2012-12-15  Anders Carlsson  <andersca@apple.com>

        Rename FrameLoaderClient::download to convertMainResourceLoadToDownload
        https://bugs.webkit.org/show_bug.cgi?id=105122

        Reviewed by Andreas Kling.

        Update for WebCore changes.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::convertMainResourceLoadToDownload):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2012-12-15  Simon Fraser  <simon.fraser@apple.com>

        Fix repaint issues when resizing a window with centered content, for platforms with a tile cache
        https://bugs.webkit.org/show_bug.cgi?id=105073

        Reviewed by Dan Bernstein.

        Include RenderLayerBacking.h, which is no longer included by RenderLayerCompositor.h.

        * tests/ScrollingCoordinatorChromiumTest.cpp:

2012-12-14  Dan Alcantara  <dfalcantara@chromium.org>

        WebViewImpl::resetScrollAndScaleState() causes the page to render incorrectly
        https://bugs.webkit.org/show_bug.cgi?id=104767

        Reviewed by Darin Fisher.

        Change WebViewImpl::resetScrollAndScaleState() so that it directly
        alters values in the HistoryItem instead of indirectly changing the
        values.

        Adds a method in HistoryController to clear the scroll and scale state of
        its current HistoryItem.

        * public/WebView.h:
        (WebView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resetScrollAndScaleState):
        * tests/WebViewTest.cpp:

2012-12-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r137765.
        http://trac.webkit.org/changeset/137765
        https://bugs.webkit.org/show_bug.cgi?id=105067

        Breaks webkit_unit_tests and transferred flings (Requested by
        jamesr_ on #webkit).

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::WebCompositorInputHandlerImpl):
        (WebKit::WebCompositorInputHandlerImpl::handleInputEventInternal):
        (WebKit::WebCompositorInputHandlerImpl::handleGestureFling):
        * src/WebCompositorInputHandlerImpl.h:
        (WebCompositorInputHandlerImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::WebViewImpl::handleKeyEvent):
        (WebKit::WebViewImpl::updateAnimations):
        (WebKit::WebViewImpl::didCommitLoad):

2012-12-14  Fady Samuel  <fsamuel@chromium.org>

        Allow embedder to observe changes to frame names
        https://bugs.webkit.org/show_bug.cgi?id=104404

        Reviewed by Darin Fisher.

        * public/WebFrameClient.h:
        (WebFrameClient):
        (WebKit::WebFrameClient::didChangeName):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didChangeName):
        (WebKit):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2012-12-14  Joshua Bell  <jsbell@chromium.org>

        [Chromium] IndexedDB: Memory leak in IDBCallbacksProxy::onSuccess(PassRefPtr<IDBDatabaseBackendInterface>)
        https://bugs.webkit.org/show_bug.cgi?id=104615

        Reviewed by Tony Chang.

        Don't create (and leak) a new wrapper object for onSuccess if one was created for onUpgradeNeeded.

        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::IDBCallbacksProxy):
        (WebKit::IDBCallbacksProxy::onSuccess):
        (WebKit::IDBCallbacksProxy::onUpgradeNeeded):
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):

2012-12-14  Yusuf Ozuysal  <yusufo@google.com>

        Send a message from WebViewImpl to the compositor to inform about end of flings
        https://bugs.webkit.org/show_bug.cgi?id=104947

        Reviewed by James Robinson.

        Whenever we have a fling animation finished on cancelled on main thread this sends
        a message that will be relayed to the compositor input handler. Then the input handler
        keeps track of main thread fling with a boolean and doesn't send flingCancels
        unnecessarily

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::WebCompositorInputHandlerImpl):
        (WebKit::WebCompositorInputHandlerImpl::handleInputEventInternal):
        (WebKit::WebCompositorInputHandlerImpl::handleGestureFling):
        (WebKit::WebCompositorInputHandlerImpl::mainThreadHasStoppedFlinging):
        (WebKit):
        * src/WebCompositorInputHandlerImpl.h:
        (WebCompositorInputHandlerImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::WebViewImpl::handleKeyEvent):
        (WebKit::WebViewImpl::updateAnimations):
        (WebKit::WebViewImpl::didCommitLoad):

2012-12-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r137570.
        http://trac.webkit.org/changeset/137570
        https://bugs.webkit.org/show_bug.cgi?id=105048

        Stale nodes in the touchEventTarget HashCountedSet are
        triggering crashes. Rolling out while I find the root cause.
        (Requested by leviw on #webkit).

        * features.gypi:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::requestTouchEventType):
        (WebKit::WebPluginContainerImpl::~WebPluginContainerImpl):

2012-12-14  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-12-14  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-12-14  David Dorwin  <ddorwin@chromium.org>

        EME v0.1: Report defaultURL in KeyMessage.
        https://bugs.webkit.org/show_bug.cgi?id=104284

        Reviewed by Darin Fisher.

        Passes defaultURL down from the media engine to HTMLMediaElement.
        Only Valid URLs will be passed.

        No test because Clear Key does not provide a defaultURL (in v0.1).

        * public/WebMediaPlayerClient.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::keyMessage):
        (WebKit):
        (WebKit::WebMediaPlayerClient::keyMessage):
        * src/WebMediaPlayerClientImpl.h:
        (WebMediaPlayerClientImpl):

2012-12-13  Tien-Ren Chen  <trchen@chromium.org>

        Don't consider container nodes of other disambiguated nodes
        https://bugs.webkit.org/show_bug.cgi?id=104619

        Reviewed by Eric Seidel.

        Added a test to track the new disambiguation popup heuristics.

        * tests/WebFrameTest.cpp:
        * tests/data/disambiguation_popup_no_container.html: Added.

2012-12-13  James Robinson  <jamesr@chromium.org>

        [chromium] Expose a WebLayerTreeView getter on WebWidget to make it easier for the embedder to interface with the compositor
        https://bugs.webkit.org/show_bug.cgi?id=104968

        Reviewed by Adrienne Walker.

        This is an intermediate step on the way to https://code.google.com/p/chromium/issues/detail?id=156175.

        * public/WebWidget.h:
        (WebKit):
        (WebWidget):
        (WebKit::WebWidget::layerTreeView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::webLayerTreeView):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-12-13  Antoine Labour  <piman@chromium.org>

        [chromium] Small fixes for WebPluginContainer::setWebLayer
        https://bugs.webkit.org/show_bug.cgi?id=104953

        Reviewed by James Robinson.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::~WebPluginContainerImpl): Allow
        WebPlugin to clean up dangling pointers.

2012-12-13  Antoine Labour  <piman@chromium.org>

        [chromium] Add WebPluginContainer::setWebLayer to supersede setBackingTextureId/setBackingIOSurfaceId
        https://bugs.webkit.org/show_bug.cgi?id=104875

        Reviewed by James Robinson.

        * public/WebPluginContainer.h:
        (WebKit):
        (WebPluginContainer):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setWebLayer):
        (WebKit):
        (WebKit::WebPluginContainerImpl::setBackingTextureId):
        (WebKit::WebPluginContainerImpl::setBackingIOSurfaceId):
        (WebKit::WebPluginContainerImpl::commitBackingTexture):
        (WebKit::WebPluginContainerImpl::setOpaque):
        (WebKit::WebPluginContainerImpl::platformLayer):
        (WebKit::WebPluginContainerImpl::WebPluginContainerImpl):
        (WebKit::WebPluginContainerImpl::~WebPluginContainerImpl):
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):

2012-12-13  Yusuf Ozuysal  <yusufo@google.com>

        Check whether a touchDown lands on a registered touch event handler from the compositor
        https://bugs.webkit.org/show_bug.cgi?id=104863

        Reviewed by James Robinson.

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::handleInputEventInternal):

2012-12-07  Levi Weintraub  <leviw@chromium.org>

        Add support for tracking hit test rectangles to enable fast event rejection in the compositor
        https://bugs.webkit.org/show_bug.cgi?id=103914

        Reviewed by Simon Fraser.

        Enabling touch event target region tracking.

        * features.gypi:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::requestTouchEventType):
        (WebKit::WebPluginContainerImpl::~WebPluginContainerImpl):

2012-12-12  Andy Estes  <aestes@apple.com>

        Fix the Chromium build after r137539.

        * src/ScrollbarGroup.cpp:
        (WebKit::ScrollbarGroup::lastKnownMousePosition): Renamed from currentMousePosition().
        * src/ScrollbarGroup.h: Ditto.

2012-12-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-12-12  Charlie Reis  <creis@chromium.org>

        [chromium] Expose quickRedirectComing via WebDataSource
        https://bugs.webkit.org/show_bug.cgi?id=104586

        Reviewed by Nate Chapin.

        Exposes whether the current navigation is a client redirect, and
        thus should replace the current history item.

        * public/WebDataSource.h:
        (WebDataSource): Adds isClientRedirect.
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::isClientRedirect):
        (WebKit):
        * src/WebDataSourceImpl.h:
        (WebDataSourceImpl):

2012-12-12  Mark Lam  <mark.lam@apple.com>

        Encapsulate externally used webdatabase APIs in DatabaseManager.
        https://bugs.webkit.org/show_bug.cgi?id=104741.

        Reviewed by Sam Weinig.

        Use DatabaseManager instead of accessing DatabaseTracker, AbstractDatabase,
        and DatabaseContext directly. This is to prepare for upcoming webkit2
        refactoring.

        * src/ChromeClientImpl.cpp:
        * src/WebDatabase.cpp:
        (WebKit::WebDatabase::closeDatabaseImmediately):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableDatabase):
        (WebKit::WebRuntimeFeatures::isDatabaseEnabled):

2012-12-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r137490.
        http://trac.webkit.org/changeset/137490
        https://bugs.webkit.org/show_bug.cgi?id=104838

        Breaks Chromium build due to references to
        WebSharedWorkerRepository (Requested by aklein on #webkit).

        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKitPlatformSupport):
        (WebKit::WebKitPlatformSupport::sharedWorkerRepository):
        * src/SharedWorkerRepository.cpp:
        (WebKit::sharedWorkerRepository):
        (WebCore::SharedWorkerRepository::isAvailable):

2012-12-12  Alpha Lam  <hclam@chromium.org>

        [chromium] Minimize memcpy for encoded image data in ImageFrameGenerator
        https://bugs.webkit.org/show_bug.cgi?id=103797

        Reviewed by Stephen White.

        Added unit tests for ThreadSafeDataTransport.

        Added unit tests for ImageFrameGenerator to test behavior with and without
        new data.

        New tests:
        ThreadSafeDataTransportTest.hasNewData
        ThreadSafeDataTransportTest.setData
        ImageFrameGeneratorTest.cacheMissWithIncompleteDecodeNoNewData

        * WebKit.gypi:
        * tests/ThreadSafeDataTransportTest.cpp: Added.
        (WebCore):
        (WebCore::TEST):

2012-12-12  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove all references to sharedWorkerRepository()
        https://bugs.webkit.org/show_bug.cgi?id=104704

        Reviewed by James Robinson.

        Now that Chromium calls setSharedWorkerRepository upon
        initializing WebKit (
        https://chromiumcodereview.appspot.com/10990121/ ) and no longer
        tries to override sharedWorkerRepository, it is safe to remove
        all references to this function.

        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKit::WebKitPlatformSupport::idbFactory):
        * src/SharedWorkerRepository.cpp:
        (WebKit::sharedWorkerRepository):
        (WebCore::SharedWorkerRepository::isAvailable):

2012-12-12  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Change the data channel descriptor pattern to a handler pattern
        https://bugs.webkit.org/show_bug.cgi?id=104543

        Reviewed by Kent Tamura.

        * src/AssertMatchingEnums.cpp:

2012-12-11  Dominic Mazzoni  <dmazzoni@google.com>

        AX: Make isActionSupported cross-platform.
        https://bugs.webkit.org/show_bug.cgi?id=104681

        Reviewed by Chris Fleizach.

        Add support for press, increment, and decrement actions,
        including tests to see whether they're supported on a given
        object. This allows Chromium to pass three tests that were
        previously skipped.

        * public/WebAccessibilityObject.h:
        (WebAccessibilityObject):
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::canDecrement):
        (WebKit):
        (WebKit::WebAccessibilityObject::canIncrement):
        (WebKit::WebAccessibilityObject::canPress):
        (WebKit::WebAccessibilityObject::increment):
        (WebKit::WebAccessibilityObject::decrement):
        (WebKit::WebAccessibilityObject::press):

2012-12-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-12-11  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Stub out data operations on IDBDatabaseBackendInterface
        https://bugs.webkit.org/show_bug.cgi?id=104592

        Reviewed by Dimitri Glazkov.

        Stub out chromium side of data operations for refactor.

        * public/WebIDBDatabase.h:
        (WebKit):
        (WebKit::WebIDBDatabase::get):
        (WebKit::WebIDBDatabase::put):
        (WebKit::WebIDBDatabase::setIndexKeys):
        (WebKit::WebIDBDatabase::setIndexesReady):
        (WebKit::WebIDBDatabase::openCursor):
        (WebKit::WebIDBDatabase::count):
        (WebKit::WebIDBDatabase::deleteRange):
        (WebKit::WebIDBDatabase::clear):
        (WebIDBDatabase):
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::openCursor):
        (WebKit):
        (WebKit::IDBDatabaseBackendProxy::count):
        (WebKit::IDBDatabaseBackendProxy::get):
        (WebKit::IDBDatabaseBackendProxy::put):
        (WebKit::IDBDatabaseBackendProxy::setIndexKeys):
        (WebKit::IDBDatabaseBackendProxy::setIndexesReady):
        (WebKit::IDBDatabaseBackendProxy::deleteRange):
        (WebKit::IDBDatabaseBackendProxy::clear):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit):
        (WebKit::WebIDBDatabaseImpl::openCursor):
        (WebKit::WebIDBDatabaseImpl::count):
        (WebKit::WebIDBDatabaseImpl::get):
        (WebKit::WebIDBDatabaseImpl::put):
        (WebKit::WebIDBDatabaseImpl::setIndexKeys):
        (WebKit::WebIDBDatabaseImpl::setIndexesReady):
        (WebKit::WebIDBDatabaseImpl::deleteRange):
        (WebKit::WebIDBDatabaseImpl::clear):
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * tests/IDBDatabaseBackendTest.cpp:

2012-12-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r137330.
        http://trac.webkit.org/changeset/137330
        https://bugs.webkit.org/show_bug.cgi?id=104719

        Breaks a chromium browser_test: WebViewTest.IndexedDBIsolation
        (Requested by aklein on #webkit).

        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onSuccess):

2012-12-11  Joshua Bell  <jsbell@chromium.org>

        [Chromium] IndexedDB: Memory leak in IDBCallbacksProxy::onSuccess(PassRefPtr<IDBDatabaseBackendInterface>)
        https://bugs.webkit.org/show_bug.cgi?id=104615

        Reviewed by Tony Chang.

        Ensure passed pointer is treated with ownership semantics.

        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onSuccess):

2012-12-11  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Clean up unused interfaces in PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=104674

        Reviewed by Darin Fisher.

        Part of a refactoring series. See tracking bug 82948.

        * public/platform/WebKitPlatformSupport.h:
        * src/PlatformSupport.cpp:

2012-12-11  Mike West  <mkwst@chromium.org>

        Web Inspector: ConsoleTypes should not expose MessageType - it should be private to inspector.
        https://bugs.webkit.org/show_bug.cgi?id=66371

        Reviewed by Pavel Feldman.

        Drops WebCore::MessageType from the addMessageToConsole method, and all
        the ancilliary places it touches.

        Aliases postConsoleMessageToWorkerObject with the old interface in
        order to maintain back-compat. Will remove it in a future patch once
        Chromium is updated.

        * public/WebSharedWorkerClient.h:
        (WebSharedWorkerClient):
        (WebKit::WebSharedWorkerClient::postConsoleMessageToWorkerObject):
        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:
        (ChromeClientImpl):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMessageToConsole):
        * src/WebPagePopupImpl.cpp:
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::postConsoleMessageToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postConsoleMessageTask):
        * src/WebSharedWorkerImpl.h:
        (WebSharedWorkerImpl):
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::postConsoleMessageToWorkerObject):
        * src/WebWorkerClientImpl.h:
        (WebWorkerClientImpl):

2012-12-11  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Call createLocalStorageNamespace through Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=104675

        Reviewed by Kentaro Hara.

        Some #include cleanup missing from bug 85766. Part of a
        refactoring series; see tracking bug 82948.

        * src/StorageNamespaceProxy.cpp:
        (WebCore::StorageNamespace::localStorageNamespace):

2012-12-11  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-12-10  Dana Jansens  <danakj@chromium.org>

        [chromium] Remove WebCompositorOutputSurface implementations from DRT
        https://bugs.webkit.org/show_bug.cgi?id=104046

        Reviewed by Darin Fisher.

        Use WebCompositorSupport to create an OutputSurface.

        * WebKit.gypi:
        * src/WebViewImpl.cpp:
        (WebKit):
        * tests/Canvas2DLayerBridgeTest.cpp:
        * tests/FakeWebCompositorOutputSurface.h: Removed.
        * tests/WebLayerTreeViewTestCommon.h:

2012-12-10  Stephen White  <senorblanco@chromium.org>

        [Chromium] Re-enable a failing test.  Disabling it just seemed to
        move the problem to another test.  Unreviewed.

        * tests/GraphicsLayerChromiumTest.cpp:

2012-12-10  David Grogan  <dgrogan@chromium.org>

        IndexedDB: Propagate more leveldb errors to script
        https://bugs.webkit.org/show_bug.cgi?id=104422

        Reviewed by Tony Chang.

        * tests/IDBFakeBackingStore.h:
          Delete method override that doesn't match new signature.

2012-12-09  Antti Koivisto  <antti@apple.com>

        Factor node traversal into standalone functions
        https://bugs.webkit.org/show_bug.cgi?id=104507

        Reviewed by Eric Seidel.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setFindEndstateFocusAndSelection):

2012-12-10  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium][Win] Remove theme-related functions from PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=102699

        Reviewed by Adam Barth.

        Call theme engine directly instead of going through
        PlatformSupport. Part of a refactoring series. See tracking bug 82948.

        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::pluginScriptableObject):

2012-12-10  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move getPluginsList out of PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=96507

        Reviewed by Darin Fisher.

        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/WebPluginListBuilder.h:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKit::WebKitPlatformSupport::idbFactory):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::idbFactory):
        * src/WebPluginListBuilderImpl.cpp: Removed.
        * src/WebPluginListBuilderImpl.h: Removed.

2012-12-10  Alexis Menard  <alexis@webkit.org>

        [CSS3 Backgrounds and Borders] Remove CSS3_BACKGROUND feature flag.
        https://bugs.webkit.org/show_bug.cgi?id=104539

        Reviewed by Antonio Gomes.

        As discussed on webkit-dev it is not needed to keep this feature flag 
        as support for <position> type is a small feature that is already 
        implemented by three other UAs. It was useful while landing this 
        feature as partial bits were landed one after one.

        * features.gypi:

2012-12-10  Mike West  <mkwst@chromium.org>

        [chromium] Add 'WebKit/chromium/win8' to .gitignore
        https://bugs.webkit.org/show_bug.cgi?id=104534

        Reviewed by Jochen Eisinger.

        I've now added it via 'git add' once, and via 'git commit -a' twice.
        Let's make that more difficult, shall we?

        * .gitignore:

2012-12-10  Kent Tamura  <tkent@chromium.org>

        Refactoring: Introduce HTMLFormControlElement::isDisabledOrReadOnly
        https://bugs.webkit.org/show_bug.cgi?id=104508

        Reviewed by Kentaro Hara.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::textInputType):
        Use isDisabledOrReadOnly. Also, remove unnecessary local variable.

2012-12-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r137103.
        http://trac.webkit.org/changeset/137103
        https://bugs.webkit.org/show_bug.cgi?id=104503

        Didn't resolve the chrome win build bot failure, problem moved
        elsewhere. (Requested by noel_ on #webkit).

        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKit::TEST_F):

2012-12-09  Noel Gordon  <noel.gordon@gmail.com>

        [chromium] webkit_unit_tests tests are failing on win
        https://bugs.webkit.org/show_bug.cgi?id=104502

        Unreviewed test fix: disable applyScrollToScrollableArea test.

        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKit::TEST_F):

2012-12-09  Stephen White  <senorblanco@chromium.org>

        [Chromium] Unreviewed.  Temporarily disable a webkit_unit_tests test
        that's failing on Windows.

        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKit::TEST_F):

2012-12-09  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-12-08  Gavin Peters  <gavinp@chromium.org>

        Add status events on <link rel=prerender> elements.
        https://bugs.webkit.org/show_bug.cgi?id=96474

        Reviewed by Adam Barth.

        The new PrerenderStatusEvent is sent to link elements when
        prerenders are started by the embedder, and also sent when they
        are stopped. Pages using this feature can now serialize launching
        prerenders, and track timing performance.

        * WebKit.gyp:
        * WebKit.gypi:
        * tests/FrameTestHelpers.cpp:
        (WebKit::FrameTestHelpers::createWebView):
        (FrameTestHelpers):
        (WebKit::FrameTestHelpers::createWebViewAndLoad):
        * tests/FrameTestHelpers.h:
        (FrameTestHelpers):
        * tests/PrerenderingTest.cpp: Added.
        * tests/data/prerender/multiple_prerenders.html: Added.
        * tests/data/prerender/single_prerender.html: Added.

2012-12-07  Rik Cabanier  <cabanier@adobe.com>

        Extend platform layer so it can pass blend modes to the compositing calls
        https://bugs.webkit.org/show_bug.cgi?id=104176

        Reviewed by Dirk Schulze.

        Adding blend mode enumeration to draw functions 

        * tests/DragImageTest.cpp:
        (WebCore::TestImage::draw):
        * tests/ImageLayerChromiumTest.cpp:
        (WebCore::TestImage::draw):

2012-12-07  Alpha Lam  <hclam@chromium.org>

        [chromium] ImageDecodingStore should cache partially decoded images
        https://bugs.webkit.org/show_bug.cgi?id=103796

        Reviewed by Stephen White.

        Added unit tests to verify caching behavior for partially decoded images.
        New tests added:
        - ImageDecodingStoreTest.insertIncompleteCache
        Insert incomplete image with a decoder into cache.

        - ImageDecodingStoreTest.insertCompleteCacheWithDecoder
        Insert complete image with a decoder, decoder is deleted.

        - ImageDecodingStoreTest.incompleteCacheBecomesComplete
        Progressive downloading of a file. Image becomes complete, decoder deleted.

        - ImageFrameGeneratorTest.cacheMissWithIncompleteDecodeAndScale
        Cache lookup failed and start a decoding that decoded an incomplete image.

        ImageFrameGeneratorTest.incompleteDecodeBecomesComplete
        Image decoded as incomplete, file fully downloaded and cache entry becomes complete.

        ImageFrameGeneratorTest.incompleteDecodeAndScaleBecomesComplete
        Image decoded and scaled as incomplete, becomes complete after file is fully dowloaded.

        ImageFrameGeneratorTest.incompleteDecodeBecomesCompleteMultiThreaded
        Transition from incomplete to complete, entire lifecycle happens on 2 threads.

        * tests/DeferredImageDecoderTest.cpp:
        (WebCore::DeferredImageDecoderTest::SetUp):
        * tests/ImageDecodingStoreTest.cpp:
        (WebCore::ImageDecodingStoreTest::SetUp):
        (WebCore::ImageDecodingStoreTest::decoderBeingDestroyed):
        (ImageDecodingStoreTest):
        (WebCore::ImageDecodingStoreTest::frameBufferRequested):
        (WebCore::ImageDecodingStoreTest::frameStatus):
        (WebCore::ImageDecodingStoreTest::createIncompleteImage):
        (WebCore::ImageDecodingStoreTest::lockCache):
        (WebCore::TEST_F):
        (WebCore):
        * tests/ImageFrameGeneratorTest.cpp:
        (WebCore::ImageFrameGeneratorTest::SetUp):
        (WebCore::ImageFrameGeneratorTest::decoderBeingDestroyed):
        (ImageFrameGeneratorTest):
        (WebCore::MockImageDecoderFactory::create):
        (WebCore::TEST_F):
        (WebCore):
        (WebCore::decodeThreadMain):
        * tests/MockImageDecoder.h:
        (WebCore::MockImageDecoder::create):
        (MockImageDecoder):
        (WebCore::MockImageDecoder::setSize):
        (WebCore::MockImageDecoder::frameBufferAtIndex):

2012-12-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r136993.
        http://trac.webkit.org/changeset/136993
        https://bugs.webkit.org/show_bug.cgi?id=104415

        This patch breaks the mac build (Requested by cabanier on
        #webkit).

        * tests/DragImageTest.cpp:
        (WebCore::TestImage::draw):
        * tests/ImageLayerChromiumTest.cpp:
        (WebCore::TestImage::draw):

2012-12-07  Rik Cabanier  <cabanier@adobe.com>

        Extend platform layer so it can pass blend modes to the compositing calls
        https://bugs.webkit.org/show_bug.cgi?id=104176

        Reviewed by Dirk Schulze.

        Adding blend mode enumeration to draw functions 

        * tests/DragImageTest.cpp:
        (WebCore::TestImage::draw):
        * tests/ImageLayerChromiumTest.cpp:
        (WebCore::TestImage::draw):

2012-12-07  Alec Flett  <alecflett@chromium.org>

        IndexedDB: propagate transaction_ids through open/upgradeneeded
        https://bugs.webkit.org/show_bug.cgi?id=103922

        Reviewed by Tony Chang.

        Update test to account for pre-generated transaction ids.

        * tests/IDBDatabaseBackendTest.cpp:

2012-12-07  Scott Violet  <sky@chromium.org>

        [chromium] Remove linux theme related files and switch to default
        https://bugs.webkit.org/show_bug.cgi?id=103897

        Reviewed by Dimitri Glazkov.

        Linux theme related files are now named Default.

        * WebKit.gyp:
        * public/linux/WebRenderTheme.h: Removed.
        * public/platform/linux/WebThemeEngine.h: Removed.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setScrollbarColors): Cleanup ifdefs.
        (WebKit::WebViewImpl::setSelectionColors): Cleanup ifdefs.
        * src/linux/WebRenderTheme.cpp: Removed.

2012-12-07  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-12-07  Alexis Menard  <alexis@webkit.org>

        [Chromium] Enable CSS3 background-position offset by default.
        https://bugs.webkit.org/show_bug.cgi?id=104253

        Reviewed by Tony Chang.

        Turn on the feature by default.

        * features.gypi:

2012-12-07  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move WorkerContextProxy::create out of PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=104151

        Reviewed by Kentaro Hara.

        Doesn't really solve the layering violation as much as kick it
        down the road a bit. Part of a refactoring series; see tracking
        bug 82948.

        * WebKit.gyp:
        * src/PlatformSupport.cpp:
        (WebCore):
        * src/WorkerContextProxy.cpp: Added.
        (WebCore):
        (WebCore::WebCore::WorkerContextProxy::create):

2012-12-07  Ilya Tikhonovsky  <loislo@chromium.org>

        Unreviewed roll crhomium to r171707.

        * DEPS:

2012-12-07  Kent Tamura  <tkent@chromium.org>

        REGRESSION(r136631): Fix null pointer dereference in WebPagePopupImpl::paint
        https://bugs.webkit.org/show_bug.cgi?id=104350

        Reviewed by Hajime Morita.

        We changed WebPagePopupImpl so that it deleted m_page in
        closePopup. However, paint function is still called.

        * src/WebPagePopupImpl.cpp:
        (WebKit::WebPagePopupImpl::paint): Block by m_closing.

2012-12-06  Kent Tamura  <tkent@chromium.org>

        Refactoring: Clean up placeholder attribute usage
        https://bugs.webkit.org/show_bug.cgi?id=104337

        Reviewed by Kentaro Hara.

        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::setPlaceholder):
        Use setAttribute.
        (WebKit::WebInputElement::placeholder):
        Use fastGetAttribute.

2012-12-06  Sami Kyostila  <skyostil@chromium.org>

        [chromium] Introduce setting for low latency rendering
        https://bugs.webkit.org/show_bug.cgi?id=104011

        Reviewed by James Robinson.

        This low latency rendering setting will be used to enable alternate
        render signaling and scheduling to reduce latency.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setLowLatencyRenderingEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        (WebKit::WebSettingsImpl::lowLatencyRenderingEnabled):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2012-12-06  Kent Tamura  <tkent@chromium.org>

        [Chromium] Rename some init* functions to initialize*
        https://bugs.webkit.org/show_bug.cgi?id=104335

        Reviewed by Kentaro Hara.

        We should use full words.
        http://www.webkit.org/coding/coding-style.html#names-full-words

        * src/WebHelperPluginImpl.cpp:
        (WebKit::WebHelperPluginImpl::initialize): Renamed from init.
        (WebKit::WebHelperPluginImpl::initializePage): Renamed from initPage.
        * src/WebHelperPluginImpl.h:
        (WebHelperPluginImpl):
        * src/WebPagePopupImpl.cpp:
        (WebKit::WebPagePopupImpl::initialize): Renamed from init.
        (WebKit::WebPagePopupImpl::initializePage): Renamed from initPage.
        * src/WebPagePopupImpl.h:
        (WebPagePopupImpl):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::initialize): Renamed from init.
        * src/WebPopupMenuImpl.h:

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::openPagePopup): Follow the renamings.
        (WebKit::WebViewImpl::createHelperPlugin): Ditto.
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::popupOpened): Ditto.

2012-12-06  Rick Byers  <rbyers@chromium.org>

        CSS cursor property should support webkit-image-set
        https://bugs.webkit.org/show_bug.cgi?id=99493

        Reviewed by Beth Dakin.

        Add ENABLE_MOUSE_CURSOR_SCALE and enable it on the chromium port.
        Plumb cursor image scale factor through to chromium API.

        * features.gypi:
        * public/WebCursorInfo.h:
        * src/WebCursorInfo.cpp:
        (WebKit::WebCursorInfo::WebCursorInfo):

2012-12-06  James Simonsen  <simonjam@chromium.org>

        [Chromium] Enable Resource Timing and User Timing
        https://bugs.webkit.org/show_bug.cgi?id=103788

        Reviewed by Tony Gentilcore.

        * features.gypi:

2012-12-06  Jochen Eisinger  <jochen@chromium.org>

        [chromium] when forwarding events through the WebPluginContainer, create a UserGestureIndicator if processing a user gesture
        https://bugs.webkit.org/show_bug.cgi?id=104306

        Reviewed by Dimitri Glazkov.

        In http://trac.webkit.org/changeset/65964 a UserGestureIndicator was
        introduced in chromium's WebKit layer intended to fix a problem with
        plugins, however, it also affected regular event handling, so I removed
        it in http://trac.webkit.org/changeset/128273. Turns out it still is a
        problem for plugins. This change adds the UserGestureIndicator back,
        however, only for the WebPluginContainer.

        * public/WebInputEvent.h:
        (WebInputEvent):
        (WebKit::WebInputEvent::isUserGestureEventType):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleEvent):

2012-12-06  David Grogan  <dgrogan@chromium.org>

        IndexedDB: Abort transactions because of leveldb errors part 4
        https://bugs.webkit.org/show_bug.cgi?id=103964

        Reviewed by Tony Chang.

        * tests/IDBFakeBackingStore.h:
          Update one overridden method signature, delete another.

2012-12-06  Tony Chang  <tony@chromium.org>

        REGRESSION(r135082): Restore the ability to insert author level style sheets from script
        https://bugs.webkit.org/show_bug.cgi?id=104042

        Reviewed by Antti Koivisto.

        * src/WebDocument.cpp:
        (WebKit::WebDocument::insertUserStyleSheet): Use addAuthorSheet if an author level script is requested.

2012-12-06  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Add some null-checks for the touch-lists in TouchEvent
        https://bugs.webkit.org/show_bug.cgi?id=104098

        Reviewed by Adam Barth.

        It is possible for the touch-lists to be NULL in a TouchEvent. V8TouchEvent checks for NULL
        touches(), targetTouches() and changedTouches(). So do the same for WebMouseEventBuilder.

        * src/WebInputEventConversion.cpp:
        (WebKit::WebMouseEventBuilder::WebMouseEventBuilder):
        * tests/WebInputEventConversionTest.cpp:

2012-12-06  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Expose acceleratedCompositingForScrollableFramesEnabled in WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=104272

        We may need the API to enable compositing scrollable frames in Chromium.

        Reviewed by Darin Fisher.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setAcceleratedCompositingForScrollableFramesEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-12-06  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] Should apply link highlight to largest enclosing node with a handCursor.
        https://bugs.webkit.org/show_bug.cgi?id=104264

        Reviewed by Adrienne Walker.

        Link highlights sometimes only apply to part of a link, if we select an enclosed
        node (e.g. font changes in link text). The highlight should be applied to the
        largest enclosing node that still has handCursor set.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::bestTouchLinkNode):

2012-12-06  Tommy Widenflycht  <tommyw@google.com>

        Speech Recognition API: Change the error code to a string on SpeechRecognitionError
        https://bugs.webkit.org/show_bug.cgi?id=104254

        Reviewed by Adam Barth.

        Minor WebCore type changes.

        * src/AssertMatchingEnums.cpp:
        * src/SpeechRecognitionClientProxy.cpp:
        (WebKit::SpeechRecognitionClientProxy::didReceiveError):

2012-12-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r136784 and r136802.
        http://trac.webkit.org/changeset/136784
        http://trac.webkit.org/changeset/136802
        https://bugs.webkit.org/show_bug.cgi?id=104231

        breaks chromium canary (Requested by morrita on #webkit).

        * WebKit.gyp:
        * public/linux/WebRenderTheme.h: Added.
        (WebKit):
        * public/platform/linux/WebThemeEngine.h: Added.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setScrollbarColors):
        (WebKit::WebViewImpl::setSelectionColors):
        * src/linux/WebRenderTheme.cpp: Added.
        (WebKit):
        (WebKit::setCaretBlinkInterval):

2012-12-05  Takashi Sakamoto  <tasak@google.com>

        Add win8/* to Chromium DEPS (r171376)
        https://bugs.webkit.org/show_bug.cgi?id=104228

        Reviewed by Hajime Morita.

        Since updated chromium DEPS to r171376, now printing/printing.gyp
        requires win8/* for windows build.

        * DEPS:

2012-12-05  Takashi Sakamoto  <tasak@google.com>

        Unreviewed, WebKit gardening.

        * WebKit.gyp:
        Removed public/linux/WebRenderTheme.h. The file was removed.

2012-12-05  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-12-05  Greg Billock  <gbillock@google.com>

        Add runtime enable for web intents.
        https://bugs.webkit.org/show_bug.cgi?id=103669

        Reviewed by Adam Barth.

        Propagate runtime setting to enable/disable web intents Javascript API.

        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableWebIntents):
        (WebKit):
        (WebKit::WebRuntimeFeatures::isWebIntentsEnabled):

2012-12-05  Scott Violet  <sky@chromium.org>

        [chromium] Remove linux theme related files and switch to default
        https://bugs.webkit.org/show_bug.cgi?id=103897

        Reviewed by Tony Chang.

        Linux theme related files are now named Default.

        * WebKit.gyp:
        * public/linux/WebRenderTheme.h: Removed.
        * public/platform/linux/WebThemeEngine.h: Removed.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setScrollbarColors): Cleanup ifdefs.
        (WebKit::WebViewImpl::setSelectionColors): Cleanup ifdefs.
        * src/linux/WebRenderTheme.cpp: Removed.

2012-12-05  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Allow multiple transactions to interleave request execution
        https://bugs.webkit.org/show_bug.cgi?id=97570

        Reviewed by Tony Chang.

        Map to IDBTransaction::Mode enum as appropriate.

        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::createTransaction):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::createTransaction):
         * tests/IDBDatabaseBackendTest.cpp:

2012-12-05  Eberhard Graether  <egraether@google.com>

        [chromium] Remove WebLayerTreeView API to set font atlas
        https://bugs.webkit.org/show_bug.cgi?id=102960

        Reviewed by James Robinson.

        Removes old font atlas creation from WebViewImpl.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setShowFPSCounter):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit):
        * src/WebViewImpl.h:

2012-12-05  Stephen White  <senorblanco@chromium.org>

        Unreviewed, rolling out r136735.
        http://trac.webkit.org/changeset/136735
        https://bugs.webkit.org/show_bug.cgi?id=102699

        Broke Chrome/Win build.

        * src/PlatformSupport.cpp:
        (WebCore):
        (WebCore::PlatformSupport::paintButton):
        (WebCore::PlatformSupport::paintMenuList):
        (WebCore::PlatformSupport::paintScrollbarArrow):
        (WebCore::PlatformSupport::paintScrollbarThumb):
        (WebCore::PlatformSupport::paintScrollbarTrack):
        (WebCore::PlatformSupport::paintSpinButton):
        (WebCore::PlatformSupport::paintTextField):
        (WebCore::PlatformSupport::paintTrackbar):
        (WebCore::PlatformSupport::paintProgressBar):

2012-12-05  Stephen White  <senorblanco@chromium.org>

        Unreviewed, rolling out r136741.
        http://trac.webkit.org/changeset/136741
        https://bugs.webkit.org/show_bug.cgi?id=104151

        Broke Chrome/Win build.

        * WebKit.gyp:
        * src/PlatformSupport.cpp:
        (WebCore):
        (WebCore::WorkerContextProxy::create):
        * src/WorkerContextProxy.cpp: Removed.

2012-12-05  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move WorkerContextProxy::create out of PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=104151

        Reviewed by Adam Barth.

        Doesn't really solve the layering violation as much as kick it
        down the road a bit. Part of a refactoring series; see tracking
        bug 82948.

        * WebKit.gyp:
        * src/PlatformSupport.cpp:
        (WebCore):
        * src/WorkerContextProxy.cpp: Added.
        (WebCore):
        (WebCore::WebCore::WorkerContextProxy::create):

2012-12-05  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium][Win] Remove theme-related functions from PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=102699

        Reviewed by Adam Barth.

        Call theme engine directly instead of going through
        PlatformSupport. Part of a refactoring series. See tracking bug 82948.

        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::pluginScriptableObject):

2012-12-05  Stephen White  <senorblanco@chromium.org>

        Unreviewed, rolling out r136609.
        http://trac.webkit.org/changeset/136609
        https://bugs.webkit.org/show_bug.cgi?id=103793

        Breaking Chrome/Mac Debug builds.

        * WebKit.gyp:

2012-12-05  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Stub out transaction-backend methods
        https://bugs.webkit.org/show_bug.cgi?id=103921

        Reviewed by Dimitri Glazkov.

        Add new signatures for refactoring, to allow
        transaction_ids to make is through the open/onUpgradeNeeded
        loop.

        * public/WebIDBCallbacks.h:
        (WebKit::WebIDBCallbacks::onUpgradeNeeded):
        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::createTransaction):
        (WebKit::WebIDBDatabase::abort):
        (WebKit::WebIDBDatabase::commit):
        (WebIDBDatabase):
        * public/WebIDBDatabaseCallbacks.h:
        (WebIDBDatabaseCallbacks):
        (WebKit::WebIDBDatabaseCallbacks::onAbort):
        (WebKit::WebIDBDatabaseCallbacks::onComplete):
        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::open):
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::onUpgradeNeeded):
        (WebKit):
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::createTransaction):
        (WebKit):
        (WebKit::IDBDatabaseBackendProxy::commit):
        (WebKit::IDBDatabaseBackendProxy::abort):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/IDBDatabaseCallbacksProxy.cpp:
        (WebKit::IDBDatabaseCallbacksProxy::onAbort):
        (WebKit):
        (WebKit::IDBDatabaseCallbacksProxy::onComplete):
        * src/IDBDatabaseCallbacksProxy.h:
        (IDBDatabaseCallbacksProxy):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::open):
        (WebKit):
        * src/IDBFactoryBackendProxy.h:
        (IDBFactoryBackendProxy):
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onUpgradeNeeded):
        (WebKit):
        * src/WebIDBCallbacksImpl.h:
        (WebIDBCallbacksImpl):
        * src/WebIDBDatabaseCallbacksImpl.cpp:
        (WebKit::WebIDBDatabaseCallbacksImpl::onAbort):
        (WebKit):
        (WebKit::WebIDBDatabaseCallbacksImpl::onComplete):
        * src/WebIDBDatabaseCallbacksImpl.h:
        (WebIDBDatabaseCallbacksImpl):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::createTransaction):
        (WebKit):
        (WebKit::WebIDBDatabaseImpl::abort):
        (WebKit::WebIDBDatabaseImpl::commit):
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):
        (WebKit):
        * src/WebIDBFactoryImpl.h:
        (WebIDBFactoryImpl):
        * tests/IDBAbortOnCorruptTest.cpp:
        * tests/IDBDatabaseBackendTest.cpp:

2012-11-27  Alec Flett  <alecflett@chromium.org>

        IndexedDB: remove IDBDatabaseBackendInterface::transaction()
        https://bugs.webkit.org/show_bug.cgi?id=102733

        Reviewed by Darin Fisher.

        Part 3 of a refactor - just remove the proxy code for the now
        defunct transaction method.

        * public/WebIDBDatabase.h:
        * src/IDBDatabaseBackendProxy.cpp:
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * tests/IDBDatabaseBackendTest.cpp:

2012-12-05  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Replace use of ScriptExecutionContext::Task (Part 2)
        https://bugs.webkit.org/show_bug.cgi?id=103931

        Reviewed by Tony Chang.

        Now that IDBCallbacks uses real RefPtr<> a mock class needs to be heap allocated.

        * tests/IDBAbortOnCorruptTest.cpp:
        (WebCore::MockIDBCallbacks::create):
        (WebCore::MockIDBCallbacks::MockIDBCallbacks):
        (MockIDBCallbacks):
        (WebCore::TEST):

2012-12-05  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-12-05  Keishi Hattori  <keishi@webkit.org>

        Fix text direction in datalist popup for time controls
        https://bugs.webkit.org/show_bug.cgi?id=103853

        Reviewed by Kent Tamura.

        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::writeDocument): Renamed isCalendarRTL to isLocaleRTL.

2012-12-04  Kentaro Hara  <haraken@chromium.org>

        [V8] Remove toV8Object()
        https://bugs.webkit.org/show_bug.cgi?id=103987

        Reviewed by Adam Barth.

        toV8Object() is used only for MessagePort and ArrayBuffer
        only by SerializedScriptValue. It is wasteful to generate
        toV8Object() for all interfaces.

        No tests. No change in behavior.

        * src/WebArrayBuffer.cpp:
        (WebKit::WebArrayBuffer::toV8Value):
        * src/WebBlob.cpp:
        (WebKit::WebBlob::toV8Value):

2012-12-04  David Dorwin  <ddorwin@chromium.org>

        [Chromium] Detach the frame and destroy the page immediately upon request to closeHelperPlugin().
        https://bugs.webkit.org/show_bug.cgi?id=103947

        Reviewed by Kent Tamura.

        In the case that the host page is being destroyed, some of the objects
        the page depends on, specifically RenderViewImpl, may be destroyed by
        the time close() is called asynchronously.
        The frameDetached() calling code was originally copied from
        WebViewImpl::close(), but WebViewImpl does not have an asynchronous
        closing mechanism like the WebWidgets.

        This is the fix for http://crbug.com/160650

        * src/WebHelperPluginImpl.cpp:
        (WebKit::WebHelperPluginImpl::init):
        (WebKit::WebHelperPluginImpl::closeHelperPlugin):
        (WebKit::WebHelperPluginImpl::destoryPage):
        (WebKit):
        (WebKit::WebHelperPluginImpl::close):.
        (WebKit::WebHelperPlugin::create):
        * src/WebHelperPluginImpl.h:
        (WebHelperPluginImpl):
        * src/WebPagePopupImpl.cpp: Made similar changes since it follows the same model. (I think the way popups are closed has prevented the race condition from occurring for popups.)
        (WebKit::WebPagePopupImpl::destoryPage):
        (WebKit):
        (WebKit::WebPagePopupImpl::close):
        (WebKit::WebPagePopupImpl::closePopup):
        * src/WebPagePopupImpl.h:
        (WebPagePopupImpl):

2012-12-04  David Dorwin  <ddorwin@chromium.org>

        [Chromium] Removed obsolete local variable from WebViewImpl.cpp.
        https://bugs.webkit.org/show_bug.cgi?id=104050

        Reviewed by Kent Tamura.

        These lines were added with the file in 50739#L761 but the later use
        of this variable at L779 has since been removed.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::close):

2012-12-04  Alpha Lam  <hclam@chromium.org>

        [chromium] Implement cache eviction logic in ImageDecodingStore
        https://bugs.webkit.org/show_bug.cgi?id=103480

        Reviewed by James Robinson.

        Added ImageDecodingStoreTest for unit testing new image cache.

        New tests:

        ImageDecodingStoreTest.evictOneCache

        Test eviction of one cache entry by setting a smaller cache limit.

        ImageDecodingStoreTest.pruneOrderIsLeastRecentlyUsed

        Test eviction order is least recently used.

        ImageDecodingStoreTest.pruneCausedByInsertion

        Test that eviction is triggered also by cache insertion.

        ImageDecodingStoreTest.cacheInUseNotEvicted

        Test that cache in use is not evicted.

        ImageDecodingStoreTest.destroyImageFrameGenerator

        Test that deleting a ImageFrameGenerator causes associated cache
        entries to be removed.

        * WebKit.gypi:
        * tests/ImageDecodingStoreTest.cpp: Added.
        (WebCore):
        (ImageDecodingStoreTest):
        (WebCore::ImageDecodingStoreTest::SetUp):
        (WebCore::ImageDecodingStoreTest::TearDown):
        (WebCore::ImageDecodingStoreTest::createCompleteImage):
        (WebCore::ImageDecodingStoreTest::insertCache):
        (WebCore::ImageDecodingStoreTest::lockCache):
        (WebCore::ImageDecodingStoreTest::unlockCache):
        (WebCore::ImageDecodingStoreTest::evictOneCache):
        (WebCore::ImageDecodingStoreTest::isCacheAlive):
        (WebCore::TEST_F):

2012-12-04  Kenneth Russell  <kbr@google.com>

        Associate URLs with GraphicsContext3D instances created for WebGL
        https://bugs.webkit.org/show_bug.cgi?id=103793

        Reviewed by Adam Barth.

        * WebKit.gyp:
            Allow WebURL.h to be included directly or indirectly from Platform.h.

2012-12-04  Adam Barth  <abarth@webkit.org>

        [V8] Cleanup style in V8DOMWrapper
        https://bugs.webkit.org/show_bug.cgi?id=104062

        Reviewed by Kentaro Hara.

        * src/WebBindings.cpp:
        (WebKit::getRangeImpl):

2012-12-04  Stephen White  <senorblanco@chromium.org>

        [chromium] Turn on the new Skia mask blur algorithm.
        https://bugs.webkit.org/show_bug.cgi?id=103906

        Reviewed by Adrienne Walker.

        * skia_webkit.gyp:

2012-12-04  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-12-04  David Grogan  <dgrogan@chromium.org>

        IndexedDB: Propagate more leveldb errors to IDBIndex and IDBObjectStore
        https://bugs.webkit.org/show_bug.cgi?id=103782

        Reviewed by Tony Chang.

        * tests/IDBFakeBackingStore.h:
          Remove changed methods that are no longer necessary.

2012-12-04  Stephen White  <senorblanco@chromium.org>

        Rolled DEPS (w/Linux build fix).  Unreviewed.

        * DEPS:

2012-12-04  Stephen White  <senorblanco@chromium.org>

        Unreviewed, rolling out r136530.
        http://trac.webkit.org/changeset/136530

        Broke build.webkit.org linux build

        * DEPS:

2012-12-04  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-12-04  Eberhard Graether  <egraether@google.com>

        [chromium] fix showFPScounter and showPaintRects not toggleable after page change
        https://bugs.webkit.org/show_bug.cgi?id=103937

        Reviewed by Pavel Feldman.

        This change avoids updating the WebSettings and uses fields for showFPSCounter and
        showPaintRects in WebViewImpl instead, which hold the values between InspectorPageAgent::restore()
        and WebViewImpl::setIsAcceleratedCompositingActive().

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setShowFPSCounter):
        (WebKit::WebViewImpl::setShowPaintRects):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:

2012-12-04  Charlie Reis  <creis@chromium.org>

        Add FrameLoaderClient::didDisownOpener
        https://bugs.webkit.org/show_bug.cgi?id=103789

        Reviewed by Darin Fisher.

        Forwards the didDisownOpener notification to the WebFrameClient.

        * public/WebFrameClient.h:
        (WebFrameClient):
        (WebKit::WebFrameClient::didDisownOpener):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didDisownOpener):
        (WebKit):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2012-12-04  Stephen Chenney  <schenney@chromium.org>

        [chromium] Turn on the new Skia mask blur algorithm.
        https://bugs.webkit.org/show_bug.cgi?id=103906

        Unreviewed roll out.

        The previous patch was premature and is causing issues rolling skia deps and Chromium deps.

        * skia_webkit.gyp:

2012-12-03  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Correct database version after aborted upgrade
        https://bugs.webkit.org/show_bug.cgi?id=103763

        Reviewed by Tony Chang.

        Pass previously created proxy along in an open onSuccess, rather than a useless wrapper.

        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::WebIDBCallbacksImpl):
        (WebKit::WebIDBCallbacksImpl::onSuccess):
        (WebKit::WebIDBCallbacksImpl::onUpgradeNeeded):
        * src/WebIDBCallbacksImpl.h:
        (WebCore):
        (WebIDBCallbacksImpl):

2012-12-03  Rafael Weinstein  <rafaelw@chromium.org>

        Implement HTMLTemplateElement
        https://bugs.webkit.org/show_bug.cgi?id=86031

        Reviewed by Adam Barth.

        Turning on HTMLTemplateElement for chromium port.

        * features.gypi:

2012-12-03  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r136460.
        http://trac.webkit.org/changeset/136460
        https://bugs.webkit.org/show_bug.cgi?id=103958

        This patch caused compile error when building DumpRenderTree
        (Requested by tasak on #webkit).

        * WebKit.gyp:
        * public/linux/WebRenderTheme.h: Added.
        (WebKit):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setScrollbarColors):
        (WebKit::WebViewImpl::setSelectionColors):
        * src/linux/WebRenderTheme.cpp: Added.
        (WebKit):
        (WebKit::setCaretBlinkInterval):

2012-12-03  Scott Violet  <sky@chromium.org>

        [chromium] Remove linux theme related files and switch to default
        https://bugs.webkit.org/show_bug.cgi?id=103897

        Reviewed by Darin Fisher.

        linux theme related files are now named default. This removes
        linux files updates build files and removes ifdefs.

        * WebKit.gyp: update rules.
        * public/linux/WebRenderTheme.h: Removed.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setScrollbarColors): Update ifdefs
        (WebKit::WebViewImpl::setSelectionColors): Update ifdefs
        * src/linux/WebRenderTheme.cpp: Removed.

2012-12-03  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Expose removeAttribute in WebElement
        https://bugs.webkit.org/show_bug.cgi?id=103780

        Reviewed by Darin Fisher.

        * public/WebElement.h:
        (WebElement):
        * src/WebElement.cpp:
        (WebKit::WebElement::removeAttribute):
        (WebKit):

2012-12-03  Eugene Klyuchnikov  <eustas@chromium.org>

        Web Inspector: Make main-thread monitoring go through InspectorController
        https://bugs.webkit.org/show_bug.cgi?id=103550

        Reviewed by Pavel Feldman.

        InspectorInstrumentation was a wrong path.

        * src/InspectorClientImpl.cpp: Remove TaskObserver implementation, and
        listen/unlisten methods.
        * src/InspectorClientImpl.h: Ditto.
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::~WebDevToolsAgentImpl):
        Unsubscribe for main thread activity events.
        (WebKit::WebDevToolsAgentImpl::detach): Ditto.
        (WebKit::WebDevToolsAgentImpl::attach):
        Subscribe for main thread activity events.
        (WebKit::WebDevToolsAgentImpl::willProcessTask): Implement TasObserver
        interface. Froward to InspectorController.
        (WebKit::WebDevToolsAgentImpl::didProcessTask): Ditto.
        * src/WebDevToolsAgentImpl.h: Implement TasObserver interface.

2012-12-03  Alec Flett  <alecflett@chromium.org>

        IndexedDB: remove IDBDatabaseBackendInterface::transaction()
        https://bugs.webkit.org/show_bug.cgi?id=102733

        Reviewed by Darin Fisher.

        Part 3 of a refactor - just remove the proxy code for the now
        defunct transaction method.

        * public/WebIDBDatabase.h:
        * src/IDBDatabaseBackendProxy.cpp:
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * tests/IDBDatabaseBackendTest.cpp:

2012-12-03  Sami Kyostila  <skyostil@chromium.org>

        [chromium] Tell WebInputHandlerClient when end of input is reached for current vsync period
        https://bugs.webkit.org/show_bug.cgi?id=103648

        Reviewed by James Robinson.

        Let the WebInputHandlerClient know when we've received the final input event
        for the current vsync period.

        Test: WebCompositorInputHandlerImplTest.lastInputEventForVSync

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::handleInputEvent):

2012-12-03  Stephen White  <senorblanco@chromium.org>

        [chromium] Turn on the new Skia mask blur algorithm.
        https://bugs.webkit.org/show_bug.cgi?id=103906

        Reviewed by Adrienne Walker.

        * skia_webkit.gyp:

2012-12-03  Erik Arvidsson  <arv@chromium.org>

        [Chromium] Fix issue with hard coded error codes in quota error
        https://bugs.webkit.org/show_bug.cgi?id=103892

        Reviewed by Darin Fisher.

        Chromium currently hard codes the enum values for QuotaStatusCode. To fix
        this we need to do a few iteration of changes. This is the first step and
        it exposes the enums that Chromium depends on.

        * public/WebStorageQuotaError.h:

2012-12-03  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Rename exception enum members from UGLY_ERR to PrettyError
        https://bugs.webkit.org/show_bug.cgi?id=103759

        Reviewed by Darin Fisher.

        Update IDBDatabaseException enum names/values to match WebCore.

        * public/WebIDBDatabaseException.h:
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::allowIndexedDB):
        * tests/IDBRequestTest.cpp:

2012-12-03  Tommy Widenflycht  <tommyw@google.com>

        Speech Recognition API: Update SpeechRecognitionEvent to match the specification
        https://bugs.webkit.org/show_bug.cgi?id=103407

        Reviewed by Kentaro Hara.

        Adding the new didReceiveResults method.

        * public/WebSpeechRecognizerClient.h:
        * src/SpeechRecognitionClientProxy.cpp:
        (WebKit::SpeechRecognitionClientProxy::didReceiveResults):
        (WebKit):
        * src/SpeechRecognitionClientProxy.h:
        (SpeechRecognitionClientProxy):

2012-12-03  Sami Kyostila  <skyostil@chromium.org>

        [chromium] Mark last input event for current vsync interval
        https://bugs.webkit.org/show_bug.cgi?id=103647

        Reviewed by James Robinson.

        On Android all input events are triggered at the start of a vsync to maximize
        the amount of time an application has for painting. Add a field to
        WebInputEvent to indicate when the input event is the final one for the
        current vsync interval. This information will be used for more efficient
        render scheduling.

        * public/WebInputEvent.h:
        (WebKit::WebInputEvent::WebInputEvent):

2012-12-02  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Correct the location of synthetic mouse events when page is zoomed
        https://bugs.webkit.org/show_bug.cgi?id=103823

        Reviewed by Adam Barth.

        The event-location conversion function expects absolute locations. Change the
        function name to reflect that, and use the absolute location of the touch-points
        when converting from touch events.

        * src/WebInputEventConversion.cpp:
        (WebKit::convertAbsoluteLocationForRenderObject):
        (WebKit::updateWebMouseEventFromWebCoreMouseEvent):
        (WebKit::WebMouseEventBuilder::WebMouseEventBuilder):
        (WebKit::addTouchPoints):
        (WebKit::WebGestureEventBuilder::WebGestureEventBuilder):

2012-12-02  Miguel Garcia  <miguelg@chromium.org>

        [Chromium] Create an enum for the kind of date input and use that on WebDateTimeChooserParams instead of a bare WebString
        https://bugs.webkit.org/show_bug.cgi?id=103746

        Reviewed by Kent Tamura.

        Using an enum makes the chromium part much simpler and prevents makes sure that new items are added explicitly.

        * WebKit.gyp:
        * public/WebDateTimeChooserParams.h:
        (WebDateTimeChooserParams):
        * public/WebDateTimeInputType.h: Copied from Source/WebKit/chromium/public/WebTextInputType.h.
        (WebKit):
        * public/WebTextInputType.h:
        * public/WebViewClient.h:
        (WebViewClient):
        * src/ExternalDateTimeChooser.cpp:
        (WebKit::ExternalDateTimeChooser::openDateTimeChooser):
        (WebKit::ExternalDateTimeChooser::webType):
        (WebKit):
        * src/ExternalDateTimeChooser.h:
        (ExternalDateTimeChooser):

2012-12-02  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] make sourceDevice available to more WebGestureEvent subtypes
        https://bugs.webkit.org/show_bug.cgi?id=103551

        Reviewed by James Robinson.

        Added an additional data payload to WebGestureEvent that can
        contain the source device (touchpad or touchscreen).

        * public/WebInputEvent.h:
        * src/WebInputEvent.cpp:
        (SameSizeAsWebGestureEvent):

2012-12-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r136236.
        http://trac.webkit.org/changeset/136236
        https://bugs.webkit.org/show_bug.cgi?id=103833

        [chromium] Flakey crashes in SpeechRecognitionEvent::emma
        during GC. (Requested by mkwst on #webkit).

        * public/WebSpeechRecognizerClient.h:
        * src/SpeechRecognitionClientProxy.cpp:
        * src/SpeechRecognitionClientProxy.h:
        (SpeechRecognitionClientProxy):

2012-11-30  Mike West  <mkwst@chromium.org>

        CSP 1.1: Make the CSP_NEXT flag runtime enabled.
        https://bugs.webkit.org/show_bug.cgi?id=103652

        Reviewed by Adam Barth.

        The CSP_NEXT flag continues to be enabled on the Chromium port, but this
        patch now locks the features away behind the securityPolicy runtime
        flag.

        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableExperimentalContentSecurityPolicyFeatures):
        (WebKit):
        (WebKit::WebRuntimeFeatures::isExperimentalContentSecurityPolicyFeaturesEnabled):
            Adds the feature to WebRuntimeFeatures so it can be toggled from
            inside Chromium.

2012-11-30  Stephen White  <senorblanco@chromium.org>

        [Chromium] Suppress the new separable mask blurs in skia until the tests can be rebaselined.
        https://bugs.webkit.org/show_bug.cgi?id=103766

        Unreviewed.

        * skia_webkit.gyp:

2012-11-30  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-29  Tommy Widenflycht  <tommyw@google.com>

        Speech Recognition API: Update SpeechRecognitionEvent to match the specification
        https://bugs.webkit.org/show_bug.cgi?id=103407

        Reviewed by Adam Barth.

        Adding the new didReceiveResults method.

        * public/WebSpeechRecognizerClient.h:
        * src/SpeechRecognitionClientProxy.cpp:
        (WebKit::SpeechRecognitionClientProxy::didReceiveResults):
        (WebKit):
        * src/SpeechRecognitionClientProxy.h:
        (SpeechRecognitionClientProxy):

2012-11-30  Keishi Hattori  <keishi@webkit.org>

        [Chromium] Page popup doesn't change mouse cursor
        https://bugs.webkit.org/show_bug.cgi?id=97454

        Reviewed by Kent Tamura.

        The mouse cursor should change based on the page popup content and not the main window content.
        On Mac the mousemove event propagates to both the page popup and main window causing the cursor to flicker.
        The change to ChromeClientImpl stops that.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::setCursor): On Mac, don't update the mouse cursor if a popup is open.
        * src/WebPagePopupImpl.cpp: Implement setCursor so the mouse cursor gets set based on the page popup content.

2012-11-30  Mihai Maerean  <mmaerean@adobe.com>

        [CSSRegions] when WebKit uses V8, there should be a single variable to store if the CSS Regions feature is enabled
        https://bugs.webkit.org/show_bug.cgi?id=101192

        Reviewed by Hajime Morita.

        Removed the CSS Regions flag in Settings and switched to using the new flag I have added in RuntimeEnabledFeatures.

        Tests: No new tests because there is no functional change.

        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * public/WebSettings.h: moved setExperimentalCSSRegionsEnabled to the bottom of the interface and made it a
        no-op.  After this patch lands and Chromium's webkit_rev is increased, we'll remove any callers in Chromium. Once
        the Chromium callers are gone and WebKit's chromium_rev is increased, we'll remove the deprecated API.
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableCSSRegions):
        (WebKit):
        (WebKit::WebRuntimeFeatures::isCSSRegionsEnabled):
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-11-29  Rafael Weinstein  <rafaelw@chromium.org>

        [HTMLTemplateElement] Add feature flag
        https://bugs.webkit.org/show_bug.cgi?id=103694

        Reviewed by Adam Barth.

        This flag will guard the implementation of the HTMLTemplateElement.
        http://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/templates/index.html


        * features.gypi:

2012-11-29  David Grogan  <dgrogan@chromium.org>

        IndexedDB: Propagate more leveldb errors to script
        https://bugs.webkit.org/show_bug.cgi?id=103580

        Reviewed by Tony Chang.

        * tests/IDBFakeBackingStore.h:
         Update method signatures.

2012-11-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r136171.
        http://trac.webkit.org/changeset/136171
        https://bugs.webkit.org/show_bug.cgi?id=103695

        Likely caused ReOpenedWithID and ReOpenedWithURL to fail in
        linux/chromeos (Requested by zhenyao on #webkit).

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::startMainThreadMonitoring):
        (WebKit):
        (WebKit::InspectorClientImpl::stopMainThreadMonitoring):
        (WebKit::InspectorClientImpl::willProcessTask):
        (WebKit::InspectorClientImpl::didProcessTask):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::attach):
        (WebKit::WebDevToolsAgentImpl::detach):
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2012-11-29  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Remove deprecated API since it is no longer used
        https://bugs.webkit.org/show_bug.cgi?id=103570

        Reviewed by Adam Barth.

        Remove WebPluginContainer::setIsAcceptingTouchEvents, since this is not used anymore,
        in favour of WebPluginContainer::requestTouchEventType.

        * public/WebPluginContainer.h:
        (WebPluginContainer):
        * src/WebPluginContainerImpl.cpp:
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):

2012-11-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-29  Eugene Klyuchnikov  <eustas@chromium.org>

        Web Inspector: Make main-thread monitoring go through InspectorController.
        https://bugs.webkit.org/show_bug.cgi?id=103550

        Reviewed by Pavel Feldman.

        InspectorInstrumentation was a wrong path

        * src/InspectorClientImpl.cpp: Remove TaskObserver implementation, and
        listen/unlisten methods.
        * src/InspectorClientImpl.h: Ditto.
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::attach):
        Subscribe for main thread activity events.
        (WebKit::WebDevToolsAgentImpl::detach):
        Unsubscribe for main thread activity events.
        (WebKit::WebDevToolsAgentImpl::willProcessTask): Implement TaskObserver
        interface. Froward to InspectorController.
        (WebKit::WebDevToolsAgentImpl::didProcessTask): Ditto.
        * src/WebDevToolsAgentImpl.h: Implement TaskObserver interface.

2012-11-29  Stephen Chenney  <schenney@chromium.org>

        [Chromium] Add code supppression flags for skia

        Unreviewed addition of Skia build flags to allow for their removal from Chromium's skia.gyp.

        * skia_webkit.gyp: Added defines for SK_DISABLE_DITHER_32BIT_GRADIENT and SK_DISABLE_DASHING_OPTIMIZATION

2012-11-29  Florin Malita  <fmalita@chromium.org>

        [Skia] Add missing OpaqueRegionSkia notifier calls
        https://bugs.webkit.org/show_bug.cgi?id=102824

        Reviewed by Stephen White.

        Add opaque region tracking unit tests for the new PlatformContextSkia draw methods.

        * tests/PlatformContextSkiaTest.cpp:
        (WebCore::TEST):
        (WebCore):

2012-11-29  Miguel Garcia  <miguelg@chromium.org>

        Fix typo in description of openDateTimeChooser documentation
        https://bugs.webkit.org/show_bug.cgi?id=103622

        Reviewed by Kent Tamura.


        * public/WebViewClient.h:
        (WebViewClient):

2012-11-28  Robert Kroeger  <rjkroege@chromium.org>

        remove unused PlatformGestureCurve code
        https://bugs.webkit.org/show_bug.cgi?id=103296

        Reviewed by Adam Barth.

        Previous CLs have made the Chromium embedder provide gesture fling
        curve implementation to WebKit. Consequently no platform uses the
        gestural fling code currently found in WebKit. This CL removes this code.

        Code removal only: covered by existing tests.

        * WebKit.gypi:
        * tests/PlatformGestureCurveTest.cpp: Removed.

2012-11-28  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove pluginsScriptableObject from PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=103542

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * src/PlatformSupport.cpp:
        (WebCore):
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):

2012-11-28  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium][Win] Remove ensureFontLoaded from PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=97696

        Reviewed by Adam Barth.

        Move ensureFontLoaded() from PlatformSupport to
        FontPlatformDataChromiumWin. Part of a refactoring series; see
        tracking bug 82948.

        * src/PlatformSupport.cpp:
        (WebCore):

2012-11-28  Eric Uhrhane  <ericu@chromium.org>

        [chromium] Add unit tests for ChromeClientImpl::getNavigationPolicy
        https://bugs.webkit.org/show_bug.cgi?id=102424

        Reviewed by Adam Barth.

        This tests a bunch of basic scenarios regarding what will produce a
        popup, a new foreground/background tab, or a new window.

        * WebKit.gypi: Added test file.
        * src/WebViewImpl.h:
        (WebViewImpl): Added friend declaration for setCurrentInputEventForTest.
        * tests/ChromeClientImplTest.cpp: Added.

2012-11-28  Alexandre Elias  <aelias@chromium.org>

        [chromium] Handle pinch correctly in slow-scrolling area
        https://bugs.webkit.org/show_bug.cgi?id=102740

        Reviewed by James Robinson.

        With the nonmodal gesture event model, pinch zoom gestures involve
        interleaved pinch and scroll events. This caused a bug on slow-scroll
        areas: the scroll events were sent to the main thread and
        the pinch events were handled in the impl thread.

        This patch makes it so that scroll events are always handled in the impl
        thread if a pinch is active.

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::WebCompositorInputHandlerImpl):
        (WebKit::WebCompositorInputHandlerImpl::handleInputEventInternal):
        * src/WebCompositorInputHandlerImpl.h:
        * tests/WebCompositorInputHandlerImplTest.cpp:
        (WebKit::TEST_F):
        (WebKit):

2012-11-28  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Allow plugins to opt-in to receive synthetic mouse events out of touch events.
        https://bugs.webkit.org/show_bug.cgi?id=103092

        Reviewed by Tony Chang.

        A plugin can now request to receive raw touch events, or to receive mouse events synthesized
        from the touch events, or to not receive any touch events at all.

        * public/WebPluginContainer.h:
        (WebPluginContainer):
        * src/WebInputEventConversion.cpp:
        (WebKit::updateWebMouseEventFromWebCoreMouseEvent):
        (WebKit::WebMouseEventBuilder::WebMouseEventBuilder):
        (WebKit):
        * src/WebInputEventConversion.h:
        (WebMouseEventBuilder):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setIsAcceptingTouchEvents):
        (WebKit):
        (WebKit::WebPluginContainerImpl::requestTouchEventType):
        (WebKit::WebPluginContainerImpl::WebPluginContainerImpl):
        (WebKit::WebPluginContainerImpl::~WebPluginContainerImpl):
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):

2012-11-28  David Grogan  <dgrogan@chromium.org>

        IndexedDB: Remove setVersion from WK API
        https://bugs.webkit.org/show_bug.cgi?id=103456

        Reviewed by Darin Fisher.

        These are the last vestiges of this ancient API. The bulk of the
        removal was done in bug 94972.

        * public/WebIDBCallbacks.h:
        * public/WebIDBDatabase.h:

2012-11-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-27  James Simonsen  <simonjam@chromium.org>

        Consolidate FrameLoader::load() into one function taking a FrameLoadRequest
        https://bugs.webkit.org/show_bug.cgi?id=102151

        Reviewed by Adam Barth.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadRequest):
        (WebKit::WebFrameImpl::loadData):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::initializeLoader):

2012-11-27  Eberhard Graether  <egraether@google.com>

        [chromium] Add WebLayerTreeViewClient API to request font atlas
        https://bugs.webkit.org/show_bug.cgi?id=102958

        Reviewed by James Robinson.

        This change makes the font atlas creation accessible to the WebLayerTreeView.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::createFontAtlas):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-11-27  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Simplify transaction timers and event tracking
        https://bugs.webkit.org/show_bug.cgi?id=102984

        Reviewed by Tony Chang.

        Remove now-unused didCompleteTaskEvents() method.

        * src/IDBTransactionBackendProxy.cpp:
        * src/IDBTransactionBackendProxy.h:
        (IDBTransactionBackendProxy):
        * src/WebIDBTransactionImpl.cpp:
        * src/WebIDBTransactionImpl.h:

2012-11-27  Alpha Lam  <hclam@chromium.org>

        [chromium] Implement full-featured image cache
        https://bugs.webkit.org/show_bug.cgi?id=99784

        Reviewed by Stephen White.

        Added ImageFrameGeneratorTest to test cache logic and generation
        of new cache entries.

        ImageFrameGeneratorTest.cacheHit
        Test that a complete cached entry is reused.

        ImageFrameGeneratorTest.cacheMissWithScale
        Cache miss for a scaled image but cache hit on a full size image.
        Scaled image is created from cached full size image.

        ImageFrameGeneratorTest.cacheMissWithDecodeAndScale
        Cache miss for both scaled image and full size image.

        ImageFrameGeneratorTest.cacheMissWithIncompleteDecode
        Test the logic for handling incomplete cache objects.

        * WebKit.gypi:
        * src/WebKit.cpp:
        (WebKit::initializeWithoutV8):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setDeferredImageDecodingEnabled):
        * tests/DeferredImageDecoderTest.cpp:
        (WebCore::DeferredImageDecoderTest::SetUp):
        (WebCore::DeferredImageDecoderTest::decoderBeingDestroyed):
        (WebCore::DeferredImageDecoderTest::frameBufferRequested):
        (DeferredImageDecoderTest):
        (WebCore::DeferredImageDecoderTest::frameStatus):
        * tests/ImageFrameGeneratorTest.cpp: Added.
        (WebCore):
        (WebCore::fullSize):
        (WebCore::scaledSize):
        (MockImageDecoderFactory):
        (WebCore::MockImageDecoderFactory::create):
        (WebCore::MockImageDecoderFactory::MockImageDecoderFactory):
        (ImageFrameGeneratorTest):
        (WebCore::ImageFrameGeneratorTest::SetUp):
        (WebCore::ImageFrameGeneratorTest::TearDown):
        (WebCore::ImageFrameGeneratorTest::decoderBeingDestroyed):
        (WebCore::ImageFrameGeneratorTest::frameBufferRequested):
        (WebCore::ImageFrameGeneratorTest::frameStatus):
        (WebCore::ImageFrameGeneratorTest::createCompleteImage):
        (WebCore::ImageFrameGeneratorTest::setFrameStatus):
        (WebCore::TEST_F):
        * tests/MockImageDecoder.h:
        (MockImageDecoderClient):
        (WebCore::MockImageDecoder::frameBufferAtIndex):

2012-11-27  David Grogan  <dgrogan@chromium.org>

        IndexedDB: Remove IDBDatabase.setVersion API
        https://bugs.webkit.org/show_bug.cgi?id=94972

        Reviewed by Tony Chang.

        * src/IDBCallbacksProxy.cpp:
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):
        * src/IDBDatabaseBackendProxy.cpp:
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBCallbacksImpl.h:
        (WebIDBCallbacksImpl):
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):

2012-11-27  Eberhard Graether  <egraether@google.com>

        Plumbing showPaintRects out of InspectorPageAgent to use a different drawing implementation if available.
        https://bugs.webkit.org/show_bug.cgi?id=102452

        Reviewed by Pavel Feldman.

        This change makes the showPaintRects setting in the Web Inspector's settings notify InspectorClient
        when changed. And the default paint rects drawing is not used if an alternative is available.
        This allows Chromium to draw the paint rects in the compositor's HUDLayer.

        * public/WebView.h:
        (WebView):
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::overridesShowPaintRects):
        (WebKit):
        (WebKit::InspectorClientImpl::setShowPaintRects):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setShowPaintRects):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-11-27  Tony Chang  <tony@chromium.org>

        [chromium] Unreviewed build fix on Linux clang.

        ../../third_party/WebKit/Source/WebKit/chromium/src/FrameLoaderClientImpl.cpp:1055:63: error:
        C++98 requires an accessible copy constructor for class 'WebKit::WebCachedURLRequest' when binding
        a reference to a temporary; was private [-Werror,-Wbind-to-temporary-copy]

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchWillRequestResource):

2012-11-27  Marja Hölttä  <marja@chromium.org>

        Add callbacks to the FrameLoaderClient when a resource is requested
        https://bugs.webkit.org/show_bug.cgi?id=92761

        Reviewed by Adam Barth.

        In Chromium, when an extension script cancels a network
        request (which happens out of process), we'd like to
        notify content scripts running on the current page about
        which elements failed to load because the requests were
        cancelled (as opposed to e.g. the network request just
        didn't work). Since the resource request itself does not
        carry any information what DOM element is was made for,
        currently a content script has to search the DOM tree and
        guess which requests will be cancelled by its counter
        part. By adding these callbacks, the embedder can make
        this connection explictly.

        * WebKit.gyp:
        * public/WebCachedURLRequest.h: Added.
        (WebKit):
        (WebCachedURLRequest):
        (WebKit::WebCachedURLRequest::~WebCachedURLRequest):
        * public/WebFrameClient.h:
        (WebKit):
        (WebFrameClient):
        (WebKit::WebFrameClient::willRequestResource):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchWillRequestResource):
        (WebKit):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):
        * src/WebCachedURLRequest.cpp: Added.
        (WebKit):
        (WebKit::WebCachedURLRequest::reset):
        (WebKit::WebCachedURLRequest::urlRequest):
        (WebKit::WebCachedURLRequest::charset):
        (WebKit::WebCachedURLRequest::forPreload):
        (WebKit::WebCachedURLRequest::initiatorName):
        (WebKit::WebCachedURLRequest::initiatorElement):
        (WebKit::WebCachedURLRequest::WebCachedURLRequest):

2012-11-27  Keishi Hattori  <keishi@webkit.org>

        Add WebLocalizedString for validation type badinput
        https://bugs.webkit.org/show_bug.cgi?id=103381

        Reviewed by Kent Tamura.

        * src/LocalizedStrings.cpp:
        (WebCore::validationMessageBadInputForNumberText): Using the newly added WebLocalizedString enum.
        (WebCore::validationMessageBadInputForDateTimeText): Ditto.

2012-11-27  Alec Flett  <alecflett@chromium.org>

        IndexedDB: stub out IDBDatabaseBackendInterface::createTransaction
        https://bugs.webkit.org/show_bug.cgi?id=102730

        Reviewed by Darin Fisher.

        Add support for new createTransaction() method in both sides
        of the WebKit API.

        * public/WebIDBDatabase.h:
        (WebIDBDatabase):
        (WebKit::WebIDBDatabase::createTransaction):
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit):
        (WebKit::IDBDatabaseBackendProxy::createTransaction):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::createTransaction):
        (WebKit):
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):

2012-11-27  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r135786.
        http://trac.webkit.org/changeset/135786
        https://bugs.webkit.org/show_bug.cgi?id=103379

        It made 3 plugin tests timeout on several platforms (Requested
        by Ossy on #webkit).

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadRequest):
        (WebKit::WebFrameImpl::loadData):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::initializeLoader):

2012-11-25  Kent Tamura  <tkent@chromium.org>

        Implement ValidityState::badInput
        https://bugs.webkit.org/show_bug.cgi?id=102861

        Reviewed by Hajime Morita.

        * src/LocalizedStrings.cpp:
        Add placeholder implementations for new localized string functions.
        We'll update them in another patch.
        (WebCore::validationMessageBadInputForNumberText):
        (WebCore::validationMessageBadInputForDateTimeText):

2012-11-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r135798.
        http://trac.webkit.org/changeset/135798
        https://bugs.webkit.org/show_bug.cgi?id=103354

        Broke the chrome mac build (Requested by noel_ on #webkit).

        * WebKit.gypi:
        * src/WebKit.cpp:
        (WebKit::initializeWithoutV8):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setDeferredImageDecodingEnabled):
        * tests/DeferredImageDecoderTest.cpp:
        (WebCore::DeferredImageDecoderTest::SetUp):
        (WebCore::DeferredImageDecoderTest::decoderBeingDestroyed):
        * tests/ImageFrameGeneratorTest.cpp: Removed.
        * tests/MockImageDecoder.h:
        (MockImageDecoderClient):
        (WebCore::MockImageDecoder::frameBufferAtIndex):

2012-11-26  Alexandre Elias  <aelias@chromium.org>

        [chromium] Touchscreen fling handling
        https://bugs.webkit.org/show_bug.cgi?id=103278

        Reviewed by James Robinson.

        The fling logic for touchpad can fall through to bad
        performance in several ways. This patch introduces an alternate
        path for touchscreen fling that simplifies it as follows:

        - Stop generating wheel events, to prevent unnecessary scrollBegin hit
        tests and to avoid falling back to slow path if a wheel handler is
        registered.

        - Drop the event on ScrollStatusIgnored. There's no real reason to
        send the event to the WebKit thread here.

        - Don't call transferActiveWheelFlingAnimation. This type of
        transition shouldn't be needed with touchscreen flings.

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::handleGestureFling):
        (WebKit::WebCompositorInputHandlerImpl::animate):
        (WebKit::WebCompositorInputHandlerImpl::cancelCurrentFling):
        (WebKit::WebCompositorInputHandlerImpl::scrollBy):
        * src/WebCompositorInputHandlerImpl.h:

2012-11-26  Kentaro Hara  <haraken@chromium.org>

        [V8] Remove WorkerContextExecutionProxy.{h,cpp}
        https://bugs.webkit.org/show_bug.cgi?id=103325

        Reviewed by Adam Barth.

        Now WorkerContextExecutionProxy.{h,cpp} are empty.

        No tests. No change in behavior.

        * src/WebKit.cpp:
        * src/WebWorkerClientImpl.cpp:

2012-11-26  James Robinson  <jamesr@chromium.org>

        [chromium] Remove deprecated and unused WebGraphicsContext3D compositor binding calls
        https://bugs.webkit.org/show_bug.cgi?id=103322

        Reviewed by Adam Barth.

        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-11-26  Alpha Lam  <hclam@chromium.org>

        [chromium] Implement full-featured image cache
        https://bugs.webkit.org/show_bug.cgi?id=99784

        Reviewed by James Robinson.

        Added ImageFrameGeneratorTest to test cache logic and generation
        of new cache entries.

        ImageFrameGeneratorTest.cacheHit
        Test that a complete cached entry is reused.

        ImageFrameGeneratorTest.cacheMissWithScale
        Cache miss for a scaled image but cache hit on a full size image.
        Scaled image is created from cached full size image.

        ImageFrameGeneratorTest.cacheMissWithDecodeAndScale
        Cache miss for both scaled image and full size image.

        ImageFrameGeneratorTest.cacheMissWithIncompleteDecode
        Test the logic for handling incomplete cache objects.

        * WebKit.gypi:
        * src/WebKit.cpp:
        (WebKit::initializeWithoutV8):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setDeferredImageDecodingEnabled):
        * tests/DeferredImageDecoderTest.cpp:
        (WebCore::DeferredImageDecoderTest::SetUp):
        (WebCore::DeferredImageDecoderTest::decoderBeingDestroyed):
        (WebCore::DeferredImageDecoderTest::frameBufferRequested):
        (DeferredImageDecoderTest):
        (WebCore::DeferredImageDecoderTest::frameStatus):
        * tests/ImageFrameGeneratorTest.cpp: Added.
        (WebCore):
        (WebCore::fullSize):
        (WebCore::scaledSize):
        (MockImageDecoderFactory):
        (WebCore::MockImageDecoderFactory::create):
        (WebCore::MockImageDecoderFactory::MockImageDecoderFactory):
        (ImageFrameGeneratorTest):
        (WebCore::ImageFrameGeneratorTest::SetUp):
        (WebCore::ImageFrameGeneratorTest::TearDown):
        (WebCore::ImageFrameGeneratorTest::decoderBeingDestroyed):
        (WebCore::ImageFrameGeneratorTest::frameBufferRequested):
        (WebCore::ImageFrameGeneratorTest::frameStatus):
        (WebCore::ImageFrameGeneratorTest::createCompleteImage):
        (WebCore::ImageFrameGeneratorTest::setFrameStatus):
        (WebCore::TEST_F):
        * tests/MockImageDecoder.h:
        (MockImageDecoderClient):
        (WebCore::MockImageDecoder::frameBufferAtIndex):

2012-11-26  Varun Jain  <varunjain@chromium.org>

        LongPress and LongTap gestures should start drag/drop and open context menu respectively.
        https://bugs.webkit.org/show_bug.cgi?id=101545

        Reviewed by Antonio Gomes.

        For LongPress, we simulate drag by sending a mouse down and mouse drag
        events. If a drag is not started (because maybe there is no draggable
        element), then we show context menu instead (which is the current
        behavior for LongPress). For LongTap, we use the existing functions that
        LongPress uses to summon the context menu. LongPress initiated drag and
        drop can be enabled/disabled by the platform using the Setting
        touchDragDropEnabled which is disabled by default.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setTouchDragDropEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-11-26  Yusuf Ozuysal  <yusufo@google.com>

        Add hasTouchEventhandlersAt to WebView API
        https://bugs.webkit.org/show_bug.cgi?id=102541

        Reviewed by James Robinson.

        Adds hasTouchEventHandlersAt to WebWidget API to check for touch event handlers at a
        given point. This will be used to distinguish between events not processed by
        touch event handlers and event not hitting any touch event handlers. Both are
        returning the same ACK message currently. Default implementation returns true to
        continue the same behavior as we currently have.

        * public/WebWidget.h:
        (WebWidget):
        (WebKit::WebWidget::hasTouchEventHandlersAt):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::hasTouchEventHandlersAt):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-11-26  James Simonsen  <simonjam@chromium.org>

        Consolidate FrameLoader::load() into one function taking a FrameLoadRequest
        https://bugs.webkit.org/show_bug.cgi?id=102151

        Reviewed by Adam Barth.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadRequest):
        (WebKit::WebFrameImpl::loadData):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::initializeLoader):

2012-11-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r135743.
        http://trac.webkit.org/changeset/135743
        https://bugs.webkit.org/show_bug.cgi?id=103280

        Caused compile failure 'SK_DISABLE_DITHER_32BIT_GRADIENT'
        macro redefined (Requested by rjkroege on #webkit).

        * skia_webkit.gyp:

2012-11-26  Mike Reed  <reed@google.com>

        add SK_DISABLE_DITHER_32BIT_GRADIENT define, in preparation for rebaselining
        https://bugs.webkit.org/show_bug.cgi?id=103272

        Reviewed by NOBODY. Unreviewed.

        No behavior change, as this define already exists on the chrome side in SkUserConfig.h

        * skia_webkit.gyp:

2012-11-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r135735.
        http://trac.webkit.org/changeset/135735
        https://bugs.webkit.org/show_bug.cgi?id=103270

        Caused breakage across the Chromium tree. (Requested by
        rjkroege_ on #webkit).

        * skia_webkit.gyp:

2012-11-26  Mike Reed  <reed@google.com>

        add SK_DISABLE_DITHER_32BIT_GRADIENT define, in preparation for rebaselining
        https://bugs.webkit.org/show_bug.cgi?id=103269

        Reviewed by NOBODY. Unreviewed.

        No behavior change, as this define already exists on the chrome side in SkUserConfig.h

        * skia_webkit.gyp:

2012-11-26  Scott Violet  <sky@chromium.org>

        [chromium] Make use_default_render_theme compile the right set of files
        https://bugs.webkit.org/show_bug.cgi?id=102952

        Reviewed by Kent Tamura.

        * WebKit.gyp: Adds WebRenderTheme.* and updates rules as to when to compile them.
        * features.gypi: Removes use_default_render_theme default values as common.gypi sets them.
        * public/default: Added.
        * public/default/WebRenderTheme.h: Copy of linux/WebRenderTheme.h
        * src/default: Added.
        * src/default/WebRenderTheme.cpp: Copy of linux/WebRenderTheme.cpp

2012-11-24  Silvia Pfeiffer  <silviapf@chromium.org>

        [chromium] Remove traces of MediaControlRootElement
        https://bugs.webkit.org/show_bug.cgi?id=103174

        Reviewed by Adam Barth.

        Now that nothing is using MediaControlRootElement any more,
        we can remove the FIXME and MediaControlRootElement enum left
        over from bug 88871.

        * public/WebContextMenuData.h:

2012-11-23  Robert Kroeger  <rjkroege@chromium.org>

        Remove unused ScrollByPixelVelocity
        https://bugs.webkit.org/show_bug.cgi?id=102840

        Reviewed by Sam Weinig.

        Removed test for deleted code.

        * tests/ScrollAnimatorNoneTest.cpp:

2012-11-23  Alexis Menard  <alexis@webkit.org>

        [CSS3 Backgrounds and Borders] Implement new CSS3 background-position parsing.
        https://bugs.webkit.org/show_bug.cgi?id=102104

        Reviewed by Julien Chaffraix.

        Protect the new feature behind a feature flag.

        * features.gypi:

2012-11-23  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Fix Chromium Win compilation after r135580.
        https://bugs.webkit.org/show_bug.cgi?id=101772

        * tests/WebFrameTest.cpp:

2012-11-23  Sami Kyostila  <skyostil@chromium.org>

        [chromium] Remove WebScreenInfo.{horizontal,vertical}DPI
        https://bugs.webkit.org/show_bug.cgi?id=101772

        Reviewed by Adam Barth.

        Now that nothing is using WebScreenInfo.{horizontal,vertical}DPI we can simply
        remove them.

        * src/mac/WebScreenInfoFactory.mm:
        (WebKit::WebScreenInfoFactory::screenInfo):
        * src/win/WebScreenInfoFactory.cpp:
        (WebKit::WebScreenInfoFactory::screenInfo):
        * src/x11/WebScreenInfoFactory.cpp:
        (WebKit::WebScreenInfoFactory::screenInfo):

2012-11-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-22  Dana Jansens  <danakj@chromium.org>

        [chromium] Add OS!="ios" to guard for gcc_version in WebKit.gyp
        https://bugs.webkit.org/show_bug.cgi?id=103007

        Reviewed by Adam Barth.

        This matches the guards used in chromium's chrome/chrome_browser.gypi.

        * WebKit.gyp:

2012-11-22  Stephen Chenney  <schenney@chromium.org>

        [Chromium]: Removing gyp flags controlling Skia features.

        Unreviewed, pre-tested rendering changes that have been waiting for a chance to rebaseline tests.

        Enabled fixes for test rendering, and fast patsh for anti-aliased primitives.

        * skia_webkit.gyp:

2012-11-22  Dan Carney  <dcarney@google.com>

        IDBRequestTest needs a v8 context
        https://bugs.webkit.org/show_bug.cgi?id=102941

        Reviewed by Jochen Eisinger.

        Added v8 context to IDBRequestTest tests.

        * tests/IDBRequestTest.cpp:
        (IDBRequestTest):
        (WebKit::IDBRequestTest::IDBRequestTest):
        (WebKit::IDBRequestTest::context):
        (WebKit::IDBRequestTest::scriptExecutionContext):
        (WebKit):
        (WebKit::TEST_F):

2012-11-21  Tien-Ren Chen  <trchen@chromium.org>

        [chromium] Device scale factor should be no-op when applyDeviceScaleFactorInCompositor == 0
        https://bugs.webkit.org/show_bug.cgi?id=100061

        Reviewed by Adam Barth.

        On Android we're using a different pixel scaling implementation
        (WebCore::Settings::applyDefaultDeviceScaleFactorInCompositor() == 0) than other
        platforms. In this mode, we don't make use of device-independent pixels. Device
        scale factor is provided to WebKit and get merged into page scale factor. Other
        than that device scale factor should have no effects on rendering.

        * src/PageWidgetDelegate.cpp:
        (WebKit::PageWidgetDelegate::paint):
        * src/PageWidgetDelegate.h:
        * src/WebPagePopupImpl.cpp:
        (WebKit::WebPagePopupImpl::paint):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::shouldApplyDeviceScaleFactorInCompositor):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-11-21  Tien-Ren Chen  <trchen@chromium.org>

        Use m_webView->size() for viewport update
        https://bugs.webkit.org/show_bug.cgi?id=102764

        Reviewed by Adam Barth.

        m_webView->client()->windowRect() returns the outer rect of the browser
        window, which includes the decorations such as the title bar.
        We should use the size of the WebView for layout and rendering purpose.

        Existing tests are updated to work without windowRect().

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):
        * tests/WebFrameTest.cpp:

2012-11-21  Peter Beverloo  <peter@chromium.org>

        [Chromium] webkit_unit_tests should depend on forwarder2 for Android
        https://bugs.webkit.org/show_bug.cgi?id=102934

        Reviewed by Tony Chang.

        Running webkit_unit_tests and TestWebKitAPI in the WebKit tree will defer
        to the test runner used by Chromium, which in turn relies on forwarder2.
        forwarder2 will eventually be required by layout tests as well.

        * WebKitUnitTests.gyp:

2012-11-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r135409.
        http://trac.webkit.org/changeset/135409
        https://bugs.webkit.org/show_bug.cgi?id=102959

        This patch causes compiling error to Chromium build (Requested
        by jianli_ on #webkit).

        * tests/IDBRequestTest.cpp:
        (WebCore::TEST):

2012-11-21  Kevin Ellis  <kevers@chromium.org>

        [chromium] Add flag to enable/disable touch adjustment at runtime.
        https://bugs.webkit.org/show_bug.cgi?id=102534

        Reviewed by Antonio Gomes.

        Add setting for enabling or disabling touch adjustment.
        For touch adjustemnt to apply, the compile option must
        also be enabled.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setEnableTouchAdjustment):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-11-21  Dan Carney  <dcarney@google.com>

        IDBRequestTest needs a v8 context
        https://bugs.webkit.org/show_bug.cgi?id=102941

        Reviewed by Jochen Eisinger.

        Added v8 context to IDBRequestTest tests.

        * tests/IDBRequestTest.cpp:
        (IDBRequestTest):
        (WebKit::IDBRequestTest::IDBRequestTest):
        (WebKit::IDBRequestTest::context):
        (WebKit::IDBRequestTest::scriptExecutionContext):
        (WebKit):
        (WebKit::TEST_F):

2012-11-21  Peter Beverloo  <peter@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-21  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        Disambiguate innerNodeFramePoint and mainFramePoint
        https://bugs.webkit.org/show_bug.cgi?id=98139

        Reviewed by Julien Chaffraix.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::mouseDidMoveOverElement):
        * src/ContextMenuClientImpl.cpp:
        (WebKit::selectMisspelledWord):
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::characterIndexForPoint):

2012-11-21  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] Link highlight should display for at least 100ms, and fadeout on GestureTap/Longpress.
        https://bugs.webkit.org/show_bug.cgi?id=102823

        Reviewed by Adrienne Walker.

        Link highlights sometimes disappear so quickly they barely display. Modify
        so that the highlight is displayed for minimum 100ms before fading out, and
        also fadeout (as opposed to abrupt clear) on GestureTap and GestureLongPress.

        * src/LinkHighlight.cpp:
        (WebKit::LinkHighlight::LinkHighlight):
        (WebKit::LinkHighlight::startHighlightAnimationIfNeeded): Check if min duration achieved, if not add time to fadeout animation.
        * src/LinkHighlight.h:
        (LinkHighlight):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent): Fadeout instead of clear on GestureTap and GestureLongPress.

2012-11-21  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Now that offending patch has been rolled out reenable IDBRequestTest.EventsAfterStopping
        https://bugs.webkit.org/show_bug.cgi?id=102929

        * tests/IDBRequestTest.cpp:
        (WebCore::TEST):

2012-11-21  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Disable failing test.
        https://bugs.webkit.org/show_bug.cgi?id=102929

        * tests/IDBRequestTest.cpp:
        (WebCore::TEST):

2012-11-21  Florin Malita  <fmalita@chromium.org>

        [Skia] Encapsulate access to PlatformContextSkia's SkCanvas
        https://bugs.webkit.org/show_bug.cgi?id=102694

        Reviewed by Stephen White.

        Use PlatformContextSkia's wrapper methods instead of accessing the canvas directly.

        * tests/TransparencyWinTest.cpp:
        (WebCore::getPixelAt):
        (WebCore::clearTopLayerAlphaChannel):
        (WebCore::clearTopLayerAlphaPixel):
        (WebCore::TEST):

2012-11-20  Rachel Blum  <groby@chromium.org>

        [Chromium] Need spellcheck suggestions even if continuous check is off.
        https://bugs.webkit.org/show_bug.cgi?id=102535

        Reviewed by Hajime Morita.

        Make sure the context menu always has suggestions for misspelled words.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):

2012-11-20  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Use embedder-supported gesture curves
        https://bugs.webkit.org/show_bug.cgi?id=100884

        Reviewed by James Robinson.

        Use embedder-provided gesture animation curves via WebKit api interfaces.
        Tested by existing tests.

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::handleGestureFling):
        (WebKit::WebCompositorInputHandlerImpl::scrollBy):
        * src/WebCompositorInputHandlerImpl.h:
        (WebCompositorInputHandlerImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollBy):
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::WebViewImpl::transferActiveWheelFlingAnimation):
        * src/WebViewImpl.h:
        (WebCore):
        (WebKit):
        (WebViewImpl):

2012-11-20  Tony Chang  <tony@chromium.org>

        When calling DocumentStyleSheetCollection::addUserSheet, pass in a user sheet
        https://bugs.webkit.org/show_bug.cgi?id=102835

        Reviewed by Ojan Vafai.

        After r135082, Chromium browser_tests were triggering the ASSERT in
        StyleResolver::collectRulesFromUserStyleSheets. Add an ASSERT that will
        trigger earlier and make it clear in the Chromium code that we're always
        inserting user level styles.

        * src/WebDocument.cpp:
        (WebKit::WebDocument::insertUserStyleSheet):

2012-11-20  Istiaque Ahmed  <lazyboy@chromium.org>

        Provide page/window coordinates to plugin's local coordinates translation in WebPluginContainer.
        https://bugs.webkit.org/show_bug.cgi?id=102339

        Reviewed by Adam Barth.

        This change will allow converting a page's window coordinates to plugins's local coordinates,
        taking CSS transformations into account. Embedder page of the plugin can use this information
        for targetting elements inside the plugin (e.g. devtools can inspect a specific element at the
        local coordinate position inside plugin).

        * WebKit.gyp:
        * WebKit.gypi:
        * public/WebNode.h:
        (WebKit):
        * public/WebPluginContainer.h:
        (WebKit):
        (WebPluginContainer):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::executeCommand):
        (WebKit::WebFrameImpl::printBegin):
        (WebKit::WebFrameImpl::isPrintScalingDisabledForPlugin):
        * src/WebNode.cpp:
        (WebKit::WebNode::pluginContainer):
        (WebKit):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::windowToLocalPoint):
        (WebKit):
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):
        * tests/FakeWebPlugin.cpp: Added.
        (WebKit):
        (WebKit::FakeWebPlugin::FakeWebPlugin):
        (WebKit::FakeWebPlugin::~FakeWebPlugin):
        (WebKit::FakeWebPlugin::initialize):
        (WebKit::FakeWebPlugin::destroy):
        * tests/FakeWebPlugin.h: Added.
        (WebKit):
        (FakeWebPlugin):
        * tests/WebPluginContainerTest.cpp: Added.
        (WebKit):
        (WebPluginContainerTest):
        (WebKit::WebPluginContainerTest::WebPluginContainerTest):
        (WebKit::WebPluginContainerTest::TearDown):
        (WebKit::getWebPluginContainer):
        (WebKit::TEST_F):
        * tests/data/plugin_container.html: Added.

2012-11-20  Alpha Lam  <hclam@chromium.org>

        [chromium] Make lazy image decoding thread-safe
        https://bugs.webkit.org/show_bug.cgi?id=102721

        Reviewed by Stephen White.

        Added a new unit test to verify that lazy image decoding operates
        correctly on non-main threads.

        * tests/DeferredImageDecoderTest.cpp:
        (Rasterizer):
        (WebCore):
        (WebCore::rasterizeMain):
        (WebCore::TEST_F):

2012-11-20  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r135295.
        http://trac.webkit.org/changeset/135295
        https://bugs.webkit.org/show_bug.cgi?id=102834

        This patch causes assertion to some layout tests on chromium
        (Requested by jianli on #webkit).

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadRequest):
        (WebKit::WebFrameImpl::loadData):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::initializeLoader):

2012-11-20  Eberhard Graether  <egraether@google.com>

        [Chromium] fix FPS counter disappearing when changing page
        https://bugs.webkit.org/show_bug.cgi?id=102532

        Reviewed by Pavel Feldman.

        When changing the page with opened WebInspector and active FPS counter the WebInspector is
        reloaded before the WebView switches to accelerated compositing, so the showFPSCounter call
        to WebLayerTreeView is not yet possible. This fix saves the showFPSCounter value in the
        WebSettings so it can be read when accelerated compositing is activated.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setShowFPSCounter):

2012-11-20  James Simonsen  <simonjam@chromium.org>

        Consolidate FrameLoader::load() into one function taking a FrameLoadRequest
        https://bugs.webkit.org/show_bug.cgi?id=102151

        Reviewed by Adam Barth.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadRequest):
        (WebKit::WebFrameImpl::loadData):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::initializeLoader):

2012-11-19  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Fix Chromium Win compilation after r135196.
        https://bugs.webkit.org/show_bug.cgi?id=102021

        * tests/DeferredImageDecoderTest.cpp: changed char to unsigned char in the array
        declaration to avoid 'warning C4309' on MSVS when initializing from hex literals.
        (WebCore):

2012-11-19  Miguel Garcia  <miguelg@chromium.org>

        [Chromium] Remove the dependency of INPUT_TYPE_COLOR on PAGE_POPUP
        https://bugs.webkit.org/show_bug.cgi?id=102525

        Reviewed by Kent Tamura.

        INPUT_TYPE_COLOR should not depend on PAGE_POPUP, with this change we allow platforms like android to implement the former without depending on the latter.

        Tested by compiling chromium with and without ENABLE_PAGE_POPUP and made sure that forms with input type color would load in both cases.

        * WebKit.gyp:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::createColorChooser):
        * src/ColorChooserUIController.cpp:
        (WebKit::ColorChooserUIController::ColorChooserUIController):
        (WebKit::ColorChooserUIController::openUI):
        (WebKit):
        (WebKit::ColorChooserUIController::endChooser):
        * src/ColorChooserUIController.h:
        (ColorChooserUIController):

2012-11-19  Alpha Lam  <hclam@chromium.org>

        [chromium] Lazy image decoding without cache
        https://bugs.webkit.org/show_bug.cgi?id=102021

        Reviewed by Stephen White.

        Updated two test cases using real image data.

        The tests demonstrates that original image decoder is not used and
        image is decoded lazily with correct pixel results.

        * tests/DeferredImageDecoderTest.cpp:
        (WebCore):
        (WebCore::DeferredImageDecoderTest::SetUp):
        (WebCore::DeferredImageDecoderTest::decoderBeingDestroyed):
        (DeferredImageDecoderTest):
        (WebCore::TEST_F):
        * tests/MockImageDecoder.h:
        (MockImageDecoderClient):
        (WebCore):
        (WebCore::MockImageDecoder::MockImageDecoder):
        (WebCore::MockImageDecoder::~MockImageDecoder):
        (MockImageDecoder):

2012-11-19  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r135180.
        http://trac.webkit.org/changeset/135180
        https://bugs.webkit.org/show_bug.cgi?id=102700

        breaks ui/compositor build (Requested by danakj on #webkit).

        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKit::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):

2012-11-19  Yusuke Sato  <yusukes@chromium.org>

        [Chromium] Flash cannot receive scroll events when threaded compositing is in use
        https://bugs.webkit.org/show_bug.cgi?id=101423

        Reviewed by James Robinson.

        Add setWantsWheelEvents() to Chromium's WebPluginContainer interface so that a plugin can tell the
        container that the plugin always wants to handle wheel events even when a scroll bar is not shown.

        * public/WebPluginContainer.h:
        (WebPluginContainer):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setWantsWheelEvents):
        (WebKit):
        (WebKit::WebPluginContainerImpl::wantsWheelEvents):
        (WebKit::WebPluginContainerImpl::WebPluginContainerImpl):
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):

2012-11-19  Alec Flett  <alecflett@chromium.org>

        IndexedDB: simplify RecordIdentifier
        https://bugs.webkit.org/show_bug.cgi?id=102018

        Reviewed by Tony Chang.

        Update IDBFakeBackingStore to match its parent class.

        * tests/IDBFakeBackingStore.h:

2012-11-19  Vincent Scheib  <scheib@chromium.org>

        [Chromium] Remove WebKit::WebRuntimeFeatures::enablePointerLock.
        https://bugs.webkit.org/show_bug.cgi?id=96946

        Reviewed by Adam Barth.

        The runtime flag functionality has already been removed.
        Now that Chromium no longer has a compile dependency on this
        API, it can be removed as well.

        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * src/WebRuntimeFeatures.cpp:

2012-11-19  Kihong Kwon  <kihong.kwon@samsung.com>

        Add PROXIMITY_EVENTS feature
        https://bugs.webkit.org/show_bug.cgi?id=102658

        Reviewed by Kentaro Hara.

        Add PROXIMITY_EVENTS feature to chromium port.

        * features.gypi:

2012-11-19  Sami Kyostila  <skyostil@chromium.org>

        [chromium] Use devicePixelRatio instead of screen DPI for computing viewport attributes
        https://bugs.webkit.org/show_bug.cgi?id=101767

        Reviewed by Adam Barth.

        Use the newly introduced device scale factor to calculate viewport properties
        instead of using the screen DPI. No functional changes, because Chromium
        platforms that have VIEWPORT enabled now also initialize the device scale
        factor accordingly.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):
        * tests/WebFrameTest.cpp:

2012-11-18  Kentaro Hara  <haraken@chromium.org>

        Unreviewed, rolling out r135047.
        http://trac.webkit.org/changeset/135047
        https://bugs.webkit.org/show_bug.cgi?id=102339

        it broke Chromium Windows/Mac build

        * WebKit.gyp:
        * WebKit.gypi:
        * public/WebNode.h:
        (WebKit):
        * public/WebPluginContainer.h:
        (WebKit):
        (WebPluginContainer):
        * src/WebFrameImpl.cpp:
        (WebKit::pluginContainerFromNode):
        (WebKit):
        (WebKit::WebFrameImpl::executeCommand):
        (WebKit::WebFrameImpl::printBegin):
        (WebKit::WebFrameImpl::isPrintScalingDisabledForPlugin):
        * src/WebNode.cpp:
        * src/WebPluginContainerImpl.cpp:
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):
        * tests/FakeWebPlugin.cpp: Removed.
        * tests/FakeWebPlugin.h: Removed.
        * tests/WebPluginContainerTest.cpp: Removed.
        * tests/data/plugin_container.html: Removed.

2012-11-18  Rick Byers  <rbyers@chromium.org>

        [chromium] add WebCursorInfo::imageScaleFactor
        https://bugs.webkit.org/show_bug.cgi?id=102612

        Reviewed by Adam Barth.

        Add cursor image scale factor (currently always 1) to chromium API, in preparation for
        high-dpi cursor support in bug 99493.

        * public/WebCursorInfo.h:
        (WebKit::WebCursorInfo::WebCursorInfo):
        * src/WebCursorInfo.cpp:
        (WebKit::WebCursorInfo::WebCursorInfo):

2012-11-17  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-17  Istiaque Ahmed  <lazyboy@chromium.org>

        Provide page/window coordinates to plugin's local coordinates translation in WebPluginContainer.
        https://bugs.webkit.org/show_bug.cgi?id=102339

        Reviewed by Adam Barth.

        This change will allow converting a page's window coordinates to plugins's local coordinates,
        taking CSS transformations into account. Embedder page of the plugin can use this information
        for targetting elements inside the plugin (e.g. devtools can inspect a specific element at the
        local coordinate position inside plugin).
        Attempting to re-land after Windows build fix.

        * WebKit.gyp:
        * WebKit.gypi:
        * public/WebNode.h:
        (WebKit):
        * public/WebPluginContainer.h:
        (WebKit):
        (WebPluginContainer):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::executeCommand):
        (WebKit::WebFrameImpl::printBegin):
        (WebKit::WebFrameImpl::isPrintScalingDisabledForPlugin):
        * src/WebNode.cpp:
        (WebKit::WebNode::pluginContainer):
        (WebKit):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::windowToLocalPoint):
        (WebKit):
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):
        * tests/FakeWebPlugin.cpp: Added.
        (WebKit):
        (WebKit::FakeWebPlugin::FakeWebPlugin):
        (WebKit::FakeWebPlugin::~FakeWebPlugin):
        (WebKit::FakeWebPlugin::initialize):
        (WebKit::FakeWebPlugin::destroy):
        * tests/FakeWebPlugin.h: Added.
        (WebKit):
        (FakeWebPlugin):
        * tests/WebPluginContainerTest.cpp: Added.
        (WebKit):
        (WebPluginContainerTest):
        (WebKit::WebPluginContainerTest::WebPluginContainerTest):
        (WebKit::WebPluginContainerTest::TearDown):
        (WebKit::getWebPluginContainer):
        (WebKit::TEST_F):
        * tests/data/plugin_container.html: Added.

2012-11-16  Raman Kumar  <ramankk@chromium.org>

        Add setChecked API in WebInputElement
        https://bugs.webkit.org/show_bug.cgi?id=102422

        Reviewed by Adam Barth.

        * public/WebInputElement.h:
        (WebInputElement): Add setChecked(bool, bool) API
        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::setChecked): Implement setChecked by calling
        underlying HTMLInputElement's setChecked.
        (WebKit):

2012-11-16  Tony Chang  <tony@chromium.org>

        Remove ENABLE_CSS_HIERARCHIES since it's no longer in use
        https://bugs.webkit.org/show_bug.cgi?id=102554

        Reviewed by Andreas Kling.

        As mentioned in https://bugs.webkit.org/show_bug.cgi?id=79939#c41 ,
        we're going to revist this feature once additional vendor support is
        achieved.

        * features.gypi:

2012-11-16  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove cookie-related functions from PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=99340

        Reviewed by Adam Barth.

        Move cookie-related functions out of PlatformSupport and implement
        new PlatformCookieJar interface via NetworkContext.

        * WebKit.gyp:
        * src/FrameNetworkingContextImpl.cpp: Added.
        (WebKit):
        (WebKit::FrameNetworkingContextImpl::cookieJar):
        * src/FrameNetworkingContextImpl.h:
        (FrameNetworkingContextImpl):
        * src/PlatformSupport.cpp:

2012-11-16  Tien-Ren Chen  <trchen@chromium.org>

        Rename applyDefaultDeviceScaleFactorInCompositor to setApplyDeviceScaleFactorInCompositor
        https://bugs.webkit.org/show_bug.cgi?id=102462

        Reviewed by James Robinson.

        As we no longer have this "default" device scale factor.

        * public/WebSettings.h:
        (WebKit::WebSettings::setApplyDefaultDeviceScaleFactorInCompositor):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setApplyDeviceScaleFactorInCompositor):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        (WebKit::WebSettingsImpl::applyDeviceScaleFactorInCompositor):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setDeviceScaleFactor):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2012-11-16  Jon Lee  <jonlee@apple.com>

        Fix build error on Chromium due to r134995.

        * src/WebNode.cpp:
        (WebKit::WebNode::simulateClick): Pass in NULL pointer instead.

2012-11-16  Michael Pruett  <michael@68k.org>

        IndexedDB: Propagate DOMRequestState to IndexedDB binding utility functions
        https://bugs.webkit.org/show_bug.cgi?id=102430

        Reviewed by Adam Barth.

        DOMRequestState is currently propagated to some but not all of
        the IndexedDB binding utility functions. In order to implement
        these functions for JSC, this state must be propagated to all
        of the utility functions.

        * tests/IDBBindingUtilitiesTest.cpp:
        (WebKit::checkKeyFromValueAndKeyPathInternal):
        (WebKit::injectKey):

2012-11-16  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Update RTCPeerConnection states to match the latest editors draft
        https://bugs.webkit.org/show_bug.cgi?id=102382

        Reviewed by Adam Barth.

        Updating readyState & iceState, and adding iceGatheringState.

        * src/AssertMatchingEnums.cpp:

2012-11-16  Dimitri Glazkov  <dglazkov@chromium.org>

        Unreviewed, rolling out r134973.
        http://trac.webkit.org/changeset/134973
        https://bugs.webkit.org/show_bug.cgi?id=99340

        Broke compile on at least Mac and Linux.

        * WebKit.gyp:
        * src/FrameNetworkingContextImpl.h:
        * src/PlatformSupport.cpp:
        (WebCore::getCookieJar):
        (WebCore):
        (WebCore::PlatformSupport::setCookies):
        (WebCore::PlatformSupport::cookies):
        (WebCore::PlatformSupport::cookieRequestHeaderFieldValue):
        (WebCore::PlatformSupport::rawCookies):
        (WebCore::PlatformSupport::deleteCookie):
        (WebCore::PlatformSupport::cookiesEnabled):

2012-11-16  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove cookie-related functions from PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=99340

        Reviewed by Adam Barth.

        Move cookie-related functions out of PlatformSupport and implement
        new PlatformCookieJar interface via NetworkContext.

        * WebKit.gyp:
        * src/FrameNetworkingContextImpl.cpp: Added.
        (WebKit):
        (WebKit::FrameNetworkingContextImpl::cookieJar):
        * src/FrameNetworkingContextImpl.h:
        (FrameNetworkingContextImpl):
        * src/PlatformSupport.cpp:

2012-11-16  Scott Violet  <sky@chromium.org>

        [chromium] Copy linux theme related files to default
        https://bugs.webkit.org/show_bug.cgi?id=102403

        Reviewed by Tony Chang

        Transitional patch that copies linux WebThemeEngine to default directory.

        No new tests, refactoring only.

        * features.gypi:
        * public/platform/default: Added.
        * public/platform/default/WebThemeEngine.h: Copied from Source/WebKit/chromium/public/platform/linux/WebThemeEngine.h.
        * src/PlatformSupport.cpp: Includes correct theme files when DEFAULT_RENDER_THEME is set.
        (WebCore):
        * src/WebViewImpl.cpp: Includes correct theme files when DEFAULT_RENDER_THEME is set.
        (WebKit::WebViewImpl::setScrollbarColors): Calls to default theme as necessary.
        (WebKit::WebViewImpl::setSelectionColors): Calls to default theme as necessary.

2012-11-16  Robert Flack  <flackr@chromium.org>

        Handle gesture events on scrollbars.
        https://bugs.webkit.org/show_bug.cgi?id=101516

        Reviewed by Antonio Gomes.

        Adds a gesture event handler to scrollbars and sends gestures beginning
        over a scrollbar to this handler to allow touch scrolling scrollbars.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):

2012-11-16  Peter Beverloo  <peter@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-15  Kentaro Hara  <haraken@chromium.org>

        Unreviewed, rolling out r134880.
        http://trac.webkit.org/changeset/134880
        https://bugs.webkit.org/show_bug.cgi?id=102339

        it broke Chromium Windows build

        * WebKit.gyp:
        * WebKit.gypi:
        * public/WebNode.h:
        (WebKit):
        * public/WebPluginContainer.h:
        (WebKit):
        (WebPluginContainer):
        * src/WebFrameImpl.cpp:
        (WebKit::pluginContainerFromNode):
        (WebKit):
        (WebKit::WebFrameImpl::executeCommand):
        (WebKit::WebFrameImpl::printBegin):
        (WebKit::WebFrameImpl::isPrintScalingDisabledForPlugin):
        * src/WebNode.cpp:
        * src/WebPluginContainerImpl.cpp:
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):
        * tests/FakeWebPlugin.cpp: Removed.
        * tests/FakeWebPlugin.h: Removed.
        * tests/WebPluginContainerTest.cpp: Removed.
        * tests/data/plugin_container.html: Removed.

2012-11-15  Istiaque Ahmed  <lazyboy@chromium.org>

        Provide page/window coordinates to plugin's local coordinates translation in WebPluginContainer.
        https://bugs.webkit.org/show_bug.cgi?id=102339

        Reviewed by Adam Barth.

        This change will allow converting a page's window coordinates to plugins's local coordinates,
        taking CSS transformations into account. Embedder page of the plugin can use this information
        for targetting elements inside the plugin (e.g. devtools can inspect a specific element at the
        local coordinate position inside plugin).

        * WebKit.gyp:
        * WebKit.gypi:
        * public/WebNode.h:
        (WebKit):
        * public/WebPluginContainer.h:
        (WebKit):
        (WebPluginContainer):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::executeCommand):
        (WebKit::WebFrameImpl::printBegin):
        (WebKit::WebFrameImpl::isPrintScalingDisabledForPlugin):
        * src/WebNode.cpp:
        (WebKit::WebNode::pluginContainer):
        (WebKit):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::windowToLocalPoint):
        (WebKit):
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):
        * tests/FakeWebPlugin.cpp: Added.
        (WebKit):
        (WebKit::FakeWebPlugin::FakeWebPlugin):
        (WebKit::FakeWebPlugin::~FakeWebPlugin):
        (WebKit::FakeWebPlugin::initialize):
        (WebKit::FakeWebPlugin::destroy):
        * tests/FakeWebPlugin.h: Added.
        (WebKit):
        (FakeWebPlugin):
        * tests/WebPluginContainerTest.cpp: Added.
        (WebKit):
        (WebPluginContainerTest):
        (WebKit::WebPluginContainerTest::WebPluginContainerTest):
        (WebKit::WebPluginContainerTest::TearDown):
        (WebKit::getWebPluginContainer):
        (WebKit::TEST_F):
        * tests/data/plugin_container.html: Added.

2012-11-15  Tien-Ren Chen  <trchen@chromium.org>

        Add Settings to disable custom scrollbars on main frame
        https://bugs.webkit.org/show_bug.cgi?id=102323

        Reviewed by Adam Barth.

        Custom scrollbars on main frame don't really work well on touch devices.
        Add a setting to inhibit their creation.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setAllowCustomScrollbarInMainFrame):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-11-15  Yue Zhang  <zysxqn@google.com>

        Ignore autocomplete=off for chrome generated passwords.
        https://bugs.webkit.org/show_bug.cgi?id=102426

        Reviewed by Adam Barth.

        Record the autocomplete attribute in the web password form data,
        so that we can handle autocomplete in chromium code. The
        motivation/background is: we should ignore autocomplete=off field
        for password forms with chrome generated passwords (has passed
        security review). By handling autocomplete in chromium code we can
        distinguish password forms with chrome generated passwords and
        those normal password forms. Note that we haven't turned off
        checking autocomplete=off in the Webkit code for now so there is
        no behavior change after this CL, and we will turn off after we
        make the chromium side change to be safe.

        * public/WebPasswordFormData.h:
        (WebPasswordFormData):
        * src/WebPasswordFormData.cpp:

2012-11-15  Scott Violet  <sky@chromium.org>

        [chromium] Create default directory so that cq can apply patch
        https://bugs.webkit.org/show_bug.cgi?id=102421

        Reviewed by Tony Chang.

        Done in hopes of patch that copies files to this directory working.

        * public/platform/default: Added.

2012-11-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r134800 and r134805.
        http://trac.webkit.org/changeset/134800
        http://trac.webkit.org/changeset/134805
        https://bugs.webkit.org/show_bug.cgi?id=102417

        This patch broke chromium port (Requested by jianli on
        #webkit).

        * src/AssertMatchingEnums.cpp:

2012-11-15  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Do not mark an event (mouse wheel, scroll update) as handled if nothing was scrolled.
        https://bugs.webkit.org/show_bug.cgi?id=102246

        Reviewed by James Robinson.

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::handleInputEventInternal):
        * tests/WebCompositorInputHandlerImplTest.cpp:
        (MockWebInputHandlerClient):
        (WebKit::TEST_F):

2012-11-15  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Update RTCPeerConnection states to match the latest editors draft
        https://bugs.webkit.org/show_bug.cgi?id=102382

        Reviewed by Adam Barth.

        Updating readyState & iceState, and adding iceGatheringState.

        * src/AssertMatchingEnums.cpp:

2012-11-15  Tien-Ren Chen  <trchen@chromium.org>

        Use correct unscaled document size when calculating scale limits
        https://bugs.webkit.org/show_bug.cgi?id=102028

        Reviewed by Adam Barth.

        Fixes bug http://crbug.com/160581
        Using contentsSize / pageScaleFactor as unscaled contents size results
        in rounding errors. This can cause scale factor to oscillate indefinitely.

        * src/WebViewImpl.cpp:
        (WebKit::unscaledContentsSize):
        (WebKit):
        (WebKit::WebViewImpl::computePageScaleFactorLimits):
        * tests/WebFrameTest.cpp:
        * tests/data/scale_oscillate.html: Added.

2012-11-15  Kenneth Russell  <kbr@google.com>

        [chromium] Move allowWebGL query to WebFrameClient
        https://bugs.webkit.org/show_bug.cgi?id=102319

        Reviewed by Adam Barth.

        Moved allowWebGL query to WebFrameClient to avoid polluting
        content/ API.

        * public/WebFrameClient.h:
        (WebFrameClient):
        (WebKit::WebFrameClient::allowWebGL):
        * public/WebPermissionClient.h:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowWebGL):

2012-11-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-15  Stephen Chenney  <schenney@chromium.org>

        [Chromium] Move SK_DISABLE_FAST_AA_STROKE_RECT to skia_webkit.gyp

        Unreviewed non-funtional, behavior-neutral change

        * skia_webkit.gyp: Add SK_DISABLE_FAST_AA_STROKE_RECT=1 so that it can be removed from Chromium's skia.gyp

2012-11-15  Stephen Chenney  <schenney@chromium.org>

        [Chromium] Disable SK_IGNORE_FAST_BLURRECT

        Unreviewed test update.

        This flag is enabled purely to simplify rebaselining. I am now
        removing it and doing the rebaslining.

        * skia_webkit.gyp: Remove the line for SK_IGNORE_FAST_BLURRECT

2012-11-15  Kent Tamura  <tkent@chromium.org>

        Support stand-alone month names in calendar picker
        https://bugs.webkit.org/show_bug.cgi?id=102196

        Reviewed by Kentaro Hara.

        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::writeDocument):
        We don't need to pass monthLabels any more.

2012-11-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-14  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Remove magic numbers in record comparator, handle missing case
        https://bugs.webkit.org/show_bug.cgi?id=102255

        Reviewed by Tony Chang.

        Add test keys for various metadata types.

        * tests/IDBLevelDBCodingTest.cpp:
        (IDBLevelDBCoding::TEST):

2012-11-14  Eric Uhrhane  <ericu@chromium.org>

        [chromium] Don't let shift-click turn popup into tab.
        https://bugs.webkit.org/show_bug.cgi?id=102254

        Reviewed by Adam Barth.

        Change http://trac.webkit.org/changeset/132399 broke shift-click on
        compose in GMail.  We didn't want to change behavior that people were
        depending on, and this quick fix seems a good compromise between user
        intent and developer intent.

        * src/ChromeClientImpl.cpp:
        (WebKit::updatePolicyForEvent):

2012-11-14  Mike Reed  <reed@google.com>

        Dynamically create canvas in Setup() to avoid calling DEPRECATED function setDevice().
        https://bugs.webkit.org/show_bug.cgi?id=102242

        Reviewed by Stephen White.

        This change should not change any test results, it is an equivalent implementation that avoids
        using a (now) DEPRECATED function.

        * tests/DeferredImageDecoderTest.cpp:
        (WebCore::createRasterCanvas):
        (WebCore):
        (WebCore::DeferredImageDecoderTest::SetUp):
        (DeferredImageDecoderTest):
        (WebCore::TEST_F):

2012-11-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r134523.
        http://trac.webkit.org/changeset/134523
        https://bugs.webkit.org/show_bug.cgi?id=102218

        brake chrome windows build, as it references a non existing
        header js/DOMRequestState.h (Requested by jochen__ on
        #webkit).

        * src/WebIDBKey.cpp:

2012-11-14  Kent Tamura  <tkent@chromium.org>

        Support for localization tests of calendar picker
        https://bugs.webkit.org/show_bug.cgi?id=102181

        Reviewed by Kentaro Hara.

        * src/DateTimeChooserImpl.cpp:
        Use DateTimeChooserParameters::locale.
        (WebKit::DateTimeChooserImpl::DateTimeChooserImpl):
        (WebKit::DateTimeChooserImpl::writeDocument):

2012-11-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r134566.
        http://trac.webkit.org/changeset/134566
        https://bugs.webkit.org/show_bug.cgi?id=102197

        "it broke Chromium Android Release build" (Requested by
        haraken on #webkit).

        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::DateTimeChooserImpl):
        (WebKit::DateTimeChooserImpl::writeDocument):

2012-11-14  Kent Tamura  <tkent@chromium.org>

        Support for localization tests of calendar picker
        https://bugs.webkit.org/show_bug.cgi?id=102181

        Reviewed by Kentaro Hara.

        * src/DateTimeChooserImpl.cpp:
        Use DateTimeChooserParameters::locale.
        (WebKit::DateTimeChooserImpl::DateTimeChooserImpl):
        (WebKit::DateTimeChooserImpl::writeDocument):

2012-11-14  Yury Semikhatsky  <yurys@chromium.org>

        Remove MemoryInstrumentationTest.ImageObserver
        https://bugs.webkit.org/show_bug.cgi?id=102185

        Reviewed by Pavel Feldman.

        Removed obsolete memory instrumenation unit test.

        * WebKit.gypi:
        * tests/MemoryInstrumentationTest.cpp: Removed.

2012-11-14  Kent Tamura  <tkent@chromium.org>

        [Chromium] Add API to expose WebCore::DateTimeChooser
        https://bugs.webkit.org/show_bug.cgi?id=101196

        Reviewed by Hajime Morita.

        Add ability to open date/time choosers to WebViewClient.

        - ExternalDateTimeChooser forwards DateTimeChooser requests from WebCore
          to WebViewClient, and waits for WebDateTimeChooerCompletion notifications.
        - WebDateTimeChooserParams contains various information to create
          chooser UI.
        - WebDateTimeChooserCompletion informs value selection by users to
          ExternalDateTimeChooser.

        The design is very similar to existing WebFileChooserParams and
        WebFileChooserCompletion.

        These interfaces are used only if ENABLE_INPUT_MULTIPLE_FIELDS_UI is not
        enabled, that is to say, in Chromium-Android port. Non-Android Chromium
        ports use DateTimeChooserImpl and WebKit-internal choosers.

        * WebKit.gyp: Add WebDateTimeChooserCompletion.h,
        WebDateTimeChooserParams.h, ExternalDateTimeChooser.cpp, and
        ExternalDateTimeChooser.h.
        * public/WebDateTimeChooserCompletion.h: Added.
        (WebDateTimeChooserCompletion):
        (WebKit::WebDateTimeChooserCompletion::~WebDateTimeChooserCompletion):
        * public/WebDateTimeChooserParams.h: Added.
        (WebDateTimeChooserParams):
        (WebKit::WebDateTimeChooserParams::WebDateTimeChooserParams):
        * public/WebViewClient.h:
        (WebKit): Add some forward declarations.
        (WebKit::WebViewClient::openDateTimeChooser): Added.
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::openDateTimeChooser):
        Creates ExternalDateTimeChooser if !ENABLE(INPUT_MULTIPLE_FIELDS_UI).
        * src/ExternalDateTimeChooser.cpp: Added.
        (WebDateTimeChooserCompletionImpl): An implementation of
        WebDateTimeChooserCompletion. When didChooseValue or didCancelChooser is
        called, it notifies to an ExternalDateTimeChooser and kill itself.
        (WebKit::ExternalDateTimeChooser::~ExternalDateTimeChooser): Added.
        (WebKit::ExternalDateTimeChooser::ExternalDateTimeChooser): Added.
        (WebKit::ExternalDateTimeChooser::create):
        Cretes an object, then asks the WebViewClient to open date/time chooser.
        If an open request fails, an empty PassRefPtr<> is returned.
        We don't ask to open in the constructor because open requests might fail
        and it's hard for the constructor to tell the failure.
        (WebKit::ExternalDateTimeChooser::openDateTimeChooser): Prepares a
        WebDateTimeChooserParams and a WebDateTimeChooserCompletion, calls
        WebViewClient::openDateTimeChooser, and kill the
        WebDateTimeChooserCompletion if openDateTimeChooser fails.
        (WebKit::ExternalDateTimeChooser::didChooseValue):
        Called by WebDateTimeChooserCompletion.
        We need to check m_client because the requester is already dead.
        (WebKit::ExternalDateTimeChooser::didCancelChooser): Ditto.
        (WebKit::ExternalDateTimeChooser::endChooser):
        Called by the requester when it wants to close the chooser.
        We don't close the chooser here, and just disconnect the association of
        the client and this object.
        * src/ExternalDateTimeChooser.h: Added.

2012-11-13  Vincent Scheib  <scheib@chromium.org>

        Remove RuntimeEnabledFeatures::isPointerLockEnabled.
        https://bugs.webkit.org/show_bug.cgi?id=102107

        Reviewed by Adam Barth.

        The runtime flag is always true now that the feature is enabled by default in Chromium.

        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * src/WebRuntimeFeatures.cpp:
        (WebKit):
        (WebKit::WebRuntimeFeatures::enablePointerLock):

2012-11-13  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-13  Dana Jansens  <danakj@chromium.org>

        [chromium] Pass showDebugBorders directly to WebLayerTreeSettings, don't use the GraphicsLayer border width setting.
        https://bugs.webkit.org/show_bug.cgi?id=102130

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit):

2012-11-13  Keishi Hattori  <keishi@webkit.org>

        Enable datalist UI for input types week and month
        https://bugs.webkit.org/show_bug.cgi?id=102041

        Reviewed by Kent Tamura.

        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::writeDocument): If the type supports calendar picker show the "Other..." option.

2012-11-13  Eberhard Graether  <egraether@google.com>

        checkbox to toggle FPS counter in the inspector's settings
        https://bugs.webkit.org/show_bug.cgi?id=99660

        Reviewed by Pavel Feldman.

        Added a checkbox to the inspector's settings to toggle a FPS counter. The checkbox appears when InspectorClient::canShowFPSCounter() returns true.

        * public/WebView.h:
        (WebView):
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::canShowFPSCounter):
        (WebKit):
        (WebKit::InspectorClientImpl::setShowFPSCounter):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setShowFPSCounter):
        (WebKit):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::loadFontAtlasIfNecessary):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-11-13  Dana Jansens  <danakj@chromium.org>

        [chromium] Plumb WebCompositorSupport settings through WebLayerTreeSettings as well, in preparation for removing the settings from WebCompositorSupport
        https://bugs.webkit.org/show_bug.cgi?id=102146

        Reviewed by James Robinson.

        Add accelerated animation and per-tile painting to the WebSettings structure.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setAcceleratedAnimationEnabled):
        (WebKit):
        (WebKit::WebSettingsImpl::setPerTilePaintingEnabled):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        (WebKit::WebSettingsImpl::gestureTapHighlightEnabled):
        (WebKit::WebSettingsImpl::doubleTapToZoomEnabled):
        (WebKit::WebSettingsImpl::perTilePaintingEnabled):
        (WebKit::WebSettingsImpl::acceleratedAnimationEnabled):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit):

2012-11-13  Kenneth Russell  <kbr@google.com>

        Notify embedder of lost contexts and allow overriding of WebGL support
        https://bugs.webkit.org/show_bug.cgi?id=101826

        Reviewed by Adam Barth.

        Expose new FrameLoaderClient hooks through Chromium's
        WebPermissionClient and WebFrameClient. Downstream browser tests
        will exercise this new functionality.

        * public/WebFrameClient.h:
        (WebFrameClient):
        (WebKit::WebFrameClient::didLoseWebGLContext):
        * public/WebPermissionClient.h:
        (WebPermissionClient):
        (WebKit::WebPermissionClient::allowWebGL):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit):
        (WebKit::FrameLoaderClientImpl::allowWebGL):
        (WebKit::FrameLoaderClientImpl::didLoseWebGLContext):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2012-11-13  Chris Fleizach  <cfleizach@apple.com>

        AX: MathML types need to be semantically identified in AX tree
        https://bugs.webkit.org/show_bug.cgi?id=101263

        Reviewed by Beth Dakin.

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:
            Add new accessibility role.

2012-11-13  Silvia Pfeiffer  <silviapf@chromium.org>

        Clean up the inheritance tree under the MediaControls Class.
        https://bugs.webkit.org/show_bug.cgi?id=88871

        Reviewed by Eric Carlson.

        This patch removes code duplication between the Chromium and Safari
        media controls shadow DOMs.
        The derived classes are renamed based on their platform:
        - MediaControlRootElement                to MediaControlsApple.
        - MediaControlRootElementChromium        to MediaControlsChromium.
        - MediaControlRootElementChromiumAndroid to MediaControlsChromiumAndroid.

        * public/WebContextMenuData.h:
          Move MediaControlRootElement to MediaControls.
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
          Move MediaControlRootElement to MediaControls.

2012-11-13  Dimitri Glazkov  <dglazkov@chromium.org>

        Unreviewed, rolling out r134446.
        http://trac.webkit.org/changeset/134446
        https://bugs.webkit.org/show_bug.cgi?id=101968

        Need to try a different strategy for landing a two-sided patch
        (3/3).

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        (WebKit::WebSettingsImpl::gestureTapHighlightEnabled):
        (WebKit::WebSettingsImpl::doubleTapToZoomEnabled):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit):

2012-11-13  Dan Carney  <dcarney@google.com>

        [V8] More efficient wrapper dispatch
        https://bugs.webkit.org/show_bug.cgi?id=102082

        Reviewed by Adam Barth.

        * src/WebArrayBuffer.cpp:
        (WebKit::WebArrayBuffer::toV8Value):
        * src/WebBlob.cpp:
        (WebKit::WebBlob::toV8Value):

2012-11-12  Dana Jansens  <danakj@chromium.org>

        [chromium] Remove the WebCompositorSupport methods for changing settings, plumb everything through WebLayerTreeSettings
        https://bugs.webkit.org/show_bug.cgi?id=101968

        Reviewed by James Robinson.

        This adds perTilePainting and acceleratedAniamtions to the WebSettings
        classes, so that DRT can turn these on via WebLayerTreeSettings.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setAcceleratedAnimationEnabled):
        (WebKit):
        (WebKit::WebSettingsImpl::setPerTilePaintingEnabled):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        (WebKit::WebSettingsImpl::gestureTapHighlightEnabled):
        (WebKit::WebSettingsImpl::doubleTapToZoomEnabled):
        (WebKit::WebSettingsImpl::perTilePaintingEnabled):
        (WebKit::WebSettingsImpl::acceleratedAnimationEnabled):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit):

2012-11-13  Alec Flett  <alecflett@chromium.org>

        IndexedDB: remove legacy string-based backend methods
        https://bugs.webkit.org/show_bug.cgi?id=102004

        Reviewed by Adam Barth.

        This is the final stage in a refactor, preceded by
        https://bugs.webkit.org/show_bug.cgi?id=100426

        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::createObjectStore):
        * public/WebIDBObjectStore.h:
        (WebKit::WebIDBObjectStore::createIndex):
        (WebKit::WebIDBObjectStore::index):
        * public/WebIDBTransaction.h:
        * src/IDBDatabaseBackendProxy.cpp:
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/IDBTransactionBackendProxy.cpp:
        * src/IDBTransactionBackendProxy.h:
        (IDBTransactionBackendProxy):

2012-11-13  Dimitri Glazkov  <dglazkov@chromium.org>

        Unreviewed, rolling out r134391.
        http://trac.webkit.org/changeset/134391
        https://bugs.webkit.org/show_bug.cgi?id=99660

        Speculative rollout, trying to fix browser_tests failure.

        * public/WebView.h:
        (WebView):
        * src/InspectorClientImpl.cpp:
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-11-13  Ilya Tikhonovsky  <loislo@chromium.org>

        Unreviewed: temporary disable failing test.

        * tests/MemoryInstrumentationTest.cpp:

2012-11-13  Eberhard Graether  <egraether@google.com>

        checkbox to toggle FPS counter in the inspector's settings
        https://bugs.webkit.org/show_bug.cgi?id=99660

        Reviewed by Pavel Feldman.

        Added a checkbox to the inspector's settings to toggle a FPS counter. The checkbox appears when InspectorClient::canShowFPSCounter() returns true.

        * public/WebView.h:
        (WebView):
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::canShowFPSCounter):
        (WebKit):
        (WebKit::InspectorClientImpl::setShowFPSCounter):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setShowFPSCounter):
        (WebKit):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::loadFontAtlasIfNecessary):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-11-12  Kent Tamura  <tkent@chromium.org>

        Unable to set valid time value to input[type=time] with user interaction in some cases
        https://bugs.webkit.org/show_bug.cgi?id=102048

        Reviewed by Kentaro Hara.

        * tests/DecimalTest.cpp:
        (TEST_F): Update and add tests.
        2.1 % 3 should be 2.1
        10 % -3 should be 1
        -10 % -3 should be -1
        3.6 % 1.3 should be 1
        500 % 1000 should be 500
        -500 % 1000 should be -500

2012-11-12  Min Qin  <qinmin@chromium.org>

        Fix windowRect calculation for webplugin due to page scale factors
        https://bugs.webkit.org/show_bug.cgi?id=100182

        Reviewed by Adam Barth.

        The current calculaton of windowRect in WebPluginContainerImpl is wrong. Even after some of our latest changes.
        The problem is caused by page scale factor.
        For example, windowToContents(IntPoint) will return an unscaled offset for an iframe, but will return a scaled offset for the main frame. So in order to obtain the correct window coordinate, we need to use contentsToWindow().
        Since webview_plugin.cc is expecting window coordinates, we need to use contentsToWindow(IntRect) to calculate the windowRect so that the rect size can get correctly scaled.
        It is difficult to write a test for this because it's pixel-based, and plugin placeholder is managed on the Chromium side (webview_plugin.cc).

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::paint):

2012-11-12  Adam Barth  <abarth@webkit.org>

        Unreviewed. Roll Chromium DEPS.

2012-11-12  Stephen Chenney  <schenney@chromium.org>

        [chromium] Supressing a Skia change to prevent layout test breakage.

        Unreviewed expectations management.

        * skia_webkit.gyp: Added supression 'SK_IGNORE_FAST_BLURRECT=1'

2012-11-12  Alexandre Elias  <aelias@chromium.org>

        [chromium] Delete WebCompositor.h
        https://bugs.webkit.org/show_bug.cgi?id=101137

        Reviewed by James Robinson.

        The implementation of this class is getting deleted and all
        WebKit-side users are already going via WebCompositorSupport instead.

        * tests/WebCompositorInputHandlerImplTest.cpp:

2012-11-12  Dirk Pranke  <dpranke@chromium.org>

        Fix Chromium DEPS version after accidentally checking in HEAD a couple days ago.

        Unreviewed, build fix.

        * DEPS:

2012-11-12  Keishi Hattori  <keishi@webkit.org>

        Add support for week/month to Locale::formatDateTime()
        https://bugs.webkit.org/show_bug.cgi?id=101878

        Reviewed by Kent Tamura.

        * tests/LocaleMacTest.cpp:
        (LocaleMacTest::formatWeek): Takes ISO string and returns localized string.
        (LocaleMacTest):
        (LocaleMacTest::formatMonth): Ditto.
        (TEST_F):

2012-11-11  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Expose CustomEvent through WebDOMCustomEvent.
        https://bugs.webkit.org/show_bug.cgi?id=101293

        Reviewed by Adam Barth.

        * WebKit.gyp:
        * public/WebDOMCustomEvent.h: Added.
        (WebKit):
        (WebDOMCustomEvent):
        (WebKit::WebDOMCustomEvent::WebDOMCustomEvent):
        * src/WebDOMCustomEvent.cpp: Added.
        (WebKit):
        (WebKit::WebDOMCustomEvent::initCustomEvent):

2012-11-09  Rick Byers  <rbyers@chromium.org>

        Move chromium to USE(LAZY_NATIVE_CURSOR)
        https://bugs.webkit.org/show_bug.cgi?id=101501

        Reviewed by Adam Barth.

        Update conversion from Cursor to WebCursorInfo to remove the
        intermediate (and useless) step of PlatformCursor.

        * src/AssertMatchingEnums.cpp:
        * src/WebCursorInfo.cpp:
        (WebKit::WebCursorInfo::WebCursorInfo):

2012-11-09  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Combine IDBBackingStore and IDBLevelDBBackingStore
        https://bugs.webkit.org/show_bug.cgi?id=101415

        Reviewed by Tony Chang.

        Remove method that is no longer in the base class.

        * tests/IDBFakeBackingStore.h:

2012-11-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r134101.
        http://trac.webkit.org/changeset/134101
        https://bugs.webkit.org/show_bug.cgi?id=101790

        IDBDatabaseBackendTest.BackingStoreRetention failing
        (Requested by jsbell|gardener on #webkit).

        * tests/IDBFakeBackingStore.h:

2012-11-09  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Combine IDBBackingStore and IDBLevelDBBackingStore
        https://bugs.webkit.org/show_bug.cgi?id=101415

        Reviewed by Tony Chang.

        Remove method that is no longer in the base class.

        * tests/IDBFakeBackingStore.h:

2012-11-09  Alec Flett  <alecflett@chromium.org>

        IndexedDB: switch frontend to use int64_t-based references
        https://bugs.webkit.org/show_bug.cgi?id=100426

        Reviewed by Tony Chang.

        Remove implementation stubs from chromium API for
        methods obsoleted by https://bugs.webkit.org/show_bug.cgi?id=100425

        * src/IDBObjectStoreBackendProxy.cpp:
        * src/IDBObjectStoreBackendProxy.h:
        (IDBObjectStoreBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        (WebIDBObjectStoreImpl):

2012-11-09  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Deleting all files relating to the deprecated PeerConnection00
        https://bugs.webkit.org/show_bug.cgi?id=101730

        Reviewed by Adam Barth.

        Since RTCPeerConenction has superseeded PeerConnection00 this patch removes all
        files relating to the old API.

        * WebKit.gyp:
        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):
        * public/platform/WebICECandidateDescriptor.h: Removed.
        * public/platform/WebICEOptions.h: Removed.
        * public/platform/WebMediaHints.h: Removed.
        * public/platform/WebPeerConnection00Handler.h: Removed.
        * public/platform/WebPeerConnection00HandlerClient.h: Removed.
        * public/platform/WebPeerConnectionHandler.h: Removed.
        * public/platform/WebPeerConnectionHandlerClient.h: Removed.
        * public/platform/WebSessionDescriptionDescriptor.h: Removed.
        * src/AssertMatchingEnums.cpp:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::isPeerConnectionEnabled):
        * src/WebSessionDescriptionDescriptor.cpp: Removed.

2012-11-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r134010.
        http://trac.webkit.org/changeset/134010
        https://bugs.webkit.org/show_bug.cgi?id=101716

        Broke the chromium windows build. (Requested by noel_ on
        #webkit).

        * src/IDBCallbacksProxy.cpp:
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::transaction):
        (WebKit):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::putWithIndexKeys):
        (WebKit):
        (WebKit::IDBObjectStoreBackendProxy::setIndexKeys):
        (WebKit::IDBObjectStoreBackendProxy::createIndex):
        (WebKit::IDBObjectStoreBackendProxy::setIndexesReady):
        (WebKit::IDBObjectStoreBackendProxy::index):
        (WebKit::IDBObjectStoreBackendProxy::deleteIndex):
        * src/IDBObjectStoreBackendProxy.h:
        (IDBObjectStoreBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::deleteObjectStore):
        (WebKit):
        (WebKit::WebIDBDatabaseImpl::transaction):
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * src/WebIDBObjectStoreImpl.cpp:
        (WebKit::WebIDBObjectStoreImpl::putWithIndexKeys):
        (WebKit):
        (WebKit::WebIDBObjectStoreImpl::setIndexKeys):
        (WebKit::WebIDBObjectStoreImpl::setIndexesReady):
        (WebKit::WebIDBObjectStoreImpl::index):
        (WebKit::WebIDBObjectStoreImpl::deleteIndex):
        * src/WebIDBObjectStoreImpl.h:
        (WebIDBObjectStoreImpl):
        * src/WebIDBTransactionImpl.cpp:
        (WebKit::WebIDBTransactionImpl::objectStore):
        (WebKit):
        * src/WebIDBTransactionImpl.h:
        * tests/IDBRequestTest.cpp:

2012-11-08  Alec Flett  <alecflett@chromium.org>

        IndexedDB: switch frontend to use int64_t-based references
        https://bugs.webkit.org/show_bug.cgi?id=100426

        Reviewed by Tony Chang.

        Remove implementation stubs from chromium API for
        methods obsoleted by https://bugs.webkit.org/show_bug.cgi?id=100425

        * src/IDBObjectStoreBackendProxy.cpp:
        * src/IDBObjectStoreBackendProxy.h:
        (IDBObjectStoreBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        (WebIDBObjectStoreImpl):

2012-11-08  Keishi Hattori  <keishi@webkit.org>

        WebPagePopupImpl::handleKeyEvent is called after WebPagePopupImpl::close
        https://bugs.webkit.org/show_bug.cgi?id=93800

        Reviewed by Kent Tamura.

        We need to set m_closing to true in WebPagePopupImpl::close so we won't access m_page in WebPagePopupImpl::handleKeyEvent.

        * src/WebPagePopupImpl.cpp:
        (WebKit::WebPagePopupImpl::close): Set m_closing to true.

2012-11-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r133984.
        http://trac.webkit.org/changeset/133984
        https://bugs.webkit.org/show_bug.cgi?id=101684

        windows build error. (Requested by hayato on #webkit).

        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::putWithIndexKeys):
        (WebKit):
        (WebKit::IDBObjectStoreBackendProxy::setIndexKeys):
        (WebKit::IDBObjectStoreBackendProxy::createIndex):
        (WebKit::IDBObjectStoreBackendProxy::setIndexesReady):
        (WebKit::IDBObjectStoreBackendProxy::index):
        (WebKit::IDBObjectStoreBackendProxy::deleteIndex):
        * src/IDBObjectStoreBackendProxy.h:
        (IDBObjectStoreBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::deleteObjectStore):
        (WebKit):
        (WebKit::WebIDBDatabaseImpl::transaction):
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * src/WebIDBObjectStoreImpl.cpp:
        (WebKit::WebIDBObjectStoreImpl::putWithIndexKeys):
        (WebKit):
        (WebKit::WebIDBObjectStoreImpl::setIndexKeys):
        (WebKit::WebIDBObjectStoreImpl::setIndexesReady):
        (WebKit::WebIDBObjectStoreImpl::index):
        (WebKit::WebIDBObjectStoreImpl::deleteIndex):
        * src/WebIDBObjectStoreImpl.h:
        (WebIDBObjectStoreImpl):
        * src/WebIDBTransactionImpl.cpp:
        (WebKit::WebIDBTransactionImpl::objectStore):
        (WebKit):
        * src/WebIDBTransactionImpl.h:

2012-11-08  Alec Flett  <alecflett@chromium.org>

        IndexedDB: switch frontend to use int64_t-based references
        https://bugs.webkit.org/show_bug.cgi?id=100426

        Reviewed by Tony Chang.

        Remove implementation stubs from chromium API for
        methods obsoleted by https://bugs.webkit.org/show_bug.cgi?id=100425

        * src/IDBObjectStoreBackendProxy.cpp:
        * src/IDBObjectStoreBackendProxy.h:
        (IDBObjectStoreBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        (WebIDBObjectStoreImpl):

2012-11-07  Kent Tamura  <tkent@chromium.org>

        [Chromium] WebElement::hasHTMLTagName returns true for non-HTML elements
        https://bugs.webkit.org/show_bug.cgi?id=101537

        Reviewed by Abhishek Arya.

        We should not do ignore-case comparison for tagName, which is always
        upper-case and createElementNS(xhtmlNS, "INPUT") doesn't create an
        HTMLInputElement object. We need to check if localName is equal to
        "input" in this case.

        * src/WebElement.cpp:
        (WebKit::WebElement::hasHTMLTagName):

2012-11-08  Joshua Bell  <jsbell@chromium.org>

        Expose snapshots in platform/leveldb wrapper API
        https://bugs.webkit.org/show_bug.cgi?id=100786

        Reviewed by Tony Chang.

        Add unit tests for transactions/snapshots.

        * tests/LevelDBTest.cpp:
        (WebCore::encodeString): Don't append to pre-sized vector.
        (WebCore::TEST):
        (WebCore):

2012-11-08  Adam Barth  <abarth@webkit.org>

        Unreviewed.

        Roll Chromium DEPS: 166678 => 166755

        * DEPS:

2012-11-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-08  Sami Kyostila  <skyostil@chromium.org>

        Introduce WebScreenInfo.deviceScaleFactor
        https://bugs.webkit.org/show_bug.cgi?id=101613

        Reviewed by Adam Barth.

        Introduce the WebScreenInfo.deviceScaleFactor property, which specifies the
        ratio between physical and logical pixels. This is the first step in replacing
        horizontalDPI/verticalDPI in favor of the deviceScaleFactor.

        For now, this value is only initialized on Mac, because the other ports that
        use it initialize the value in Chromium, whereas Windows and X11 default to a
        factor of 1. The value on Mac is truncated to an integer to match the
        expectation in Chromium's RenderWidget.

        * src/mac/WebScreenInfoFactory.mm:
        (WebKit::WebScreenInfoFactory::screenInfo):

2012-11-08  Dan Carney  <dcarney@google.com>

        Cleanup IDBBindingUtilitiesTest
        https://bugs.webkit.org/show_bug.cgi?id=100860

        Reviewed by Adam Barth.

        Small cleanup of IDBBindingUtilitiesTest as per
        https://bugs.webkit.org/show_bug.cgi?id=99975#c38

        * tests/IDBBindingUtilitiesTest.cpp:
        (IDBKeyFromValueAndKeyPathTest):
        (WebKit::IDBKeyFromValueAndKeyPathTest::IDBKeyFromValueAndKeyPathTest):
        (WebKit::IDBKeyFromValueAndKeyPathTest::context):
        (WebKit):
        (WebKit::TEST_F):

2012-11-08  Keishi Hattori  <keishi@webkit.org>

        Add properties for week/month picker in DateTimeChooserImpl::writeDocument
        https://bugs.webkit.org/show_bug.cgi?id=101552

        Reviewed by Kent Tamura.

        Changing the arguments for calendar picker to support week/month picker.

        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::writeDocument):

2012-11-08  Dimitri Glazkov  <dglazkov@chromium.org>

        Unreviewed, rolling out r133429.
        http://trac.webkit.org/changeset/133429
        https://bugs.webkit.org/show_bug.cgi?id=101173

        Speculative roll out, investigating perf regression.

        * src/ContextFeaturesClientImpl.cpp:
        (WebKit::ContextFeaturesClientImpl::askIfIsEnabled):

2012-11-08  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: move front-end methods called from native part to InspectorFrontendAPI
        https://bugs.webkit.org/show_bug.cgi?id=101463

        Reviewed by Vsevolod Vlasov.

        Moved Web Inspector methods called from native code to InspectorFrontendAPI. Updated
        WebDevToolsFrontendImpl appropriately.

        * src/WebDevToolsFrontendImpl.cpp:
        (WebKit::WebDevToolsFrontendImpl::dispatchOnInspectorFrontend):

2012-11-08  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Rename methods and remove dead code from IDBBackingStore
        https://bugs.webkit.org/show_bug.cgi?id=101488

        Reviewed by Ojan Vafai.

        Update IDBFakeBackingStore to reflect method changes in IDBBackingStore.

        * tests/IDBFakeBackingStore.h:

2012-08-20  Taiju Tsuiki  <tzik@chromium.org>

        Web Inspector: Drop dimmed crumb handling
        https://bugs.webkit.org/show_bug.cgi?id=94457

        Reviewed by Vsevolod Vlasov.

        * src/js/devTools.css:

2012-11-07  Adam Barth  <abarth@webkit.org>

        [V8] We should hide the DOMWrapperMaps inside DOMDataStore
        https://bugs.webkit.org/show_bug.cgi?id=101430

        Reviewed by Kentaro Hara.

        Remove unneeded header includes.

        * src/WebScriptController.cpp:

2012-11-07  Varun Jain  <varunjain@chromium.org>

        Add new gesture type, LongTap, which is basically the completion of a GestureLongPress
        https://bugs.webkit.org/show_bug.cgi?id=101385

        Reviewed by Adam Barth.

        Test: Only creating the new enum. No functionality change, hence no tests required.

        * public/WebInputEvent.h:
        (WebKit::WebInputEvent::isGestureEventType):
        * src/PageWidgetDelegate.cpp:
        (WebKit::PageWidgetDelegate::handleInputEvent):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):

2012-11-05  Emil A Eklund  <eae@chromium.org>

        Remove LayoutTypes abstraction
        https://bugs.webkit.org/show_bug.cgi?id=93050

        Reviewed by Levi Weintraub.

        Remove LayoutTypes abstraction and rename FractionalLayout* to
        Layout* now that all platforms use the FractionalLayout version
        (albeit with different fractions).

        No new tests, no change in functionality.

        * src/LinkHighlight.cpp:

2012-11-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-07  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Remove support for "desktop-width" in the viewport meta tag
        https://bugs.webkit.org/show_bug.cgi?id=101217

        Reviewed by Gyuyoung Kim.

        Remove some code trying to use the set desktop width (say 980) for
        sites not using a viewport meta element.

        Removing this code should have no effect as it ends up being set
        to desktop width in that case anyway, by the ViewportArguments
        algorithm.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):

2012-11-06  Dan Beam  <dbeam@chromium.org>

        Enable REQUEST_AUTOCOMPLETE for chromium port
        https://bugs.webkit.org/show_bug.cgi?id=101376

        Reviewed by Adam Barth.

        This patch enables the feature flag REQUEST_AUTOCOMPLETE in WebKit/chromium only to allow web authors to start to use
        HTMLFormElement#requestAutocomplete as the chrome-side work progresses further.

        * features.gypi:

        Turned on the *compile* time flag for REQUEST_AUTOCOMPLETE in chromium's webkit port but also added a *run* time flag
        that functionally enables the behavior.  This means the chromium port will compile in support but will require a run
        time flag to enable.

        * public/WebRuntimeFeatures.h:
        (WebRuntimeFeatures):

        Added a method to the public chromium run time features interface to allow chrome to enable/disable this feature.

        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableRequestAutocomplete):
        (WebKit):

        A setter than can be called from chrome code to change the enable/disable requestAutocomplete and associated events at
        runtime.

        (WebKit::WebRuntimeFeatures::isRequestAutocompleteEnabled):

        A getter that returns whether the requestAutocomplete run time feature is enabled.

2012-11-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r133526.
        http://trac.webkit.org/changeset/133526
        https://bugs.webkit.org/show_bug.cgi?id=101388

        May have caused 15% memory regression in Chromium (Requested
        by jsbell|gardener on #webkit).

        * src/WebScriptController.cpp:

2012-11-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-06  Peter Beverloo  <peter@chromium.org>

        [Chromium] Enable the JavaScript i18n API for Android
        https://bugs.webkit.org/show_bug.cgi?id=101357

        Reviewed by Adam Barth.

        Enable the JavaScript i18n API for Chromium on Android. This adds a
        grand total of 18.7 KiB of data to the content shell apk.

        * features.gypi:

2012-11-06  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-05  Adam Barth  <abarth@webkit.org>

        [V8] IntrusiveDOMWrapperMap should be usable for more than just Nodes
        https://bugs.webkit.org/show_bug.cgi?id=101110

        Reviewed by Kentaro Hara.

        * src/WebScriptController.cpp:
            - Remove unneeded include of deleted file.

2012-11-05  Simon Fraser  <simon.fraser@apple.com>

        Fix layer borders to cleaning appear and disappear on switching
        https://bugs.webkit.org/show_bug.cgi?id=101136

        Reviewed by Sam Weinig.

        Remove the GraphicsLayerClient methods showDebugBorders() and
        showRepaintCounter().

        * src/NonCompositedContentHost.cpp:
        * src/NonCompositedContentHost.h:
        (NonCompositedContentHost):
        * src/PageOverlay.cpp:
        * tests/GraphicsLayerChromiumTest.cpp:
        * tests/ImageLayerChromiumTest.cpp:

2012-11-05  Bo Liu  <boliu@chromium.org>

        Expose hit test related methods in public chromium port
        https://bugs.webkit.org/show_bug.cgi?id=101204

        Reviewed by Adam Barth.

        The methods are needed in implementating hit test related methods in the
        Android WebView API.

        The specific methods are:
        [Web]HitTestResult::urlElement
        [Web]HitTestResult::absoluteImageURL
        [Web]HitTestResult::absoluteLinkURL
        [Web]HitTestResult::isContentEditable
        WebViewImpl::hitTestResultAt

        * public/WebHitTestResult.h:
        (WebKit):
        (WebHitTestResult):
        * public/WebView.h:
        (WebKit):
        (WebView):
        * src/WebHitTestResult.cpp:
        (WebKit::WebHitTestResult::urlElement):
        (WebKit):
        (WebKit::WebHitTestResult::absoluteImageURL):
        (WebKit::WebHitTestResult::absoluteLinkURL):
        (WebKit::WebHitTestResult::isContentEditable):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::hitTestResultAt):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-11-05  Alok Priyadarshi  <alokp@chromium.org>

        [chromium] Pass canPaintLCDText to WebContentLayerClient::paintContents
        https://bugs.webkit.org/show_bug.cgi?id=99083

        Reviewed by Stephen White.

        Use LCD text setting passed to WebContentLayerClient::paintContents instead of turning it off for all composited layers.

        * src/LinkHighlight.cpp:
        (WebKit::LinkHighlight::paintContents):
        * src/LinkHighlight.h:
        (LinkHighlight):
        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::NonCompositedContentHost):
        (WebKit::NonCompositedContentHost::setOpaque):
        (WebKit::NonCompositedContentHost::paintContents):
        * src/NonCompositedContentHost.h:
        (NonCompositedContentHost):
        * tests/OpaqueRectTrackingContentLayerDelegateTest.cpp:
        (WebCore::TEST_F):

2012-11-05  Alok Priyadarshi  <alokp@chromium.org>

        Unreviewed. Rolled DEPS.

        * DEPS:

2012-11-05  Miguel Garcia  <miguelg@chromium.org>

        [Chromium] Disable registerProtocolHandler on Android
        https://bugs.webkit.org/show_bug.cgi?id=101199

        Reviewed by Julien Chaffraix.

        Chromium for Android has been exposing registerProtocolHandler, but the feature wasn't
        actually wired up internally. Disable the feature to avoid breaking feature detection
        until we can implement it properly.

        * features.gypi:

2012-11-04  MORITA Hajime  <morrita@google.com>

        Shadow DOM should be able to be disabled per context.
        https://bugs.webkit.org/show_bug.cgi?id=101173

        Reviewed by Dimitri Glazkov.

        * src/ContextFeaturesClientImpl.cpp:
        (WebKit::ContextFeaturesClientImpl::askIfIsEnabled):

2012-11-03  Dan Beam  <dbeam@chromium.org>

        Implement HTMLFormElement#requestAutocomplete and associated events
        https://bugs.webkit.org/show_bug.cgi?id=100557

        Reviewed by Adam Barth.

        Implements an initial version of the proposal for interactive autocomplete outlined in this email:
        http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2012-October/037711.html

        The goal of this patch is to allow web authors to call formElement.requestAutocomplete(); after subscribing for
        autocomplete/autocompleteerror events on formElement. If the form's [autocomplete] attribute is "off" an
        error will be dispatched. Otherwise, a request will be issued to the FrameLoaderClient.  At the moment, the
        implementation in Chrome (https://codereview.chromium.org/11270018/) will simply dispatch an error until the
        UI on Chrome's side is built. Both autocomplete and autocompleteerror events will be dispatched asynchronously
        after a small delay to behave consistently in all situations and implementations.

        Currently this is behind the feature flag REQUEST_AUTOCOMPLETE, which is disabled.

        Test: fast/forms/form-request-autocomplete.html

        * public/WebAutofillClient.h:
        (WebKit):
        (WebAutofillClient):
        (WebKit::WebAutofillClient::didRequestAutocomplete):

        Added WebAutofillClient::didRequestAutocomplete to chrome's public WebKit interface.

        * public/WebFormElement.h:

        Added an enum that matches HTMLFormElement::AutocompleteResult (and added compile time assert) and a public method
        (WebFormElement::finishRequestAutocomplete) to WebFormElement's public interface.

        * src/AssertMatchingEnums.cpp:

        Added a compile time assert to guarantee the HTMLFormElement::AutocompleteResult enum matches the
        WebFormElement::AutocompleteResult enum.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit):
        (WebKit::FrameLoaderClientImpl::didRequestAutocomplete):

        Implemented the added FrameLoaderClient::didRequestAutocomplete, which simply passes through to the
        WebAutofillClient.

        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

        Implementing FrameLoaderClient::didRequestAutocomplete.

        * src/WebFormElement.cpp:
        (WebKit::WebFormElement::finishRequestAutocomplete):
        (WebKit):

        Added WebFormElement::finishRequestAutocomplete to allow chromium's renderer a public API to call to finish the
        autocomplete request on a WebFormElement.

2012-11-02  Anders Carlsson  <andersca@apple.com>

        Add a PluginInactive plug-in unavailability reason
        https://bugs.webkit.org/show_bug.cgi?id=101089

        Reviewed by Sam Weinig.

        * src/LocalizedStrings.cpp:
        (WebCore::inactivePluginText):
        (WebCore):

2012-11-02  Ian Vollick  <vollick@chromium.org>

        Support invalidation tracking for composited layers
        https://bugs.webkit.org/show_bug.cgi?id=97801

        Reviewed by Simon Fraser.

        GraphicsLayers now store invalidated rects and can include them in
        the layer tree dump.

        (WebKit::WebWidget::isTrackingRepaints):
          Used by the NonCompositedContentHost to determine if we are tracking
          repaint rects.
        (WebKit::WebWidget::isTrackingRepaints):
        * src/LinkHighlight.cpp:
        (WebKit::LinkHighlight::updateGeometry):
          Now calls GraphicsLayer::addRepaintRect when invalidated.
        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::isTrackingRepaints):
          Required as this is a GraphicsLayerClient.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::isTrackingRepaints):
          Implementation of WebWidget::isTrackingRepaints.

2012-11-02  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-02  Kent Tamura  <tkent@chromium.org>

        Optimize DateTimeFormat::quoteAndAppendLiteral output
        https://bugs.webkit.org/show_bug.cgi?id=101040

        Reviewed by Kentaro Hara.

        * tests/LocaleWinTest.cpp:
        (TEST_F): Update test results.

2012-11-01  Kent Tamura  <tkent@chromium.org>

        Introduce ENABLE_DATE_AND_TIME_INPUT_TYPES, and clarify usage of other related flags
        https://bugs.webkit.org/show_bug.cgi?id=101007

        Reviewed by Kentaro Hara.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::openDateTimeChooser):
        Follow the ChromeClient::openDateTimeChooser flag change.
        Also, add an empty implemenatation for Android.
        * src/ChromeClientImpl.h:
        Follow the ChromeClient::openDateTimeChooser flag change.
        * src/DateTimeChooserImpl.cpp: Wrapped with
        ENABLE(INPUT_MULTIPLE_FIELDS_UI). This class is not used in Android.
        * src/DateTimeChooserImpl.h: Ditto.
        * src/LocalizedStrings.cpp: Follow the LocalizedString.h change.

2012-11-01  Alec Flett  <alecflett@chromium.org>

        IndexedDB: add methods to support id-based backend APIs
        https://bugs.webkit.org/show_bug.cgi?id=100425

        Reviewed by Tony Chang.

        Chromium Proxy and WebIDB* support for new int64_t-based methods.

        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::deleteObjectStore):
        (WebKit::WebIDBDatabase::transaction):
        * public/WebIDBObjectStore.h:
        (WebKit::WebIDBObjectStore::put):
        (WebKit::WebIDBObjectStore::setIndexKeys):
        (WebKit::WebIDBObjectStore::setIndexesReady):
        (WebKit::WebIDBObjectStore::index):
        (WebKit::WebIDBObjectStore::deleteIndex):
        * public/WebIDBTransaction.h:
        (WebKit::WebIDBTransaction::objectStore):
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::deleteObjectStore):
        (WebKit):
        (WebKit::IDBDatabaseBackendProxy::transaction):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::put):
        (WebKit):
        (WebKit::IDBObjectStoreBackendProxy::setIndexKeys):
        (WebKit::IDBObjectStoreBackendProxy::setIndexesReady):
        (WebKit::IDBObjectStoreBackendProxy::index):
        (WebKit::IDBObjectStoreBackendProxy::deleteIndex):
        * src/IDBObjectStoreBackendProxy.h:
        (IDBObjectStoreBackendProxy):
        * src/IDBTransactionBackendProxy.cpp:
        (WebKit::IDBTransactionBackendProxy::objectStore):
        * src/IDBTransactionBackendProxy.h:
        (IDBTransactionBackendProxy):
        * src/WebIDBMetadata.cpp:
        (WebKit::WebIDBMetadata::WebIDBMetadata):
        (WebKit::WebIDBMetadata::operator IDBDatabaseMetadata):
        * src/WebIDBTransactionImpl.cpp:
        (WebKit::WebIDBTransactionImpl::objectStore):
        (WebKit):
        * src/WebIDBTransactionImpl.h:
        * tests/IDBDatabaseBackendTest.cpp:

2012-11-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-01  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: expose Inspector.detached event factory to the embedder.
        https://bugs.webkit.org/show_bug.cgi?id=100967

        Reviewed by Vsevolod Vlasov.

        That way embedder will be able to send messages on behalf of the backend being destructed.

        * public/WebDevToolsAgent.h:
        (WebDevToolsAgent):
        * src/WebDevToolsAgentImpl.cpp:
        (SerializingFrontendChannel):
        (WebKit::SerializingFrontendChannel::sendMessageToFrontend):
        (WebKit::WebDevToolsAgent::inspectorDetachedEvent):
        (WebKit):
        (WebKit::WebDevToolsAgent::workerDisconnectedFromWorkerEvent):
        (WebKit::WebDevToolsAgent::disconnectEventAsText):

2012-11-01  Vsevolod Vlasov  <vsevik@chromium.org>

        [Chromium] debug builds: Use after free under ~PageOverlay()
        https://bugs.webkit.org/show_bug.cgi?id=100930

        Reviewed by Pavel Feldman.

        Changed members order in PageOverlay so that GraphicsLayer is destroyed before GraphicsLayerClient.

        * src/PageOverlay.h:
        (PageOverlay):

2012-11-01  James Robinson  <jamesr@chromium.org>

        [chromium] Avoid attempting to defer commits when they are already deferred
        https://bugs.webkit.org/show_bug.cgi?id=100913

        Reviewed by Adrienne Walker.

        In threaded compositing mode, it's possible to load and unload FrameViews without any
        intervening invalidations. In this case, we enter setIsAcceleratedCompositingActive
        with commits already deferred.  There's no need to defer again and doing so trips
        an assertion in the implementation.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit):

2012-11-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-11-01  Yury Semikhatsky  <yurys@chromium.org>

        Memory instrumentation: report memory occupied by ResourceRequest instead of its base ResourceRequestBase
        https://bugs.webkit.org/show_bug.cgi?id=100497

        Reviewed by Alexander Pavlov.

        Updated MemoryInstrumentationTest.ImageObserver so that it doesn't fail
        when instrumentation of objects referenced by CachedImage changes.

        * tests/MemoryInstrumentationTest.cpp:

2012-11-01  Kent Tamura  <tkent@chromium.org>

        Remove unused Locale::parseDateTime
        https://bugs.webkit.org/show_bug.cgi?id=100910

        Reviewed by Kentaro Hara.

        * tests/LocaleMacTest.cpp: Remove tests for parseDateTime.
        * tests/LocaleWinTest.cpp: Ditto.

2012-10-31  Keishi Hattori  <keishi@webkit.org>

        [Chromium] Page popup shows up at wrong locations when root view is scrolled
        https://bugs.webkit.org/show_bug.cgi?id=100830

        Reviewed by Kent Tamura.

        We need to account for the scroll position when calculating the root view rectangle in the screen.

        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::writeDocument):

2012-10-31  Stephen White  <senorblanco@chromium.org>

        Unreviewed, rolling out r133122.
        http://trac.webkit.org/changeset/133122
        https://bugs.webkit.org/show_bug.cgi?id=99083

        Broke Chromium Win, Android, ChromeOS builds

        * src/LinkHighlight.cpp:
        (WebKit::LinkHighlight::paintContents):
        * src/LinkHighlight.h:
        (LinkHighlight):
        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::NonCompositedContentHost):
        (WebKit::NonCompositedContentHost::setOpaque):
        (WebKit::NonCompositedContentHost::paintContents):
        * src/NonCompositedContentHost.h:
        (NonCompositedContentHost):
        * tests/OpaqueRectTrackingContentLayerDelegateTest.cpp:
        (WebCore::TEST_F):

2012-10-31  Alok Priyadarshi  <alokp@chromium.org>

        [chromium] Pass canPaintLCDText to WebContentLayerClient::paintContents
        https://bugs.webkit.org/show_bug.cgi?id=99083

        Reviewed by James Robinson.

        Use LCD text setting passed to WebContentLayerClient::paintContents instead of turning it off for all composited layers.

        * src/LinkHighlight.cpp:
        (WebKit::LinkHighlight::paintContents):
        * src/LinkHighlight.h:
        (LinkHighlight):
        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::NonCompositedContentHost):
        (WebKit::NonCompositedContentHost::setOpaque):
        (WebKit::NonCompositedContentHost::paintContents):
        * src/NonCompositedContentHost.h:
        (NonCompositedContentHost):
        * tests/OpaqueRectTrackingContentLayerDelegateTest.cpp:
        (WebCore::TEST_F):

2012-10-31  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-31  Stephen White  <senorblanco@chromium.org>

        Unreviewed, rolling out r133107.
        http://trac.webkit.org/changeset/133107
        https://bugs.webkit.org/show_bug.cgi?id=100425

        Broke compile on Chromium Win

        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::transaction):
        * public/WebIDBObjectStore.h:
        (WebKit::WebIDBObjectStore::index):
        * public/WebIDBTransaction.h:
        (WebKit::WebIDBTransaction::objectStore):
        * src/IDBDatabaseBackendProxy.cpp:
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::setIndexesReady):
        * src/IDBObjectStoreBackendProxy.h:
        (IDBObjectStoreBackendProxy):
        * src/IDBTransactionBackendProxy.cpp:
        * src/IDBTransactionBackendProxy.h:
        (IDBTransactionBackendProxy):
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * src/WebIDBMetadata.cpp:
        (WebKit::WebIDBMetadata::WebIDBMetadata):
        (WebKit::WebIDBMetadata::operator IDBDatabaseMetadata):
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        (WebIDBObjectStoreImpl):
        * src/WebIDBTransactionImpl.cpp:
        * src/WebIDBTransactionImpl.h:
        * tests/IDBDatabaseBackendTest.cpp:

2012-10-31  Alec Flett  <alecflett@chromium.org>

        IndexedDB: add methods to support id-based backend APIs
        https://bugs.webkit.org/show_bug.cgi?id=100425

        Reviewed by Tony Chang.

        Chromium Proxy and WebIDB* support for new int64_t-based methods.

        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::deleteObjectStore):
        (WebKit::WebIDBDatabase::transaction):
        * public/WebIDBObjectStore.h:
        (WebKit::WebIDBObjectStore::put):
        (WebKit::WebIDBObjectStore::setIndexKeys):
        (WebKit::WebIDBObjectStore::setIndexesReady):
        (WebKit::WebIDBObjectStore::index):
        (WebKit::WebIDBObjectStore::deleteIndex):
        * public/WebIDBTransaction.h:
        (WebKit::WebIDBTransaction::objectStore):
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::deleteObjectStore):
        (WebKit):
        (WebKit::IDBDatabaseBackendProxy::transaction):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::put):
        (WebKit):
        (WebKit::IDBObjectStoreBackendProxy::setIndexKeys):
        (WebKit::IDBObjectStoreBackendProxy::setIndexesReady):
        (WebKit::IDBObjectStoreBackendProxy::index):
        (WebKit::IDBObjectStoreBackendProxy::deleteIndex):
        * src/IDBObjectStoreBackendProxy.h:
        (IDBObjectStoreBackendProxy):
        * src/IDBTransactionBackendProxy.cpp:
        (WebKit::IDBTransactionBackendProxy::objectStore):
        * src/IDBTransactionBackendProxy.h:
        (IDBTransactionBackendProxy):
        * src/WebIDBMetadata.cpp:
        (WebKit::WebIDBMetadata::WebIDBMetadata):
        (WebKit::WebIDBMetadata::operator IDBDatabaseMetadata):
        * src/WebIDBTransactionImpl.cpp:
        (WebKit::WebIDBTransactionImpl::objectStore):
        (WebKit):
        * src/WebIDBTransactionImpl.h:
        * tests/IDBDatabaseBackendTest.cpp:

2012-10-31  Tien-Ren Chen  <trchen@chromium.org>

        Apply transformation for highlights on non-composited contents
        https://bugs.webkit.org/show_bug.cgi?id=100438

        Reviewed by Adam Barth.

        Non-composited content host layer "steals" the contents on the
        RenderView layer, including the highlight layer.
        The transformation for regular contents are applied by the paint
        function of the non-composited content host however the highlight
        uses its own WebLayer. Need to apply the same transformation to
        the highlight layer as well.

        * src/LinkHighlight.cpp:
        (WebKit::LinkHighlight::computeEnclosingCompositingLayer):
        * src/LinkHighlight.h:
        (LinkHighlight):

2012-10-31  Mike West  <mkwst@chromium.org>

        Prefer document->addConsoleMessage to document->domWindow->console->addMessage.
        https://bugs.webkit.org/show_bug.cgi?id=100850

        Reviewed by Adam Barth.

        For historical reasons, a few places in WebCore talk to Console directly
        via 'document()->domWindow()->console()->addMessage(...)'. This is more
        safely wrapped by calling 'addConsoleMessage' on the Document itself.

        No visible functionality should change; we'll simply avoid potential
        null dereferences in the future.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMessageToConsole):

2012-10-31  Kent Tamura  <tkent@chromium.org>

        Remove code to hide/reshow text caret for PagePopups
        https://bugs.webkit.org/show_bug.cgi?id=100834

        Reviewed by Hajime Morita.

        All of form controls supporting PagePopups don't have a text
        caret. We don't need to hide a text caret on opening a PagePopup,
        and don't need to reshow it on closing the PagePopup.

        We had this code because an old UI of input[type=date] had a text
        caret.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::openPagePopup):
        (WebKit::WebViewImpl::closePagePopup):

2012-10-31  Mike West  <mkwst@chromium.org>

        Script run from an isolated world should bypass a page's CSP.
        https://bugs.webkit.org/show_bug.cgi?id=97398

        Reviewed by Adam Barth.

        * public/WebFrame.h:
        (WebFrame):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setIsolatedWorldSecurityOrigin):
        (WebKit):
        (WebKit::WebFrameImpl::setIsolatedWorldContentSecurityPolicy):
        * src/WebFrameImpl.h:
        (WebFrameImpl):
            Piping a Content Security Policy through WebFrame, in the same way
            we're currently doing for SecurityOrigin. As a drive-by, this also
            uses the static method on DOMWrapperWindow to set the security
            origin, rather than routing through the frame's ScriptController.

2012-10-30  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] Transform mouse/gesture event coordinates to account for pinch-zoom in compositor.
        https://bugs.webkit.org/show_bug.cgi?id=100542

        Reviewed by James Robinson.

        Pinch-zoom in the compositor applies a transformation that WebCore does not know about.
        We need to adjust mouse and gesture event coordinates to account for this in order that
        hit testing work properly for these types while zoomed.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent): Modified to adjoint event coordinates to account for zoom.

2012-10-30  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] Restrict link highlights to targets that display a hand-cursor
        https://bugs.webkit.org/show_bug.cgi?id=99862

        Reviewed by James Robinson.

        To avoid applying highlights to inappropriate targets, such as large divs with
        click handlers installed, test candidate targets and only highlight them if they
        would normally display a hand cursor on mouse over. This is a heuristic, but has
        been tested and found effective in practice.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::invokesHandCursor):
        (WebKit::WebViewImpl::bestTouchLinkNode):
        (WebKit::WebViewImpl::enableTouchHighlight):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/LinkHighlightTest.cpp:
        (WebCore::TEST):
        * tests/data/test_touch_link_highlight.html:

2012-10-30  Alok Priyadarshi  <alokp@chromium.org>

        Unreviewed. Rolled DEPS.

        * DEPS:

2012-10-30  Dan Carney  <dcarney@google.com>

        Remove ensureAuxiliaryContext
        https://bugs.webkit.org/show_bug.cgi?id=99975

        Reviewed by Adam Barth.

        Updated tests to use correct v8 context.

        * tests/IDBBindingUtilitiesTest.cpp:
        (WebKit::checkKeyFromValueAndKeyPathInternal):
        (WebKit::checkKeyPathNullValue):
        (WebKit::injectKey):
        (WebKit::checkInjection):
        (WebKit::checkInjectionFails):
        (WebKit::checkKeyPathStringValue):
        (WebKit::checkKeyPathNumberValue):
        (WebKit::scriptExecutionContext):
        (WebKit):
        (WebKit::TEST):

2012-10-30  Kent Tamura  <tkent@chromium.org>

        Remove unused code for old input[type=date] UI
        https://bugs.webkit.org/show_bug.cgi?id=100734

        Reviewed by Hajime Morita.

        * src/LocalizedStrings.cpp:
        Follow the LocalizedStrings.h change.
        * tests/LocaleMacTest.cpp:
        (LocaleMacTest): Remove tests for Locale::dateFormatText.
        * tests/LocaleWinTest.cpp:
        (LocaleWinTest): Ditto.

2012-10-30  Kent Tamura  <tkent@chromium.org>

        Fix crash by calendar picker or suggestion picker
        https://bugs.webkit.org/show_bug.cgi?id=100728

        Reviewed by Hajime Morita.

        * src/DateTimeChooserImpl.h:
        (DateTimeChooserImpl): Add a factory function, and made the constructor private.
        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::create): Added.
        (WebKit::DateTimeChooserImpl::setValueAndClosePopup):
        Protect this because JavaScript code might run during didChooseValue.

        * src/ChromeClientImpl.h:
        (ChromeClientImpl): Follow the ChromeClient change.
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::openDateTimeChooser):
        Use DateTimeChooserImpl::create.


2012-10-29  James Robinson  <jamesr@chromium.org>

        [chromium] Null-check WebViewImpl::m_client before calling invalidateRect() on it
        https://bugs.webkit.org/show_bug.cgi?id=100716

        Reviewed by Dirk Pranke.

        This check was accidentally removed in r132862 and the value is null in at least some unit tests.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::invalidateRect):

2012-10-29  Vincent Scheib  <scheib@chromium.org>

        Unreviewed, rolling out r132845.
        http://trac.webkit.org/changeset/132845
        https://bugs.webkit.org/show_bug.cgi?id=99975

        Broke chromium builds, linker errors from
        IDBBindingUtilitiesTest

        * tests/IDBBindingUtilitiesTest.cpp:
        (WebCore::TEST):

2012-10-29  James Robinson  <jamesr@chromium.org>

        [chromium] Defer commits between page unload and first invalidation in threaded compositing mode
        https://bugs.webkit.org/show_bug.cgi?id=100702

        Reviewed by Adrienne Walker.

        In threaded compositing mode, it's not terribly useful to commit after unloading a page and before receiving
        the first invalidation for the new page since the document is likely not loaded enough to paint usefully.
        This defers commits from the time compositing is deactivated (which in force compositing mode only happens
        at FrameView destruction) until we get the first invalidation from WebCore.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::invalidateContentsAndRootView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::invalidateRect):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-10-29  Stephen White  <senorblanco@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-29  Dan Carney  <dcarney@google.com>

        Remove ensureAuxiliaryContext
        https://bugs.webkit.org/show_bug.cgi?id=99975

        Reviewed by Adam Barth.

        Updated tests to use correct v8 context.

        * tests/IDBBindingUtilitiesTest.cpp:
        (WebKit::checkKeyFromValueAndKeyPathInternal):
        (WebKit::checkKeyPathNullValue):
        (WebKit::injectKey):
        (WebKit::checkInjection):
        (WebKit::checkInjectionFails):
        (WebKit::checkKeyPathStringValue):
        (WebKit::checkKeyPathNumberValue):
        (WebKit::scriptExecutionContext):
        (WebKit):
        (WebKit::TEST):

2012-10-29  Patrick Dubroy  <dubroy@chromium.org>

        Web Inspector: Style toolbar to match Chromium toolbar on Chromium/Mac.
        https://bugs.webkit.org/show_bug.cgi?id=100683

        Reviewed by Pavel Feldman.

        When in compact mode, style the Web Inspector toolbar using the same colors & gradients
        as the Chromium toolbar (Chromium port only).

        * src/js/devTools.css:
        (body.compact.platform-mac #toolbar):
        (body.compact.platform-mac.inactive #toolbar):
        (body.platform-mac.inactive #toolbar .toolbar-label):

2012-10-29  Eugene Klyuchnikov  <eustas.bug@gmail.com>

        Web Inspector: Timeline: make cpu-monitoring feature available only on capable browsers
        https://bugs.webkit.org/show_bug.cgi?id=100530

        Reviewed by Yury Semikhatsky.

        Motivation: cpu-monitoring feature looks like a glitch,
        when it is not supported by browser.

        * src/InspectorClientImpl.cpp: Implemented capability getter.
        * src/InspectorClientImpl.h:

2012-10-29  Kent Tamura  <tkent@chromium.org>

        [Chromium] Merge LocalizedNumberICUTest into LocaleICUTest
        https://bugs.webkit.org/show_bug.cgi?id=100648

        Reviewed by Kentaro Hara.

        LocalizedNumberICU was removed some months ago, and its features were
        merged to LocaleICU. We merge the test too.

        * WebKit.gypi: Remove LocalizedNumberICUTest.cpp
        * tests/LocaleICUTest.cpp:
        Move a #if because some headers are used unconditionally.
        (testDecimalSeparator): Moved from LocalizedNumberICUTest.cpp.
        (TEST_F): Ditto.
        (testNumberIsReversible): Ditto.
        (testNumbers): Ditto.
        * tests/LocalizedNumberICUTest.cpp: Removed.

2012-10-29  Kent Tamura  <tkent@chromium.org>

        [Chromium] Rename LocalizedDateICUTest.cpp to LocaleICUTest.cpp
        https://bugs.webkit.org/show_bug.cgi?id=100643

        Reviewed by Kentaro Hara.

        LocalizedDateICU was removed some months ago, and LocalizedDateICUTest
        actually had tests for LocaleICU.

        * WebKit.gypi:
        * tests/LocaleICUTest.cpp:
        - Renamed from Source/WebKit/chromium/tests/LocalizedDateICUTest.cpp.
        - Rename LocalizedDateICUTest class to LocaleICUTest.

2012-10-29  Kent Tamura  <tkent@chromium.org>

        [Chromium-linux] Fix build.

        * tests/LocalizedNumberICUTest.cpp:
        (testNumberIsReversible): Rename an argument.
        (testDecimalSeparator): Ditto.

2012-10-28  Kent Tamura  <tkent@chromium.org>

        Rename Localizer to Locale
        https://bugs.webkit.org/show_bug.cgi?id=100634

        Reviewed by Kentaro Hara.

        * src/ColorChooserUIController.h:
        (ColorChooserUIController):
        Rename m_localizer to m_locale, and follow other renamings.
        * src/ColorChooserUIController.cpp:
        (WebKit::ColorChooserUIController::ColorChooserUIController): Follow renamings.
        (WebKit::ColorChooserUIController::locale): Ditto.
        * src/DateTimeChooserImpl.h:
        (DateTimeChooserImpl):
        Rename m_localizer to m_locale, and follow other renamings.
        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::DateTimeChooserImpl): Follow renamings.
        (WebKit::DateTimeChooserImpl::writeDocument): Ditto.
        (WebKit::DateTimeChooserImpl::locale): Ditto.
        * tests/LocaleMacTest.cpp:
        (LocaleMacTest::formatTime): Ditto.
        (testNumberIsReversible): Ditto.
        * tests/LocalizedNumberICUTest.cpp:
        (testNumberIsReversible): Ditto.
        (testDecimalSeparator): Ditto.

2012-10-29  Kent Tamura  <tkent@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-28  Kent Tamura  <tkent@chromium.org>

        Rename Localizer.{cpp,h} to PlatformLocale.{cpp,h}
        https://bugs.webkit.org/show_bug.cgi?id=100627

        Reviewed by Yuta Kitamura.

        * src/ColorChooserUIController.h: Follow the file name renaming.
        * src/DateTimeChooserImpl.cpp: Ditto.

2012-10-27  Adam Barth  <abarth@webkit.org>

        [Chromium] Find-in-page reports matches in hidden iframes
        https://bugs.webkit.org/show_bug.cgi?id=100604

        Reviewed by Eric Seidel.

        This is actually a regression caused by
        http://trac.webkit.org/changeset/128784. This patch adds back some code
        removed in WebFrameImpl::shouldScopeMatches in r128784.

        This patch also introduces a test so that we don't make this mistake
        again.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::shouldScopeMatches):
        * tests/WebFrameTest.cpp:
        * tests/data/find_in_hidden_frame.html: Added.

2012-10-26  Kent Tamura  <tkent@chromium.org>

        [Chromium] Convert Chromium template string to an LDML date format
        https://bugs.webkit.org/show_bug.cgi?id=100128

        Reviewed by Tony Chang.

        * src/LocalizedStrings.cpp:
        (WebCore): Include WebCore/platform/text/DateTimeFormat.h.
        (WebCore::weekFormatInLDML):
        Replace $1 with yyyy, $2 with ww, and quote other parts.

2012-10-26  James Robinson  <jamesr@chromium.org>

        [chromium] Allow embedder to enter/leave force compositing mode
        https://bugs.webkit.org/show_bug.cgi?id=100458

        Reviewed by Adrienne Walker.

        This adds API for the embedder to decide when to enter and leave force compositing mode since it's
        more efficient to only toggle this setting when the embedder is about to produce a frame.

        * public/WebWidget.h:
        (WebWidget):
        (WebKit::WebWidget::enterForceCompositingMode):
        * src/WebFrameImpl.cpp:
        (WebKit::WebViewImpl::enterForceCompositingMode):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-10-26  Dominic Mazzoni  <dmazzoni@google.com>

        AX: Notification should be sent when accessibilityIsIgnored changes
        https://bugs.webkit.org/show_bug.cgi?id=99547

        Reviewed by Chris Fleizach.

        Adds new accessibility notifications.

        * public/WebAccessibilityNotification.h:
        * src/AssertMatchingEnums.cpp:

2012-10-26  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        Add feature flags for CSS Device Adaptation
        https://bugs.webkit.org/show_bug.cgi?id=95960

        Reviewed by Kenneth Rohde Christiansen.

        * features.gypi:

2012-10-26  Kent Tamura  <tkent@chromium.org>

        Disable ENABLE_INPUT_TYPE_WEEK on Chromium/Android
        https://bugs.webkit.org/show_bug.cgi?id=100457

        Reviewed by Kentaro Hara.

        It was enabled accidentally. Week input is not implemented in
        Android.

        * features.gypi: Remove ENABLE_INPUT_TYPE_WEEK=1 in the common block,
        add ENABLE_INPUT_TYPE_WEEK=0 in Android block, and add
        ENABLE_INPUT_TYPE_WEEK=1 in non-Android block.

2012-10-26  Kent Tamura  <tkent@chromium.org>

        [Chromium-Win] Support shortTimeFormat
        https://bugs.webkit.org/show_bug.cgi?id=100471

        Reviewed by Kentaro Hara.

        * tests/LocaleWinTest.cpp:
        (TEST_F): Update test expectations for the behavior change.

2012-10-25  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r132514.
        http://trac.webkit.org/changeset/132514
        https://bugs.webkit.org/show_bug.cgi?id=100440

        "Broke chromium content_browsertests AccessibilityAriaMenu
        AccessibilityInputRange AccessibilityListMarkers" (Requested
        by scheib on #webkit).

        * public/WebAccessibilityNotification.h:
        * src/AssertMatchingEnums.cpp:

2012-10-25  James Robinson  <jamesr@chromium.org>

        [chromium] Regression: navigating between composited pages doesn't cause redraw until scrolled
        https://bugs.webkit.org/show_bug.cgi?id=100396

        Reviewed by Adrienne Walker.

        This partially reverts r132173.  It's not valid to suppress invalidations in commitDocumentData since for small
        or cached pages this could load up the whole document.  Also adds and improves some of the tracing.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::commitDocumentData):
        (WebKit::WebFrameImpl::createFrameView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scheduleComposite):

2012-10-25  Sami Kyostila  <skyostil@chromium.org>

        Composited/HW content have the red and blue channels inverted in DRT on Chromium Android
        https://bugs.webkit.org/show_bug.cgi?id=98647

        Reviewed by James Robinson.

        WebLayerTreeView::compositeAndReadback() always gives back data in BGRA
        ordering (i.e., the first byte in memory is blue). This matches Skia's
        SkBitmap::kARGB_8888_Config ordering on all platforms except Android,
        where Skia's native format is RGBA (i.e., red comes first in memory).

        This mismatch causes layout test pixel comparison failures. This patch
        fixes the problem by reordering the channels right after readback.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):

2012-10-25  Dominic Mazzoni  <dmazzoni@google.com>

        AX: Notification should be sent when accessibilityIsIgnored changes
        https://bugs.webkit.org/show_bug.cgi?id=99547

        Reviewed by Chris Fleizach.

        Adds new accessibility notifications.

        * public/WebAccessibilityNotification.h:
        * src/AssertMatchingEnums.cpp:

2012-10-25  Dominik Röttsches  <dominik.rottsches@intel.com>

        Conditionalize XHR timeout support
        https://bugs.webkit.org/show_bug.cgi?id=100356

        Reviewed by Adam Barth.

        Adding XHR_TIMEOUT feature to conditionalize this on ports without network backend support.
        Defaults to off on chromium until webkit.org/b/98397 is solved.

        * features.gypi:

2012-10-25  Ben Wagner  <bungeman@chromium.org>

        Remove SK_DISABLE_EXTRACTSUBSET_OPAQUE_FIX define from skia_webkit.gyp, as it has been rebaselined.
        https://bugs.webkit.org/show_bug.cgi?id=100394

        Reviewed by Dirk Pranke.

        The define has been removed from the Skia code and the Chromium skia.gyp.
        The pixel tests affected have already been rebaselined. 

        * skia_webkit.gyp:

2012-10-22  Mikhail Naganov  <mnaganov@chromium.org>

        [Chromium] Add supportMultipleWindows setting, needed for Android
        https://bugs.webkit.org/show_bug.cgi?id=99716

        Reviewed by Adam Barth.

        Add supportMultipleWindows settings for reusing the same view when
        opening popups. This is required for emulating the behavior of
        Android WebView. Adding into WebCore, as other ports might want to
        use this setting in the future.

        * public/WebSettings.h:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchCreatePage):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setSupportsMultipleWindows):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-10-24  Mihai Parparita  <mihaip@chromium.org>

        [Chromium] Allow pushState and related history APIs to be disabled per context
        https://bugs.webkit.org/show_bug.cgi?id=99780

        Reviewed by Adam Barth.

        Add pushState context feature.

        * public/WebPermissionClient.h:
        (WebPermissionClient):
        (WebKit::WebPermissionClient::allowPushState):
        * src/ContextFeaturesClientImpl.cpp:
        (WebKit::ContextFeaturesClientImpl::askIfIsEnabled):

2012-10-24  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Remove screen-related functions from PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=97474

        Reviewed by Adam Barth.

        Screen-related functions like screenHorizontalDPI that
        used to be on PlatformSupport are now accessed through a new
        PlatformPageClient attached to Widget in WebCore-land, which is
        implemented by ChromeClientImpl in WebKit-land, which proxies
        calls to WebWidgetClient, which is actually implemented in
        Chromium-land.

        * public/WebScreenInfo.h:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::screenInfo):
        (WebKit):
        * src/ChromeClientImpl.h:
        (WebKit):
        (WebKit::ChromeClientImpl::platformPageClient):
        (ChromeClientImpl):
        * src/PlatformSupport.cpp:
        (WebCore):
        * src/WebPagePopupImpl.cpp:

2012-10-24  Sailesh Agrawal  <sail@chromium.org>

        Incorrect keycodes for numpad /, -, +, .
        https://bugs.webkit.org/show_bug.cgi?id=99188

        Reviewed by Tony Chang.

        In r57951 we switched to mapping keys by character code.
        This regressed the numpad keys which no longer match the Windows virtual key codes.
        This CL fixes this by never mapping numpad keys by character code.

        * src/mac/WebInputEventFactory.mm: Disallow mapping numpad keys by character code.
        (WebKit::windowsKeyCodeForKeyEvent):
        * tests/WebInputEventFactoryTestMac.mm: Test to verify that all numpad keys are correctly mapped.
        (TEST):

2012-10-24  Terry Anderson  <tdanderson@chromium.org>

        Handle two-finger tap gestures in the same way as long-press gestures
        https://bugs.webkit.org/show_bug.cgi?id=99947

        Reviewed by Adam Barth.

        Set the area of a two-finger tap gesture to be the area of the enclosing
        rectangle for the first finger down.

        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):

2012-10-24  Eric Uhrhane  <ericu@chromium.org>

        https://bugs.webkit.org/show_bug.cgi?id=99202
        [Chromium] shift-click fails to spawn new window with target=_blank

        Reviewed by Adam Barth

        No new tests in WebKit-land--see
        https://codereview.chromium.org/11235048/ for tests that I'll submit
        once this lands.

        * src/ChromeClientImpl.cpp:
        Change currentEventShouldCauseBackgroundTab to updatePolicyForEvent; we
        were looking up the right policy, then throwing it away if it wasn't
        forcing a background tab.
        (WebKit::ChromeClientImpl::updatePolicyForEvent):
        (WebKit::ChromeClientImpl::getNavigationPolicy):

2012-10-24  Ben Wagner  <bungeman@chromium.org>

        Create skia_webkit.gyp to improve rebaselining.
        https://bugs.webkit.org/show_bug.cgi?id=99759

        Reviewed by Dirk Pranke.

        This allows for code suppressions to be lifted atomically with new baselines.

        * skia_webkit.gyp: Added.

2012-09-27  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: provide memory instrumentation for ListHashSet
        https://bugs.webkit.org/show_bug.cgi?id=97786

        Reviewed by Vsevolod Vlasov.

        Added a test for ListHashSet memory instrumentation.

        * tests/MemoryInstrumentationTest.cpp:
        (WebCore::TEST):
        (WebCore):

2012-10-24  Noel Gordon  <noel.gordon@gmail.com>

        [chromium] Plumb DRT WebkitShouldRespectImageOrientation through to page settings
        https://bugs.webkit.org/show_bug.cgi?id=100197

        Reviewed by Kent Tamura.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setShouldRespectImageOrientation): set the WebCore page
        setting for shouldRespectImageOrientation.
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-10-23  Varun Jain  <varunjain@chromium.org>

        Context menu generated from touch gestures on textareas has
        context of the cursor position instead of the position where the event occurs.
        https://bugs.webkit.org/show_bug.cgi?id=99520

        Reviewed by Kenneth Rohde Christiansen.

        Send a synthetic mouse down event for context menu-summoning-gesture events so
        that textareas can correctly set cursors before receiving the context menu event.
        Also in this change, WebInputEvent::GestureTwoFingerTap now follows the same
        code path as WebInputEvent::GestureLongPress, hence fixing this bug for both gestures.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):

2012-10-23  Alec Flett  <alecflett@chromium.org>

        IndexedDB: refactor backend to use IDB*Metadata
        https://bugs.webkit.org/show_bug.cgi?id=100055

        Reviewed by Tony Chang.

        Update tests to reflect refactoring.

        * tests/IDBDatabaseBackendTest.cpp:
        * tests/IDBFakeBackingStore.h:

2012-10-23  Stephen White  <senorblanco@chromium.org>

        [chromium] Roll chromium DEPS r163297:163557
        https://bugs.webkit.org/show_bug.cgi?id=100146

        Reviewed by Adrienne Walker.

2012-10-23  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Add support for resolution media query
        https://bugs.webkit.org/show_bug.cgi?id=99077

        Reviewed by Antti Koivisto.

        Add support for the RESOLUTION_MEDIA_QUERY feature flag.

        * features.gypi:

2012-10-23  Kent Tamura  <tkent@chromium.org>

        Support full month names in DateTimeEditElement, and use them in input[type=month] by default
        https://bugs.webkit.org/show_bug.cgi?id=100060

        Reviewed by Kentaro Hara.

        * tests/LocaleMacTest.cpp:
        (TEST_F): Follow LocaleMac::monthFormat change.
        * tests/LocalizedDateICUTest.cpp:
        (TEST_F): Follow LocaleICU::monthFormat change.

2012-10-23  Dan Carney  <dcarney@google.com>

        When blocking localStorage, Firefox throws a security exception on access, and maybe so should we
        https://bugs.webkit.org/show_bug.cgi?id=63257

        Reviewed by Jochen Eisinger.

        Add security check and security check cache.

        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::StorageAreaProxy):
        (WebCore::StorageAreaProxy::length):
        (WebCore::StorageAreaProxy::key):
        (WebCore::StorageAreaProxy::getItem):
        (WebCore::StorageAreaProxy::setItem):
        (WebCore::StorageAreaProxy::removeItem):
        (WebCore::StorageAreaProxy::clear):
        (WebCore::StorageAreaProxy::contains):
        (WebCore::StorageAreaProxy::canAccessStorage):
        * src/StorageAreaProxy.h:
        (StorageAreaProxy):
        (WebCore::StorageAreaProxy::canAccessStorage):

2012-10-22  James Robinson  <jamesr@chromium.org>

        [chromium] Suppress compositor invalidations during FrameView recreation in force-compositing-mode
        https://bugs.webkit.org/show_bug.cgi?id=99882

        Reviewed by Adrienne Walker.

        In force compositing mode, page navigation temporarily takes us in and out of compositing mode because the
        root GraphicsLayer is owned by the FrameView which is destroyed and recreated. These changes generate
        invalidations on the WebViewClient that trigger frames but aren't actually terribly useful. WebCore suppresses
        repaints too early during page load to avoid flashing white or mostly white and to avoid impacting page load time.

        This suppresses compositor invalidations during FrameView recreation.

        Covered by chromium's page cycler performance tests.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::commitDocumentData):
        (WebKit::WebFrameImpl::createFrameView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::suppressInvalidations):
        (WebKit):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::scheduleComposite):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-10-22  Kent Tamura  <tkent@chromium.org>

        Introduce Localizer::standAloneMonthLabels
        https://bugs.webkit.org/show_bug.cgi?id=99963

        Reviewed by Kentaro Hara.

        Note that we don't add tests to LocaleWinTest because new function
        LocaleWin::standAloneMonthLabels is equivalent to monthLabels.

        * tests/LocaleMacTest.cpp:
        (LocaleMacTest::standAloneMonthLabel): Added a helper function.
        (TEST_F): Add some tests. We don't test ru_ru locale because it has
        different data on OSX versions.
        * tests/LocalizedDateICUTest.cpp:
        (LocalizedDateICUTest::standAloneMonthLabel): Added a helper function.
        (TEST_F): Add some tests.

2012-10-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r132119.
        http://trac.webkit.org/changeset/132119
        https://bugs.webkit.org/show_bug.cgi?id=100019

        Fails its own test on Mac platforms. (Requested by leviw on
        #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):

2012-10-22  Varun Jain  <varunjain@chromium.org>

        Context menu generated from touch gestures on textareas has
        context of the cursor position instead of the position where the event occurs.
        https://bugs.webkit.org/show_bug.cgi?id=99520

        Reviewed by Kenneth Rohde Christiansen.

        Send a synthetic mouse down event for context menu-summoning-gesture events so
        that textareas can correctly set cursors before receiving the context menu event.
        Also in this change, WebInputEvent::GestureTwoFingerTap now follows the same
        code path as WebInputEvent::GestureLongPress, hence fixing this bug for both gestures.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):

2012-10-22  Adam Barth  <abarth@webkit.org>

        [Chromium] Roll Chromium DEPS to get new version of V8
        https://bugs.webkit.org/show_bug.cgi?id=100015

        Unreviewed.

        * DEPS:
            - Bigger is better.

2012-10-22  Keishi Hattori  <keishi@webkit.org>

        Remove monthFormatInLDML
        https://bugs.webkit.org/show_bug.cgi?id=99971

        Reviewed by Kent Tamura.

        * src/LocalizedStrings.cpp:

2012-10-22  Keishi Hattori  <keishi@webkit.org>

        [Chromium] Rename WeekFormatInLDML to WeekFormatTemplate
        https://bugs.webkit.org/show_bug.cgi?id=99972

        Reviewed by Kent Tamura.

        * src/LocalizedStrings.cpp:
        (WebCore::weekFormatInLDML):

2012-10-22  Jocelyn Turcotte  <jocelyn.turcotte@digia.com>

        [Qt] Fix "ASSERTION FAILED: !document->inPageCache()" when loading a page
        https://bugs.webkit.org/show_bug.cgi?id=98514

        Reviewed by Kenneth Rohde Christiansen.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):

2012-10-22  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: merge "docked" state into the "dock side" enum.
        https://bugs.webkit.org/show_bug.cgi?id=99717

        Reviewed by Vsevolod Vlasov.

        Otherwise, it is hard to manage these inter-dependent flags.

        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::requestSetDockSide):
        * src/InspectorFrontendClientImpl.h:
        (InspectorFrontendClientImpl):

2012-10-21  Kent Tamura  <tkent@chromium.org>

        Page popup: Fix crash by events after closing
        https://bugs.webkit.org/show_bug.cgi?id=99951

        Reviewed by Hajime Morita.

        - We should not handle events after closePopup call.
        - We should uninstall a DOMWindowPagePopup supplement in closePopup.

        * src/WebPagePopupImpl.cpp:
        (WebKit::WebPagePopupImpl::WebPagePopupImpl):
        Initialize m_closing.
        (WebKit::WebPagePopupImpl::handleGestureEvent):
        Don't handle events if m_closing.
        (WebKit::WebPagePopupImpl::handleInputEvent): Ditto.
        (WebKit::WebPagePopupImpl::handleKeyEvent): Ditto.
        (WebKit::WebPagePopupImpl::closePopup):
        - Uninstall a DOMWindowPagePopup supplement.
        - Set m_closing.
        * src/WebPagePopupImpl.h:
        (WebPagePopupImpl): Declare m_closing.

2012-10-21  Terry Anderson  <tdanderson@chromium.org>

        [chromium] Storing the enclosing rect dimensions of the first finger for a two finger tap
        https://bugs.webkit.org/show_bug.cgi?id=99763

        Reviewed by Adam Barth.

        Add a struct |twoFingerTap| inside the union |data| of a WebGestureEvent. The fields |firstFingerWidth| 
        and |firstFingerHeight| will represent the dimensions of the enclosing rectangle corresponding to the 
        first touch point in the gesture. These will be used in a future CL to perform target fuzzing on a 
        two-finger tap gesture.

        Note: I chose not to name the two fields |width| and |height| so that they aren't confused with the 
        width and height of the gesture's bounding box, which contains the enclosing rectangles of both touch 
        points. My future fuzzing CL will only be concerned with the location and enclosing rectangle of the 
        first touch point.

        * public/WebInputEvent.h:

2012-10-19  Yusuf Ozuysal  <yusufo@google.com>

        [chromium] Double-tap defaults to zoom (should only do this on Android)
        https://bugs.webkit.org/show_bug.cgi?id=99600

        Reviewed by Adam Barth.

        Adds a web setting for enabling DoubleTapToZoom on a doubleTap gesture.
        This gesture was just needed for mobile, and the patch that implemented it caused regressions on other platforms.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setDoubleTapToZoomEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        (WebKit::WebSettingsImpl::doubleTapToZoomEnabled):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        * tests/WebFrameTest.cpp:

2012-10-19  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r131944.
        http://trac.webkit.org/changeset/131944
        https://bugs.webkit.org/show_bug.cgi?id=99891

        On second thoughts, not such a great idea (Requested by jamesr
        on #webkit).

        * public/WebView.h:
        (WebKit):
        (WebView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKit::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):

2012-10-19  Jochen Eisinger  <jochen@chromium.org>

        [chromium] when building a shared library component build, we must not depend on WebCore

        Unreviewed build fix.

        * WebKit.gyp:

2012-10-19  Tony Chang  <tony@chromium.org>

        Unreviewed, rolling out r131936.
        http://trac.webkit.org/changeset/131936
        https://bugs.webkit.org/show_bug.cgi?id=99717

        Broke the clang build

        * public/WebDevToolsFrontendClient.h:
        (WebKit::WebDevToolsFrontendClient::requestDockWindow):
        (WebKit::WebDevToolsFrontendClient::requestUndockWindow):
        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::requestAttachWindow):
        (WebKit):
        (WebKit::InspectorFrontendClientImpl::requestDetachWindow):
        (WebKit::InspectorFrontendClientImpl::requestSetDockSide):
        * src/InspectorFrontendClientImpl.h:
        (InspectorFrontendClientImpl):

2012-10-19  Alexandre Elias  <aelias@chromium.org>

        [chromium] API to pass impl thread via WebLayerTreeView
        https://bugs.webkit.org/show_bug.cgi?id=99863

        Reviewed by James Robinson.

        This adds an API to pass the compositor impl thread via WebView and
        WebLayerTreeView. This is currently a no-op change, but in the future
        this codepath will supercede WebCompositor. The goal is to avoid statics
        in compositor initialization.

        * public/WebView.h:
        (WebKit):
        (WebView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setCompositorImplThread):
        (WebKit):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKit::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):

2012-10-19  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: merge "docked" state into the "dock side" enum.
        https://bugs.webkit.org/show_bug.cgi?id=99717

        Reviewed by Vsevolod Vlasov.

        * public/WebDevToolsFrontendClient.h:
        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::requestSetDockSide):
        * src/InspectorFrontendClientImpl.h:
        (InspectorFrontendClientImpl):

2012-09-08  Alpha Lam  <hclam@chromium.org>

        [chromium] Implement deferred image decoding
        https://bugs.webkit.org/show_bug.cgi?id=94240

        Reviewed by Stephen White.

        Adding new unit tests for deferred image decoding.
        These tests are defined in DeferredImageDecoderTest.cpp. They verify
        image decoding happens only when SkPicture is rasterized for both
        scaled and non-scaled cases.

        Tests: DeferredImageDecoderTest.drawIntoSkPicture
               DeferredImageDecoderTest.drawScaledIntoSkPicture

        * WebKit.gypi:
        * public/WebSettings.h:
        * src/WebKit.cpp:
        (WebKit::shutdown):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setDeferredImageDecodingEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        * tests/DeferredImageDecoderTest.cpp: Added.
        (WebCore):
        (DeferredImageDecoderTest):
        (WebCore::DeferredImageDecoderTest::SetUp):
        (WebCore::DeferredImageDecoderTest::TearDown):
        (WebCore::TEST_F):
        * tests/MockImageDecoder.h: Added.
        (WebCore):
        (MockImageDecoder):
        (WebCore::MockImageDecoder::MockImageDecoder):
        (WebCore::MockImageDecoder::filenameExtension):
        (WebCore::MockImageDecoder::frameBufferAtIndex):
        (WebCore::MockImageDecoder::frameBufferRequestCount):

2012-10-19  Alpha Lam  <hclam@chromium.org>

        [chromium] Roll DEPS

        Unreviewed DEPS roll.

        * DEPS:

2012-10-19  Dongwoo Joshua Im  <dw.im@samsung.com>

        Rename ENABLE_CSS3_TEXT_DECORATION to ENABLE_CSS3_TEXT
        https://bugs.webkit.org/show_bug.cgi?id=99804

        Reviewed by Julien Chaffraix.

        CSS3 text related properties will be implemented under this flag,
        including text decoration, text-align-last, and text-justify.

        * features.gypi:

2012-10-19  Jochen Eisinger  <jochen@chromium.org>

        [chromium] fix the fix

        Unreviewed build fix.

        Forgot to invert the condition when to set the type to none in the
        previous attempt.

        * WebKit.gyp:

2012-10-19  Jochen Eisinger  <jochen@chromium.org>

        [chromium] Fix inside chromium build on Mac

        Unreviewed build fix.

        Xcode won't create a static library without any sources. So instead of
        ommitting the sources, just override the webkit_test_support's type
        with 'none'.

        * WebKit.gyp:

2012-10-17  Ilya Tikhonovsky  <loislo@chromium.org>

        Web Inspector: NMI provide data for mixing with tcmalloc heap dumps.
        https://bugs.webkit.org/show_bug.cgi?id=99457

        Reviewed by Yury Semikhatsky.

        Embedder's code wraps the map with counted objects info into InstrumentedObjectSizeProvider
        and forces downstream code to make tcmalloc heap snapshot.
        The default implementation is empty.

        * public/WebDevToolsAgentClient.h:
        (InstrumentedObjectSizeProvider):
        (WebKit::WebDevToolsAgentClient::InstrumentedObjectSizeProvider::~InstrumentedObjectSizeProvider):
        (WebKit::WebDevToolsAgentClient::dumpUncountedAllocatedObjects):
        (WebDevToolsAgentClient):
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::dumpUncountedAllocatedObjects):
        (WebKit):
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::getAllocatedObjects):
        (WebKit::WebDevToolsAgentImpl::dumpUncountedAllocatedObjects):
        (WebKit):
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2012-10-18  Kent Tamura  <tkent@chromium.org>

        Add shortMonthLabels and shortStandAloneMonthLabels to Localizer
        https://bugs.webkit.org/show_bug.cgi?id=99787

        * tests/LocaleMacTest.cpp:
        (TEST_F): Disable tests depends on OS X versions.

2012-10-18  Kent Tamura  <tkent@chromium.org>

        Add shortMonthLabels and shortStandAloneMonthLabels to Localizer
        https://bugs.webkit.org/show_bug.cgi?id=99787

        Reviewed by Kentaro Hara.

        * tests/LocaleMacTest.cpp:
        (LocaleMacTest::shortMonthLabel): A helper.
        (LocaleMacTest::shortStandAloneMonthLabel): Ditto.
        (TEST_F): Added tests for some locales.
        * tests/LocaleWinTest.cpp:
        (LocaleWinTest::shortMonthLabel): A helper.
        (TEST_F): Added tests for some locales. We don't test
        LocaleWin::shortStandAloneMonthLabels because it is identical to
        shortMonthLabels.
        * tests/LocalizedDateICUTest.cpp:
        (LocalizedDateICUTest::shortMonthLabel): A helper.
        (LocalizedDateICUTest::shortStandAloneMonthLabel): Ditto.
        (TEST_F): Added tests for some locales.

2012-10-18  Jochen Eisinger  <jochen@chromium.org>

        [chromium] Add a webkit_test_support target that WebTestingSupport
        https://bugs.webkit.org/show_bug.cgi?id=99772

        Reviewed by Adam Barth.

        Before, embedders would need to compile the WebTestingSupport.cpp
        themselves, which in turn depends on WebCore headers.

        * WebKit.gyp:

2012-10-18  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] Re-enable gesture highlight layout tests, fix GestureLongPress regression.
        https://bugs.webkit.org/show_bug.cgi?id=99632

        Reviewed by James Robinson.

        Re-enable layout tests for gesture highlights. Includes fix for GestureTapCancel test.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):

2012-10-18  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r131810.
        http://trac.webkit.org/changeset/131810
        https://bugs.webkit.org/show_bug.cgi?id=99762

        Broke linux debug webkit_unit_tests (Requested by
        danakj|gardening on #webkit).

        * WebKit.gypi:
        * public/WebSettings.h:
        * src/WebKit.cpp:
        (WebKit::shutdown):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        * tests/DeferredImageDecoderTest.cpp: Removed.
        * tests/MockImageDecoder.h: Removed.

2012-10-18  Alpha Lam  <hclam@chromium.org>

        [chromium] Implement deferred image decoding
        https://bugs.webkit.org/show_bug.cgi?id=94240

        Reviewed by Stephen White.

        Adding new unit tests for deferred image decoding.
        These tests are defined in DeferredImageDecoderTest.cpp. They verify
        image decoding happens only when SkPicture is rasterized for both
        scaled and non-scaled cases.

        Tests: DeferredImageDecoderTest.drawIntoSkPicture
               DeferredImageDecoderTest.drawScaledIntoSkPicture

        * WebKit.gypi:
        * public/WebSettings.h:
        * src/WebKit.cpp:
        (WebKit::shutdown):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setDeferredImageDecodingEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        * tests/DeferredImageDecoderTest.cpp: Added.
        (WebCore):
        (DeferredImageDecoderTest):
        (WebCore::DeferredImageDecoderTest::SetUp):
        (WebCore::DeferredImageDecoderTest::TearDown):
        (WebCore::TEST_F):
        * tests/MockImageDecoder.h: Added.
        (WebCore):
        (MockImageDecoder):
        (WebCore::MockImageDecoder::MockImageDecoder):
        (WebCore::MockImageDecoder::filenameExtension):
        (WebCore::MockImageDecoder::frameBufferAtIndex):
        (WebCore::MockImageDecoder::frameBufferRequestCount):

2012-10-18  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-18  Pablo Flouret  <pablof@motorola.com>

        Implement css3-conditional's @supports rule
        https://bugs.webkit.org/show_bug.cgi?id=86146

        Reviewed by Antti Koivisto.

        * features.gypi:
            Add an ENABLE_CSS3_CONDITIONAL_RULES flag.

2012-10-18  Kent Tamura  <tkent@chromium.org>

        Add Localizer::monthFormat and implementations
        https://bugs.webkit.org/show_bug.cgi?id=99704

        * tests/LocaleMacTest.cpp:
        (TEST_F): Remove tests for fr_FR and ru locales for a compatibility reason.

2012-10-18  Kent Tamura  <tkent@chromium.org>

        Add Localizer::monthFormat and implementations
        https://bugs.webkit.org/show_bug.cgi?id=99704

        Reviewed by Kentaro Hara.

        * tests/LocaleMacTest.cpp:
        (LocaleMacTest::monthFormat): A helper function.
        (TEST_F): Added some tests.
        * tests/LocaleWinTest.cpp:
        (LocaleWinTest::monthFormat): A helper function.
        (TEST_F): Added some tests.
        * tests/LocalizedDateICUTest.cpp:
        (LocalizedDateICUTest::monthFormat): A helper function.
        (TEST_F): Added some tests.

2012-10-17  Mike West  <mkwst@chromium.org>

        Move mixed content logic out of FrameLoader
        https://bugs.webkit.org/show_bug.cgi?id=45638

        Reviewed by Eric Seidel.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::checkIfRunInsecureContent):
            Use the new method location.

2012-10-17  Shashi Shekhar  <shashishekhar@google.com>

        Remove redundant sdk_build parameter.
        https://bugs.webkit.org/show_bug.cgi?id=99648

        Reviewed by Adam Barth.

        sdk_build parameter is no longer needed.

        * WebKitUnitTests.gyp:

2012-10-17  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-17  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Explicitly send null/undefined/integers to frontend IDBCallbacks
        https://bugs.webkit.org/show_bug.cgi?id=99619

        Reviewed by Adam Barth.

        Hook up new undefined/integer-based onSuccess handlers.

        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::onSuccess):
        (WebKit):
        * src/IDBCallbacksProxy.h:
        (IDBCallbacksProxy):
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onSuccess):
        (WebKit):
        * src/WebIDBCallbacksImpl.h:
        (WebIDBCallbacksImpl):
        * tests/IDBAbortOnCorruptTest.cpp:
        * tests/IDBDatabaseBackendTest.cpp:

2012-10-17  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        plugins: Allow a plugin to dictate whether it can receive drag events or not.
        https://bugs.webkit.org/show_bug.cgi?id=99355

        Reviewed by Tony Chang.

        Introduce WebPlugin::canProcessDrag() and use that to implement PluginViewBase::canProcessDrag.

        * public/WebPlugin.h:
        (WebKit::WebPlugin::canProcessDrag):
        (WebPlugin):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::canProcessDrag):
        (WebKit):
        (WebKit::WebPluginContainerImpl::handleMouseEvent):
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):

2012-10-17  Jian Li  <jianli@chromium.org>

        [chromium] Remove legacy members from WebDraggableRegion
        https://bugs.webkit.org/show_bug.cgi?id=99612

        Reviewed by Adam Barth.

        Those legacy members to support old syntax are not longer needed after
        chromium side changes landed.

        * public/WebDraggableRegion.h:
        (WebDraggableRegion):

2012-10-17  Joshua Bell  <jsbell@chromium.org>

        [Chromium] IndexedDB: Delete obsolete public API method
        https://bugs.webkit.org/show_bug.cgi?id=99603

        Reviewed by Dimitri Glazkov.

        Remove a stub that was necessary while the Chromium side of webkit.org/b/99097 was landing.

        * public/WebIDBTransactionCallbacks.h:

2012-10-17  Keishi Hattori  <keishi@webkit.org>

        Localized date should be based on LDML
        https://bugs.webkit.org/show_bug.cgi?id=99570

        Reviewed by Kent Tamura.

        * tests/LocaleMacTest.cpp:
        (TEST_F): Updated expectations.
        * tests/LocaleWinTest.cpp:
        (TEST_F): Updated expectations.

2012-10-16  MORITA Hajime  <morrita@google.com>

        [Shadow DOM][V8] WebCore::V8DOMWindow::installPerContextProperties() is slow when shadowDOMEnabled flag is on.
        https://bugs.webkit.org/show_bug.cgi?id=99428

        Reviewed by Adam Barth.

        * src/ContextFeaturesClientImpl.cpp:
        (WebKit::ContextFeaturesClientImpl::askIfIsEnabled):

2012-10-16  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Stub out chromium success handlers for integers and undefined values
        https://bugs.webkit.org/show_bug.cgi?id=99527

        Reviewed by Adam Barth.

        Add onSuccess stubs so that chromium IPC glue can land.

        * public/WebIDBCallbacks.h:
        (WebKit::WebIDBCallbacks::onSuccess):

2012-10-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-16  Jian Li  <jianli@chromium.org>

        Rename feature define ENABLE_WIDGET_REGION to ENABLE_DRAGGBALE_REGION
        https://bugs.webkit.org/show_bug.cgi?id=98975

        Reviewed by Adam Barth.

        Renaming is needed to better match with the draggable region code.

        * features.gypi:
        * src/ChromeClientImpl.cpp:
        (WebKit):
        * src/ChromeClientImpl.h:
        (ChromeClientImpl):
        * src/WebDocument.cpp:
        (WebKit::WebDocument::draggableRegions):

2012-10-16  Min Qin  <qinmin@chromium.org>

        Fix a bug that we are using scaled damage rect for plugins inside an iframe
        https://bugs.webkit.org/show_bug.cgi?id=99488

        Reviewed by Adam Barth.

        There is a bug with a previous webkit patch: https://bugs.webkit.org/show_bug.cgi?id=98468
        In that patch, we incorrectly applied the main frame's scale factor to inner iframes.
        However, the damageRect is not scaled inside an iFrame. So doing the intersect will retrieve wrong result here.
        In WebPluginContainerImpl::calculateGeometry, the windowRect also does not apply main frame's scale factor.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::paint):

2012-10-16  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Android: Need a way to get appropriate font for some specific characters.
        https://bugs.webkit.org/show_bug.cgi?id=67587

        Reviewed by Adam Barth.

        Define ENABLE_OPENTYPE_VERTICAL=1 on Android.

        * features.gypi:

2012-10-16  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: Add the chromium API for RTCDataChannel
        https://bugs.webkit.org/show_bug.cgi?id=99435

        Reviewed by Adam Barth.

        Adding checks for RTCDataChannel.

        * src/AssertMatchingEnums.cpp:

2012-10-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-15  Peter Beverloo  <peter@chromium.org>

        [Chromium] Enable FAST_MOBILE_SCROLLING for Android
        https://bugs.webkit.org/show_bug.cgi?id=99401

        Reviewed by Adam Barth.

        * features.gypi: Add the define to the Android-only section.

2012-10-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-15  Peter Beverloo  <peter@chromium.org>

        [Chromium] The default target for Android builds should be "all" instead of "All"
        https://bugs.webkit.org/show_bug.cgi?id=98879

        Reviewed by Adam Barth.

        The default gyp target for Android builds is being overridden in Chromium's
        envsetup_functions.sh to "All" (whereas the rest of Chromium and WebKit use "all"),
        because Android wants to use a different list of main targets. There is
        no need to do this for the WebKit project, and it's breaking ninja.

        * gyp_webkit:

2012-10-15  Kent Tamura  <tkent@chromium.org>

        LocaleMacTest.formatDate is failing on Mac 10.8
        https://bugs.webkit.org/show_bug.cgi?id=99330

        It seems OS X 10.8 and 10.7 return different date formats for ja_JP
        locale. We should not test such locales.

        * tests/LocaleMacTest.cpp:
        (TEST_F): Remove a test for ja_JP locale.

2012-10-15  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Pass type of error causing abort to IDBTransaction::onAbort
        https://bugs.webkit.org/show_bug.cgi?id=99097

        Reviewed by Tony Chang.

        Plumbing to pass details about the cause of the transaction abort through to the
        front end.

        * public/WebIDBTransactionCallbacks.h:
        (WebKit):
        (WebKit::WebIDBTransactionCallbacks::onAbort):
        * src/IDBTransactionCallbacksProxy.cpp:
        (WebKit::IDBTransactionCallbacksProxy::onAbort):
        * src/IDBTransactionCallbacksProxy.h:
        (IDBTransactionCallbacksProxy):
        * src/WebIDBTransactionCallbacksImpl.cpp:
        (WebKit::WebIDBTransactionCallbacksImpl::onAbort):
        * src/WebIDBTransactionCallbacksImpl.h:
        (WebIDBTransactionCallbacksImpl):

2012-10-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-14  Sam Weinig  <sam@webkit.org>

        Make UserScript and UserStyleSheet value objects that are copyable
        https://bugs.webkit.org/show_bug.cgi?id=99275

        Reviewed by Tim Horton.

        * src/WebViewImpl.cpp:
        (WebKit::WebView::addUserScript):
        (WebKit::WebView::addUserStyleSheet):
        Update for new PageGroup function signatures.

2012-10-12  Adam Barth  <abarth@webkit.org>

        [Chromium] Remove used frameForEnteredContext API
        https://bugs.webkit.org/show_bug.cgi?id=99201

        Reviewed by Eric Seidel.

        No one in Chromium-land understands the difference between
        frameForEnteredContext and frameForCurrentContext. Rather than give
        folks a confusing choice, let's just expose the one we most often want
        to use.

        I've already removed all callers of frameForEnteredContext downstream.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit):

2012-10-12  Joshua Bell  <jsbell@chromium.org>

        [Chromium] IndexedDB: WebKit API plumbing to pass abort reason code/message to script
        https://bugs.webkit.org/show_bug.cgi?id=99193

        Reviewed by Adam Barth.

        Add database error (code, message) to payload for back-end to front-end abort call,
        so that scripts can determine why the abort occurred - e.g. ConstraintError during
        indexing. This API change allows the Chromium plumbing to land; the real implementation
        is in http://webkit.org/b/99097 and will land later.

        * public/WebIDBTransactionCallbacks.h:
        (WebKit):
        (WebIDBTransactionCallbacks):
        (WebKit::WebIDBTransactionCallbacks::onAbort):

2012-10-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-11  Kenichi Ishibashi  <bashi@chromium.org>

        [Chromium] Use harfbuzz-ng by default on Linux
        https://bugs.webkit.org/show_bug.cgi?id=97281

        Reviewed by Tony Chang.

        * features.gypi: Enable WTF_USE_HARFBUZZ_NG when use_x11 == 1.

2012-10-11  Nat Duca  <nduca@chromium.org>

        Expose high-resolution on requestAnimationFrame callback
        https://bugs.webkit.org/show_bug.cgi?id=66683

        This changes requestAnimationFrame's animationStartTime argument
        to be a high resolution DOM timestamp, per disucssion here:
        http://lists.w3.org/Archives/Public/public-web-perf/2012Apr/0004.html

        Reviewed by James Robinson.

        * src/PageWidgetDelegate.cpp:
        (WebKit::PageWidgetDelegate::animate):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::updateAnimations):

2012-10-11  Jay Civelli  <jcivelli@chromium.org>

        Test for a fix for a crasher when generating MHTML for a page containing SVG images.
        https://bugs.webkit.org/show_bug.cgi?id=99105

        Reviewed by Adam Barth.

        * page/PageSerializer.cpp:
        (WebCore::PageSerializer::serializeCSSStyleSheet):
        (WebCore::PageSerializer::addImageToResources):

2012-10-11  Adam Barth  <abarth@webkit.org>

        [Chromium] Improve the comment describing mainWorldScriptContext
        https://bugs.webkit.org/show_bug.cgi?id=99092

        Reviewed by James Robinson.

        * public/WebFrame.h:
        (WebFrame):
            - Add some more text about what this API does so that folks who
              call it know what they need to worry about.

2012-10-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-11  Mihai Balan  <mibalan@adobe.com>

        Always enable the experiments tab for WebKit nightly

        Web Inspector: Enabling experiments tab in WebKit nightly.
        https://bugs.webkit.org/show_bug.cgi?id=98923

        Reviewed by Pavel Feldman.

        Enabling Web Inspector experiments tab in WebKit nightly. This is done by adding a new
        Preference key, Preferences.experimentsEnabled. Default values are true for WebKit and false
        for Chromium. They can also be overridden as before (in Chromium)

        * src/js/DevTools.js:

2012-10-11  Kent Tamura  <tkent@chromium.org>

        Introduce Localizer::isRTL, and use it in DateTimeChooserImpl
        https://bugs.webkit.org/show_bug.cgi?id=98992

        * tests/LocalizedDateICUTest.cpp:
        (TEST_F): Re-enabled isRTL test.

2012-10-11  Kent Tamura  <tkent@chromium.org>

        [Chromium] Disable LocalizedDateICUTest.isRTL
        https://bugs.webkit.org/show_bug.cgi?id=98992

        * tests/LocalizedDateICUTest.cpp:
        (TEST_F): Disabled.

2012-10-11  Kent Tamura  <tkent@chromium.org>

        [Chromium] Attempt to fix LocalizedDateICUTest.isRTL
        https://bugs.webkit.org/show_bug.cgi?id=98992

        * tests/LocalizedDateICUTest.cpp:
        (TEST_F):

2012-10-11  Kent Tamura  <tkent@chromium.org>

        Introduce Localizer::isRTL, and use it in DateTimeChooserImpl
        https://bugs.webkit.org/show_bug.cgi?id=98992

        Reviewed by Kentaro Hara.

        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::writeDocument): Use Localizer::isRTL.

        * tests/LocaleMacTest.cpp:
        (LocaleMacTest::isRTL): Added a helper function.
        (TEST_F): Added tests.
        * tests/LocaleWinTest.cpp:
        (LocaleWinTest::isRTL): Added a helper function.
        (TEST_F): Added tests.
        * tests/LocalizedDateICUTest.cpp:
        (LocalizedDateICUTest::isRTL): Added a helper function.
        (TEST_F): Added tests.

2012-10-10  Kent Tamura  <tkent@chromium.org>

        [Chromium] Calendar picker: should use consistent Localizer object
        https://bugs.webkit.org/show_bug.cgi?id=98983

        Reviewed by Kentaro Hara.

        In Source/WebKit/chromium/src/DateTimeChooserImpl.cpp, we used two
        Localizer objects, one was m_localizer and another was 'localizer' local
        object in writeDocument. We should use single Localizer object.

        Also, Localizer::create(nullAtom) had unexpected behaviors in ICU
        environment; e.g. Month labels in a calendar picker were numeric. This
        patch fixes it, and this is covered by
        fast/forms/date/calendar-picker-appearance.html.

        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::writeDocument):
        Use m_localizer.

2012-10-10  Justin Novosad  <junov@chromium.org>

        [Chromium] Smoother animation for non-RAF 2D canvas animations
        https://bugs.webkit.org/show_bug.cgi?id=97918

        Reviewed by Stephen White.

        New unit test to verify the automatic flushing of deferred 2d canvas
        layers when scripted animations are more than one full frame ahead 
        of the compositor. Also verifies that automatic flushing does not
        kick-in when the skip on clear optimization fires

        * DEPS:
        * tests/Canvas2DLayerManagerTest.cpp:
        (FakeCanvas2DLayerBridge::fakeSkipPendingDrawCommands):
        To fake the skip on clear optimization
        (FakeCanvas2DLayerBridge):
        (Canvas2DLayerManagerTest):
        (Canvas2DLayerManagerTest::doDeferredFrameTestTask):
        Method that simulates a javascript scheduled action that draws to
        a 2D canvas layer
        (DeferredFrameTestTask):
        Task object to simulate a scheduled action. This is so the unit
        test can cover the TaskObserver behavior of Canvas2DLayerManager.
        (Canvas2DLayerManagerTest::DeferredFrameTestTask::DeferredFrameTestTask):
        (Canvas2DLayerManagerTest::deferredFrameTest):
        The unit test implementation, which uses the WebThread run loop to
        post tasks that touch the canvas layer.

2012-10-10  Leandro Gracia Gil  <leandrogracia@chromium.org>

        [Chromium] Update selection on long press to match normal delimiters.
        https://bugs.webkit.org/show_bug.cgi?id=98947

        Reviewed by Adam Barth.

        Make the long press selection behaviour consistent.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::WebViewImpl::detectContentOnTouch):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebViewTest.cpp:

2012-10-10  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-10  Jon Lee  <jonlee@apple.com>

        [WK2] Activate plugins when user clicks on snapshot
        https://bugs.webkit.org/show_bug.cgi?id=98328
        <rdar://problem/12426681>

        Reviewed by Brady Eidson.

        * src/FrameLoaderClientImpl.h:
        (WebKit::FrameLoaderClientImpl::recreatePlugin): Stub implementation of recreatePlugin().

2012-10-10  David Barton  <dbarton@mathscribe.com>

        Turn on ENABLE_MATHML for Chromium
        https://bugs.webkit.org/show_bug.cgi?id=96960

        Reviewed by Adam Barth.

        * features.gypi:

2012-10-10  Varun Jain  <varunjain@chromium.org>

        [chromium] Spelling and grammar markers are pixelated in hidpi.
        https://bugs.webkit.org/show_bug.cgi?id=98339

        Reviewed by Stephen White.

        We create separate bitmaps for markers in normal and hidpi mode as per
        specification from UX and choose the right bitmap based on the current
        device scale factor.

        * src/PageWidgetDelegate.cpp:
        (WebKit::PageWidgetDelegate::paint):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paintRootLayer):

2012-10-10  Simon Fraser  <simon.fraser@apple.com>

        Store a visible rect in GraphicsLayers, and optionally dump it in layerTreeAsText
        https://bugs.webkit.org/show_bug.cgi?id=98839

        Reviewed by Sam Weinig.

        Add a flag to layerTreeAsText() so that tests can optionally include this visible rect in
        layer tree dumps. This output will be platform-specific, so we don't want to do it unconditionally.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::layerTreeAsText):

2012-10-08  Kent Tamura  <tkent@chromium.org>

        [Chromium] Add WebElement::hasHTMLTagName, and deprecate hasTagName
        https://bugs.webkit.org/show_bug.cgi?id=98714

        Reviewed by Abhishek Arya.

        * public/WebElement.h:
        (WebElement):
        - Add a comment to tagName().
        - Add a comment to hasTagName().
        - Declare hasHTMLTagName(), which is useful to check HTML tags.
        * src/WebElement.cpp:
        (WebKit::WebElement::hasHTMLTagName): Added.

2012-10-09  Jian Li  <jianli@chromium.org>

        Update the CSS property used to support draggable regions.
        https://bugs.webkit.org/show_bug.cgi?id=97156

        Reviewed by Adam Barth.

        Update the code to use the new name annotatedRegions to work for
        both features.

        * public/WebDraggableRegion.h: Rename dashboardRegions to annotatedRegions.
        (WebDraggableRegion):
        * src/ChromeClientImpl.cpp: Rename dashboardRegions to annotatedRegions.
        (WebKit::ChromeClientImpl::annotatedRegionsChanged):
        * src/ChromeClientImpl.h: Rename dashboardRegions to annotatedRegions.
        (ChromeClientImpl):
        * src/WebDocument.cpp: Rename dashboardRegions to annotatedRegions.
        (WebKit::WebDocument::draggableRegions):

2012-10-09  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Add drop event for plugins.
        https://bugs.webkit.org/show_bug.cgi?id=98827

        Reviewed by Adam Barth.

        Add conversion for drop events.

        * public/WebDragStatus.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleDragEvent):

2012-10-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r130811 and r130821.
        http://trac.webkit.org/changeset/130811
        http://trac.webkit.org/changeset/130821
        https://bugs.webkit.org/show_bug.cgi?id=98831

        Broke date-suggestion-picker-appearance-with-scroll-bar.html
        (Requested by abarth|gardening on #webkit).

        * src/FindInPageCoordinates.cpp:
        (WebKit::toNormalizedRect):
        * src/LinkHighlight.cpp:
        (WebKit::convertTargetSpaceQuadToCompositedLayer):
        * src/WebInputEventConversion.cpp:
        (WebKit::convertLocationForRenderObject):

2012-10-09  Ben Murdoch  <benm@google.com>

        [chromium][Android] Add WebSecurityOrigin::grantLoadLocalResources()
        https://bugs.webkit.org/show_bug.cgi?id=97689

        Reviewed by Adam Barth.

        This change exposes the WebCore::SecurityOrigin::grantLoadLocalResources()
        function to the Chromium WebKit API layer. This is needed in Chromium
        to implement the Android WebView.loadDataWithBaseUrl function in a
        compatible manner.

        Please see crbug.com/152223 for further information and the chromium
        side patch.

        * public/WebSecurityOrigin.h:
        (WebSecurityOrigin): Add grantLoadLocalResources() API.
        * src/WebSecurityOrigin.cpp:
        (WebKit::WebSecurityOrigin::grantLoadLocalResources):
            Implement the API by calling through to the WebCore function
            of the same name.
        (WebKit):

2012-10-09  Julien Chaffraix  <jchaffraix@webkit.org>

        [Chromium] Chromium DEPS has a stray directory, turning our Win bots red
        https://bugs.webkit.org/show_bug.cgi?id=98817

        Reviewed by Dirk Pranke.

        * DEPS: Removed the stray directory which solved the redness on several of our bots.

2012-10-09  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Make sure events are transformed correctly for plugins.
        https://bugs.webkit.org/show_bug.cgi?id=89250

        Reviewed by Tony Chang.

        The events arriving in WebPluginContainerImpl are in the coordinate
        space of the page containing the plugin. Before the events are
        dispatched to the plugin, it is necessary to convert them into the
        plugin's own coordinate system.

        * src/WebInputEventConversion.cpp:
        (WebKit::convertLocationForRenderObject): Transforms an event location for the specified RenderObject.
        (WebKit):
        (WebKit::updateWebMouseEventFromWebCoreMouseEvent): Refactored code to reduce code-duplication for mouse and wheel events.
        (WebKit::WebMouseEventBuilder::WebMouseEventBuilder):
        (WebKit::WebMouseWheelEventBuilder::WebMouseWheelEventBuilder):
        (WebKit::addTouchPoints):
        (WebKit::WebTouchEventBuilder::WebTouchEventBuilder):
        (WebKit::WebGestureEventBuilder::WebGestureEventBuilder):
        * src/WebInputEventConversion.h:
        (WebCore):
        (WebKit):
        (WebMouseEventBuilder):
        (WebMouseWheelEventBuilder):
        (WebTouchEventBuilder):
        (WebGestureEventBuilder):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleMouseEvent):
        (WebKit::WebPluginContainerImpl::handleWheelEvent):

2012-10-09  Garrett Casto  <gcasto@chromium.org>

        Allow users to specify a different hover image for TextFieldDecorationElement
        https://bugs.webkit.org/show_bug.cgi?id=93662

        Reviewed by Kent Tamura.

        * public/WebTextFieldDecoratorClient.h:
        (WebTextFieldDecoratorClient):
        (WebKit::WebTextFieldDecoratorClient::imageNameForHoverState): Allow users to specify the name of the image for mouseover.
        * src/TextFieldDecoratorImpl.cpp:
        (WebKit::TextFieldDecoratorImpl::imageForReadonlyState):
        (WebKit::TextFieldDecoratorImpl::imageForHoverState):
        (WebKit):
        * src/TextFieldDecoratorImpl.h:
        (TextFieldDecoratorImpl):

2012-10-09  Keishi Hattori  <keishi@webkit.org>

        Page popup should be smarter about its layout
        https://bugs.webkit.org/show_bug.cgi?id=98499

        Reviewed by Kent Tamura.

        * src/ColorChooserUIController.cpp:
        (WebKit::ColorChooserUIController::writeDocument): Send anchorRectInScreen, rootViewRectInScreen, and confineToRootView.
        * src/DateTimeChooserImpl.cpp:
        (WebKit::DateTimeChooserImpl::writeDocument): Send anchorRectInScreen, rootViewRectInScreen, and confineToRootView.
        * src/WebPagePopupImpl.cpp:
        (WebKit::WebPagePopupImpl::init): We keep the originBoundsInRootView argument for MockPagePopupDriver.
        (WebKit::WebPagePopupImpl::resize): WebPagePopupImpl isn't in charge of setting the popup position any more.
        * src/WebPagePopupImpl.h:
        (WebPagePopupImpl):

2012-10-08  Dirk Pranke  <dpranke@chromium.org>

        Chromium DEPS roll r160657:160764.

        Unreviewed.

        * DEPS:

2012-10-08  Alec Flett  <alecflett@chromium.org>

        IndexedDB: remove autogenerated objectStore/index id code
        https://bugs.webkit.org/show_bug.cgi?id=98085

        Reviewed by Tony Chang.

        Remove support for unused createObjectStore/createIndex. These
        methods will go away entirely when
        https://bugs.webkit.org/show_bug.cgi?id=98682 is fixed.

        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::createObjectStore):
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        (WebIDBObjectStoreImpl):

2012-10-08  Sami Kyostila  <skyostil@chromium.org>

        Some non-scrollable elements are added to non-fast-scrollable region
        https://bugs.webkit.org/show_bug.cgi?id=97927

        Reviewed by James Robinson.

        Test that a non-scrollable RenderLayer isn't added to the non-fast scrollable
        region.

        The test in this patch consists of a web page where both the html and
        body elements clip horizontal overflow. This results in a hierarchy
        where the body element gets a scrollable RenderLayer. However, that
        layer isn't (interactively) scrollable because while the scroll geometry
        is calculated based on the amount of overflow, the scroll bars are
        hidden because of the "overflow-x: hidden" style.

        Previously this layer would have made the entire page part of the
        non-fast scrollable region. With this patch,
        RenderLayer::allowScrolling() is used as a pre-requisite for expanding
        the region, thus avoiding the problem.

        * tests/ScrollingCoordinatorChromiumTest.cpp:
        (WebKit::TEST_F):
        (WebKit):
        * tests/data/clipped-body.html: Added.

2012-10-08  Sailesh Agrawal  <sail@chromium.org>

        Mac Chromium: Ignore system numpad modifier
        https://bugs.webkit.org/show_bug.cgi?id=97161

        Reviewed by Tony Chang.

        On Mac, arrow key events have numpad modifier set. This is inconsistent with other platforms.

        My fix is to only rely on keycode to decide when to set the numpad modifier.

        This code is not exersided by layout tests so I added a new unit test for this.

        * WebKit.gypi:
        * WebKitUnitTests.gyp:
        * src/mac/WebInputEventFactory.mm:
        (WebKit::isKeypadEvent): Removed check for numpad modifier.
        * tests/WebInputEventFactoryTestMac.mm: Added.
        (TEST): Added new test for WebInputEventFactory::keyboardEvent().

2012-10-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-10-07  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        Rename first/second to key/value in HashMap iterators
        https://bugs.webkit.org/show_bug.cgi?id=82784

        Reviewed by Eric Seidel.

        * src/WebGeolocationPermissionRequestManager.cpp:
        (WebGeolocationPermissionRequestManager::remove):
        * src/WebIDBMetadata.cpp:
        (WebKit::WebIDBMetadata::WebIDBMetadata):
        * src/WebIntent.cpp:
        (WebKit::WebIntent::extrasValue):
        * tests/MemoryInstrumentationTest.cpp:
        * tests/WebSocketExtensionDispatcherTest.cpp:
        (WebCore::TEST_F):

2012-10-06  Ilya Tikhonovsky  <loislo@chromium.org>

        Web Inspector: NMI fix String instrumentation the way it was discussed in WK97964
        https://bugs.webkit.org/show_bug.cgi?id=98500

        Reviewed by Benjamin Poulain.

        Current instrumentation incorrectly covers the case when StringImpl object has been created via StringImpl::createWithTerminatingNullCharacter().
        Looks like the only way to detect the strings that has been created from literals is to compare the addresses of buffer and stringImpl + 1.

        * tests/MemoryInstrumentationTest.cpp:

2012-10-05  Terry Anderson  <tdanderson@chromium.org>

        [chromium] Only define SK_SUPPORT_HINTING_SCALE_FACTOR when building for chromeOS
        https://bugs.webkit.org/show_bug.cgi?id=98526

        Reviewed by Stephen White.

        This is causing some problems with picture serialization between chrome 
        and the mainline skia tools. (Once this change lands and is gardened in, 
        I will make the corresponding change in chromium/skia/skia.gyp)

        * features.gypi:

2012-10-05  Adam Barth  <abarth@webkit.org>

        Unreviewed.

        Disable WebFrameTest.DivScrollIntoEditableTest. The test depends on
        some code that is conditionally compiled and therefore fails in some
        configurations.

        * tests/WebFrameTest.cpp:

2012-10-05  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] Enhance support for transforms in LinkHighlight.
        https://bugs.webkit.org/show_bug.cgi?id=94355

        Reviewed by Adrienne Walker.

        Improved handling of transformed highlight targets, where the transform goes beyond simple translation.

        * src/LinkHighlight.cpp:
        (WebKit::convertTargetSpaceQuadToCompositedLayer): Converts target space quad to composited layer coordinates.
        (WebKit):
        (WebKit::addQuadToPath): Supports adding non-rectilinear quads to Path.
        (WebKit::LinkHighlight::computeHighlightLayerPathAndPosition): Updated to deal with target's quadlist, transform individual quads according to transforms.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::bestTouchLinkNode):

2012-10-05  Julien Chaffraix  <jchaffraix@webkit.org>

        Unreviewed build fix after r130545.

        * tests/WebFrameTest.cpp:
        Avoid a warning about truncating the double constant on Windows. While touching the variable, changed
        it to be proper camelCase.

2012-10-05  Oli Lan  <olilan@chromium.org>

        Allow EventHandler to handle longpress gestures, including longpress selection on Android.
        https://bugs.webkit.org/show_bug.cgi?id=98173

        Reviewed by Ryosuke Niwa.

        This patch changes the longpress gesture handling code in WebViewImpl to call EventHandler::handleGestureEvent.
        The WebCore part of this patch adds longpress handling to that method, including the long press selection behaviour
        required for Android. This means that a long press gesture performed on word (that is not part of a link)
        selects the word, without generating a context menu event.

        A new test, WebViewTest.LongPressSelection has been added to test this.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebViewImpl):
        * tests/WebViewTest.cpp:
        * tests/data/longpress_selection.html: Added.

2012-10-05  Yusuf Ozuysal  <yusufo@google.com>

        [chromium] Support zooming focused node for mobile devices
        https://bugs.webkit.org/show_bug.cgi?id=97958

        Reviewed by Adam Barth.

        This unforks the Android version of scrollFocusedNodeIntoRect().A new setting
        autoZoomFocusedNodeToLegibleScale was added to turn it on, since not all
        platforms with ENABLE(GESTURE_EVENTS) want this.

        Test: WebFrameTest.DivScrollIntoEditableTest

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setAutoZoomFocusedNodeToLegibleScale):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        (WebKit::WebSettingsImpl::autoZoomFocusedNodeToLegibleScale):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollFocusedNodeIntoRect):
        * tests/WebFrameTest.cpp:
        * tests/data/get_scale_for_zoom_into_editable_test.html: Added.

2012-10-05  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] Modify gesture highlight behaviour. Cancel on GestureLongPress and animate on GestureTapCancel.
        https://bugs.webkit.org/show_bug.cgi?id=97355

        Reviewed by Adrienne Walker.

        This patch revises the behaviour of GestureTapDown highlighting so that the highlight should disappear if
        interrupted by GestureTap, and animate away if interrupted by GestureTapCancel.


        * src/LinkHighlight.cpp:
        (WebKit::LinkHighlight::LinkHighlight):
        (WebKit::LinkHighlight::startHighlightAnimationIfNeeded):
        * src/LinkHighlight.h:
        (LinkHighlight):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):
        (WebKit::WebViewImpl::enableTouchHighlight):

2012-10-05  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Update some more #includes for Platform/ directory
        https://bugs.webkit.org/show_bug.cgi?id=98534

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * src/WebFormElement.cpp:
        * src/WebFrameImpl.cpp:
        * src/WebGeolocationClientMock.cpp:
        * src/WebGeolocationError.cpp:
        * src/WebGeolocationPermissionRequest.cpp:
        * src/WebHistoryItem.cpp:
        * src/WebHitTestResult.cpp:
        * src/WebIDBTransactionImpl.h:
        * src/WebIconLoadingCompletionImpl.h:
        * src/WebImageDecoder.cpp:
        * src/WebImageSkia.cpp:
        * src/WebInputElement.cpp:
        * src/WebKit.cpp:
        * src/WebLabelElement.cpp:
        * src/WebMediaStreamRegistry.cpp:
        * src/WebNode.cpp:
        * src/WebNotification.cpp:
        * src/WebOptionElement.cpp:
        * src/WebPageSerializer.cpp:
        * src/WebPageSerializerImpl.cpp:
        * src/WebPageSerializerImpl.h:
        * src/WebPluginListBuilderImpl.cpp:
        * src/WebPluginLoadObserver.h:
        * src/WebPopupMenuImpl.cpp:
        * src/WebPopupMenuImpl.h:
        * src/WebRange.cpp:
        * src/WebRegularExpression.cpp:
        * src/WebScriptController.cpp:
        * src/WebSecurityOrigin.cpp:
        * src/WebSecurityPolicy.cpp:
        * src/WebSelectElement.cpp:
        * src/WebSerializedScriptValue.cpp:
        * src/WebSessionDescriptionDescriptor.cpp:
        * src/WebSettingsImpl.cpp:
        * src/WebSocketImpl.cpp:
        * src/WebSocketImpl.h:
        * src/WebStorageEventDispatcherImpl.cpp:
        * src/WebSurroundingText.cpp:
        * src/WebURLLoadTiming.cpp:
        * src/WorkerAsyncFileWriterChromium.cpp:
        * src/WorkerFileSystemCallbacksBridge.cpp:

2012-10-05  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Allow dragging into plugins.
        https://bugs.webkit.org/show_bug.cgi?id=98277

        Reviewed by Tony Chang.

        Allow plugins to receive drag events. This will make it possible to
        perform drag-n-drop into browser plugins (and other plugins if desired).

        * public/WebDragStatus.h: Added.
        (WebKit):
        * public/WebPlugin.h:
        (WebKit):
        (WebPlugin):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleMouseEvent):
        (WebKit::WebPluginContainerImpl::handleDragEvent):
        (WebKit):
        * src/WebPluginContainerImpl.h:
        (WebPluginContainerImpl):

2012-10-04  Kenichi Ishibashi  <bashi@chromium.org>

        [WebSocket] ExtensionParser should have its own file
        https://bugs.webkit.org/show_bug.cgi?id=98475

        Reviewed by Yuta Kitamura.

        Add a test for parsing Sec-WebSocket-Extensions field.

        * tests/WebSocketExtensionDispatcherTest.cpp:
        (WebCore):
        (WebCore::TEST_F):

2012-10-04  Kenichi Ishibashi  <bashi@chromium.org>

        [Chromium] Improve SocketStreamHandle::send() stability
        https://bugs.webkit.org/show_bug.cgi?id=98459

        Reviewed by Yuta Kitamura.

        Avoid null dereference in SocketStreamHandleInternal::send().
        No changes in behavior.

        * src/SocketStreamHandle.cpp:
        (WebCore::SocketStreamHandleInternal::send):

2012-10-04  Dirk Pranke  <dpranke@chromium.org>

        Chromium DEPS roll r160281:160322

        Unreviewed.

        * DEPS:

2012-10-04  Alexandre Elias  <aelias@chromium.org>

        [chromium] Scale plugin container by frameScaleFactor
        https://bugs.webkit.org/show_bug.cgi?id=98468

        Reviewed by Adam Barth.

        Plugin containers (for invalid plugins) weren't taking into account
        frameScaleFactor, looking cut off when that was non-1.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::paint):

2012-10-04  Alpha Lam  <hclam@chromium.org>

        Unreviewd. Chromium DEPS roll. Update to r160281.

        * DEPS:

2012-10-04  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Update some #includes for Platform directory
        https://bugs.webkit.org/show_bug.cgi?id=98440

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * src/ApplicationCacheHost.cpp:
        * src/AssociatedURLLoader.h:
        * src/AsyncFileWriterChromium.cpp:
        * src/AudioDestinationChromium.h:
        * src/AutofillPopupMenuClient.cpp:
        * src/ChromeClientImpl.cpp:
        * src/ContextMenuClientImpl.cpp:
        * src/DeliveredIntentClientImpl.h:
        * src/DragClientImpl.cpp:
        * src/DragScrollTimer.h:
        * src/FrameLoaderClientImpl.cpp:
        * src/InspectorClientImpl.cpp:
        * src/InspectorClientImpl.h:
        * src/InspectorFrontendClientImpl.cpp:
        * src/NotificationPresenterImpl.cpp:
        * src/PageWidgetDelegate.h:
        * src/SocketStreamHandle.cpp:
        * src/SocketStreamHandleInternal.h:
        * src/SpeechInputClientImpl.cpp:
        * src/StorageAreaProxy.cpp:
        * src/StorageNamespaceProxy.cpp:
        * src/UserMediaClientImpl.cpp:
        * src/WebAccessibilityObject.cpp:
        * src/WebAnimationControllerImpl.cpp:
        * src/WebCommon.cpp:
        * src/WebDOMEventListenerPrivate.h:
        * src/WebDOMMessageEvent.cpp:
        * src/WebDOMStringList.cpp:
        * src/WebDataSourceImpl.cpp:
        * src/WebDatabase.cpp:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:
        * src/WebDocument.cpp:
        * src/WebDocumentType.cpp:
        * src/WebDragData.cpp:
        * src/WebElement.cpp:
        * src/WebEntities.cpp:
        * src/WebFileChooserCompletionImpl.h:
        * src/WebFileSystemCallbacksImpl.cpp:
        * src/WebFontImpl.cpp:

2012-10-04  Alec Flett  <alecflett@chromium.org>

        IndexedDB: promote objectstore/index backend ids to the frontend
        https://bugs.webkit.org/show_bug.cgi?id=97834

        Reviewed by Tony Chang.

        Support for marshalling additional IDBMetadata and new calls to
        createObjectStore/createIndex.

        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::createObjectStore):
        * public/WebIDBMetadata.h:
        (ObjectStore):
        (Index):
        * public/WebIDBObjectStore.h:
        (WebKit::WebIDBObjectStore::createIndex):
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::createObjectStore):
        (WebKit):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::createIndex):
        (WebKit):
        * src/IDBObjectStoreBackendProxy.h:
        (IDBObjectStoreBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::createObjectStore):
        (WebKit):
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):
        * src/WebIDBMetadata.cpp:
        (WebKit::WebIDBMetadata::WebIDBMetadata):
        (WebKit::WebIDBMetadata::operator IDBDatabaseMetadata):
        * src/WebIDBObjectStoreImpl.cpp:
        (WebKit::WebIDBObjectStoreImpl::createIndex):
        (WebKit):
        * src/WebIDBObjectStoreImpl.h:
        (WebIDBObjectStoreImpl):
2012-10-04  Simon Fraser  <simon.fraser@apple.com>

        Standardize on "flush" terminology for compositing layer flushing/syncing
        https://bugs.webkit.org/show_bug.cgi?id=98321

        Reviewed by Simon Fraser.

        Rename compositing-related methods that refer to "syncing" to instead
        refer to "flushing".

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::scheduleCompositingLayerFlush):
        * src/ChromeClientImpl.h:
        (ChromeClientImpl):

2012-10-05  Kent Tamura  <tkent@chromium.org>

        [Chromium] Enable the multiple fields UI for input[type=date]
        https://bugs.webkit.org/show_bug.cgi?id=98351

        Reviewed by Hajime Morita.

        * features.gypi:
        Disable ENABLE_INPUT_TYPE_DATE_LEGACY_UI.

2012-10-04  Kent Tamura  <tkent@chromium.org>

        Add code for input[type=date] with the multiple fields UI
        https://bugs.webkit.org/show_bug.cgi?id=98340

        Reviewed by Hajime Morita.

        * features.gypi: Add ENABLE_INPUT_TYPE_DATE_LEGACY_UI=1 for non-Android.

2012-10-03  Keishi Hattori  <keishi@webkit.org>

        Implement localizeValue for TimeInputType
        https://bugs.webkit.org/show_bug.cgi?id=98237

        Reviewed by Kent Tamura.

        * tests/LocaleMacTest.cpp:
        (LocaleMacTest::timeComponents):
        (LocaleMacTest):
        (LocaleMacTest::formatTime): Tests formatDateTime() for time.
        (TEST_F):

2012-10-03  Dirk Pranke  <dpranke@chromium.org>

        Roll chromium to r160008

        Unreviewed, deps roll.

        * DEPS:

2012-10-03  Adam Barth  <abarth@webkit.org>

        Remove support for ENABLE(LEGACY_WEBKIT_BLOB_BUILDER)
        https://bugs.webkit.org/show_bug.cgi?id=98301

        Reviewed by Eric Seidel.

        * features.gypi:

2012-10-03  Jeff Timanus  <twiz@chromium.org>

        [chromium] Expose settings value to conditionally enable pinch-zoom scaling in the Chromium compositor.  The
        flag defaults to disabled, so this change should be a no-op for scaling/scrolling behaviour.
        https://bugs.webkit.org/show_bug.cgi?id=93292

        Reviewed by James Robinson.

        * public/WebSettings.h:
        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::NonCompositedContentHost):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setApplyPageScaleFactorInCompositor):
        (WebKit):
        (WebKit::WebSettingsImpl::applyPageScaleFactorInCompositor):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setPageScaleFactor):
        (WebKit::WebViewImpl::applyScrollAndScale):

2012-10-03  Hans Wennborg  <hans@chromium.org>

        Speech JavaScript API: Add SpeechRecognition.interimResults attribute
        https://bugs.webkit.org/show_bug.cgi?id=98279

        Reviewed by Adam Barth.

        Plumb interimResults through to Chromium.

        * public/WebSpeechRecognitionParams.h:
        (WebKit::WebSpeechRecognitionParams::WebSpeechRecognitionParams):
        (WebKit::WebSpeechRecognitionParams::interimResults):
        (WebSpeechRecognitionParams):
        * src/SpeechRecognitionClientProxy.cpp:
        (WebKit::SpeechRecognitionClientProxy::start):
        * src/SpeechRecognitionClientProxy.h:
        (SpeechRecognitionClientProxy):

2012-10-03  Hans Wennborg  <hans@chromium.org>

        Speech JavaScript API: Remove resultdeleted event
        https://bugs.webkit.org/show_bug.cgi?id=98272

        Reviewed by Adam Barth.

        Remove didDeleteResult. This was never used, and has been removed from
        the spec draft.

        * public/WebSpeechRecognizerClient.h:
        * src/SpeechRecognitionClientProxy.cpp:
        * src/SpeechRecognitionClientProxy.h:
        (SpeechRecognitionClientProxy):

2012-10-02  Anders Carlsson  <andersca@apple.com>

        Change most GraphicsLayer::create calls to use the version that takes a GraphicsLayerFactory
        https://bugs.webkit.org/show_bug.cgi?id=98217

        Reviewed by Andreas Kling.

        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::NonCompositedContentHost):

2012-10-03  Tommy Widenflycht  <tommyw@google.com>

        MediaStream API: RTCPeerConnection should send down its handler via the FrameLoaderClient directly after creation.
        https://bugs.webkit.org/show_bug.cgi?id=98149

        Reviewed by Adam Barth.

        Adding willStartUsingPeerConnectionHandler to the WebFrameClient.

        * public/WebFrameClient.h:
        (WebKit):
        (WebFrameClient):
        (WebKit::WebFrameClient::willStartUsingPeerConnectionHandler):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit):
        (WebKit::FrameLoaderClientImpl::dispatchWillStartUsingPeerConnectionHandler):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2012-10-03  Peter Kotwicz  <pkotwicz@google.com>

        WebImage::framesFromData should skip corrupted frames
        https://bugs.webkit.org/show_bug.cgi?id=98214

        Reviewed by Adam Barth.

        WebImage::framesFromData() should only return bitmaps for valid frames
        of a .ico file.

        * src/WebImageSkia.cpp:
        (WebKit::WebImage::framesFromData):
        * tests/WebImageTest.cpp:
        (WebKit::TEST):
        (WebKit):
        * tests/data/valid_header_missing_bitmap.ico: Added.

2012-10-02  Yury Semikhatsky  <yurys@chromium.org>

        Provide memory instrumentation for HashCountedSet
        https://bugs.webkit.org/show_bug.cgi?id=98138

        Reviewed by Pavel Feldman.

        Added unit test for HashCountedSet memory instrumentation.

        * tests/MemoryInstrumentationTest.cpp:

2012-10-02  Kent Tamura  <tkent@chromium.org>

        [Chromium-Win] Implement LocaleWin::dateFormat
        https://bugs.webkit.org/show_bug.cgi?id=98117

        Reviewed by Kentaro Hara.

        * tests/LocaleWinTest.cpp:
        (TEST_F): Add tests for LocaleWin::dateFormat.

== Rolled over to ChangeLog-2012-10-02 ==
