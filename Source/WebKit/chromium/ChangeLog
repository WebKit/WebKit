2011-09-06  Ben Smith  <binji@chromium.org>

        [chromium] Fix WebFrameClient receiving isRedirect when reloading
        https://bugs.webkit.org/show_bug.cgi?id=63591

        Reviewed by Adam Barth.

        Fix bug when quickly reloading a WebFrame where the
        WebFrameClient would get called with decidePolicyForNavigation
        isRedirect=true.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDecidePolicyForNavigationAction):
        * src/WebDataSourceImpl.h:
        (WebKit::WebDataSourceImpl::isRedirect):
        * tests/WebFrameTest.cpp:
        (WebKit::TestReloadDoesntRedirectWebFrameClient::decidePolicyForNavigation):
        (WebKit::TestReloadDoesntRedirectWebFrameClient::cancelledError):
        (WebKit::TEST_F):

2011-09-06  Ryosuke Niwa  <rniwa@webkit.org>

        Rename confirmCompositionWithoutDisturbingSelection to cancelComposition
        https://bugs.webkit.org/show_bug.cgi?id=67569

        Reviewed by Antonio Gomes.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::unmarkText):

2011-09-06  Adam Barth  <abarth@webkit.org>

        [Chromium] Add WebFloatQuad.h for Android
        https://bugs.webkit.org/show_bug.cgi?id=67573

        Reviewed by Darin Fisher.

        Android uses this wrapper of WebCore::FloatQuad in some API methods
        (which will appear in subsequent patches).

        * WebKit.gyp:
        * public/WebFloatQuad.h: Added.
        * src/WebFloatQuad.cpp: Added.

2011-09-06  Adam Barth  <abarth@webkit.org>

        [Chromium] Add didAcceptIndices to ExternalPopupMenuClient for Android
        https://bugs.webkit.org/show_bug.cgi?id=67574

        Reviewed by Darin Fisher.

        In Android, external popup menus can admit multiple selection (e.g.,
        for listboxes presented using external UI).

        * public/WebExternalPopupMenuClient.h:
        * src/ExternalPopupMenu.cpp:
        (WebKit::ExternalPopupMenu::didAcceptIndices):
        * src/ExternalPopupMenu.h:

2011-09-06  Aaron Colwell  <acolwell@chromium.org>

        Allow MediaSource API to be enabled at runtime.
        https://bugs.webkit.org/show_bug.cgi?id=67306

        Reviewed by Eric Carlson.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableMediaSource):
        (WebKit::WebRuntimeFeatures::isMediaSourceEnabled):

2011-09-06  Ryosuke Niwa  <rniwa@webkit.org>

        REGRESSION(r94274): FormManagerTest.PreviewForm and FillFormNonEmptyField fail on chromium
        https://bugs.webkit.org/show_bug.cgi?id=67453

        Reviewed by Kent Tamura.

        Chromium code incorrectly calls Node::isFocusable without updating layout, and was hitting assertions.
        Fix the assertion failure (and a potential crash) by updating layout in WebCore::isFocusable.

        * src/WebNode.cpp:
        (WebKit::WebNode::isFocusable):

2011-09-04  Adam Barth  <abarth@webkit.org>

        [Chromium] Add mutliple to WebPopupMenuInfo for Android
        https://bugs.webkit.org/show_bug.cgi?id=67576

        Reviewed by Darin Fisher.

        This flag requests that the embedder allow multiple selection for the
        popup menu.  (See also https://bugs.webkit.org/show_bug.cgi?id=67574.)

        * public/WebPopupMenuInfo.h:
        * src/ExternalPopupMenu.cpp:
        (WebKit::ExternalPopupMenu::getPopupMenuInfo):

2011-09-04  Adam Barth  <abarth@webkit.org>

        [Chromium] Add memory threshold values to WebKitPlatformSupport.h
        https://bugs.webkit.org/show_bug.cgi?id=67575

        Reviewed by Darin Fisher.

        Instead of hard-coding these values, we now grab them from
        WebKitPlatformSupport because Android wishes to configure them on a
        per-device basis.

        One could view grabing these values from PlatformSupport as a bit of a
        layering violation (because they feel like policy), but another view is
        that the alternative implementation is to query the OS for various
        memory parameters.  In either case, getting these values via
        PlatformSupport is much easier and consistent with the other memory
        related queries in PlatformSupport already.

        * public/WebKitPlatformSupport.h:
        (WebKit::WebKitPlatformSupport::lowMemoryUsageMB):
        (WebKit::WebKitPlatformSupport::highMemoryUsageMB):
        (WebKit::WebKitPlatformSupport::highUsageDeltaMB):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::lowMemoryUsageMB):
        (WebCore::PlatformSupport::highMemoryUsageMB):
        (WebCore::PlatformSupport::highUsageDeltaMB):

2011-09-02  Adam Barth  <abarth@webkit.org>

        Remove WebKitClient.h
        https://bugs.webkit.org/show_bug.cgi?id=67539

        Reviewed by Sam Weinig.

        This API no longer has any callers.

        * WebKit.gyp:
        * public/WebKit.h:
        * public/WebKitClient.h: Removed.
        * src/WebKit.cpp:

2011-09-02  Bill Budge  <bbudge@chromium.org>

        Add a 'didDownloadData' method to ResourceHandleInternal and pass these
        notifications to WebURLLoaderClients.
        https://bugs.webkit.org/show_bug.cgi?id=67229

        Reviewed by Darin Fisher.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::didDownloadData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didDownloadData):
        * src/ResourceHandleInternal.h:

2011-09-02  Peng Huang  <penghuang@chromium.org>

        Need API for getting surrounding text from webkit in chromium
        https://bugs.webkit.org/show_bug.cgi?id=66681

        Reviewed by Ryosuke Niwa.

        Add getSelectionOffsetsAndTextInEditableContent() to Chromium's
        WebViewImpl. This function is for supporting some input methods which
        need input context around the edit caret.

        * public/WebWidget.h:
        (WebKit::WebWidget::getSelectionOffsetsAndTextInEditableContent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::getSelectionOffsetsAndTextInEditableContent):
        * src/WebViewImpl.h:

2011-09-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-09-02  Adrienne Walker  <enne@google.com>

        [chromium] Remove LayerRendererChromium references from the LayerChromium tree
        https://bugs.webkit.org/show_bug.cgi?id=66430

        Reviewed by James Robinson.

        Change references to LayerRendererChromium to CCLayerTreeHost.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::acceleratedRenderingInUse):

2011-09-01  Robert Kroeger  <rjkroege@chromium.org>

 
        [chromium] Code cleanup FIXME in Chromium recognizer
        https://bugs.webkit.org/show_bug.cgi?id=67448

        Updated GestureRecognizer unit tests for more encapsulated
        gesture recognizer implementation.

        Reviewed by Adam Barth.

        * tests/InnerGestureRecognizerTest.cpp:
        (InspectableGestureRecognizerChromium::InspectableGestureRecognizerChromium):
        (InspectableGestureRecognizerChromium::signature):
        (InspectableGestureRecognizerChromium::edgeFunction):
        (InspectableGestureRecognizerChromium::updateValues):
        (InspectableGestureRecognizerChromium::addEdgeFunction):
        (InspectableGestureRecognizerChromium::setStateTest):
        (InspectableGestureRecognizerChromium::isInsideManhattanSquare):
        (InspectableGestureRecognizerChromium::isInClickTimeWindow):
        (InspectableGestureRecognizerChromium::stubEdgeFunction):
        (GestureRecognizerTest::GestureRecognizerTest):
        (TEST_F):

2011-09-01  Brian Salomon  <bsalomon@google.com>

        [Chromium, Skia] Add virtual to WebGraphicsContext3D to create a new GrGLInterface per context. Insert per-skia-GL-function callback to set correct GL context.
        https://bugs.webkit.org/show_bug.cgi?id=67395

        Reviewed by Kenneth Russell.

        * WebKit.gyp:
        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::onCreateGrGLInterface):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::grContext):
        * src/WebGraphicsContext3D.cpp: Added.
        (WebKit::WebGraphicsContext3D::createGrGLInterface):

2011-08-29  Nat Duca  <nduca@chromium.org>

        [chromium] Introduce CCSingleThreadProxy in order to move LayerRenderer to CCLayerTreeHostImpl
        https://bugs.webkit.org/show_bug.cgi?id=66807

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::didRecreateGraphicsContext):
        * tests/CCThreadTaskTest.cpp:
        (WebCore::TEST):

2011-09-01  Dominic Mazzoni  <dmazzoni@google.com>

        Add API functions to enable starting and stopping speech input,
        and checking the current speech input state.
        https://bugs.webkit.org/show_bug.cgi?id=60170

        Reviewed by Dimitri Glazkov.

        * public/WebInputElement.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::isSpeechInputEnabled):
        (WebKit::WebInputElement::getSpeechInputState):
        (WebKit::WebInputElement::startSpeechInput):
        (WebKit::WebInputElement::stopSpeechInput):

2011-08-31  Greg Billock  <gbillock@google.com>

        Add pass-throughs for NPObject/v8::Value marshalling to WebBindings
        https://bugs.webkit.org/show_bug.cgi?id=67302

        Reviewed by Darin Fisher.

        * public/WebBindings.h:
        * src/WebBindings.cpp:
        (WebKit::WebBindings::toNPVariant):
        (WebKit::WebBindings::toV8Value):
        * src/WebSerializedScriptValue.cpp:
        (WebKit::WebSerializedScriptValue::serialize):

2011-08-31  Adam Barth  <abarth@webkit.org>

        [Chromium] Rename PlatformBridge to PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=67349

        Reviewed by Darin Fisher.

        This matches the WebKitPlatformSupport embedder API.

        * WebKit.gyp:
        * src/AssertMatchingEnums.cpp:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::shouldRunModalDialogDuringPageDismissal):
        * src/PlatformBridge.cpp: Removed.
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandle::cacheMetadata):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::WebFrameImpl):
        (WebKit::WebFrameImpl::~WebFrameImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImplContentPainter::paint):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-08-31  Sailesh Agrawal  <sail@chromium.org>

        Chromium Mac: PDF: Scrollsbars should be visible when scrolling using the two finger gesture on Lion
        https://bugs.webkit.org/show_bug.cgi?id=66599

        Reviewed by Darin Fisher.

        Overlay scrollbars over a pdf wouldn't stay visible if a gesture was in progress. Normally we use a beginScrollGesture and endScrollGesture to keep the scrollbars visible. Unfortunately PDFs didn't handle gesture events so we didn't get the begin/end gesture events.

        This change pipes gesture events to WebPluginContainerImpl if possible. This fixes this bug.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleGestureEvent):
        * src/WebPluginContainerImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::gestureEvent):

2011-08-31  Sailesh Agrawal  <sail@chromium.org>

        Chromium Mac: Add fallback for drawing PDF overhang area
        https://bugs.webkit.org/show_bug.cgi?id=66614

        Reviewed by Darin Fisher.

        This change adds a fallback for overhang drawing for PDF content. This fallback is needed until the PDF plugin uses the linen pattern to draw its own overhang.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::paintCustomOverhangArea):
        * src/ChromeClientImpl.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::paintCustomOverhangArea):
        * src/WebPluginContainerImpl.h:

2011-08-31  James Weatherall  <wez@chromium.org>

        [chromium] Have the FrameLoaderClient release any plugin widget
        reference is holding when the FrameLoader detaches it, to ensure that
        the plugin won't out-live the containing page.
        https://bugs.webkit.org/show_bug.cgi?id=66517

        Reviewed by Darin Fisher.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::detachedFromParent3):

2011-08-31  Adam Barth  <abarth@webkit.org>

        [Chromium] Rename WebKitClient to WebKitPlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=67309

        Reviewed by Darin Fisher.

        WebKitClient doesn't actually represent the WebKit Client.  Instead, it
        represents supporting code for the WebKit Platform.  This patch renames
        WebKitClient to WebKitPlatformSupport to make it easier for folks to
        understand the difference between the Client and the Platform.

        This patch includes shims so as not to break the Chromium build.  Once
        the Chromium side is updated, I'll remove the shims.

        * WebKit.gyp:
        * public/WebFrameClient.h:
        * public/WebKit.h:
        (WebKit::webKitClient):
        * public/WebKitClient.h: Removed.
        * public/WebKitPlatformSupport.h: Copied from Source/WebKit/chromium/public/WebKitClient.h.
        (WebKit::WebKitPlatformSupport::~WebKitPlatformSupport):
        * src/ApplicationCacheHostInternal.h:
        * src/AssociatedURLLoader.cpp:
        * src/AsyncFileSystemChromium.cpp:
        (WebCore::AsyncFileSystemChromium::AsyncFileSystemChromium):
        * src/AudioDestinationChromium.cpp:
        (WebCore::AudioDestinationChromium::AudioDestinationChromium):
        (WebCore::AudioDestination::hardwareSampleRate):
        * src/BlobRegistryProxy.cpp:
        (WebCore::BlobRegistryProxy::BlobRegistryProxy):
        * src/CCThreadImpl.cpp:
        (WebKit::CCThreadImpl::CCThreadImpl):
        * src/ChromiumCurrentTime.cpp:
        (WTF::currentTime):
        (WTF::monotonicallyIncreasingTime):
        * src/ChromiumOSRandomSource.cpp:
        (WTF::cryptographicallyRandomValuesFromOS):
        * src/ChromiumThreading.cpp:
        (WTF::ChromiumThreading::callOnMainThread):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::canShowMIMEType):
        (WebKit::FrameLoaderClientImpl::userAgent):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3D::create):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):
        * src/LocalizedStrings.cpp:
        (WebCore::query):
        * src/PlatformBridge.cpp:
        (WebCore::getCookieJar):
        (WebCore::PlatformBridge::cacheMetadata):
        (WebCore::PlatformBridge::clipboardIsFormatAvailable):
        (WebCore::PlatformBridge::clipboardReadPlainText):
        (WebCore::PlatformBridge::clipboardReadHTML):
        (WebCore::PlatformBridge::clipboardReadImage):
        (WebCore::PlatformBridge::clipboardGetSequenceNumber):
        (WebCore::PlatformBridge::clipboardWriteSelection):
        (WebCore::PlatformBridge::clipboardWritePlainText):
        (WebCore::PlatformBridge::clipboardWriteURL):
        (WebCore::PlatformBridge::clipboardWriteImage):
        (WebCore::PlatformBridge::clipboardWriteData):
        (WebCore::PlatformBridge::clipboardReadAvailableTypes):
        (WebCore::PlatformBridge::clipboardReadData):
        (WebCore::PlatformBridge::clipboardReadFilenames):
        (WebCore::PlatformBridge::prefetchDNS):
        (WebCore::PlatformBridge::fileExists):
        (WebCore::PlatformBridge::deleteFile):
        (WebCore::PlatformBridge::deleteEmptyDirectory):
        (WebCore::PlatformBridge::getFileSize):
        (WebCore::PlatformBridge::revealFolderInOS):
        (WebCore::PlatformBridge::getFileModificationTime):
        (WebCore::PlatformBridge::directoryName):
        (WebCore::PlatformBridge::pathByAppendingComponent):
        (WebCore::PlatformBridge::makeAllDirectories):
        (WebCore::PlatformBridge::getAbsolutePath):
        (WebCore::PlatformBridge::isDirectory):
        (WebCore::PlatformBridge::filePathToURL):
        (WebCore::PlatformBridge::openFile):
        (WebCore::PlatformBridge::closeFile):
        (WebCore::PlatformBridge::seekFile):
        (WebCore::PlatformBridge::truncateFile):
        (WebCore::PlatformBridge::readFromFile):
        (WebCore::PlatformBridge::writeToFile):
        (WebCore::PlatformBridge::ensureFontLoaded):
        (WebCore::PlatformBridge::loadFont):
        (WebCore::PlatformBridge::getFontFamilyForCharacters):
        (WebCore::PlatformBridge::getRenderStyleForStrike):
        (WebCore::PlatformBridge::databaseOpenFile):
        (WebCore::PlatformBridge::databaseDeleteFile):
        (WebCore::PlatformBridge::databaseGetFileAttributes):
        (WebCore::PlatformBridge::databaseGetFileSize):
        (WebCore::PlatformBridge::databaseGetSpaceAvailableForOrigin):
        (WebCore::PlatformBridge::createIDBKeysFromSerializedValuesAndKeyPath):
        (WebCore::PlatformBridge::injectIDBKeyIntoSerializedValue):
        (WebCore::PlatformBridge::signedPublicKeyAndChallengeString):
        (WebCore::PlatformBridge::computedDefaultLanguage):
        (WebCore::PlatformBridge::isSupportedImageMIMEType):
        (WebCore::PlatformBridge::isSupportedJavaScriptMIMEType):
        (WebCore::PlatformBridge::isSupportedNonImageMIMEType):
        (WebCore::PlatformBridge::mimeTypeForExtension):
        (WebCore::PlatformBridge::wellKnownMimeTypeForExtension):
        (WebCore::PlatformBridge::mimeTypeFromFile):
        (WebCore::PlatformBridge::preferredExtensionForMIMEType):
        (WebCore::PlatformBridge::plugins):
        (WebCore::PlatformBridge::loadPlatformImageResource):
        (WebCore::PlatformBridge::loadPlatformAudioResource):
        (WebCore::PlatformBridge::decodeAudioFileData):
        (WebCore::PlatformBridge::sandboxEnabled):
        (WebCore::PlatformBridge::setSharedTimerFiredFunction):
        (WebCore::PlatformBridge::setSharedTimerFireInterval):
        (WebCore::PlatformBridge::stopSharedTimer):
        (WebCore::PlatformBridge::decrementStatsCounter):
        (WebCore::PlatformBridge::incrementStatsCounter):
        (WebCore::PlatformBridge::histogramCustomCounts):
        (WebCore::PlatformBridge::histogramEnumeration):
        (WebCore::PlatformBridge::suddenTerminationChanged):
        (WebCore::PlatformBridge::paintButton):
        (WebCore::PlatformBridge::paintMenuList):
        (WebCore::PlatformBridge::paintScrollbarArrow):
        (WebCore::PlatformBridge::paintScrollbarThumb):
        (WebCore::PlatformBridge::paintScrollbarTrack):
        (WebCore::PlatformBridge::paintSpinButton):
        (WebCore::PlatformBridge::paintTextField):
        (WebCore::PlatformBridge::paintTrackbar):
        (WebCore::PlatformBridge::paintProgressBar):
        (WebCore::PlatformBridge::getThemePartSize):
        (WebCore::PlatformBridge::paintThemePart):
        (WebCore::PlatformBridge::traceEventBegin):
        (WebCore::PlatformBridge::traceEventEnd):
        (WebCore::PlatformBridge::visitedLinkHash):
        (WebCore::PlatformBridge::isLinkVisited):
        (WebCore::PlatformBridge::memoryUsageMB):
        (WebCore::PlatformBridge::actualMemoryUsageMB):
        * src/PlatformMessagePortChannel.cpp:
        (WebCore::PlatformMessagePortChannel::PlatformMessagePortChannel):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::start):
        (WebCore::ResourceHandle::loadResourceSynchronously):
        * src/SharedWorkerRepository.cpp:
        (WebCore::SharedWorkerRepository::isAvailable):
        (WebCore::SharedWorkerRepository::connect):
        (WebCore::SharedWorkerRepository::documentDetached):
        (WebCore::SharedWorkerRepository::hasSharedWorkers):
        * src/SocketStreamHandle.cpp:
        (WebCore::SocketStreamHandleInternal::connect):
        * src/StorageEventDispatcherChromium.cpp:
        (WebCore::StorageEventDispatcher::dispatch):
        * src/StorageNamespaceProxy.cpp:
        (WebCore::StorageNamespace::localStorageNamespace):
        * src/WebKit.cpp:
        (WebKit::generateEntropy):
        (WebKit::initialize):
        (WebKit::shutdown):
        (WebKit::webKitPlatformSupport):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::supportsType):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::copy):
        * src/WebViewImpl.cpp:
        * src/WebWorkerClientImpl.cpp:
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::WorkerAsyncFileSystemChromium):
        * src/WorkerFileWriterCallbacksBridge.cpp:
        (WebKit::WorkerFileWriterCallbacksBridge::initOnMainThread):
        * tests/RunAllTests.cpp:

2011-08-31  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-08-31  Nat Duca  <nduca@chromium.org>

        [Chromium] Unreviewed, fix inconsistent WebKit.gypi after r94106
        https://bugs.webkit.org/show_bug.cgi?id=67288

        * WebKit.gypi:

2011-08-30  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r94142, r94144, r94145, and r94148.
        http://trac.webkit.org/changeset/94142
        http://trac.webkit.org/changeset/94144
        http://trac.webkit.org/changeset/94145
        http://trac.webkit.org/changeset/94148
        https://bugs.webkit.org/show_bug.cgi?id=67262

        Broke isindex element (Requested by rniwa on #webkit).

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::textFieldDidEndEditing):
        (WebKit::EditorClientImpl::doTextFieldCommandFromEvent):
        * src/WebInputElement.cpp:
        (WebKit::toWebInputElement):
        * src/WebPasswordFormUtils.cpp:
        (WebKit::findPasswordFormFields):

2011-08-30  Ryosuke Niwa  <rniwa@webkit.org>

        Chromium build fix after r94142.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::textFieldDidEndEditing):
        (WebKit::EditorClientImpl::doTextFieldCommandFromEvent):
        * src/WebPasswordFormUtils.cpp:
        (WebKit::findPasswordFormFields):

2011-08-30  Ryosuke Niwa  <rniwa@webkit.org>

        Get rid of toInputElement()
        https://bugs.webkit.org/show_bug.cgi?id=67175

        Reviewed by Darin Adler.

        * src/WebInputElement.cpp:
        (WebKit::toWebInputElement):

2011-08-30  Nat Duca  <nduca@chromium.org>

        Unreviewed, fix WebGL layout tests due to missing WebView pointer.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::createGraphicsContextFromWebContext):

2011-08-30  Aaron Colwell  <acolwell@chromium.org>

        Add MediaSource API to HTMLMediaElement
        https://bugs.webkit.org/show_bug.cgi?id=64731

        Reviewed by Eric Carlson.

        * public/WebMediaPlayer.h:
        (WebKit::WebMediaPlayer::sourceAppend):
        (WebKit::WebMediaPlayer::sourceEndOfStream):
        * public/WebMediaPlayerClient.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::sourceOpened):
        (WebKit::WebMediaPlayerClientImpl::sourceURL):
        (WebKit::WebMediaPlayerClientImpl::sourceAppend):
        (WebKit::WebMediaPlayerClientImpl::sourceEndOfStream):
        * src/WebMediaPlayerClientImpl.h:

2011-08-30  Nat Duca  <nduca@chromium.org>

        [chromium] Allow GraphicsContexts to be created from MockWebGraphicsContexts
        https://bugs.webkit.org/show_bug.cgi?id=67179

        Reviewed by Kenneth Russell.

        * WebKit.gypi:
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::create):
        (WebCore::GraphicsContext3DInternal::createFromWebContext):
        (WebCore::GraphicsContext3D::create):
        * src/GraphicsContext3DInternal.h:
        * tests/MockGraphicsContext3DTest.cpp: Renamed from Source/WebKit/chromium/tests/MockWebGraphicsContext3DTest.cpp.
        (FrameCountingContext::FrameCountingContext):
        (FrameCountingContext::prepareTexture):
        (FrameCountingContext::frameCount):
        (TEST):

2011-08-30  Adam Barth  <abarth@webkit.org>

        [Chromium] Add null checks for document()->loader()
        https://bugs.webkit.org/show_bug.cgi?id=67077

        Reviewed by Nate Chapin.

        Document::loader can return 0 for a number of reasons.  Call sites need
        to null check the result, like we do for Document::frame.  I suspect
        some of these are real crashes, along the lines of
        http://trac.webkit.org/changeset/93692, but null checking this function
        is just good practice.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/WebSearchableFormData.cpp:
        (HTMLNames::GetFormEncoding):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::pageEncoding):

2011-08-29  Darin Fisher  <darin@chromium.org>

        [chromium] DumpRenderTree should be explicit about its dependency on
        GoogleURL
        https://bugs.webkit.org/show_bug.cgi?id=67169

        Reviewed by Ryosuke Niwa.

        DumpRenderTree uses GoogleURL code directly, and it should be explicit
        about that instead of picking up this dependency transitively, which
        only works for the static build.

        This is needed to support the "component" build of DumpRenderTree, in
        which the various Chromium dependencies are built as separate DLLs.

        * WebKit.gyp:

2011-08-30  Tony Chang  <tony@chromium.org>

        Fix chromium compile when using clang.  Another compile error due
        to r94080.

        * src/ChromeClientImpl.h:
        (WebKit::ChromeClientImpl::scrollRectIntoView):

2011-08-30  Tony Chang  <tony@chromium.org>

        Roll chromium DEPS to r98771.

        * DEPS:

2011-08-29  Chris Marrin  <cmarrin@apple.com>

        Rename GraphicsContext3DInternal to GraphicsContext3DPrivate and add a dummy version of this class for Mac
        https://bugs.webkit.org/show_bug.cgi?id=67172

        Reviewed by Kenneth Russell.

        * WebKit.gyp:
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::Extensions3DChromium):
        (WebCore::Extensions3DChromium::supports):
        (WebCore::Extensions3DChromium::ensureEnabled):
        (WebCore::Extensions3DChromium::isEnabled):
        (WebCore::Extensions3DChromium::getGraphicsResetStatusARB):
        (WebCore::Extensions3DChromium::blitFramebuffer):
        (WebCore::Extensions3DChromium::renderbufferStorageMultisample):
        (WebCore::Extensions3DChromium::mapBufferSubDataCHROMIUM):
        (WebCore::Extensions3DChromium::unmapBufferSubDataCHROMIUM):
        (WebCore::Extensions3DChromium::mapTexSubImage2DCHROMIUM):
        (WebCore::Extensions3DChromium::unmapTexSubImage2DCHROMIUM):
        (WebCore::Extensions3DChromium::setSwapBuffersCompleteCallbackCHROMIUM):
        (WebCore::Extensions3DChromium::rateLimitOffscreenContextCHROMIUM):
        (WebCore::Extensions3DChromium::paintFramebufferToCanvas):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::GraphicsContext3DPrivate):
        (WebCore::GraphicsContext3DPrivate::~GraphicsContext3DPrivate):
        (WebCore::GraphicsContext3DPrivate::initialize):
        (WebCore::GraphicsContext3DPrivate::extractWebGraphicsContext3D):
        (WebCore::GraphicsContext3DPrivate::platformGraphicsContext3D):
        (WebCore::GraphicsContext3DPrivate::platformTexture):
        (WebCore::GraphicsContext3DPrivate::grContext):
        (WebCore::GraphicsContext3DPrivate::prepareTexture):
        (WebCore::GraphicsContext3DPrivate::platformLayer):
        (WebCore::GraphicsContext3DPrivate::markContextChanged):
        (WebCore::GraphicsContext3DPrivate::markLayerComposited):
        (WebCore::GraphicsContext3DPrivate::layerComposited):
        (WebCore::GraphicsContext3DPrivate::paintFramebufferToCanvas):
        (WebCore::GraphicsContext3DPrivate::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3DPrivate::paintCompositedResultsToCanvas):
        (WebCore::GraphicsContext3DPrivate::paintRenderingResultsToImageData):
        (WebCore::GraphicsContext3DPrivate::paintsIntoCanvasBuffer):
        (WebCore::GraphicsContext3DPrivate::reshape):
        (WebCore::GraphicsContext3DPrivate::getInternalFramebufferSize):
        (WebCore::GraphicsContext3DPrivate::isContextLost):
        (WebCore::GraphicsContext3DPrivate::isGLES2Compliant):
        (WebCore::GraphicsContext3DPrivate::bindAttribLocation):
        (WebCore::GraphicsContext3DPrivate::bufferData):
        (WebCore::GraphicsContext3DPrivate::bufferSubData):
        (WebCore::GraphicsContext3DPrivate::getActiveAttrib):
        (WebCore::GraphicsContext3DPrivate::getActiveUniform):
        (WebCore::GraphicsContext3DPrivate::getAttribLocation):
        (WebCore::GraphicsContext3DPrivate::getContextAttributes):
        (WebCore::GraphicsContext3DPrivate::getProgramInfoLog):
        (WebCore::GraphicsContext3DPrivate::getShaderInfoLog):
        (WebCore::GraphicsContext3DPrivate::getShaderSource):
        (WebCore::GraphicsContext3DPrivate::getString):
        (WebCore::GraphicsContext3DPrivate::getUniformLocation):
        (WebCore::GraphicsContext3DPrivate::shaderSource):
        (WebCore::GraphicsContext3DPrivate::texImage2D):
        (WebCore::GraphicsContext3DPrivate::texSubImage2D):
        (WebCore::GraphicsContext3DPrivate::uniform1fv):
        (WebCore::GraphicsContext3DPrivate::uniform1iv):
        (WebCore::GraphicsContext3DPrivate::uniform2fv):
        (WebCore::GraphicsContext3DPrivate::uniform2iv):
        (WebCore::GraphicsContext3DPrivate::uniform3fv):
        (WebCore::GraphicsContext3DPrivate::uniform3iv):
        (WebCore::GraphicsContext3DPrivate::uniform4fv):
        (WebCore::GraphicsContext3DPrivate::uniform4iv):
        (WebCore::GraphicsContext3DPrivate::uniformMatrix2fv):
        (WebCore::GraphicsContext3DPrivate::uniformMatrix3fv):
        (WebCore::GraphicsContext3DPrivate::uniformMatrix4fv):
        (WebCore::GraphicsContext3DPrivate::getExtensions):
        (WebCore::GraphicsContext3DPrivate::isResourceSafe):
        (WebCore::GraphicsContext3DPrivate::initializeExtensions):
        (WebCore::GraphicsContext3DPrivate::supportsExtension):
        (WebCore::GraphicsContext3DPrivate::ensureExtensionEnabled):
        (WebCore::GraphicsContext3DPrivate::isExtensionEnabled):
        (WebCore::GraphicsContext3D::~GraphicsContext3D):
        (WebCore::GraphicsContext3D::create):
        (WebCore::GraphicsContext3D::platformGraphicsContext3D):
        (WebCore::GraphicsContext3D::platformTexture):
        (WebCore::GraphicsContext3D::grContext):
        (WebCore::GraphicsContext3D::prepareTexture):
        (WebCore::GraphicsContext3D::getInternalFramebufferSize):
        (WebCore::GraphicsContext3D::isResourceSafe):
        (WebCore::GraphicsContext3D::platformLayer):
        (WebCore::GraphicsContext3D::layerComposited):
        (WebCore::GraphicsContext3D::paintsIntoCanvasBuffer):
        (WebCore::GraphicsContext3DPrivate::setContextLostCallback):
        (WebCore::GraphicsContext3D::isGLES2Compliant):
        (WebCore::GraphicsContext3DPrivate::setSwapBuffersCompleteCallbackCHROMIUM):
        * src/GraphicsContext3DInternal.h: Removed.
        * src/GraphicsContext3DPrivate.h: Copied from Source/WebKit/chromium/src/GraphicsContext3DInternal.h.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::graphicsContext3D):

2011-08-30  Kaustubh Atrawalkar  <kaustubh@motorola.com>

        The unused ScrollView* argument can and should be removed from
        scrollRectIntoView.
        https://bugs.webkit.org/show_bug.cgi?id=67117

        Reviewed by Darin Adler.

        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::scrollRectIntoView):
        * src/WebPopupMenuImpl.h:

2011-08-29  Greg Billock  <gbillock@google.com>

        [Chromium] Add ability to do static SerializedScriptValue deserialization
        https://bugs.webkit.org/show_bug.cgi?id=66877

        Reviewed by Darin Fisher.

        * public/WebSerializedScriptValue.h:
        * src/WebSerializedScriptValue.cpp:
        (WebKit::WebSerializedScriptValue::deserialize):
        (WebKit::WebSerializedScriptValue::serialize):

2011-08-27  Peter Beverloo  <peter@chromium.org>

        Teach the update and build scripts how to handle dependencies
        and cross-compiling rules for the Chromium port on OS(ANDROID).
        https://bugs.webkit.org/show_bug.cgi?id=66687

        Reviewed by Adam Barth.

        * gyp_webkit:

2011-08-26  Iain Merrick  <husky@google.com>

        [chromium] Add MockWebGraphicsContext3D, for compositor unit testing
        https://bugs.webkit.org/show_bug.cgi?id=67006

        MockWebGraphicsContext3D is a no-op implementation of the pure virtual
        interface WebGraphicsContext3D. I've included a test with a couple of
        example usages: subclassing it manually, and using it with GMock.

        Reviewed by Kenneth Russell.

        * WebKit.gypi:
        * tests/MockWebGraphicsContext3D.h: Added.
        (WebKit::MockWebGraphicsContext3D::initialize):
        (WebKit::MockWebGraphicsContext3D::makeContextCurrent):
        (WebKit::MockWebGraphicsContext3D::width):
        (WebKit::MockWebGraphicsContext3D::height):
        (WebKit::MockWebGraphicsContext3D::reshape):
        (WebKit::MockWebGraphicsContext3D::isGLES2Compliant):
        (WebKit::MockWebGraphicsContext3D::readBackFramebuffer):
        (WebKit::MockWebGraphicsContext3D::getPlatformTextureId):
        (WebKit::MockWebGraphicsContext3D::prepareTexture):
        (WebKit::MockWebGraphicsContext3D::synthesizeGLError):
        (WebKit::MockWebGraphicsContext3D::isContextLost):
        (WebKit::MockWebGraphicsContext3D::mapBufferSubDataCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::unmapBufferSubDataCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::mapTexSubImage2DCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::unmapTexSubImage2DCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::getRequestableExtensionsCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::requestExtensionCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::blitFramebufferCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::renderbufferStorageMultisampleCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::activeTexture):
        (WebKit::MockWebGraphicsContext3D::attachShader):
        (WebKit::MockWebGraphicsContext3D::bindAttribLocation):
        (WebKit::MockWebGraphicsContext3D::bindBuffer):
        (WebKit::MockWebGraphicsContext3D::bindFramebuffer):
        (WebKit::MockWebGraphicsContext3D::bindRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::bindTexture):
        (WebKit::MockWebGraphicsContext3D::blendColor):
        (WebKit::MockWebGraphicsContext3D::blendEquation):
        (WebKit::MockWebGraphicsContext3D::blendEquationSeparate):
        (WebKit::MockWebGraphicsContext3D::blendFunc):
        (WebKit::MockWebGraphicsContext3D::blendFuncSeparate):
        (WebKit::MockWebGraphicsContext3D::bufferData):
        (WebKit::MockWebGraphicsContext3D::bufferSubData):
        (WebKit::MockWebGraphicsContext3D::checkFramebufferStatus):
        (WebKit::MockWebGraphicsContext3D::clear):
        (WebKit::MockWebGraphicsContext3D::clearColor):
        (WebKit::MockWebGraphicsContext3D::clearDepth):
        (WebKit::MockWebGraphicsContext3D::clearStencil):
        (WebKit::MockWebGraphicsContext3D::colorMask):
        (WebKit::MockWebGraphicsContext3D::compileShader):
        (WebKit::MockWebGraphicsContext3D::copyTexImage2D):
        (WebKit::MockWebGraphicsContext3D::copyTexSubImage2D):
        (WebKit::MockWebGraphicsContext3D::cullFace):
        (WebKit::MockWebGraphicsContext3D::depthFunc):
        (WebKit::MockWebGraphicsContext3D::depthMask):
        (WebKit::MockWebGraphicsContext3D::depthRange):
        (WebKit::MockWebGraphicsContext3D::detachShader):
        (WebKit::MockWebGraphicsContext3D::disable):
        (WebKit::MockWebGraphicsContext3D::disableVertexAttribArray):
        (WebKit::MockWebGraphicsContext3D::drawArrays):
        (WebKit::MockWebGraphicsContext3D::drawElements):
        (WebKit::MockWebGraphicsContext3D::enable):
        (WebKit::MockWebGraphicsContext3D::enableVertexAttribArray):
        (WebKit::MockWebGraphicsContext3D::finish):
        (WebKit::MockWebGraphicsContext3D::flush):
        (WebKit::MockWebGraphicsContext3D::framebufferRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::framebufferTexture2D):
        (WebKit::MockWebGraphicsContext3D::frontFace):
        (WebKit::MockWebGraphicsContext3D::generateMipmap):
        (WebKit::MockWebGraphicsContext3D::getActiveAttrib):
        (WebKit::MockWebGraphicsContext3D::getActiveUniform):
        (WebKit::MockWebGraphicsContext3D::getAttachedShaders):
        (WebKit::MockWebGraphicsContext3D::getAttribLocation):
        (WebKit::MockWebGraphicsContext3D::getBooleanv):
        (WebKit::MockWebGraphicsContext3D::getBufferParameteriv):
        (WebKit::MockWebGraphicsContext3D::getContextAttributes):
        (WebKit::MockWebGraphicsContext3D::getError):
        (WebKit::MockWebGraphicsContext3D::getFloatv):
        (WebKit::MockWebGraphicsContext3D::getFramebufferAttachmentParameteriv):
        (WebKit::MockWebGraphicsContext3D::getIntegerv):
        (WebKit::MockWebGraphicsContext3D::getProgramiv):
        (WebKit::MockWebGraphicsContext3D::getProgramInfoLog):
        (WebKit::MockWebGraphicsContext3D::getRenderbufferParameteriv):
        (WebKit::MockWebGraphicsContext3D::getShaderiv):
        (WebKit::MockWebGraphicsContext3D::getShaderInfoLog):
        (WebKit::MockWebGraphicsContext3D::getShaderSource):
        (WebKit::MockWebGraphicsContext3D::getString):
        (WebKit::MockWebGraphicsContext3D::getTexParameterfv):
        (WebKit::MockWebGraphicsContext3D::getTexParameteriv):
        (WebKit::MockWebGraphicsContext3D::getUniformfv):
        (WebKit::MockWebGraphicsContext3D::getUniformiv):
        (WebKit::MockWebGraphicsContext3D::getUniformLocation):
        (WebKit::MockWebGraphicsContext3D::getVertexAttribfv):
        (WebKit::MockWebGraphicsContext3D::getVertexAttribiv):
        (WebKit::MockWebGraphicsContext3D::getVertexAttribOffset):
        (WebKit::MockWebGraphicsContext3D::hint):
        (WebKit::MockWebGraphicsContext3D::isBuffer):
        (WebKit::MockWebGraphicsContext3D::isEnabled):
        (WebKit::MockWebGraphicsContext3D::isFramebuffer):
        (WebKit::MockWebGraphicsContext3D::isProgram):
        (WebKit::MockWebGraphicsContext3D::isRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::isShader):
        (WebKit::MockWebGraphicsContext3D::isTexture):
        (WebKit::MockWebGraphicsContext3D::lineWidth):
        (WebKit::MockWebGraphicsContext3D::linkProgram):
        (WebKit::MockWebGraphicsContext3D::pixelStorei):
        (WebKit::MockWebGraphicsContext3D::polygonOffset):
        (WebKit::MockWebGraphicsContext3D::readPixels):
        (WebKit::MockWebGraphicsContext3D::releaseShaderCompiler):
        (WebKit::MockWebGraphicsContext3D::renderbufferStorage):
        (WebKit::MockWebGraphicsContext3D::sampleCoverage):
        (WebKit::MockWebGraphicsContext3D::scissor):
        (WebKit::MockWebGraphicsContext3D::shaderSource):
        (WebKit::MockWebGraphicsContext3D::stencilFunc):
        (WebKit::MockWebGraphicsContext3D::stencilFuncSeparate):
        (WebKit::MockWebGraphicsContext3D::stencilMask):
        (WebKit::MockWebGraphicsContext3D::stencilMaskSeparate):
        (WebKit::MockWebGraphicsContext3D::stencilOp):
        (WebKit::MockWebGraphicsContext3D::stencilOpSeparate):
        (WebKit::MockWebGraphicsContext3D::texImage2D):
        (WebKit::MockWebGraphicsContext3D::texParameterf):
        (WebKit::MockWebGraphicsContext3D::texParameteri):
        (WebKit::MockWebGraphicsContext3D::texSubImage2D):
        (WebKit::MockWebGraphicsContext3D::uniform1f):
        (WebKit::MockWebGraphicsContext3D::uniform1fv):
        (WebKit::MockWebGraphicsContext3D::uniform1i):
        (WebKit::MockWebGraphicsContext3D::uniform1iv):
        (WebKit::MockWebGraphicsContext3D::uniform2f):
        (WebKit::MockWebGraphicsContext3D::uniform2fv):
        (WebKit::MockWebGraphicsContext3D::uniform2i):
        (WebKit::MockWebGraphicsContext3D::uniform2iv):
        (WebKit::MockWebGraphicsContext3D::uniform3f):
        (WebKit::MockWebGraphicsContext3D::uniform3fv):
        (WebKit::MockWebGraphicsContext3D::uniform3i):
        (WebKit::MockWebGraphicsContext3D::uniform3iv):
        (WebKit::MockWebGraphicsContext3D::uniform4f):
        (WebKit::MockWebGraphicsContext3D::uniform4fv):
        (WebKit::MockWebGraphicsContext3D::uniform4i):
        (WebKit::MockWebGraphicsContext3D::uniform4iv):
        (WebKit::MockWebGraphicsContext3D::uniformMatrix2fv):
        (WebKit::MockWebGraphicsContext3D::uniformMatrix3fv):
        (WebKit::MockWebGraphicsContext3D::uniformMatrix4fv):
        (WebKit::MockWebGraphicsContext3D::useProgram):
        (WebKit::MockWebGraphicsContext3D::validateProgram):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib1f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib1fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib2f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib2fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib3f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib3fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib4f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib4fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttribPointer):
        (WebKit::MockWebGraphicsContext3D::viewport):
        (WebKit::MockWebGraphicsContext3D::createBuffer):
        (WebKit::MockWebGraphicsContext3D::createFramebuffer):
        (WebKit::MockWebGraphicsContext3D::createProgram):
        (WebKit::MockWebGraphicsContext3D::createRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::createShader):
        (WebKit::MockWebGraphicsContext3D::createTexture):
        (WebKit::MockWebGraphicsContext3D::deleteBuffer):
        (WebKit::MockWebGraphicsContext3D::deleteFramebuffer):
        (WebKit::MockWebGraphicsContext3D::deleteProgram):
        (WebKit::MockWebGraphicsContext3D::deleteRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::deleteShader):
        (WebKit::MockWebGraphicsContext3D::deleteTexture):
        * tests/MockWebGraphicsContext3DTest.cpp: Added.
        (TEST):
        (FrameCountingContext::FrameCountingContext):
        (FrameCountingContext::prepareTexture):
        (FrameCountingContext::frameCount):

2011-08-26  Nate Chapin  <japhet@chromium.org>

        Use enums instead of bools for ThreadableLoaderOptions
        variables.
        https://bugs.webkit.org/show_bug.cgi?id=66984

        Reviewed by David Levin.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::loadAsynchronously):

2011-08-25  Jeremy Apthorp  <jeremya@google.com>

        Enable fullscreen API in Chromium by default.
        https://bugs.webkit.org/show_bug.cgi?id=66993

        Reviewed by Adam Barth.

        * features.gypi:

2011-08-25  Scott Graham  <scottmg@chromium.org>

        Enable incremental linking for component build on Chromium
        https://bugs.webkit.org/show_bug.cgi?id=66950

        Reviewed by Darin Fisher.

        Turns on Use Library Dependency Inputs for webkit.vcproj on Windows
        build, when incremental_chrome_dll gyp flag is set. This is to get
        faster incremental links on Windows builds.

        * WebKit.gyp:

2011-08-25  Pavel Podivilov  <podivilov@chromium.org>

        Unreviewed, fix chromium devtools tests.

        * src/js/Tests.js:
        (.TestSuite.prototype.evaluateInConsole_):

2011-08-25  John Bates  <jbates@google.com>

        [chromium] Leaking SkBitmaps for background images
        https://bugs.webkit.org/show_bug.cgi?id=66488

        Reviewed by Stephen White.

        This patch simply changes NativeImageSkia to have a SkBitmap instead of
        deriving from SkBitmap. All dependent code updated to access the member
        instead of calling SkBitmap methods on NativeImageSkia objects. This
        may or may not fix the memory leak, but it's definitely a bug that could
        cause memory leaks.

        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::clipboardWriteImage):
        * src/WebImageDecoder.cpp:
        (WebKit::WebImageDecoder::getFrameAtIndex):
        * src/WebImageSkia.cpp:
        (WebKit::WebImage::fromData):
        (WebKit::WebImage::operator=):

2011-08-25  Brian Salomon  <bsalomon@google.com>

        [SKIA] Move forward decl of skia type outside namespace Webkit
        https://bugs.webkit.org/show_bug.cgi?id=66942

        Reviewed by Stephen White.

        * public/WebGraphicsContext3D.h:

2011-08-25  Mikhail Naganov  <mnaganov@chromium.org>

        Chromium: expose MemoryCache::prune and FontCache::purgeInactiveFontData.
        https://bugs.webkit.org/show_bug.cgi?id=66132

        Reviewed by Tony Gentilcore.

        * public/WebCache.h:
        * public/WebFontCache.h:
        * src/WebCache.cpp:
        (WebKit::WebCache::clear):
        (WebKit::WebCache::prune):
        * src/WebFontCache.cpp:
        (WebKit::WebFontCache::prune):

2011-08-24  Kentaro Hara  <haraken@google.com>

        Implement a keypath parser strictly following the specification
        https://bugs.webkit.org/show_bug.cgi?id=62288

        Reviewed by Tony Chang.

        Implemented a keypath parser that accepts either an empty string, a JavaScript
        identifier, or multiple JavaScript identifiers separated by periods.
        We fixed createObjectStore() and createIndex() so that they parse and check
        their |keypath| argument and return an appropriate exception if the |keypath|
        is not valid. We also added unit tests for the new keypath parser in
        tests/IDBKeyPathTest.cpp. We replaced IDBKeyPathElement with String here and there.

        Tests: IDBKeyPathTest.*
               IDBKeyFromValueAndKeyPathTest.*
               InjectIDBKeyTest.*

        * public/WebIDBKeyPath.h:
        * src/WebIDBKeyPath.cpp:
        (WebKit::WebIDBKeyPath::create): Replaced IDBKeyPathElement with String
        (WebKit::WebIDBKeyPath::WebIDBKeyPath): Replaced IDBKeyPathElement with String
        (WebKit::WebIDBKeyPath::assign): Replaced IDBKeyPathElement with String
        (WebKit::WebIDBKeyPath::operator const WTF::Vector<WTF::String, 0>&): Replaced IDBKeyPathElement with String
        * tests/IDBBindingUtilitiesTest.cpp:
        (WebCore::checkKeyFromValueAndKeyPathInternal): Replaced IDBKeyPathElement with String
        (WebCore::injectKey): Replaced IDBKeyPathElement with String
        (WebCore::TEST): Rewrote tests for the new keypath parser
        * tests/IDBKeyPathTest.cpp:
        (WebCore::checkKeyPath): Checks if a keypath is an expected keypath or not
        (WebCore::TEST): Unit tests for the new keypath parser

2011-08-24  Eric Uhrhane  <ericu@chromium.org>

        Reviewed by Adam Barth.

        [filesystem/Chromium] Filesystem paths need proper URL escaping
        https://bugs.webkit.org/show_bug.cgi?id=62811

        Fix http://code.google.com/p/chromium/issues/detail?id=78860 by making
        KURLChromium.cpp's escaping code actually work.

        Here I added the needed calls to encodeWithURLEscapeSequences.
        * src/AsyncFileSystemChromium.cpp:
        (WebCore::AsyncFileSystemChromium::virtualPathToFileSystemURL):
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::virtualPathToFileSystemURL):

        Here I updated the test to reflect the new functionality in
        encodeWithURLEscapeSequences.
        * tests/KURLTest.cpp:

2011-08-24  Ilya Sherman  <isherman@chromium.org>

        Remove some dead Autofill code
        https://bugs.webkit.org/show_bug.cgi?id=66899
        http://code.google.com/p/chromium/issues/detail?id=51644

        Reviewed by James Robinson.

        * WebKit.gyp:
        * public/WebAutofillClient.h:
        * public/WebFrame.h:
        * public/WebPasswordAutocompleteListener.h: Removed.
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::EditorClientImpl):
        (WebKit::EditorClientImpl::handleKeyboardEvent):
        (WebKit::EditorClientImpl::textFieldDidBeginEditing):
        (WebKit::EditorClientImpl::textFieldDidEndEditing):
        (WebKit::EditorClientImpl::textDidChangeInTextField):
        (WebKit::EditorClientImpl::doTextFieldCommandFromEvent):
        * src/EditorClientImpl.h:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidFinishDocumentLoad):
        * src/WebFrameImpl.cpp:
        (WebKit::frameContentAsPlainText):
        (WebKit::WebFrameImpl::scopeStringMatches):
        (WebKit::WebFrameImpl::~WebFrameImpl):
        * src/WebFrameImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::mouseDown):

2011-08-24  Tom Sepez  <tsepez@chromium.org>

        chromium WebFrameImpl - don't load javascript URLs against chrome internal pages.
        https://bugs.webkit.org/show_bug.cgi?id=66720

        Reviewed by Adam Barth.

        * public/WebSecurityPolicy.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadJavaScriptURL):
        * src/WebSecurityPolicy.cpp:
        (WebKit::WebSecurityPolicy::registerURLSchemeAsNotAllowingJavascriptURLs):
        * tests/WebFrameTest.cpp:
        (WebKit::WebFrameTest::WebFrameTest):
        (WebKit::WebFrameTest::registerMockedHttpURLLoad):
        (WebKit::WebFrameTest::registerMockedChromeURLLoad):
        (WebKit::WebFrameTest::serveRequests):
        (WebKit::WebFrameTest::loadHttpFrame):
        (WebKit::WebFrameTest::loadChromeFrame):
        (WebKit::WebFrameTest::registerMockedURLLoad):
        (WebKit::WebFrameTest::loadFrame):
        (WebKit::TEST_F):
        * tests/data/history.html: Added.

2011-08-24  Jeremy Apthorp  <jeremya@google.com>

        Expose fullscreen API on WebElement/WebDocument
        https://bugs.webkit.org/show_bug.cgi?id=66746

        Reviewed by Darin Fisher.

        * public/WebPluginContainer.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setFullscreen):
        * src/WebPluginContainerImpl.h:

2011-08-24  Brian Salomon  <bsalomon@google.com>

        [SKIA] Allow WebKitGraphicsContext3D implementation to provide a compatible GrGLInterface
        https://bugs.webkit.org/show_bug.cgi?id=66809

        Reviewed by Stephen White.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::grGLInterface):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::grContext):

2011-08-23  Adam Barth  <abarth@webkit.org>

        WebSearchableFormData crashes when given a detached HTMLFormElement
        https://bugs.webkit.org/show_bug.cgi?id=66831

        Reviewed by Dimitri Glazkov.

        We need to null-check the Frame.

        * src/WebSearchableFormData.cpp:
        (HTMLNames::GetFormEncoding):
        * tests/WebFrameTest.cpp:
        (WebKit::TEST_F):
        * tests/data/form.html: Added.

2011-08-23  Iain Merrick  <husky@google.com>

        [chromium] Make WebGL context current before querying for extensions
        https://bugs.webkit.org/show_bug.cgi?id=66788

        We're making changes on the Chromium side for threaded compositing that
        will require makeContextCurrent to be called on the appropriate thread
        before any other GL calls.

        In line with other GraphicsContext3D implementations, we do this
        implicitly. This is the minimum change that makes WebGL compliant.

        Reviewed by Kenneth Russell.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initializeExtensions):

2011-08-23  Scott Byer  <scottbyer@chromium.org>

        ScrollAnimatorNone coasting implementation
        https://bugs.webkit.org/show_bug.cgi?id=66258

        Reviewed by James Robinson.

        * tests/ScrollAnimatorNoneTest.cpp:
        (MockScrollableArea::visibleHeight):
        (MockScrollableArea::visibleWidth):
        (ScrollAnimatorNoneTest::SavePerAxisData::SavePerAxisData):
        (ScrollAnimatorNoneTest::SavePerAxisData::operator==):
        (ScrollAnimatorNoneTest::SetUp):
        (ScrollAnimatorNoneTest::updateDataFromParameters):
        (ScrollAnimatorNoneTest::animateScroll):
        (ScrollAnimatorNoneTest::attackArea):
        (ScrollAnimatorNoneTest::releaseArea):
        (ScrollAnimatorNoneTest::coastCurve):
        (ScrollAnimatorNoneTest::curveTestInner):
        (TEST_F):

2011-08-23  James Robinson  <jamesr@chromium.org>

        [chromium] Need a way to test lost compositor context recovery
        https://bugs.webkit.org/show_bug.cgi?id=66820

        Reviewed by Kenneth Russell.

        Adds a testing-only API to simulate a lost compositor context.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::loseCompositorContext):
        * src/WebViewImpl.h:

2011-08-23  Nat Duca  <nduca@chromium.org>

        [chromium] Implement CCThread in terms of WebThread
        https://bugs.webkit.org/show_bug.cgi?id=66610

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebThread.h:
        (WebKit::WebThread::~WebThread):
        * src/CCThreadImpl.cpp: Added.
        (WebKit::GetThreadIDTask::GetThreadIDTask):
        (WebKit::GetThreadIDTask::~GetThreadIDTask):
        (WebKit::GetThreadIDTask::run):
        (WebKit::CCThreadTaskAdapter::CCThreadTaskAdapter):
        (WebKit::CCThreadTaskAdapter::~CCThreadTaskAdapter):
        (WebKit::CCThreadTaskAdapter::run):
        (WebKit::CCThreadImpl::create):
        (WebKit::CCThreadImpl::~CCThreadImpl):
        (WebKit::CCThreadImpl::postTask):
        (WebKit::CCThreadImpl::threadID):
        (WebKit::CCThreadImpl::CCThreadImpl):
        * src/CCThreadImpl.h: Renamed from Source/WebCore/platform/graphics/chromium/cc/CCThread.cpp.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::createCompositorThread):
        * src/WebViewImpl.h:
        * tests/CCThreadTest.cpp:

2011-08-23  Iain Merrick  <husky@google.com>

        [chromium] Renderer crashes when about:gpucrash is loaded
        https://bugs.webkit.org/show_bug.cgi?id=66814

        WebViewImpl::didRecreateGraphicsContext() was calling
        setRootLayer() on the CC layer tree, but the root layer
        doesn't actually change and the code wasn't defensive
        against this. This CL adds some asserts to catch tree
        corruption and removes the unnecessary calls.

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::didRecreateGraphicsContext):

2011-08-23  Dmitry Lomov  <Dmitry Lomov (dslomov@google.com)>

        https://bugs.webkit.org/show_bug.cgi?id=66751 
        [Chromium]WebWorkerClientImpl should always invoke
        InspectorIntrumentation on main thread.
        The fix moves calls to InspectorInstrumentation from
        WebWorkerClientImpl to unedrlying WorkerMessagingProxy.

        Reviewed by Pavel Feldman.

        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::terminateWorkerContext):
        (WebKit::WebWorkerClientImpl::workerContextDestroyed):

2011-08-23  Adam Klein  <adamk@chromium.org>

        [chromium] Remove a few FIXME #defines in API headers
        https://bugs.webkit.org/show_bug.cgi?id=66791

        Reviewed by James Robinson.

        * DEPS:
        Roll chromium_rev to r97891.
        * public/WebFileSystem.h:
        #define made obsolete in http://crrev.com/97520.
        * public/WebKitClient.h:
        #define made obsolete in http://crrev.com/97524 and
        http://crrev.com/97891.


2011-08-23  Al Patrick  <apatrick@chromium.org>

        Add shareResources flag to 3D graphics context attributes
        https://bugs.webkit.org/show_bug.cgi?id=66516

        Reviewed by James Robinson.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::Attributes::Attributes):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):
        * src/WebViewImpl.cpp:
        (std::getCompositorContextAttributes):

2011-08-23  Fady Samuel  <fsamuel@chromium.org>

        New MainFrame views should inherit fixed layout settings from existing MainFrame view in Chromium.
        https://bugs.webkit.org/show_bug.cgi?id=66780

        Fixed layout mode is set from WebViewImpl, but new main FrameViews are created on loading new pages. The new page's FrameView should get its
        fixed layout settings from the current page.

        Reviewed by Darin Fisher.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):

2011-08-23  Matt Falkenhagen  <falken@chromium.org>

        [chromium] Update WebSettings to support per-script font settings
        https://bugs.webkit.org/show_bug.cgi?id=66220

        Reviewed by Tony Chang.

        * WebKit.gyp:
        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setStandardFontFamily):
        (WebKit::WebSettingsImpl::setFixedFontFamily):
        (WebKit::WebSettingsImpl::setSerifFontFamily):
        (WebKit::WebSettingsImpl::setSansSerifFontFamily):
        (WebKit::WebSettingsImpl::setCursiveFontFamily):
        (WebKit::WebSettingsImpl::setFantasyFontFamily):
        * src/WebSettingsImpl.h:

2011-08-23  Nat Duca  <nduca@chromium.org>

        Unreviewd, roll chromium reverse DEPS 97698:97834
        https://bugs.webkit.org/show_bug.cgi?id=66781

        * DEPS:

2011-08-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r93575.
        http://trac.webkit.org/changeset/93575
        https://bugs.webkit.org/show_bug.cgi?id=66744

        Does not compile on chromium canaries (Requested by jamesr on
        #webkit).

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setStandardFontFamily):
        (WebKit::WebSettingsImpl::setFixedFontFamily):
        (WebKit::WebSettingsImpl::setSerifFontFamily):
        (WebKit::WebSettingsImpl::setSansSerifFontFamily):
        (WebKit::WebSettingsImpl::setCursiveFontFamily):
        (WebKit::WebSettingsImpl::setFantasyFontFamily):
        * src/WebSettingsImpl.h:

2011-08-22  Matt Falkenhagen  <falken@chromium.org>

        [chromium] Update WebSettings to support per-script font settings
        https://bugs.webkit.org/show_bug.cgi?id=66220

        Reviewed by Tony Chang.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setStandardFontFamily):
        (WebKit::WebSettingsImpl::setFixedFontFamily):
        (WebKit::WebSettingsImpl::setSerifFontFamily):
        (WebKit::WebSettingsImpl::setSansSerifFontFamily):
        (WebKit::WebSettingsImpl::setCursiveFontFamily):
        (WebKit::WebSettingsImpl::setFantasyFontFamily):
        * src/WebSettingsImpl.h:

2011-08-22  Iain Merrick  <husky@google.com>

        [chromium] WebViewImpl should not reshape the 3D context
        https://bugs.webkit.org/show_bug.cgi?id=66704

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebViewImpl::graphicsContext3D):

2011-08-22  Nat Duca  <nduca@chromium.org>

        Make GraphicsContext3D::isResourceSafe a function and, on Chromium, determine its value lazily
        https://bugs.webkit.org/show_bug.cgi?id=66708

        Reviewed by Kenneth Russell.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::isResourceSafe):
        (WebCore::GraphicsContext3D::create):
        (WebCore::GraphicsContext3D::isResourceSafe):
        * src/GraphicsContext3DInternal.h:

2011-08-22  Adam Klein  <adamk@chromium.org>

        [chromium] Remove deprecated and unused bits of WebIDB* headers
        https://bugs.webkit.org/show_bug.cgi?id=66711

        Reviewed by Tony Chang.

        The Chromium side of this patch was submitted as
        http://crrev.com/97687.

        * public/WebIDBCallbacks.h:
        * public/WebIDBCursor.h:
        (WebKit::WebIDBCursor::primaryKey):
        (WebKit::WebIDBCursor::value):
        (WebKit::WebIDBCursor::deleteFunction):
        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::transaction):

2011-08-22  Dimitri Glazkov  <dglazkov@chromium.org>

        Remove third_party/leveldb, because it's no longer used and doesn't exist downstream.

        * DEPS: Done it.

2011-08-22  Dimitri Glazkov  <dglazkov@chromium.org>

        Roll Chromium DEPS to 97698.

        * DEPS: Rolled.

2011-08-22  Justin Novosad  <junov@chromium.org>

        [Chromium] Crash when allocation of very large canvas fails
        https://bugs.webkit.org/show_bug.cgi?id=66563

        Reviewed by Stephen White.

        * DEPS:
        Bumping up the chrome DEPS to pick up 97474, which is
        required by this patch.

2011-08-20  Nebojsa Ciric  <cira@chromium.org>

        Add dependency on v8-i18n library. We used v8 repository before.
        Chromium DEPS change was already submited (http://codereview.chromium.org/7583050).
        https://bugs.webkit.org/show_bug.cgi?id=66573

        Reviewed by Kent Tamura.

        * DEPS:

2011-08-19  Adam Klein  <adamk@chromium.org>

        [chromium] Remove various unreferenced bits from Chromium API headers
        https://bugs.webkit.org/show_bug.cgi?id=66575

        Reviewed by Tony Chang.

        * public/WebApplicationCacheHost.h:
        (WebKit::WebApplicationCacheHost::willStartMainResourceRequest):
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didReceiveTitle):
        * public/WebVideoFrame.h:

2011-08-19  Fady Samuel  <fsamuel@chromium.org>

        Expose Fixed Layout Size mode to Chromium's WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=66568

        Reviewed by Darin Fisher.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::isFixedLayoutModeEnabled):
        (WebKit::WebViewImpl::enableFixedLayoutMode):
        (WebKit::WebViewImpl::fixedLayoutSize):
        (WebKit::WebViewImpl::setFixedLayoutSize):
        * src/WebViewImpl.h:

2011-08-17  Adrienne Walker  <enne@google.com>

        [chromium] Split tiler into main thread / compositor thread versions
        https://bugs.webkit.org/show_bug.cgi?id=66065

        Reviewed by James Robinson.

        Add a test for assignment and copy constructor for TilingData.

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-08-19  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: [Extensions API][chromium] webInspector.resources deprecation warning is given even for extensions that don't use webInspector.resources
        https://bugs.webkit.org/show_bug.cgi?id=66553

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:
        (WebInspector.platformExtensionAPI):

2011-08-18  James Kozianski  <koz@chromium.org>

        Chromium plumbing for webkitRequestFullScreen
        https://bugs.webkit.org/show_bug.cgi?id=66031

        Reviewed by Darin Fisher.

        * public/WebView.h:
        * public/WebViewClient.h:
        (WebKit::WebViewClient::enterFullscreenForElement):
        (WebKit::WebViewClient::exitFullscreenForElement):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::enterFullScreenForElement):
        (WebKit::ChromeClientImpl::exitFullScreenForElement):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::exitFullscreen):
        * src/WebViewImpl.h:

2011-08-18  Chris Rogers  <crogers@google.com>

        Implement WebMediaPlayerClientImpl::audioSourceProvider() and interface into chromium
        https://bugs.webkit.org/show_bug.cgi?id=66441

        Reviewed by Darin Fisher.

        * public/WebAudioSourceProvider.h: Added.
        (WebKit::WebAudioSourceProvider::~WebAudioSourceProvider):
        * public/WebMediaPlayer.h:
        (WebKit::WebMediaPlayer::audioSourceProvider):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::audioSourceProvider):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::provideInput):
        * src/WebMediaPlayerClientImpl.h:
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::AudioSourceProviderImpl):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::~AudioSourceProviderImpl):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::initialize):

2011-08-18  Sailesh Agrawal  <sail@chromium.org>

        Chromium Mac: Show scrollbar when doing search
        https://bugs.webkit.org/show_bug.cgi?id=66209

        Reviewed by James Robinson.

        Fixed a bug in invalidateArea where it wouldn't properly invalidate overlay scrollbars. The problem was that it was assuming that the scrollbar was always to the right of the visible scrollbar. This isn't true for overlay scrollbars.

        No tests because there are no Mac 10.7 chromium bots yet.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::invalidateArea):

2011-08-18  James Robinson  <jamesr@chromium.org>

        [chromium] Draw the root/"non-composited content" in compositor side
        https://bugs.webkit.org/show_bug.cgi?id=58834

        Reviewed by Kenneth Russell.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::didRecreateGraphicsContext):
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        * src/WebViewImpl.h:

2011-08-18  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        GestureRecognizer: Update how gesture-scroll works.

        Add a unit-test to make sure the correct gesture events are being
        generated.
        https://bugs.webkit.org/show_bug.cgi?id=66267

        Reviewed by Adam Barth.

        * tests/InnerGestureRecognizerTest.cpp:
        (WebCore::BuildablePlatformTouchPoint::BuildablePlatformTouchPoint):
        (WebCore::BuildablePlatformTouchEvent::BuildablePlatformTouchEvent):
        (WebCore::TEST_F):

2011-08-18  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r93329.
        http://trac.webkit.org/changeset/93329
        https://bugs.webkit.org/show_bug.cgi?id=66497

        Turned text on chromium win blue (Requested by jamesr_ on
        #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::setRootPlatformLayer):
        (WebKit::WebViewImpl::didRecreateGraphicsContext):
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        * src/WebViewImpl.h:

2011-08-18  Dominic Mazzoni  <dmazzoni@google.com>

        Add a bunch of accessors to WebAccessibilityObject to expose more of
        AccessibilityObject to Chromium, including range control values,
        document load state, live region attributes, and a few other
        ARIA attributes.

        https://bugs.webkit.org/show_bug.cgi?id=66411

        Reviewed by Dimitri Glazkov.

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::isAriaReadOnly):
        (WebKit::WebAccessibilityObject::isButtonStateMixed):
        (WebKit::WebAccessibilityObject::isControl):
        (WebKit::WebAccessibilityObject::isFocused):
        (WebKit::WebAccessibilityObject::isLoaded):
        (WebKit::WebAccessibilityObject::isRequired):
        (WebKit::WebAccessibilityObject::isVertical):
        (WebKit::WebAccessibilityObject::accessKey):
        (WebKit::WebAccessibilityObject::ariaHasPopup):
        (WebKit::WebAccessibilityObject::ariaLiveRegionAtomic):
        (WebKit::WebAccessibilityObject::ariaLiveRegionBusy):
        (WebKit::WebAccessibilityObject::ariaLiveRegionRelevant):
        (WebKit::WebAccessibilityObject::ariaLiveRegionStatus):
        (WebKit::WebAccessibilityObject::estimatedLoadingProgress):
        (WebKit::WebAccessibilityObject::hierarchicalLevel):
        (WebKit::WebAccessibilityObject::valueDescription):
        (WebKit::WebAccessibilityObject::valueForRange):
        (WebKit::WebAccessibilityObject::maxValueForRange):
        (WebKit::WebAccessibilityObject::minValueForRange):

2011-08-15  Dmitry Lomov  <dslomov@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=61016
        [WebWorkers][Chromium] Use v8 Isolates for in-process implementation of WebWorkers.
        This adds an implementation of in-process dedicated workers to chromium port.
        The crux of the matter is the reimplementation of WebWorkerClientImpl. WebWorkerClientImpl now 
        implements all three of Worker{Loader,Context,Object}Proxies and delegates the implementation to 
        WebKit's standard WorkerMessagingProxy.
        For now, we have 3 implementations of workers in chromium WebKit:
          - In-process dedicated workers (this checkin)
          - Inter-process shared workers
          - Inter-process dedicated workers (defunct after this checkin)
        This patch extracts some new common interfaces (NewWebWorkerBase and NewWebWorkerClient) for these 
        three implementations. 
        Removing the remainings of inter-process dedicated workers -related classes is left for a separate patch 
        (it will require coordinated changes on chromuium side).

        Reviewed by David Levin.

        * public/WebCommonWorkerClient.h:
        * src/DatabaseObserver.cpp:
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge):
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask):
        (WebKit::allowDatabaseForWorker):
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
        * src/WebSharedWorkerImpl.h:
        (WebKit::WebSharedWorkerImpl::newCommonClient):
        * src/WebWorkerBase.h:
        (WebKit::WebWorkerBase::view):
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::createWorkerContextProxy):
        (WebKit::WebWorkerClientImpl::startWorkerContext):
        (WebKit::WebWorkerClientImpl::terminateWorkerContext):
        (WebKit::WebWorkerClientImpl::postMessageToWorkerContext):
        (WebKit::WebWorkerClientImpl::hasPendingActivity):
        (WebKit::WebWorkerClientImpl::workerObjectDestroyed):
        (WebKit::WebWorkerClientImpl::connectToInspector):
        (WebKit::WebWorkerClientImpl::disconnectFromInspector):
        (WebKit::WebWorkerClientImpl::sendMessageToInspector):
        (WebKit::WebWorkerClientImpl::postMessageToPageInspector):
        (WebKit::WebWorkerClientImpl::postTaskToLoader):
        (WebKit::WebWorkerClientImpl::postTaskForModeToWorkerContext):
        (WebKit::WebWorkerClientImpl::postMessageToWorkerObject):
        (WebKit::WebWorkerClientImpl::confirmMessageFromWorkerObject):
        (WebKit::WebWorkerClientImpl::reportPendingActivity):
        (WebKit::WebWorkerClientImpl::workerContextClosed):
        (WebKit::WebWorkerClientImpl::postExceptionToWorkerObject):
        (WebKit::WebWorkerClientImpl::postConsoleMessageToWorkerObject):
        (WebKit::WebWorkerClientImpl::workerContextDestroyed):
        (WebKit::WebWorkerClientImpl::allowFileSystem):
        (WebKit::WebWorkerClientImpl::openFileSystem):
        (WebKit::WebWorkerClientImpl::allowDatabase):
        (WebKit::WebWorkerClientImpl::dispatchDevToolsMessage):
        (WebKit::WebWorkerClientImpl::view):
        (WebKit::WebWorkerClientImpl::WebWorkerClientImpl):
        (WebKit::WebWorkerClientImpl::~WebWorkerClientImpl):
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::newCommonClient):
        * src/WebWorkerImpl.cpp:
        (WebKit::WebWorkerImpl::newCommonClient):
        * src/WebWorkerImpl.h:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-08-18  James Robinson  <jamesr@chromium.org>

        [chromium] Draw the root/"non-composited content" in compositor side
        https://bugs.webkit.org/show_bug.cgi?id=58834

        Reviewed by Darin Fisher.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::didRecreateGraphicsContext):
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        * src/WebViewImpl.h:

2011-08-18  Tony Chang  <tony@chromium.org>

        Revert r93294, doesn't compile on Chromium Mac.

        * features.gypi:

2011-08-17  Adam Roben  <aroben@apple.com>

        Make WebCore keep track of the current device scale factor

        Fixes <http://webkit.org/b/66413> WebCore requires every WebKit port to keep track of the
        device scale factor

        Reviewed by Darin Adler.

        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:
        Removed deviceScaleFactor.

2011-08-18  Steve Block  <steveblock@google.com>

        Remove a superfluous 'using' from WebBindings.cpp
        https://bugs.webkit.org/show_bug.cgi?id=66046

        Reviewed by Alexey Proskuryakov.

        * src/WebBindings.cpp:

2011-08-18  Gavin Peters  <gavinp@chromium.org>

        Prepare frames for history navigation.

        Before beginning an explicit history navigation in a newly initialized
        frame, it's important to give a "previous" item to avoid crashes, and
        give a state to the state machine to avoid extra validating loads.

        https://bugs.webkit.org/show_bug.cgi?id=66322

        Reviewed by Darin Fisher.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadHistoryItem):

2011-08-18  Nico Weber  <thakis@chromium.org>

        [chromium/mac] Enable smooth scrolling
        https://bugs.webkit.org/show_bug.cgi?id=66418

        Reviewed by Dimitri Glazkov.

        * features.gypi:

2011-08-17  Scott Byer  <scottbyer@chromium.org>

        ScrollAnimatorNone: Remove unused field
        https://bugs.webkit.org/show_bug.cgi?id=66312

        Reviewed by Adam Barth.

        * tests/ScrollAnimatorNoneTest.cpp:
        (ScrollAnimatorNoneTest::updateDataFromParameters):
        (TEST_F):

2011-08-16  Chang Shu  <cshu@webkit.org>

        Support reset in WebCore::Internals
        https://bugs.webkit.org/show_bug.cgi?id=66307

        Reviewed by Dimitri Glazkov.

        Added framework code in WebKit.

        * public/WebTestingSupport.h:
        * src/WebTestingSupport.cpp:
        (WebKit::WebTestingSupport::resetInternalsObject):

2011-08-15  Aaron Boodman  <aa@chromium.org>

        Remove support for old didCreateIsolatedContext() signature
        https://bugs.webkit.org/show_bug.cgi?id=66249

        Reviewed by Darin Fisher.

        * public/WebFrameClient.h:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didCreateIsolatedScriptContext):

2011-08-17  Aaron Boodman  <aa@chromium.org>

        Remove support for old didCreateIsolatedContext() signature
        https://bugs.webkit.org/show_bug.cgi?id=66249

        Reviewed by Darin Fisher.

        * public/WebFrameClient.h:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didCreateIsolatedScriptContext):

2011-08-17  David Grogan  <dgrogan@chromium.org>

        Remove onTimeout from WebIDBTransactionCallbacks.h
        https://bugs.webkit.org/show_bug.cgi?id=66326

        Reviewed by Tony Chang.

        * public/WebIDBTransactionCallbacks.h:

2011-08-16  Per-Erik Brodin  <per-erik.brodin@ericsson.com>

        Make it possible to explicitly prevent a preflight via ThreadableLoaderOptions
        https://bugs.webkit.org/show_bug.cgi?id=65694

        Reviewed by Alexey Proskuryakov.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::loadAsynchronously):

2011-08-12  John Abd-El-Malek  <jam@chromium.org>

        [chromium] cleanup after previous webkit change rolled into chrome
        https://bugs.webkit.org/show_bug.cgi?id=66177

        Reviewed by James Robinson.

        * DEPS:
        * WebKit.gyp:
        * public/WebScrollbar.h:

2011-08-16  Stephen White  <senorblanco@chromium.org>

        GraphicsContext3D should allow its hostWindow to be NULL
        https://bugs.webkit.org/show_bug.cgi?id=66305

        Allow the hostWindow param (and m_webViewImpl) to be NULL.  This
        makes it much easier to enable GPU acceleration at a lower level
        in WebKit's platform/graphics layer, without needing access to the
        Page* or HostWindow*.  Also bump the chromium DEPS to chrome r96940,
        which includes a similar change for the in-process GraphicsContext3D
        implementations.

        Reviewed by James Robinson.

        * DEPS:
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):
        (WebCore::GraphicsContext3DInternal::platformTexture):
        (WebCore::GraphicsContext3DInternal::paintsIntoCanvasBuffer):

2011-08-16  Mikhail Naganov  <mnaganov@chromium.org>

        Web Inspector: [Chromium] Add deployment of NetworkPanel .css files to concatenated version
        https://bugs.webkit.org/show_bug.cgi?id=66316

        Reviewed by Pavel Feldman.

        * WebKit.gyp:

2011-08-16  Mikhail Naganov  <mnaganov@chromium.org>

        Web Inspector: [Chromium] Fix 'inspector_resources' target to depend on 'concatenated_heap_snapshot_worker_js'
        https://bugs.webkit.org/show_bug.cgi?id=66300

        Reviewed by Pavel Feldman.

        * WebKit.gyp:

2011-08-15  Dmitry Titov  <dimich@chromium.org>

        [Chromium] Add WebFrameClient::didAdoptURLLoader() notification
        https://bugs.webkit.org/show_bug.cgi?id=66167

        Reviewed by Darin Fisher.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didAdoptURLLoader):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::transferLoadingResourceFromPage):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::ResourceHandleInternal):
        (WebCore::ResourceHandleInternal::FromResourceHandle):
        (WebCore::ResourceHandle::ResourceHandle):
        (WebCore::ResourceHandle::firstRequest):
        (WebCore::ResourceHandle::client):
        (WebCore::ResourceHandle::setClient):
        (WebCore::ResourceHandle::~ResourceHandle):
        * src/ResourceHandleInternal.h: Added.
        (WebCore::ResourceHandleInternal::~ResourceHandleInternal):
        (WebCore::ResourceHandleInternal::setOwner):
        (WebCore::ResourceHandleInternal::request):
        (WebCore::ResourceHandleInternal::client):
        (WebCore::ResourceHandleInternal::setClient):
        (WebCore::ResourceHandleInternal::loader):

2011-08-15  Dmitry Titov  <dimich@chromium.org>

        FrameLoaderClient::transferLoadingResourceFromPage does not have enough parameters
        https://bugs.webkit.org/show_bug.cgi?id=66165

        Reviewed by Darin Fisher.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::transferLoadingResourceFromPage):
        * src/FrameLoaderClientImpl.h:

2011-08-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r93060.
        http://trac.webkit.org/changeset/93060
        https://bugs.webkit.org/show_bug.cgi?id=66259

        Does not compile on Chromium Windows (Requested by
        abarth|gardener on #webkit).

        * public/WebCache.h:
        * public/WebFontCache.h:
        * src/WebCache.cpp:
        (WebKit::WebCache::clear):
        * src/WebFontCache.cpp:

2011-08-15  Mikhail Naganov  <mnaganov@chromium.org>

        Chromium: expose MemoryCache::prune and FontCache::purgeInactiveFontData.
        https://bugs.webkit.org/show_bug.cgi?id=66132

        Reviewed by Darin Fisher.

        * public/WebCache.h:
        * public/WebFontCache.h:
        * src/WebCache.cpp:
        (WebKit::WebCache::prune):
        * src/WebFontCache.cpp:
        (WebKit::WebFontCache::prune):

2011-08-15  Nico Weber  <thakis@chromium.org>

        [chromium] Implement shouldRubberBandInDirection
        https://bugs.webkit.org/show_bug.cgi?id=66206

        Reviewed by Adam Barth.

        History swiping can only start after an unhandled mouse wheel event
        came back from the renderer, because mouse wheel javascript handlers
        take precedence over history swiping. This means that rubberbanding
        must not consume wheel events if they could trigger history, else
        history swiping won't be triggered for pages without wheel handlers
        either.

        This is based on the implementation in
        Source/WebKit2/WebProcess/WebCoreSupport/WebChromeClient.cpp

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::shouldRubberBandInDirection):
        * src/ChromeClientImpl.h:

2011-08-10  Aaron Boodman  <aa@chromium.org>

        Pass additional details to client in didCreateIsolatedContext
        https://bugs.webkit.org/show_bug.cgi?id=66037

        Reviewed by Darin Fisher.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didCreateIsolatedScriptContext):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didCreateIsolatedScriptContext):
        * src/FrameLoaderClientImpl.h:

2011-08-10  Adam Roben  <aroben@apple.com>

        Clear up scale factor terminology

        WebKit by and large deals with two scale factors: one intrinsic to the device on which the
        software is running, and one that is per-Page and can be controlled via API calls. This
        patch names the former "deviceScaleFactor" and the latter "pageScaleFactor", and makes the
        code use those names. It should introduce no behavior changes.

        Fixes <http://webkit.org/b/55787> WebKit uses multiple conflicting names to refer to the
        device scale factor

        Reviewed by Simon Fraser.

        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:

2011-08-12  Fady Samuel  <fsamuel@chromium.org>

        Refactoring of PopupMenuChromium For Readability and Maintainability
        https://bugs.webkit.org/show_bug.cgi?id=66009

        Reviewed by Darin Fisher.

        * src/ChromeClientImpl.cpp:
        * src/WebPopupMenuImpl.cpp:
        * src/WebViewImpl.cpp:
        * tests/PopupMenuTest.cpp:

2011-08-12  Fady Samuel  <fsamuel@chromium.org>

        Expose pageScaleFactor() to Chromium's WebViewImpl
        https://bugs.webkit.org/show_bug.cgi?id=66067

        Reviewed by Darin Fisher.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::pageScaleFactor):
        * src/WebViewImpl.h:

2011-08-12  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        Wire gesture tap events, add support for gesture events in the DRT and add a layout test for it.
        https://bugs.webkit.org/show_bug.cgi?id=66105

        Reviewed by Darin Fisher.

        * public/WebInputEvent.h:
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):

2011-08-12  Tommy Widenflycht  <tommyw@google.com>

        [Chromium] Implement the embedders for the HTML5 Track List objects
        https://bugs.webkit.org/show_bug.cgi?id=60260

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebMediaStreamTrack.h: Added.
        (WebKit::WebMediaStreamTrack::WebMediaStreamTrack):
        (WebKit::WebMediaStreamTrack::~WebMediaStreamTrack):
        (WebKit::WebMediaStreamTrack::isNull):
        * public/WebMediaStreamTrackList.h: Added.
        (WebKit::WebMediaStreamTrackList::WebMediaStreamTrackList):
        (WebKit::WebMediaStreamTrackList::~WebMediaStreamTrackList):
        (WebKit::WebMediaStreamTrackList::isNull):
        * src/WebMediaStreamTrack.cpp: Added.
        (WebKit::WebMediaStreamTrack::initialize):
        (WebKit::WebMediaStreamTrack::reset):
        (WebKit::WebMediaStreamTrack::WebMediaStreamTrack):
        (WebKit::WebMediaStreamTrack::operator WTF::PassRefPtr<WebCore::MediaStreamTrack>):
        * src/WebMediaStreamTrackList.cpp: Added.
        (WebKit::WebMediaStreamTrackList::initialize):
        (WebKit::WebMediaStreamTrackList::reset):
        (WebKit::WebMediaStreamTrackList::WebMediaStreamTrackList):
        (WebKit::WebMediaStreamTrackList::operator WTF::PassRefPtr<MediaStreamTrackList>):

2011-08-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r92976.
        http://trac.webkit.org/changeset/92976
        https://bugs.webkit.org/show_bug.cgi?id=66159

        Does not compile on chromium-win (Requested by abarth|gardener
        on #webkit).

        * src/ChromeClientImpl.cpp:
        * src/WebPopupMenuImpl.cpp:
        * src/WebViewImpl.cpp:

2011-08-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r92978.
        http://trac.webkit.org/changeset/92978
        https://bugs.webkit.org/show_bug.cgi?id=66155

        This patch does not compile (Requested by abarth|gardener on
        #webkit).

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::zoomLevel):
        (WebKit::WebViewImpl::setZoomLevel):
        (WebKit::WebViewImpl::zoomLimitsChanged):
        (WebKit::WebViewImpl::fullFramePluginZoomLevelChanged):
        (WebKit::WebView::zoomLevelToZoomFactor):
        (WebKit::WebView::zoomFactorToZoomLevel):
        * src/WebViewImpl.h:

2011-08-12  Fady Samuel  <fsamuel@chromium.org>

        Chromium's WebKit API should use floats instead of doubles for zoom to match WebCore
        https://bugs.webkit.org/show_bug.cgi?id=66089

        Reviewed by Darin Fisher.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::zoomLevel):
        (WebKit::WebViewImpl::setZoomLevel):
        (WebKit::WebViewImpl::zoomLimitsChanged):
        (WebKit::WebViewImpl::fullFramePluginZoomLevelChanged):
        (WebKit::WebView::zoomLevelToZoomFactor):
        (WebKit::WebView::zoomFactorToZoomLevel):
        * src/WebViewImpl.h:

2011-08-12  Fady Samuel  <fsamuel@chromium.org>

        Refactoring of PopupMenuChromium
        https://bugs.webkit.org/show_bug.cgi?id=66009

        Reviewed by Darin Fisher.

        * src/ChromeClientImpl.cpp:
        * src/WebPopupMenuImpl.cpp:
        * src/WebViewImpl.cpp:

2011-08-12  Fady Samuel  <fsamuel@chromium.org>

        Expose pageScaleFactor in Chromium's WebHistoryItem
        https://bugs.webkit.org/show_bug.cgi?id=66139

        Reviewed by Darin Fisher.

        * public/WebHistoryItem.h:
        * src/WebHistoryItem.cpp:
        (WebKit::WebHistoryItem::pageScaleFactor):
        (WebKit::WebHistoryItem::setPageScaleFactor):

2011-08-10  Nat Duca  <nduca@chromium.org>

        [chromium] Add WebThread to WebKitClient
        https://bugs.webkit.org/show_bug.cgi?id=66013

        Reviewed by Darin Fisher.

        * public/WebKitClient.h:
        (WebKit::WebKitClient::createThread):
        * public/WebThread.h: Added.
        (WebKit::WebThread::~WebThread):

2011-08-11  John Bauman  <jbauman@chromium.org>

        Readback composited webgl results for printing
        https://bugs.webkit.org/show_bug.cgi?id=65658

        Reviewed by James Robinson.

        Add support for reading from the composited version of a canvas.

        * public/WebGraphicsContext3D.h:
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::paintFramebufferToCanvas):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::paintFramebufferToCanvas):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3DInternal::paintCompositedResultsToCanvas):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToImageData):
        (WebCore::GraphicsContext3DInternal::reshape):
        * src/GraphicsContext3DInternal.h:

2011-08-05  Nat Duca  <nduca@chromium.org>

        [chromium] Make WebViewImpl point at CCLayerTreeHost and related separation
        https://bugs.webkit.org/show_bug.cgi?id=65791

        With this patch, LayerRendererChromium becomes increasingly responsible
        for rendering, while render scheduling and tree hosting moves into the
        CCLayerTreeHost.

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::setRootPlatformLayer):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        (WebKit::WebViewImpl::scrollRootLayerRect):
        (WebKit::WebViewImpl::invalidateRootLayerRect):
        (WebKit::getCompositorSettings):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::createRootLayerPainter):
        (WebKit::WebViewImpl::animateAndLayout):
        (WebKit::WebViewImpl::didRecreateGraphicsContext):
        (WebKit::WebViewImpl::scheduleComposite):
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        (WebKit::WebViewImpl::graphicsContext3D):
        (WebKit::WebViewImpl::setVisibilityState):
        * src/WebViewImpl.h:

2011-08-11  Nico Weber  <thakis@chromium.org>

        [chromium] Expose "min/max scroll size", "has horizontal/vertical scrollbar", "number of wheel handlers" to clients
        https://bugs.webkit.org/show_bug.cgi?id=66094

        Reviewed by James Robinson.

        We want to implement two-finger-swipe for history like safari does on
        os x lion. The way this works is:
        * If a page has no horizontal scrollbars, or the page is all the way
          to the left, scrolling to the left will go back in history instead.
        * Same for right/forward.

        This is modelled after the WebKit2 functions
        WKPageIsPinnedToLeftSide(), WKPageIsPinnedToRightSide(),
        WKPageHasHorizontalScrollbar(), and
        webPageProxy::willHandleHorizontalScrollEvents().

        * public/WebFrame.h:
        * public/WebViewClient.h:
        (WebKit::WebViewClient::numWheelEventHandlersChanged):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::numWheelEventHandlersChanged):
        * src/ChromeClientImpl.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::hasHorizontalScrollbar):
        (WebKit::WebFrameImpl::hasVerticalScrollbar):
        (WebKit::WebFrameImpl::isPinnedToLeft):
        (WebKit::WebFrameImpl::isPinnedToRight):
        * src/WebFrameImpl.h:

2011-08-11  Marja Hltt  <marja@chromium.org>

        Remove the temporary workaround added by http://trac.webkit.org/changeset/51338
        https://bugs.webkit.org/show_bug.cgi?id=65908

        Reviewed by Adam Barth.

        SecurityOrigin for a file URL returns "file://", and
        SecurityOrigin::createFromString("file://") creates a unique (null)
        security origin (because "file://" is first canonicalized to "file:///"
        and that is a directory). This means the conversion SecurityOrigin ->
        string -> SecurityOrigin doens't give back the same SecurityOrigin in
        case of file URLs.

        WebStorageNamespaceImpl::createStorageArea contains a workaround which
        changes the string "file://" into "file:///a" before giving it to
        SecurityOrigin::createFromString.

        If SecurityOrigin::m_enforceFilePathSeparation is true, then
        SecurityOrigin::toString() returns "null" for file URLs, and this
        problem does not exist, and the workaround code is not ran.

        This patch removes the workaround.

        * src/WebStorageNamespaceImpl.cpp:
        (WebKit::WebStorageNamespaceImpl::createStorageArea):

2011-08-10  John Abd-El-Malek  <jam@chromium.org>

        [chromium] Update WebScrollbar so that it works with overlay scrollbars on Lion
        https://bugs.webkit.org/show_bug.cgi?id=66008

        Reviewed by James Robinson.

        * WebKit.gyp:
        * public/WebScrollbar.h:
        * public/WebScrollbarClient.h:
        * src/ScrollbarGroup.cpp: Added.
        (WebKit::ScrollbarGroup::ScrollbarGroup):
        (WebKit::ScrollbarGroup::~ScrollbarGroup):
        (WebKit::ScrollbarGroup::scrollbarCreated):
        (WebKit::ScrollbarGroup::scrollbarDestroyed):
        (WebKit::ScrollbarGroup::setLastMousePosition):
        (WebKit::ScrollbarGroup::scrollSize):
        (WebKit::ScrollbarGroup::scrollPosition):
        (WebKit::ScrollbarGroup::setScrollOffset):
        (WebKit::ScrollbarGroup::invalidateScrollbarRect):
        (WebKit::ScrollbarGroup::invalidateScrollCornerRect):
        (WebKit::ScrollbarGroup::isActive):
        (WebKit::ScrollbarGroup::enclosingScrollableArea):
        (WebKit::ScrollbarGroup::isScrollCornerVisible):
        (WebKit::ScrollbarGroup::getTickmarks):
        (WebKit::ScrollbarGroup::convertFromContainingViewToScrollbar):
        (WebKit::ScrollbarGroup::horizontalScrollbar):
        (WebKit::ScrollbarGroup::verticalScrollbar):
        (WebKit::ScrollbarGroup::minimumScrollPosition):
        (WebKit::ScrollbarGroup::maximumScrollPosition):
        (WebKit::ScrollbarGroup::visibleHeight):
        (WebKit::ScrollbarGroup::visibleWidth):
        (WebKit::ScrollbarGroup::contentsSize):
        (WebKit::ScrollbarGroup::overhangAmount):
        (WebKit::ScrollbarGroup::currentMousePosition):
        (WebKit::ScrollbarGroup::shouldSuspendScrollAnimations):
        (WebKit::ScrollbarGroup::scrollbarStyleChanged):
        (WebKit::ScrollbarGroup::isOnActivePage):
        (WebKit::ScrollbarGroup::disconnectFromPage):
        * src/ScrollbarGroup.h: Added.
        (WebKit::ScrollbarGroup::scrollCornerRect):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::paint):
        (WebKit::WebPluginContainerImpl::reportGeometry):
        (WebKit::WebPluginContainerImpl::scrollbarGroup):
        (WebKit::WebPluginContainerImpl::willStartLiveResize):
        (WebKit::WebPluginContainerImpl::willEndLiveResize):
        (WebKit::WebPluginContainerImpl::handleMouseEvent):
        * src/WebPluginContainerImpl.h:
        * src/WebScrollbarImpl.cpp:
        (WebKit::WebScrollbar::createForPlugin):
        (WebKit::WebScrollbarImpl::WebScrollbarImpl):
        (WebKit::WebScrollbarImpl::~WebScrollbarImpl):
        (WebKit::WebScrollbarImpl::setScrollOffset):
        (WebKit::WebScrollbarImpl::invalidateScrollbarRect):
        (WebKit::WebScrollbarImpl::getTickmarks):
        (WebKit::WebScrollbarImpl::convertFromContainingViewToScrollbar):
        (WebKit::WebScrollbarImpl::scrollbarStyleChanged):
        (WebKit::WebScrollbarImpl::isOverlay):
        (WebKit::WebScrollbarImpl::setValue):
        (WebKit::WebScrollbarImpl::scroll):
        (WebKit::WebScrollbarImpl::onMouseMove):
        (WebKit::WebScrollbarImpl::onMouseLeave):
        (WebKit::WebScrollbarImpl::onMouseWheel):
        (WebKit::WebScrollbarImpl::onKeyDown):
        * src/WebScrollbarImpl.h:
        (WebKit::WebScrollbarImpl::scrollOffset):
        (WebKit::WebScrollbarImpl::scrollbar):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::willStartLiveResize):
        (WebKit::WebViewImpl::willEndLiveResize):

2011-08-10  Dmitry Lomov  <dslomov@google.com>
        
        [Chromium] Decouple implementation of allowFileSystem, openFileSystem and allowDatabase from WebWorkerBase.
        https://bugs.webkit.org/show_bug.cgi?id=65997.

        This patch moves implementation of allowFileSystem, openFileSystem and allowDatabase from
        WebWorkerBase to respectively LocalFileSystemChromium and DatabaseObserver, 
        parameterizing them with relevant data from WebWorker.

        Reviewed by Jian Li.

        * src/DatabaseObserver.cpp: Move allowDatabase from WebWorkerBase and update the caller.
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::cancel):
        (WebKit::AllowDatabaseMainThreadBridge::result):
        (WebKit::AllowDatabaseMainThreadBridge::signalCompleted):
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge):
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask):
        (WebKit::AllowDatabaseMainThreadBridge::didComplete):
        (WebKit::allowDatabaseForWorker):
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/LocalFileSystemChromium.cpp: Move allowFileSystem and openFileSystem from WebWorkerBase and update the caller.
        (WebCore::openFileSystemHelper):
        * src/WebWorkerBase.cpp: Move allowFileSystem, openFileSystem and allowDatabase to LocalFileSystemChromium and DatabaseObserver resp.
        * src/WebWorkerBase.h:
        (WebKit::WebWorkerBase::webView):
        * src/WorkerFileSystemCallbacksBridge.cpp: Generalized WorkerFileSystemCallbacksBridge to work on WorkerLoaderProxy, not on WebWorkerBase.
        (WebKit::WorkerFileSystemCallbacksBridge::stop):
        (WebKit::WorkerFileSystemCallbacksBridge::WorkerFileSystemCallbacksBridge):
        (WebKit::WorkerFileSystemCallbacksBridge::dispatchTaskToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::mayPostTaskToWorker):
        * src/WorkerFileSystemCallbacksBridge.h:
        (WebKit::WorkerFileSystemCallbacksBridge::create):

2011-08-10  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Remove Network.initialContentSet from protocol, store workers content on backend.
        https://bugs.webkit.org/show_bug.cgi?id=65929

        Reviewed by Pavel Feldman.

        * src/SharedWorkerRepository.cpp:
        (WebCore::SharedWorkerScriptLoader::didReceiveResponse):

2011-08-10  Andrey Kosyakov  <caseq@chromium.org>

        Unreviewed. Rolled DEPS 95813:96009 to pick data url timing fix.

        * DEPS:

2011-08-10  Peter Kasting  <pkasting@google.com>

        [Chromium] Name an enum used in some template arguments.
        https://bugs.webkit.org/show_bug.cgi?id=65953

        Reviewed by Darin Fisher.

        * public/WebHTTPBody.h:

2011-08-09  Alexei Svitkine  <asvitkine@chromium.org>

        [Chromium] Enable rubber banding when scrolling.

        https://bugs.webkit.org/show_bug.cgi?id=65707

        Reviewed by Dimitri Glazkov.

        * features.gypi:
        * public/WebInputEvent.h:
        (WebKit::WebMouseWheelEvent::WebMouseWheelEvent):
        (WebKit::WebGestureEvent::WebGestureEvent):
        * public/mac/WebInputEventFactory.h:
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder):
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebInputEventConversion.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::GestureEvent):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::gestureEvent):
        (WebKit::WebViewImpl::handleInputEvent):
        * src/WebViewImpl.h:
        * src/mac/WebInputEventFactory.mm:
        (WebKit::gestureEventTypeForEvent):
        (WebKit::phaseForNSEventPhase):
        (WebKit::phaseForEvent):
        (WebKit::momentumPhaseForEvent):
        (WebKit::WebInputEventFactory::mouseWheelEvent):
        (WebKit::WebInputEventFactory::gestureEvent):

2011-08-09  Dmitry Lomov  <dslomov@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=65778
        [WebWorkers][chromium] Make statics thread-safe and make sure V8 API accesses correct isolates

        Reviewed by Dmitry Titov.

        * src/BoundObject.cpp:

2011-08-09  Jochen Eisinger  <jochen@chromium.org>

        [chromium] remove temporary #define from WebURLRequest.h
        https://bugs.webkit.org/show_bug.cgi?id=65813

        Reviewed by Darin Fisher.

        * public/WebURLRequest.h:

2011-08-09  Jochen Eisinger  <jochen@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-08-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r92619.
        http://trac.webkit.org/changeset/92619
        https://bugs.webkit.org/show_bug.cgi?id=65881

        This patch breaks chromium canary (Requested by jianli on
        #webkit).

        * src/BoundObject.cpp:

2011-08-08  Scott Byer  <scottbyer@chromium.org>

        Scroll animator changes to nail the framerate
        https://bugs.webkit.org/show_bug.cgi?id=65645

        Reviewed by James Robinson.

        * tests/ScrollAnimatorNoneTest.cpp:
        (TEST):

2011-08-08  Dmitry Lomov  <dslomov@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=65778
        [WebWorkers][chromium] Make statics thread-safe and make sure V8 API accesses correct isolates

        Reviewed by David Levin.

        * src/BoundObject.cpp: AllowAllocation moved from V8Utilities.h to V8Binding.h

2011-08-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r92607.
        http://trac.webkit.org/changeset/92607
        https://bugs.webkit.org/show_bug.cgi?id=65865

        This patch breaks Chromium Mac Canary (Requested by jianli on
        #webkit).

        * features.gypi:
        * public/WebInputEvent.h:
        (WebKit::WebMouseWheelEvent::WebMouseWheelEvent):
        * public/mac/WebInputEventFactory.h:
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder):
        * src/WebInputEventConversion.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):
        * src/WebViewImpl.h:
        * src/mac/WebInputEventFactory.mm:
        (WebKit::WebInputEventFactory::mouseWheelEvent):

2011-08-08  Alexei Svitkine  <asvitkine@chromium.org>

        [Chromium] Enable rubber banding when scrolling.

        https://bugs.webkit.org/show_bug.cgi?id=65707

        Reviewed by Dimitri Glazkov.

        * features.gypi:
        * public/WebInputEvent.h:
        (WebKit::WebMouseWheelEvent::WebMouseWheelEvent):
        (WebKit::WebGestureEvent::WebGestureEvent):
        * public/mac/WebInputEventFactory.h:
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder):
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebInputEventConversion.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::GestureEvent):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::gestureEvent):
        (WebKit::WebViewImpl::handleInputEvent):
        * src/WebViewImpl.h:
        * src/mac/WebInputEventFactory.mm:
        (WebKit::gestureEventTypeForEvent):
        (WebKit::phaseForNSEventPhase):
        (WebKit::phaseForEvent):
        (WebKit::momentumPhaseForEvent):
        (WebKit::WebInputEventFactory::mouseWheelEvent):
        (WebKit::WebInputEventFactory::gestureEvent):

2011-08-08  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed. Rolled Chromium DEPS from 95576 to 95783.

        * DEPS:

2011-08-05  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: implement dock/undock in WebKit2 without getting into WebCore.
        https://bugs.webkit.org/show_bug.cgi?id=65763

        Reviewed by Yury Semikhatsky.

        * src/InspectorFrontendClientImpl.cpp:
        * src/InspectorFrontendClientImpl.h:
        * src/js/DevTools.js:
        (devtools.domContentLoaded):

2011-08-07  James Kozianski  <koz@chromium.org>

        Make the fullscreen JS API enabled at runtime.
        https://bugs.webkit.org/show_bug.cgi?id=65501

        Reviewed by Adam Barth.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableFullScreenAPI):
        (WebKit::WebRuntimeFeatures::isFullScreenAPIEnabled):

2011-08-05  James Robinson  <jamesr@chromium.org>

        [chromium] Accelerated canvas breaks when moving canvases or resources between Pages
        https://bugs.webkit.org/show_bug.cgi?id=65402

        Reviewed by Stephen White.

        Remove plumbing for copyTextureToParentTexture extension, it's no longer used or needed.

        * public/WebGraphicsContext3D.h:
        * src/Extensions3DChromium.cpp:
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DInternal.h:

2011-08-05  Jochen Eisinger  <jochen@chromium.org>

        Introduce a new ResourceRequest::TargetType for XHRs
        https://bugs.webkit.org/show_bug.cgi?id=65544

        Reviewed by Darin Fisher.

        * public/WebURLRequest.h:

2011-08-04  James Robinson  <jamesr@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-08-04  David Levin  <levin@chromium.org>

        CStringBuffer should have thread safety checks turned on.
        https://bugs.webkit.org/show_bug.cgi?id=58093

        Reviewed by Dmitry Titov.

        * DEPS: Roll far enough to pick up the latest WebKit::initialize
        fix for Linux.

2011-08-04  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r92415.
        http://trac.webkit.org/changeset/92415
        https://bugs.webkit.org/show_bug.cgi?id=65728

        Causes many DEBUG crashes (Requested by abarth on #webkit).

        * public/WebURLRequest.h:

2011-08-04  Jochen Eisinger  <jochen@chromium.org>

        Introduce a new ResourceRequest::TargetType for XHRs
        https://bugs.webkit.org/show_bug.cgi?id=65544

        Reviewed by Darin Fisher.

        * public/WebURLRequest.h:

2011-08-04  Jochen Eisinger  <jochen@chromium.org>

        Get rid of ResourceRequestBase::m_targetType. Move it to chromium's ResourceRequest.
        https://bugs.webkit.org/show_bug.cgi?id=48483

        Reviewed by Alexey Proskuryakov.

        * src/SharedWorkerRepository.cpp:
        (WebCore::SharedWorkerScriptLoader::SharedWorkerScriptLoader):

2011-08-04  Brian Weinstein  <bweinstein@apple.com>

        WebKit2: Web Inspector always starts in undocked mode
        https://bugs.webkit.org/show_bug.cgi?id=65493
        <rdar://problem/9353114>

        Reviewed by Adam Roben.
        
        Add a stub method for Chromium.

        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::canAttachWindow):
        * src/InspectorFrontendClientImpl.h:

2011-08-03  Kentaro Hara  <haraken@google.com>

        Implement EventSender.scalePageBy()
        https://bugs.webkit.org/show_bug.cgi?id=58013

        Reviewed by Darin Fisher.

        Implemented EventSender.scalePageBy(f, x, y), which scales a page by a factor of f
        and then sets a scroll position to (x, y). Enabled the tests that had been waiting
        for the implementation of EventSender.scalePageBy(f, x, y).

        Tests: compositing/scaling/tiled-layer-recursion.html
               fast/repaint/scale-page-shrink.html
               fast/dom/Element/scale-page-client-rects.html
               fast/dom/Range/scale-page-client-rects.html
               fast/events/scroll-in-scaled-page-with-overflow-hidden.html
               fast/dom/Element/scale-page-bounding-client-rect.html
               fast/dom/Range/scale-page-bounding-client-rect.html

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scalePage): A wrapper method for scalePage() in WebCore.
        * src/WebViewImpl.h:

2011-08-03  Darin Fisher  <darin@chromium.org>

        [Chromium] Rename WEBKIT_API to WEBKIT_EXPORT.
        https://bugs.webkit.org/show_bug.cgi?id=65649

        Reviewed by Adam Barth.

        * README:
        * public/WebAccessibilityCache.h:
        * public/WebAccessibilityObject.h:
        * public/WebArrayBufferView.h:
        * public/WebAttribute.h:
        * public/WebAudioBus.h:
        * public/WebBindings.h:
        * public/WebBlobData.h:
        * public/WebBlobRegistry.h:
        * public/WebCString.h:
        * public/WebCache.h:
        * public/WebColor.h:
        * public/WebCommon.h:
        * public/WebCrossOriginPreflightResultCache.h:
        * public/WebDOMEvent.h:
        * public/WebDOMEventListener.h:
        * public/WebDOMMouseEvent.h:
        * public/WebDOMMutationEvent.h:
        * public/WebDOMStringList.h:
        * public/WebData.h:
        * public/WebDatabase.h:
        * public/WebDevToolsAgent.h:
        * public/WebDevToolsFrontend.h:
        * public/WebDeviceOrientationClientMock.h:
        * public/WebDeviceOrientationController.h:
        * public/WebDocument.h:
        * public/WebDocumentType.h:
        * public/WebDragData.h:
        * public/WebElement.h:
        * public/WebFont.h:
        * public/WebFontCache.h:
        * public/WebFormControlElement.h:
        * public/WebFormElement.h:
        * public/WebFrame.h:
        * public/WebGeolocationClientMock.h:
        * public/WebGeolocationController.h:
        * public/WebGeolocationError.h:
        * public/WebGeolocationPermissionRequest.h:
        * public/WebGeolocationPermissionRequestManager.h:
        * public/WebGeolocationPosition.h:
        * public/WebGlyphCache.h:
        * public/WebHTTPBody.h:
        * public/WebHTTPLoadInfo.h:
        * public/WebHistoryItem.h:
        * public/WebIDBDatabaseError.h:
        * public/WebIDBFactory.h:
        * public/WebIDBKey.h:
        * public/WebIDBKeyPath.h:
        * public/WebIDBKeyRange.h:
        * public/WebImage.h:
        * public/WebImageDecoder.h:
        * public/WebInputElement.h:
        * public/WebInputEvent.h:
        * public/WebKit.h:
        * public/WebLabelElement.h:
        * public/WebMediaElement.h:
        * public/WebNamedNodeMap.h:
        * public/WebNetworkStateNotifier.h:
        * public/WebNode.h:
        * public/WebNodeCollection.h:
        * public/WebNodeList.h:
        * public/WebNotification.h:
        * public/WebOptionElement.h:
        * public/WebPageSerializer.h:
        * public/WebPasswordFormData.h:
        * public/WebPerformance.h:
        * public/WebPluginDocument.h:
        * public/WebPopupMenu.h:
        * public/WebRange.h:
        * public/WebRegularExpression.h:
        * public/WebRuntimeFeatures.h:
        * public/WebScriptController.h:
        * public/WebScrollbar.h:
        * public/WebSearchableFormData.h:
        * public/WebSecurityOrigin.h:
        * public/WebSecurityPolicy.h:
        * public/WebSelectElement.h:
        * public/WebSerializedScriptValue.h:
        * public/WebSharedWorker.h:
        * public/WebSpeechInputControllerMock.h:
        * public/WebSpeechInputResult.h:
        * public/WebStorageEventDispatcher.h:
        * public/WebStorageNamespace.h:
        * public/WebString.h:
        * public/WebTestingSupport.h:
        * public/WebThreadSafeData.h:
        * public/WebURLLoadTiming.h:
        * public/WebURLRequest.h:
        * public/WebURLResponse.h:
        * public/WebView.h:
        * public/WebWorker.h:
        * public/gtk/WebFontInfo.h:
        * public/gtk/WebInputEventFactory.h:
        * public/linux/WebFontRenderStyle.h:
        * public/linux/WebFontRendering.h:
        * public/linux/WebRenderTheme.h:
        * public/mac/WebInputEventFactory.h:
        * public/mac/WebScreenInfoFactory.h:
        * public/mac/WebSubstringUtil.h:
        * public/win/WebInputEventFactory.h:
        * public/win/WebScreenInfoFactory.h:
        * public/x11/WebScreenInfoFactory.h:
        * tests/WebUnitTests.h:

2011-08-03  Michael Nordman  <michaeln@google.com>

        [Chromium] Minor cleanup, remove a deprecated method.
        The old WebDatabase::updateDatabaseSize method has been replaced with 
        updateDatabaseSize, updateSpaceAvailable, and resetSpaceAvailable.
        https://bugs.webkit.org/show_bug.cgi?id=65553

        Reviewed by Adam Barth.

        * public/WebDatabase.h:
        * src/WebDatabase.cpp:

2011-08-03  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: [Timeline] Hover on paint events and see rect outline around that area.
        https://bugs.webkit.org/show_bug.cgi?id=65510

        Reviewed by Yury Semikhatsky.

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::paintPageOverlay):

2011-08-03  Jeremy Moskovich  <jeremy@chromium.org>

        [Chromium] Fix OOP font loading to work on 10.6.6 and above.
        https://bugs.webkit.org/show_bug.cgi?id=65543

        In 10.6.6 the function used to get the unique ID for an NSFont in the 
        renderer was changed so it fails in the sandbox (it now tries to access
        the on-disk font file). In order to work around this, we get the font
        ID from the browser process.

        To speed things up, we introduce 2 levels of caching in WebKit. A font
        name cache where we can perform a quick lookup without the need for the
        font id and a font id cache which we can only lookup in after getting
        the unique ID from the browser process.

        Reviewed by Kenneth Russell.

        No new tests since this is not readily testable.

        * public/mac/WebSandboxSupport.h: Plumb font ID parameter through.
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::loadFont): ditto.

2011-08-03  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: remove Node parameter from the InspectorClient::highlight
        https://bugs.webkit.org/show_bug.cgi?id=65549

        Reviewed by Yury Semikhatsky.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::highlight):
        * src/InspectorClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::highlight):
        * src/WebDevToolsAgentImpl.h:

2011-08-02  David Reveman  <reveman@chromium.org>

        [Chromium] Remove outer border from TilingData as it's no longer needed by layer compositor for anti-aliasing.
        https://bugs.webkit.org/show_bug.cgi?id=64942

        Reviewed by James Robinson.

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-08-02  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Layering violations in gesture recognizer
        https://bugs.webkit.org/show_bug.cgi?id=65044

       Reviewed by Adam Barth.

        Moved gesture recognition higher up the event delivery code
        path so that recognition of gestures is completely separated
        from gesture handling.

        * features.gypi:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):
        Added code to reset the gesture recognizer to preserve parallel
        layout test execution.
        * src/WebPopupMenuImpl.cpp:
        Support dispatching touch and gesture events to Popups.
        (WebKit::WebPopupMenuImpl::WebPopupMenuImpl):
        (WebKit::WebPopupMenuImpl::TouchEvent):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        Added gesture recognition creation.
        (WebKit::WebViewImpl::touchEvent):
        Added recognition of gestures and dispatch of gesture events.
        (WebKit::WebViewImpl::resetGestureRecognizer):
        * src/WebViewImpl.h:

2011-08-02  Zhenyao Mo  <zmo@google.com>

        Unreviewed, mark SelectPopupMenuTest.SelectItemKeyEvent as flaky, gardener stuff.

        * tests/PopupMenuTest.cpp:
        (WebKit::TEST_F):

2011-08-02  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Remove initator column for JSC, fix network resource initiator tests.
        https://bugs.webkit.org/show_bug.cgi?id=65534

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:
        ():

2011-08-02  Nat Duca  <nduca@chromium.org>

        [chromium] Remove resizeOnscreenContent from LRC. It can be derived.
        https://bugs.webkit.org/show_bug.cgi?id=65519

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-08-01  Jean-luc Brouillet  <jeanluc@chromium.org>

        Removing old source files in gyp files that slow build
        https://bugs.webkit.org/show_bug.cgi?id=65503

        Reviewed by Adam Barth.

        A number of stale files are listed in the gyp files. These slow the
        build on Visual Studio 2010. Removing them.

        * WebKit.gyp:

2011-08-01  Nat Duca  <nduca@chromium.org>

        [chromium] Add null check to setSwapbuffersCompletCallbackChromium
        https://bugs.webkit.org/show_bug.cgi?id=65485

        Reviewed by James Robinson.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::SwapBuffersCompleteCallbackAdapter::create):

2011-08-01  Yuta Kitamura  <yutak@chromium.org>

        WebSocket: Rename SocketStreamHandleClient member functions
        https://bugs.webkit.org/show_bug.cgi?id=65374

        Reviewed by Kent Tamura.

        * src/SocketStreamHandle.cpp:
        (WebCore::SocketStreamHandleInternal::didOpenStream):
        (WebCore::SocketStreamHandleInternal::didReceiveData):
        (WebCore::SocketStreamHandleInternal::didClose):
        (WebCore::SocketStreamHandleInternal::didFail):

2011-07-31  Bill Budge  <bbudge@chromium.org>

        [Chromium] Remove the parameterless WebFrame::createAssociatedURLLoader
        overload, and change the overload that takes WebURLLoaderOptions to
        use a default value. This is equivalent to the original parameterless
        overload.
        https://bugs.webkit.org/show_bug.cgi?id=65280

        Reviewed by Darin Fisher.

        * public/WebFrame.h:
        * src/AssociatedURLLoader.cpp:
        * src/AssociatedURLLoader.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-07-30  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-30  Patrick Gansterer  <paroga@webkit.org>

        Remove inclusion of MainThread.h from Threading.h
        https://bugs.webkit.org/show_bug.cgi?id=65081

        Reviewed by Darin Adler.

        Add missing include statements for MainThread.

        * src/WebKit.cpp:
        * src/WebViewImpl.cpp:
        * tests/CCThreadTest.cpp:

2011-07-29  Zhenyao Mo  <zmo@google.com>

        Unreviewed, rolling out r92011.
        http://trac.webkit.org/changeset/92011
        https://bugs.webkit.org/show_bug.cgi?id=65044

        break chromium win build

        * features.gypi:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::WebPopupMenuImpl):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::touchEvent):
        * src/WebViewImpl.h:

2011-07-29  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Layering violations in gesture recognizer
        https://bugs.webkit.org/show_bug.cgi?id=65044

        Reviewed by Adam Barth.

        Moved gesture recognition higher up the event delivery code
        path so that recognition of gestures is completely separated
        from gesture handling.

        * features.gypi:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):
        Added code to reset the gesture recognizer to preserve parallel
        layout test execution.
        * src/WebPopupMenuImpl.cpp:
        Support dispatching touch and gesture events to Popups.
        (WebKit::WebPopupMenuImpl::WebPopupMenuImpl):
        (WebKit::WebPopupMenuImpl::TouchEvent):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        Added gesture recognition creation.
        (WebKit::WebViewImpl::touchEvent):
        Added recognition of gestures and dispatch of gesture events.
        (WebKit::WebViewImpl::resetGestureRecognizer):
        * src/WebViewImpl.h:

2011-07-29  Scott Byer  <scottbyer@chromium.org>

        Scroll animation refinements.
        https://bugs.webkit.org/show_bug.cgi?id=65154

        Reviewed by Adam Barth.

        Fix scroll animation bugs when scrolling to the ends of a document. Smooth over slow event repeat rates
        better. Fix tests to allow for unit testing of scrolling up and not just down.

        Additional unit tests added to ScrollAnimatorNoneTest:
        ScrollQuadraticSmoothed, ScrollLotsQuadraticSmoothed, ScrollDownToBumper, ScrollUpToBumper
        
        * tests/ScrollAnimatorNoneTest.cpp:
        (ScrollAnimatorNoneTest::reset):
        (ScrollAnimatorNoneTest::updateDataFromParameters):
        (ScrollAnimatorNoneTest::animateScroll):
        (ScrollAnimatorNoneTest::checkDesiredPosition):
        (ScrollAnimatorNoneTest::checkSoftLanding):

2011-07-28  Naoki Takano  <honten@chromium.org>

        [Chromium] Add form() function to access parent WebFormElement from WebFormControlElement.
        https://bugs.webkit.org/show_bug.cgi?id=65304
        http://code.google.com/p/chromium/issues/detail?id=63553

        Reviewed by Darin Fisher.

        Chromium Autofill feature needs to access the parent WebFormElement from WebFormControlElement. So added form() method.

        * public/WebFormControlElement.h: Add form() function.
        * src/WebFormControlElement.cpp:
        (WebKit::WebFormControlElement::form): Return parent WebFormElement.

2011-07-28  Nico Weber  <thakis@chromium.org>

        [chromium] Make WebImage::assign(CGImageRef) a WEBKIT_API
        https://bugs.webkit.org/show_bug.cgi?id=65265

        Reviewed by James Robinson.

        Required for the components build on mac. The inline function
        operator=(CGImageRef) is used from outside webkit, and calls this
        function.

        * public/WebImage.h:

2011-07-28  Mihai Parparita  <mihaip@chromium.org>

        [Chromium] Remove WebDocument::insertStyleText
        https://bugs.webkit.org/show_bug.cgi?id=65332

        Reviewed by Tony Chang.

        As of http://crrev.com/94499 no Chromium code calls this anymore.
        Also does a bit of #include cleanup.

        * public/WebDocument.h:
        * src/WebDocument.cpp:

2011-07-27  Fady Samuel  <fsamuel@chromium.org>

        Added a Chromium WebKit API method to set the minimum row height of a popup listbox.
        https://bugs.webkit.org/show_bug.cgi?id=64897

        Reviewed by Darin Fisher.

        * public/WebPopupMenu.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenu::setMinimumRowHeight):

2011-07-27  Peng Huang  <penghuang@chromium.org>

        Add more text input types for chromium
        https://bugs.webkit.org/show_bug.cgi?id=64937

        Reviewed by Darin Fisher.

        * public/WebTextInputType.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::textInputType):

2011-07-27  Ryosuke Niwa  <rniwa@webkit.org>

        Add sfntly library to the Chromium DEPS file.

        * DEPS:

2011-07-27  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-25  Mihai Parparita  <mihaip@chromium.org>

        [Chromium] Add better WebKit API for chrome.tabs.insertCSS extension API
        https://bugs.webkit.org/show_bug.cgi?id=65158

        Reviewed by David Hyatt.

        Add WebDocument::insertUserStyleSheet which inserts a user stylesheet,
        instead of forcing extensions to use insertStyleText which manipulates
        the DOM of the page and results in compatibility issues (see
        http://crbug.com/82220).

        * public/WebDocument.h:
        * src/WebDocument.cpp:
        (WebKit::WebDocument::insertUserStyleSheet):

2011-07-27  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Disable cache option should only clear memory cache, not disable it.
        https://bugs.webkit.org/show_bug.cgi?id=65184

        Reviewed by Pavel Feldman.

        * src/InspectorClientImpl.cpp:
        * src/InspectorClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:

2011-07-27  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        Pass on the suggested name for download file to the client.
        https://bugs.webkit.org/show_bug.cgi?id=65181

        Reviewed by Darin Fisher.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::startDownload):

2011-07-27  Tony Gentilcore  <tonyg@chromium.org>

        Speculative win build fix after r91835
        https://bugs.webkit.org/show_bug.cgi?id=65255

        Unreviewed build fix.

        * src/WebFontImpl.cpp:

2011-07-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r91809.
        http://trac.webkit.org/changeset/91809
        https://bugs.webkit.org/show_bug.cgi?id=65225

        Does not build on Chromium Windows (Requested by abarth on
        #webkit).

        * features.gypi:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::WebPopupMenuImpl):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::touchEvent):
        * src/WebViewImpl.h:

2011-07-26  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Layering violations in gesture recognizer
        https://bugs.webkit.org/show_bug.cgi?id=65044

        Reviewed by Adam Barth.

        Moved gesture recognition higher up the event delivery code
        path so that recognition of gestures is completely separated
        from gesture handling.

        * features.gypi:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):
        Added code to reset the gesture recognizer to preserve parallel
        layout test execution.
        * src/WebPopupMenuImpl.cpp:
        Support dispatching touch and gesture events to Popups.
        (WebKit::WebPopupMenuImpl::WebPopupMenuImpl):
        (WebKit::WebPopupMenuImpl::TouchEvent):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        Added gesture recognition creation.
        (WebKit::WebViewImpl::touchEvent):
        Added recognition of gestures and dispatch of gesture events.
        (WebKit::WebViewImpl::resetGestureRecognizer):
        * src/WebViewImpl.h:

2011-07-26  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        Add support for download='filename' attribute in anchors.
        https://bugs.webkit.org/show_bug.cgi?id=64580

        Reviewed by Adam Barth.

        * features.gypi:
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::loadURLExternally):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDecidePolicyForNavigationAction):
        (WebKit::FrameLoaderClientImpl::startDownload):
        * src/FrameLoaderClientImpl.h:

2011-07-26  Brett Wilson  <brettw@chromium.org>

        Cancel the load when an associated URL loader goes out of scope.
        Previously, the load would continue even when the WebURLLoader object
        was deleted, and the data would just get queued up.

        https://bugs.webkit.org/show_bug.cgi?id=65204

        Reviewed by Darin Fisher.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::cancel):

2011-07-25  Al Patrick  <apatrick@chromium.org>

        Removed support for the GL_latch_CHROMIUM extension which Chromium no longer supports.
        https://bugs.webkit.org/show_bug.cgi?id=65043

        Reviewed by James Robinson.

        * public/WebGraphicsContext3D.h:
        * src/Extensions3DChromium.cpp:
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DInternal.h:

2011-07-25  Nico Weber  <thakis@chromium.org>

        [chromium] Don't link in both libjpeg and libjpeg_turbo in the components build
        https://bugs.webkit.org/show_bug.cgi?id=65138

        Reviewed by James Robinson.

        * WebKit.gyp:

2011-07-25  Chris Rogers  <crogers@google.com>

        Update Chromium DRT to output binary (instead of base64-encoded) data for web audio testing
        https://bugs.webkit.org/show_bug.cgi?id=65039

        Reviewed by Tony Chang.

        * WebKit.gyp:
        * public/WebArrayBufferView.h: Added.
        (WebKit::WebArrayBufferView::~WebArrayBufferView):
        (WebKit::WebArrayBufferView::WebArrayBufferView):
        * public/WebBindings.h:
        * src/WebArrayBufferView.cpp: Added.
        (WebKit::WebArrayBufferView::assign):
        (WebKit::WebArrayBufferView::reset):
        (WebKit::WebArrayBufferView::baseAddress):
        (WebKit::WebArrayBufferView::byteOffset):
        (WebKit::WebArrayBufferView::byteLength):
        (WebKit::WebArrayBufferView::WebArrayBufferView):
        (WebKit::WebArrayBufferView::operator=):
        (WebKit::WebArrayBufferView::operator PassRefPtr<ArrayBufferView>):
        * src/WebBindings.cpp:
        (WebKit::getArrayBufferViewImpl):
        (WebKit::WebBindings::getArrayBufferView):

2011-07-23  Alok Priyadarshi  <alokp@chromium.org>

        Switching off acceleration for small canvas broke gpu tests
        https://bugs.webkit.org/show_bug.cgi?id=65053

        Reviewed by Stephen White.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setMinimumAccelerated2dCanvasSize):
        * src/WebSettingsImpl.h:

2011-07-23  Yuta Kitamura  <yutak@chromium.org>

        [Chromium] Turn on new WebSocket protocol in worker shadow page
        https://bugs.webkit.org/show_bug.cgi?id=64852

        Reviewed by Dmitry Titov.

        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::initializeLoader):
        Initialize the value of WebCore::Settings::useHixie76WebSocketProtocol()
        for a new shadow page. The default value of this flag is overridden through
        WebPreferences (located in webkit/glue in Chromium source tree) but a shadow
        page does not receive the preference values from it.

2011-07-22  James Robinson  <jamesr@chromium.org>

        [chromium] Remove code that attempted to explicitly sync compositing state before compositing
        https://bugs.webkit.org/show_bug.cgi?id=65055

        Reviewed by Kenneth Russell.

        There was some logic in WebViewImpl to try to synchronously calculate compositing requirements and sync
        compositing state on all frames before painting in an attempt to flush out all pending updates before entering
        the composite routines. The idea behind this code was that it would allow us to not worry about compositing
        turning off in the middle of a composite operation due to things like RenderLayer overlap being lazily
        calculated.  In practice, we still need to be defensive to compositing requirements updating during the
        composite anyway and this code is quite expensive on some pages (10ms+ on the HTML specification on my box).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::layout):
        * src/WebViewImpl.h:

2011-07-22  Cris Neckar  <cdn@chromium.org>

        Hook v8 up to cryptographicallyRandomValues as an entropy source.
        https://bugs.webkit.org/show_bug.cgi?id=64887

        Reviewed by Adam Barth.

        * public/WebKitClient.h:
        * src/WebKit.cpp:
        (WebKit::generateEntropy):
        (WebKit::initialize):

2011-07-22  Andrew Scherkus  <scherkus@chromium.org>

        Remove surfaceType() and texture() methods from Chromium video frame classes.
        https://bugs.webkit.org/show_bug.cgi?id=64818

        Reviewed by Kenneth Russell.

        * public/WebVideoFrame.h:
        * src/AssertMatchingEnums.cpp:
        * src/VideoFrameChromiumImpl.cpp:
        * src/VideoFrameChromiumImpl.h:

2011-07-22  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-22  Ryosuke Niwa  <rniwa@webkit.org>

        Revert r91510 due to Chromium debug test failures.

        * src/WebKit.cpp:
        (WebKit::initialize):

2011-07-20  Cris Neckar  <cdn@chromium.org>

        Hook v8 up to cryptographicallyRandomValues as an entropy source.
        https://bugs.webkit.org/show_bug.cgi?id=64887

        Reviewed by Adam Barth.

        * src/WebKit.cpp:
        (WebKit::generateEntropy):
        (WebKit::initialize):

2011-07-21  Vsevolod Vlasov  <vsevik@chromium.org>

        [Chromium DevTools] Remove unused method setAgentIdentifierPrefix from WebDevToolAgent.
        https://bugs.webkit.org/show_bug.cgi?id=64793

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:

2011-07-21  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-20  Al Patrick  <apatrick@chromium.org>

        Set the parent context to that of the associated view when calling GraphicsContext3DChromium::copyTextureToParentCHROMIUM.
        This fixes a race condition whereby the view window does not exist when the offscreen context is created. It allows
        accelerated 2D canvases to be added to newly created window.
        https://bugs.webkit.org/show_bug.cgi?id=64905

        Reviewed by James Robinson.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::copyTextureToParentTextureCHROMIUM):

2011-07-19  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Add support for disabling cache in web inspector.
        https://bugs.webkit.org/show_bug.cgi?id=64097

        Reviewed by Pavel Feldman.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::setCacheDisabled):
        * src/InspectorClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::setCacheDisabled):
        * src/WebDevToolsAgentImpl.h:
        * src/js/DevTools.js:
        ():

2011-07-20  Peter Kasting  <pkasting@google.com>

        Remove "const" from obviously-non-const accessors
        https://bugs.webkit.org/show_bug.cgi?id=62302

        Reviewed by Darin Adler.

        * public/WebElement.h:
        * src/WebElement.cpp:
        (WebKit::WebElement::innerText): Not const due to call to newly-non-const Element::innerText().
        * src/WebSearchableFormData.cpp: Use non-const Node*s for code that calls newly non-const accessors.
        (HTMLNames::IsSelectInDefaultState):
        (HTMLNames::IsInDefaultState):
        * src/WebViewImpl.cpp: Use non-const Node*s for code that calls newly non-const accessors.
        (WebKit::WebViewImpl::setComposition):
        (WebKit::WebViewImpl::confirmComposition):
        (WebKit::WebViewImpl::textInputType):

2011-07-20  Ilya Sherman  <isherman@chromium.org>

        Remove TODO in WebNode.h from a two-sided patch that has now landed
        https://bugs.webkit.org/show_bug.cgi?id=64840

        Reviewed by Darin Fisher.

        * public/WebNode.h:

2011-07-20  Glen Shires  <gshires@google.com>

        Bug 64625: Add isSpeechInputEnabled flag to WebContextMenuData.
        https://bugs.webkit.org/show_bug.cgi?id=64625

        Reviewed by Darin Fisher.

        * public/WebContextMenuData.h:
        (WebKit::WebContextMenuData::WebContextMenuData): added flag isSpeechInputEnabled
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): set flag isSpeechInputEnabled

2011-07-20  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: move Network log view to an iframe
        https://bugs.webkit.org/show_bug.cgi?id=62006

        Reviewed by Pavel Feldman.

        * WebKit.gyp:

2011-07-19  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-19  Dominic Mazzoni  <dmazzoni@google.com>

        Adds some methods to retrieve accessible information from tables and
        table cells. Also refactors WebAccessibilityObject to use WebPrivatePtr
        instead of its own implementation that didn't allow access to subclasses
        of AccessibilityObject.
        https://bugs.webkit.org/show_bug.cgi?id=64805

        Reviewed by Dimitri Glazkov.

        * public/WebAccessibilityObject.h:
        (WebKit::WebAccessibilityObject::WebAccessibilityObject):
        (WebKit::WebAccessibilityObject::isNull):
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::reset):
        (WebKit::WebAccessibilityObject::assign):
        (WebKit::WebAccessibilityObject::equals):
        (WebKit::WebAccessibilityObject::accessibilityDescription):
        (WebKit::WebAccessibilityObject::actionVerb):
        (WebKit::WebAccessibilityObject::canSetFocusAttribute):
        (WebKit::WebAccessibilityObject::canSetValueAttribute):
        (WebKit::WebAccessibilityObject::isValid):
        (WebKit::WebAccessibilityObject::childCount):
        (WebKit::WebAccessibilityObject::childAt):
        (WebKit::WebAccessibilityObject::firstChild):
        (WebKit::WebAccessibilityObject::focusedChild):
        (WebKit::WebAccessibilityObject::lastChild):
        (WebKit::WebAccessibilityObject::nextSibling):
        (WebKit::WebAccessibilityObject::parentObject):
        (WebKit::WebAccessibilityObject::previousSibling):
        (WebKit::WebAccessibilityObject::canSetSelectedAttribute):
        (WebKit::WebAccessibilityObject::isAnchor):
        (WebKit::WebAccessibilityObject::isChecked):
        (WebKit::WebAccessibilityObject::isCollapsed):
        (WebKit::WebAccessibilityObject::isFocused):
        (WebKit::WebAccessibilityObject::isEnabled):
        (WebKit::WebAccessibilityObject::isHovered):
        (WebKit::WebAccessibilityObject::isIndeterminate):
        (WebKit::WebAccessibilityObject::isLinked):
        (WebKit::WebAccessibilityObject::isMultiSelectable):
        (WebKit::WebAccessibilityObject::isOffScreen):
        (WebKit::WebAccessibilityObject::isPasswordField):
        (WebKit::WebAccessibilityObject::isPressed):
        (WebKit::WebAccessibilityObject::isReadOnly):
        (WebKit::WebAccessibilityObject::isSelected):
        (WebKit::WebAccessibilityObject::isVisible):
        (WebKit::WebAccessibilityObject::isVisited):
        (WebKit::WebAccessibilityObject::boundingBoxRect):
        (WebKit::WebAccessibilityObject::helpText):
        (WebKit::WebAccessibilityObject::headingLevel):
        (WebKit::WebAccessibilityObject::hitTest):
        (WebKit::WebAccessibilityObject::keyboardShortcut):
        (WebKit::WebAccessibilityObject::performDefaultAction):
        (WebKit::WebAccessibilityObject::roleValue):
        (WebKit::WebAccessibilityObject::selectionEnd):
        (WebKit::WebAccessibilityObject::selectionStart):
        (WebKit::WebAccessibilityObject::setFocused):
        (WebKit::WebAccessibilityObject::stringValue):
        (WebKit::WebAccessibilityObject::title):
        (WebKit::WebAccessibilityObject::url):
        (WebKit::WebAccessibilityObject::node):
        (WebKit::WebAccessibilityObject::document):
        (WebKit::WebAccessibilityObject::hasComputedStyle):
        (WebKit::WebAccessibilityObject::computedStyleDisplay):
        (WebKit::WebAccessibilityObject::accessibilityIsIgnored):
        (WebKit::WebAccessibilityObject::lineBreaks):
        (WebKit::WebAccessibilityObject::columnCount):
        (WebKit::WebAccessibilityObject::rowCount):
        (WebKit::WebAccessibilityObject::cellForColumnAndRow):
        (WebKit::WebAccessibilityObject::cellColumnIndex):
        (WebKit::WebAccessibilityObject::cellColumnSpan):
        (WebKit::WebAccessibilityObject::cellRowIndex):
        (WebKit::WebAccessibilityObject::cellRowSpan):
        (WebKit::WebAccessibilityObject::WebAccessibilityObject):
        (WebKit::WebAccessibilityObject::operator=):
        (WebKit::WebAccessibilityObject::operator WTF::PassRefPtr<WebCore::AccessibilityObject>):

2011-07-19  Robert Sesek  <rsesek@chromium.org>

        [Chromium] Need to remove app/ from DEPS
        https://bugs.webkit.org/show_bug.cgi?id=64750

        Reviewed by Tony Chang.

        Roll DEPS and remove dependencies on Chromium's /src/app.

        * DEPS:
        * WebKit.gyp:

2011-07-19  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: add sanity test for shared worker inspector
        https://bugs.webkit.org/show_bug.cgi?id=64799

        Reviewed by Pavel Feldman.

        * src/js/Tests.js:
        (.TestSuite.prototype.testSharedWorker):
        (.TestSuite.prototype.evaluateInConsole_):

2011-07-19  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Rename agentIdentifierPrefix to processId, move out from page agent and make static.
        https://bugs.webkit.org/show_bug.cgi?id=64729

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::setAgentIdentifierPrefix):
        (WebKit::WebDevToolsAgentImpl::setProcessId):
        * src/WebDevToolsAgentImpl.h:

2011-07-18  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-18  James Robinson  <jamesr@chromium.org>

        Timer scheduling should be based off the monotonic clock
        https://bugs.webkit.org/show_bug.cgi?id=64544

        Reviewed by Darin Adler.

        Renames setSharedTimerFireTime to setSharedTimerFireInterval to be consistent with WebCore.

        * public/WebKitClient.h:
        (WebKit::WebKitClient::setSharedTimerFireInterval):
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::setSharedTimerFireInterval):

2011-07-18  Yuzhu Shen  <yzshen@chromium.com>

        Reviewed by James Robinson.

        [chromium] WebFontImpl::drawText needs to handle the canvasIsOpaque input.
        https://bugs.webkit.org/show_bug.cgi?id=64555
        
        This change handles canvasIsOpaque for the WEBKIT_USING_SKIA case.
 
        * src/WebFontImpl.cpp: handled canvasIsOpaque.
        * src/WebFontImpl.h: added method declaration.

2011-07-16  Simon Fraser  <simon.fraser@apple.com>

        Add code to attempt to align compositing layers to pixel boundaries when page scale changes
        https://bugs.webkit.org/show_bug.cgi?id=64658

        Reviewed by Dan Bernstein.

        Removed implementations of backingScaleFactor() and pageScaleFactor() now
        that GraphicsLayerClient has default implementations.

        * src/PageOverlay.cpp:

2011-07-15  Simon Fraser  <simon.fraser@apple.com>

        Have GraphicsLayer pull their contentsScale, rather than pushing it onto them
        https://bugs.webkit.org/show_bug.cgi?id=64643

        Reviewed by Darin Adler.
        
        Impement new GraphicsLayerClient methods related to contents scale.

        * src/PageOverlay.cpp:
        (WebKit::OverlayGraphicsLayerClientImpl::backingScaleFactor):
        (WebKit::OverlayGraphicsLayerClientImpl::pageScaleFactor):

2011-07-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-15  Kenneth Russell  <kbr@google.com>

        Don't restore WebGL context if it was guilty of a graphics reset
        https://bugs.webkit.org/show_bug.cgi?id=64497

        Reviewed by Stephen White.

        Actually implement getGraphicsResetStatusARB rather than inferring
        the status based on whether the context has been lost.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::getGraphicsResetStatusARB):
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::getGraphicsResetStatusARB):
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DInternal.h:

2011-07-15  Dan Bernstein  <mitz@apple.com>

        Chromium build fix.

        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::setCursorHiddenUntilMouseMoves):
        * src/WebPopupMenuImpl.h:

2011-07-15  Dan Bernstein  <mitz@apple.com>

        REGRESSION: Mouse cursor doesnt hide when full screen video HUD hides
        https://bugs.webkit.org/show_bug.cgi?id=64615

        Reviewed by Anders Carlsson.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::setCursorHiddenUntilMouseMoves): Added this stub.
        * src/ChromeClientImpl.h:

2011-07-14  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled Chromium revision to 92606.

        * DEPS:

2011-07-14  Ilya Sherman  <isherman@chromium.org>

        Rename AutoFill -> Autofill and autoFill -> autofill
        https://bugs.webkit.org/show_bug.cgi?id=64333
        http://code.google.com/p/chromium/issues/detail?id=72758

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebAutofillClient.h:
        (WebKit::WebAutofillClient::didAcceptAutofillSuggestion):
        (WebKit::WebAutofillClient::didSelectAutofillSuggestion):
        (WebKit::WebAutofillClient::didClearAutofillSelection):
        (WebKit::WebAutofillClient::removeAutocompleteSuggestion):
        (WebKit::WebAutofillClient::textFieldDidBeginEditing):
        (WebKit::WebAutofillClient::textFieldDidEndEditing):
        (WebKit::WebAutofillClient::textFieldDidChange):
        (WebKit::WebAutofillClient::textFieldDidReceiveKeyDown):
        (WebKit::WebAutofillClient::~WebAutofillClient):
        * public/WebNode.h:
        * public/WebView.h:
        * src/AutofillPopupMenuClient.cpp:
        (WebKit::AutofillPopupMenuClient::AutofillPopupMenuClient):
        (WebKit::AutofillPopupMenuClient::~AutofillPopupMenuClient):
        (WebKit::AutofillPopupMenuClient::getSuggestionsCount):
        (WebKit::AutofillPopupMenuClient::getSuggestion):
        (WebKit::AutofillPopupMenuClient::getLabel):
        (WebKit::AutofillPopupMenuClient::getIcon):
        (WebKit::AutofillPopupMenuClient::removeSuggestionAtIndex):
        (WebKit::AutofillPopupMenuClient::canRemoveSuggestionAtIndex):
        (WebKit::AutofillPopupMenuClient::valueChanged):
        (WebKit::AutofillPopupMenuClient::selectionChanged):
        (WebKit::AutofillPopupMenuClient::selectionCleared):
        (WebKit::AutofillPopupMenuClient::itemText):
        (WebKit::AutofillPopupMenuClient::itemLabel):
        (WebKit::AutofillPopupMenuClient::itemIcon):
        (WebKit::AutofillPopupMenuClient::itemIsEnabled):
        (WebKit::AutofillPopupMenuClient::itemStyle):
        (WebKit::AutofillPopupMenuClient::menuStyle):
        (WebKit::AutofillPopupMenuClient::clientPaddingLeft):
        (WebKit::AutofillPopupMenuClient::clientPaddingRight):
        (WebKit::AutofillPopupMenuClient::popupDidHide):
        (WebKit::AutofillPopupMenuClient::itemIsSeparator):
        (WebKit::AutofillPopupMenuClient::itemIsWarning):
        (WebKit::AutofillPopupMenuClient::setTextFromItem):
        (WebKit::AutofillPopupMenuClient::fontSelector):
        (WebKit::AutofillPopupMenuClient::hostWindow):
        (WebKit::AutofillPopupMenuClient::createScrollbar):
        (WebKit::AutofillPopupMenuClient::initialize):
        (WebKit::AutofillPopupMenuClient::setSuggestions):
        (WebKit::AutofillPopupMenuClient::convertListIndexToInternalIndex):
        (WebKit::AutofillPopupMenuClient::getWebView):
        (WebKit::AutofillPopupMenuClient::textFieldStyle):
        * src/AutofillPopupMenuClient.h:
        (WebKit::AutofillPopupMenuClient::itemToolTip):
        (WebKit::AutofillPopupMenuClient::itemAccessibilityText):
        (WebKit::AutofillPopupMenuClient::clientInsetLeft):
        (WebKit::AutofillPopupMenuClient::clientInsetRight):
        (WebKit::AutofillPopupMenuClient::listSize):
        (WebKit::AutofillPopupMenuClient::selectedIndex):
        (WebKit::AutofillPopupMenuClient::itemIsLabel):
        (WebKit::AutofillPopupMenuClient::itemIsSelected):
        (WebKit::AutofillPopupMenuClient::shouldPopOver):
        (WebKit::AutofillPopupMenuClient::valueShouldChangeOnHotTrack):
        (WebKit::AutofillPopupMenuClient::getTextField):
        (WebKit::AutofillPopupMenuClient::getSelectedIndex):
        (WebKit::AutofillPopupMenuClient::setSelectedIndex):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::textFieldDidBeginEditing):
        (WebKit::EditorClientImpl::textFieldDidEndEditing):
        (WebKit::EditorClientImpl::textDidChangeInTextField):
        (WebKit::EditorClientImpl::doAutofill):
        (WebKit::EditorClientImpl::doTextFieldCommandFromEvent):
        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::setAutofilled):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setAutofillClient):
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::mouseDown):
        (WebKit::WebViewImpl::autocompleteHandleKeyEvent):
        (WebKit::WebViewImpl::hideAutofillPopup):
        (WebKit::WebViewImpl::setFocus):
        (WebKit::WebViewImpl::applyAutofillSuggestions):
        (WebKit::WebViewImpl::hidePopups):
        (WebKit::WebViewImpl::refreshAutofillPopup):
        * src/WebViewImpl.h:
        (WebKit::WebViewImpl::autofillClient):
        (WebKit::WebViewImpl::autofillPopupDidHide):

2011-07-14  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: URL parameters should consistently use camel case names
        https://bugs.webkit.org/show_bug.cgi?id=64520

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:
        (devtools.domContentLoaded): Now that Chromium side is updated we can remove the old parameter
        handling code.

2011-07-14  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: URL parameters should consistently use camel case names
        https://bugs.webkit.org/show_bug.cgi?id=64520

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:
        (devtools.domContentLoaded):

2011-07-13  Noel Gordon  <noel.gordon@gmail.com>

        [chromium] Clean undeeded WebCore:: namespace prefixing from WebBindings.
        https://bugs.webkit.org/show_bug.cgi?id=64361

        Reviewed by Kent Tamura.

        * src/WebBindings.cpp:
        (WebKit::makeIntArrayImpl):
        (WebKit::makeStringArrayImpl):

2011-07-13  James Robinson  <jamesr@chromium.org>

        [chromium] No implementation defined for WTF::monotonicallyIncreasingTime
        https://bugs.webkit.org/show_bug.cgi?id=64420

        Reviewed by Tony Gentilcore.

        Provides an implementation of WTF::monotonicallyIncreasingTime() alongside the implementation of
        WTF::currentTime().

        * src/ChromiumCurrentTime.cpp:
        (WTF::monotonicallyIncreasingTime):
        * src/PlatformBridge.cpp:

2011-07-13  Vsevolod Vlasov  <vsevik@chromium.org>

        Chromium DevTools: Enable clear cache and cookies from network panel in chromium.
        https://bugs.webkit.org/show_bug.cgi?id=64095

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:
        ():

2011-07-12  Al Patrick  <apatrick@chromium.org>

        Added the ability to dynamically change the parent context of a WebGraphicsContext3D.
        GraphicsContext3DInternal::platformTexture uses this to set the parent as appropriate.
        https://bugs.webkit.org/show_bug.cgi?id=64397

        Reviewed by Kenneth Russell.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::setParentContext):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::platformTexture):

2011-07-12  James Robinson  <jamesr@chromium.org>

        [chromium] Delete the unused legacy accelerated canvas 2d code
        https://bugs.webkit.org/show_bug.cgi?id=64214

        Reviewed by Stephen White.

        Adds a way to stash a GrContext* on a GraphicsContext3D. Previously, this was handled by
        SharedGraphicsContext3D, but we don't need that class any more.  This is used only for the shared
        GraphicsContext3D stashed on the Page and shared by all accelerated canvases within the Page, for WebGL and
        compositor contexts the GrContext is never set.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::~GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::grContext):
        (WebCore::GraphicsContext3D::grContext):
        * src/GraphicsContext3DInternal.h:

2011-07-12  Joseph Pecoraro  <joepeck@webkit.org>

        ApplicationCache update should not immediately fail when reaching per-origin quota
        https://bugs.webkit.org/show_bug.cgi?id=64177

        Reviewed by Alexey Proskuryakov.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::reachedApplicationCacheOriginQuota):
        * src/ChromeClientImpl.h:

2011-07-12  John Bates  <jbates@google.com>

        Move call to syncCompositingLayers so that we do not trigger redundant draws.
        https://bugs.webkit.org/show_bug.cgi?id=64224

        doComposite was triggering two composites every time a canvas was dirtied.
        By moving syncCompositingLayers call to layout, the client code can draw without triggering
        a redundant frame. Also renamed WebViewImpl::updateLayers to
        syncCompositingLayers, because it was confusing.

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::layout):
        (WebKit::WebViewImpl::syncCompositingLayers):
        * src/WebViewImpl.h:

2011-07-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-12  Evan Martin  <evan@chromium.org>

        [chromium] DRT depends on v8
        https://bugs.webkit.org/show_bug.cgi?id=64376

        DumpRenderTree.cpp has calls to v8:: functions, so it should have a build
        dependency on v8.  This fixes missing references in the shared-object build.

        * WebKit.gyp:

2011-07-11  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-08  Nate Chapin  <japhet@chromium.org>

        Check activeDocumentLoader() in
        WebFrameImpl::currentHistoryItem() and return
        early if null, since that should mean we're
        shutting down.
        https://bugs.webkit.org/show_bug.cgi?id=52923

        Reviewed by Darin Fisher.

        No known repro, so no new test.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::currentHistoryItem):

2011-07-07  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Add support for clearing cache and cookies from network panel.
        https://bugs.webkit.org/show_bug.cgi?id=63999

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgentClient.h:
        (WebKit::WebDevToolsAgentClient::clearBrowserCache):
        (WebKit::WebDevToolsAgentClient::clearBrowserCookies):
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::clearBrowserCache):
        (WebKit::InspectorClientImpl::clearBrowserCookies):
        * src/InspectorClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::clearBrowserCache):
        (WebKit::WebDevToolsAgentImpl::clearBrowserCookies):
        * src/WebDevToolsAgentImpl.h:

2011-07-06  Adam Barth  <abarth@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-06  Johnny Ding  <jnd@chromium.org>

        https://bugs.webkit.org/show_bug.cgi?id=63857
        Check WebWidgetClient before calling it to close widget.  

        Reviewed by Tony Chang.

        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::popupClosed):

2011-07-06  Adrienne Walker  <enne@google.com>

        [chromium] Add compositor texture manager soft limits and lost focus reclaiming
        https://bugs.webkit.org/show_bug.cgi?id=64009

        Reviewed by James Robinson.

        Reclaim textures when the tab loses focus.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setVisibilityState):

2011-06-30  Cris Neckar  <cdn@chromium.org>

        Reviewed by Darin Fisher.

        Add versioning to Chromium clipboard and prevent polling from inside events.
        https://bugs.webkit.org/show_bug.cgi?id=63738

        * public/WebClipboard.h:
        (WebKit::WebClipboard::getSequenceNumber):
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::clipboardGetSequenceNumber):

2011-07-06  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-07-05  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: extend WebSharedWorker with inspector transport methods
        https://bugs.webkit.org/show_bug.cgi?id=63942

        Added methods for connecting inspector to shared worker and for passing
        messages between shared worker inspector and corresponding inspector frontend.

        Reviewed by Pavel Feldman.

        * public/WebCommonWorkerClient.h:
        (WebKit::WebCommonWorkerClient::dispatchDevToolsMessage):
        * public/WebSharedWorker.h:
        (WebKit::WebSharedWorker::attachDevTools):
        (WebKit::WebSharedWorker::detachDevTools):
        (WebKit::WebSharedWorker::dispatchDevToolsMessage):
        * public/WebWorkerClient.h:
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::connectToWorkerContextInspectorTask):
        (WebKit::WebSharedWorkerImpl::attachDevTools):
        (WebKit::disconnectFromWorkerContextInspectorTask):
        (WebKit::WebSharedWorkerImpl::detachDevTools):
        (WebKit::dispatchOnInspectorBackendTask):
        (WebKit::WebSharedWorkerImpl::dispatchDevToolsMessage):
        * src/WebSharedWorkerImpl.h:
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::postMessageToPageInspectorTask):

2011-07-01  Kent Tamura  <tkent@chromium.org>

        [Chromium] Rebaseline for fast/forms/input-file-re-render.html
        https://bugs.webkit.org/show_bug.cgi?id=63733

        * DEPS: Update chromium revision to 91405 to have "Choose Files" string.

2011-07-01  Michael Nordman  <michaeln@google.com>

        Reviewed by Darin Fisher.

        [Chromium] FileSystem API can be used to learn about installed software on the user's computer
        https://bugs.webkit.org/show_bug.cgi?id=63220

        * public/WebMimeRegistry.h:
        (WebKit::WebMimeRegistry::wellKnownMimeTypeForExtension):
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::wellKnownMimeTypeForExtension):

2011-07-01  Scott Byer  <scottbyer@chromium.org>

        Reviewed by Adam Barth.

        Smooth scrolling fixes
        https://bugs.webkit.org/show_bug.cgi?id=63770

        Fix issues found in manual testing; distill the traces into unit tests. Fix the issues the tests exposed in the
        scroll animation code.

        * tests/ScrollAnimatorNoneTest.cpp:
        (ScrollAnimatorNoneTest::updateDataFromParameters):
        (TEST_F):

2011-07-01  Hans Wennborg  <hans@chromium.org>

        IndexedDB: make LevelDB the default back-end
        https://bugs.webkit.org/show_bug.cgi?id=63817

        Reviewed by Tony Chang.

        Use LevelDB as the default back-end.

        Covered by existing layout tests for indexeddb, which will now be
        using the LevelDB back-end.

        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):

2011-07-01  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Ojan Vafai.

        Move m_isDirectional from FrameSelection to VisibleSelection
        https://bugs.webkit.org/show_bug.cgi?id=63473

        Don't pass MakeNonDirectionalSelection to setSelection since no other port does this.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::selectRange):

2011-07-01  Andrew Scherkus  <scherkus@chromium.org>

        Reviewed by Darin Fisher.

        Re-enable WTF_USE_WEBAUDIO_FFMPEG for Chromium
        https://bugs.webkit.org/show_bug.cgi?id=63783

        * features.gypi:

2011-07-01  Tony Chang  <tony@chromium.org>

        Fix the chromium build.  sql is a new top level directory.

        * DEPS:

2011-07-01  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-30  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Hajime Morita.

        [Chromium] Remove WebBindings::makeNode.
        https://bugs.webkit.org/show_bug.cgi?id=63613

        Dead code elimination. No change in behaviour, so no new tests.

        * public/WebBindings.h:
        * src/WebBindings.cpp:

2011-06-30  Kent Tamura  <tkent@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] Implement WebCore::defaultDetailsSummaryText()
        https://bugs.webkit.org/show_bug.cgi?id=63700

        * public/WebLocalizedString.h: Add new key.
        * src/LocalizedStrings.cpp: Call query() with the new key.
        (WebCore::defaultDetailsSummaryText):

2011-06-30  Andrew Scherkus  <scherkus@chromium.org>

        Unreviewed.

        Temporarily disabling WTF_USE_WEBAUDIO_FFMPEG due to FFmpeg update.

        * features.gypi:

2011-06-30  John Bates  <jbates@google.com>

        Reviewed by James Robinson.

        Chromium bug: Compositing on a lost context causes latch deadlocks.
        The cause of deadlock was that a setLatch command is added to the lost
        compositor GL context, and a waitLatch would never complete on a child context.
        This change checks whether the compositor context is in error state before
        doing the compositing.
        https://bugs.webkit.org/show_bug.cgi?id=63681

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):

2011-06-30  Cary Clark  <caryclark@google.com>

        Reviewed by James Robinson.

        Use Skia if Skia on Mac Chrome is enabled
        https://bugs.webkit.org/show_bug.cgi?id=62999

        * WebKit.gyp:
        If building for Skia, exclude CG files.
        If not, exclude Skia files.

        * features.gypi:
        Enable Skia on Chromium Mac if so instructed by the gyp define.
        Allow Skia to be hardware accelerated on the Mac.

        * public/WebCommon.h:
        If Skia is defined on the Mac, define it in the WebXXX
        interfaces as well.

2011-06-30  Sreeram Ramachandran  <sreeram@chromium.org>

        Reviewed by Adam Barth.

        Suppress modal JavaScript/HTML dialogs during unload events
        https://bugs.webkit.org/show_bug.cgi?id=56397

        Implementation of the new shouldRunModalDialogDuringPageDismissal() API
        to block alerts during unload handlers. Logs such events to the console
        and updates histograms.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::shouldRunModalDialogDuringPageDismissal):
        * src/ChromeClientImpl.h:

2011-06-30  Anders Carlsson  <andersca@apple.com>

        Reviewed by Dan Bernstein.

        More ScrollableArea scaffolding
        https://bugs.webkit.org/show_bug.cgi?id=63678

        Add an enclosingScrollableArea stub.

        * src/WebScrollbarImpl.cpp:
        (WebKit::WebScrollbarImpl::enclosingScrollableArea):
        * src/WebScrollbarImpl.h:

2011-06-28  Hans Wennborg  <hans@chromium.org>

        Reviewed by Tony Chang.

        IndexedDB: Prepare for running layout tests with LevelDB
        https://bugs.webkit.org/show_bug.cgi?id=63593

        WebIDBFactory should decide what DefaultBackingStore means.
        Also fix handling of layout test and incognito mode properly.

        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):

2011-06-30  Alexander Pavlov  <apavlov@chromium.org>

        Reviewed by Kent Tamura.

        [Chromium] Autofill suggestions appear in upper left corner after input change
        https://bugs.webkit.org/show_bug.cgi?id=63702

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::screenToWindow): Implemented.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::refreshAutoFillPopup): Pass screen (not window) coordinates into setWindowRect().

2011-06-30  Kentaro Hara  <haraken@google.com>

        Reviewed by Kent Tamura.

        Change the label of an HTML5 file chooser button to "Choose Files"
        https://bugs.webkit.org/show_bug.cgi?id=49245

        We should notify capability of multiple files to users.

        Test: fast/forms/input-file-label.html

        * DEPS:
        * public/WebLocalizedString.h: Depends on chromium_rev>=91051.
        * src/LocalizedStrings.cpp:
        (WebCore::fileButtonChooseMultipleFilesLabel): Returns a "Choose Files" label.

2011-06-29  James Hawkins  <jhawkins@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Fix a crash on when executeCommand(copy) is called on a null node.
        https://bugs.webkit.org/show_bug.cgi?id=63626

        * src/WebFrameImpl.cpp:
        (WebKit::pluginContainerFromNode):

2011-06-29  Andrey Kosyakov  <caseq@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: backend needs to provide system-unique object ids, so these remain unique across navigation
        https://bugs.webkit.org/show_bug.cgi?id=62894

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::setAgentProcessIdentifier):
        * src/WebDevToolsAgentImpl.h:

2011-06-28  Ilya Sherman  <isherman@chromium.org>

        Reviewed by Adam Barth.

        form.autocomplete="off" does not work
        https://bugs.webkit.org/show_bug.cgi?id=35823

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::autofill): Update callsite.
        * src/WebFormElement.cpp:
        (WebKit::WebFormElement::autoComplete): Update callsite.
        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::autoComplete): Update callsite.
        * src/WebPasswordFormUtils.cpp:
        (WebKit::findPasswordFormFields): Update callsite.

2011-06-28  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89968.
        http://trac.webkit.org/changeset/89968
        https://bugs.webkit.org/show_bug.cgi?id=63581

        Broke chromium windows compile (Requested by jamesr on
        #webkit).

        * WebKit.gyp:
        * features.gypi:
        * public/WebCommon.h:

2011-06-28  Cary Clark  <caryclark@google.com>

        Reviewed by James Robinson.

        Use Skia if Skia on Mac Chrome is enabled
        https://bugs.webkit.org/show_bug.cgi?id=62999

        * WebKit.gyp:
        If building for Skia, exclude CG files.
        If not, exclude Skia files.

        * features.gypi:
        Enable Skia on Chromium Mac if so instructed by the gyp define.
        Allow Skia to be hardware accelerated on the Mac.

        * public/WebCommon.h:
        If Skia is defined on the Mac, define it in the WebXXX
        interfaces as well.

2011-06-28  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-27  James Hawkins  <jhawkins@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] Pass an optional WebNode that is the node receiving the context menu action.
        https://bugs.webkit.org/show_bug.cgi?id=63503

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::pluginContainerFromNode):
        (WebKit::WebFrameImpl::executeCommand):
        (WebKit::WebFrameImpl::printBegin):
        * src/WebFrameImpl.h:

2011-06-27  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-27  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Darin Fisher.

        Adding binary part support to MHTML.
        https://bugs.webkit.org/show_bug.cgi?id=63310

        * public/WebPageSerializer.h:
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serializeToMHTML):
        (WebKit::WebPageSerializer::serializeToMHTMLUsingBinaryEncoding):

2011-05-17  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Implement CCLayerTreeHost and CCLayerTreeHostImpl portions of threaded compositor
        https://bugs.webkit.org/show_bug.cgi?id=58408

        Redirect invalidates and scheduling into compositor when in
        threaded compositing mode. Add stress tests for CCLayerTreeHost.

        * WebKit.gypi:
        * public/WebWidget.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::animate):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::animateAndLayout):
        (WebKit::WebViewImpl::updateLayers):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebViewImpl::reallocateRenderer):
        (WebKit::WebViewImpl::updateLayerRendererSettings):
        (WebKit::WebViewImpl::updateLayerRendererViewport):
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp: Added.
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::animateAndLayout):
        (WTF::CCLayerTreeHostTest::beginCommitOnCCThread):
        (WTF::CCLayerTreeHostTest::beginCommitOnMainThread):
        (WTF::CCLayerTreeHostTest::commitOnCCThread):
        (WTF::CCLayerTreeHostTest::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTest::commitCompleteOnMainThread):
        (WTF::CCLayerTreeHostTest::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTest::updateLayers):
        (WTF::CCLayerTreeHostTest::onBeginTest):
        (WTF::CCLayerTreeHostTest::doEndTest):
        (WTF::CCLayerTreeHostTest::onEndTest):
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::testTimeout):
        (WTF::MockLayerTreeHostClient::MockLayerTreeHostClient):
        (WTF::MockLayerTreeHostClient::createLayerTreeHostContext3D):
        (WTF::MockLayerTreeHostClient::animateAndLayout):
        (WTF::MockLayerTreeHostClient::updateLayers):
        (WTF::MockLayerTreeHostCommitter::create):
        (WTF::MockLayerTreeHostCommitter::commit):
        (WTF::MockLayerTreeHostCommitter::MockLayerTreeHostCommitter):
        (WTF::MockLayerTreeHostImpl::create):
        (WTF::MockLayerTreeHostImpl::beginCommit):
        (WTF::MockLayerTreeHostImpl::commitComplete):
        (WTF::MockLayerTreeHostImpl::drawLayersAndPresent):
        (WTF::MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (WTF::MockLayerTreeHostImplProxy::create):
        (WTF::MockLayerTreeHostImplProxy::createLayerTreeHostImpl):
        (WTF::MockLayerTreeHostImplProxy::MockLayerTreeHostImplProxy):
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF::MockLayerTreeHost::createLayerTreeHostImplProxy):
        (WTF::MockLayerTreeHost::updateLayers):
        (WTF::MockLayerTreeHost::createLayerTreeHostCommitter):
        (WTF::MockLayerTreeHost::beginCommit):
        (WTF::MockLayerTreeHost::commitComplete):
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (WTF::CCLayerTreeHostTest::endTest):
        (WTF::CCLayerTreeHostTestShortlived1::CCLayerTreeHostTestShortlived1):
        (WTF::CCLayerTreeHostTestShortlived1::beginTest):
        (WTF::CCLayerTreeHostTestShortlived1::afterTest):
        (WTF::TEST_F):
        (WTF::CCLayerTreeHostTestShortlived2::CCLayerTreeHostTestShortlived2):
        (WTF::CCLayerTreeHostTestShortlived2::beginTest):
        (WTF::CCLayerTreeHostTestShortlived2::afterTest):
        (WTF::CCLayerTreeHostTestShortlived3::CCLayerTreeHostTestShortlived3):
        (WTF::CCLayerTreeHostTestShortlived3::beginTest):
        (WTF::CCLayerTreeHostTestShortlived3::afterTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::CCLayerTreeHostTestCommitingWithContinuousRedraw):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::beginTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::CCLayerTreeHostTestSetNeedsCommit1):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::CCLayerTreeHostTestSetNeedsCommit2):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::CCLayerTreeHostTestSetNeedsRedraw):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::afterTest):
        * tests/CCThreadTest.cpp:
        (WebCore::TEST):

2011-06-27  Yuta Kitamura  <yutak@chromium.org>

        Reviewed by Adam Barth.

        [Chromium] Add useHixie76WebSocketProtocol to WebSettings
        https://bugs.webkit.org/show_bug.cgi?id=63424

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setHixie76WebSocketProtocolEnabled):
        * src/WebSettingsImpl.h:

2011-06-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [Chromium] Remove WebSecurityOrigin::grantUniversalAccess
        https://bugs.webkit.org/show_bug.cgi?id=63415

        This function has no callers and is downright dangerous.

        * public/WebSecurityOrigin.h:
        * src/WebSecurityOrigin.cpp:

2011-06-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [Chromium] Remove code behind WEBKIT_FRAME_TO_DOCUMENT_API_MOVE
        https://bugs.webkit.org/show_bug.cgi?id=63402

        These old APIs are no longer needed.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-06-25  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [Chromium] Update WebKit for WEBKIT_FRAME_TO_DOCUMENT_API_MOVE
        https://bugs.webkit.org/show_bug.cgi?id=63394

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchWillPerformClientRedirect):

2011-06-25  Adam Barth  <abarth@webkit.org>

        Roll Chromium DEPS.

        * DEPS:

2011-06-25  Adam Barth  <abarth@webkit.org>

        Unreviewed build fix.  Remove ifdefs around these two functions because
        we're not planning to move them.  This patch makes WebFrameImpl.h
        consistent with WebFrame.h so we can build with the new API
        configuration.

        * src/WebFrameImpl.h:

2011-06-24  Nat Duca  <nduca@chromium.org>

        Unreviewed, rolling out r89694.
        http://trac.webkit.org/changeset/89694
        https://bugs.webkit.org/show_bug.cgi?id=58408

        Test shell still not ready for animate changes.

        * WebKit.gypi:
        * public/WebWidget.h:
        (WebKit::WebWidget::animate):
        (WebKit::WebWidget::composite):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::animate):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::fullFramePluginZoomLevelChanged):
        (WebKit::WebView::zoomLevelToZoomFactor):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::reallocateRenderer):
        (WebKit::WebViewImpl::updateLayerRendererViewport):
        (WebKit::WebViewImpl::graphicsContext3D):
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp: Removed.
        * tests/CCThreadTest.cpp:
        (WebCore::TEST):

2011-05-17  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Implement CCLayerTreeHost and CCLayerTreeHostImpl portions of threaded compositor
        https://bugs.webkit.org/show_bug.cgi?id=58408

        Redirect invalidates and scheduling into compositor when in
        threaded compositing mode. Add stress tests for CCLayerTreeHost.

        * WebKit.gypi:
        * public/WebWidget.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::animate):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::animateAndLayout):
        (WebKit::WebViewImpl::updateLayers):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebViewImpl::reallocateRenderer):
        (WebKit::WebViewImpl::updateLayerRendererSettings):
        (WebKit::WebViewImpl::updateLayerRendererViewport):
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp: Added.
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::animateAndLayout):
        (WTF::CCLayerTreeHostTest::beginCommitOnCCThread):
        (WTF::CCLayerTreeHostTest::beginCommitOnMainThread):
        (WTF::CCLayerTreeHostTest::commitOnCCThread):
        (WTF::CCLayerTreeHostTest::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTest::commitCompleteOnMainThread):
        (WTF::CCLayerTreeHostTest::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTest::updateLayers):
        (WTF::CCLayerTreeHostTest::onBeginTest):
        (WTF::CCLayerTreeHostTest::doEndTest):
        (WTF::CCLayerTreeHostTest::onEndTest):
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::testTimeout):
        (WTF::MockLayerTreeHostClient::MockLayerTreeHostClient):
        (WTF::MockLayerTreeHostClient::createLayerTreeHostContext3D):
        (WTF::MockLayerTreeHostClient::animateAndLayout):
        (WTF::MockLayerTreeHostClient::updateLayers):
        (WTF::MockLayerTreeHostCommitter::create):
        (WTF::MockLayerTreeHostCommitter::commit):
        (WTF::MockLayerTreeHostCommitter::MockLayerTreeHostCommitter):
        (WTF::MockLayerTreeHostImpl::create):
        (WTF::MockLayerTreeHostImpl::beginCommit):
        (WTF::MockLayerTreeHostImpl::commitComplete):
        (WTF::MockLayerTreeHostImpl::drawLayersAndPresent):
        (WTF::MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (WTF::MockLayerTreeHostImplProxy::create):
        (WTF::MockLayerTreeHostImplProxy::createLayerTreeHostImpl):
        (WTF::MockLayerTreeHostImplProxy::MockLayerTreeHostImplProxy):
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF::MockLayerTreeHost::createLayerTreeHostImplProxy):
        (WTF::MockLayerTreeHost::updateLayers):
        (WTF::MockLayerTreeHost::createLayerTreeHostCommitter):
        (WTF::MockLayerTreeHost::beginCommit):
        (WTF::MockLayerTreeHost::commitComplete):
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (WTF::CCLayerTreeHostTest::endTest):
        (WTF::CCLayerTreeHostTestShortlived1::CCLayerTreeHostTestShortlived1):
        (WTF::CCLayerTreeHostTestShortlived1::beginTest):
        (WTF::CCLayerTreeHostTestShortlived1::afterTest):
        (WTF::TEST_F):
        (WTF::CCLayerTreeHostTestShortlived2::CCLayerTreeHostTestShortlived2):
        (WTF::CCLayerTreeHostTestShortlived2::beginTest):
        (WTF::CCLayerTreeHostTestShortlived2::afterTest):
        (WTF::CCLayerTreeHostTestShortlived3::CCLayerTreeHostTestShortlived3):
        (WTF::CCLayerTreeHostTestShortlived3::beginTest):
        (WTF::CCLayerTreeHostTestShortlived3::afterTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::CCLayerTreeHostTestCommitingWithContinuousRedraw):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::beginTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::CCLayerTreeHostTestSetNeedsCommit1):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::CCLayerTreeHostTestSetNeedsCommit2):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::CCLayerTreeHostTestSetNeedsRedraw):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::afterTest):
        * tests/CCThreadTest.cpp:
        (WebCore::TEST):

2011-06-24  Chris Rogers  <crogers@google.com>

        Reviewed by Kenneth Russell.

        Enable Web Audio for Chromium Win
        https://bugs.webkit.org/show_bug.cgi?id=63338

        * features.gypi:

2011-06-24  Dominic Cooney  <dominicc@chromium.org>

        Reviewed by Dimitri Glazkov.

        Convert shadow DOM-related tests to use window.internals
        https://bugs.webkit.org/show_bug.cgi?id=61671

        Remove shadow DOM-related methods from Chromium API. These are not
        required any more.

        * public/WebElement.h:
        * src/WebElement.cpp:

2011-06-24  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Darin Fisher.

        Web Inspector: [Chromium] Successfully prefetched page shows up as an error in console
        https://bugs.webkit.org/show_bug.cgi?id=62396

        * public/WebURLError.h:
        (WebKit::WebURLError::WebURLError):
        * src/WebURLError.cpp:
        (WebKit::WebURLError::operator=):
        (WebKit::WebURLError::operator ResourceError):

2011-06-23  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: provide context menu item for enabling native worker inspection
        https://bugs.webkit.org/show_bug.cgi?id=63258

        * src/js/DevTools.js:
        ():

2011-06-23  John Bates  <jbates@google.com>

        Reviewed by James Robinson.

        Fix latch deadlock when GPU process crashes or context is lost
        https://bugs.webkit.org/show_bug.cgi?id=63189

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):

2011-06-23  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-23  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Fix WebScrollBarImpl on Mac after recent smooth scrolling changes
        https://bugs.webkit.org/show_bug.cgi?id=63260

        * src/WebScrollbarImpl.cpp:
        (WebKit::WebScrollbarImpl::visibleHeight):
        (WebKit::WebScrollbarImpl::visibleWidth):
        (WebKit::WebScrollbarImpl::contentsSize):
        (WebKit::WebScrollbarImpl::overhangAmount):
        * src/WebScrollbarImpl.h:

2011-06-23  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-22  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Kent Tamura.

        [chromium] Remove calls to Position::deprecatedNode
        https://bugs.webkit.org/show_bug.cgi?id=63226

        Call containerNode instead of deprecatedNode.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::textInputType):

2011-06-22  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Fisher.

        [Chromium] Add WebDocument APIs for the functions moving from WebFrame
        https://bugs.webkit.org/show_bug.cgi?id=62831

        The next phase will be to change all the callers and then remove all
        the code inside the ifdef.

        * public/WebDocument.h:
            - Add new APIs.
        * public/WebFrame.h:
            - These two APIs were too disgusting.  I could not, in good
              conscience, touch them.
        * public/WebSecurityOrigin.h:
            - Turns out this API is supposed to be on WebSecurityOrigin, not
              WebDocument.
        * src/WebDocument.cpp:
            - Implement the APIs.
        (WebKit::WebDocument::url):
        (WebKit::WebDocument::securityOrigin):
        (WebKit::WebDocument::encoding):
        (WebKit::WebDocument::openSearchDescriptionURL):
        (WebKit::WebDocument::forms):
        (WebKit::WebDocument::insertStyleText):
        * src/WebFrameImpl.cpp:
            - Change these implements to just be stubs that call into the real
              implementations in WebDocument.
        (WebKit::WebFrameImpl::url):
        (WebKit::WebFrameImpl::openSearchDescriptionURL):
        (WebKit::WebFrameImpl::encoding):
        (WebKit::WebFrameImpl::forms):
        (WebKit::WebFrameImpl::securityOrigin):
        (WebKit::WebFrameImpl::grantUniversalAccess):
        (WebKit::WebFrameImpl::insertStyleText):
        (WebKit::WebFrameImpl::contentAsMarkup):
        * src/WebSecurityOrigin.cpp:
        (WebKit::WebSecurityOrigin::grantUniversalAccess):

2011-06-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89489.
        http://trac.webkit.org/changeset/89489
        https://bugs.webkit.org/show_bug.cgi?id=63203

        Broke chromium mac build on build.webkit.org (Requested by
        abarth on #webkit).

        * WebKit.gyp:
        * features.gypi:
        * public/WebCommon.h:

2011-06-22  Cary Clark  <caryclark@google.com>

        Reviewed by Darin Fisher.

        Use Skia if Skia on Mac Chrome is enabled
        https://bugs.webkit.org/show_bug.cgi?id=62999

        * WebKit.gyp:
        If building for Skia, exclude CG files.
        If not, exclude Skia files.

        * features.gypi:
        Enable Skia on Chromium Mac if so instructed by the gyp define.
        Allow Skia to be hardware accelerated on the Mac.

        * public/WebCommon.h:
        If Skia is defined on the Mac, define it in the WebXXX
        interfaces as well.

2011-06-22  Adam Barth  <abarth@webkit.org>

        Rollout 88332.

        * features.gypi:
        * public/WebRuntimeFeatures.h:
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/WebRuntimeFeatures.cpp:

2011-06-20  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Kent Tamura.

        FileChooser should be only created when we need to choose files.
        https://bugs.webkit.org/show_bug.cgi?id=63039

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::runOpenPanel): Changed to use settings.
        (WebKit::ChromeClientImpl::enumerateChosenDirectory): Updated decls.
        * src/ChromeClientImpl.h:

2011-06-21  Tony Chang  <tony@chromium.org>

        Reviewed by Eric Seidel.

        add css parsing of flex()
        https://bugs.webkit.org/show_bug.cgi?id=62050

        * features.gypi: Add a gyp flag (enable_css3_flexbox) for setting ENABLE_CSS3_FLEXBOX.

2011-06-21  Zhenyao Mo  <zmo@google.com>

        Reviewed by Kenneth Russell.

        Implement drawingBufferWidth/drawingBufferHeight in WebGL
        https://bugs.webkit.org/show_bug.cgi?id=58497

        * src/GraphicsContext3DChromium.cpp: Make getInternalFramebufferSize method const.
        (WebCore::GraphicsContext3DInternal::getInternalFramebufferSize):
        (WebCore::GraphicsContext3D::getInternalFramebufferSize):
        * src/GraphicsContext3DInternal.h:

2011-06-21  Dmitry Lomov  <dslomov@google.com>

        Reviewed by Adam Barth.

        https://bugs.webkit.org/show_bug.cgi?id=62653
        [V8][Chromium] Make StringCache in V8 bindings per-isolate

        * src/WebKit.cpp:
        (WebKit::initialize): Initialize V8PerIsolateBindingData eagerly
        * src/WebScriptController.cpp:
        (WebKit::WebScriptController::enableV8SingleThreadMode): StringCache is now per-isolate, so ok in multithreaded contexts.

2011-06-21  Chris Evans  <cevans@chromium.org>

        Reviewed by Darin Fisher.

        Wire in checkIfRunInsecureContent to the chromium WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=63026

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::checkIfRunInsecureContent): add in basic plumbing.
        * src/WebFrameImpl.h:

2011-06-21  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89185.
        http://trac.webkit.org/changeset/89185
        https://bugs.webkit.org/show_bug.cgi?id=63068

        For breaking navigation with inspector opened. (Requested by
        pfeldman on #webkit).

        * src/WebScriptController.cpp:
        (WebKit::WebScriptController::enableV8SingleThreadMode):

2011-06-20  Scott Byer  <scottbyer@chromium.org>

        Reviewed by Adam Barth.

        Smooth scrolling for Chromium, initial patch.
        https://bugs.webkit.org/show_bug.cgi?id=61878

        Add in a default scrolling animator in the platform directory, with a run time enable switch, to provide
        animated / smooth scrolling on platforms and for input devices where it's not provided by the platform, and to
        be easily configurable to what situatuations the animations are provided for. The smooth scrolling code is
        compiled out by default.

        Unit tests ScrollAnimatorNoneTest.cpp

        * WebKit.gypi:
        * features.gypi:
        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setEnableScrollAnimator):
        * src/WebSettingsImpl.h:
        * tests/ScrollAnimatorNoneTest.cpp: Added.
        (MockScrollableArea::MockScrollableArea):
        (MockScrollableArea::scrollAnimatorEnabled):
        (MockScrollAnimatorNone::MockScrollAnimatorNone):
        (MockScrollAnimatorNone::currentX):
        (MockScrollAnimatorNone::currentY):
        (MockScrollAnimatorNone::reset):
        (TEST):
        (ScrollAnimatorNoneTest::ScrollAnimatorNoneTest):
        (ScrollAnimatorNoneTest::SetUp):
        (ScrollAnimatorNoneTest::TearDown):
        (ScrollAnimatorNoneTest::reset):
        (ScrollAnimatorNoneTest::updateDataFromParameters):
        (ScrollAnimatorNoneTest::animateScroll):
        (ScrollAnimatorNoneTest::curveIntegralAt):
        (ScrollAnimatorNoneTest::attackArea):
        (ScrollAnimatorNoneTest::releaseArea):
        (ScrollAnimatorNoneTest::attackCurve):
        (ScrollAnimatorNoneTest::releaseCurve):
        (ScrollAnimatorNoneTest::curveDerivativeAt):
        (ScrollAnimatorNoneTest::curveTestInner):
        (ScrollAnimatorNoneTest::curveTest):
        (TEST_F):

2011-06-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Dimitri Glazkov.

        Several pyauto tests are failing because some infobars
        https://bugs.webkit.org/show_bug.cgi?id=62968

        This function used to evaluate script as if there was a user gesture
        (due to the lack of a source URL). This patch re-introduces the user
        gesture (this time explicitly), which causes the pyauto tests listed in
        http://code.google.com/p/chromium/issues/detail?id=86397 to start
        passing again.  It's unclear whether this forced gesture is needed in
        non-test scenarios.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::executeScriptAndReturnValue):

2011-06-20  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: remove LayoutTestController::setTimelineProfilingEnabled.
        https://bugs.webkit.org/show_bug.cgi?id=62994

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:

2011-06-19  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-18  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Darin Adler.

        Separate concerns of loading file icons and choosing files.
        https://bugs.webkit.org/show_bug.cgi?id=62931

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::loadIconForFiles): Renamed to better reflect the intent.
        * src/ChromeClientImpl.h: Ditto.
        * src/WebIconLoadingCompletionImpl.cpp:
        (WebKit::WebIconLoadingCompletionImpl::WebIconLoadingCompletionImpl): Changed to use FileIconLoader.
        (WebKit::WebIconLoadingCompletionImpl::didLoadIcon): Ditto.
        * src/WebIconLoadingCompletionImpl.h: Dito.

2011-06-18  Yufeng Shen  <miletus@chromium.org>

        Reviewed by Darin Fisher.

        Adding "force" filed to Touch Event
        https://bugs.webkit.org/show_bug.cgi?id=62766

        * public/WebTouchPoint.h:
        (WebKit::WebTouchPoint::WebTouchPoint):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformTouchPointBuilder::PlatformTouchPointBuilder):

2011-06-17  Chris Rogers  <crogers@google.com>

        Unreviewed build fix.

        Build fix - fix chromium shared win builder
        https://bugs.webkit.org/show_bug.cgi?id=62924

        * features.gypi:

2011-06-17  Dmitry Lomov  <dslomov@google.com>

        Reviewed by Adam Barth.

        https://bugs.webkit.org/show_bug.cgi?id=62653
        [V8][Chromium] Make StringCache in V8 bindings per-isolate
        This moves StringCache into V8BindingPerIsolateData.

        * src/WebScriptController.cpp:
        (WebKit::WebScriptController::enableV8SingleThreadMode): StringCache is now per-isolate, so ok in multithreaded contexts.

2011-06-17  Ryosuke Niwa  <rniwa@webkit.org>

        Roll Chromium DEPS.

        * DEPS:

2011-06-17  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89143.
        http://trac.webkit.org/changeset/89143
        https://bugs.webkit.org/show_bug.cgi?id=62912

        Possible Chromeos test breakage (Requested by senorblanco on
        #webkit).

        * src/AsyncFileSystemChromium.cpp:
        (WebCore::AsyncFileSystemChromium::virtualPathToFileSystemURL):
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::virtualPathToFileSystemURL):
        * tests/KURLTest.cpp:
        (ComponentCase::TEST):

2011-06-17  Chris Rogers  <crogers@google.com>

        Reviewed by Tony Chang.

        Enable Web Audio for chromium windows build
        https://bugs.webkit.org/show_bug.cgi?id=62895

        * features.gypi:

2011-06-17  Eric Uhrhane  <ericu@chromium.org>

        Reviewed by Adam Barth.

        [filesystem/Chromium] Filesystem paths need proper URL escaping
        https://bugs.webkit.org/show_bug.cgi?id=62811

        Fix http://code.google.com/p/chromium/issues/detail?id=78860 by making
        KURLChromium.cpp's escaping code actually work.

        Here I added the needed calls to encodeWithURLEscapeSequences.
        * src/AsyncFileSystemChromium.cpp:
        (WebCore::AsyncFileSystemChromium::virtualPathToFileSystemURL):
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::virtualPathToFileSystemURL):

        Here I updated the test to reflect the new functionality in
        encodeWithURLEscapeSequences.
        * tests/KURLTest.cpp:

2011-06-16  Bill Budge  <bbudge@chromium.org>

        Reviewed by Adam Barth.

        The AssociatedURLLoader returns URL access errors synchronously. Use a timer to return such errors asynchronously. Also add unit tests for successful loads, same-origin restriction by default, and successful cross-origin loads.
        https://bugs.webkit.org/show_bug.cgi?id=60059

        * WebKit.gyp:
        * WebKit.gypi:
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::ClientAdapter::enableErrorNotifications):
        (WebKit::AssociatedURLLoader::ClientAdapter::notifyError):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        * tests/AssociatedURLLoaderTest.cpp: Added.
        (WebKit::TestWebFrameClient::cancelledError):
        (WebKit::AssociatedURLLoaderTest::AssociatedURLLoaderTest):
        (WebKit::AssociatedURLLoaderTest::SetUp):
        (WebKit::AssociatedURLLoaderTest::TearDown):
        (WebKit::AssociatedURLLoaderTest::serveRequests):
        (WebKit::AssociatedURLLoaderTest::createAssociatedURLLoader):
        (WebKit::AssociatedURLLoaderTest::willSendRequest):
        (WebKit::AssociatedURLLoaderTest::didSendData):
        (WebKit::AssociatedURLLoaderTest::didReceiveResponse):
        (WebKit::AssociatedURLLoaderTest::didDownloadData):
        (WebKit::AssociatedURLLoaderTest::didReceiveData):
        (WebKit::AssociatedURLLoaderTest::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoaderTest::didFinishLoading):
        (WebKit::AssociatedURLLoaderTest::didFail):
        (WebKit::TEST_F):

2011-06-16  Sailesh Agrawal  <sail@chromium.org>

        Reviewed by Mihai Parparita.

        [Chromium] Overlay scrollbars leave glitches on web content
        https://bugs.webkit.org/show_bug.cgi?id=62383

        Fix glitches when scrolling with overlay scrollbars. The problem was that the render widget was copying the scrollbars when scrolling. Fix was to intersect the clip rect with the scroll rect. This is the same thing that Safari does (see WebChromeClient::scroll).

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::scroll):

2011-06-16  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-16  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Fisher.

        [Chromium] Prepare to move some APIs from WebFrame to WebDocument
        https://bugs.webkit.org/show_bug.cgi?id=62781

        This patch adds a WEBKIT_FRAME_TO_DOCUMENT_API_MOVE ifdef to prepare
        for moving a number of Document-specific APIs from WebFrame to
        WebDocument.  This ifdef will allow us to move these APIs without
        disrupting the consumers of the APIs (too much).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-06-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89026.
        http://trac.webkit.org/changeset/89026
        https://bugs.webkit.org/show_bug.cgi?id=62804

        These patches were likely correct.  I'll investigate the
        browser_test failures. (Requested by abarth on #webkit).

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::loadFrameRequest):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::performMediaPlayerAction):

2011-06-16  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: Cache XHR content in backend, do not use initialContentSet for XHRs.
        https://bugs.webkit.org/show_bug.cgi?id=61205

        Added inspector backend cache for XHR content.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):

2011-06-16  Tommy Widenflycht  <tommyw@google.com>

        Reviewed by Tony Gentilcore.

        MediaStream API: Runtime enabled features
        https://bugs.webkit.org/show_bug.cgi?id=62798

        Add the WebRuntimeFeatures API for Media Streams and enable the feature by default in DumpRenderTree.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableMediaStream):
        (WebKit::WebRuntimeFeatures::isMediaStreamEnabled):

2011-06-16  Torsten Kurbad  <gentoo@tk-webart.de>

        Reviewed by Eric Seidel.

        Add support for sys.platform == 'linux3' by relaxing 
        conditional statements and/or extending lookup dicts.
        This way, Linux kernels >=3.0-rc1 get supported in the
        build process.
        https://bugs.webkit.org/show_bug.cgi?id=62730

        * gyp_webkit:

2011-06-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89025.
        http://trac.webkit.org/changeset/89025
        https://bugs.webkit.org/show_bug.cgi?id=62799

        "Some layout tests fail" (Requested by yurys on #webkit).

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):

2011-06-16  Vitaly Repeshko  <vitalyr@chromium.org>

        Unreviewed.

        Revert Adam's user gesture patch series r89002, r89005, r89007, r89018
        https://bugs.webkit.org/show_bug.cgi?id=62796

        The patches broke chromium browser tests.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::loadFrameRequest):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::performMediaPlayerAction):

2011-06-16  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: Cache XHR content in backend, do not use initialContentSet for XHRs.
        https://bugs.webkit.org/show_bug.cgi?id=61205

        Added inspector backend cache for XHR content.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):

2011-06-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Remove HTMLVideoElement::processingUserGesture
        https://bugs.webkit.org/show_bug.cgi?id=62784

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::performMediaPlayerAction):

2011-06-15  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Pavel Feldman.

        WebInspector [Chromium]: Make heap snapshots UI more responsive.
        https://bugs.webkit.org/show_bug.cgi?id=62360

        Two changes have been made:
          - when we request elements, sort array only partially;
          - when populating children, do it in batches;

        * WebKit.gyp:

2011-06-15  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Remove Event::fromUserGesture
        https://bugs.webkit.org/show_bug.cgi?id=62778

        This call site is not definite about there not being a user gesture.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::loadFrameRequest):

2011-06-15  Darin Adler  <darin@apple.com>

        Reviewed by Adam Barth.

        Remove obsolete LOOSE_OWN_PTR code
        https://bugs.webkit.org/show_bug.cgi?id=59909

        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::StorageAreaProxy): Use adoptPtr
        instead of LOOSE_OWN_PTR.
        * src/StorageNamespaceProxy.cpp:
        (WebCore::StorageNamespaceProxy::StorageNamespaceProxy): Ditto.

2011-06-15  Andrey Kosyakov  <caseq@chromium.org>

       Unreviewed, rolled out r88937 (broke build on mac)

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):

2011-06-15  Pavel Feldman  <pfeldman@chromium.org>

        Not reviewed: [Chromium] one line background color fix for inspector.

        * src/js/devTools.css:
        (body.detached.platform-mac-snowleopard #toolbar):
        (body.detached.platform-mac-snowleopard.inactive #toolbar):

2011-06-14  Hans Wennborg  <hans@chromium.org>

        Reviewed by Tony Gentilcore.

        IndexedDB: LevelDB doesn't do incognito mode; fall back to SQLite.
        https://bugs.webkit.org/show_bug.cgi?id=62633

        LevelDB does not support in-memory databases. Fall back to SQLite
        for incognito mode browsing. This will be tested by browser_tests
        in Chromium.

        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):

2011-06-10  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Dmitry Titov.

        [Chromium] Worker object may be garbage collected if it doesn't send any messages
        https://bugs.webkit.org/show_bug.cgi?id=62446

        Assume that WorkerContext has pending activity before explicit notification
        is received from it. It prevents worker object from being collected before
        the first message from its context is received.

        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::startWorkerContext):
        (WebKit::WebWorkerClientImpl::startWorkerContextInternal):
        (WebKit::WebWorkerClientImpl::startWorkerContextTask):
        * src/WebWorkerClientImpl.h:

2011-06-14  Eric Uhrhane  <ericu@chromium.org>

        Reviewed by Darin Fisher.

        Clean up filesystem base path code.
        https://bugs.webkit.org/show_bug.cgi?id=60218

        Change a bunch of url-held-in-a-string parameters into real KURLS and
        WebURLs.  Also add a #define to make it easier to stage this change, as
        it involves both Chromium and WebKit changes that would ideally be 
        simultaneous.

        No new tests--no change in functionality.

        * public/WebFileSystem.h:
        * public/WebFileSystemCallbacks.h:
        * public/WebFrame.h:
        * src/AsyncFileSystemChromium.cpp:
        * src/AsyncFileSystemChromium.h:
        * src/WebFileSystemCallbacksImpl.cpp:
        * src/WebFileSystemCallbacksImpl.h:
        * src/WebFrameImpl.cpp:
        * src/WorkerAsyncFileSystemChromium.cpp:
        * src/WorkerAsyncFileSystemChromium.h:
        * src/WorkerAsyncFileWriterChromium.cpp:
        * src/WorkerAsyncFileWriterChromium.h:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        * src/WorkerFileSystemCallbacksBridge.h:
        * src/WorkerFileWriterCallbacksBridge.cpp:
        * src/WorkerFileWriterCallbacksBridge.h:

2011-06-14  James Robinson  <jamesr@chromium.org>

        Reviewed by Stephen White.

        [chromium] Compositor shader initialization is inefficient
        https://bugs.webkit.org/show_bug.cgi?id=62618

        Add a TRACE_EVENT() around initial compositor initialization.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-06-14  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Fisher.

        WebFrame::url() should use the one true URL
        https://bugs.webkit.org/show_bug.cgi?id=62610

        The Document's URL is the one true URL.  Thou shalt have no URLs before
        Document::url().

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::url):

2011-06-13  James Simonsen  <simonjam@chromium.org>

        [Chromium] Unreviewed, rolled DEPS.

        * DEPS:

2011-06-13  James Simonsen  <simonjam@chromium.org>

        Reviewed by James Robinson.

        [Chromium] Implement monotonicallyIncreasingClock()
        https://bugs.webkit.org/show_bug.cgi?id=62162

        * public/WebKitClient.h:
        (WebKit::WebKitClient::monotonicallyIncreasingTime): Added.
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::monotonicallyIncreasingTime): Added.

2011-06-13  Jian Li  <jianli@chromium.org>

        Reviewed by David Levin.

        [Chromium] WebNotification should check if ScriptExecutionContext is gone
        before dispatching events.
        https://bugs.webkit.org/show_bug.cgi?id=62592

        * public/WebNotification.h:
        * src/WebNotification.cpp:
        (WebKit::WebNotification::dispatchDisplayEvent):
        (WebKit::WebNotification::dispatchErrorEvent):
        (WebKit::WebNotification::dispatchCloseEvent):
        (WebKit::WebNotification::dispatchClickEvent):
        (WebKit::WebNotification::dispatchEvent): Added a helper method to check
        the context and dispatch an event.

2011-06-13  Dmitry Lomov  <dslomov@google.com>

        Reviewed by Adam Barth.

        https://bugs.webkit.org/show_bug.cgi?id=62345
        Use per-isolate embedder data instead of statics for caches in bindings.
        This is a prerequisite for more than one v8 isolate per process.

        * tests/IDBBindingUtilitiesTest.cpp:
        (WebCore::TEST):

2011-06-13  Lei Zhang  <thestig@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] Add a WebSetting to control printing backgrounds
        https://bugs.webkit.org/show_bug.cgi?id=62423

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setShouldPrintBackgrounds):
        * src/WebSettingsImpl.h:

2011-06-13  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add accessors for selectionStart and selectionEnd.
        https://bugs.webkit.org/show_bug.cgi?id=62596

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::selectionEnd):
        (WebKit::WebAccessibilityObject::selectionStart):

2011-06-13  Adam Barth  <abarth@webkit.org>

        Reviewed by Nate Chapin.

        Factor IconController out of FrameLoader
        https://bugs.webkit.org/show_bug.cgi?id=62509

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::iconURLs):

2011-06-12  Adam Barth  <abarth@webkit.org>

        Reviewed by Alexey Proskuryakov.

        Rename FrameLoaderClient::interruptForPolicyChangeError to use the past tense
        https://bugs.webkit.org/show_bug.cgi?id=62516

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::interruptedForPolicyChangeError):
        * src/FrameLoaderClientImpl.h:

2011-06-12  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Remove FrameLoader::isProcessingUserGesture
        https://bugs.webkit.org/show_bug.cgi?id=62519

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::isProcessingUserGesture):

2011-06-10  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by James Robinson.

        Web Inspector: [Chromium] DevTools does not highlight elements when accelerated compositing is on.
        https://bugs.webkit.org/show_bug.cgi?id=62149

        Added page overlay for inspector highlight support.

        * WebKit.gyp:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::attachRootGraphicsLayer):
        * src/PageOverlay.cpp: Added.
        (WebKit::PageOverlay::create):
        (WebKit::PageOverlay::PageOverlay):
        (WebKit::OverlayGraphicsLayerClientImpl::create):
        (WebKit::OverlayGraphicsLayerClientImpl::~OverlayGraphicsLayerClientImpl):
        (WebKit::OverlayGraphicsLayerClientImpl::notifyAnimationStarted):
        (WebKit::OverlayGraphicsLayerClientImpl::notifySyncRequired):
        (WebKit::OverlayGraphicsLayerClientImpl::paintContents):
        (WebKit::OverlayGraphicsLayerClientImpl::showDebugBorders):
        (WebKit::OverlayGraphicsLayerClientImpl::showRepaintCounter):
        (WebKit::OverlayGraphicsLayerClientImpl::OverlayGraphicsLayerClientImpl):
        (WebKit::PageOverlay::clear):
        (WebKit::PageOverlay::update):
        (WebKit::PageOverlay::paintWebFrame):
        (WebKit::PageOverlay::invalidateWebFrame):
        * src/PageOverlay.h: Added.
        (WebKit::PageOverlay::~PageOverlay):
        (WebKit::PageOverlay::setClient):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::paintPageOverlay):
        (WebKit::WebDevToolsAgentImpl::highlight):
        (WebKit::WebDevToolsAgentImpl::hideHighlight):
        * src/WebDevToolsAgentImpl.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::paintWithContext):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setPageOverlayClient):
        (WebKit::WebViewImpl::setOverlayLayer):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::setRootPlatformLayer):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::reallocateRenderer):
        * src/WebViewImpl.h:
        (WebKit::WebViewImpl::pageOverlay):

2011-06-10  David Levin  <levin@chromium.org>

        Reviewed by Dmitry Titov.

        Fetching a Worker with url that isn't allowed from a file based test causes DRT to crash.
        https://bugs.webkit.org/show_bug.cgi?id=62469

        Test: fast/workers/worker-crash-with-invalid-location.html

        * src/SharedWorkerRepository.cpp:
        (WebCore::SharedWorkerScriptLoader::SharedWorkerScriptLoader): Changed to using the RefCounted version
        of WorkerScriptLoader.
        (WebCore::SharedWorkerScriptLoader::load): Rearranged calls as done in similar places,
        which allows for SharedWorkerScriptLoader to be deleted during the laodAsynchronously call
        and for unsetPendingActivity to be called.
        (WebCore::SharedWorkerScriptLoader::notifyFinished): Changed to using the RefCounted version
        of WorkerScriptLoader.

2011-06-10  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-10  Tony Chang  <tony@chromium.org>

        Reviewed by Dimitri Glazkov.

        [chromium] make features.gypi the same as features_override.gypi
        https://bugs.webkit.org/show_bug.cgi?id=62399

        Make the file the same as chromium's features_override.gypi so we
        can remove features_override.gypi in chromium.

        Remove ENABLE_DATAGRID=0 since the define is gone and remove
        ENABLE_FULLSCREEN_API=1 since we want to disable it.

        * features.gypi:

2011-06-09  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Dmitry Titov.

        [Chromium] Worker object may be garbage collected even if it has message handlers
        https://bugs.webkit.org/show_bug.cgi?id=62292

        I'd like to convert the test case into a layout test but I don't see yet
        how to do this so that the test isn't too slow and reliable. The problem
        with test is that full-GC needs to be triggered right after
        WebWorkerClientImpl::confirmMessageFromWorkerObject is called and there
        is no way to hook WebWorkerClientImpl::confirmMessageFromWorkerObject from JavaScript.
        So no test for now.

        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::confirmMessageFromWorkerObject):
        (WebKit::WebWorkerClientImpl::confirmMessageFromWorkerObjectTask): update worker context pending
        activity state every time a message is confirmed since the message may have created a new activity.
        * src/WebWorkerClientImpl.h:

2011-06-09  James Kozianski  <koz@chromium.org>

        Unreviewed, rolling out r88466.
        http://trac.webkit.org/changeset/88466
        https://bugs.webkit.org/show_bug.cgi?id=60059

        Broke PPAPITest.URLLoader test on the chromium bots

        * WebKit.gyp:
        * WebKit.gypi:
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        * tests/AssociatedURLLoaderTest.cpp: Removed.

2011-06-09  James Robinson  <jamesr@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] webkitRequestFullscreen exposed to web even when feature is disabled
        https://bugs.webkit.org/show_bug.cgi?id=62397

        Remove ENABLE_FULLSCREEN_API define from chromium builds since this exposes the webkitRequestFullscreen function
        even when the runtime setting was disabled.

        * features.gypi:

2011-06-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r88486.
        http://trac.webkit.org/changeset/88486
        https://bugs.webkit.org/show_bug.cgi?id=62409

        Broke chromium-win compile (Requested by jamesr on #webkit).

        * public/WebData.h:
        * public/WebPageSerializer.h:
        * src/WebData.cpp:
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serialize):
        (WebKit::WebPageSerializer::serializeToMHTML):

2011-06-09  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Darin Fisher.

        Page serializer APIs now use WebData instead of fetching the entire
        resource contents.
        https://bugs.webkit.org/show_bug.cgi?id=61908

        * public/WebData.h:
        * public/WebPageSerializer.h:
        * src/WebData.cpp:
        (WebKit::WebData::getSomeData):
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serialize):
        (WebKit::WebPageSerializer::serializeToMHTML):

2011-06-09  Bill Budge  <bbudge@chromium.org>

        Reviewed by Adam Barth.

        The AssociatedURLLoader returns URL access errors synchronously. Use a timer to return such errors asynchronously. Also add unit tests for successful loads, same-origin restriction by default, and successful cross-origin loads.
        https://bugs.webkit.org/show_bug.cgi?id=60059

        * WebKit.gyp:
        * WebKit.gypi:
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::ClientAdapter::enableErrorNotifications):
        (WebKit::AssociatedURLLoader::ClientAdapter::notifyError):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        * tests/AssociatedURLLoaderTest.cpp: Added.
        (WebKit::TestWebFrameClient::cancelledError):
        (WebKit::AssociatedURLLoaderTest::AssociatedURLLoaderTest):
        (WebKit::AssociatedURLLoaderTest::SetUp):
        (WebKit::AssociatedURLLoaderTest::TearDown):
        (WebKit::AssociatedURLLoaderTest::serveRequests):
        (WebKit::AssociatedURLLoaderTest::createAssociatedURLLoader):
        (WebKit::AssociatedURLLoaderTest::willSendRequest):
        (WebKit::AssociatedURLLoaderTest::didSendData):
        (WebKit::AssociatedURLLoaderTest::didReceiveResponse):
        (WebKit::AssociatedURLLoaderTest::didDownloadData):
        (WebKit::AssociatedURLLoaderTest::didReceiveData):
        (WebKit::AssociatedURLLoaderTest::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoaderTest::didFinishLoading):
        (WebKit::AssociatedURLLoaderTest::didFail):
        (WebKit::TEST_F):

2011-06-09  Nico Weber  <thakis@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Make a few destructors private.
        https://bugs.webkit.org/show_bug.cgi?id=62341

        No intended functionality change.

        * src/NotificationPresenterImpl.cpp:
        (WebKit::VoidCallbackClient::~VoidCallbackClient):
        * src/WebTextCheckingCompletionImpl.h:
        (WebKit::WebTextCheckingCompletionImpl::~WebTextCheckingCompletionImpl):
        * src/WebURLRequest.cpp:
        (WebKit::WebURLRequestPrivateImpl::~WebURLRequestPrivateImpl):
        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponsePrivateImpl::~WebURLResponsePrivateImpl):

2011-06-09  James Robinson  <jamesr@chromium.org>

        Fix chromium build on build.webkit.org builders.

        * features.gypi:

2011-06-08  Justin Novosad  <junov@chromium.org>

        Reviewed by James Robinson.

        [Chromium] Crash when closing a tab with accelerated 2d canvas
        https://bugs.webkit.org/show_bug.cgi?id=62324
        In GraphicsContext3DInternal::setContextLostCallback we are passing a
        non-refcounted ptr to a refcounted member. this can cause an access
        violation after the destruction of GraphicsContext3D.  Upon destruction
        a null callback is sent to setContextLostCallback, which is good
        except that it gets placed in a non-null adapter object.  This fix
        prevents the creation of the adapter when the callback is null, thus
        preventing a later crash.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContextLostCallbackAdapter::create):

2011-06-08  James Robinson  <jamesr@chromium.org>

        Hopefully last change to features.gypi - set ENABLE_REGISTER_PROTOCOL_HANDLER based off of the the variable set
        in chromium's common.gypi. Should green up the chromium linux tester on build.webkit.org.

        * features.gypi:

2011-06-08  James Robinson  <jamesr@chromium.org>

        Set ENABLE_REGISTER_PROTOCOL_HANDLER=1 for chromium. I didn't mean to turn that off...

        * features.gypi:

2011-06-08  James Robinson  <jamesr@chromium.org>

        [chromium] Update the chromium-within-WebKit revision to r88481
        https://bugs.webkit.org/show_bug.cgi?id=62353

        * DEPS:

2011-06-08  Sailesh Agrawal  <sail@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] Add stubs to WebWidget
        https://bugs.webkit.org/show_bug.cgi?id=62263

        This change add stub implementations for all WebWidget functions. Having stub methods should make it easier to add new functions to the class without breaking Chromium.

        * public/WebWidget.h:
        (WebKit::WebWidget::close):
        (WebKit::WebWidget::size):
        (WebKit::WebWidget::resize):
        (WebKit::WebWidget::animate):
        (WebKit::WebWidget::layout):
        (WebKit::WebWidget::paint):
        (WebKit::WebWidget::composite):
        (WebKit::WebWidget::themeChanged):
        (WebKit::WebWidget::handleInputEvent):
        (WebKit::WebWidget::mouseCaptureLost):
        (WebKit::WebWidget::setFocus):
        (WebKit::WebWidget::setComposition):
        (WebKit::WebWidget::confirmComposition):
        (WebKit::WebWidget::compositionRange):
        (WebKit::WebWidget::textInputType):
        (WebKit::WebWidget::caretOrSelectionBounds):
        (WebKit::WebWidget::selectionRange):
        (WebKit::WebWidget::caretOrSelectionRange):
        (WebKit::WebWidget::setTextDirection):
        (WebKit::WebWidget::isAcceleratedCompositingActive):

2011-06-08  Tom Sepez  <tsepez@chromium.org>

        Reviewed by Adam Barth.

        Add new permission callbacks for mixed content blocking.
        https://bugs.webkit.org/show_bug.cgi?id=61946

        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowDisplayingInsecureContent):
        (WebKit::WebPermissionClient::allowRunningInsecureContent):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowDisplayingInsecureContent):
        (WebKit::FrameLoaderClientImpl::allowRunningInsecureContent):
        * src/FrameLoaderClientImpl.h:

2011-06-08  Ryosuke Niwa  <rniwa@webkit.org>

        Added new entries for skia/third_party/glu.

        * DEPS:

2011-06-08  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-08  Ryan Sleevi  <rsleevi@chromium.org>

        Reviewed by Tony Chang.

        Suppress C++0x compat warnings when compiling Chromium port with GCC 4.6

        Compiling Chromium port under GCC 4.6 produces warnings about nullptr
        https://bugs.webkit.org/show_bug.cgi?id=62242

        * WebKit.gyp:

2011-06-08  Greg Simon  <gregsimon@chromium.org>

        Reviewed by Dimitri Glazkov.

        Control Indexeddb backends from LayoutTestController
        https://bugs.webkit.org/show_bug.cgi?id=61000

        * public/WebIDBFactory.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactory::setOverrideBackingStoreType):
        (WebKit::WebIDBFactory::setTemporaryDatabaseFolder):
        (WebKit::WebIDBFactoryImpl::open):

2011-06-08  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add a method to return the line breaks for any element with
        multiline text content.
        https://bugs.webkit.org/show_bug.cgi?id=62236

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::lineBreaks):

2011-06-08  Ilya Tikhonovsky  <loislo@chromium.org>

        Unreviewed chromium build fix for r88332.

        * src/WebRuntimeFeatures.cpp:

2011-06-08  Hironori Bono  <hbono@chromium.org>

        Reviewed by Brent Fulgham.

        Add SpellCheck API
        https://bugs.webkit.org/show_bug.cgi?id=59693

        This change adds two SpellCheck API functions (addSpellcheckRange and
        removeSpellcheckRange) and one attribute (spellcheckRange) discussed in
        the public-webapps ML. This change is currently available only on Chromium.

        * features.gypi:
        * public/WebRuntimeFeatures.h:
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableSpellCheckAPI):
        (WebKit::WebRuntimeFeatures::isSpellCheckAPIEnabled):

2011-06-07  James Kozianski  <koz@chromium.org>

        [Chromium] Unreviewed. Disable SelectItemEvenFire that fails on
        chromium canaries.

        * tests/PopupMenuTest.cpp:
        (WebKit::TEST_F):

2011-06-07  Robert Kroeger  <rjkroege@chromium.org>

        Reviewed by Adam Barth.

        [chromium] Add a basic gesture recognizer to the Chromium platform
        https://bugs.webkit.org/show_bug.cgi?id=54417

        Added unit tests for the basic chromium platform gesture recognizer.

        * tests/InnerGestureRecognizerTest.cpp: Added.
        (WebCore::InspectableInnerGestureRecognizer::InspectableInnerGestureRecognizer):
        (WebCore::InspectableInnerGestureRecognizer::signature):
        (WebCore::InspectableInnerGestureRecognizer::firstTouchPosition):
        (WebCore::InspectableInnerGestureRecognizer::setFirstTouchTime):
        (WebCore::InspectableInnerGestureRecognizer::firstTouchTime):
        (WebCore::InspectableInnerGestureRecognizer::setLastTouchTime):
        (WebCore::InspectableInnerGestureRecognizer::lastTouchTime):
        (WebCore::InspectableInnerGestureRecognizer::edgeFunction):
        (WebCore::InspectableInnerGestureRecognizer::updateValues):
        (WebCore::InspectableInnerGestureRecognizer::addEdgeFunction):
        (WebCore::BuildablePlatformTouchPoint::setX):
        (WebCore::BuildablePlatformTouchPoint::setY):
        (WebCore::BuildablePlatformTouchPoint::BuildablePlatformTouchPoint):
        (WebCore::TestGestureRecognizer::TestGestureRecognizer):
        (WebCore::TestGestureRecognizer::SetUp):
        (WebCore::TestGestureRecognizer::TearDown):
        (WebCore::TEST_F):

2011-06-07  Vangelis Kokkevis  <vangelis@chromium.org>

        Reviewed by James Robinson.

        Disable compositing for RTL pages in the RenderLayerCompositor rather
        than later on in the WebViewImpl.
        https://bugs.webkit.org/show_bug.cgi?id=62246

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::allowedCompositingTriggers):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::layout):
        (WebKit::WebViewImpl::setRootGraphicsLayer):

2011-06-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r88254, r88262, and r88268.
        http://trac.webkit.org/changeset/88254
        http://trac.webkit.org/changeset/88262
        http://trac.webkit.org/changeset/88268
        https://bugs.webkit.org/show_bug.cgi?id=62234

        I fail at changing features.gypi (Requested by abarth on
        #webkit).

        * features.gypi:

2011-06-07  Adam Barth  <abarth@webkit.org>

        Reviewed by Tony Chang.

        Fix "branding" issue in features.gypi
        https://bugs.webkit.org/show_bug.cgi?id=62229

        Apparently we need to move the conditional block further out of the
        nesting in order to see the branding variable.  This patch also remove
        the dummy branding variable I added to get the buildbot building again.

        * features.gypi:

2011-06-07  Adam Barth  <abarth@webkit.org>

        Attempt to fix the cr-win build.

        * features.gypi:

2011-06-07  Adam Barth  <abarth@webkit.org>

        Reviewed by Dimitri Glazkov.

        Synchronize features.gypi and features_override.gypi in preparation for removing features_override.gypi
        https://bugs.webkit.org/show_bug.cgi?id=62135

        After this patch is rolled into Chromium, we should be able to delete
        features_override.gyp downstream.  Once we do that, we can simplify
        this file somewhat by removing at least on level of nesting.

        * features.gypi:

2011-06-03  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: correctly handle disconnect from worker when script execution is paused
        https://bugs.webkit.org/show_bug.cgi?id=62019

        Dispatch disconnecFrontend message in debugger task mode to make sure
        it is processed even if execution is paused.

        * src/WebWorkerImpl.cpp:
        (WebKit::WebWorkerImpl::detachDevTools):
        (WebKit::WebWorkerImpl::dispatchDevToolsMessage):

2011-06-07  Naoki Takano  <takano.naoki@gmail.com>

        Reviewed by Kent Tamura.

        [Chromium] Click event is not fired for a menulist <select>
        https://bugs.webkit.org/show_bug.cgi?id=60563

        * tests/PopupMenuTest.cpp:
        (WebKit::TestPopupMenuClient::TestPopupMenuClient): Initialize m_node.
        (WebKit::TestPopupMenuClient::valueChanged): To fire 'change' event, forward the event like RenderMenuList.
        (WebKit::TestPopupMenuClient::itemIsEnabled): Change to return true or false according to disabled item or not.
        (WebKit::TestPopupMenuClient::setDisabledIndex): Set disabled index to simulate disabled item.
        (WebKit::TestPopupMenuClient::setFocusedNode): Set focused node to dispatch the event.
        (WebKit::SelectPopupMenuTest::SelectPopupMenuTest): Add baseURL.
        (WebKit::SelectPopupMenuTest::TearDown): Add UnregisterAllMockedURLs() call.
        (WebKit::SelectPopupMenuTest::registerMockedURLLoad): To simulate html load, call RegisterMockedURL().
        (WebKit::SelectPopupMenuTest::serveRequests): Call ServeAsynchronousMockedRequests().
        (WebKit::SelectPopupMenuTest::loadFrame): Simulate load frame with url string.
        (WebKit::TEST_F): Implement SelectItemEventFire, SelectItemKeyEvent, SelectItemRemoveSelectOnChange and SelectItemRemoveSelectOnChange.
        * tests/data/select_event.html: Added for SelectItemEventFire and SelectItemKeyEvent.
        * tests/data/select_event_remove_on_change.html: Added SelectItemRemoveSelectOnChange.
        * tests/data/select_event_remove_on_click.html: Added SelectItemRemoveSelectOnChange.
        * WebKit.gyp: Added PopupMenuTest.cpp. Because webkit_support dependency is added, we can't build PopupMenuTest.cpp with Chromium-win (shared) configuration.

2011-06-06  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make WebViewImpl's destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62155

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/WebViewImpl.h:

2011-06-06  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Delete dead clipboard code.
        https://bugs.webkit.org/show_bug.cgi?id=62113

        * src/WebDragData.cpp:

2011-06-06  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make WebURLRequestPrivateImpl's and WebURLResponsePrivateImpl's destructors virtual
        https://bugs.webkit.org/show_bug.cgi?id=62148

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/WebURLRequest.cpp:
        (WebKit::WebURLRequestPrivateImpl::~WebURLRequestPrivateImpl):
        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponsePrivateImpl::~WebURLResponsePrivateImpl):

2011-06-06  Shishir Agrawal  <shishir@chromium.org>

        Reviewed by Tony Gentilcore.

        Add a "prerender" state for page visibility.
        https://bugs.webkit.org/show_bug.cgi?id=62062

        * public/WebPageVisibilityState.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setVisibilityState):

2011-06-06  Nico Weber  <thakis@chromium.org>

        Reviewed by Dimitri Glazkov.

        webkit/glue/webmediaplayer_impl.cc deletes an object of type
        WebVideoFrame, which means this patch fixes a real bug, not just
        a theoretical one.

        [chromium] Give WebVideoFrame a virtual destructor
        https://bugs.webkit.org/show_bug.cgi?id=61742

        * public/WebVideoFrame.h:
        (WebKit::WebVideoFrame::~WebVideoFrame):

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make ResourceHandleInternal's destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62073

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::~ResourceHandleInternal):

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make ChromePrintContext's destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62076

        Since WebFrameImpl's m_printContext is a OnwPtr<ChromePrintContext>
        that is dynamically set to either a ChromePrintContext or a
        ChromePluginPrintContext, this fixes an actual bug.

        * src/WebFrameImpl.cpp:
        (WebKit::ChromePrintContext::~ChromePrintContext):
        (WebKit::ChromePluginPrintContext::~ChromePluginPrintContext):

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make WebTextCheckingCompletionImpl's destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62074

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/WebTextCheckingCompletionImpl.h:
        (WebKit::WebTextCheckingCompletionImpl::~WebTextCheckingCompletionImpl):

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make PlatformMessagePortChannel's destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62072

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/PlatformMessagePortChannel.h:

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Give VoidCallbackClient a virtual destructor
        https://bugs.webkit.org/show_bug.cgi?id=62067

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/NotificationPresenterImpl.cpp:
        (WebKit::VoidCallbackClient::~VoidCallbackClient):

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make WebFrameImpl destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62065

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/WebFrameImpl.h:

2011-06-03  Philippe Beauchamp  <philippe.beauchamp@gmail.com>

        Reviewed by Dimitri Glazkov.

        Add the feature "Add as search engine..." in a search text field context menu for chromium
        https://bugs.webkit.org/show_bug.cgi?id=47980

        * public/WebContextMenuData.h:
        * public/WebSearchableFormData.h:
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/WebSearchableFormData.cpp:
        (WebKit::WebSearchableFormData::WebSearchableFormData):

2011-06-03  Naoki Takano  <takano.naoki@gmail.com>

        Reviewed by Eric Seidel.

        [Chromium] Call setToolTipText() in WebPopupMenuImpl mouse move handler to show tool tip in select popup window.
        https://bugs.webkit.org/show_bug.cgi?id=61260
        http://code.google.com/p/chromium/issues/detail?id=12721

        * public/WebMenuItemInfo.h: Add toolTip.
        * public/WebViewClient.h: Remove setToolTipText().
        * public/WebWidgetClient.h: Add setTooTipText().
        (WebKit::WebWidgetClient::setToolTipText):
        * src/ExternalPopupMenu.cpp:
        (WebKit::ExternalPopupMenu::getPopupMenuInfo): Add popupItem.toolTip set.
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::MouseMove): Call setToolTipText().

2011-06-03  Hans Wennborg  <hans@chromium.org>

        Reviewed by Steve Block.

        IndexedDB: Clean-up use of INT64_MAX in LevelDB back-end
        https://bugs.webkit.org/show_bug.cgi?id=62009

        Don't use INT64_MAX, use the various encodeMaxKey() functions instead.

        * tests/IDBLevelDBCodingTest.cpp:
        (IDBLevelDBCoding::TEST):

2011-06-03  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: [Chromium] cpu-profiler-profiling layout test is flaky on Linux Debug.
        https://bugs.webkit.org/show_bug.cgi?id=61533

        Skip cpu-profiler-profiling in debug, implement a fast headless alternative.

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::setJavaScriptProfilingEnabled):
        * src/WebDevToolsAgentImpl.h:

2011-06-02  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: add an option for automatically attaching to new workers
        https://bugs.webkit.org/show_bug.cgi?id=61930

        Notification about worker context termination are now sent to the inspector.

        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::terminateWorkerContext):
        (WebKit::WebWorkerClientImpl::disconnectFromInspector):
        (WebKit::WebWorkerClientImpl::workerContextDestroyed):

2011-06-02  Aaron Colwell  <acolwell@chromium.org>

        Reviewed by David Levin.

        Add mediaTimeForTimeValue() implementation.
        https://bugs.webkit.org/show_bug.cgi?id=61555

        * public/WebMediaPlayer.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::mediaTimeForTimeValue):
        * src/WebMediaPlayerClientImpl.h:

2011-06-02  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Adam Barth.

        Adding MHTML generation support to MHTMLArchive.
        https://bugs.webkit.org/show_bug.cgi?id=7169

        * public/WebPageSerializer.h:
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serializeToMHTML):

2011-06-02  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Darin Adler.

        Add build logistics and plumbing for window.internals object.
        https://bugs.webkit.org/show_bug.cgi?id=60313

        * WebKit.gyp: Added linking new webkit_test_support library.
        * public/WebTestingSupport.h: Added.
        * src/WebTestingSupport.cpp: Added.

2011-06-02  Aaron Colwell  <acolwell@chromium.org>

        Reviewed by David Levin.

        Update chromium version
        https://bugs.webkit.org/show_bug.cgi?id=61555

        * DEPS:

2011-06-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87920.
        http://trac.webkit.org/changeset/87920
        https://bugs.webkit.org/show_bug.cgi?id=61943

        This patch does not build in Win Builder (dbg)(shared)
        downstream (Requested by abarth|gardener on #webkit).

        * tests/PopupMenuTest.cpp:
        (WebKit::TestPopupMenuClient::TestPopupMenuClient):
        (WebKit::TestPopupMenuClient::valueChanged):
        (WebKit::TestPopupMenuClient::itemIsEnabled):
        (WebKit::SelectPopupMenuTest::TearDown):
        * tests/data/popup/select_event.html: Removed.
        * tests/data/popup/select_event_remove_on_change.html: Removed.
        * tests/data/popup/select_event_remove_on_click.html: Removed.

2011-06-02  Dimitri Glazkov  <dglazkov@chromium.org>

        Unreviewed, rolling out r87926.
        http://trac.webkit.org/changeset/87926
        https://bugs.webkit.org/show_bug.cgi?id=60313

        Fails to find WebCoreTestSupport.dylib on bots.

        * WebKit.gyp:
        * public/WebTestingSupport.h: Removed.
        * src/WebTestingSupport.cpp: Removed.

2011-06-02  Aaron Colwell  <acolwell@chromium.org>

        Reviewed by Dimitri Glazkov.

        Bring gyp_webkit up to date with changes made to
        gyp_chromium so chromium_rev can be advanced past
        revision 87140.
        https://bugs.webkit.org/show_bug.cgi?id=61881

        * gyp_webkit:

2011-05-21  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Darin Adler.

        Add build logistics and plumbing for window.internals object.
        https://bugs.webkit.org/show_bug.cgi?id=60313

        * WebKit.gyp: Added linking new webkit_test_support library.
        * public/WebTestingSupport.h: Added.
        * src/WebTestingSupport.cpp: Added.

2011-06-02  Naoki Takano  <takano.naoki@gmail.com>

        Reviewed by Dimitri Glazkov.

        [Chromium] Click event is not fired for a menulist <select>
        https://bugs.webkit.org/show_bug.cgi?id=60563

        * tests/PopupMenuTest.cpp:
        (WebKit::TestPopupMenuClient::TestPopupMenuClient): Initialize m_node.
        (WebKit::TestPopupMenuClient::valueChanged): To fire 'change' event, forward the event like RenderMenuList.
        (WebKit::TestPopupMenuClient::itemIsEnabled): Change to return true or false according to disabled item or not.
        (WebKit::TestPopupMenuClient::setDisabledIndex): Set disabled index to simulate disabled item.
        (WebKit::TestPopupMenuClient::setFocusedNode): Set focused node to dispatch the event.
        (WebKit::SelectPopupMenuTest::SelectPopupMenuTest): Add baseURL.
        (WebKit::SelectPopupMenuTest::TearDown): Add UnregisterAllMockedURLs() call.
        (WebKit::SelectPopupMenuTest::registerMockedURLLoad): To simulate html load, call RegisterMockedURL().
        (WebKit::SelectPopupMenuTest::serveRequests): Call ServeAsynchronousMockedRequests().
        (WebKit::SelectPopupMenuTest::loadFrame): Simulate load frame with url string.
        (WebKit::TEST_F): Implement SelectItemEventFire, SelectItemKeyEvent, SelectItemRemoveSelectOnChange and SelectItemRemoveSelectOnChange.
        * tests/data/select_event.html: Added for SelectItemEventFire and SelectItemKeyEvent.
        * tests/data/select_event_remove_on_change.html: Added SelectItemRemoveSelectOnChange.
        * tests/data/select_event_remove_on_click.html: Added SelectItemRemoveSelectOnChange.

2011-06-01  Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        [chromium] Fix syncing of removed mask and replica layers
        https://bugs.webkit.org/show_bug.cgi?id=61895

        * tests/TreeSynchronizerTest.cpp:
        (WebCore::TEST):

2011-06-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87788.
        http://trac.webkit.org/changeset/87788
        https://bugs.webkit.org/show_bug.cgi?id=61856

        breaks windows chromium canary (Requested by jknotten on
        #webkit).

        * public/WebPageSerializer.h:
        * src/WebPageSerializer.cpp:

2011-06-01  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Adam Barth.

        Adding MHTML generation support to MHTMLArchive.
        https://bugs.webkit.org/show_bug.cgi?id=7169

        * public/WebPageSerializer.h:
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serializeToMHTML):

2011-06-01  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector [Chromium]: Put worker scripts into devtools_frontend.zip.
        https://bugs.webkit.org/show_bug.cgi?id=61803

        * WebKit.gyp:
        * scripts/generate_devtools_zip.py:

2011-06-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87781.
        http://trac.webkit.org/changeset/87781
        https://bugs.webkit.org/show_bug.cgi?id=61842

        breaks chromium linux release (Requested by mnaganov on
        #webkit).

        * WebKit.gyp:
        * scripts/generate_devtools_zip.py:

2011-05-31  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector [Chromium]: Put worker scripts into devtools_frontend.zip.
        https://bugs.webkit.org/show_bug.cgi?id=61803

        * WebKit.gyp:
        * scripts/generate_devtools_zip.py:

2011-05-31  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by Kent Tamura.

        [Chromium] webkitStorageInfo methods (for quota API) should not crash when error callback is not given.
        https://bugs.webkit.org/show_bug.cgi?id=61823

        Fixed assertion on errorCallback parameter.

        Test: storage/quotainfo-no-callbacks.html

        * src/StorageInfoChromium.cpp:
        (WebCore::StorageInfo::queryUsageAndQuota):
        (WebCore::StorageInfo::requestQuota):

2011-05-31  Daniel Erat  <derat@chromium.org>

        Reviewed by Tony Chang.

        Make WebScreenInfoFactory return fresh screen dimensions.
        https://bugs.webkit.org/show_bug.cgi?id=61679

        * public/x11/WebScreenInfoFactory.h:
        * src/x11/WebScreenInfoFactory.cpp:
        (WebKit::WebScreenInfoFactory::screenInfo):

2011-05-31  Cary Clark  <caryclark@google.com>

        Reviewed by Eric Seidel.

        Allow Chromium porting layer to use Skia on Mac.
        https://bugs.webkit.org/show_bug.cgi?id=61548

        * public/WebCommon.h:
        Don't allow WebKit to use CG if it is already using Skia.

        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::paintScrollbarThumb):
        Allow scrollbar thumb draw to take WebCanvas.

2011-05-27  Jochen Eisinger  <jochen@chromium.org>

        Reviewed by Adam Barth.

        Check access policy on all storage operations
        https://bugs.webkit.org/show_bug.cgi?id=61581

        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::length):
        (WebCore::StorageAreaProxy::key):
        (WebCore::StorageAreaProxy::getItem):
        (WebCore::StorageAreaProxy::setItem):
        (WebCore::StorageAreaProxy::removeItem):
        (WebCore::StorageAreaProxy::clear):
        (WebCore::StorageAreaProxy::contains):
        (WebCore::StorageAreaProxy::canAccessStorage):
        * src/StorageAreaProxy.h:
        * src/WebStorageAreaImpl.cpp:
        (WebKit::WebStorageAreaImpl::length):
        (WebKit::WebStorageAreaImpl::key):
        (WebKit::WebStorageAreaImpl::getItem):

2011-05-27  Jochen Eisinger  <jochen@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] drop unused WebFrame parameter to WebStorageArea::setItem
        https://bugs.webkit.org/show_bug.cgi?id=61583

        * public/WebStorageArea.h:
        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::setItem):
        * src/WebStorageAreaImpl.cpp:
        (WebKit::WebStorageAreaImpl::setItem):
        * src/WebStorageAreaImpl.h:

2011-05-27  David Levin  <levin@chromium.org>

        Reviewed by Darin Fisher.

        Need a callback for when the preferred rendered size may have changed.
        https://bugs.webkit.org/show_bug.cgi?id=61309

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didUpdateLayout): Added stub.
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::layoutUpdated): Plumbed through the call to WebFrameClient::didUpdateLayout.
        * src/ChromeClientImpl.h: Added declaration.

2011-05-27  Shishir Agrawal  <shishir@chromium.org>

        Reviewed by Tony Gentilcore.

        Enable Page Visibility API in the chromium port.
        https://bugs.webkit.org/show_bug.cgi?id=61397

        * features.gypi:

2011-05-26  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Adam Barth.

        Fix worldID and destinationDomain argument names
        https://bugs.webkit.org/show_bug.cgi?id=61571

        As part of working on r87423, I noticed a couple of inconsistencies in
        argument names:
        - We would use worldId in .h files but worldID in .cpp files.
          Standardize on the latter
        - SecurityOrigin::addOriginAccessWhitelistEntry would take a
          destinationDomains argument, even though the actual parameter was for
          a single domain (renamed to be singular).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::executeScriptInIsolatedWorld):
        (WebKit::WebFrameImpl::setIsolatedWorldSecurityOrigin):
        * src/WebFrameImpl.h:

2011-05-26  Leandro Gracia Gil  <leandrogracia@chromium.org>

        Reviewed by Dmitry Titov.

        Add missing compile guards for WebWorkers in WebKit.
        https://bugs.webkit.org/show_bug.cgi?id=61536

        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
        * src/PlatformBridge.cpp:
        * src/WebFileSystemCallbacksImpl.cpp:
        (WebKit::WebFileSystemCallbacksImpl::didOpenFileSystem):
        * src/WorkerAsyncFileSystemChromium.cpp:
        * src/WorkerAsyncFileSystemChromium.h:
        * src/WorkerAsyncFileWriterChromium.cpp:
        * src/WorkerAsyncFileWriterChromium.h:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        * src/WorkerFileSystemCallbacksBridge.h:
        * src/WorkerFileWriterCallbacksBridge.cpp:
        * src/WorkerFileWriterCallbacksBridge.h:

2011-05-26  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] simplify TestNetscapePlugIn naming logic
        https://bugs.webkit.org/show_bug.cgi?id=61577

        * WebKit.gyp: drop use of product_prefix, just use the name
        needed directly.

2011-05-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87444.
        http://trac.webkit.org/changeset/87444
        https://bugs.webkit.org/show_bug.cgi?id=61582

        Layout test regressions in Chromium/WebKit: fast/css/first-
        letter-text-fragment-crash.html, fast/css/first-letter-
        visibility.html (Requested by aklein on #webkit).

        * public/WebFrameClient.h:
        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:

2011-05-26  David Levin  <levin@chromium.org>

        Reviewed by Darin Fisher.

        Need a callback for when the preferred rendered size changed.
        https://bugs.webkit.org/show_bug.cgi?id=61309

        * public/WebFrameClient.h
        (WebKit::WebFrameClient::didChangeContentsPreferredSize): Added stub.
        * src/ChromeClientImpl.h:
        (WebKit::ChromeClientImpl::contentsPreferredSizeChanged): Added declaration.
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::contentsPreferredSizeChanged): Added call to WebFrameClient::didChangeContentsPreferredSize.

2011-05-26  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Adam Barth.

        Support cross-origin XMLHttpRequest in isolated worlds
        https://bugs.webkit.org/show_bug.cgi?id=59843

        Expose setIsolatedWorldSecurityOrigin in the WebFrame API.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setIsolatedWorldSecurityOrigin):
        * src/WebFrameImpl.h:

2011-05-26  Michael Nordman  <michaeln@google.com>

        Reviewed by Darin Fisher.

        [Chromium] Use SecurityOrigin produced databaseIdentifier strings, instead of
        SecurityOrigin RefPtrs, as the top level key into the DatabaseTracker's
        collection of open databases. Otherwise we can fail to lookup databases when
        trying to forceably close them via  WebDatabase::closeDatabaseImmediately.
        https://bugs.webkit.org/show_bug.cgi?id=61417

        * src/WebDatabase.cpp:
        (WebKit::WebDatabase::closeDatabaseImmediately):

2011-05-26  Sailesh Agrawal  <sail@chromium.org>

        Reviewed by Tony Chang.

        Expose willStartLiveResize and willEndLiveResize in WebWidget
        https://bugs.webkit.org/show_bug.cgi?id=60518

        * public/WebWidget.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::willStartLiveResize):
        (WebKit::WebPopupMenuImpl::willEndLiveResize):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::willStartLiveResize):
        (WebKit::WebViewImpl::willEndLiveResize):
        * src/WebViewImpl.h:

2011-05-25  Shishir Agrawal  <shishir@chromium.org>

        Reviewed by Dimitri Glazkov.

        Fix crash in Chromium memory test.
        https://bugs.webkit.org/show_bug.cgi?id=61451

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):

2011-05-25  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87333.
        http://trac.webkit.org/changeset/87333
        https://bugs.webkit.org/show_bug.cgi?id=61488

        Breaks Chromium build due to pure virtual methods. (Requested
        by aklein on #webkit).

        * public/WebWidget.h:
        * src/WebPopupMenuImpl.cpp:
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:

2011-05-25  Sailesh Agrawal  <sail@chromium.org>

        Reviewed by Darin Fisher.

        Expose willStartLiveResize and willEndLiveResize in WebWidget
        https://bugs.webkit.org/show_bug.cgi?id=60518

        * public/WebWidget.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::willStartLiveResize):
        (WebKit::WebPopupMenuImpl::willEndLiveResize):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::willStartLiveResize):
        (WebKit::WebViewImpl::willEndLiveResize):
        * src/WebViewImpl.h:

2011-05-25  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87257.
        http://trac.webkit.org/changeset/87257
        https://bugs.webkit.org/show_bug.cgi?id=61457

        This broke layout tests, see bug 61431. (Requested by
        hwennborg on #webkit).

        * public/WebIDBFactory.h:
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::WebIDBFactoryImpl):
        (WebKit::WebIDBFactoryImpl::open):
        * src/WebIDBFactoryImpl.h:

2011-05-24  Keishi Hattori  <keishi@webkit.org>

        Reviewed by Kent Tamura.

        Disable textfield implementation of <input type=color>. Add INPUT_COLOR feature flag. Add input color sanitizer.
        https://bugs.webkit.org/show_bug.cgi?id=61273

        * features.gypi: Added INPUT_COLOR feature flag.

2011-05-24  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Add FIXME comments about removing FrameLoader::isProcessingUserGesture
        https://bugs.webkit.org/show_bug.cgi?id=61395

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidNavigateWithinPage):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::isProcessingUserGesture):

2011-05-24  Greg Simon  <gregsimon@chromium.org>

        Reviewed by Dimitri Glazkov.

        Control Indexeddb backends from LayoutTestController
        https://bugs.webkit.org/show_bug.cgi?id=61000

        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::setEnableMigration):
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::setEnableMigration):
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactory::setOverrideBackingStoreType):
        (WebKit::WebIDBFactory::setTemporaryDatabaseFolder):
        (WebKit::WebIDBFactoryImpl::WebIDBFactoryImpl):
        (WebKit::WebIDBFactoryImpl::open):
        (WebKit::WebIDBFactoryImpl::setEnableMigration):
        * src/WebIDBFactoryImpl.h:

2011-05-24  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Adam Barth.

        Adding MHTML reading support to WebCore.
        https://bugs.webkit.org/show_bug.cgi?id=7168

       * features.gypi:

2011-05-24  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Enable skia gpu rendering for content layers
        https://bugs.webkit.org/show_bug.cgi?id=56749

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::reallocateRenderer):

2011-05-24  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: Reorganize InspectorBackendDispatch code to eliminate duplication
        https://bugs.webkit.org/show_bug.cgi?id=61300

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::shouldInterruptForMessage):

2011-05-23  Gavin Peters  <gavinp@chromium.org>

        Reviewed by Adam Barth.

        fix rel=prerender target types
        https://bugs.webkit.org/show_bug.cgi?id=61297

        The original fix in https://bugs.webkit.org/show_bug.cgi?id=61079
        didn't properly map the target type, and didn't carry the target
        types through to chromium properly.  Fixed.

        No new tests; it's very hard to catch these with a layout test, however
        all of the chromium Prerender browser tests will test this functionality
        when I land an upcoming chromium CL.

        * public/WebURLRequest.h:

2011-05-23  Tony Chang  <tony@chromium.org>

        Reviewed by James Robinson.

        [chromium] Link tcmalloc to DRT so we can use the heap checker
        https://bugs.webkit.org/show_bug.cgi?id=61292

        * WebKit.gyp:

2011-05-23  Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        [chromium] Fix division by zero in TilingData for boundary case texture sizes
        https://bugs.webkit.org/show_bug.cgi?id=61164

        Add additional tests for small max texture sizes.

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-05-23  Ruben  <chromium@hybridsource.org>

        Reviewed by Tony Chang.

        Chromium gyp patch to use new POSIX defines toolkit_uses_gtk and os_posix
        https://bugs.webkit.org/show_bug.cgi?id=61219

        * WebKit.gyp:
        * WebKit.gypi:

2011-05-23  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: provide initial implementation of worker inspector transport
        https://bugs.webkit.org/show_bug.cgi?id=60267

        WebWorker and WebWorkerClient are extended with methods for passing
        DevTools messages between worker context inspector and page inspector.

        * public/WebWorker.h:
        (WebKit::WebWorker::attachDevTools):
        (WebKit::WebWorker::detachDevTools):
        (WebKit::WebWorker::dispatchDevToolsMessage):
        * public/WebWorkerClient.h:
        (WebKit::WebWorkerClient::dispatchDevToolsMessage):
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::postMessageToPageInspector):
        (WebKit::WebWorkerBase::postMessageToPageInspectorTask):
        * src/WebWorkerBase.h:
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::WebWorkerClientImpl):
        (WebKit::WebWorkerClientImpl::connectToInspector):
        (WebKit::WebWorkerClientImpl::disconnectFromInspector):
        (WebKit::WebWorkerClientImpl::sendMessageToInspector):
        (WebKit::WebWorkerClientImpl::dispatchDevToolsMessage):
        * src/WebWorkerClientImpl.h:
        * src/WebWorkerImpl.cpp:
        (WebKit::WebWorkerImpl::startWorkerContext):
        (WebKit::connectToWorkerContextInspectorTask):
        (WebKit::WebWorkerImpl::attachDevTools):
        (WebKit::disconnectFromWorkerContextInspectorTask):
        (WebKit::WebWorkerImpl::detachDevTools):
        (WebKit::dispatchOnInspectorBackendTask):
        (WebKit::WebWorkerImpl::dispatchDevToolsMessage):
        * src/WebWorkerImpl.h:

2011-05-22  Greg Simon  <gregsimon@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Updating chromium DEPS

        https://bugs.webkit.org/show_bug.cgi?id=61236

        * DEPS:

2011-05-21  Jochen Eisinger  <jochen@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] add extraData field to resource requests
        https://bugs.webkit.org/show_bug.cgi?id=61033

        * WebKit.gypi:
        * public/WebURLRequest.h:
        (WebKit::WebURLRequest::ExtraData::~ExtraData):
        * src/WebURLRequest.cpp:
        (WebKit::WebURLRequest::extraData):
        (WebKit::WebURLRequest::setExtraData):
        * tests/WebURLRequestTest.cpp: Added.
        (WebKit::TestExtraData::TestExtraData):
        (WebKit::TestExtraData::~TestExtraData):
        (WebKit::TEST):

2011-05-20  Michael Nordman  <michaeln@google.com>

        Reviewed by Darin Fisher.

        Changes to allow the WebDatabase system to participate in Chrome's unified quota
        management system. Now that changes outside of the database system affect the space
        available to the database system, we need new ways of getting the limit to renderers.

        Split WebDatabase::updateDatabaseSizeAndSpaceAvailable() into three methods.
        - WebDatabase::updateDatababaseSize()
        - WebDatabase::updateSpaceAvailable()
        - WebDatabase::resetSpaceAvailable()
        The WebDatabase methods are used to 'push' size and space available info into renderers.
        The space available can change independently of a database having changed size.

        Also provide a means for the renderer to 'pull' the space available from the main
        process if that value has not been pushed into it.
        - WebCore::PlatformBridge::databaseGetSpaceAvailableForOrigin()
        - WebKit::WebKitClient::databaseGetSpaceAvailableForOrigin()

        https://bugs.webkit.org/show_bug.cgi?id=60985

        * public/WebDatabase.h:
        * public/WebKitClient.h:
        (WebKit::WebKitClient::databaseGetSpaceAvailableForOrigin):
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::databaseGetSpaceAvailableForOrigin):
        * src/WebDatabase.cpp:
        (WebKit::WebDatabase::updateDatabaseSize):
        (WebKit::WebDatabase::updateSpaceAvailable):
        (WebKit::WebDatabase::resetSpaceAvailable):

2011-05-20  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Sam Weinig.

        numberOfActiveAnimations() can include animations from documents in the page cache
        https://bugs.webkit.org/show_bug.cgi?id=53641

        Pass the Frame's document as the one to count animations on.

        * src/WebAnimationControllerImpl.cpp:
        (WebKit::WebAnimationControllerImpl::numberOfActiveAnimations):

2011-05-19  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] remove <(library) variable
        https://bugs.webkit.org/show_bug.cgi?id=61158

        This was for a build experiment; we can just use the correct value now.

        * WebKit.gyp:

2011-05-20  Vitaly Repeshko  <vitalyr@chromium.org>

        Unreviewed.

        [chromium] Updating chromium DEPS.

        * DEPS:

2011-05-19  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r86869, r86873, r86875, and r86877.
        http://trac.webkit.org/changeset/86869
        http://trac.webkit.org/changeset/86873
        http://trac.webkit.org/changeset/86875
        http://trac.webkit.org/changeset/86877
        https://bugs.webkit.org/show_bug.cgi?id=61139

        broke builds and debug DRT (Requested by rniwa on #webkit).

        * WebKit.gyp:
        * public/WebTestingSupport.h: Removed.
        * src/WebTestingSupport.cpp: Removed.

2011-05-18  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Darin Adler.

        Add build logistics and plumbing for window.internals object.
        https://bugs.webkit.org/show_bug.cgi?id=60313

        * WebKit.gyp: Added linking new webkit_test_support library.
        * public/WebTestingSupport.h: Added.
        * src/WebTestingSupport.cpp: Added.

2011-05-19  Kenichi Ishibashi  <bashi@chromium.org>

        Reviewed by Kent Tamura.

        [Chromium] IME candidate window appears wrong position in an iframe
        https://bugs.webkit.org/show_bug.cgi?id=61023

        Always adjusts the range to window relative coordinates.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::firstRectForCharacterRange): Removed condition
        which excludes editable selectionRoot from adjusting.

2011-05-18  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Add histograms for paint times
        https://bugs.webkit.org/show_bug.cgi?id=61010

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::layout):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImplContentPainter::paint):

2011-05-17  MORITA Hajime  <morrita@google.com>

        Reviewed by Tony Chang.

        [Refactoring] Member variables of DocumentMarker should be encapsulated.        
        https://bugs.webkit.org/show_bug.cgi?id=56814

        Moved addMarker() implementation to
        WebCore::DocumentMarkerController::addTextMatchMarker().
        
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMarker):

2011-05-18  Alok Priyadarshi  <alokp@chromium.org> and Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        Split canvas from LayerTilerChromium
        https://bugs.webkit.org/show_bug.cgi?id=60719

        * src/WebViewImpl.cpp:

2011-05-18  Brett Wilson  <brettw@chromium.org>

        Reviewed by Adam Barth.

        Don't create empty file objects if no download file path is specified.
        https://bugs.webkit.org/show_bug.cgi?id=60798

        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponse::setDownloadFilePath):

2011-05-17  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] Enable detailed heap snapshots by default.
        https://bugs.webkit.org/show_bug.cgi?id=60286

        * src/js/DevTools.js:
        ():

2011-05-17  Tao Bai  <michaelbai@chromium.org>

        Reviewed by Darin Fisher.

        Clear deprecated icon APIs from chromium port.
        https://bugs.webkit.org/show_bug.cgi?id=60989

        * public/WebFrame.h: Removed faviconURL()
        * public/WebFrameClient.h: Removed didChangeIcons()
        * src/FrameLoaderClientImpl.cpp:
             Removed the code to support deprecated API
        (WebKit::FrameLoaderClientImpl::dispatchDidChangeIcons):
        * src/WebFrameImpl.cpp: Removed faviconURL()
        * src/WebFrameImpl.h:  Removed faviconURL()

2011-05-17  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Ryosuke Niwa.

        [chromium] Clipboard policy callbacks from EditorClientImpl are reversed
        https://bugs.webkit.org/show_bug.cgi?id=60994

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::canCopyCut):
        (WebKit::EditorClientImpl::canPaste):

2011-05-17  Andrew Wilson  <atwilson@chromium.org>

        Unreviewed, rolling out r86647.
        http://trac.webkit.org/changeset/86647
        https://bugs.webkit.org/show_bug.cgi?id=56814

        Broke tests downstream in Chromium

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMarker):

2011-05-17  Yufeng Shen  <miletus@chromium.org>

        Reviewed by Darin Fisher.

        Make WebKit expose extra touch information
        https://bugs.webkit.org/show_bug.cgi?id=59030

        * public/WebTouchPoint.h:
        (WebKit::WebTouchPoint::WebTouchPoint):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformTouchPointBuilder::PlatformTouchPointBuilder):

2011-05-16  James Robinson  <jamesr@chromium.org>

        Reviewed by Kenneth Russell.
        https://bugs.webkit.org/show_bug.cgi?id=58830

        Add unit tests for the compositor's TreeSynchronizer.

        * WebKit.gypi:
        * tests/TreeSynchronizerTest.cpp: Added.
        (WebCore::MockCCLayerImpl::create):
        (WebCore::MockCCLayerImpl::~MockCCLayerImpl):
        (WebCore::MockCCLayerImpl::setCCLayerDestructionList):
        (WebCore::MockCCLayerImpl::MockCCLayerImpl):
        (WebCore::MockLayerChromium::create):
        (WebCore::MockLayerChromium::~MockLayerChromium):
        (WebCore::MockLayerChromium::createCCLayerImpl):
        (WebCore::MockLayerChromium::pushPropertiesTo):
        (WebCore::MockLayerChromium::MockLayerChromium):
        (WebCore::expectTreesAreIdentical):
        (WebCore::TEST):

2011-05-16  MORITA Hajime  <morrita@google.com>

        Reviewed by Tony Chang.

        [Refactoring] Member variables of DocumentMarker should be encapsulated.        
        https://bugs.webkit.org/show_bug.cgi?id=56814

        Moved addMarker() implementation to
        WebCore::DocumentMarkerController::addTextMatchMarker().
        
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMarker):

2011-05-16  Andrew Wilson  <atwilson@chromium.org>

        Unreviewed, rolling out r86625.
        http://trac.webkit.org/changeset/86625
        https://bugs.webkit.org/show_bug.cgi?id=60719

        Caused failed assertion on Chromium gpu canary bots

        * src/WebViewImpl.cpp:

2011-05-16  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Split canvas from LayerTilerChromium
        https://bugs.webkit.org/show_bug.cgi?id=60719

        * src/WebViewImpl.cpp:

2011-05-13  Jon Lee  <jonlee@apple.com>

        Reviewed by Simon Fraser.

        Can't horizontally scroll iframes and overflow because wheel events are always accepted
        https://bugs.webkit.org/show_bug.cgi?id=60779

        * src/ChromeClientImpl.h:
        (WebKit::ChromeClientImpl::shouldRubberBandInDirection): Default impl of new ChromeClient method
        (WebKit::ChromeClientImpl::numWheelEventHandlersChanged): Default impl of new ChromeClient method

2011-05-13  Tao Bai  <michaelbai@chromium.org>

        Reviewed by Darin Fisher.

        Handle the touch icon.
        https://bugs.webkit.org/show_bug.cgi?id=60247

        Added WebIconURL for the corresponding IconURL.
        Added method iconURLs() to specify the type of icon need to return.
        The favIconURL() is deprecated and will be removed later. 

        * WebKit.gyp:
        * features.gypi:
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didChangeIcons):
        * public/WebIconURL.h: Added.
        (WebKit::WebIconURL::WebIconURL):
        (WebKit::WebIconURL::iconType):
        (WebKit::WebIconURL::iconURL):
        * src/AssertMatchingEnums.cpp:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidChangeIcons):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::favIconURL):
        * src/WebFrameImpl.h:

2011-05-13  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Prune #includes from FrameView.h (Part 2)
        https://bugs.webkit.org/show_bug.cgi?id=60748

        - Update files that were depending on FrameView.h #including Frame.h or
          Page.h.

        * src/AutoFillPopupMenuClient.cpp:
        * src/PlatformBridge.cpp:
        * src/WebPopupMenuImpl.cpp:

2011-05-13  Brett Wilson  <brettw@chromium.org>

        Reviewed by Adam Barth.

        Don't destroy a null FcPattern when failing to do a FontConfig match.
        This crashes, and there's nothing FcDestroy could do with a null
        pointer even if it didn't crash.
        https://bugs.webkit.org/show_bug.cgi?id=60777

        * src/gtk/WebFontInfo.cpp:
        (WebKit::WebFontInfo::renderStyleForStrike):

2011-05-11  Hans Wennborg  <hans@chromium.org>

        Reviewed by Tony Gentilcore.

        IndexedDB: Fix integer comparison bug in LevelDB coding routines
        https://bugs.webkit.org/show_bug.cgi?id=60623

        Unit test for comparison of encoded keys.

        * tests/IDBLevelDBCodingTest.cpp:
        (IDBLevelDBCoding::TEST):

2011-05-05  Hans Wennborg  <hans@chromium.org>

        Reviewed by Steve Block.

        IndexedDB: Transaction rollback prevented by open SQLite statement
        https://bugs.webkit.org/show_bug.cgi?id=60032

        Implement two new methods in IDBTransactionBackendInterface.

        * src/IDBTransactionBackendProxy.cpp:
        (WebKit::IDBTransactionBackendProxy::registerOpenCursor):
        (WebKit::IDBTransactionBackendProxy::unregisterOpenCursor):
        * src/IDBTransactionBackendProxy.h:

2011-05-13  Patrick Gansterer  <paroga@webkit.org>

        Reviewed by Adam Barth.

        Enable OwnPtr strict mode in MediaPlayer
        https://bugs.webkit.org/show_bug.cgi?id=59466

        Let the CreateMediaEnginePlayer function return a PassOwnPtr instead of a raw pointer.
        Also fix the templete argument of OwnPtr for the m_private member variable.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::create):
        * src/WebMediaPlayerClientImpl.h:

2011-05-12  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [Chromium] Add a WebSetting to control DNS prefetch
        https://bugs.webkit.org/show_bug.cgi?id=60736

        DNS prefetch got disabled in Chrome accidentially in
        http://trac.webkit.org/changeset/74041.  This patch adds a WebSettings
        API so we can enable it again.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setDNSPrefetchingEnabled):
        * src/WebSettingsImpl.h:

2011-05-11  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make openFileSystem check for permission first
        https://bugs.webkit.org/show_bug.cgi?id=60683

        * public/WebCommonWorkerClient.h:
        (WebKit::WebCommonWorkerClient::allowFileSystem):
        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowFileSystem):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemNotAllowed):
        (WebCore::openFileSystemHelper):
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::allowFileSystem):
        * src/WebWorkerBase.h:
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::allowFileSystem):

2011-05-12  Nikolas Zimmermann  <nzimmermann@rim.com>

        Reviewed by Darin Adler.

        String operator+ reallocates unnecessarily when concatting > 2 strings
        https://bugs.webkit.org/show_bug.cgi?id=58420

        Provide a faster String append operator. See Source/JavaScriptCore/ChangeLog for details.

        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::keyboardShortcut): Cast to String first, before trying to convert to platform dependant type.
        * src/WebHTTPLoadInfo.cpp:
        (WebKit::addHeader): Don't pass WebString to makeString, explicit cast to String first.
        * tests/IDBLevelDBCodingTest.cpp: Cast to String first, to avoid conflicting with gtests global templatified operator+.
        (IDBLevelDBCoding::TEST):

2011-05-10  Tony Gentilcore  <tonyg@chromium.org>

        Reviewed by Darin Adler.

        Perform some forward declarations suggested by include-what-you-use
        https://bugs.webkit.org/show_bug.cgi?id=60545

        * src/WebHistoryItem.cpp:
        * src/WebNotification.cpp:
        * src/WebTextCheckingCompletionImpl.cpp:
        * src/mac/WebSubstringUtil.mm:

2011-05-11  Levi Weintraub  <leviw@chromium.org>

        Reviewed by Eric Seidel.

        Rename Widget::pos()
        https://bugs.webkit.org/show_bug.cgi?id=60575

        Renaming Widget::pos() to the more-descriptive location().

        * src/WebInputEventConversion.cpp:
        (WebKit::WebMouseEventBuilder::WebMouseEventBuilder):
        (WebKit::WebMouseWheelEventBuilder::WebMouseWheelEventBuilder):

2011-05-11  Antoine Labour  <piman@chromium.org>

        Reviewed by David Levin.

        Don't buffer data for resources loaded by AssociatedURLLoader.
        https://bugs.webkit.org/show_bug.cgi?id=60656

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::loadAsynchronously): set shouldBufferData to false in ThreadableLoaderOptions

2011-05-11  Nat Duca  <nduca@chromium.org>

        Reviewed by Kenneth Russell.

        [chromium] Make throttling of WebGL based on webgl frames, not compositor frames
        https://bugs.webkit.org/show_bug.cgi?id=60508

        Tell LayerRendererChromium when the requestAnimFrame-callbacks are running.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::rateLimitOffscreenContextCHROMIUM):
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::rateLimitOffscreenContextCHROMIUM):
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DInternal.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):

2011-05-11  John Bauman  <jbauman@chromium.org>

        Reviewed by Kenneth Russell.

        Don't send zeros in TexImage if GL implementation handles that
        https://bugs.webkit.org/show_bug.cgi?id=60581

        Chromium already handles zeroing textures upon creation, so don't
        bother zeroing them in WebKit, as that causes some unnecessary memcpys
        of zeros.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3D::create):

2011-05-10  Kent Tamura  <tkent@chromium.org>

        Reviewed by Hajime Morita.

        [Chromium] Fix a bug of WebFrameImpl::forms()
        https://bugs.webkit.org/show_bug.cgi?id=60606

        If document()->forms() contained non-HTML element, the second for
        loop didn't stop.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::forms): Simplify the function by wtf::Vector().

2011-05-10  Ilya Tikhonovsky  <loislo@chromium.org>

        Unreviewed buildfix for strict OwnPtr patch.

        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::loadPlatformAudioResource):
        (WebCore::PlatformBridge::decodeAudioFileData):

2011-05-06  Brett Wilson  <brettw@chromium.org>

        Reviewed by Adam Barth.

        Use a File object to store the downloaded file reference rather than
        just the path. This keeps the file and permissions in scope (using the
        already-existing blob system) so the browser won't delete the file
        when the load is complete. Instead, the file will be cleaned up when
        the request objects are deleted.
        https://bugs.webkit.org/show_bug.cgi?id=60281

        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponse::downloadFilePath):
        (WebKit::WebURLResponse::setDownloadFilePath):

2011-05-10  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: [Chromium] Drop obsolete test code for the Profiles panel.
        https://bugs.webkit.org/show_bug.cgi?id=60471

        * src/js/Tests.js:

2011-05-10  Adam Barth  <abarth@webkit.org>

        Attempt to fix the clang build.

        * src/WebDevToolsAgentImpl.cpp:

2011-05-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r86091.
        http://trac.webkit.org/changeset/86091
        https://bugs.webkit.org/show_bug.cgi?id=60510

        Broke Chromium win release build. (Requested by dave_levin on
        #webkit).

        * WebKit.gyp:
        * features.gypi:
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didChangeIcons):
        * public/WebIconURL.h: Removed.
        * src/AssertMatchingEnums.cpp:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidChangeIcons):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::favIconURL):
        * src/WebFrameImpl.h:

2011-05-09  Tao Bai  <michaelbai@chromium.org>

        Reviewed by David Levin.

        Handle the touch icon.
        https://bugs.webkit.org/show_bug.cgi?id=60247

        Added WebIconURL for the corresponding IconURL.
        Added method iconURLs() to specify the type of icon need to return.
        The favIconURL() is deprecated.

        * WebKit.gyp:
        * features.gypi:
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didChangeIcons):
        * public/WebIconURL.h: Added.
        (WebKit::WebIconURL::WebIconURL):
        * src/AssertMatchingEnums.cpp:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidChangeIcons):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::favIconURL):
        * src/WebFrameImpl.h:

2011-05-09  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] make DumpRenderTree build in components for linux
        https://bugs.webkit.org/show_bug.cgi?id=60491

        * WebKit.gyp: move some code that was in a Windows-only block to be used
        on all platforms.

2011-05-09  Adam Barth  <abarth@webkit.org>

        Reviewed by Tony Gentilcore.

        Make Chromium build with strict PassOwnPtr
        https://bugs.webkit.org/show_bug.cgi?id=60461

        Fixed many, many PassOwnPtr nits.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::autofill):
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::createObjectStore):
        (WebKit::IDBDatabaseBackendProxy::transaction):
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::createIndex):
        (WebKit::IDBObjectStoreBackendProxy::index):
        * src/IDBTransactionBackendProxy.cpp:
        (WebKit::IDBTransactionBackendProxy::objectStore):
        * src/PlatformMessagePortChannel.cpp:
        (WebCore::MessagePortChannel::create):
        (WebCore::PlatformMessagePortChannel::tryGetMessageFromRemote):
        * src/SharedWorkerRepository.cpp:
        (WebCore::SharedWorkerRepository::connect):
        * src/SocketStreamHandle.cpp:
        (WebCore::SocketStreamHandleInternal::create):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::DebuggerTask::DebuggerTask):
        (WebKit::DebuggerTask::~DebuggerTask):
        (WebKit::DebuggerTask::run):
        (WebKit::WebDevToolsAgent::interruptAndDispatch):
        * src/WebDevToolsFrontendImpl.cpp:
        (WebKit::WebDevToolsFrontendImpl::WebDevToolsFrontendImpl):
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onSuccess):
        * src/WebIDBCursorImpl.cpp:
        (WebKit::WebIDBCursorImpl::update):
        (WebKit::WebIDBCursorImpl::continueFunction):
        (WebKit::WebIDBCursorImpl::deleteFunction):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::setVersion):
        (WebKit::WebIDBDatabaseImpl::open):
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):
        * src/WebIDBIndexImpl.cpp:
        (WebKit::WebIDBIndexImpl::openObjectCursor):
        (WebKit::WebIDBIndexImpl::openKeyCursor):
        (WebKit::WebIDBIndexImpl::getObject):
        (WebKit::WebIDBIndexImpl::getKey):
        * src/WebIDBObjectStoreImpl.cpp:
        (WebKit::WebIDBObjectStoreImpl::get):
        (WebKit::WebIDBObjectStoreImpl::put):
        (WebKit::WebIDBObjectStoreImpl::deleteFunction):
        (WebKit::WebIDBObjectStoreImpl::clear):
        (WebKit::WebIDBObjectStoreImpl::openCursor):
        * src/WebIDBTransactionImpl.cpp:
        (WebKit::WebIDBTransactionImpl::setCallbacks):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::loadFrameRequest):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setDevToolsAgentClient):
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::postMessageToWorkerObject):
        * src/WebWorkerImpl.cpp:
        (WebKit::WebWorkerImpl::postMessageToWorkerContext):
        * src/WorkerFileWriterCallbacksBridge.cpp:
        (WebKit::WorkerFileWriterCallbacksBridge::initOnMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::didWrite):
        (WebKit::WorkerFileWriterCallbacksBridge::didFail):
        (WebKit::WorkerFileWriterCallbacksBridge::didTruncate):

2011-05-09  Shishir Agrawal  <shishir@chromium.org>

        Reviewed by Tony Gentilcore.

        Implement Page Visibility API.
        https://bugs.webkit.org/show_bug.cgi?id=54181

        * WebKit.gyp:
        * public/WebPageVisibilityState.h: Added.
        * public/WebView.h:
        (WebKit::WebView::setVisibilityState):
        * public/WebViewClient.h:
        (WebKit::WebViewClient::visibilityState):
        * src/AssertMatchingEnums.cpp:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setVisibilityState):
        * src/WebViewImpl.h:

2011-05-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r85974.
        http://trac.webkit.org/changeset/85974
        https://bugs.webkit.org/show_bug.cgi?id=60444

        broke browser tests (Requested by inferno-sec on #webkit).

        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponse::downloadFilePath):
        (WebKit::WebURLResponse::setDownloadFilePath):

2011-05-06  Kent Tamura  <tkent@chromium.org>

        Reviewed by Ryosuke Niwa.

        Eliminate WebCore/dom/InputElement.{cpp,h}
        https://bugs.webkit.org/show_bug.cgi?id=60262

        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::defaultMaxLength):
          Replace InputElement::s_maximumLength with HTMLInputElement::maximumLength.
        (WebKit::toWebInputElement):
          Follow the return type change of Node::toInputElement().

2011-05-06  Justin Schuh  <jschuh@chromium.org>

        Reviewed by Adam Barth.

        [Chromium] Whitelist input events interpreted as user gestures
        https://bugs.webkit.org/show_bug.cgi?id=60213

        * public/WebInputEvent.h:
        (WebKit::WebInputEvent::isUserGestureEventType):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):

2011-05-06  Brett Wilson  <brettw@chromium.org>

        Reviewed by Adam Barth.

        Use a File object to store the downloaded file reference rather than
        just the path. This keeps the file and permissions in scope (using the
        already-existing blob system) so the browser won't delete the file
        when the load is complete. Instead, the file will be cleaned up when
        the request objects are deleted.
        https://bugs.webkit.org/show_bug.cgi?id=60281

        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponse::downloadFilePath):
        (WebKit::WebURLResponse::setDownloadFilePath):

2011-05-06  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by James Robinson.

        [chromium]: Reland using WebPermissionClient for checking indexed db usage
        https://bugs.webkit.org/show_bug.cgi?id=60386

        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowIndexedDB):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::open):

2011-05-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r85919.
        http://trac.webkit.org/changeset/85919
        https://bugs.webkit.org/show_bug.cgi?id=60378

        broke chromium database tests (Requested by inferno-sec on
        #webkit).

        * public/WebPermissionClient.h:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::open):

2011-05-04  Philippe Normand  <pnormand@igalia.com>

        Reviewed by Dimitri Glazkov.

        Implement LayoutTestController::pseudoShadowId()
        https://bugs.webkit.org/show_bug.cgi?id=60034

        * public/WebElement.h:
        * src/WebElement.cpp:
        (WebKit::WebElement::shadowPseudoId):

2011-05-05  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make IndexedDB code use WebPermissionClient API
        https://bugs.webkit.org/show_bug.cgi?id=60340

        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowIndexedDB):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::open):

2011-05-05  Adam Barth  <abarth@webkit.org>

        Roll Chromium DEPS.

        * DEPS:

2011-05-05  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Eric Seidel.

        Rename SelectionController to FrameSelection
        https://bugs.webkit.org/show_bug.cgi?id=60234

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::selectWordAroundCaret):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::textInputType):
        (WebKit::WebViewImpl::caretOrSelectionBounds):
        (WebKit::WebViewImpl::caretOrSelectionRange):
        (WebKit::WebViewImpl::clearFocusedNode):

2011-05-03  Hans Wennborg  <hans@chromium.org>

        Reviewed by Steve Block.

        IndexedDB: Unit tests for LevelDB key coding functions
        https://bugs.webkit.org/show_bug.cgi?id=59692

        Add unit tests for the basic key coding functions used by the LevelDB back-end.

        * WebKit.gypi:
        * tests/IDBLevelDBCodingTest.cpp: Added.
        (IDBLevelDBCoding::TEST):

2011-05-04  MORITA Hajime  <morrita@google.com>

        Unreviewed unit test skip (startPostAndWaitOnCondition)
        which fails on Windows 7. See bug 60248 for tracking.
        
        * tests/CCThreadTest.cpp:
        (WebCore::TEST):

2011-05-04  Cris Neckar  <cdn@chromium.org>

        Reviewed by Adam Barth.

        Expose WebView directly through ChromeClient.
        https://bugs.webkit.org/show_bug.cgi?id=49902

        * src/AutoFillPopupMenuClient.cpp:
        (WebKit::AutoFillPopupMenuClient::getWebView):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::webView):
        * src/ChromeClientImpl.h:
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):
        * src/PlatformBridge.cpp:
        (WebCore::toWebWidgetClient):
        * src/StorageNamespaceProxy.cpp:
        (WebCore::StorageNamespace::sessionStorageNamespace):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::fromPage):

2011-05-04  Nate Chapin  <japhet@chromium.org>

        Reviewed by Mihai Parparita.

        Ensure we don't overwrite user-specified scroll positions
        on same document HistoryItem navigations.
        https://bugs.webkit.org/show_bug.cgi?id=59877

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadHistoryItem):
        (WebKit::WebFrameImpl::currentHistoryItem):
        (WebKit::WebFrameImpl::WebFrameImpl):
        * src/WebFrameImpl.h:

2011-05-04  Tao Bai  <michaelbai@chromium.org>

        Reviewed by David Kilzer.

        Populate touch-icon url to FrameLoaderClient
        https://bugs.webkit.org/show_bug.cgi?id=59143

        Respected the change of FrameLoaderClient.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidChangeIcons):
        * src/FrameLoaderClientImpl.h:

2011-05-04  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Ojan Vafai.

        Send the char events to the select popup if one is showing to fix
        a bug were pressing a letter would not select the matching option.
        https://bugs.webkit.org/show_bug.cgi?id=47769

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::keyEvent):
        (WebKit::WebViewImpl::charEvent):
        * src/WebViewImpl.h:

2011-05-03  Justin Novosad  <junov@chromium.org>

        Reviewed by Kenneth Russell.

        [Chromium] Make accelerated 2d canvas enabled by default with skia
        https://bugs.webkit.org/show_bug.cgi?id=59929
        Added new flag for enabling the legacy accelerated 2d canvas
        The flag is not yet functional with this change.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setLegacyAccelerated2dCanvasEnabled):
        * src/WebSettingsImpl.h:

2011-05-03  Alpha Lam  <hclam@chromium.org>

        Not reviewed. Build fix.

        More 0 to nullptr.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::pluginLoadObserver):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3D::~GraphicsContext3D):
        * src/WebAudioBus.cpp:
        (WebKit::WebAudioBus::release):
        * src/WebBlobData.cpp:
        (WebKit::WebBlobData::reset):
        * src/WebViewImpl.cpp:
        (WebKit::WebView::addUserScript):
        (WebKit::WebView::addUserStyleSheet):

2011-05-03  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by James Robinson.

        [chromium] Go through WebPermissionClient for local storage access.  Also cleanup left over code from previous WebPermissionClient change.
        https://bugs.webkit.org/show_bug.cgi?id=60066

        * public/WebFrameClient.h:
        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowLocalStorage):
        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowScriptExtension):
        (WebKit::FrameLoaderClientImpl::allowJavaScript):
        (WebKit::FrameLoaderClientImpl::allowPlugins):
        (WebKit::FrameLoaderClientImpl::allowImages):
        (WebKit::FrameLoaderClientImpl::didNotAllowScript):
        (WebKit::FrameLoaderClientImpl::didNotAllowPlugins):
        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::setItem):

2011-05-03  Tony Chang  <tony@chromium.org>

        Unreviewed, rolling the version of chromium to r83922.

        * DEPS:

2011-05-03  Julien Chaffraix  <jchaffraix@codeaurora.org>

        Reviewed by Dimitri Glazkov.

        Element:shadowRoot & Element::ensureShadowRoot should return ShadowRoot*
        https://bugs.webkit.org/show_bug.cgi?id=58703

        * src/WebElement.cpp: Added #include for ShadowRoot.h.

2011-05-02  Adam Klein  <adamk@chromium.org>

        Reviewed by Tony Chang.

        Roll chromium DEPS to r83722, add new crypto directory to DEPS
        https://bugs.webkit.org/show_bug.cgi?id=59992

        * DEPS:

2011-05-02  Adam Roben  <aroben@apple.com>

        Take advantage of implicit conversion from nullptr_t to PassOwnPtr

        Fixes <http://webkit.org/b/59964> Implicit conversion from std::nullptr_t to PassOwnPtr
        doesn't work, but should

        Reviewed by Adam Barth.

        * src/WebMediaPlayerClientImpl.cpp:

2011-05-03  Pavel Feldman  <pfeldman@google.com>

        Not reviewed: re-applied r85589.

        * src/js/DevTools.js:
        (.WebInspector.InspectorFrontendHostStub.prototype.inspectedURLChanged):

2011-05-03  Pavel Feldman  <pfeldman@google.com>

        Reviewed by Yury Semikhatsky.

        Web Inspector: [remote debugging] use document.title to set window name.
        https://bugs.webkit.org/show_bug.cgi?id=60012

        * src/js/DevTools.js:
        (WebInspector.InspectorFrontendHostStub.prototype.inspectedURLChanged):

2011-05-02  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by Dimitri Glazkov.

        Chromium windows build is broken due to r85395
        https://bugs.webkit.org/show_bug.cgi?id=59945
        
        Include SecurityOrigin.h in IDBFactoryBackendProxy.cpp

        * src/IDBFactoryBackendProxy.cpp:

2011-04-30  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Eric Seidel.

        V8Proxy.h shouldn't include SecurityOrigin.h
        https://bugs.webkit.org/show_bug.cgi?id=59859

        Add SecurityOrigin.h includes to places that were relying on transitive
        includes.

        * src/ApplicationCacheHost.cpp:
        * src/WebGeolocationPermissionRequest.cpp:

2011-04-29  Chris Evans  <cevans@chromium.org>

        Reviewed by Adam Barth.

        Add WebCore::Setting to block displaying and/or running insecure content on secure pages
        https://bugs.webkit.org/show_bug.cgi?id=58378

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setAllowDisplayOfInsecureContent):
        (WebKit::WebSettingsImpl::setAllowRunningOfInsecureContent):
        * src/WebSettingsImpl.h:
        Simple plumbing for the new boolean settings.

2011-04-29  Kenneth Russell  <kbr@google.com>

        Unreviewed build fix. Skip WebPageNewSerializerTest.cpp in Windows multi-DLL build.

        * WebKit.gyp:

2011-04-28  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] support components build on Linux
        https://bugs.webkit.org/show_bug.cgi?id=59748

        * WebKit.gyp: adjust tests to not be Windows-specific.
        * public/WebCommon.h: add #defines to support Linux.
        * public/linux/WebFontRenderStyle.h: expose Linux-specific API.
        * tests/RunAllTests.cpp: adjust ifdefs to not be Windows-specific.

2011-04-29  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Chromium DevTools: Fix network panel timing/size/headers tests.
        https://bugs.webkit.org/show_bug.cgi?id=59696

        * src/js/Tests.js:
        (.TestSuite.prototype.testNetworkSize.finishResource):
        (.TestSuite.prototype.testNetworkSyncSize.finishResource):
        (.TestSuite.prototype.testNetworkRawHeadersText.finishResource):
        (.TestSuite.prototype.testNetworkTiming.finishResource):

2011-04-29  Pavel Feldman  <pfeldman@google.com>

        Reviewed by Yury Semikhatsky.

        Web Inspector: add "open link in new tab" action into the network and resources panels.
        https://bugs.webkit.org/show_bug.cgi?id=59788

        This change also distinguishes context menu items case between platforms.

        * src/js/DevTools.js:

2011-04-28  Nat Duca  <nduca@chromium.org>

        Reviewed by Kenneth Russell.

        [chromium] Add swapBuffersCompleteCallback to Extensions3DChromium
        https://bugs.webkit.org/show_bug.cgi?id=59626

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::WebGraphicsSwapBuffersCompleteCallbackCHROMIUM::~WebGraphicsSwapBuffersCompleteCallbackCHROMIUM):
        (WebKit::WebGraphicsContext3D::setSwapBuffersCompleteCallbackCHROMIUM):
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::setSwapBuffersCompleteCallbackCHROMIUM):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::SwapBuffersCompleteCallbackAdapter::~SwapBuffersCompleteCallbackAdapter):
        (WebCore::SwapBuffersCompleteCallbackAdapter::SwapBuffersCompleteCallbackAdapter):
        (WebCore::SwapBuffersCompleteCallbackAdapter::onSwapBuffersComplete):
        (WebCore::SwapBuffersCompleteCallbackAdapter::create):
        (WebCore::GraphicsContext3DInternal::setSwapBuffersCompleteCallbackCHROMIUM):
        * src/GraphicsContext3DInternal.h:
        * src/WebViewImpl.cpp:

2011-04-28  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Fix silly bug with WebPermissionClient
        https://bugs.webkit.org/show_bug.cgi?id=59769

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowJavaScript):
        (WebKit::FrameLoaderClientImpl::allowPlugins):
        (WebKit::FrameLoaderClientImpl::allowImages):

2011-04-28  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Adam Barth.

        Introducing a new API to serialize a WebView back to HTML.
        https://bugs.webkit.org/show_bug.cgi?id=58947

        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serialize):
        * tests/WebPageNewSerializerTest.cpp: Added.
        * tests/data/pageserializer: Added.
        * tests/data/pageserializer/blank_frames.html: Added.
        * tests/data/pageserializer/blue_background.png: Added.
        * tests/data/pageserializer/css_test_page.html: Added.
        * tests/data/pageserializer/green_background.png: Added.
        * tests/data/pageserializer/iframe.html: Added.
        * tests/data/pageserializer/iframe2.html: Added.
        * tests/data/pageserializer/import_style_from_link.css: Added.
        * tests/data/pageserializer/import_styles.css: Added.
        * tests/data/pageserializer/link_styles.css: Added.
        * tests/data/pageserializer/ol-dot.png: Added.
        * tests/data/pageserializer/orange_background.png: Added.
        * tests/data/pageserializer/purple_background.png: Added.
        * tests/data/pageserializer/red_background.png: Added.
        * tests/data/pageserializer/simple.xhtml: Added.
        * tests/data/pageserializer/top_frame.html: Added.
        * tests/data/pageserializer/ul-dot.png: Added.
        * tests/data/pageserializer/yellow_background.png: Added.

2011-04-28  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Add a WebPermissionClient to be used for checking permissions of features
        https://bugs.webkit.org/show_bug.cgi?id=59720

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::allowPlugins):
        (WebKit::WebFrameClient::didNotAllowPlugins):
        (WebKit::WebFrameClient::allowImages):
        (WebKit::WebFrameClient::allowScript):
        (WebKit::WebFrameClient::allowDatabase):
        (WebKit::WebFrameClient::didNotAllowScript):
        * public/WebPermissionClient.h: Added.
        (WebKit::WebPermissionClient::allowDatabase):
        (WebKit::WebPermissionClient::allowImages):
        (WebKit::WebPermissionClient::allowPlugins):
        (WebKit::WebPermissionClient::allowScript):
        (WebKit::WebPermissionClient::allowScriptExtension):
        (WebKit::WebPermissionClient::allowReadFromClipboard):
        (WebKit::WebPermissionClient::allowWriteToClipboard):
        (WebKit::WebPermissionClient::didNotAllowPlugins):
        (WebKit::WebPermissionClient::didNotAllowScript):
        (WebKit::WebPermissionClient::~WebPermissionClient):
        * public/WebView.h:
        * public/WebViewClient.h:
        (WebKit::WebViewClient::didEndEditing):
        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::toggleContinuousSpellChecking):
        (WebKit::EditorClientImpl::canCopyCut):
        (WebKit::EditorClientImpl::canPaste):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowScriptExtension):
        (WebKit::FrameLoaderClientImpl::allowJavaScript):
        (WebKit::FrameLoaderClientImpl::allowPlugins):
        (WebKit::FrameLoaderClientImpl::allowImages):
        (WebKit::FrameLoaderClientImpl::didNotAllowScript):
        (WebKit::FrameLoaderClientImpl::didNotAllowPlugins):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::enableContinuousSpellChecking):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setAutoFillClient):
        (WebKit::WebViewImpl::setPermissionClient):
        (WebKit::WebViewImpl::WebViewImpl):
        * src/WebViewImpl.h:
        (WebKit::WebViewImpl::permissionClient):

2011-04-28  Kenneth Russell  <kbr@google.com>

        Unreviewed fix for Windows multi-DLL build.

        * WebKit.gyp:

2011-04-27  Dmitry Lomov  <dslomov@google.com>

        Reviewed by David Levin.
        
        CrossThreadCopier should not have a default specialization for raw pointers
        https://bugs.webkit.org/show_bug.cgi?id=59234
        Removed the ablity to pass raw pointers cross-thread
        Added and applied annotations for doing that

        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::connect):
        (WebKit::WebSharedWorkerImpl::connectTask):
        * src/WebSharedWorkerImpl.h:
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::postMessageToWorkerObject):
        (WebKit::WebWorkerBase::postExceptionToWorkerObject):
        (WebKit::WebWorkerBase::postConsoleMessageToWorkerObject):
        (WebKit::WebWorkerBase::confirmMessageFromWorkerObject):
        (WebKit::WebWorkerBase::reportPendingActivity):
        (WebKit::WebWorkerBase::workerContextClosed):
        (WebKit::WebWorkerBase::workerContextDestroyed):
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::startWorkerContext):
        (WebKit::WebWorkerClientImpl::terminateWorkerContext):
        (WebKit::WebWorkerClientImpl::postMessageToWorkerContext):
        (WebKit::WebWorkerClientImpl::workerObjectDestroyed):
        (WebKit::WebWorkerClientImpl::postMessageToWorkerObject):
        (WebKit::WebWorkerClientImpl::postExceptionToWorkerObject):
        (WebKit::WebWorkerClientImpl::postConsoleMessageToWorkerObject):
        (WebKit::WebWorkerClientImpl::confirmMessageFromWorkerObject):
        (WebKit::WebWorkerClientImpl::reportPendingActivity):
        * src/WebWorkerImpl.cpp:
        (WebKit::WebWorkerImpl::postMessageToWorkerContext):
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postMoveToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postCopyToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postRemoveToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postRemoveRecursivelyToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postReadMetadataToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postCreateFileToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postCreateDirectoryToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postFileExistsToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postDirectoryExistsToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postReadDirectoryToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didFailOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didOpenFileSystemOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didSucceedOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didReadMetadataOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didReadDirectoryOnMainThread):
        * src/WorkerFileWriterCallbacksBridge.cpp:
        (WebKit::WorkerFileWriterCallbacksBridge::postWriteToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::postTruncateToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::postAbortToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::didWrite):
        (WebKit::WorkerFileWriterCallbacksBridge::didFail):
        (WebKit::WorkerFileWriterCallbacksBridge::didTruncate):
        (WebKit::WorkerFileWriterCallbacksBridge::postInitToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::dispatchTaskToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::dispatchTaskToWorkerThread):
        * tests/CCThreadTest.cpp:
        (WebCore::TEST):

2011-04-27  James Robinson  <jamesr@chromium.org>

        Reviewed by Kenneth Russell.

        [chromium] Ensure compositing layers are up to date before entering doComposite
        https://bugs.webkit.org/show_bug.cgi?id=59159

        Explicitly update and sync the compositing layer data structures for all frames in the tree before entering the
        composite operation so that lazily updated state doesn't mutate the GraphicsLayer tree while compositing.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):

2011-04-27  James Robinson  <jamesr@chromium.org>

        Reviewed by Adam Barth.

        Fix OwnPtr strict issues in chromium linux build
        https://bugs.webkit.org/show_bug.cgi?id=59664

        * src/WebImageDecoder.cpp:
        (WebKit::WebImageDecoder::getFrameAtIndex):
        * src/WebImageSkia.cpp:
        (WebKit::WebImage::fromData):

2011-04-27  Adam Barth  <abarth@webkit.org>

        Reviewed by David Levin.

        Make GraphicsContext3DChromium play nice with strict OwnPtrs
        https://bugs.webkit.org/show_bug.cgi?id=59659

        Attempt #2.  Hopefully this time I won't make everything crash.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):

2011-04-27  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Darin Fisher.

        remove unneeded TestWebWidget class
        https://bugs.webkit.org/show_bug.cgi?id=59573

        * tests/PopupMenuTest.cpp:

2011-04-27  Tony Chang  <tony@chromium.org>

        Reviewed by Ojan Vafai.

        [chromium] add a build target to make a zip file with the inspector debug files
        https://bugs.webkit.org/show_bug.cgi?id=56656

        * WebKit.gyp: Add target
        * scripts/concatenate_css_files.py: Pass in a string of html rather
            than a filename
        * scripts/concatenate_js_files.py: Same as above
        * scripts/generate_devtools_html.py: Refactor main into a helper function
        * scripts/generate_devtools_zip.py: Added.

2011-04-27  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Eric Seidel.

        Frame.h shouldn't include Document.h
        https://bugs.webkit.org/show_bug.cgi?id=59560
        
        Add Document.h #includes for files that were relying on transitive
        #includes via Frame.h.

        * src/LocalFileSystemChromium.cpp:
        * src/StorageEventDispatcherImpl.cpp:
        * src/WebFrameImpl.h:
        * src/WebWorkerBase.cpp:

2011-04-26  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Eric Seidel.

        Typedefing the shared timer function.
        https://bugs.webkit.org/show_bug.cgi?id=59564

        * public/WebKitClient.h:
        (WebKit::WebKitClient::setSharedTimerFiredFunction):

2011-04-26  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, rolling out r84982.
        http://trac.webkit.org/changeset/84982
        https://bugs.webkit.org/show_bug.cgi?id=59558

        re-land r84951

        * WebKit.gyp:
        * public/WebFrame.h:
        * public/WebWidget.h:
        * public/mac/WebSubstringUtil.h: Added.
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::firstRectForCharacterRange):
        (WebKit::WebFrameImpl::characterIndexForPoint):
        * src/WebFrameImpl.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::compositionRange):
        (WebKit::WebPopupMenuImpl::caretOrSelectionRange):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::compositionRange):
        (WebKit::WebViewImpl::caretOrSelectionRange):
        * src/WebViewImpl.h:
        * src/mac/WebSubstringUtil.mm: Added.
        (WebKit::WebSubstringUtil::attributedSubstringInRange):

2011-04-26  Sam Weinig  <sam@webkit.org>

        Reviewed by David Hyatt.

        Remove Datagrid from the tree
        https://bugs.webkit.org/show_bug.cgi?id=59543

        * features.gypi:
        Remove feature.

2011-04-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r84951.
        http://trac.webkit.org/changeset/84951
        https://bugs.webkit.org/show_bug.cgi?id=59558

        "breaks chromium compile" (Requested by dpranke on #webkit).

        * WebKit.gyp:
        * public/WebFrame.h:
        * public/WebWidget.h:
        * public/mac/WebSubstringUtil.h: Removed.
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::firstRectForCharacterRange):
        * src/WebFrameImpl.h:
        * src/WebPopupMenuImpl.cpp:
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:
        * src/mac/WebSubstringUtil.mm: Removed.

2011-04-26  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] Implement EditorClient::canCopyCut and EditorClient::canPaste
        https://bugs.webkit.org/show_bug.cgi?id=59264

        * public/WebViewClient.h:
        (WebKit::WebViewClient::canTriggerClipboardRead):
        (WebKit::WebViewClient::canTriggerClipboardWrite):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::canCopyCut):
        (WebKit::EditorClientImpl::canPaste):

2011-04-26  Evan Martin  <evan@chromium.org>

        Unreviewed, Chrome/Mac build fix.

        * WebKit.gypi: Remove extra file.  (I removed a subtraction, but
        forgot to remove the corresponding addition that the subtraction
        was counteracting.)

2011-04-26  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] refactor duplicated list of test source files
        https://bugs.webkit.org/show_bug.cgi?id=59478

        The platform-specific unit test files were listed twice in
        WebKit.gyp: once for the components build, once for the normal
        build.  Refactor this into the unified webkit_unittest_files
        variable.  (It appears the omission of WebPageSerializerTest
        in one instance was an oversight.)

        * WebKit.gyp:
        * WebKit.gypi:

2011-04-26  Robert Sesek  <rsesek@chromium.org>

        Reviewed by Dimitri Glazkov.

        [Chromium] Implement WebKit methods to assist with Cocoa NSTextInput implementation
        https://bugs.webkit.org/show_bug.cgi?id=54969

        * WebKit.gyp:
        * public/WebFrame.h:
        * public/WebWidget.h:
        * public/mac/WebSubstringUtil.h: Added.
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::firstRectForCharacterRange): Return the result rect in window coordinates
        (WebKit::WebFrameImpl::characterIndexForPoint): New method on WebFrame
        * src/WebFrameImpl.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::compositionRange): New method on WebWidget; empty impl
        (WebKit::WebPopupMenuImpl::caretOrSelectionRange): New method on WebWidget; empty impl
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::compositionRange): New method on WebWidget
        (WebKit::WebViewImpl::caretOrSelectionRange): New method on WebWidget
        * src/WebViewImpl.h:
        * src/mac/WebSubstringUtil.mm: Added.
        (WebKit::WebSubstringUtil::attributedSubstringInRange):

2011-04-26  Adam Barth  <abarth@webkit.org>

        Reviewed by David Levin.

        Moar strict OwnPtr fixes for WebKit/chromium
        https://bugs.webkit.org/show_bug.cgi?id=59437

        This patch fixes all but two strict OwnPtr issues in WebKit/chromium.

        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::setExtraData):
        (WebKit::WebDataSourceImpl::setNextPluginLoadObserver):
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebDataSourceImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::attach):
        (WebKit::WebDevToolsAgentImpl::detach):
        (WebKit::WebDevToolsAgent::interruptAndDispatch):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::printBegin):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::createWebMediaPlayer):
        (WebKit::WebMediaPlayerClientImpl::loadInternal):
        * src/WebSpeechInputControllerMockImpl.cpp:
        (WebKit::WebSpeechInputControllerMockImpl::WebSpeechInputControllerMockImpl):
        * src/WebStorageEventDispatcherImpl.cpp:
        (WebKit::WebStorageEventDispatcherImpl::WebStorageEventDispatcherImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::settings):
        (WebKit::WebViewImpl::applyAutoFillSuggestions):
        (WebKit::WebView::addUserScript):
        (WebKit::WebView::addUserStyleSheet):

2011-04-26  Ruben  <chromium@hybridsource.org>

        Reviewed by Tony Chang.

        Change linux ifdefs for Chromium to Unix instead, allowing
        new Unix ports to be enabled by default
        https://bugs.webkit.org/show_bug.cgi?id=59297

        * src/PlatformBridge.cpp:
        * src/WebFrameImpl.cpp:
        * src/WebViewImpl.cpp:

2011-04-26  Stephen White  <senorblanco@chromium.org>

        Reviewed by Kenneth Russell.

        Partial revert of http://trac.webkit.org/changeset/84893, since it
        triggered a large number of layout test failures.
        https://bugs.webkit.org/show_bug.cgi?id=59459

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):

2011-04-26  Hans Wennborg  <hans@chromium.org>

        Reviewed by Tony Gentilcore.

        IndexedDB: Enable compile-time flag for LevelDB
        https://bugs.webkit.org/show_bug.cgi?id=59457

        Set ENABLE_LEVELDB=1 in features.gypi.

        * features.gypi:

2011-04-26  Pavel Feldman  <pfeldman@google.com>

        Reviewed by Yury Semikhatsky.

        Chromium DevTools: recognize WebP as a valid mimetype in the Chromium port.
        https://bugs.webkit.org/show_bug.cgi?id=59332

        * src/js/DevTools.js:

2011-04-26  Adam Barth  <abarth@webkit.org>

        Reviewed by David Levin.

        WebKit/chromium should play nice with strict OwnPtrs
        https://bugs.webkit.org/show_bug.cgi?id=59434

        This fixes about half the issues.

        * src/ApplicationCacheHost.cpp:
        (WebCore::ApplicationCacheHost::maybeLoadMainResource):
        * src/ApplicationCacheHostInternal.h:
        (WebCore::ApplicationCacheHostInternal::ApplicationCacheHostInternal):
        * src/AutoFillPopupMenuClient.cpp:
        (WebKit::AutoFillPopupMenuClient::initialize):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::start):
        (WebCore::ResourceHandle::ResourceHandle):
        (WebCore::ResourceHandle::loadResourceSynchronously):
        * src/SocketStreamHandle.cpp:
        (WebCore::SocketStreamHandleInternal::connect):

2011-04-25  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, build fix.

        Change FAILS_ to DISABLED_ in r84813.

        * tests/TransparencyWinTest.cpp:
        (WebCore::TEST):

2011-04-25  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by James Robinson.

        Suppress test failure in Chromium webkit_unit_tests.
        https://bugs.webkit.org/show_bug.cgi?id=59358

        Looks like this started failing after
        http://trac.webkit.org/changeset/84631.

        * tests/TransparencyWinTest.cpp:
        (WebCore::TEST):

2011-04-22  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] Move detailed heap snapshots storage and processing into workers.
        https://bugs.webkit.org/show_bug.cgi?id=59094

        * WebKit.gyp:

2011-04-22  Andrey Kosyakov  <caseq@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Extensions API] misc API cleanup
        https://bugs.webkit.org/show_bug.cgi?id=59194

        * src/js/DevTools.js:
        (WebInspector.platformExtensionAPI):

2011-04-21  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Beth Dakin.

        AX: order AccessibilityRole alphabetically
        https://bugs.webkit.org/show_bug.cgi?id=31524

        * public/WebAccessibilityRole.h:

2011-04-21  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Adam Roben.

        Add a feature define to allow <details> and <summary> to be disabled
        https://bugs.webkit.org/show_bug.cgi?id=59118
        <rdar://problem/9257045>

        * features.gypi:

2011-04-21  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Sam Weinig.

        Add Frame* to the argument lists of canCopyCut and canPaste
        https://bugs.webkit.org/show_bug.cgi?id=59153

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::canCopyCut):
        (WebKit::EditorClientImpl::canPaste):
        * src/EditorClientImpl.h:

2011-04-21  Roland Steiner  <rolandsteiner@chromium.org>

        Reviewed by Dimitri Glazkov.

        Bug 58704 - Decide on node type for ShadowRoot
        https://bugs.webkit.org/show_bug.cgi?id=58704

        Add a new enum entry to WebNode::NodeType for shadow roots.
        Adapt calling sites for new SHADOW_ROOT_NODE node type.

        * public/WebNode.h:
        * src/WebPageSerializerImpl.cpp:
        (WebKit::WebPageSerializerImpl::buildContentForNode):

2011-04-20  Dominic Cooney  <dominicc@chromium.org>

        Reviewed by Dimitri Glazkov.

        layoutTestController can create and destroy shadow DOM
        https://bugs.webkit.org/show_bug.cgi?id=59058

        Chromium DRT relies on the Chromium WebKit API

        * public/WebElement.h:
        * src/WebElement.cpp:
        (WebKit::WebElement::shadowRoot): don't steal a zero refcount
        (WebKit::WebElement::ensureShadowRoot): added
        (WebKit::WebElement::removeShadowRoot): added

2011-04-20  Alexey Marinichev  <amarinichev@chromium.org>

        Reviewed by Kenneth Russell.

        Check for null m_context in WebGLLayerChromium and add resetting platform layer's context in the destructor of GraphicsContext3D.
        https://bugs.webkit.org/show_bug.cgi?id=59045

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3D::~GraphicsContext3D): call into platform
        layer and unregister itself.

2011-04-20  Yuzhu Shen  <yzshen@chromium.org>

        Reviewed by Tony Chang.

        [chromium] linux chromium doesn't set click count for mouse up events.
        https://bugs.webkit.org/show_bug.cgi?id=58921

        The reason why we need such a fix is that the Pepper API passes this information to plugins,
        and some consumers (e.g., Flash) need it to detect double-clicks.

        * src/gtk/WebInputEventFactory.cpp: set click count for mouse up events.
        * tests/WebInputEventFactoryTestGtk.cpp: added test case MouseUpClickCount.

2011-04-20  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] expose title text direction on WebDataSource
        https://bugs.webkit.org/show_bug.cgi?id=59010

        * public/WebDataSource.h:
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::pageTitle):
        (WebKit::WebDataSourceImpl::pageTitleDirection):
        * src/WebDataSourceImpl.h:

2011-04-20  Pavel Feldman  <pfeldman@google.com>

        Reviewed by Yury Semikhatsky.

        Web Inspector: add saveAs into the InspectorFrontendHost binding.
        https://bugs.webkit.org/show_bug.cgi?id=58979

        * public/WebDevToolsFrontendClient.h:
        (WebKit::WebDevToolsFrontendClient::saveAs):
        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::saveAs):
        * src/InspectorFrontendClientImpl.h:
        * src/js/DevTools.js:

2011-04-19  Naoki Takano  <takano.naoki@gmail.com>

        Reviewed by Kent Tamura.

        [Chromium]UI polishes and tweaks to Autofill dropdown menu.
        https://bugs.webkit.org/show_bug.cgi?id=58505

        * src/AutoFillPopupMenuClient.cpp:
        (WebKit::AutoFillPopupMenuClient::initialize): Set AutofillPopup for menuStyle.

2011-04-19  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, attempting build fix.

        Disable leveldb to work around
        http://code.google.com/p/leveldb/issues/detail?id=1.

        * features.gypi:

2011-04-19  Dominic Cooney  <dominicc@chromium.org>

        Reviewed by Dimitri Glazkov.

        Check the type of the wrapper when unwrapping NPObjects to native
        Ranges and Elements
        https://bugs.webkit.org/show_bug.cgi?id=58957

        * src/WebBindings.cpp:
        (WebKit::getRangeImpl): check HasInstance
        (WebKit::getElementImpl): check HasInstance

2011-04-19  Evan Martin  <evan@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] didReceiveTitle API signature should not change
        https://bugs.webkit.org/show_bug.cgi?id=58909

        My previous attempt at a temporary shim was wrong.
        This second try should correctly work with older clients.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didReceiveTitle):

2011-04-19  Jungshik Shin  <jshin@chromium.org>

        Reviewed by Adam Barth

        Fix the compile failure in UniscribeHelperTest.cpp due to
        a change in UniscribeHelper made by the CL for bug 48860
        (r84264)

        http://bugs.webkit.org/show_bug.cgi?id=48860

        * tests/UniscribeHelperTest.cpp:
        (TEST_F):

2011-04-19  Stuart Morgan  <stuartmorgan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Clicking on plugin for first time blocks focus shift
        https://bugs.webkit.org/show_bug.cgi?id=58419

        Switched to using FocusController when moving focus to a plugin
        so that cross-frame focus changes are handled correctly.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleMouseEvent):

2011-04-19  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: Rename lengthReceived to encodedDataLength/dataLength
        https://bugs.webkit.org/show_bug.cgi?id=58883

        Renamed lengthReceived to encodedDataLength/dataLength.

        * public/WebURLLoaderClient.h:
        (WebKit::WebURLLoaderClient::didReceiveData):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidReceiveContentLength):
        * src/FrameLoaderClientImpl.h:
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):

2011-04-19  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Chromium DevTools: Network panel timing test is flaky
        https://bugs.webkit.org/show_bug.cgi?id=58699

        Fixed network timing test flakiness.

        * src/js/Tests.js:
        (.TestSuite.prototype.testNetworkTiming.finishResource):

2011-04-19  Andrey Kosyakov  <caseq@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: add chrome.devTools alias to webInspector namespace for chromium port
        https://bugs.webkit.org/show_bug.cgi?id=58894

        * src/js/DevTools.js:
        (WebInspector.platformExtensionAPI):

2011-04-19  Kinuko Yasuda  <kinuko@chromium.org>

        Not reviewed; another build fix attempt.

        * src/StorageInfoChromium.cpp:
        (WebCore::StorageInfo::queryUsageAndQuota):
        (WebCore::StorageInfo::requestQuota):
        * src/WebStorageQuotaCallbacksImpl.cpp:
        (WebKit::WebStorageQuotaCallbacksImpl::WebStorageQuotaCallbacksImpl):
        * src/WebStorageQuotaCallbacksImpl.h:

2011-04-19  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by David Levin.

        [Chromium] Enable QUOTA API at runtime if enable-quota flag is given
        https://bugs.webkit.org/show_bug.cgi?id=58784

        * features.gypi: Added ENABLE_QUOTA=1.
        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableQuota): Added.
        (WebKit::WebRuntimeFeatures::isQuotaEnabled): Added.

2011-04-19  John Gregg  <johnnyg@google.com>

        Reviewed by Darin Fisher.

        Enable folder drag-n-drop when using a "webkitdirectory" file input
        https://bugs.webkit.org/show_bug.cgi?id=58401

        This uses a new ChromeClient API to enumerate the directory and 
        return all the files, as if the user had selected that directory
        by clicking the control in the normal way.

        * public/WebViewClient.h:
        (WebKit::WebViewClient::enumerateChosenDirectory):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::enumerateChosenDirectory):
        * src/ChromeClientImpl.h:

2011-04-18  Evan Martin  <evan@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] expose title direction to webkit client
        https://bugs.webkit.org/show_bug.cgi?id=58823

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didReceiveTitle):
        Add new param to API.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidReceiveTitle):
        Pass new param in API.

2011-04-17  Patrick Gansterer  <paroga@webkit.org>

        Reviewed by Adam Barth.

        Rename PLATFORM(CG) to USE(CG)
        https://bugs.webkit.org/show_bug.cgi?id=58729

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::~GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3DInternal::reshape):
        * src/GraphicsContext3DInternal.h:
        * src/PlatformBridge.cpp:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):

2011-04-15  John Bates  <jbates@google.com>

        Reviewed by Kenneth Russell.

        Change WebGraphicsContext3D virtuals to pure virtuals as intended
        https://bugs.webkit.org/show_bug.cgi?id=58479

        * public/WebGraphicsContext3D.h:

2011-04-15  Shishir Agrawal  <shishir@chromium.org>

        Reviewed by James Robinson.

        Add a flag to guard Page Visibility API changes.
        https://bugs.webkit.org/show_bug.cgi?id=58464

        * features.gypi:

2011-04-15  Charlie Reis  <creis@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] fast/events/popup-allowed-from-gesture-initiated-form-submit.html causing debug ASSERT
        https://bugs.webkit.org/show_bug.cgi?id=44079

        Remove an assert whose invariant doesn't hold.

        * src/FrameLoaderClientImpl.cpp:

2011-04-15  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by David Levin.

        Expose unified Quota API if QUOTA build flag is enabled
        https://bugs.webkit.org/show_bug.cgi?id=58648

        * src/AssertMatchingEnums.cpp: Added enum assertions.
        * src/StorageInfoChromium.cpp: Made a build fix.

2011-04-15  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: Rename rawRequestHeadersText and RawResponseHeadersText to requestHeadersText and responseHeadersText
        https://bugs.webkit.org/show_bug.cgi?id=58650

        * public/WebHTTPLoadInfo.h:
        * src/WebHTTPLoadInfo.cpp:
        (WebKit::WebHTTPLoadInfo::requestHeadersText):
        (WebKit::WebHTTPLoadInfo::setRequestHeadersText):
        (WebKit::WebHTTPLoadInfo::responseHeadersText):
        (WebKit::WebHTTPLoadInfo::setResponseHeadersText):

2011-04-15  Zelidrag Hornung  <zelidrag@chromium.org>

        Reviewed by Darin Fisher.

        Added enums for external file system type and exposed factory function
        for creating File- and DirectoryEntry objects from Chromium side.
        https://bugs.webkit.org/show_bug.cgi?id=58456

        * public/WebFileSystem.h:
        * public/WebFrame.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFileSystem):
        (WebKit::WebFrameImpl::createFileEntry):
        * src/WebFrameImpl.h:

2011-04-15  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] Create tests for network panel timing, size and raw headers text
        https://bugs.webkit.org/show_bug.cgi?id=58566

        Added network timing, size and raw headers tests for Inspector
        Since chromium used different version of network stack for layout
        tests, these are interactive ui tests (DevToolsSanityTest.TestNetwork*)

        * src/js/Tests.js:
        (.TestSuite.prototype.testNetworkSize.finishResource):
        (.TestSuite.prototype.testNetworkSyncSize.finishResource):
        (.TestSuite.prototype.testNetworkRawHeadersText.finishResource):
        (.TestSuite.prototype.testNetworkTiming.finishResource):

2011-04-14  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: Enable raw HTTP headers support
        https://bugs.webkit.org/show_bug.cgi?id=58259

        Added raw headers text support to inspector.

        * public/WebHTTPLoadInfo.h:
        * src/WebHTTPLoadInfo.cpp:
        (WebKit::WebHTTPLoadInfo::rawRequestHeadersText):
        (WebKit::WebHTTPLoadInfo::setRawRequestHeadersText):
        (WebKit::WebHTTPLoadInfo::rawResponseHeadersText):
        (WebKit::WebHTTPLoadInfo::setRawResponseHeadersText):

2011-04-14  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: ResourceResponse should have encodedDataLength field for synchronous requests transfer size
        https://bugs.webkit.org/show_bug.cgi?id=58447

        FrameLoader now takes encoded data length for synchronous requests from the field with the same name.

        * public/WebHTTPLoadInfo.h:
        * src/WebHTTPLoadInfo.cpp:
        (WebKit::WebHTTPLoadInfo::encodedDataLength):
        (WebKit::WebHTTPLoadInfo::setEncodedDataLength):

2011-04-14  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Remove dependency on chromium skia::PlatformCanvas
        https://bugs.webkit.org/show_bug.cgi?id=57563

        * public/WebCanvas.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::printPage):
        * tests/TransparencyWinTest.cpp:
        (WebCore::drawNativeRect):
        (WebCore::getPixelAt):
        (WebCore::clearTopLayerAlphaChannel):
        (WebCore::clearTopLayerAlphaPixel):
        (WebCore::TEST):

2011-04-14  Brian Salomon  <bsalomon@google.com>

        Reviewed by Kenneth Russell.

        In skia platform call SkBitmap::notifyPixelsChanged on WebGL readback
        https://bugs.webkit.org/show_bug.cgi?id=58543

        No new tests. Tested by fast/canvas/webgl/canvas-test.html

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):

2011-04-14  Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        [chromium] TilingData should return 1 tile if tile size is texture size.
        https://bugs.webkit.org/show_bug.cgi?id=58364

        Update test to properly handle this case.

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-04-14  Bill Budge  <bbudge@chromium.org>

        Reviewed by Darin Fisher.

        Make WebURLLoaderOptions disallow cross origin requests by default.
        https://bugs.webkit.org/show_bug.cgi?id=58475

        No new tests. Exposes no new functionality.

        * public/WebURLLoaderOptions.h:
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):

2011-04-13  James Robinson  <jamesr@chromium.org>

        Reviewed by Simon Fraser.

        Allow setting composited backing stores for scrollbars and scroll corners
        https://bugs.webkit.org/show_bug.cgi?id=57202

        Remove a lot of scrollbar hacks from the chromium compositor implementation now that
        scrollbars go to real layers.

        * src/WebScrollbarImpl.cpp:
        (WebKit::WebScrollbarImpl::invalidateScrollCornerRect):
        (WebKit::WebScrollbarImpl::scrollCornerPresent):
        * src/WebScrollbarImpl.h:
        (WebKit::WebScrollbarImpl::scrollCornerRect):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::reallocateRenderer):

2011-04-13  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Jian Li.

        [chromium] Remove unnecessary #define now that chrome has rolled to the latest WebKit
        https://bugs.webkit.org/show_bug.cgi?id=58474

        * DEPS:
        * public/WebSpellCheckClient.h:

2011-04-13  Zhenyao Mo  <zmo@google.com>

        Reviewed by Kenneth Russell.

        Extension3D needs to provide a way to check if an extension is enabled
        https://bugs.webkit.org/show_bug.cgi?id=58410

        Implement isEnabled() in chromium port.

        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::isEnabled):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::isExtensionEnabled):
        * src/GraphicsContext3DInternal.h:

2011-04-13  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by David Levin.

        Add mock implementation and plumbing code for unified Quota API
        https://bugs.webkit.org/show_bug.cgi?id=57927

        Added plumbing code for the quota API, that is based on the
        discussion on public-webapps:
        http://lists.w3.org/Archives/Public/public-webapps/2011JanMar/0346.html

        * WebKit.gyp: Added new file entries.
        * src/StorageInfoChromium.cpp: Added.
        * src/WebStorageQuotaCallbacksImpl.cpp: Added. An implementation of
        WebStorageQuotaCallbacks.
        * src/WebStorageQuotaCallbacksImpl.h: Added.

2011-04-12  Hans Wennborg  <hans@chromium.org>

        Reviewed by Jeremy Orlow.

        Chromium: Set ENABLE_LEVELDB=1 and add leveldb and snappy to DEPS
        https://bugs.webkit.org/show_bug.cgi?id=58343

        Set ENABLE_LEVELDB=1 so that code gets compiled by the EWS bots.
        Add the necessary dependencies to the DEPS file.

        * DEPS:
        * features.gypi:

2011-04-12  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [Chromium] Add WebSettings::setValidationMessageTimerMagnification()
        https://bugs.webkit.org/show_bug.cgi?id=57426

        * public/WebSettings.h: Declare new function.
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setValidationMessageTimerMagnification):
         Passing the specified value to WebCore::Settings.
        * src/WebSettingsImpl.h: Declare new function.

2011-04-12  Antoine Labour  <piman@chromium.org>

        Reviewed by Kenneth Russell.

        Allow WebView users to recreate dependent contexts after a context lost
        event. Similarly to the startup case, a temporary context gets created,
        that gets used by the layer renderer once it itself gets recreated.
        https://bugs.webkit.org/show_bug.cgi?id=58385

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::reallocateRenderer): use the temporary context to
        recreate the layer renderer if it's valid.
        (WebKit::WebViewImpl::graphicsContext3D): create a temporary context if
        the layer renderer's context is lost.

2011-04-12  Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        [chromium] TilingData mishandles very small texture sizes
        https://bugs.webkit.org/show_bug.cgi?id=58364

        Update test to properly handle texture sizes of 0-3.

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-04-12  Jian Li  <jianli@chromium.org>

        Unreviewed, rolling out r83649.
        http://trac.webkit.org/changeset/83649
        https://bugs.webkit.org/show_bug.cgi?id=57563

        This patch causes compiling errors for chromium

        * public/WebCanvas.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::printPage):
        * tests/TransparencyWinTest.cpp:
        (WebCore::drawNativeRect):
        (WebCore::getPixelAt):
        (WebCore::clearTopLayerAlphaChannel):
        (WebCore::clearTopLayerAlphaPixel):
        (WebCore::TEST):

2011-04-12  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Jian Li.

        [chromium] Fix spellcheck regression in context menus
        https://bugs.webkit.org/show_bug.cgi?id=58386

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):

2011-04-12  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Tony Chang.

        [chromium] Use new dragTargetDragEnter() function signature
        https://bugs.webkit.org/show_bug.cgi?id=58303

        After WebKit/chromium/DEPS rolls to chromium r80907, the drag identity
        based version of dragTargetDragEnter() is no longer used; remove it.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:

2011-04-12  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Remove dependency on chromium skia::PlatformCanvas
        https://bugs.webkit.org/show_bug.cgi?id=57563

        * public/WebCanvas.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::printPage):
        * tests/TransparencyWinTest.cpp:
        (WebCore::drawNativeRect):
        (WebCore::getPixelAt):
        (WebCore::clearTopLayerAlphaChannel):
        (WebCore::clearTopLayerAlphaPixel):
        (WebCore::TEST):

2011-04-12  Adam Barth  <abarth@webkit.org>

        Revert unintentional changes to WebKit.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:

2011-04-11  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Darin Fisher.

        [chromium]: Get the list of misspelled words in the WebKit code insetad of in chromium's RenderView
        https://bugs.webkit.org/show_bug.cgi?id=58260

        * public/WebContextMenuData.h:
        * public/WebSpellCheckClient.h:
        (WebKit::WebSpellCheckClient::spellCheck):
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::checkSpellingOfString):

2011-04-12  Bill Budge  <bbudge@chromium.org>

        Reviewed by Darin Fisher.

        Move the WebURLLoaderOptions struct into its own file and rename the CrossOriginRequestPolicy enum to conform to the WebKit coding standard.
        https://bugs.webkit.org/show_bug.cgi?id=58287

        No new tests. No new functionality exposed.

        * WebKit.gyp:
        * public/WebURLLoader.h:
        * public/WebURLLoaderOptions.h: Added.
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        * src/AssociatedURLLoader.h:

2011-04-11  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [chromium] script formatting doesn't work when chromium is built with debug_devtools=1.
        https://bugs.webkit.org/show_bug.cgi?id=58232

        * WebKit.gyp:

2011-04-11  John Bates  <jbates@google.com>

        Reviewed by Kenneth Russell.

        chromium support for glSetLatch and glWaitLatch between 3D contexts
        https://bugs.webkit.org/show_bug.cgi?id=58003

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::getParentToChildLatchCHROMIUM):
        (WebKit::WebGraphicsContext3D::getChildToParentLatchCHROMIUM):
        (WebKit::WebGraphicsContext3D::waitLatchCHROMIUM):
        (WebKit::WebGraphicsContext3D::setLatchCHROMIUM):
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::waitLatchCHROMIUM):
        (WebCore::Extensions3DChromium::setLatchCHROMIUM):
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DInternal.h:

2011-04-11  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Tony Chang.

        [chromium] Crash in WebViewImpl::caretOrSelectionBounds
        https://bugs.webkit.org/show_bug.cgi?id=58269

        The bug was caused by caretOrSelectionBounds's incorrectly assuming
        SelectionController::toNormalizedRange to always return a non-null Range.

        Fixed the bug by adding a null pointer check. Also replaced calls to deprecatedNode
        by containerNode() and calls to SelectionController::start() and SelectionController::end()
        by calls to SelectionController::base() and SelectionController::extent() because
        selection extends from base to extent, not from start to end.

        Test: editing/selection/extend-over-file-input-by-drag-crash.html

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::caretOrSelectionBounds):

2011-04-11  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Eric Carlson.

        Rename MediaControls to MediaControlRootElement.
        https://bugs.webkit.org/show_bug.cgi?id=58250

        Mechanical move using do-webcore-rename.

2011-04-11  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Dmitry Titov.

        [chromium] Implement image/png support in DataTransferItems
        https://bugs.webkit.org/show_bug.cgi?id=58106

        Add glue for reading image data from clipboard.

        * DEPS:
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::clipboardReadImage):

2011-04-05  Hans Wennborg  <hans@chromium.org>

        Reviewed by Steve Block.

        IndexedDB: Introduce skeleton for LevelDB backend
        https://bugs.webkit.org/show_bug.cgi?id=57827

        * features.gypi:
            Add ENABLE_LEVELDB=0.
        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::open):
            Remove pre-roll open() function.

2011-04-10  Kent Tamura  <tkent@chromium.org>

        [Chromium] Fix build errors on "Win Shared Builder (dbg)"

        * WebKit.gyp: Exclude WebFrameTest.cpp for WEBKIT_DLL.

2011-04-10  Kent Tamura  <tkent@chromium.org>

        Unreviewed, rolling out r83353.
        http://trac.webkit.org/changeset/83353
        https://bugs.webkit.org/show_bug.cgi?id=58106

        The new test doesn't pass on all Chromium platforms.

        * DEPS:
        * src/PlatformBridge.cpp:

2011-04-09  Sreeram Ramachandran  <sreeram@google.com>

        Reviewed by Ryosuke Niwa.

        Gather data on modal dialogs shown during unload events
        https://bugs.webkit.org/show_bug.cgi?id=58115

        Implementation of the new API to receive notifications of modal dialogs
        dispatched during unload events. Count the notifications through a histogram.

        No tests because it's not clear how to test chromium histograms from webkit.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::willRunModalDialogDuringPageDismissal):
        * src/ChromeClientImpl.h:

2011-04-08  Aaron Boodman  <aa@chromium.org>

        Reviewed by Dmitry Titov.

        Re-land http://trac.webkit.org/changeset/83007. This works
        without changes after https://bugs.webkit.org/show_bug.cgi?id=58110.

        https://bugs.webkit.org/show_bug.cgi?id=58096

        * WebKit.gyp:
        * WebKit.gypi:
        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrame::frameForContext):
        * tests/WebFrameTest.cpp:
        (WebKit::WebFrameTest::WebFrameTest):
        (WebKit::WebFrameTest::registerMockedURLLoad):
        (WebKit::WebFrameTest::loadFrame):
        (WebKit::TEST_F):

2011-04-08  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Dmitry Titov.

        [chromium] Implement image/png support in DataTransferItems
        https://bugs.webkit.org/show_bug.cgi?id=58106

        Add glue for reading image data from clipboard.

        * DEPS:
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::clipboardReadImage):

2011-04-08  Alpha Lam  <hclam@chromium.org>

        Unreviewed, rolling out r83335.
        http://trac.webkit.org/changeset/83335
        https://bugs.webkit.org/show_bug.cgi?id=53556

        GTK and QT bots are broken

        * features.gypi:

2011-04-07  Anna Cavender  <annacc@chromium.org>

        Reviewed by Eric Carlson.

        Setup ENABLE(TRACK) feature define
        https://bugs.webkit.org/show_bug.cgi?id=53556

        * features.gypi:

2011-04-08  Dmitry Titov  <dimich@chromium.org>

        Reviewed by Adam Barth.

        [Chromium] Remove unneeded usage of V8::Lockers in IDB tests.
        https://bugs.webkit.org/show_bug.cgi?id=58110
        Since they are simple one-thread tests.
        This code parallels the code in Chromium's idb bindings that uses v8 Lockers in utility process,
        which is equally not needed since there is only one thread running v8 in that process.

        * tests/IDBBindingUtilitiesTest.cpp:

2011-04-07  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: add test for script formatter worker.
        https://bugs.webkit.org/show_bug.cgi?id=57447

        * WebKit.gyp:

2011-04-08  Kent Tamura  <tkent@chromium.org>

        [Chromium] The second attempt of fixing for Windows (dbg)(shared) build.

        * WebKit.gyp: webkit should not depend on webkit_support.

2011-04-08  Kent Tamura  <tkent@chromium.org>

        [Chromium] Build fix for Windows (dbg)(shared).

        * WebKit.gyp: Add webkit_support dependency, which is required for webkit_unittest_files.

2011-04-07  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] Add WebKit API to query and request unified offline-storage quota
        https://bugs.webkit.org/show_bug.cgi?id=57849
        Just adding the API, this does not do anything yet.

        The API is based on the public discussion for unified quota API:
        http://lists.w3.org/Archives/Public/public-webapps/2011JanMar/0346.html
        (The detail is not yet fully specified and might be subject to change.)

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::queryStorageUsageAndQuota): Added.
        (WebKit::WebFrameClient::requestStorageQuota): Added.
        * public/WebStorageQuotaCallbacks.h: Added.
        (WebKit::WebStorageQuotaCallbacks::~WebStorageQuotaCallbacks):
        * public/WebStorageQuotaType.h: Added.

2011-04-07  Dominic Cooney  <dominicc@google.com>

        Reviewed by Dimitri Glazkov.

        Let shadow DOM have a list of nodes at the top level of a shadow.
        https://bugs.webkit.org/show_bug.cgi?id=57813

        * src/WebElement.cpp:
        (WebKit::WebElement::shadowRoot): shadow roots are ContainerNodes now

2011-04-07  Magnus Danielsson  <public@fuzzac.com>

        Reviewed by Darin Fisher.

        [chromium] WebPageSerializerImpl doesn't serialize sub-frames correctly
        https://bugs.webkit.org/show_bug.cgi?id=53897

        When serializing a web page using 'save page as', sub-frames and resources gets
        saved in a sub-directory. However, frame elements didn't get updated to reference
        these saved sub-frames, but were still referencing the original url. So when opening
        a saved web page, any sub-frames would get pulled in from the original url rather than 
        what was saved.

        In addition to this, sub-frames in the sub-directory erroneously had the name of the
        sub-directory prepended to the path of resources located in the same sub-directory.

        * src/WebPageSerializerImpl.cpp:
        (WebKit::WebPageSerializerImpl::openTagToStrne: Fixed resource paths in sub-frames. 
        Also made sure sub-frames are referenced correctly from parent frame.
        (WebKit::WebPageSerializerImpl::endTagToString): Removed constness from argument.
        (WebKit::WebPageSerializerImpl::buildContentForNode): Ditto.
        * src/WebPageSerializerImpl.h:

2011-04-07  Nat Duca  <nduca@chromium.org>

        Reviewed by David Levin.

        [chromium] Compositor thread infrastructure
        https://bugs.webkit.org/show_bug.cgi?id=56131

        Tests for chrome compositor thread and related infrastructure.

        * WebKit.gyp:
        * WebKit.gypi:
        * tests/CCThreadTaskTest.cpp: Added.
        (WebCore::TEST):
        * tests/CCThreadTest.cpp: Added.
        (WebCore::TEST):
        (WebCore::PingPongUsingCondition::ping):
        (WebCore::PingPongTestUsingTasks::ping):
        (WebCore::PingPongTestUsingTasks::pong):
        * tests/RunAllTests.cpp:
        (main):

2011-04-07  Andrew Scherkus  <scherkus@chromium.org>

        Revert ENABLE_TRACK patch due to compile failures.

        * features.gypi:

2011-04-07  Pavel Feldman  <pfeldman@google.com>

        Not reviewed: rolling chromium DEPS 80421:80767.

        * DEPS:

2011-04-07  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] Rename didReceiveData2 to didReceiveData as part of enabling transfer size support.
        https://bugs.webkit.org/show_bug.cgi?id=58036

        Renamed didReceiveData2 to didReceiveData.

        * public/WebURLLoaderClient.h:
        (WebKit::WebURLLoaderClient::didReceiveData):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):

2011-04-07  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] Migrate didReceiveData in upstream for plugins as part of enabling transfer size support.
        https://bugs.webkit.org/show_bug.cgi?id=58034

        Migrated didReceiveData to support new lengthReceived parameter.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):

2011-04-06  Asanka Herath  <asanka@chromium.org>

        Reviewed by Darin Fisher.

        Add new TargetType: TargetIsFavicon

        https://bugs.webkit.org/show_bug.cgi?id=57659

        * public/WebURLRequest.h:

2011-04-06  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] Add settings API to enable accelerated drawing
        https://bugs.webkit.org/show_bug.cgi?id=57863
        
        If accelerated drawing is enabled we try to render content and
        root layers using GPU. Please note that this setting is ignored if
        accelerated compositing is disabled.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setAcceleratedDrawingEnabled):
        * src/WebSettingsImpl.h:

2011-04-05  Zelidrag Hornung  <zelidrag@chromium.org>

        Reviewed by David Levin.

        Added MediaTypeFile enum value to WebContextMenuData::MediaType.
        https://bugs.webkit.org/show_bug.cgi?id=57566

        * public/WebContextMenuData.h:

2011-04-05  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r83007.
        http://trac.webkit.org/changeset/83007
        https://bugs.webkit.org/show_bug.cgi?id=57920

        Broke WebFrameTest.FrameForEnteredContext on Chromium-win and
        Chromium-mac (Requested by tkent on #webkit).

        * WebKit.gyp:
        * WebKit.gypi:
        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * tests/WebFrameTest.cpp:
        (WebKit::WebFrameTest::WebFrameTest):
        (WebKit::WebFrameTest::registerMockedURLLoad):
        (WebKit::WebFrameTest::serveRequests):
        (WebKit::TEST_F):

2011-04-05  James Kozianski  <koz@chromium.org>

        Unreviewed, rolling out r82976.
        http://trac.webkit.org/changeset/82976
        https://bugs.webkit.org/show_bug.cgi?id=57566

        Breaks chromium canary build

        * public/WebContextMenuData.h:

2011-04-05  Aaron Boodman  <aa@chromium.org>

        Reviewed by Adam Barth.

        Add ability to get frame from v8 context to chromium WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=57516

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrame::frameForV8Context):

2011-04-05  Nico Weber  <thakis@chromium.org>

        Reviewed by Dimitri Glazkov.

        [chromium] Don't have 'using namespace' declarations in header files
        https://bugs.webkit.org/show_bug.cgi?id=57882

        * src/EventListenerWrapper.cpp:
        * src/EventListenerWrapper.h:
        * src/VideoFrameChromiumImpl.h:
        * src/WebDOMEventListener.cpp:
        * src/WebDOMEventListenerPrivate.cpp:
        * src/WebDOMEventListenerPrivate.h:
        (WebKit::WebDOMEventListenerPrivate::ListenerInfo::ListenerInfo):

2011-04-05  Zelidrag Hornung  <zelidrag@chromium.org>

        Reviewed by David Levin.

        Added MediaTypeFile enum value to WebContextMenuData::MediaType.
        https://bugs.webkit.org/show_bug.cgi?id=57566

        * public/WebContextMenuData.h:

2011-04-04  MORITA Hajime  <morrita@google.com>

        Reviewed by Ryosuke Niwa.

        [Refactoring] SpellCheckingResult should be replaced with TextCheckingResult
        https://bugs.webkit.org/show_bug.cgi?id=56085

        Followed the signature change.
        
        * src/EditorClientImpl.h:
        * src/EditorClientImpl.cpp:
        * src/WebTextCheckingCompletionImpl.cpp

2011-04-05  Hans Wennborg  <hans@chromium.org>

        Reviewed by Adam Barth

        Clean up IndexedDB WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=57507

        Rename the backend proxy files that didn't have Backend in their name.
        Everything in WebKit should be in the WebKit namespace.
        Put everything behind the feature flag so we're consistient.
        Put the feature flag #if above includes.

        * WebKit.gyp:
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::create):
        (WebKit::IDBCallbacksProxy::IDBCallbacksProxy):
        (WebKit::IDBCallbacksProxy::onError):
        (WebKit::IDBCallbacksProxy::onSuccess):
        * src/IDBCallbacksProxy.h:
        * src/IDBCursorBackendProxy.cpp:
        (WebKit::IDBCursorBackendProxy::create):
        (WebKit::IDBCursorBackendProxy::IDBCursorBackendProxy):
        * src/IDBCursorBackendProxy.h:
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::create):
        (WebKit::IDBDatabaseBackendProxy::IDBDatabaseBackendProxy):
        (WebKit::IDBDatabaseBackendProxy::~IDBDatabaseBackendProxy):
        (WebKit::IDBDatabaseBackendProxy::name):
        (WebKit::IDBDatabaseBackendProxy::version):
        (WebKit::IDBDatabaseBackendProxy::objectStoreNames):
        (WebKit::IDBDatabaseBackendProxy::createObjectStore):
        (WebKit::IDBDatabaseBackendProxy::deleteObjectStore):
        (WebKit::IDBDatabaseBackendProxy::setVersion):
        (WebKit::IDBDatabaseBackendProxy::transaction):
        (WebKit::IDBDatabaseBackendProxy::close):
        (WebKit::IDBDatabaseBackendProxy::open):
        * src/IDBDatabaseCallbacksProxy.cpp:
        (WebKit::IDBDatabaseCallbacksProxy::create):
        (WebKit::IDBDatabaseCallbacksProxy::IDBDatabaseCallbacksProxy):
        * src/IDBDatabaseCallbacksProxy.h:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):
        (WebKit::IDBFactoryBackendProxy::open):
        * src/IDBFactoryBackendProxy.h:
        * src/IDBIndexBackendProxy.cpp:
        (WebKit::IDBIndexBackendProxy::create):
        (WebKit::IDBIndexBackendProxy::IDBIndexBackendProxy):
        * src/IDBIndexBackendProxy.h:
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::create):
        (WebKit::IDBObjectStoreBackendProxy::IDBObjectStoreBackendProxy):
        (WebKit::IDBObjectStoreBackendProxy::~IDBObjectStoreBackendProxy):
        (WebKit::IDBObjectStoreBackendProxy::name):
        (WebKit::IDBObjectStoreBackendProxy::keyPath):
        (WebKit::IDBObjectStoreBackendProxy::indexNames):
        (WebKit::IDBObjectStoreBackendProxy::get):
        (WebKit::IDBObjectStoreBackendProxy::put):
        (WebKit::IDBObjectStoreBackendProxy::deleteFunction):
        (WebKit::IDBObjectStoreBackendProxy::clear):
        (WebKit::IDBObjectStoreBackendProxy::createIndex):
        (WebKit::IDBObjectStoreBackendProxy::index):
        (WebKit::IDBObjectStoreBackendProxy::deleteIndex):
        (WebKit::IDBObjectStoreBackendProxy::openCursor):
        * src/IDBObjectStoreBackendProxy.h: Added.
        * src/IDBObjectStoreProxy.h: Removed.
        * src/IDBTransactionBackendProxy.cpp:
        (WebKit::IDBTransactionBackendProxy::create):
        (WebKit::IDBTransactionBackendProxy::IDBTransactionBackendProxy):
        (WebKit::IDBTransactionBackendProxy::objectStore):
        * src/IDBTransactionBackendProxy.h:
        (WebKit::IDBTransactionBackendProxy::getWebIDBTransaction):
        * src/IDBTransactionCallbacksProxy.cpp:
        (WebKit::IDBTransactionCallbacksProxy::create):
        (WebKit::IDBTransactionCallbacksProxy::IDBTransactionCallbacksProxy):
        * src/IDBTransactionCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onError):
        (WebKit::WebIDBCallbacksImpl::onSuccess):
        * src/WebIDBCallbacksImpl.h:
        * src/WebIDBCursorImpl.cpp:
        * src/WebIDBCursorImpl.h:
        * src/WebIDBDatabaseCallbacksImpl.cpp:
        (WebKit::WebIDBDatabaseCallbacksImpl::onVersionChange):
        * src/WebIDBDatabaseCallbacksImpl.h:
        * src/WebIDBDatabaseError.cpp:
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::WebIDBFactoryImpl):
        * src/WebIDBFactoryImpl.h:
        * src/WebIDBIndexImpl.cpp:
        * src/WebIDBIndexImpl.h:
        * src/WebIDBKey.cpp:
        (WebKit::WebIDBKey::createFromValueAndKeyPath):
        (WebKit::WebIDBKey::injectIDBKeyIntoSerializedValue):
        * src/WebIDBKeyPath.cpp:
        (WebKit::WebIDBKeyPath::operator const WTF::Vector<IDBKeyPathElement, 0>&):
        * src/WebIDBKeyRange.cpp:
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        * src/WebIDBTransactionCallbacksImpl.cpp:
        * src/WebIDBTransactionCallbacksImpl.h:
        * src/WebIDBTransactionImpl.cpp:
        * src/WebIDBTransactionImpl.h:

2011-04-05  Sailesh Agrawal  <sail@chromium.org>

        Reviewed by Darin Fisher.

        Don't clear existing files if the user cancels the file chooser dialog.
        https://bugs.webkit.org/show_bug.cgi?id=55200

        * src/WebFileChooserCompletionImpl.cpp:
        (WebKit::WebFileChooserCompletionImpl::didChooseFile):

2011-04-05  John Mellor  <johnme@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Minor cleanup: simplify WebFrameImpl by using contentsToWindow instead of convertToContainingWindow.
        https://bugs.webkit.org/show_bug.cgi?id=55681

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::find):
        (WebKit::WebFrameImpl::scopeStringMatches):

2011-04-05  Adam Barth  <abarth@webkit.org>

        Roll Chromium DEPS.

        * DEPS: Rolled!

2011-04-04  Chang Shu  <cshu@webkit.org>

        Reviewed by Ryosuke Niwa.

        setContentEditable with true/false/inherit string is not working properly
        https://bugs.webkit.org/show_bug.cgi?id=52058

        Move isContentEditable from HTMLElement to Node. WebKit should only access isContentEditable
        as rendererIsEditable is for WebCore internal use.

        * src/WebNode.cpp:
        (WebKit::WebNode::isContentEditable):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setFocus):
        (WebKit::WebViewImpl::setComposition):
        (WebKit::WebViewImpl::confirmComposition):

2011-04-04  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Dan Bernstein.

        REGRESSION (WebKit2): Caps-Lock indicator sometimes doesn't appear in WebKit2
        https://bugs.webkit.org/show_bug.cgi?id=51230
        <rdar://problem/8780989>

        * src/WebViewImpl.cpp: (WebKit::WebViewImpl::keyEvent): Moved Caps Lock handling from
        WebKits to WebCore, because WebKit shouldn't be smart.

2011-04-01  Adam Barth  <abarth@webkit.org>

        Attempt to fix the Chromium build using the great and powerful git.
        This patch should be the remaining part of reverting Jeremy's ill-fated
        refactoring.

        * src/IDBDatabaseProxy.cpp:
        (WebCore::IDBDatabaseProxy::create):
        (WebCore::IDBDatabaseProxy::IDBDatabaseProxy):
        (WebCore::IDBDatabaseProxy::~IDBDatabaseProxy):
        (WebCore::IDBDatabaseProxy::name):
        (WebCore::IDBDatabaseProxy::version):
        (WebCore::IDBDatabaseProxy::objectStoreNames):
        (WebCore::IDBDatabaseProxy::createObjectStore):
        (WebCore::IDBDatabaseProxy::deleteObjectStore):
        (WebCore::IDBDatabaseProxy::setVersion):
        (WebCore::IDBDatabaseProxy::transaction):
        (WebCore::IDBDatabaseProxy::close):
        (WebCore::IDBDatabaseProxy::open):
        * src/IDBDatabaseProxy.h:
        * src/IDBObjectStoreProxy.cpp:
        (WebCore::IDBObjectStoreProxy::create):
        (WebCore::IDBObjectStoreProxy::IDBObjectStoreProxy):
        (WebCore::IDBObjectStoreProxy::~IDBObjectStoreProxy):
        (WebCore::IDBObjectStoreProxy::name):
        (WebCore::IDBObjectStoreProxy::keyPath):
        (WebCore::IDBObjectStoreProxy::indexNames):
        (WebCore::IDBObjectStoreProxy::get):
        (WebCore::IDBObjectStoreProxy::put):
        (WebCore::IDBObjectStoreProxy::deleteFunction):
        (WebCore::IDBObjectStoreProxy::clear):
        (WebCore::IDBObjectStoreProxy::createIndex):
        (WebCore::IDBObjectStoreProxy::index):
        (WebCore::IDBObjectStoreProxy::deleteIndex):
        (WebCore::IDBObjectStoreProxy::openCursor):

2011-04-01  Adam Barth  <abarth@webkit.org>

        Move these files back to their old locations.  I'm not sure why the
        rollout didn't move them properly.

        * src/IDBDatabaseBackendProxy.cpp: Removed.
        * src/IDBDatabaseBackendProxy.h: Removed.
        * src/IDBDatabaseProxy.cpp: Copied from Source/WebKit/chromium/src/IDBDatabaseBackendProxy.cpp.
        * src/IDBDatabaseProxy.h: Copied from Source/WebKit/chromium/src/IDBDatabaseBackendProxy.h.
        * src/IDBObjectStoreBackendProxy.cpp: Removed.
        * src/IDBObjectStoreProxy.cpp: Copied from Source/WebKit/chromium/src/IDBObjectStoreBackendProxy.cpp.

2011-04-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r82738.
        http://trac.webkit.org/changeset/82738
        https://bugs.webkit.org/show_bug.cgi?id=57684

        Broke storage/indexeddb/objectstore-autoincrement.html and
        InjectIDBKey (Requested by abarth|gardening on #webkit).

        * WebKit.gyp:
        * src/IDBCallbacksProxy.cpp:
        (WebCore::IDBCallbacksProxy::create):
        (WebCore::IDBCallbacksProxy::IDBCallbacksProxy):
        (WebCore::IDBCallbacksProxy::onError):
        (WebCore::IDBCallbacksProxy::onSuccess):
        * src/IDBCallbacksProxy.h:
        * src/IDBCursorBackendProxy.cpp:
        (WebCore::IDBCursorBackendProxy::create):
        (WebCore::IDBCursorBackendProxy::IDBCursorBackendProxy):
        * src/IDBCursorBackendProxy.h:
        * src/IDBDatabaseCallbacksProxy.cpp:
        (WebCore::IDBDatabaseCallbacksProxy::create):
        (WebCore::IDBDatabaseCallbacksProxy::IDBDatabaseCallbacksProxy):
        * src/IDBDatabaseCallbacksProxy.h:
        * src/IDBDatabaseProxy.cpp: Renamed from Source/WebKit/chromium/src/IDBDatabaseBackendProxy.cpp.
        (WebCore::IDBDatabaseProxy::create):
        (WebCore::IDBDatabaseProxy::IDBDatabaseProxy):
        (WebCore::IDBDatabaseProxy::~IDBDatabaseProxy):
        (WebCore::IDBDatabaseProxy::name):
        (WebCore::IDBDatabaseProxy::version):
        (WebCore::IDBDatabaseProxy::objectStoreNames):
        (WebCore::IDBDatabaseProxy::createObjectStore):
        (WebCore::IDBDatabaseProxy::deleteObjectStore):
        (WebCore::IDBDatabaseProxy::setVersion):
        (WebCore::IDBDatabaseProxy::transaction):
        (WebCore::IDBDatabaseProxy::close):
        (WebCore::IDBDatabaseProxy::open):
        * src/IDBDatabaseProxy.h: Renamed from Source/WebKit/chromium/src/IDBDatabaseBackendProxy.h.
        * src/IDBFactoryBackendProxy.cpp:
        (WebCore::IDBFactoryBackendProxy::IDBFactoryBackendProxy):
        (WebCore::IDBFactoryBackendProxy::open):
        * src/IDBFactoryBackendProxy.h:
        * src/IDBIndexBackendProxy.cpp:
        (WebCore::IDBIndexBackendProxy::create):
        (WebCore::IDBIndexBackendProxy::IDBIndexBackendProxy):
        * src/IDBIndexBackendProxy.h:
        * src/IDBObjectStoreBackendProxy.h: Removed.
        * src/IDBObjectStoreProxy.cpp: Renamed from Source/WebKit/chromium/src/IDBObjectStoreBackendProxy.cpp.
        (WebCore::IDBObjectStoreProxy::create):
        (WebCore::IDBObjectStoreProxy::IDBObjectStoreProxy):
        (WebCore::IDBObjectStoreProxy::~IDBObjectStoreProxy):
        (WebCore::IDBObjectStoreProxy::name):
        (WebCore::IDBObjectStoreProxy::keyPath):
        (WebCore::IDBObjectStoreProxy::indexNames):
        (WebCore::IDBObjectStoreProxy::get):
        (WebCore::IDBObjectStoreProxy::put):
        (WebCore::IDBObjectStoreProxy::deleteFunction):
        (WebCore::IDBObjectStoreProxy::clear):
        (WebCore::IDBObjectStoreProxy::createIndex):
        (WebCore::IDBObjectStoreProxy::index):
        (WebCore::IDBObjectStoreProxy::deleteIndex):
        (WebCore::IDBObjectStoreProxy::openCursor):
        * src/IDBObjectStoreProxy.h: Added.
        * src/IDBTransactionBackendProxy.cpp:
        (WebCore::IDBTransactionBackendProxy::create):
        (WebCore::IDBTransactionBackendProxy::IDBTransactionBackendProxy):
        (WebCore::IDBTransactionBackendProxy::objectStore):
        * src/IDBTransactionBackendProxy.h:
        (WebCore::IDBTransactionBackendProxy::getWebIDBTransaction):
        * src/IDBTransactionCallbacksProxy.cpp:
        (WebCore::IDBTransactionCallbacksProxy::create):
        (WebCore::IDBTransactionCallbacksProxy::IDBTransactionCallbacksProxy):
        * src/IDBTransactionCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        (WebCore::WebIDBCallbacksImpl::onError):
        (WebCore::WebIDBCallbacksImpl::onSuccess):
        * src/WebIDBCallbacksImpl.h:
        * src/WebIDBCursorImpl.cpp:
        * src/WebIDBCursorImpl.h:
        * src/WebIDBDatabaseCallbacksImpl.cpp:
        (WebCore::WebIDBDatabaseCallbacksImpl::onVersionChange):
        * src/WebIDBDatabaseCallbacksImpl.h:
        * src/WebIDBDatabaseError.cpp:
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::WebIDBFactoryImpl):
        * src/WebIDBFactoryImpl.h:
        * src/WebIDBIndexImpl.cpp:
        * src/WebIDBIndexImpl.h:
        * src/WebIDBKey.cpp:
        (WebKit::WebIDBKey::createFromValueAndKeyPath):
        (WebKit::WebIDBKey::injectIDBKeyIntoSerializedValue):
        * src/WebIDBKeyPath.cpp:
        (WebKit::WebIDBKeyPath::operator const WTF::Vector<WebCore::IDBKeyPathElement, 0>&):
        * src/WebIDBKeyRange.cpp:
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        * src/WebIDBTransactionCallbacksImpl.cpp:
        * src/WebIDBTransactionCallbacksImpl.h:
        * src/WebIDBTransactionImpl.cpp:
        * src/WebIDBTransactionImpl.h:

2011-03-30  Jeremy Orlow  <jorlow@chromium.org>

        Reviewed by Nate Chapin.

        Clean up IndexedDB WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=57507

        Rename the backend proxy files that didn't have Backend in their name.
        Everything in WebKit should be in the WebKit namespace.
        Put everything behind the feature flag so we're consistient.
        Put the feature flag #if above includes.

        * WebKit.gyp:
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::create):
        (WebKit::IDBCallbacksProxy::IDBCallbacksProxy):
        (WebKit::IDBCallbacksProxy::onError):
        (WebKit::IDBCallbacksProxy::onSuccess):
        * src/IDBCallbacksProxy.h:
        * src/IDBCursorBackendProxy.cpp:
        (WebKit::IDBCursorBackendProxy::create):
        (WebKit::IDBCursorBackendProxy::IDBCursorBackendProxy):
        * src/IDBCursorBackendProxy.h:
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::create):
        (WebKit::IDBDatabaseBackendProxy::IDBDatabaseBackendProxy):
        (WebKit::IDBDatabaseBackendProxy::~IDBDatabaseBackendProxy):
        (WebKit::IDBDatabaseBackendProxy::name):
        (WebKit::IDBDatabaseBackendProxy::version):
        (WebKit::IDBDatabaseBackendProxy::objectStoreNames):
        (WebKit::IDBDatabaseBackendProxy::createObjectStore):
        (WebKit::IDBDatabaseBackendProxy::deleteObjectStore):
        (WebKit::IDBDatabaseBackendProxy::setVersion):
        (WebKit::IDBDatabaseBackendProxy::transaction):
        (WebKit::IDBDatabaseBackendProxy::close):
        (WebKit::IDBDatabaseBackendProxy::open):
        * src/IDBDatabaseCallbacksProxy.cpp:
        (WebKit::IDBDatabaseCallbacksProxy::create):
        (WebKit::IDBDatabaseCallbacksProxy::IDBDatabaseCallbacksProxy):
        * src/IDBDatabaseCallbacksProxy.h:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):
        (WebKit::IDBFactoryBackendProxy::open):
        * src/IDBFactoryBackendProxy.h:
        * src/IDBIndexBackendProxy.cpp:
        (WebKit::IDBIndexBackendProxy::create):
        (WebKit::IDBIndexBackendProxy::IDBIndexBackendProxy):
        * src/IDBIndexBackendProxy.h:
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::create):
        (WebKit::IDBObjectStoreBackendProxy::IDBObjectStoreBackendProxy):
        (WebKit::IDBObjectStoreBackendProxy::~IDBObjectStoreBackendProxy):
        (WebKit::IDBObjectStoreBackendProxy::name):
        (WebKit::IDBObjectStoreBackendProxy::keyPath):
        (WebKit::IDBObjectStoreBackendProxy::indexNames):
        (WebKit::IDBObjectStoreBackendProxy::get):
        (WebKit::IDBObjectStoreBackendProxy::put):
        (WebKit::IDBObjectStoreBackendProxy::deleteFunction):
        (WebKit::IDBObjectStoreBackendProxy::clear):
        (WebKit::IDBObjectStoreBackendProxy::createIndex):
        (WebKit::IDBObjectStoreBackendProxy::index):
        (WebKit::IDBObjectStoreBackendProxy::deleteIndex):
        (WebKit::IDBObjectStoreBackendProxy::openCursor):
        * src/IDBObjectStoreBackendProxy.h: Added.
        * src/IDBObjectStoreProxy.h: Removed.
        * src/IDBTransactionBackendProxy.cpp:
        (WebKit::IDBTransactionBackendProxy::create):
        (WebKit::IDBTransactionBackendProxy::IDBTransactionBackendProxy):
        (WebKit::IDBTransactionBackendProxy::objectStore):
        * src/IDBTransactionBackendProxy.h:
        (WebKit::IDBTransactionBackendProxy::getWebIDBTransaction):
        * src/IDBTransactionCallbacksProxy.cpp:
        (WebKit::IDBTransactionCallbacksProxy::create):
        (WebKit::IDBTransactionCallbacksProxy::IDBTransactionCallbacksProxy):
        * src/IDBTransactionCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onError):
        (WebKit::WebIDBCallbacksImpl::onSuccess):
        * src/WebIDBCallbacksImpl.h:
        * src/WebIDBCursorImpl.cpp:
        * src/WebIDBCursorImpl.h:
        * src/WebIDBDatabaseCallbacksImpl.cpp:
        (WebKit::WebIDBDatabaseCallbacksImpl::onVersionChange):
        * src/WebIDBDatabaseCallbacksImpl.h:
        * src/WebIDBDatabaseError.cpp:
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::WebIDBFactoryImpl):
        * src/WebIDBFactoryImpl.h:
        * src/WebIDBIndexImpl.cpp:
        * src/WebIDBIndexImpl.h:
        * src/WebIDBKey.cpp:
        (WebKit::WebIDBKey::createFromValueAndKeyPath):
        (WebKit::WebIDBKey::injectIDBKeyIntoSerializedValue):
        * src/WebIDBKeyPath.cpp:
        (WebKit::WebIDBKeyPath::operator const WTF::Vector<IDBKeyPathElement, 0>&):
        * src/WebIDBKeyRange.cpp:
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        * src/WebIDBTransactionCallbacksImpl.cpp:
        * src/WebIDBTransactionCallbacksImpl.h:
        * src/WebIDBTransactionImpl.cpp:
        * src/WebIDBTransactionImpl.h:

2011-03-30  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [chromium] script formatting doesn't work when all scripts are concatenated.
        https://bugs.webkit.org/show_bug.cgi?id=57446

        * WebKit.gyp:
        * scripts/inline_js_imports.py: Added.

2011-03-31  Victoria Kirst  <vrk@google.com>

        Reviewed by Eric Carlson.

        [chromium] Implement preload=none, setPreload hooks to media player
        https://bugs.webkit.org/show_bug.cgi?id=56983

        This patch implements preload=none in Chromium. It also replaces
        the now-deprecated setAutobuffer method with setPreload.

        * public/WebMediaPlayer.h:
        (WebKit::WebMediaPlayer::setPreload):
        * public/WebMediaPlayerClient.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::preload):
        (WebKit::WebMediaPlayerClientImpl::load):
        (WebKit::WebMediaPlayerClientImpl::loadInternal):
        (WebKit::WebMediaPlayerClientImpl::prepareToPlay):
        (WebKit::WebMediaPlayerClientImpl::setPreload):
        (WebKit::WebMediaPlayerClientImpl::startDelayedLoad):
        (WebKit::WebMediaPlayerClientImpl::WebMediaPlayerClientImpl):
        * src/WebMediaPlayerClientImpl.h:

2011-03-31  Evan Martin  <evan@chromium.org>

        Reviewed by Eric Seidel.

        <title> should support dir attribute
        https://bugs.webkit.org/show_bug.cgi?id=50961

        Update to new FrameLoaderClient interface.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidReceiveTitle):
        (WebKit::FrameLoaderClientImpl::setTitle):
        * src/FrameLoaderClientImpl.h:
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::pageTitle):

2011-03-30  David Levin  <levin@chromium.org>

        Reviewed by Dmitry Titov.

        UnlockNonLocked condition reached in WorkerFileSystemsCallbackBridge::mayPostTaskToWorker
        https://bugs.webkit.org/show_bug.cgi?id=57382

        There were two issues to address:
        1. The use of a non-thread safe class (RefPtr) in a ThreadSafeRefCounted class.
           The problem was that this RefPtr could be changed on either thread.
        2. Keeping WorkerFileSystemCallbacksBridge alive for while it was being used
           including while its mutex was in use.

        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::runTaskOnMainThread):
        Changed to take a PassRefPtr and leak the ref count as opposed to relying on
        dispatchTaskToMainThread to store the pointer in m_selfRef.
        (WebKit::WorkerFileSystemCallbacksBridge::dispatchTaskToMainThread): Remove the
        m_selfRef and hand off a PassRefPtr instead.
        (WebKit::WorkerFileSystemCallbacksBridge::mayPostTaskToWorker): Balance out the leaked ref
        and ensure that WorkerFileSystemCallbacksBridge stays alive while the mutex is held.
        * src/WorkerFileSystemCallbacksBridge.h: Removed m_selfRef and derefIfWorkerIsStopped which
          was simply due to m_selfRef.

2011-03-29  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Tony Chang.

        [chromium]: Remove the code that called WebViewClient for spelling now that chromium is updated
        https://bugs.webkit.org/show_bug.cgi?id=57396

        * DEPS:
        * public/WebFrame.h:
        * public/WebView.h:
        * public/WebViewClient.h:
        (WebKit::WebViewClient::handleCurrentKeyboardEvent):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::checkSpellingOfString):
        (WebKit::EditorClientImpl::requestCheckingOfString):
        (WebKit::EditorClientImpl::getAutoCorrectSuggestionForMisspelledWord):
        (WebKit::EditorClientImpl::updateSpellingUIWithMisspelledWord):
        (WebKit::EditorClientImpl::showSpellingUI):
        (WebKit::EditorClientImpl::spellingUIIsShowing):
        * src/WebViewImpl.cpp:
        (WebKit::WebView::create):
        * src/WebViewImpl.h:
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::initializeLoader):
        * tests/PopupMenuTest.cpp:
        (WebKit::SelectPopupMenuTest::SetUp):
        * tests/WebFrameTest.cpp:
        (WebKit::TEST_F):
        * tests/WebPageSerializerTest.cpp:
        (WebKit::WebPageSerializerTest::SetUp):

2011-03-30  MORITA Hajime  <morrita@google.com>

        Reviewed by Dimitri Glazkov.

        [Chromium] Expose the shadow DOM to DumpRenderTree JS tests.
        https://bugs.webkit.org/show_bug.cgi?id=56573

        Added:
        - WebBindins::makeNode() to convert WebNode to a JS object, and
        - WebElement::shadowRoot().

        * public/WebBindings.h:
        * public/WebElement.h:
        * src/WebBindings.cpp:
        (WebKit::makeNodeImpl):
        (WebKit::WebBindings::makeNode):
        * src/WebElement.cpp:
        (WebKit::WebElement::shadowRoot):

2011-03-30  Mario Sanchez Prada  <msanchez@igalia.com>

        Reviewed by Chris Fleizach.

        AX: GTK: ARIA role is not respected on <p> <label> <div> and <form>
        https://bugs.webkit.org/show_bug.cgi?id=47636

        Duplicate new internal WebCore roles in the Chromium port.

        * public/WebAccessibilityRole.h: Update enumeration
        WebAccessibilityRole to reflect newly added roles in WebCore.
        * src/AssertMatchingEnums.cpp: Added new assertions.

2011-03-30  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: split debugger agent into Page and Worker-specific ones
        https://bugs.webkit.org/show_bug.cgi?id=57345

        ScriptDebugServer and InspectorDebuggerAgent contain only functionality common
        for Worker and Page debugger. All specifics is moved into Page/WorkerScriptDebugServer
        and Page/WorkerDebuggerAgent.

        * src/DebuggerAgentManager.cpp:
        (WebKit::DebuggerAgentManager::setExposeV8DebuggerProtocol):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::interruptAndDispatch):
        (WebKit::WebDevToolsAgent::processPendingMessages):

2011-03-30  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Rollout r82438 and r82436.

        * src/DebuggerAgentManager.cpp:
        (WebKit::DebuggerAgentManager::setExposeV8DebuggerProtocol):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::interruptAndDispatch):
        (WebKit::WebDevToolsAgent::processPendingMessages):

2011-03-30  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: split debugger agent into Page and Worker-specific ones
        https://bugs.webkit.org/show_bug.cgi?id=57345

        ScriptDebugServer and InspectorDebuggerAgent contain only functionality common
        for Worker and Page debugger. All specifics is moved into Page/WorkerScriptDebugServer
        and Page/WorkerDebuggerAgent.

        * src/DebuggerAgentManager.cpp:
        (WebKit::DebuggerAgentManager::setExposeV8DebuggerProtocol):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::interruptAndDispatch):
        (WebKit::WebDevToolsAgent::processPendingMessages):

2011-03-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r82293.
        http://trac.webkit.org/changeset/82293
        https://bugs.webkit.org/show_bug.cgi?id=57390

        Breaks RetrieveCSSResources (Requested by abarth|gardener on
        #webkit).

        * WebKit.gyp:
        * src/WebPageSerializer.cpp:
        (WebCore::getSubResourceURLFromElement):
        (WebCore::retrieveResourcesForElement):
        (WebCore::retrieveResourcesForFrame):
        (WebKit::WebPageSerializer::retrieveAllResources):
        * tests/WebPageSerializerTest.cpp:
        * tests/data/pageserialization/css_test_page.html: Removed.
        * tests/data/pageserialization/import_style_from_link.css: Removed.
        * tests/data/pageserialization/import_styles.css: Removed.
        * tests/data/pageserialization/link_styles.css: Removed.

2011-03-29  Tony Chang  <tony@chromium.org>

        Roll chromium version to r79710 to pick up libpng changes.

        * DEPS:

2011-03-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r82295 and r82300.
        http://trac.webkit.org/changeset/82295
        http://trac.webkit.org/changeset/82300
        https://bugs.webkit.org/show_bug.cgi?id=57380

        This patch breaks compile on Chromium (Requested by
        abarth|gardener on #webkit).

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2011-03-29  Mario Sanchez Prada  <msanchez@igalia.com>

        Reviewed by Adam Barth.

        REGRESSION(r82295): This patch does not compile on Chromium (Requested by abarth|gardener on #webkit).
        https://bugs.webkit.org/show_bug.cgi?id=57377

        Fix build errors on Chromium bots.

        * public/WebAccessibilityRole.h: Update to reflect newly added roles in WebCore.
        * src/AssertMatchingEnums.cpp: Ditto.

2011-03-29  Adam Barth  <abarth@webkit.org>

        Roll Chromium DEPS
        https://bugs.webkit.org/show_bug.cgi?id=57361

        * DEPS:

2011-03-29  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by David Levin.

        Adding retrieval off CSS resources to WebPageSerializer::retrieveAllResources.
        https://bugs.webkit.org/show_bug.cgi?id=56650

        * WebKit.gyp:
        * src/WebPageSerializer.cpp:
        (WebCore::getResourceAttributeForElement):
        (WebCore::retrieveStyleSheetForElement):
        (WebCore::retrieveResourcesForElement):
        (WebCore::retrieveResourcesForFrame):
        (WebCore::retrieveResourcesForCSSRule):
        (WebCore::retrieveResourcesForCSSStyleDeclaration):
        (WebCore::retrieveResourcesForCSSStyleSheet):
        (WebKit::WebPageSerializer::retrieveAllResources):
        * tests/WebPageSerializerTest.cpp:
        (WebKit::TestWebFrameClient::TestWebFrameClient):
        (WebKit::TestWebFrameClient::allowScript):
        (WebKit::WebPageSerializerTest::enableJS):
        (WebKit::WebPageSerializerTest::runOnLoad):
        (WebKit::TEST_F):
        * tests/data/pageserialization/css_test_page.html: Added.
        * tests/data/pageserialization/import_style_from_link.css: Added.
        (#divOrange):
        * tests/data/pageserialization/import_styles.css: Added.
        (#divYellow):
        * tests/data/pageserialization/link_styles.css: Added.
        (#divRed):

2011-03-29  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Inspector does not always shows transferred size correctly (e.g. gzipped/chunked content)
        https://bugs.webkit.org/show_bug.cgi?id=56602

        Added new methods to interface while keeping the old ones to keep
        chromium working until it is also patched.

        * public/WebURLLoaderClient.h:
        (WebKit::WebURLLoaderClient::didReceiveData2):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):
        (WebCore::ResourceHandleInternal::didReceiveData2):

2011-03-29  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] DevTools shows two resources for each plugin resource loaded
        https://bugs.webkit.org/show_bug.cgi?id=57101

        Remove DevToolsAgent network callbacks as this information is now available through ResourceLoader

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:

2011-03-29  Emil A Eklund  <eae@chromium.org>

        Reviewed by Dimitri Glazkov.

        Relative mouse coordinates recalculated for each target
        https://bugs.webkit.org/show_bug.cgi?id=57130

        * public/WebDOMMouseEvent.h:
        * src/WebDOMMouseEvent.cpp:
        (WebKit::WebDOMMouseEvent::layerX):
        (WebKit::WebDOMMouseEvent::layerY):
        (WebKit::WebDOMMouseEvent::offsetX):
        (WebKit::WebDOMMouseEvent::offsetY):

2011-03-29  Yuta Kitamura  <yutak@chromium.org>

        Unreviewed, rolling out r82195.
        http://trac.webkit.org/changeset/82195
        https://bugs.webkit.org/show_bug.cgi?id=56602

        Broke Chromium Clang builds.

        * public/WebDevToolsAgent.h:
        * public/WebURLLoaderClient.h:
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::didReceiveData):
        * src/WebDevToolsAgentImpl.h:

2011-03-29  Yuta Kitamura  <yutak@chromium.org>

        Unreviewed. Another build fix. The last fix was incorrect.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::supportsFullscreenForNode):
        (WebKit::ChromeClientImpl::supportsFullScreenForElement):
        * src/ChromeClientImpl.h:

2011-03-29  Yuta Kitamura  <yutak@chromium.org>

        Unreviewed. Build fix for Chromium Clang bot.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::supportsFullscreenForNode):
        * src/ChromeClientImpl.h:

2011-03-28  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Inspector does not always shows transferred size correctly (e.g. gzipped/chunked content)
        https://bugs.webkit.org/show_bug.cgi?id=56602

        Added new methods to interface while keeping the old ones to keep
        chromium working until it is also patched.

        * public/WebDevToolsAgent.h:
        * public/WebURLLoaderClient.h:
        (WebKit::WebURLLoaderClient::didReceiveData):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::didReceiveData):
        * src/WebDevToolsAgentImpl.h:

2011-03-28  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        [chromium] have DRT write the png checksum into a png comment
        https://bugs.webkit.org/show_bug.cgi?id=57255

        * DEPS: Pull in version of chromium with comment writing

2011-03-28  Adele Peterson  <adele@apple.com>

        Build fix.

        * src/WebFrameImpl.cpp: (WebKit::WebFrameImpl::selectionStartHasSpellingMarkerFor):
        Call new selectionStartHasMarkerFor method instead of selectionStartHasSpellingMarkerFor.

2011-03-28  Pavel Feldman  <pfeldman@chromium.org>

        Not reviewed: fixed chromium build.

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::shouldInterruptForMessage):

2011-03-25  Andy Estes  <aestes@apple.com>

        Reviewed by Adele Peterson.

        REGRESSION (r70748): latest nightly builds kills AC_QuickTime.js
        https://bugs.webkit.org/show_bug.cgi?id=49016

        Update objectContentType() implementation to handle the
        shouldPreferPlugInsForImages flag.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::objectContentType):
        * src/FrameLoaderClientImpl.h:

2011-03-25  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by David Levin.

        Data race between ~WorkerFileSystemCallbacksBridge and runTasksOnWorkerThread
        https://bugs.webkit.org/show_bug.cgi?id=56138
        Stopped passing the WorkerFileSystemCallbacksBridge's reference to
        MainThreadFileSystemCallbacks so that in most cases (in normal cases)
        its reference is only maintained by WorkerThread.

        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::MainThreadFileSystemCallbacks::createLeakedPtr):
        (WebKit::MainThreadFileSystemCallbacks::MainThreadFileSystemCallbacks):
        (WebKit::WorkerFileSystemCallbacksBridge::mayPostTaskToWorker):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-03-24  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Dimitri Glazkov.

        [chromium] Add setters for various client interfaces, and add WebSpellCheckClient
        https://bugs.webkit.org/show_bug.cgi?id=57070

        * public/WebSpellCheckClient.h: Added.
        (WebKit::WebSpellCheckClient::spellCheck):
        (WebKit::WebSpellCheckClient::requestCheckingOfText):
        (WebKit::WebSpellCheckClient::autoCorrectWord):
        (WebKit::WebSpellCheckClient::showSpellingUI):
        (WebKit::WebSpellCheckClient::isShowingSpellingUI):
        (WebKit::WebSpellCheckClient::updateSpellingUIWithMisspelledWord):
        (WebKit::WebSpellCheckClient::~WebSpellCheckClient):
        * public/WebView.h:
        * public/WebViewClient.h:
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::checkSpellingOfString):
        (WebKit::EditorClientImpl::requestCheckingOfString):
        (WebKit::EditorClientImpl::getAutoCorrectSuggestionForMisspelledWord):
        (WebKit::EditorClientImpl::updateSpellingUIWithMisspelledWord):
        (WebKit::EditorClientImpl::showSpellingUI):
        (WebKit::EditorClientImpl::spellingUIIsShowing):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setWebDevToolsAgentClient):
        (WebKit::WebViewImpl::setWebAutoFillClient):
        (WebKit::WebViewImpl::setWebSpellCheckClient):
        (WebKit::WebViewImpl::WebViewImpl):
        * src/WebViewImpl.h:
        (WebKit::WebViewImpl::spellCheckClient):

2011-03-25  Cary Clark  <caryclark@google.com>

        Reviewed by Dimitri Glazkov.

        Add CGBitmapContext.h include to WebViewImpl.cpp
        https://bugs.webkit.org/show_bug.cgi?id=57097
        
        No tests. Exposes no new functionality.

        * src/WebViewImpl.cpp:

2011-03-25  Adam Klein  <adamk@chromium.org>

        Reviewed by David Levin.

        [chromium] Remove deprecated overload of openFileSystem for workers
        https://bugs.webkit.org/show_bug.cgi?id=57062

        * public/WebCommonWorkerClient.h:

2011-03-25  Chang Shu  <cshu@webkit.org>

        Reviewed by Ryosuke Niwa.

        rename Node::isContentEditable and all call sites to rendererIsEditable
        https://bugs.webkit.org/show_bug.cgi?id=54290

        This is part of the effort to separate JS API HTMLElement isContentEditable from
        internal Node::rendererIsEditable.

        * src/WebNode.cpp:
        (WebKit::WebNode::isContentEditable):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setFocus):
        (WebKit::WebViewImpl::setComposition):
        (WebKit::WebViewImpl::confirmComposition):

2011-03-25  Mikhail Naganov  <mnaganov@chromium.org>

        Roll forward Chromium deps to r79379 to pick up V8 3.2.4.2.

        * DEPS:

2011-03-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81916 and r81917.
        http://trac.webkit.org/changeset/81916
        http://trac.webkit.org/changeset/81917
        https://bugs.webkit.org/show_bug.cgi?id=57071

        broke a test on platforms that do not have QuickTime installed
        (Requested by estes on #webkit).

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::objectContentType):
        * src/FrameLoaderClientImpl.h:

2011-03-24  Min Qin  <qinmin@google.com>

        Reviewed by James Robinson.

        Allow WebMediaPlayerClient to notify MediaPlayer that the playback state has changed

        https://bugs.webkit.org/show_bug.cgi?id=56837

        * public/WebMediaPlayerClient.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::playbackStateChanged):
        * src/WebMediaPlayerClientImpl.h:

2011-03-23  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Get rid of WEB_TEXT_CHECKING_RESULT_IS_A_STRUCT since it&apos;s not needed anymore
        https://bugs.webkit.org/show_bug.cgi?id=56955

        * DEPS:
        * public/WebTextCheckingResult.h:

2011-03-24  Bill Budge  <bbudge@chromium.org>

        Reviewed by Eric Seidel.

        Change a forward declaration of WebURLLoaderOptions to struct to prevent a build break in Chromium.
        https://bugs.webkit.org/show_bug.cgi?id=57064

        No tests. Exposes no new functionality.

        * public/WebFrame.h:

2011-03-24  Andy Estes  <aestes@apple.com>

        Fix the chromium build.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::objectContentType):

2011-03-24  Andy Estes  <aestes@apple.com>

        Reviewed by Darin Adler.

        REGRESSION (r70748): latest nightly builds kills AC_QuickTime.js
        https://bugs.webkit.org/show_bug.cgi?id=49016

        Update objectContentType() implementation to handle the
        shouldPreferPlugInsForImages flag.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::objectContentType):
        * src/FrameLoaderClientImpl.h:

2011-03-24  Bill Budge  <bbudge@chromium.org>

        Reviewed by Dmitry Titov.

        Add an overloaded WebFrame::createAssociatedURLLoader method that takes WebURLLoaderOptions, so clients can specify CORS options to allow cross-origin requests.
        https://bugs.webkit.org/show_bug.cgi?id=56885

        No new tests. Exposes no new functionality.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createAssociatedURLLoader):
        * src/WebFrameImpl.h:

2011-03-24  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Remove legacy version of findPlainText.
        https://bugs.webkit.org/show_bug.cgi?id=57056

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::scopeStringMatches):
        Replace use of legacy findPlainText with a version that
        takes an options parameter.

2011-03-24  Nat Duca  <nduca@chromium.org>

        Reviewed by Kenneth Russell.

        [chromium] Add traceEvents to compositor
        https://bugs.webkit.org/show_bug.cgi?id=56965

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):

2011-03-24  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add accessibilityObject accessor to WebDocument (needed for
        building an accessibility tree that includes iframes).
        https://bugs.webkit.org/show_bug.cgi?id=56984

        * public/WebDocument.h:
        * src/WebDocument.cpp:
        (WebKit::WebDocument::accessibilityObject):

2011-03-24  Ilya Sherman  <isherman@chromium.org>

        Reviewed by Dimitri Glazkov.

        Expose Node::isFocusable() in the Chromium WebKit API
        In service of https://code.google.com/p/chromium/issues/detail?id=72918
        https://bugs.webkit.org/show_bug.cgi?id=56809

        * public/WebNode.h:
        * src/WebNode.cpp:
        (WebKit::WebNode::isFocusable):

2011-03-24  Pavel Feldman  <pfeldman@chromium.org>

        Not reviewed: fix chromium compilation.

        * public/WebDevToolsAgent.h:

2011-03-24  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: brush up Network agent API.
        https://bugs.webkit.org/show_bug.cgi?id=57001

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::identifierForInitialRequest):
        (WebKit::WebDevToolsAgentImpl::willSendRequest):
        * src/WebDevToolsAgentImpl.h:

2011-03-24  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Ojan Vafai.

        [chromium] WebBindings::getRangeImpl() should NULL check its NPObject argument
        https://bugs.webkit.org/show_bug.cgi?id=56996

        * src/WebBindings.cpp:
        (WebKit::getRangeImpl):

2011-03-23  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Ojan Vafai.

        [chromium] WebBindings{.h,.cpp}: should use consistent argument naming
        https://bugs.webkit.org/show_bug.cgi?id=56898

        Address FIXME I noted/added in r81676.  Wanted to just copy/paste the checking
        code from elsewhere in the file, but inconsistent argument naming made it more
        difficult than it need be, so first step: use consistent naming.

        * public/WebBindings.h:
        * src/WebBindings.cpp:
        (WebKit::WebBindings::construct):
        (WebKit::WebBindings::enumerate):
        (WebKit::WebBindings::evaluate):
        (WebKit::WebBindings::evaluateHelper):
        (WebKit::WebBindings::getProperty):
        (WebKit::WebBindings::hasMethod):
        (WebKit::WebBindings::hasProperty):
        (WebKit::WebBindings::invoke):
        (WebKit::WebBindings::invokeDefault):
        (WebKit::WebBindings::releaseObject):
        (WebKit::WebBindings::removeProperty):
        (WebKit::WebBindings::retainObject):
        (WebKit::WebBindings::setException):
        (WebKit::WebBindings::setProperty):
        (WebKit::WebBindings::unregisterObject):
        (WebKit::WebBindings::extractIdentifierData):
        (WebKit::getRangeImpl):
        (WebKit::getElementImpl):
        (WebKit::makeIntArrayImpl):
        (WebKit::WebBindings::getRange):
        (WebKit::WebBindings::makeIntArray):

2011-03-23  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by David Levin.

        Relanding:
        Moving the method that is used to retrieve all the resources in
        a page from the Chromium code (dom_operations.cc) to WebKit.
        https://bugs.webkit.org/show_bug.cgi?id=55859

        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * public/WebURL.h:
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebVector.h:
        (WebKit::WebVector::contains):
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebPageSerializer.cpp:
        (WebCore::getSubResourceURLFromElement):
        (WebCore::retrieveResourcesForElement):
        (WebCore::retrieveResourcesForFrame):
        (WebKit::WebPageSerializer::retrieveAllResources):
        * tests/WebFrameTest.cpp:
        * tests/WebPageSerializerTest.cpp: Added.
        * tests/data/pageserialization/awesome.png: Added.
        * tests/data/pageserialization/embed_iframe.html: Added.
        * tests/data/pageserialization/object_iframe.html: Added.
        * tests/data/pageserialization/simple_iframe.html: Added.
        * tests/data/pageserialization/simple_page.html: Added.
        * tests/data/pageserialization/top_frame.html: Added.

2011-03-23  Kenneth Russell  <kbr@google.com>

        Rolled forward Chromium DEPS again to fix DumpRenderTree build
        failure caused by r81821.

        * DEPS:

2011-03-23  Kenneth Russell  <kbr@google.com>

        Rolled forward Chromium DEPS to fix build breakage after r81821.

        * DEPS:

2011-03-23  Kenneth Russell  <kbr@google.com>

        Reviewed by James Robinson.

        [chromium] WebGLRenderingContext and other DOMWindow properties should remain if WebGL is disabled
        https://bugs.webkit.org/show_bug.cgi?id=56947

        Removed the WebRuntimeFeatures setting for WebGL. WebGL support is
        now controlled exclusively through the page's Settings.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:

2011-03-23  Chris Rogers  <crogers@google.com>

        Reviewed by Kenneth Russell.

        Add API to retrieve the audio hardware sample-rate
        https://bugs.webkit.org/show_bug.cgi?id=56882

        * public/WebAudioDevice.h:
        * public/WebKitClient.h:
        (WebKit::WebKitClient::audioHardwareSampleRate):
        * src/AudioDestinationChromium.cpp:
        (WebCore::AudioDestination::hardwareSampleRate):

2011-03-23  Cris Neckar  <cdn@chromium.org>

        Reviewed by Eric Seidel.

        Add refptr for widget. Mutations can happen within the event handler.
        https://bugs.webkit.org/show_bug.cgi?id=56774

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleEvent):

2011-03-23  Viet-Trung Luu  <viettrungluu@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Add FormatPlainText to WebClipboard::Format enumeration.
        https://bugs.webkit.org/show_bug.cgi?id=56868

        Chromium's WebClipboard::isFormatAvailable() will be correspondingly
        extended.

        * public/WebClipboard.h:
        * src/AssertMatchingEnums.cpp:

2011-03-23  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: Remove DebuggerScript.js from Chromium resource bundle.
        https://bugs.webkit.org/show_bug.cgi?id=56916

        * DEPS: bump up Chromium dependency to the revision where no references to the DebuggerScript.js resource are left.
        * WebKit.grd:

2011-03-23  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: remove inspectNode method from WebDevToolsAgent
        https://bugs.webkit.org/show_bug.cgi?id=56926

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:

2011-03-23  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81686.
        http://trac.webkit.org/changeset/81686
        https://bugs.webkit.org/show_bug.cgi?id=56914

        Breaks webkit_tests in Chromium again. (Requested by pfeldman
        on #webkit).

        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * public/WebURL.h:
        * public/WebVector.h:
        (WebKit::WebVector::operator[]):
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebPageSerializer.cpp:
        * tests/WebFrameTest.cpp:
        * tests/WebPageSerializerTest.cpp: Removed.
        * tests/data/pageserialization/awesome.png: Removed.
        * tests/data/pageserialization/embed_iframe.html: Removed.
        * tests/data/pageserialization/object_iframe.html: Removed.
        * tests/data/pageserialization/simple_iframe.html: Removed.
        * tests/data/pageserialization/simple_page.html: Removed.
        * tests/data/pageserialization/top_frame.html: Removed.

2011-03-22  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [V8] Web Inspector: compile DebuggerScript.js into DebuggerScriptSource.h
        https://bugs.webkit.org/show_bug.cgi?id=56843

        * public/WebDevToolsAgentClient.h: the script source is now compiled along with the inspector code.
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::attach):

2011-03-22  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: remove obsolete methods from WebDevToolsAgentClient.h
        https://bugs.webkit.org/show_bug.cgi?id=56897

        * public/WebDevToolsAgentClient.h:

2011-03-22  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Tony Chang.

        [chromium] Remove identity from dragTargetDragEnter() function signature
        https://bugs.webkit.org/show_bug.cgi?id=56875

        First part of 3-sided patch.  Add new function signature sans identity.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::dragTargetDragEnter):
        * src/WebViewImpl.h:

2011-03-22  John Bauman  <jbauman@chromium.org>

        Reviewed by Kenneth Russell.

        Add support for preserveDrawingBuffer context creation attribute
        https://bugs.webkit.org/show_bug.cgi?id=56431

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::markContextChanged):
        (WebCore::GraphicsContext3DInternal::markLayerComposited):
        (WebCore::GraphicsContext3DInternal::layerComposited):
        (WebCore::GraphicsContext3D::layerComposited):
        * src/GraphicsContext3DInternal.h:

2011-03-22  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Make WebTextCheckingResult&apos;s members be public in preparation for converting it to a struct
        https://bugs.webkit.org/show_bug.cgi?id=56857

        * DEPS:
        * public/WebTextCheckingResult.h:

2011-03-22  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by David Levin.

        Relanding:
        Moving the method that is used to retrieve all the resources in
        a page from the Chromium code (dom_operations.cc) to WebKit.
        https://bugs.webkit.org/show_bug.cgi?id=55859


        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * public/WebURL.h:
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebVector.h:
        (WebKit::WebVector::contains):
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebPageSerializer.cpp:
        (WebCore::getSubResourceURLFromElement):
        (WebCore::retrieveResourcesForElement):
        (WebCore::retrieveResourcesForFrame):
        (WebKit::WebPageSerializer::retrieveAllResources):
        * tests/WebFrameTest.cpp:
        * tests/WebPageSerializerTest.cpp: Added.
        * tests/data/pageserialization/awesome.png: Added.
        * tests/data/pageserialization/embed_iframe.html: Added.
        * tests/data/pageserialization/object_iframe.html: Added.
        * tests/data/pageserialization/simple_iframe.html: Added.
        * tests/data/pageserialization/simple_page.html: Added.
        * tests/data/pageserialization/top_frame.html: Added.

2011-03-22  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Tony Chang.

        [chromium] Remove Gears from Chromium WebKit
        https://bugs.webkit.org/show_bug.cgi?id=56808

        Gears has been removed from Chromium 12. Remove Gears drag drop support
        from WebKit. That work lead to http://webkit.org/b/25916, a proposal to
        add native file drag drop, and its subsequent standardization in HTML5.

        * public/WebBindings.h:
        * public/WebView.h:
        * src/WebBindings.cpp:
        (WebKit::getRangeImpl): FIXME note added.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::dragTargetDragEnter):
        (WebKit::WebViewImpl::dragTargetDragLeave):
        (WebKit::WebViewImpl::dragTargetDrop):
        (WebKit::WebViewImpl::dragTargetDragEnterOrOver):
        * src/WebViewImpl.h:

2011-03-21  Adam Klein  <adamk@chromium.org>

        Reviewed by David Levin.

        [fileapi] Add URI resolution support to WorkerContext
        https://bugs.webkit.org/show_bug.cgi?id=55644

        Pass "create" bool through to allow opening
        a filesystem without allowing creation.

        * src/LocalFileSystemChromium.cpp:
        (WebCore::LocalFileSystem::readFileSystem):
        (WebCore::LocalFileSystem::requestFileSystem):
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::openFileSystemForWorker):
        * src/WebWorkerBase.h:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-03-21  Ilya Sherman  <isherman@chromium.org>

        Reviewed by James Robinson.

        Remove WebInputElement::isEnabledFormControl() from Chromium WebKit API
        Clients should instead call into WebFormControlElement::isEnabled().
        https://bugs.webkit.org/show_bug.cgi?id=56364

        * public/WebInputElement.h: Removed isEnabledFormControl().
        * src/WebInputElement.cpp: Removed isEnabledFormControl().

2011-03-21  Robert Kroeger  <rjkroege@chromium.org>

        Reviewed by Antonio Gomes.

        Flag to enable a platform specific GestureReocognizer framework in Chromium.

        https://bugs.webkit.org/show_bug.cgi?id=49345

        * features.gypi:

2011-03-21  Tony Chang  <tony@chromium.org>

        Reviewed by Pavel Feldman.

        [chromium] remove devtools_html's dependency on WebKit.gypi
        https://bugs.webkit.org/show_bug.cgi?id=56661

        We want to depend on the values in the gypi file, not the gypi file
        itself.  Actually, if someone edits a gypi file, s/he should re-run
        gyp to pick up the new dependencies.

        It turns out that this doesn't matter much for this target anymore
        since we pull the .js dependencies from the inspector html file.

        * WebKit.gyp: cleanup dependencies
        * scripts/generate_devtools_html.py: remove unused param

2011-03-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81377.
        http://trac.webkit.org/changeset/81377
        https://bugs.webkit.org/show_bug.cgi?id=56765

        WebPageSerializerTest.MultipleFrames is broken (Requested by
        simonjam on #webkit).

        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * public/WebURL.h:
        * public/WebVector.h:
        (WebKit::WebVector::operator[]):
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebPageSerializer.cpp:
        * tests/WebFrameTest.cpp:
        * tests/WebPageSerializerTest.cpp: Removed.
        * tests/data/pageserialization/awesome.png: Removed.
        * tests/data/pageserialization/embed_iframe.html: Removed.
        * tests/data/pageserialization/object_iframe.html: Removed.
        * tests/data/pageserialization/simple_iframe.html: Removed.
        * tests/data/pageserialization/simple_page.html: Removed.
        * tests/data/pageserialization/top_frame.html: Removed.

2011-03-21  Daniel Sievers  <sievers@google.com>

        Reviewed by Simon Fraser.

        [Chromium] Make RenderAsTextBehavior and LayerTreeAsTextBehavior tweakable from the DumpRenderTree commandline
        https://bugs.webkit.org/show_bug.cgi?id=56139

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::renderTreeAsText):
        (WebKit::WebFrameImpl::layerTreeAsText):
        * src/WebFrameImpl.h:

2011-03-21  Eric Uhrhane <ericu@chromium.org>

        Reviewed by David Levin.

        [fileapi/chromium] Fetch platform path using GetMetadata before creating File from FileEntry*
        https://bugs.webkit.org/show_bug.cgi?id=56704

        * src/WebFileSystemCallbacksImpl.cpp:
        (WebFileSystemCallbacksImpl::didReadMetadata)
        Pass new platformPath member through.

        * src/WorkerFileSystemCallbacksBridge.cpp:
        (CrossThreadCopierBase)
        Copy new platformPath member.

        * public/WebFileInfo.h:
        (struct WebFileInfo)
        Add new platformPath member.

2011-03-21  Leandro Gracia Gil  <leandrogracia@chromium.org>

        Reviewed by Steve Block.

        Media Stream API patch 0: adding compilation guards.
        https://bugs.webkit.org/show_bug.cgi?id=56458

        Enabling the feature by default for chromium builds.

        * features.gypi:

2011-03-21  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: Inspector does not always show correct transfer size (for compressed/chunked data)
        https://bugs.webkit.org/show_bug.cgi?id=56691

        Added transfer size support in inspector for compressed data.

        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::didReceiveData):

2011-03-20  Bill Budge  <bbudge@chromium.org>

        Reviewed by Adam Barth.

        Rename ThreadSafeShared to ThreadSafeRefCounted
        https://bugs.webkit.org/show_bug.cgi?id=56714

        No new tests. Exposes no new functionality.

        * src/PlatformMessagePortChannel.h:
        * src/WebWorkerBase.cpp:
        * src/WorkerFileSystemCallbacksBridge.h:
        * src/WorkerFileWriterCallbacksBridge.h:

2011-03-18  Tony Chang  <tony@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] make devtool concatenation targets conditional based on debug_devtools
        https://bugs.webkit.org/show_bug.cgi?id=56667

        We don't want to run these targets when debug_devtools=1 because it
        will overwrite the devtools.js and devtools.css files copied by
        inspector_resources.  On Linux, this triggers a warning because
        there are two commands that target the same output file when
        debug_devtools=1.

        I also removed the 'sources' lines since I don't think they do
        anything for actions.

        * WebKit.gyp:

2011-03-17  Alexey Marinichev  <amarinichev@chromium.org>

        Reviewed by Kenneth Russell.

        chromium: uninitialized field in WebViewImpl
        https://bugs.webkit.org/show_bug.cgi?id=56620

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):

2011-03-17  Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        [chromium] Turn off accelerated compositing for RTL style pages.
        https://bugs.webkit.org/show_bug.cgi?id=56585

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::layout):
        (WebKit::WebViewImpl::pageHasRTLStyle):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        * src/WebViewImpl.h:

2011-03-17  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by David Levin.

        Moving the method that is used to retrieve all the resources in
        a page from the Chromium code (dom_operations.cc) to WebKit.
        https://bugs.webkit.org/show_bug.cgi?id=55859

        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * public/WebURL.h:
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebVector.h:
        (WebKit::WebVector::contains):
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebPageSerializer.cpp:
        (WebCore::getSubResourceURLFromElement):
        (WebCore::retrieveResourcesForElement):
        (WebCore::retrieveResourcesForFrame):
        (WebKit::WebPageSerializer::retrieveAllResources):
        * tests/WebFrameTest.cpp:
        * tests/WebPageSerializerTest.cpp: Added.
        * tests/data/pageserialization: Added.
        * tests/data/pageserialization/awesome.png: Added.
        * tests/data/pageserialization/embed_iframe.html: Added.
        * tests/data/pageserialization/object_iframe.html: Added.
        * tests/data/pageserialization/simple_iframe.html: Added.
        * tests/data/pageserialization/simple_page.html: Added.
        * tests/data/pageserialization/top_frame.html: Added.

2011-03-17  Tony Chang  <tony@chromium.org>

        Reviewed by Pavel Feldman.

        [chromium] don't concatenate devtools files when debug_devtools=1
        https://bugs.webkit.org/show_bug.cgi?id=56572

        * WebKit.gyp:

2011-03-17  Tony Chang  <tony@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] minor cleanup of devtools_files variable in WebKit.gyp
        https://bugs.webkit.org/show_bug.cgi?id=56503

        * WebKit.gyp: Moving duplicate variables out of a condition.

2011-03-16  Adam Barth  <abarth@webkit.org>

        Reviewed by James Robinson.

        Remove USE(BUILTIN_UTF8_CODEC)
        https://bugs.webkit.org/show_bug.cgi?id=56508

        * features.gypi:

2011-03-16  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        [chromium] include inspector gif files in the list of resources
        https://bugs.webkit.org/show_bug.cgi?id=56504

        * scripts/generate_devtools_grd.py:

2011-03-16  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No new tests. Exposes no new functionality.

        * public/WebURLLoader.h:
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::isDocumentThreadableLoaderClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:

2011-03-16  Adam Barth  <abarth@webkit.org>

        Roll Chromium DEPS.

        * DEPS:

2011-03-16  Daniel Sievers  <sievers@google.com>

        Reviewed by James Robinson.

        Add setting to always force compositing mode
        https://bugs.webkit.org/show_bug.cgi?id=56156

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setForceCompositingMode):
        * src/WebSettingsImpl.h:

2011-03-16  Sreeram Ramachandran  <sreeram@google.com>

        Reviewed by Dimitri Glazkov.

        Revert of r80451. Decided to do this in WebCore instead.
        https://bugs.webkit.org/show_bug.cgi?id=55844

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-03-15  Ilya Sherman  <isherman@chromium.org>

        Reviewed by Darin Fisher.

        Move isReadOnly() from WebInputElement to WebFormControlElement
        https://bugs.webkit.org/show_bug.cgi?id=55760

        * public/WebFormControlElement.h:
        * public/WebInputElement.h:
        * src/WebFormControlElement.cpp:
        (WebKit::WebFormControlElement::isReadOnly):
        * src/WebInputElement.cpp:

2011-03-15  John Bauman  <jbauman@chromium.org>

        Reviewed by Kenneth Russell.

        Non-premultiplied-alpha canvas attribute is ignore for toDataURL, drawImage, texImage2D
        https://bugs.webkit.org/show_bug.cgi?id=56238

        Add support for reading a webgl context into an ImageData.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToImageData):
        * src/GraphicsContext3DInternal.h:

2011-03-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81144.
        http://trac.webkit.org/changeset/81144
        https://bugs.webkit.org/show_bug.cgi?id=56432

        It broke the ui test
        NPAPITesterBase.GetURLRedirectNotification. (Requested by
        dave_levin on #webkit).

        * public/WebURLLoader.h:
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        (WebKit::AssociatedURLLoader::prepareRequest):
        (WebKit::AssociatedURLLoader::willSendRequest):
        (WebKit::AssociatedURLLoader::didSendData):
        (WebKit::AssociatedURLLoader::didReceiveResponse):
        (WebKit::AssociatedURLLoader::didDownloadData):
        (WebKit::AssociatedURLLoader::didReceiveData):
        (WebKit::AssociatedURLLoader::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::didFinishLoading):
        (WebKit::AssociatedURLLoader::didFail):
        * src/AssociatedURLLoader.h:

2011-03-15  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        pngcrush images used by inspector
        https://bugs.webkit.org/show_bug.cgi?id=56426

        This saves 120k in WebCore and 8k in WebKit/chromium.  I ran
        pngcrush -brute, so none of the meta data (ancillary chunks)
        are modified.

        * src/js/Images/segmentChromium.png:
        * src/js/Images/segmentHoverChromium.png:
        * src/js/Images/segmentHoverEndChromium.png:
        * src/js/Images/segmentSelectedChromium.png:
        * src/js/Images/segmentSelectedEndChromium.png:
        * src/js/Images/statusbarBackgroundChromium.png:
        * src/js/Images/statusbarBottomBackgroundChromium.png:
        * src/js/Images/statusbarMenuButtonChromium.png:
        * src/js/Images/statusbarMenuButtonSelectedChromium.png:

2011-03-15  Michael Nordman  <michaeln@google.com>

        Reviewed by Alexey Proskuryakov.

        When initiating a main resource load, let the application cache
        know which frame the load is being conducted for. This patch doesn't
        resolve the following bug, but the additional WebFrame parameter
        should provide the chromium port with enough info to pick the
        "most appropiate" cached resource.
        https://bugs.webkit.org/show_bug.cgi?id=55505

        Also fixup a stale comment in stopLoadingInFrame.

        * public/WebApplicationCacheHost.h:
        (WebKit::WebApplicationCacheHost::willStartMainResourceRequest):
        * src/ApplicationCacheHost.cpp:
        (WebCore::ApplicationCacheHost::maybeLoadMainResource):
        (WebCore::ApplicationCacheHost::stopLoadingInFrame):

2011-03-15  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        [chromium] add a build target to create a grd file with devtool resources
        https://bugs.webkit.org/show_bug.cgi?id=56335

        Reland with a fix to avoid really long command lines on Windows.

        * WebKit.gyp:
        * scripts/generate_devtools_grd.py: Added.

2011-03-15  Alok priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Valgrind error due to uninitialized PluginLayerChromium::m_textureId
        https://bugs.webkit.org/show_bug.cgi?id=56390

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setBackingTextureId):
        (WebKit::WebPluginContainerImpl::platformLayer):

2011-03-15  Brett Wilson  <brettw@chromium.org>

        Reviewed by Adam Barth.

        Make WebConsoleMessage properly respect the log level.
        https://bugs.webkit.org/show_bug.cgi?id=56386

        * public/WebConsoleMessage.h:
        (WebKit::WebConsoleMessage::WebConsoleMessage):

2011-03-15  Tony Chang  <tony@chromium.org>

        Revert r81147 and r81149, broke the chromium win build.

        * WebKit.gyp:
        * scripts/generate_devtools_grd.py: Removed.

2011-03-15  Tony Chang  <tony@chromium.org>

        Fix chromium build using python 2.5 (with statement).

        * scripts/generate_devtools_grd.py:

2011-03-15  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        [chromium] add a build target to create a grd file with devtool resources
        https://bugs.webkit.org/show_bug.cgi?id=56335

        This is the webkit side of the fix for
        http://code.google.com/p/chromium/issues/detail?id=35793

        * WebKit.gyp:
        * scripts/generate_devtools_grd.py: Added.

2011-03-15  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No new tests. No new functionality exposed.

        * public/WebURLLoader.h:
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:

2011-03-15  Alok priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Remove unnecessary function WebPlugin::getBackingTextureId
        https://bugs.webkit.org/show_bug.cgi?id=56122

        It will be tested by Pepper2D and Pepper3D layout/smoke tests
        on the Chromium side.

        * public/WebPlugin.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::platformLayer):

2011-03-15  Mikhail Naganov  <mnaganov@chromium.org>

        Unreviewed. Update chromium deps to pick up the latest V8.

        * DEPS:

2011-03-14  Alexey Marinichev  <amarinichev@chromium.org>

        Reviewed by Kenneth Russell.

        Graphics Context is not properly recovered if the GPU process dies.
        https://bugs.webkit.org/show_bug.cgi?id=56148

        Split context recreation into two steps.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::reallocateRenderer):
        * src/WebViewImpl.h:

2011-03-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81094.
        http://trac.webkit.org/changeset/81094
        https://bugs.webkit.org/show_bug.cgi?id=56355

        Broke the chromium DRT related build. (Requested by dave_levin
        on #webkit).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::renderTreeAsText):
        (WebKit::WebFrameImpl::layerTreeAsText):
        * src/WebFrameImpl.h:

2011-03-14  Daniel Sievers  <sievers@google.com>

        Reviewed by Simon Fraser.

        [Chromium] Make RenderAsTextBehavior and LayerTreeAsTextBehavior tweakable from the DumpRenderTree commandline
        https://bugs.webkit.org/show_bug.cgi?id=56139

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::renderTreeAsText):
        (WebKit::WebFrameImpl::layerTreeAsText):
        * src/WebFrameImpl.h:

2011-03-14  John Knottenbelt  <jknotten@chromium.org>

        Reviewed by Steve Block.

        Detach Geolocation from Frame when Page destroyed.
        https://bugs.webkit.org/show_bug.cgi?id=52877

        Add accessors to the WebGeolocationClientMock to allow the number of
        pending geolocation permission requests to be queried.

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:
        (WebKit::WebGeolocationClientMock::numberOfPendingPermissionRequests):

2011-03-11  David Levin  <levin@chromium.org>

        Rollout the chromium deps roll as it adds a dependency on a header
        that the bots building for WebKit don't seem to have.

        Specifically gfx\gl\gl_context_egl.cc depends on d3dcompiler.h

        * DEPS:

2011-03-11  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Correct return type of WebClipboard::readImage.
        https://bugs.webkit.org/show_bug.cgi?id=56234

        Update the return type to reflect that we are returning a blob of PNG
        data, not a bitmap.

        * public/WebClipboard.h:
        (WebKit::WebClipboard::readImage):

2011-03-11  David Levin  <levin@chromium.org>

        Update chromium deps to pick up the skia roll.

        * DEPS:

2011-03-11  Adrienne Walker  <enne@google.com>

        Reviewed by Kenneth Russell.

        Add missing unit tests to TilingData.
        https://bugs.webkit.org/show_bug.cgi?id=54143

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-03-11  Anton D'Auria  <adauria@apple.com>

        Reviewed and landed by Brady Eidson.

        Add WebKit1 API to view and delete local storage
        https://bugs.webkit.org/show_bug.cgi?id=51878

        * src/StorageNamespaceProxy.cpp:
        (WebCore::StorageNamespaceProxy::clearOriginForDeletion):
        (WebCore::StorageNamespaceProxy::clearAllOriginsForDeletion):
        (WebCore::StorageNamespaceProxy::sync):
        * src/StorageNamespaceProxy.h:

2011-03-11  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add an accessibilityIsIgnored method to WebAccessibilityObject.
        https://bugs.webkit.org/show_bug.cgi?id=50969

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::accessibilityIsIgnored):

2011-03-11  Avi Drissman  <avi@google.com>

        Reviewed by Tony Chang.

        Fix missing initialization of new member variables.
        https://bugs.webkit.org/show_bug.cgi?id=50969

        * public/WebMenuItemInfo.h:
        (WebKit::WebMenuItemInfo::WebMenuItemInfo):

2011-03-11  Roland Steiner  <rolandsteiner@chromium.org>

        Reviewed by Ryosuke Niwa.

        Bug 55570 - Remove dependency of dom/InputElement.cpp on html/ and wml/
        https://bugs.webkit.org/show_bug.cgi?id=55570

        Add a virtual function toInputElement() to Node that has a default
        implementation of returning 0.
        For HTMLInputElement and WMLInputElement (which derive from InputElement)
        override this to return the object.
        Change all calling sites of the old toInputElement to use the new member
        function. This also allows us to save some casts.

        No new tests (refactoring).

        * src/WebInputElement.cpp:
        (WebKit::toWebInputElement):

2011-03-10  Takayoshi Kochi  <kochi@chromium.org>

        Reviewed by Tony Chang.

        Remove default parameter declaration for familiForChars(), which is no longer necessary.

        * public/gtk/WebFontInfo.h:

2011-03-10  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make updateAndDrawLayers argumentless.
        https://bugs.webkit.org/show_bug.cgi?id=55985

        Made the TilePainters and viewport parameters for
        LayerRendererChromium member variables instead of arguments on
        updateAndDrawLayers. In a future change, this will allows us to
        draw the layer tree without the WebView's assistance.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::scrollRootLayerRect):
        (WebKit::WebViewImpl::invalidateRootLayerRect):
        (WebKit::WebViewImplContentPainter::create):
        (WebKit::WebViewImplContentPainter::paint):
        (WebKit::WebViewImplContentPainter::WebViewImplContentPainter):
        (WebKit::WebViewImplScrollbarPainter::create):
        (WebKit::WebViewImplScrollbarPainter::paint):
        (WebKit::WebViewImplScrollbarPainter::WebViewImplScrollbarPainter):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::reallocateRenderer):
        (WebKit::WebViewImpl::updateLayerRendererViewport):
        * src/WebViewImpl.h:

2011-03-10  Tony Chang  <tony@chromium.org>

        Unreviewed, roll chromium version to r77259 to pick up
        webfontinfo api change.

        * DEPS:

2011-03-10  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80701.
        http://trac.webkit.org/changeset/80701
        https://bugs.webkit.org/show_bug.cgi?id=56126

        fast/dom/Geolocation/window-close-crash.html fails on Snow
        Leopard release builds (Requested by mihaip on #webkit).

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:

2011-03-10  Andrey Kosyakov  <caseq@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: better names for HAR export commands
        https://bugs.webkit.org/show_bug.cgi?id=56097

        Rename Export to HAR to Copy entry/network log as HAR
        Expose Copy as HAR unconditionally, remove related settings entry.

        * src/js/DevTools.js: removed override for resourceExportEnabled

2011-01-26  John Knottenbelt  <jknotten@chromium.org>

        Reviewed by Dmitry Titov.

        Detach Geolocation from Frame when Page destroyed.
        https://bugs.webkit.org/show_bug.cgi?id=52877

        Add accessors to the WebGeolocationClientMock to allow the number of
        pending geolocation permission requests to be queried.

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:
        (WebKit::WebGeolocationClientMock::numberOfPendingPermissionRequests):

2011-03-08  Hans Wennborg  <hans@chromium.org>

        Reviewed by Jeremy Orlow.

        IndexedDB: Add BackingStoreType parameter to IDBFactoryBackendInterface::open
        https://bugs.webkit.org/show_bug.cgi?id=55948

        Add a parameter that allows for selection of alternative backing store
        implementations.

        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::open):
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        (WebCore::IDBFactoryBackendProxy::open):
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):
        * src/WebIDBFactoryImpl.h:

2011-03-08  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by David Levin.

        Destroying WorkerFileSystemCallbacksBridge on main thread results in ASSERT in WorkerContext::Observer::~Observer
        https://bugs.webkit.org/show_bug.cgi?id=55895

        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::runTaskOnWorkerThread):
        Added stopObserving() so that releasing the bridge on the main thread
        (this could happen before or after the runTaskOnWorkerThread) does
        not cause the assertion error.

2011-03-08  Alok priyadarshi  <alokp@chromium.org>

        Reviewed by Dimitri Glazkov.

        Plugins needs a way to trigger style recalc
        https://bugs.webkit.org/show_bug.cgi?id=55242

        It will be tested by Pepper2D and Pepper3D layout/smoke tests
        on the Chromium side.
        
        * public/WebPluginContainer.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setBackingTextureId):
        * src/WebPluginContainerImpl.h:

2011-03-08  Andrei Popescu  <andreip@google.com>

        Reviewed by Steve Block.

        IDBCallbacks::onsuccess(IDBIndex*) is unused and should be removed.
        https://bugs.webkit.org/show_bug.cgi?id=55938

        * public/WebIDBCallbacks.h:
        * src/IDBCallbacksProxy.cpp:
        * src/IDBCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBCallbacksImpl.h:
        * src/WebIDBObjectStoreImpl.cpp:

2011-03-07  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Add support for DataTransferItems
        https://bugs.webkit.org/show_bug.cgi?id=55115

        Add new runtime enabled flag for data transfer items feature.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableDataTransferItems):
        (WebKit::WebRuntimeFeatures::isDataTransferItemsEnabled):

2011-03-07  Ryosuke Niwa  <rniwa@webkit.org>

        Chromium build fix.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):

2011-03-07  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Darin Adler.

        selectionHasStyle and selectionStartHasStyle should use EditingStyle
        https://bugs.webkit.org/show_bug.cgi?id=55902

        selectionHasStyle now takes a property id and a value instead of a CSSMutableStyleDeclaration.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): Calls selectionHasStyle.

2011-03-07  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Tony Chang.

        Add plumbing for paste support to ChromiumDataObject::types()
        https://bugs.webkit.org/show_bug.cgi?id=55792

        This requires a DEPS roll for a Chromium-side change to support DRT testing of
        event.dataTransfer.types.

        * DEPS:

2011-03-07  Takayoshi Kochi  <kochi@chromium.org>

        Reviewed by Tony Chang.

        Use preferred locale information when choosing fallback font using
        fontconfig on Linux platform.
        https://bugs.webkit.org/show_bug.cgi?id=55453

        Tests will be covered by Chromium side.

        * public/gtk/WebFontInfo.h:
        (WebKit::WebFontInfo::familyForChars): added 3rd parameter |preferredLocale|
        * public/linux/WebSandboxSupport.h:
        (WebKit::WebSandboxSupport::getFontFamilyForCharacters): added 3rd parameter |preferredLocale|
        * src/PlatformBridge.cpp:
        * src/gtk/WebFontInfo.cpp:

2011-03-07  James Robinson  <jamesr@chromium.org>

        Reviewed by Kenneth Russell.

        [chromium] Separate the &quot;update&quot; and &quot;draw&quot; portions of LayerRendererChromium&apos;s drawLayers function
        https://bugs.webkit.org/show_bug.cgi?id=54047

        Call updated LayerRendererChromium APIs.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::doComposite):

2011-03-07  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Replace WebKit2's decidePolicyForMIMEType with decidePolicyForResponse
        https://bugs.webkit.org/show_bug.cgi?id=55827

        Renamed FrameLoaderClient::dispatchDecidePolicyForMIMEType to dispatchDecidePolicyForResponse
        and pass the entire response, instead of just the MIMEType.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDecidePolicyForResponse):
        * src/FrameLoaderClientImpl.h:

2011-03-07  Marcus Bulach  <bulach@chromium.org>

        Reviewed by Dan Bernstein.

        WebViewImpl::focusedWebCoreFrame() should be const.
        https://bugs.webkit.org/show_bug.cgi?id=55870

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::focusedWebCoreFrame):
        * src/WebViewImpl.h:

2011-03-07  Eric Carlson  <eric.carlson@apple.com>

        Reviewed by Darin Adler.

        Add API to enumerate/delete files downloaded for <audio> and <video>
        https://bugs.webkit.org/show_bug.cgi?id=55267

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::registerSelf): Update for MediaEngineRegistrar change.

2011-03-07  Andrei Popescu  <andreip@google.com>

        Reviewed by Steve Block.

        IDBRequest::onSuccess(IDBObjectStore*) should be removed as it is unused.
        https://bugs.webkit.org/show_bug.cgi?id=55777

        * src/IDBCallbacksProxy.cpp:
        * src/IDBCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBCallbacksImpl.h:

2011-03-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80458.
        http://trac.webkit.org/changeset/80458
        https://bugs.webkit.org/show_bug.cgi?id=55863

        caused tests to crash on several chromium bots (Requested by
        ukai on #webkit).

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        (WebKit::AssociatedURLLoader::prepareRequest):
        (WebKit::AssociatedURLLoader::willSendRequest):
        (WebKit::AssociatedURLLoader::didSendData):
        (WebKit::AssociatedURLLoader::didReceiveResponse):
        (WebKit::AssociatedURLLoader::didDownloadData):
        (WebKit::AssociatedURLLoader::didReceiveData):
        (WebKit::AssociatedURLLoader::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::didFinishLoading):
        (WebKit::AssociatedURLLoader::didFail):
        * src/AssociatedURLLoader.h:

2011-03-07  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No tests needed. Exposes no new functionality.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:
        (WebKit::AssociatedURLLoaderOptions::AssociatedURLLoaderOptions):

2011-03-06  Sreeram Ramachandran  <sreeram@google.com>

        Reviewed by Dimitri Glazkov.

        Expose page dismissal event status through the WebKit API for chromium.
        https://bugs.webkit.org/show_bug.cgi?id=55844

        Chromium will find it useful to know the page dismissal status (i.e.,
        whether a frame is in the midst of executing a beforeunload or unload
        handler), so expose that information through the chromium port in the
        WebKit API.
     
        This is my second attempt at this patch. The previous one broke
        downstream Chromium builds of some unit tests which had classes derived
        from WebFrame (and thus became uninstantiable because of this new pure
        virtual method). Those have now been fixed (http://crrev.com/77101).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::pageDismissalEventBeingDispatched):
        * src/WebFrameImpl.h:

2011-03-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80436.
        http://trac.webkit.org/changeset/80436
        https://bugs.webkit.org/show_bug.cgi?id=55849

        Broke Chromium compile across the board (Requested by dglazkov
        on #webkit).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-03-06  Sreeram Ramachandran  <sreeram@google.com>

        Reviewed by Dimitri Glazkov.

        Expose page dismissal event status through the WebKit API for chromium
        https://bugs.webkit.org/show_bug.cgi?id=55844

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::pageDismissalEventBeingDispatched):
        * src/WebFrameImpl.h:

2011-03-05  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Dmitry Titov.

        [chromium] Add method to WebClipboard to read images from the clipboard.
        https://bugs.webkit.org/show_bug.cgi?id=55814

        * public/WebClipboard.h:
        (WebKit::WebClipboard::readImage):

2011-03-04  Adam Barth  <abarth@webkit.org>

        Reviewed by Dimitri Glazkov.

        Remove unneeded round-trips through ../Source in the Chromium GYP build
        https://bugs.webkit.org/show_bug.cgi?id=55795

        * WebKit.gyp:

2011-03-03  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Dimitri Glazkov.

        [chromium] Get rid of IsContentFiltered flags since they&apos;re not used anymore
        https://bugs.webkit.org/show_bug.cgi?id=55748

        * DEPS:
        * public/WebURLResponse.h:
        * src/WebURLResponse.cpp:

2011-03-04  James Su <suzhe@chromium.org>

        Reviewed by Dimitri Glazkov.

        [Chromium] keycode is always 0 when using non-Latin keyboard layout.
        https://bugs.webkit.org/show_bug.cgi?id=54939

        No intended functionality change.

        * src/mac/WebInputEventFactory.mm:
        (WebKit::windowsKeyCodeForKeyEvent): Use the same implementation
        provided in WebCore/platform/mac/KeyEventMac.mm.

2011-03-04  Zelidrag Hornung  <zelidrag@chromium.org>

        Reviewed by David Levin

        Expose ability to create instance of DOMFileSystem from Chromium side.
        https://bugs.webkit.org/show_bug.cgi?id=55618

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFileSystem):
        * src/WebFrameImpl.h:

2011-03-03  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Create a LayerChromium layerTreeAsText. Add HUD to
        LayerRendererChromium that draws compositor FPS and, optionally,
        the layer tree.
        https://bugs.webkit.org/show_bug.cgi?id=54710

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setShowFPSCounter):
        (WebKit::WebSettingsImpl::setShowPlatformLayerTree):
        * src/WebSettingsImpl.h:
        (WebKit::WebSettingsImpl::showFPSCounter):
        (WebKit::WebSettingsImpl::showPlatformLayerTree):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doComposite):

2011-03-03  Alexey Proskuryakov  <ap@apple.com>

        Removing an include of WebCoreKeyboardUIMode.h that Ive just added. It's already included
        via ChromeClient.h

        * src/ChromeClientImpl.h:

2011-03-02  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Darin Adler.

        REGRESSION (WebKit2): Tab keys no longer observe Full Keyboard Access
        https://bugs.webkit.org/show_bug.cgi?id=55633
        <rdar://problem/8963023>

        * src/ChromeClientImpl.cpp: (WebKit::ChromeClientImpl::keyboardUIMode):
        * src/ChromeClientImpl.h:
        Implement keyboardUIMode() instead of tabsToLinks(). No change in functionality, since
        this platform doesn't observe or have full keyboard access state.

2011-03-03  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80219.
        http://trac.webkit.org/changeset/80219
        https://bugs.webkit.org/show_bug.cgi?id=55680

        "Causes several media test crashes" (Requested by tonyg-cr on
        #webkit).

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        (WebKit::AssociatedURLLoader::prepareRequest):
        (WebKit::AssociatedURLLoader::willSendRequest):
        (WebKit::AssociatedURLLoader::didSendData):
        (WebKit::AssociatedURLLoader::didReceiveResponse):
        (WebKit::AssociatedURLLoader::didDownloadData):
        (WebKit::AssociatedURLLoader::didReceiveData):
        (WebKit::AssociatedURLLoader::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::didFinishLoading):
        (WebKit::AssociatedURLLoader::didFail):
        * src/AssociatedURLLoader.h:

2011-03-03  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add an equals() method to WebAccessibilityObject.
        https://bugs.webkit.org/show_bug.cgi?id=55631

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::equals):

2011-03-03  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: make selected call frame debugger presentation model property.
        https://bugs.webkit.org/show_bug.cgi?id=55582

        * src/js/Tests.js:

2011-03-03  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No tests needed. Exposes no new functionality.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:
        (WebKit::AssociatedURLLoaderOptions::AssociatedURLLoaderOptions):

2011-03-03  Steve Lacey  <sjl@chromium.org>

        Reviewed by Darin Fisher.

        Wire up webkit metrics changes to chromium changes.
        https://bugs.webkit.org/show_bug.cgi?id=54580

        * features.gypi:
        * public/WebMediaPlayer.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::decodedFrameCount):
        (WebKit::WebMediaPlayerClientImpl::droppedFrameCount):
        (WebKit::WebMediaPlayerClientImpl::audioDecodedByteCount):
        (WebKit::WebMediaPlayerClientImpl::videoDecodedByteCount):
        * src/WebMediaPlayerClientImpl.h:

2011-03-02  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Manually revert ChromiumDataObject changes.
        https://bugs.webkit.org/show_bug.cgi?id=55627

        * public/WebView.h:
        * src/WebDragData.cpp:
        (WebKit::WebDragData::initialize):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::dragTargetDragEnter):
        * src/WebViewImpl.h:

2011-03-02  David Grogan  <dgrogan@chromium.org>

        Reviewed by Jeremy Orlow.

        IndexedDB: fire versionchange events when calling setVersion
        https://bugs.webkit.org/show_bug.cgi?id=55095

        * WebKit.gyp:
        * src/IDBDatabaseCallbacksProxy.cpp: Copied from Source/WebCore/storage/IDBVersionChangeEvent.h.
        (WebCore::IDBDatabaseCallbacksProxy::create):
        (WebCore::IDBDatabaseCallbacksProxy::IDBDatabaseCallbacksProxy):
        (WebCore::IDBDatabaseCallbacksProxy::~IDBDatabaseCallbacksProxy):
        (WebCore::IDBDatabaseCallbacksProxy::onVersionChange):
        * src/IDBDatabaseCallbacksProxy.h: Copied from Source/WebCore/storage/IDBVersionChangeEvent.h.
        * src/IDBDatabaseProxy.cpp:
        (WebCore::IDBDatabaseProxy::setVersion):
        (WebCore::IDBDatabaseProxy::close):
        (WebCore::IDBDatabaseProxy::open):
        * src/IDBDatabaseProxy.h:
        * src/WebIDBDatabaseCallbacksImpl.cpp: Copied from Source/WebCore/storage/IDBVersionChangeEvent.cpp.
        (WebCore::WebIDBDatabaseCallbacksImpl::WebIDBDatabaseCallbacksImpl):
        (WebCore::WebIDBDatabaseCallbacksImpl::~WebIDBDatabaseCallbacksImpl):
        (WebCore::WebIDBDatabaseCallbacksImpl::onVersionChange):
        * src/WebIDBDatabaseCallbacksImpl.h: Copied from Source/WebCore/storage/IDBVersionChangeEvent.h.
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::setVersion):
        (WebKit::WebIDBDatabaseImpl::close):
        (WebKit::WebIDBDatabaseImpl::open):
        * src/WebIDBDatabaseImpl.h:

2011-03-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80139.
        http://trac.webkit.org/changeset/80139
        https://bugs.webkit.org/show_bug.cgi?id=55620

        failing and crashing tests on Snow Leopard bot (Requested by
        mihaip1 on #webkit).

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:

2011-03-02  Daniel Cheng  <dcheng@chromium.org>

        Revert frame-specific WebClipboard changes
        https://bugs.webkit.org/show_bug.cgi?id=55617

        This code is no longer needed since we've decided to use the original
        approach to copy/paste drag/drop handling in ClipboardChromium.

        * public/WebFrameClient.h:
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::clipboardReadAvailableTypes):
        (WebCore::PlatformBridge::clipboardReadData):
        (WebCore::PlatformBridge::clipboardReadFilenames):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::fromFrame):
        * src/WebFrameImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::dragTargetDragEnterNew):

2011-03-02  Tony Chang  <tony@chromium.org>

        Unreviewed, rolling chromium DEPS to r76362.

        https://bugs.webkit.org/show_bug.cgi?id=55564

        * DEPS:

2011-02-28  Jeremy Orlow  <jorlow@chromium.org>

        Reviewed by James Robinson.

        Split IDBCursor.value into IDBCursor.primaryKey and IDBCursor.value
        https://bugs.webkit.org/show_bug.cgi?id=55443

        * public/WebIDBCursor.h:
        (WebKit::WebIDBCursor::primaryKey):
        (WebKit::WebIDBCursor::value):
        * src/IDBCursorBackendProxy.cpp:
        (WebCore::IDBCursorBackendProxy::primaryKey):
        (WebCore::IDBCursorBackendProxy::value):
        * src/IDBCursorBackendProxy.h:
        * src/WebIDBCursorImpl.cpp:
        (WebKit::WebIDBCursorImpl::key):
        (WebKit::WebIDBCursorImpl::primaryKey):
        (WebKit::WebIDBCursorImpl::value):
        * src/WebIDBCursorImpl.h:

2011-03-02  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Add feature define for data transfer items
        https://bugs.webkit.org/show_bug.cgi?id=55510

        * features.gypi:

2011-01-26  John Knottenbelt  <jknotten@chromium.org>

        Detach Geolocation from Frame when Page destroyed.
        https://bugs.webkit.org/show_bug.cgi?id=52877

        Add accessors to the WebGeolocationClientMock to allow the number of
        pending geolocation permission requests to be queried.

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:
        (WebKit::WebGeolocationClientMock::numberOfPendingPermissionRequests):

2011-03-01  David Grogan  <dgrogan@chromium.org>

        Reviewed by Jeremy Orlow.

        IndexedDB: public webkit interfaces for firing versionchange events to IDBDatabase objects
        https://bugs.webkit.org/show_bug.cgi?id=55548

        * WebKit.gyp:
        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::createObjectStore):
        (WebKit::WebIDBDatabase::open):
        * public/WebIDBDatabaseCallbacks.h: Added.
        (WebKit::WebIDBDatabaseCallbacks::~WebIDBDatabaseCallbacks):
        (WebKit::WebIDBDatabaseCallbacks::onVersionChange):

2011-03-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80079.
        http://trac.webkit.org/changeset/80079
        https://bugs.webkit.org/show_bug.cgi?id=55547

        "Broke the Win debug build?" (Requested by dcheng on #webkit).

        * features.gypi:

2011-03-01  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Add feature define for data transfer items
        https://bugs.webkit.org/show_bug.cgi?id=55510

        * features.gypi:

2011-03-01  Jeremy Orlow  <jorlow@chromium.org>

        Reviewed by James Robinson.

        Add a primaryKey method to IDBCursor
        https://bugs.webkit.org/show_bug.cgi?id=55518

        In prep for https://bugs.webkit.org/show_bug.cgi?id=55443

        * public/WebIDBCursor.h:
        (WebKit::WebIDBCursor::primaryKey):

2011-02-28  Chang Shu  <cshu@webkit.org>

        Reviewed by Ryosuke Niwa.

        Remove the support of Frame::isContentEditable and its dependencies.
        https://bugs.webkit.org/show_bug.cgi?id=54292

        Remove the WebKit side implementation.

        * src/EditorClientImpl.cpp:
        * src/EditorClientImpl.h:

2011-02-28  Avi Drissman  <avi@google.com>

        Reviewed by James Robinson.

        WebCursorInfo needs to match enums in platform/Cursor.h
        https://bugs.webkit.org/show_bug.cgi?id=55094

        * public/WebCursorInfo.h:
        * src/AssertMatchingEnums.cpp:

2011-02-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r78789.
        http://trac.webkit.org/changeset/78789
        https://bugs.webkit.org/show_bug.cgi?id=55409

        Incorrect canvas fallback implementation (Requested by
        inferno-sec on #webkit).

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2011-02-28  Adam Klein  <adamk@chromium.org>

        Reviewed by Adam Barth.

        [fileapi] Implement LocalFileSystem.resolveLocalFileSystemURI
        https://bugs.webkit.org/show_bug.cgi?id=54774

        * src/LocalFileSystemChromium.cpp:
        (WebCore::LocalFileSystem::readFileSystem):
        Removed size argument to readFileSystem()

2011-02-27  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Darin Fisher.

        Pass frame history state in the context menu parameters.
        https://bugs.webkit.org/show_bug.cgi?id=55232

        * public/WebContextMenuData.h:
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):

2011-02-26  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to WebFrame.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::clearOpener):
        * src/WebFrameImpl.h:

2011-02-26  Pavel Feldman  <pfeldman@chromium.org>

        Not reviewed: rolling chromium DEPS.

        * DEPS:

2011-02-26  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        WebURLRequest, WebURLResponse properties should be passed to WebCore Layer
        https://bugs.webkit.org/show_bug.cgi?id=54489

        No tests needed. This is already tested by ui_tests, nacl_ui_tests, and nacl_sandbox_tests

        * src/WebURLRequest.cpp:
        (WebKit::WebURLRequestPrivateImpl::WebURLRequestPrivateImpl):
        (WebKit::WebURLRequest::downloadToFile):
        (WebKit::WebURLRequest::setDownloadToFile):
        * src/WebURLRequestPrivate.h:
        (WebKit::WebURLRequestPrivate::WebURLRequestPrivate):
        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponsePrivateImpl::WebURLResponsePrivateImpl):
        (WebKit::WebURLResponse::downloadFilePath):
        (WebKit::WebURLResponse::setDownloadFilePath):
        * src/WebURLResponsePrivate.h:

2011-02-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r79764.
        http://trac.webkit.org/changeset/79764
        https://bugs.webkit.org/show_bug.cgi?id=55295

        "broke Chromium builds" (Requested by rniwa on #webkit).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-02-26  David Dorwin  <ddorwin@chromium.org>

        Reviewed by Darin Fisher.

        Enable WebKit Full Screen API in Chromium. The element becomes the full size of the window, but the window is not yet full screen. Support is disabled by default.

        fullscreen javascript bindings not implemented for v8
        https://bugs.webkit.org/show_bug.cgi?id=44797

        * features.gypi:
        * public/WebSettings.h:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::supportsFullScreenForElement):
        (WebKit::ChromeClientImpl::enterFullScreenForElement):
        (WebKit::ChromeClientImpl::exitFullScreenForElement):
        (WebKit::ChromeClientImpl::fullScreenRendererChanged):
        * src/ChromeClientImpl.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFullScreenEnabled):
        * src/WebSettingsImpl.h:

2011-02-26  John Mellor  <johnme@chromium.org>

        Reviewed by Antonio Gomes.

        [chromium] WebFrameImpl::m_totalMatchCount should be an int
        https://bugs.webkit.org/show_bug.cgi?id=55134

        WebFrameImpl::m_totalMatchCount should be an int instead of a size_t since it can be -1.

        * src/WebFrameImpl.h:

2011-02-26  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to WebFrame.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::clearOpener):
        * src/WebFrameImpl.h:

2011-02-25  Tony Chang  <tony@chromium.org>

        Roll chromium deps to include RBGToHSL fix and ICU update.

        * DEPS:

2011-02-15  Brett Wilson  <brettw@chromium.org>

        Reviewed by Darin Fisher.

        Recover the mouse capture state when we recieve a mouse event where there is no longer a button down.
        https://bugs.webkit.org/show_bug.cgi?id=54503

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):

2011-02-24  James Robinson  <jamesr@chromium.org>

        Reviewed by Darin Fisher.

        Add a USE() macro to control use of the built-in UTF8 codec
        https://bugs.webkit.org/show_bug.cgi?id=55189

        Defaults USE(BUILTIN_UTF8_CODEC) to true for the Chromium port.

        * features.gypi:

2011-02-24  James Kozianski  <koz@chromium.org>

        Reviewed by Ojan Vafai.

        Add missing plumbing for registerProtocolHandler in ChromeClientImpl.
        https://bugs.webkit.org/show_bug.cgi?id=55112

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::registerProtocolHandler):

2011-02-24  James Robinson  <jamesr@chromium.org>

        Unreviewed, rolling out r79584.
        http://trac.webkit.org/changeset/79584
        https://bugs.webkit.org/show_bug.cgi?id=44797

        [chromium] Patch does not compile if ENABLE_FULLSCREEN_API is
        not set

        * features.gypi:
        * public/WebSettings.h:
        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:

2011-02-24  Andrew Wilson  <atwilson@chromium.org>

        Unreviewed, rolling out r79570.
        http://trac.webkit.org/changeset/79570
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Breaks chromium build because glue/mocks/mock_web_frame.h/cc
        was not updated

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-02-24  David Dorwin  <ddorwin@chromium.org>

        Reviewed by Eric Seidel.

        Enable WebKit Full Screen API in Chromium. The element becomes the full size of the window, but the window is not yet full screen. Support is disabled by default.

        fullscreen javascript bindings not implemented for v8
        https://bugs.webkit.org/show_bug.cgi?id=44797

        * features.gypi:
        * public/WebSettings.h:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::supportsFullScreenForElement):
        (WebKit::ChromeClientImpl::enterFullScreenForElement):
        (WebKit::ChromeClientImpl::exitFullScreenForElement):
        (WebKit::ChromeClientImpl::fullScreenRendererChanged):
        * src/ChromeClientImpl.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFullScreenEnabled):
        * src/WebSettingsImpl.h:

2011-02-24  Patrick Gansterer  <paroga@webkit.org>

        Reviewed by Eric Seidel.

        Rename PLATFORM(SKIA) to USE(SKIA)
        https://bugs.webkit.org/show_bug.cgi?id=55090

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):
        * src/GraphicsContext3DInternal.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):

2011-02-24  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Alexey Proskuryakov.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to WebFrame.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::clearOpener):
        * src/WebFrameImpl.h:

2011-02-24  Adam Klein  <adamk@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Add code to WebKit Chromium to allow access to NetworkStateNotifier
        https://bugs.webkit.org/show_bug.cgi?id=54516

        Add a new WebNetworkStateNotifier class with a single static method,
        setOnLine(), which dispatches to WebCore's singleton NetworkStateNotifier.

        * WebKit.gyp:
        * public/WebNetworkStateNotifier.h: Added.
        * src/WebNetworkStateNotifier.cpp: Added.
        (WebKit::WebNetworkStateNotifier::setOnLine):

2011-02-24  Robert Kroeger <rjkroege@chromium.org>

        Reviewed by Darin Fisher.

        Added timestamps to PlatformTouchEvent etc.

        PlatformTouchEvent doesn't have a timestamp and so
        eventSender.leapForward cannot be used for touchevent based tests.
        This change constructs PlatformTouchEvents with timestamps
        provided from a WebTouchEvent on chromium. It also adds an enum
        to make code referring to specific WebTouchPoints easier to read.

        [chromium] [WebCore] [android] Touch events are missing time stamps
        https://bugs.webkit.org/show_bug.cgi?id=53510

        * public/WebTouchPoint.h:
        (WebKit::WebTouchPoint::WebTouchPoint):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformTouchEventBuilder::PlatformTouchEventBuilder):

2011-02-23  Adam Barth  <abarth@webkit.org>

        Reviewed by James Robinson.

        [Chromium] Use WebKitClient for OSRandomSource instead of trying to talk to the file system in the sandbox
        https://bugs.webkit.org/show_bug.cgi?id=55093

        We need to get OS randomness from the WebKit client rather than try to
        get it from /dev/urandom directly because WebKit doesn't have access to
        the file system when running inside the Chromium sandbox.

        * WebKit.gyp:
        * src/ChromiumOSRandomSource.cpp: Added.

2011-02-23  Adam Barth  <abarth@webkit.org>

        Reviewed by James Robinson.

        Roll Chromium DEPS
        https://bugs.webkit.org/show_bug.cgi?id=55096

        Rolling to the future, like a truck.

        * DEPS:

2011-02-23  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Fisher.

        [Chromium] Add WebKitClient::cryptographicallyRandomValues
        https://bugs.webkit.org/show_bug.cgi?id=55073

        This patch adds a WebKit client API to get cryptographic randomness.
        We'll use this API to gather seed randomness while inside the sandbox.

        * public/WebKitClient.h:
        (WebKit::WebKitClient::cryptographicallyRandomValues):

2011-02-23  Kenneth Russell  <kbr@google.com>

        Unreviewed, rolling out r79387.
        https://bugs.webkit.org/show_bug.cgi?id=54885

        Reapply the code changes from r79038 since they weren't the root
        cause of the test timeouts.

        * src/WebKit.cpp:
        (WebKit::initialize):

2011-02-23  Takashi Toyoshima  <toyoshim@chromium.org>

        Reviewed by Shinichiro Hamaji.

        [chromium] Control-Up/Down should be PageUp/Down on Mac.
        https://bugs.webkit.org/show_bug.cgi?id=54606

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollViewWithKeyboard):

2011-02-22  Kenneth Russell  <kbr@google.com>

        Reviewed by James Robinson.

        Many tests started timing out on the chrome mac canaries around r79035
        https://bugs.webkit.org/show_bug.cgi?id=54885

        Revert the code changes, but not the Chromium DEPS roll, from
        r79038 to see whether this clears up the timing-out tests. Was not
        able to reproduce the timeouts locally with a Release mode build
        of DRT (on Snow Leopard).

        * src/WebKit.cpp:
        (WebKit::initialize):

2011-02-21  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] WebWorkerBase::openFileSystem confuses clang's -Woverloaded-virtual
        https://bugs.webkit.org/show_bug.cgi?id=54920

        Rename WebWorkerBase::openFileSystem() to openFileSystemForWorker() to
        make it obvious it's not an override of
        WebFrameClient::openFileSystem().

        Remove a failed attempt to override it in WebWorkerClientImpl (the
        override didn't change the behavior).

        No intended functionality change.

        * src/LocalFileSystemChromium.cpp:
        (WebCore::LocalFileSystem::requestFileSystem):
        Call new name.
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::openFileSystemForWorker):
        Rename openFileSystem() to openFileSystemForWorker().
        * src/WebWorkerBase.h:
        Rename openFileSystem() to openFileSystemForWorker().
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::allowDatabase):
        Remove unsuccessful (and pointless) override.

2011-02-22  Ilya Tikhonovsky  <loislo@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: flakyness of inspector tests.
        https://bugs.webkit.org/show_bug.cgi?id=54729

        As far as we have the protocol with sequence numbers we can simplify test harness support
        and drop out chomium specific methods.

        * src/js/DevTools.js:

2011-02-21  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: move source mapping from SourceFrame to ScriptsPanel.
        https://bugs.webkit.org/show_bug.cgi?id=54645

        * src/js/Tests.js:
        (.TestSuite.prototype._checkExecutionLine):

2011-02-21  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] PopupContainer::show() confuses clang's -Woverloaded-virtual
        https://bugs.webkit.org/show_bug.cgi?id=54923

        Rename PopupContainer::show() to showInRect(), to make it obvious it's
        not an override of ScrollView::show().

        No intended functionality change.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::applyAutoFillSuggestions):

2011-02-21  Nico Weber  <thakis@chromium.org>

        Reviewed by Kent Tamura.

        [chromium] ChromePluginPrintContext::begin() fails to override superclass method
        https://bugs.webkit.org/show_bug.cgi?id=54914

        Update subclass method signature to match superclass again. This
        regressed in http://trac.webkit.org/changeset/71964

        * src/WebFrameImpl.cpp:
        (WebKit::ChromePluginPrintContext::begin):

2011-02-17  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Kent Tamura.

        Rename Position::node() to Position::deprecatedNode()
        https://bugs.webkit.org/show_bug.cgi?id=54622

        Done the rename. All calls to node() are replaced by calls to deprecatedNode().

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setComposition): Check the nullity of startContainer() instead of startPosition()->node().
        (WebKit::WebViewImpl::confirmComposition): Ditto.
        (WebKit::WebViewImpl::textInputType):
        (WebKit::WebViewImpl::caretOrSelectionBounds):

2011-02-19  Brian Ryner  <bryner@chromium.org>

        Reviewed by Adam Barth.

        Add missing #includes of DocumentLoader.h, needed since the transitive
        include through Document.h is removed.
        https://bugs.webkit.org/show_bug.cgi?id=50489

        * src/WebPageSerializerImpl.cpp:
        * src/WebSearchableFormData.cpp:

2011-02-19  Charlie Reis  <creis@chromium.org>

        Reviewed by Mihai Parparita.

        Ensure loading has stopped in HistoryController::goToItem
        https://bugs.webkit.org/show_bug.cgi?id=54517

        Call Page::goToItem instead of HistoryController::goToItem, so that
        FrameLoader::stopAllLoaders is called first.  Also adds a callback in
        FrameLoaderClient for checking for pseudo-back-forward URLs.

        Test: http/tests/navigation/forward-to-fragment-fires-onload.html

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::shouldStopLoadingForHistoryItem): Added.
        * src/FrameLoaderClientImpl.h:
        * src/WebFrameImpl.cpp:

2011-02-18  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Marks any actions triggered by performDefaultAction as a user
        gesture, so that a user with a screen reader isn't prevented from
        performing operations that must be triggered by a user gesture.
        https://bugs.webkit.org/show_bug.cgi?id=54759

        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::performDefaultAction):

2011-02-18  Kenneth Russell  <kbr@google.com>

        Reviewed by James Robinson.

        [chromium] Clean up initialization of minimum timer interval
        https://bugs.webkit.org/show_bug.cgi?id=54772

        Rolled forward Chromium DEPS to pick up new webkit_support entry
        point. Removed setting of default minimum timer interval, as this
        is now done every time WebPreferences are applied.

        Tested with Chromium DRT port built from WebKit workspace; ran
        fast/dom/ layout tests.

        * DEPS:
        * src/WebKit.cpp:
        (WebKit::initialize):

2011-02-18  Ben Vanik  <benvanik@google.com>

        Reviewed by Kenneth Russell.

        Bug 53940: Implement the OES_vertex_array_object WebGL extension
        https://bugs.webkit.org/show_bug.cgi?id=53940

        Stubbed out methods for the new OES_vertex_array_object methods.

        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::createVertexArrayOES):
        (WebCore::Extensions3DChromium::deleteVertexArrayOES):
        (WebCore::Extensions3DChromium::isVertexArrayOES):
        (WebCore::Extensions3DChromium::bindVertexArrayOES):

2011-02-17  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Shinichiro Hamaji.

        Retry landing after fixing Chromium side.
        Fix for Bug 54632 - [chromium] Printing causes view to scroll
        https://bugs.webkit.org/show_bug.cgi?id=54632

        Expose setScrollOffset such that Chromium can restore the scroll offset
        after printing the document. The bug will be fixed when the counterpart
        patch http://codereview.chromium.org/6539011/ is landed for Chromium.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setScrollOffset):
        * src/WebFrameImpl.h:

2011-02-17  Andrew Wilson  <atwilson@chromium.org>

        Unreviewed, rolling out r78936.
        http://trac.webkit.org/changeset/78936
        https://bugs.webkit.org/show_bug.cgi?id=54632

        Breaks chromium build

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-02-17  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Shinichiro Hamaji.

        Fix for Bug 54632 - [chromium] Printing causes view to scroll
        https://bugs.webkit.org/show_bug.cgi?id=54632

        Expose setScrollOffset such that Chromium can restore the scroll offset
        after printing the document. The bug will be fixed when the counterpart
        patch http://codereview.chromium.org/6539011/ is landed for Chromium.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setScrollOffset):
        * src/WebFrameImpl.h:

2011-02-17  W. James MacLean  <wjmaclean@chromium.org>

        Reviewed by James Robinson.

        [chromium] Add command-line flag to enable composite to offscreen texture.
        https://bugs.webkit.org/show_bug.cgi?id=52311

        Add plumbing to allow command-line switch to enable offscreen compositing. Function
        LayerRendererChromium::copyOffscreenTextureToDisplay used for now to mimic
        normal renderer operation.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setCompositeToTextureEnabled):
        * src/WebSettingsImpl.h:
        (WebKit::WebSettingsImpl::compositeToTextureEnabled):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doComposite):

2011-02-10  Luiz Agostini  <luiz.agostini@openbossa.org>

        Reviewed by Adam Roben.

        HTML5 <details> and <summary>: localized text
        https://bugs.webkit.org/show_bug.cgi?id=54260

        The method defaultDetailsSummaryText was added to LocalizedStrings. It is used to provide
        the default label to be used by a <details> tag that has no <summary> child.

        * src/LocalizedStrings.cpp:
        (WebCore::defaultDetailsSummaryText):

2011-02-17  Steve Lacey  <sjl@chromium.org>

        Reviewed by Darin Fisher.

        Roll chromium deps to 75190. Includes new dependency
        on libjingle.

        https://bugs.webkit.org/show_bug.cgi?id=54588

        * DEPS:

2011-02-17  Pavel Podivilov  <podivilov@chromium.org>

        Unreviewed, interactive ui test fix for r78808.

        * src/js/Tests.js:
        (.TestSuite.prototype._waitUntilScriptsAreParsed.waitForAllScripts):
        (.TestSuite.prototype._waitUntilScriptsAreParsed):

2011-02-16  Brian Ryner  <bryner@chromium.org>

        Reviewed by Darin Fisher.

        Split the socket address field into separate IP address and port fields.
        This will make the field less error-prone to parse, for example when
        dealing with IPv6 literals.
        https://bugs.webkit.org/show_bug.cgi?id=54607

        * public/WebURLResponse.h:
        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponse::remoteIPAddress):
        (WebKit::WebURLResponse::setRemoteIPAddress):
        (WebKit::WebURLResponse::remotePort):
        (WebKit::WebURLResponse::setRemotePort):

2011-02-16  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Chris Fleizach.

        Add new role for canvas elements.

        https://bugs.webkit.org/show_bug.cgi?id=50126

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2011-02-16  Victoria Kirst  <vrk@google.com>

        Reviewed by Kenneth Russell.

        [chromium] Fix green pixels at edge of certain GPU-accelerated videos
        https://bugs.webkit.org/show_bug.cgi?id=54559

        * src/VideoFrameChromiumImpl.cpp:
        (WebKit::VideoFrameChromiumImpl::width):
        (WebKit::VideoFrameChromiumImpl::height):
        (WebKit::VideoFrameChromiumImpl::requiredTextureSize):
        (WebKit::VideoFrameChromiumImpl::hasPaddingBytes):
        * src/VideoFrameChromiumImpl.h:

2011-02-16  Jeremy Orlow  <jorlow@chromium.org>

        Back out IndexedDB change thats no longer necessary
        https://bugs.webkit.org/show_bug.cgi?id=54603

        Backing out 78645 as it turns out that it's not necessary.

        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::open):
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):
        * src/WebIDBFactoryImpl.h:

2011-02-16  David Grogan  <dgrogan@chromium.org>

        Reviewed by Jeremy Orlow.

        indexeddb: make setVersion fire blocked event if other connections are open
        https://bugs.webkit.org/show_bug.cgi?id=53728

        * src/IDBCallbacksProxy.cpp:
        (WebCore::IDBCallbacksProxy::onBlocked):
        * src/IDBCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        (WebCore::WebIDBCallbacksImpl::onBlocked):
        * src/WebIDBCallbacksImpl.h:

== Rolled over to ChangeLog-2011-02-16 ==
