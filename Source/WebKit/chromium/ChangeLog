2012-01-09  Ryosuke Niwa  <rniwa@webkit.org>

        Roll Chromium DEPS from 116459 to 116979.

        * DEPS:

2012-01-09  Dana Jansens  <danakj@chromium.org>

        [chromium] Create iterators for the RenderSurface-Layer tree
        https://bugs.webkit.org/show_bug.cgi?id=74203

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCLayerIteratorTest.cpp: Added.

2012-01-09  W. James MacLean  <wjmaclean@chromium.org>

        [Chromium] REGRESSION(r104368): Broke CCLayerTreeHostImplTest.blendingOffWhenDrawingOpaqueLayers
        https://bugs.webkit.org/show_bug.cgi?id=75783

        Updated unit test to reflect desired behaviour now that tile/quad culling
        is implemented.

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKit::TEST_F):

2012-01-09  Chris Rogers  <crogers@google.com>

        Fix potential issue in WebMediaPlayerClientImpl
        https://bugs.webkit.org/show_bug.cgi?id=75899

        Reviewed by Kenneth Russell.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::load):
        (WebKit::WebMediaPlayerClientImpl::loadInternal):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::wrap):

2012-01-09  Justin Novosad  <junov@chromium.org>

        [Chromium] remove all references to the legacy accelerated 2d Canvas
        implementation
        https://bugs.webkit.org/show_bug.cgi?id=75108

        Purging an old settings flag that is no longer referenced

        Reviewed by Darin Fisher.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:

2012-01-09  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Make WebIDBDatabase::close() idempotent
        https://bugs.webkit.org/show_bug.cgi?id=75751

        Allow Chromium's back-end to safely trigger the cleanup that occurs
        when a database connection is closed, without tracking whether or not
        the connection was previous closed by script.

        Reviewed by Tony Chang.

        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::close):

2012-01-09  Xianzhu Wang  <wangxianzhu@chromium.org>

        Avoid unnecessary TextureManager::reduceMemoryToLimit().
        https://bugs.webkit.org/show_bug.cgi?id=75632

        Main part of the change is in Source/WebCore.

        Reviewed by James Robinson.

        Tests: webkit_unit_tests --gtest_filter=TextureManagerTest.*:CCLayerTreeHostTestSetViewportSize.*

        * WebKit.gypi:
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::setViewportSize):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKit::TEST_F):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHost::create):
        (WTF::CCLayerTreeHostTestOpacityChange::beginTest):
        (WTF::CCLayerTreeHostTestSetViewportSize::CCLayerTreeHostTestSetViewportSize):
        (WTF::CCLayerTreeHostTestSetViewportSize::beginTest):
        (WTF::CCLayerTreeHostTestSetViewportSize::afterTest):
        (WTF::TEST_F):
        * tests/TextureManagerTest.cpp: Added.
        (WTF::FakeTextureAllocator::createTexture):
        (WTF::FakeTextureAllocator::deleteTexture):
        (WTF::texturesMemorySize):
        (WTF::createTextureManager):
        (WTF::requestTexture):
        (WTF::TEST):

2012-01-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r104418.
        http://trac.webkit.org/changeset/104418
        https://bugs.webkit.org/show_bug.cgi?id=75855

        we still need to build against CG on Mac sometimes (Requested
        by epoger on #webkit).

        * WebKit.gyp:
        * WebKit.gypi:

2012-01-08  David Levin  <levin@chromium.org>

        [chromium] iframes in an autoresized window get sized incorrectly.
        https://bugs.webkit.org/show_bug.cgi?id=75806

        Reviewed by Adam Barth.

        TEST: fast/autoresize/autoresize-with-iframe.html

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView): Only do autoresizing
        for the main frame not child frames.

2012-01-08  Adam Barth  <abarth@webkit.org>

        [Chromium] Remove use_skia option from GYP
        https://bugs.webkit.org/show_bug.cgi?id=75811

        Reviewed by Ryosuke Niwa.

        The CG configuration of Chromium Mac is no longer supported.

        * WebKit.gyp:
        * WebKit.gypi:

2012-01-07  Dmitry Lomov  <dslomov@google.com>

        Unreviewed: disabled CCLayerTreeHostImplTest.blendingOffWhenDrawingOpaqueLayers
        and filed https://bugs.webkit.org/show_bug.cgi?id=75783.

        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKit::TEST_F):

2012-01-06  W. James MacLean  <wjmaclean@chromium.org>

        [Chromium] Cull occluded tiles in tiled layers
        https://bugs.webkit.org/show_bug.cgi?id=70533

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCQuadCullerTest.cpp: Added.
        (WebCore::TestDrawQuad::TestDrawQuad):
        (WebCore::TestDrawQuad::create):
        (WebCore::setQuads):
        (WebCore::TEST):

2012-01-06  Greg Billock  <gbillock@google.com>

        [Web Intents] Flagged-off WebCore implementation of navigator.startActivity
        https://bugs.webkit.org/show_bug.cgi?id=73051

        Reviewed by Adam Barth.

        * features.gypi:

2012-01-06  Tom Sepez  <tsepez@chromium.org>

        Pass Content-security-policy directive to worker threads.
        https://bugs.webkit.org/show_bug.cgi?id=73242

        Reviewed by David Levin.

        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::startWorkerContext):
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::startWorkerContext):

2012-01-05  Jochen Eisinger  <jochen@chromium.org>

        Check whether a WebView exists before accessing it in StorageAreaProxy. This is not necessarily the case, e.g. for detached iframes.
        https://bugs.webkit.org/show_bug.cgi?id=61326

        Reviewed by Adam Barth.

        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::canAccessStorage):

2012-01-04  James Robinson  <jamesr@chromium.org>

        [chromium] Route all animate calls through CCLayerTreeHost in composited mode to simplify rate limiting logic
        https://bugs.webkit.org/show_bug.cgi?id=75577

        Reviewed by Darin Fisher.

        Routes WebWidget-initiated animate() calls through the CCLayerTreeHost in composited mode. CCLayerTreeHost's
        rate limiting logic needs to be aware of when requestAnimationFrame callbacks are run. In threaded mode, the
        animate calls are driven from CCThreadProxy and so the CCLayerTreeHost can set whatever state it needs. This
        makes the single-threaded mode where the animate calls are driven through the WebWidget interface outside of the
        CCProxy's control.

        This is a small step towards inverting the scheduling control from the WebWidget to the compositor.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::updateAnimations):
        * src/WebViewImpl.h:

2012-01-05  David Levin  <levin@chromium.org>

        [chromium] Resize requests at the view level should be ignored when in autoresize mode.
        https://bugs.webkit.org/show_bug.cgi?id=75651

        Reviewed by Dmitry Titov.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize): The assert was here to catch a view that
        tried to do a resize after setting autoresize. However, we found that generic
        code tries to do resizes as well. Rather than special case each caller,
        we'll just make this code ignore the resize call.

2012-01-05  W. James MacLean  <wjmaclean@chromium.org>

        [chromium][aura] WebExternalTextureLayerImpl::drawsContent() returns incorrect value, causing accelerated content to not display in Aura desktop
        https://bugs.webkit.org/show_bug.cgi?id=75551

        Reviewed by James Robinson.

        * WebKit.gypi:
        * src/WebExternalTextureLayerImpl.cpp:
        (WebKit::WebExternalTextureLayerImpl::WebExternalTextureLayerImpl):
        * tests/WebExternalTextureLayerImplTest.cpp: Copied from Source/WebKit/chromium/src/WebExternalTextureLayerImpl.cpp.

2012-01-05  Tien Ren Chen  <trchen@chromium.org>

        [chromium] Add CCTimer class for the compositor
        https://bugs.webkit.org/show_bug.cgi?id=74769

        Reviewed by James Robinson.

        Add a simple timer class for CCThread that the timered task can be
        manually cancelled.

        * WebKit.gypi:
        * tests/CCTimerTest.cpp: Added.
        (WebKitTests::CCTimerTest::CCTimerTest):
        (WebKitTests::CCTimerTest::onTimerFired):
        (WebKitTests::TEST_F):

2012-01-04  Adrienne Walker  <enne@google.com>

        [chromium] Create unit tests for CCTiledLayerImpl
        https://bugs.webkit.org/show_bug.cgi?id=75557

        Reviewed by James Robinson.

        Add some quad generation tests for tiled layers.

        * WebKit.gypi:
        * tests/CCTiledLayerImplTest.cpp: Added.
        (WebCore::createLayer):
        (WebCore::TEST):
        (WebCore::completelyContains):
        (WebCore::getQuads):
        (WebCore::verifyQuadsExactlyCoverRect):
        (WebCore::coverageVisibleRectOnTileBoundaries):
        (WebCore::coverageVisibleRectIntersectsTiles):
        (WebCore::coverageVisibleRectIntersectsBounds):

2012-01-05  David Reveman  <reveman@chromium.org>

        [Chromium] Remove WebSettings::setAcceleratedDrawingEnabled from public API.
        https://bugs.webkit.org/show_bug.cgi?id=74125

        Reviewed by James Robinson.

        Remove setAcceleratedDrawingEnabled method from WebSettings class.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:

2012-01-05  Peter Beverloo  <peter@chromium.org>

        [Chromium] Upstream the RenderTheme and ScrollbarTheme for Android
        https://bugs.webkit.org/show_bug.cgi?id=74614

        Reviewed by Adam Barth.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setScrollbarColors):
        (WebKit::WebViewImpl::setSelectionColors):

2012-01-05  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Expose Fixed Position Layout to WebViewImpl
        https://bugs.webkit.org/show_bug.cgi?id=75556

        Reviewed by Darin Fisher.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::shouldLayoutFixedElementsRelativeToFrame):
        (WebKit::WebViewImpl::setShouldLayoutFixedElementsRelativeToFrame):
        * src/WebViewImpl.h:

2012-01-04  Ryosuke Niwa  <rniwa@webkit.org>

        Roll Chromium DEPS from 116031 to 116459.

        * DEPS:

2012-01-04  David Levin  <levin@chromium.org>

        Attempt Chromium build fix.

        * src/WorkerFileSystemCallbacksBridge.h:

2012-01-04  David Levin  <levin@chromium.org>

        [chromium] Remove AllowCrossThreadAccess in WorkerFileSystemCallbacksBridge.
        https://bugs.webkit.org/show_bug.cgi?id=75579

        Reviewed by Dmitry Titov.

        This code doesn't have lifetime issues, but this change is
        about getting rid of AllowCrossThreadAccess and getting rid of a leakRef.
        This allows the code to follow a more common pattern and be more easily
        verified as being correct.

        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::MainThreadFileSystemCallbacks::createLeakedPtr):
        (WebKit::MainThreadFileSystemCallbacks::MainThreadFileSystemCallbacks):
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postMoveToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postCopyToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postRemoveToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postRemoveRecursivelyToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postReadMetadataToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postCreateFileToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postCreateDirectoryToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postFileExistsToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postDirectoryExistsToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postReadDirectoryToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::moveOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::copyOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::removeOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::removeRecursivelyOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::readMetadataOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::createFileOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::createDirectoryOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::fileExistsOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::directoryExistsOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::readDirectoryOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didFailOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didOpenFileSystemOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didSucceedOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didReadMetadataOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didReadDirectoryOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didFailOnWorkerThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didOpenFileSystemOnWorkerThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didSucceedOnWorkerThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didReadMetadataOnWorkerThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didReadDirectoryOnWorkerThread):
        (WebKit::WorkerFileSystemCallbacksBridge::runTaskOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::mayPostTaskToWorker):
        * src/WorkerFileSystemCallbacksBridge.h:

2012-01-04  David Levin  <levin@chromium.org>

        [chromium] Make it safe to delete WorkerFileSystemContextObserver on any thread.
        https://bugs.webkit.org/show_bug.cgi?id=75573

        Reviewed by Dmitry Titov.

        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemContextObserver): Move the WorkerContextObserver
        out of the WorkerFileSystemCallbacksBridge since an observer should be
        destroyed on the WorkerContext thread. (Actually, it could be destroyed on either
        thread if you are careful to make a certain method call on it while on the WorkerContext
        thread but trying that is a more fragile pattern.)
        (WebKit::WorkerFileSystemCallbacksBridge::WorkerFileSystemCallbacksBridge):
        (WebKit::WorkerFileSystemCallbacksBridge::stop): Factor out the clean up and make it
        clear what the mutex is guarding.
        (WebKit::WorkerFileSystemCallbacksBridge::cleanUpAfterCallback): Delete
        the observer. Due to where this is called from, it is always called on the WorkerContext thread.
        (WebKit::WorkerFileSystemCallbacksBridge::runTaskOnWorkerThread): Replace some code with
        the cleanUpAfterCallback call.
        (WebKit::WorkerFileSystemCallbacksBridge::mayPostTaskToWorker):
        * src/WorkerFileSystemCallbacksBridge.h: In addition to some comment clean ups and code factoring,
        I made the desctructor private since no one should call it directly.

2012-01-04  James Robinson  <jamesr@chromium.org>

        [chromium] Remove chromium compositor support for unused zoomAnimatorTransform
        https://bugs.webkit.org/show_bug.cgi?id=75585

        Reviewed by Kenneth Russell.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setZoomLevel):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        * tests/CCLayerImplTest.cpp:
        (WebCore::TEST):

2012-01-04  James Robinson  <jamesr@chromium.org>

        [chromium] Compile fix, rename libplatform.a to libwebkit_platform.a to avoid collision with nacl

        * WebKit.gyp:

2012-01-04  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r104052.
        http://trac.webkit.org/changeset/104052
        https://bugs.webkit.org/show_bug.cgi?id=75574

        Breaks win builder (Requested by enne on #webkit).

        * WebKit.gypi:
        * tests/CCTiledLayerImplTest.cpp: Removed.

2012-01-04  Dmitry Lomov  <dslomov@google.com>

        Unreviewed:[Chromium]Disable WebPageNewSerializeTest.CSSResources and WebPageNewSerializeTest.TestMHTMLEncoding.
        https://bugs.webkit.org/show_bug.cgi?id=75567

        * tests/WebPageNewSerializerTest.cpp:
        (WebKit::TEST_F):

2012-01-04  Adrienne Walker  <enne@google.com>

        [chromium] Create unit tests for CCTiledLayerImpl
        https://bugs.webkit.org/show_bug.cgi?id=75557

        Reviewed by James Robinson.

        Add some quad generation tests for tiled layers.

        * WebKit.gypi:
        * tests/CCTiledLayerImplTest.cpp: Added.
        (WebCore::createLayer):
        (WebCore::TEST):
        (WebCore::completelyContains):
        (WebCore::getQuads):
        (WebCore::verifyQuadsExactlyCoverRect):
        (WebCore::coverageVisibleRectOnTileBoundaries):
        (WebCore::coverageVisibleRectIntersectsTiles):
        (WebCore::coverageVisibleRectIntersectsBounds):

2012-01-04  James Robinson  <jamesr@chromium.org>

        [chromium] Move WebMimeRegistry and dependencies to Source/Platform
        https://bugs.webkit.org/show_bug.cgi?id=74583

        Reviewed by Darin Fisher.

        public/platform/WebMimeRegistry.h is a temporary forwarding header to ease the transition. Once downstream
        callers are updated to the new location this header can be removed.

        WebString, WebCString, and WebCommon.h will remain in place as forwarding headers for users of the WebKit client
        API.

        * WebKit.gyp:
        * public/platform/WebCString.h:
        * public/platform/WebCommon.h:
        * public/platform/WebMimeRegistry.h:
        * public/platform/WebString.h:

2012-01-03  Vangelis Kokkevis  <vangelis@chromium.org>

        [chromium] Bypass the shadow texture copy for accelerated
        canvas when running the compositor in single threaded mode.
        https://bugs.webkit.org/show_bug.cgi?id=75146

        Modified Canvas2DLayerChromium unit test to test canvas with
        both threaded and non-threaded compositing.

        Reviewed by James Robinson.

        * tests/CCSchedulerTestCommon.h:
        (WebKitTests::FakeCCThread::threadID):
        * tests/Canvas2DLayerChromiumTest.cpp:
        (WebCore::Canvas2DLayerChromiumTest::setTextureManager):
        (WebCore::Canvas2DLayerChromiumTest::fullLifecycleTest):
        (WebCore::TEST_F):

2012-01-04  Peter Beverloo  <peter@chromium.org>

        [Chromium] Re-use TestShellLinux.cpp for Android
        https://bugs.webkit.org/show_bug.cgi?id=75169

        Reviewed by Tony Chang.

        TestShellLinux.cpp can be re-used for the test-shell on the WebKit
        Chromium port for Android. Most custom inclusions for the DumpRenderTree
        target are done in Tools/DumpRenderTree.gypi, but since *Linux.cpp files
        are being excluded by a global rule on sources it has to be later in
        the project generation process.

        * WebKit.gyp:

2012-01-03  Karl Koscher  <supersat@chromium.org>

        Give embedders a chance to handle postMessage calls
        https://bugs.webkit.org/show_bug.cgi?id=73883

        Reviewed by Adam Barth.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::willCheckAndDispatchMessageEvent): 
            interface to give the embedder a chance to handle this postMessage call
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::willCheckAndDispatchMessageEvent): Call 
            willCheckAndDispatchMessageEvent on WebFrameClient
        * src/FrameLoaderClientImpl.h:

2012-01-03  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] CCLayerSorter accidentally reverses order of some layers.
        https://bugs.webkit.org/show_bug.cgi?id=75046

        Reviewed by James Robinson.

        * tests/CCLayerSorterTest.cpp:
        (WebCore::TEST):

2012-01-03  David Levin  <levin@chromium.org>

        [chromium] LocalFileSystemChromium needs some thread safety fixes.
        https://bugs.webkit.org/show_bug.cgi?id=75494

        Reviewed by Dmitry Titov.

        This is essentially the same fix as r102894 except in slightly different code.

        The important part of this fix is the removal of AllowCrossThreadAccess so
        that ref counting happens appropriately.

        Minor clean up throughout: Removed unnecessary WTF prefix in many
        of these places and unnecessary String().

        * src/LocalFileSystemChromium.cpp: See r102894 since this
        is basically the same thing.

2012-01-03  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Push drawsContent and contentsVisible into accelerated compositor
        https://bugs.webkit.org/show_bug.cgi?id=71209

        Reviewed by James Robinson.

        * src/WebContentLayerImpl.cpp:
        (WebKit::WebContentLayerImpl::WebContentLayerImpl):
        (WebKit::WebContentLayerImpl::setDrawsContent):
        * src/WebContentLayerImpl.h:
        * src/WebExternalTextureLayerImpl.cpp:
        (WebKit::WebExternalTextureLayerImpl::drawsContent):
        * src/WebLayerImpl.cpp:
        (WebKit::WebLayerImpl::WebLayerImpl):
        * src/WebLayerImpl.h:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::ContentLayerChromiumWithUpdateTracking::ContentLayerChromiumWithUpdateTracking):
        * tests/Canvas2DLayerChromiumTest.cpp:
        * tests/LayerChromiumTest.cpp:
        * tests/TiledLayerChromiumTest.cpp:
        (WTF::FakeTiledLayerChromium::FakeTiledLayerChromium):

2012-01-03  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Make sure root damage rect gets passed to renderer
        https://bugs.webkit.org/show_bug.cgi?id=74893

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKit::TEST_F):
        (WebKit::PartialSwapTrackerContext::initialize):
        (WebKit::PartialSwapTrackerContext::postSubBufferCHROMIUM):
        (WebKit::PartialSwapTrackerContext::getString):
        (WebKit::PartialSwapTrackerContext::partialSwapRect):

2012-01-03  Tony Chang  <tony@chromium.org>

        [chromium] Fix compilation with clang and the shared build
        https://bugs.webkit.org/show_bug.cgi?id=75492

        Reviewed by Ojan Vafai.

        * WebKit.gyp: Turn off -Wglobal-constructors because test files using
        GTEST have global constructors.
        * tests/InnerGestureRecognizerTest.cpp:
        (TEST_F): Move global into test function.

2012-01-03  Adrienne Walker  <enne@google.com>

        [chromium] Revert accidentally removed chrome client compositing check
        https://bugs.webkit.org/show_bug.cgi?id=75500

        Reviewed by James Robinson.

        This check was overzealously removed in r103968 as a part of
        re-enabling compositing for RTL pages. Add it back.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::allowedCompositingTriggers):

2012-01-03  Jon Lee  <jonlee@apple.com>

        Leak of WebNotificationClient when page is destroyed
        https://bugs.webkit.org/show_bug.cgi?id=74980
        <rdar://problem/10611231>

        Reviewed by Mark Rowe.

        * src/NotificationPresenterImpl.cpp:
        (WebKit::NotificationPresenterImpl::notificationControllerDestroyed): Empty implementation because ownership
        model differs.
        * src/NotificationPresenterImpl.h:

2012-01-03  James Robinson  <jamesr@chromium.org>

        [chromium] Remove WebLayerClient
        https://bugs.webkit.org/show_bug.cgi?id=75481

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/platform/WebContentLayer.h:
        * public/platform/WebExternalTextureLayer.h:
        * public/platform/WebLayer.h:
        * public/platform/WebLayerClient.h: Removed.
        * src/WebContentLayer.cpp:
        * src/WebExternalTextureLayer.cpp:
        * src/WebLayer.cpp:

2012-01-03  Adrienne Walker  <enne@google.com>

        [chromium] Support RTL pages and elements in the compositor
        https://bugs.webkit.org/show_bug.cgi?id=56591

        Reviewed by James Robinson.

        As the noncomposited content host layer is created and managed by the
        Chromium compositor, adjust its transform appropriately in the layer
        tree and at paint time to handle the offset required due to the
        initial containing block of RTL pages.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::allowedCompositingTriggers):
        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::setViewport):
        (WebKit::NonCompositedContentHost::paintContents):
        * src/NonCompositedContentHost.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::updateLayerTreeViewport):

2012-01-03  Adrienne Walker  <enne@google.com>

        [chromium] Make tiled layer's tiler always exist
        https://bugs.webkit.org/show_bug.cgi?id=75329

        Reviewed by James Robinson.

        Update test due to changing API. Add a test for changing border
        texel option on TilingData.

        * tests/TiledLayerChromiumTest.cpp:
        (WTF::FakeTiledLayerChromium::FakeTiledLayerChromium):
        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-12-30  Ami Fischman  <fischman@chromium.org>

        Allow disabling accelerated compositing in WebMediaPlayerClient (so audio-only <video> isn't accelerated).
        https://bugs.webkit.org/show_bug.cgi?id=75261

        Reviewed by Darin Fisher.

        * public/WebMediaPlayerClient.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::disableAcceleratedCompositing):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::setClient):
        * src/WebMediaPlayerClientImpl.h:

2011-12-30  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-12-30  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: migrate from "attached" to "compact" styles.
        https://bugs.webkit.org/show_bug.cgi?id=75381

        Reviewed by Yury Semikhatsky.

        When front-end is docked to right, it should look like "detached", but is still "attached".
        Use "compact" mode instead of "attached" mode in the styles to mitigate it.

        * src/js/devTools.css:
        (body.compact #toolbar):

2011-12-30  Dmitry Lomov  <dslomov@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=75373
        [Chromium] Remove WebWorkerClient.h
        After coordinated patch in chromium, WebWorkerClient alias for WebSharedWorkerClient is no longer needed.

        Reviewed by Adam Barth.

        * WebKit.gyp:
        * public/WebFrameClient.h:
        * public/WebWorkerClient.h: Removed.
        * src/WebSharedWorkerImpl.h:
        * src/WebWorkerBase.cpp:
        * src/WebWorkerClientImpl.h:

2011-12-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r103831.
        http://trac.webkit.org/changeset/103831
        https://bugs.webkit.org/show_bug.cgi?id=75377

        broke chromium build (Requested by dslomov_ on #webkit).

        * WebKit.gyp:
        * public/WebFrameClient.h:
        * public/WebWorkerClient.h: Copied from Source/WebKit/chromium/src/WebWorkerBase.cpp.
        * src/WebSharedWorkerImpl.h:
        * src/WebWorkerBase.cpp:
        * src/WebWorkerClientImpl.h:

2011-12-29  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: enable dock-to-right view (still need embedders to support it).
        https://bugs.webkit.org/show_bug.cgi?id=75360

        Reviewed by Yury Semikhatsky.

        * src/js/DevTools.js:

2011-12-29  Dmitry Lomov  <dslomov@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=75373
        [Chromium] Remove WebWorkerClient.h
        After coordinated patch in chromium, WebWorkerClient alias for WebSharedWorkerClient is no longer needed.

        Reviewed by Adam Barth.

        * WebKit.gyp:
        * public/WebFrameClient.h:
        * public/WebWorkerClient.h: Removed.
        * src/WebSharedWorkerImpl.h:
        * src/WebWorkerBase.cpp:
        * src/WebWorkerClientImpl.h:

2011-12-29  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: [chromium] pass dock to side request to the embedder.
        https://bugs.webkit.org/show_bug.cgi?id=75344

        Reviewed by Yury Semikhatsky.

        * public/WebDevToolsFrontendClient.h:
        (WebKit::WebDevToolsFrontendClient::requestSetDockSide):
        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::requestSetDockSide):
        * src/InspectorFrontendClientImpl.h:

2011-12-28  Dmitry Lomov  <dslomov@google.com>

        [WebWorkers][Chromium] Remove remains of cross-process dedicated worker implementation.
        https://bugs.webkit.org/show_bug.cgi?id=66509
        Just renames, merges and removal of dead code. Here are the list of renames:
          - WebCommonWorkerClient merged with WebWorkerClient and renamed to WebSharedWorkerClient
          - NewWebCommonWorkerClient renamed to WebCommonWorkerClient
          - WebWorkerBase merged into WebSharedWorkerImpl
          - NewWebWorkerBase renamed into WebWorkerBase
        WebWorkerClient.h has a "#define WebWorkerClient WebSharedWorkerClient" to keep chromium building.
        Will be removed after coordinated patch in chromium.

        Reviewed by David Levin.

        * WebKit.gyp:
        * public/WebCommonWorkerClient.h:
        * public/WebSharedWorker.h:
        * public/WebSharedWorkerClient.h: Copied from Source/WebKit/chromium/public/WebCommonWorkerClient.h.
        (WebKit::WebSharedWorkerClient::postConsoleMessageToWorkerObject):
        (WebKit::WebSharedWorkerClient::allowFileSystem):
        (WebKit::WebSharedWorkerClient::openFileSystem):
        (WebKit::WebSharedWorkerClient::dispatchDevToolsMessage):
        (WebKit::WebSharedWorkerClient::saveDevToolsAgentState):
        (WebKit::WebSharedWorkerClient::~WebSharedWorkerClient):
        * public/WebWorkerClient.h:
        * src/DatabaseObserver.cpp:
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge):
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask):
        (WebKit::allowDatabaseForWorker):
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::openFromWorker):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::initializeWebKitStaticValues):
        (WebKit::WebSharedWorkerImpl::WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::~WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::stopWorkerThread):
        (WebKit::WebSharedWorkerImpl::initializeLoader):
        (WebKit::WebSharedWorkerImpl::didCreateDataSource):
        (WebKit::WebSharedWorkerImpl::createApplicationCacheHost):
        (WebKit::WebSharedWorkerImpl::postMessageToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postMessageTask):
        (WebKit::WebSharedWorkerImpl::postExceptionToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postExceptionTask):
        (WebKit::WebSharedWorkerImpl::postConsoleMessageToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postConsoleMessageTask):
        (WebKit::WebSharedWorkerImpl::postMessageToPageInspector):
        (WebKit::WebSharedWorkerImpl::postMessageToPageInspectorTask):
        (WebKit::WebSharedWorkerImpl::updateInspectorStateCookie):
        (WebKit::WebSharedWorkerImpl::updateInspectorStateCookieTask):
        (WebKit::WebSharedWorkerImpl::confirmMessageFromWorkerObject):
        (WebKit::WebSharedWorkerImpl::confirmMessageTask):
        (WebKit::WebSharedWorkerImpl::reportPendingActivity):
        (WebKit::WebSharedWorkerImpl::reportPendingActivityTask):
        (WebKit::WebSharedWorkerImpl::workerContextClosed):
        (WebKit::WebSharedWorkerImpl::workerContextClosedTask):
        (WebKit::WebSharedWorkerImpl::workerContextDestroyed):
        (WebKit::WebSharedWorkerImpl::workerContextDestroyedTask):
        (WebKit::WebSharedWorkerImpl::postTaskToLoader):
        (WebKit::WebSharedWorkerImpl::postTaskForModeToWorkerContext):
        (WebKit::WebSharedWorker::create):
        * src/WebSharedWorkerImpl.h:
        (WebKit::WebSharedWorkerImpl::view):
        (WebKit::WebSharedWorkerImpl::commonClient):
        (WebKit::WebSharedWorkerImpl::client):
        (WebKit::WebSharedWorkerImpl::setWorkerThread):
        (WebKit::WebSharedWorkerImpl::workerThread):
        * src/WebWorkerBase.cpp:
        (WebKit::invokeTaskMethod):
        (WebKit::WebWorkerBase::dispatchTaskToMainThread):
        * src/WebWorkerBase.h:
        * src/WebWorkerClientImpl.cpp:
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::commonClient):
        * src/WebWorkerImpl.cpp: Removed.
        * src/WebWorkerImpl.h: Removed.
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-12-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r103785.
        http://trac.webkit.org/changeset/103785
        https://bugs.webkit.org/show_bug.cgi?id=75332

        Broke builders; looks like clobbering didnt help (Requested by
        dslomov on #webkit).

        * WebKit.gyp:
        * public/WebCommonWorkerClient.h:
        (WebKit::WebCommonWorkerClient::postConsoleMessageToWorkerObject):
        (WebKit::WebCommonWorkerClient::allowFileSystem):
        (WebKit::WebCommonWorkerClient::openFileSystem):
        (WebKit::WebCommonWorkerClient::dispatchDevToolsMessage):
        (WebKit::WebCommonWorkerClient::saveDevToolsAgentState):
        (WebKit::WebCommonWorkerClient::~WebCommonWorkerClient):
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::createWorker):
        * public/WebSharedWorker.h:
        * public/WebSharedWorkerClient.h: Removed.
        * public/WebWorkerClient.h:
        (WebKit::WebWorkerClient::~WebWorkerClient):
        * src/DatabaseObserver.cpp:
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge):
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask):
        (WebKit::allowDatabaseForWorker):
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::openFromWorker):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::~WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::client):
        (WebKit::WebSharedWorker::create):
        * src/WebSharedWorkerImpl.h:
        (WebKit::WebSharedWorkerImpl::commonClient):
        (WebKit::WebSharedWorkerImpl::newCommonClient):
        * src/WebWorkerBase.cpp:
        (WebKit::initializeWebKitStaticValues):
        (WebKit::WebWorkerBase::WebWorkerBase):
        (WebKit::WebWorkerBase::~WebWorkerBase):
        (WebKit::WebWorkerBase::stopWorkerThread):
        (WebKit::WebWorkerBase::initializeLoader):
        (WebKit::WebWorkerBase::dispatchTaskToMainThread):
        (WebKit::WebWorkerBase::invokeTaskMethod):
        (WebKit::WebWorkerBase::didCreateDataSource):
        (WebKit::WebWorkerBase::createApplicationCacheHost):
        (WebKit::WebWorkerBase::postMessageToWorkerObject):
        (WebKit::WebWorkerBase::postMessageTask):
        (WebKit::WebWorkerBase::postExceptionToWorkerObject):
        (WebKit::WebWorkerBase::postExceptionTask):
        (WebKit::WebWorkerBase::postConsoleMessageToWorkerObject):
        (WebKit::WebWorkerBase::postConsoleMessageTask):
        (WebKit::WebWorkerBase::postMessageToPageInspector):
        (WebKit::WebWorkerBase::postMessageToPageInspectorTask):
        (WebKit::WebWorkerBase::updateInspectorStateCookie):
        (WebKit::WebWorkerBase::updateInspectorStateCookieTask):
        (WebKit::WebWorkerBase::confirmMessageFromWorkerObject):
        (WebKit::WebWorkerBase::confirmMessageTask):
        (WebKit::WebWorkerBase::reportPendingActivity):
        (WebKit::WebWorkerBase::reportPendingActivityTask):
        (WebKit::WebWorkerBase::workerContextClosed):
        (WebKit::WebWorkerBase::workerContextClosedTask):
        (WebKit::WebWorkerBase::workerContextDestroyed):
        (WebKit::WebWorkerBase::workerContextDestroyedTask):
        (WebKit::WebWorkerBase::postTaskToLoader):
        (WebKit::WebWorkerBase::postTaskForModeToWorkerContext):
        * src/WebWorkerBase.h:
        (WebKit::WebWorkerBase::view):
        (WebKit::WebWorkerBase::setWorkerThread):
        (WebKit::WebWorkerBase::workerThread):
        * src/WebWorkerClientImpl.cpp:
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::newCommonClient):
        * src/WebWorkerImpl.cpp: Added.
        (WebKit::WebWorker::create):
        (WebKit::WebWorkerImpl::WebWorkerImpl):
        (WebKit::WebWorkerImpl::~WebWorkerImpl):
        (WebKit::WebWorkerImpl::newCommonClient):
        (WebKit::WebWorkerImpl::commonClient):
        (WebKit::WebWorkerImpl::postMessageToWorkerContextTask):
        (WebKit::WebWorkerImpl::startWorkerContext):
        (WebKit::WebWorkerImpl::terminateWorkerContext):
        (WebKit::WebWorkerImpl::postMessageToWorkerContext):
        (WebKit::WebWorkerImpl::workerObjectDestroyed):
        (WebKit::WebWorkerImpl::clientDestroyed):
        * src/WebWorkerImpl.h: Copied from Source/WebKit/chromium/src/WebWorkerBase.cpp.
        (WebKit::WebWorkerImpl::client):
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-12-28  Dmitry Lomov  <dslomov@google.com>

        [WebWorkers][Chromium] Remove remains of cross-process dedicated worker implementation.
        https://bugs.webkit.org/show_bug.cgi?id=66509
        Just renames, merges and removal of dead code. Here are the list of renames:
          - WebCommonWorkerClient merged with WebWorkerClient and renamed to WebSharedWorkerClient
          - NewWebCommonWorkerClient renamed to WebCommonWorkerClient
          - WebWorkerBase merged into WebSharedWorkerImpl
          - NewWebWorkerBase renamed into WebWorkerBase
        WebWorkerClient.h has a "#define WebWorkerClient WebSharedWorkerClient" to keep chromium building.
        Will be removed after coordinated patch in chromium.

        Reviewed by David Levin.

        * WebKit.gyp:
        * public/WebCommonWorkerClient.h:
        * public/WebSharedWorker.h:
        * public/WebSharedWorkerClient.h: Copied from Source/WebKit/chromium/public/WebCommonWorkerClient.h.
        (WebKit::WebSharedWorkerClient::postConsoleMessageToWorkerObject):
        (WebKit::WebSharedWorkerClient::allowFileSystem):
        (WebKit::WebSharedWorkerClient::openFileSystem):
        (WebKit::WebSharedWorkerClient::dispatchDevToolsMessage):
        (WebKit::WebSharedWorkerClient::saveDevToolsAgentState):
        (WebKit::WebSharedWorkerClient::~WebSharedWorkerClient):
        * public/WebWorkerClient.h:
        * src/DatabaseObserver.cpp:
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge):
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask):
        (WebKit::allowDatabaseForWorker):
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::openFromWorker):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::initializeWebKitStaticValues):
        (WebKit::WebSharedWorkerImpl::WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::~WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::stopWorkerThread):
        (WebKit::WebSharedWorkerImpl::initializeLoader):
        (WebKit::WebSharedWorkerImpl::didCreateDataSource):
        (WebKit::WebSharedWorkerImpl::createApplicationCacheHost):
        (WebKit::WebSharedWorkerImpl::postMessageToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postMessageTask):
        (WebKit::WebSharedWorkerImpl::postExceptionToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postExceptionTask):
        (WebKit::WebSharedWorkerImpl::postConsoleMessageToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postConsoleMessageTask):
        (WebKit::WebSharedWorkerImpl::postMessageToPageInspector):
        (WebKit::WebSharedWorkerImpl::postMessageToPageInspectorTask):
        (WebKit::WebSharedWorkerImpl::updateInspectorStateCookie):
        (WebKit::WebSharedWorkerImpl::updateInspectorStateCookieTask):
        (WebKit::WebSharedWorkerImpl::confirmMessageFromWorkerObject):
        (WebKit::WebSharedWorkerImpl::confirmMessageTask):
        (WebKit::WebSharedWorkerImpl::reportPendingActivity):
        (WebKit::WebSharedWorkerImpl::reportPendingActivityTask):
        (WebKit::WebSharedWorkerImpl::workerContextClosed):
        (WebKit::WebSharedWorkerImpl::workerContextClosedTask):
        (WebKit::WebSharedWorkerImpl::workerContextDestroyed):
        (WebKit::WebSharedWorkerImpl::workerContextDestroyedTask):
        (WebKit::WebSharedWorkerImpl::postTaskToLoader):
        (WebKit::WebSharedWorkerImpl::postTaskForModeToWorkerContext):
        (WebKit::WebSharedWorker::create):
        * src/WebSharedWorkerImpl.h:
        (WebKit::WebSharedWorkerImpl::view):
        (WebKit::WebSharedWorkerImpl::commonClient):
        (WebKit::WebSharedWorkerImpl::client):
        (WebKit::WebSharedWorkerImpl::setWorkerThread):
        (WebKit::WebSharedWorkerImpl::workerThread):
        * src/WebWorkerBase.cpp:
        (WebKit::invokeTaskMethod):
        (WebKit::WebWorkerBase::dispatchTaskToMainThread):
        * src/WebWorkerBase.h:
        * src/WebWorkerClientImpl.cpp:
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::commonClient):
        * src/WebWorkerImpl.cpp: Removed.
        * src/WebWorkerImpl.h: Removed.
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-12-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r103620.
        http://trac.webkit.org/changeset/103620
        https://bugs.webkit.org/show_bug.cgi?id=75316

        Causes many crashes (Requested by abarth on #webkit).

        * public/WebDOMMessageEvent.h:
        * public/WebFrameClient.h:
        * src/FrameLoaderClientImpl.cpp:
        * src/FrameLoaderClientImpl.h:

2011-12-27  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r103734.
        http://trac.webkit.org/changeset/103734
        https://bugs.webkit.org/show_bug.cgi?id=75278

        Broke cr-mac (Requested by dslomov on #webkit).

        * WebKit.gyp:
        * public/WebCommonWorkerClient.h:
        (WebKit::WebCommonWorkerClient::postConsoleMessageToWorkerObject):
        (WebKit::WebCommonWorkerClient::allowFileSystem):
        (WebKit::WebCommonWorkerClient::openFileSystem):
        (WebKit::WebCommonWorkerClient::dispatchDevToolsMessage):
        (WebKit::WebCommonWorkerClient::saveDevToolsAgentState):
        (WebKit::WebCommonWorkerClient::~WebCommonWorkerClient):
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::createWorker):
        * public/WebSharedWorker.h:
        * public/WebSharedWorkerClient.h: Removed.
        * public/WebWorkerClient.h:
        (WebKit::WebWorkerClient::~WebWorkerClient):
        * src/DatabaseObserver.cpp:
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge):
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask):
        (WebKit::allowDatabaseForWorker):
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::openFromWorker):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::~WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::client):
        (WebKit::WebSharedWorker::create):
        * src/WebSharedWorkerImpl.h:
        (WebKit::WebSharedWorkerImpl::commonClient):
        (WebKit::WebSharedWorkerImpl::newCommonClient):
        * src/WebWorkerBase.cpp:
        (WebKit::initializeWebKitStaticValues):
        (WebKit::WebWorkerBase::WebWorkerBase):
        (WebKit::WebWorkerBase::~WebWorkerBase):
        (WebKit::WebWorkerBase::stopWorkerThread):
        (WebKit::WebWorkerBase::initializeLoader):
        (WebKit::WebWorkerBase::dispatchTaskToMainThread):
        (WebKit::WebWorkerBase::invokeTaskMethod):
        (WebKit::WebWorkerBase::didCreateDataSource):
        (WebKit::WebWorkerBase::createApplicationCacheHost):
        (WebKit::WebWorkerBase::postMessageToWorkerObject):
        (WebKit::WebWorkerBase::postMessageTask):
        (WebKit::WebWorkerBase::postExceptionToWorkerObject):
        (WebKit::WebWorkerBase::postExceptionTask):
        (WebKit::WebWorkerBase::postConsoleMessageToWorkerObject):
        (WebKit::WebWorkerBase::postConsoleMessageTask):
        (WebKit::WebWorkerBase::postMessageToPageInspector):
        (WebKit::WebWorkerBase::postMessageToPageInspectorTask):
        (WebKit::WebWorkerBase::updateInspectorStateCookie):
        (WebKit::WebWorkerBase::updateInspectorStateCookieTask):
        (WebKit::WebWorkerBase::confirmMessageFromWorkerObject):
        (WebKit::WebWorkerBase::confirmMessageTask):
        (WebKit::WebWorkerBase::reportPendingActivity):
        (WebKit::WebWorkerBase::reportPendingActivityTask):
        (WebKit::WebWorkerBase::workerContextClosed):
        (WebKit::WebWorkerBase::workerContextClosedTask):
        (WebKit::WebWorkerBase::workerContextDestroyed):
        (WebKit::WebWorkerBase::workerContextDestroyedTask):
        (WebKit::WebWorkerBase::postTaskToLoader):
        (WebKit::WebWorkerBase::postTaskForModeToWorkerContext):
        * src/WebWorkerBase.h:
        (WebKit::WebWorkerBase::view):
        (WebKit::WebWorkerBase::setWorkerThread):
        (WebKit::WebWorkerBase::workerThread):
        * src/WebWorkerClientImpl.cpp:
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::newCommonClient):
        * src/WebWorkerImpl.cpp: Added.
        (WebKit::WebWorker::create):
        (WebKit::WebWorkerImpl::WebWorkerImpl):
        (WebKit::WebWorkerImpl::~WebWorkerImpl):
        (WebKit::WebWorkerImpl::newCommonClient):
        (WebKit::WebWorkerImpl::commonClient):
        (WebKit::WebWorkerImpl::postMessageToWorkerContextTask):
        (WebKit::WebWorkerImpl::startWorkerContext):
        (WebKit::WebWorkerImpl::terminateWorkerContext):
        (WebKit::WebWorkerImpl::postMessageToWorkerContext):
        (WebKit::WebWorkerImpl::workerObjectDestroyed):
        (WebKit::WebWorkerImpl::clientDestroyed):
        * src/WebWorkerImpl.h: Copied from Source/WebKit/chromium/src/WebWorkerBase.cpp.
        (WebKit::WebWorkerImpl::client):
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-12-27  Dmitry Lomov  <dslomov@google.com>

        [WebWorkers][Chromium] Remove remains of cross-process dedicated worker implementation.
        https://bugs.webkit.org/show_bug.cgi?id=66509
        Just renames, merges and removal of dead code. Here are the list of renames:
          - WebCommonWorkerClient merged with WebWorkerClient and renamed to WebSharedWorkerClient
          - NewWebCommonWorkerClient renamed to WebCommonWorkerClient
          - WebWorkerBase merged into WebSharedWorkerImpl
          - NewWebWorkerBase renamed into WebWorkerBase
        WebWorkerClient.h has a "#define WebWorkerClient WebSharedWorkerClient" to keep chromium building.
        Will be removed after coordinated patch in chromium.

        Reviewed by David Levin.

        * WebKit.gyp:
        * public/WebCommonWorkerClient.h:
        * public/WebSharedWorker.h:
        * public/WebSharedWorkerClient.h: Copied from Source/WebKit/chromium/public/WebCommonWorkerClient.h.
        (WebKit::WebSharedWorkerClient::postConsoleMessageToWorkerObject):
        (WebKit::WebSharedWorkerClient::allowFileSystem):
        (WebKit::WebSharedWorkerClient::openFileSystem):
        (WebKit::WebSharedWorkerClient::dispatchDevToolsMessage):
        (WebKit::WebSharedWorkerClient::saveDevToolsAgentState):
        (WebKit::WebSharedWorkerClient::~WebSharedWorkerClient):
        * public/WebWorkerClient.h:
        * src/DatabaseObserver.cpp:
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge):
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask):
        (WebKit::allowDatabaseForWorker):
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::openFromWorker):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::initializeWebKitStaticValues):
        (WebKit::WebSharedWorkerImpl::WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::~WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::stopWorkerThread):
        (WebKit::WebSharedWorkerImpl::initializeLoader):
        (WebKit::WebSharedWorkerImpl::didCreateDataSource):
        (WebKit::WebSharedWorkerImpl::createApplicationCacheHost):
        (WebKit::WebSharedWorkerImpl::postMessageToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postMessageTask):
        (WebKit::WebSharedWorkerImpl::postExceptionToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postExceptionTask):
        (WebKit::WebSharedWorkerImpl::postConsoleMessageToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postConsoleMessageTask):
        (WebKit::WebSharedWorkerImpl::postMessageToPageInspector):
        (WebKit::WebSharedWorkerImpl::postMessageToPageInspectorTask):
        (WebKit::WebSharedWorkerImpl::updateInspectorStateCookie):
        (WebKit::WebSharedWorkerImpl::updateInspectorStateCookieTask):
        (WebKit::WebSharedWorkerImpl::confirmMessageFromWorkerObject):
        (WebKit::WebSharedWorkerImpl::confirmMessageTask):
        (WebKit::WebSharedWorkerImpl::reportPendingActivity):
        (WebKit::WebSharedWorkerImpl::reportPendingActivityTask):
        (WebKit::WebSharedWorkerImpl::workerContextClosed):
        (WebKit::WebSharedWorkerImpl::workerContextClosedTask):
        (WebKit::WebSharedWorkerImpl::workerContextDestroyed):
        (WebKit::WebSharedWorkerImpl::workerContextDestroyedTask):
        (WebKit::WebSharedWorkerImpl::postTaskToLoader):
        (WebKit::WebSharedWorkerImpl::postTaskForModeToWorkerContext):
        (WebKit::WebSharedWorker::create):
        * src/WebSharedWorkerImpl.h:
        (WebKit::WebSharedWorkerImpl::view):
        (WebKit::WebSharedWorkerImpl::commonClient):
        (WebKit::WebSharedWorkerImpl::client):
        (WebKit::WebSharedWorkerImpl::setWorkerThread):
        (WebKit::WebSharedWorkerImpl::workerThread):
        * src/WebWorkerBase.cpp:
        (WebKit::invokeTaskMethod):
        (WebKit::WebWorkerBase::dispatchTaskToMainThread):
        * src/WebWorkerBase.h:
        * src/WebWorkerClientImpl.cpp:
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::commonClient):
        * src/WebWorkerImpl.cpp: Removed.
        * src/WebWorkerImpl.h: Removed.
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-12-27  Tony Chang  <tony@chromium.org>

        [chromium] Minor cleanup of gyp files.
        https://bugs.webkit.org/show_bug.cgi?id=75269

        Reviewed by Adam Barth.

        * WebKit.gyp: msvs_guid is no longer needed.

2011-12-27  Tony Chang  <tony@chromium.org>

        [chromium] When building with clang, enable -Wglobal-constructors
        https://bugs.webkit.org/show_bug.cgi?id=74365

        Reviewed by Adam Barth.

        * WebKit.gyp: Only add it to the webkit target.  I got errors when
        trying to compile webkit_unit_tests.

2011-12-24  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed, rolling out r103619.
        http://trac.webkit.org/changeset/103619
        https://bugs.webkit.org/show_bug.cgi?id=66509

        Broke chromium clang build

        * WebKit.gyp:
        * public/WebCommonWorkerClient.h:
        (WebKit::WebCommonWorkerClient::postConsoleMessageToWorkerObject):
        (WebKit::WebCommonWorkerClient::allowFileSystem):
        (WebKit::WebCommonWorkerClient::openFileSystem):
        (WebKit::WebCommonWorkerClient::dispatchDevToolsMessage):
        (WebKit::WebCommonWorkerClient::saveDevToolsAgentState):
        (WebKit::WebCommonWorkerClient::~WebCommonWorkerClient):
        * public/WebSharedWorker.h:
        * public/WebSharedWorkerClient.h: Removed.
        * public/WebWorkerClient.h:
        (WebKit::WebWorkerClient::~WebWorkerClient):
        * src/DatabaseObserver.cpp:
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge):
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask):
        (WebKit::allowDatabaseForWorker):
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::openFromWorker):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::~WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::client):
        (WebKit::WebSharedWorker::create):
        * src/WebSharedWorkerImpl.h:
        (WebKit::WebSharedWorkerImpl::commonClient):
        (WebKit::WebSharedWorkerImpl::newCommonClient):
        * src/WebWorkerBase.cpp:
        (WebKit::initializeWebKitStaticValues):
        (WebKit::WebWorkerBase::WebWorkerBase):
        (WebKit::WebWorkerBase::~WebWorkerBase):
        (WebKit::WebWorkerBase::stopWorkerThread):
        (WebKit::WebWorkerBase::initializeLoader):
        (WebKit::WebWorkerBase::dispatchTaskToMainThread):
        (WebKit::WebWorkerBase::invokeTaskMethod):
        (WebKit::WebWorkerBase::didCreateDataSource):
        (WebKit::WebWorkerBase::createApplicationCacheHost):
        (WebKit::WebWorkerBase::postMessageToWorkerObject):
        (WebKit::WebWorkerBase::postMessageTask):
        (WebKit::WebWorkerBase::postExceptionToWorkerObject):
        (WebKit::WebWorkerBase::postExceptionTask):
        (WebKit::WebWorkerBase::postConsoleMessageToWorkerObject):
        (WebKit::WebWorkerBase::postConsoleMessageTask):
        (WebKit::WebWorkerBase::postMessageToPageInspector):
        (WebKit::WebWorkerBase::postMessageToPageInspectorTask):
        (WebKit::WebWorkerBase::updateInspectorStateCookie):
        (WebKit::WebWorkerBase::updateInspectorStateCookieTask):
        (WebKit::WebWorkerBase::confirmMessageFromWorkerObject):
        (WebKit::WebWorkerBase::confirmMessageTask):
        (WebKit::WebWorkerBase::reportPendingActivity):
        (WebKit::WebWorkerBase::reportPendingActivityTask):
        (WebKit::WebWorkerBase::workerContextClosed):
        (WebKit::WebWorkerBase::workerContextClosedTask):
        (WebKit::WebWorkerBase::workerContextDestroyed):
        (WebKit::WebWorkerBase::workerContextDestroyedTask):
        (WebKit::WebWorkerBase::postTaskToLoader):
        (WebKit::WebWorkerBase::postTaskForModeToWorkerContext):
        * src/WebWorkerBase.h:
        (WebKit::WebWorkerBase::view):
        (WebKit::WebWorkerBase::setWorkerThread):
        (WebKit::WebWorkerBase::workerThread):
        * src/WebWorkerClientImpl.cpp:
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::newCommonClient):
        * src/WebWorkerImpl.cpp: Added.
        (WebKit::WebWorker::create):
        (WebKit::WebWorkerImpl::WebWorkerImpl):
        (WebKit::WebWorkerImpl::~WebWorkerImpl):
        (WebKit::WebWorkerImpl::newCommonClient):
        (WebKit::WebWorkerImpl::commonClient):
        (WebKit::WebWorkerImpl::postMessageToWorkerContextTask):
        (WebKit::WebWorkerImpl::startWorkerContext):
        (WebKit::WebWorkerImpl::terminateWorkerContext):
        (WebKit::WebWorkerImpl::postMessageToWorkerContext):
        (WebKit::WebWorkerImpl::workerObjectDestroyed):
        (WebKit::WebWorkerImpl::clientDestroyed):
        * src/WebWorkerImpl.h: Copied from Source/WebKit/chromium/src/WebWorkerBase.cpp.
        (WebKit::WebWorkerImpl::client):
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-12-23  Sam Weinig  <sam@webkit.org>

        Start extracting platform specific bits out of PlatformEvents
        https://bugs.webkit.org/show_bug.cgi?id=75063

        Reviewed by Anders Carlsson.

        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformMouseEventBuilder::PlatformMouseEventBuilder):
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder):
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        (WebKit::PlatformKeyboardEventBuilder::PlatformKeyboardEventBuilder):
        (WebKit::PlatformTouchEventBuilder::PlatformTouchEventBuilder):

2011-12-23  Ryosuke Niwa  <rniwa@webkit.org>

        Chromium Chromium DEPS from 115012 to 115743.

        * DEPS:

2011-12-23  Karl Koscher  <supersat@chromium.org>

        Give embedders a chance to handle postMessage calls
        https://bugs.webkit.org/show_bug.cgi?id=73883

        Reviewed by Adam Barth.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::willCheckAndDispatchMessageEvent): 
            interface to give the embedder a chance to handle this postMessage call
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::willCheckAndDispatchMessageEvent): Call 
            willCheckAndDispatchMessageEvent on WebFrameClient
        * src/FrameLoaderClientImpl.h:

2011-12-23  Dmitry Lomov  <dslomov@google.com>

        [WebWorkers][Chromium] Remove remains of cross-process dedicated worker implementation.
        https://bugs.webkit.org/show_bug.cgi?id=66509
        Just renames, merges and removal of dead code. Here are the list of renames:
          - WebCommonWorkerClient merged with WebWorkerClient and renamed to WebSharedWorkerClient
          - NewWebCommonWorkerClient renamed to WebCommonWorkerClient
          - WebWorkerBase merged into WebSharedWorkerImpl
          - NewWebWorkerBase renamed into WebWorkerBase
        WebWorkerClient.h has a "#define WebWorkerClient WebSharedWorkerClient" to keep chromium building.
        Will be removed after coordinated patch in chromium.

        Reviewed by David Levin.

        * WebKit.gyp:
        * public/WebCommonWorkerClient.h:
        * public/WebSharedWorker.h:
        * public/WebSharedWorkerClient.h: Copied from Source/WebKit/chromium/public/WebCommonWorkerClient.h.
        (WebKit::WebSharedWorkerClient::postConsoleMessageToWorkerObject):
        (WebKit::WebSharedWorkerClient::allowFileSystem):
        (WebKit::WebSharedWorkerClient::openFileSystem):
        (WebKit::WebSharedWorkerClient::dispatchDevToolsMessage):
        (WebKit::WebSharedWorkerClient::saveDevToolsAgentState):
        (WebKit::WebSharedWorkerClient::~WebSharedWorkerClient):
        * public/WebWorkerClient.h:
        * src/DatabaseObserver.cpp:
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge):
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask):
        (WebKit::allowDatabaseForWorker):
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::openFromWorker):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::initializeWebKitStaticValues):
        (WebKit::WebSharedWorkerImpl::WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::~WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::stopWorkerThread):
        (WebKit::WebSharedWorkerImpl::initializeLoader):
        (WebKit::WebSharedWorkerImpl::didCreateDataSource):
        (WebKit::WebSharedWorkerImpl::createApplicationCacheHost):
        (WebKit::WebSharedWorkerImpl::postMessageToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postMessageTask):
        (WebKit::WebSharedWorkerImpl::postExceptionToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postExceptionTask):
        (WebKit::WebSharedWorkerImpl::postConsoleMessageToWorkerObject):
        (WebKit::WebSharedWorkerImpl::postConsoleMessageTask):
        (WebKit::WebSharedWorkerImpl::postMessageToPageInspector):
        (WebKit::WebSharedWorkerImpl::postMessageToPageInspectorTask):
        (WebKit::WebSharedWorkerImpl::updateInspectorStateCookie):
        (WebKit::WebSharedWorkerImpl::updateInspectorStateCookieTask):
        (WebKit::WebSharedWorkerImpl::confirmMessageFromWorkerObject):
        (WebKit::WebSharedWorkerImpl::confirmMessageTask):
        (WebKit::WebSharedWorkerImpl::reportPendingActivity):
        (WebKit::WebSharedWorkerImpl::reportPendingActivityTask):
        (WebKit::WebSharedWorkerImpl::workerContextClosed):
        (WebKit::WebSharedWorkerImpl::workerContextClosedTask):
        (WebKit::WebSharedWorkerImpl::workerContextDestroyed):
        (WebKit::WebSharedWorkerImpl::workerContextDestroyedTask):
        (WebKit::WebSharedWorkerImpl::postTaskToLoader):
        (WebKit::WebSharedWorkerImpl::postTaskForModeToWorkerContext):
        (WebKit::WebSharedWorker::create):
        * src/WebSharedWorkerImpl.h:
        (WebKit::WebSharedWorkerImpl::view):
        (WebKit::WebSharedWorkerImpl::commonClient):
        (WebKit::WebSharedWorkerImpl::client):
        (WebKit::WebSharedWorkerImpl::setWorkerThread):
        (WebKit::WebSharedWorkerImpl::workerThread):
        * src/WebWorkerBase.cpp:
        (WebKit::invokeTaskMethod):
        (WebKit::WebWorkerBase::dispatchTaskToMainThread):
        * src/WebWorkerBase.h:
        * src/WebWorkerClientImpl.cpp:
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::commonClient):
        * src/WebWorkerImpl.cpp: Removed.
        * src/WebWorkerImpl.h: Removed.
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-12-23  Bill Budge  <bbudge@chromium.org>

        Add unit tests for AssociatedURLLoader to check redirect handling and
        cross-origin access control.
        https://bugs.webkit.org/show_bug.cgi?id=74952

        Reviewed by Adam Barth.

        * tests/AssociatedURLLoaderTest.cpp:

2011-12-22  Chris Rogers  <crogers@google.com>

        WebMediaPlayerClientImpl::AudioClientImpl wrapper object should exist only if wrapped object exists
        https://bugs.webkit.org/show_bug.cgi?id=75113

        Reviewed by Kenneth Russell.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::wrap):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::setClient):
        * src/WebMediaPlayerClientImpl.h:
        (WebKit::WebMediaPlayerClientImpl::AudioClientImpl::AudioClientImpl):

2011-12-21  Peter Kotwicz  <pkotwicz@google.com>

        Plumbs refresh rate through WebLayerTreeView::Settings
        https://bugs.webkit.org/show_bug.cgi?id=74884

        Reviewed by James Robinson.

        * public/platform/WebLayerTreeView.h:
        (WebKit::WebLayerTreeView::Settings::Settings):
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):

2011-12-20  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: [Extension API] refactor extension API build code, expose experimental APIs conditionally in chromium
        https://bugs.webkit.org/show_bug.cgi?id=74941

        Reviewed by Pavel Feldman.

        * WebKit.gyp:
        * WebKit.gypi:
        * scripts/concatenate_js_files.py:
        (main):
        * scripts/generate_devtools_extension_api.py:
        (write_devtools_extension_api):
        * src/js/DevTools.js:
        ():

2011-12-20  Nate Chapin  <japhet@chromium.org>

        Revert code for r96912 and r101905, since they cause
        regressions in mac scrollbars, caret display in
        form fields, etc.
        https://bugs.webkit.org/show_bug.cgi?id=74939

        Reviewed by Eric Seidel.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setFocus):

2011-12-20  Mike Reed  <reed@google.com>

        enable USE_SKIA_TEXT by default, replacing GDI for all text drawing
        https://bugs.webkit.org/show_bug.cgi?id=74928

        Reviewed by Stephen White.

        * features.gypi:

2011-12-20  Greg Billock  <gbillock@google.com>

        Make WebIntentServiceInfo constructor public for testing.
        https://bugs.webkit.org/show_bug.cgi?id=74764

        Reviewed by Darin Fisher.

        * public/WebIntentServiceInfo.h:

2011-12-19  James Robinson  <jamesr@chromium.org>

        Compile fix for chromium on windows due to collision of testing::NotNull from gtest and NotNull from Vector.h

        * tests/WebLayerTest.cpp:

2011-12-19  Ami Fischman  <fischman@chromium.org>

        Teach VideoLayerChromium how to render native texture (to support HW video decode).
        https://bugs.webkit.org/show_bug.cgi?id=73043
        
        Reviewed by James Robinson.
        
        Fix the life-cycle of video frames handled by VideoLayerChromium/CCVideoLayerImpl.
        VideoFrameProvider::{get,put}CurrentFrame provide lease semantics.  Previously
        VideoLayerChromium would acquire the lease for the duration of copying the frame,
        even if that was only a texture ID, and immediately return the lease, while
        CCVideoLayerImpl::draw() would come along later and use the (no-longer locked)
        texture optimistically.  This change makes it so that CCVideoLayerImpl holds
        the frame's lease for the duration of draw(), guaranteeing the frame is valid to read.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::getCurrentFrame):

2011-12-19  Sam Weinig  <sam@webkit.org>

        More PlatformEvent cleanup
        https://bugs.webkit.org/show_bug.cgi?id=74831

        Reviewed by Dan Bernstein.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::mouseContextMenu):
        Update to use new names, access style.

2011-12-19  James Robinson  <jamesr@chromium.org>

        [chromium] CCLayerDelegate and WebLayerClient do not need notifySyncRequired
        https://bugs.webkit.org/show_bug.cgi?id=74376

        Reviewed by Kenneth Russell.

        WebLayerClient::notifyNeedsComposite() is an odd interface for the same reason that
        CCLayerDelegate::notifySyncRequired() is - all scheduling decisions should route through the WebLayerTreeView,
        not individual layers. In practice, all implementations of WebLayerClient::notifySyncRequired() do the exact
        same thing as WebLayerTreeView::scheduleComposite(). This removes that callback, making WebLayerClient an empty
        interface, and routes all calls that would go to that interface to WebLayerTreeView::scheduleComposite().

        Once downstream implementations of WebLayerClient are removed, WebLayerClient.h and the constructors associated
        with it can be deleted.

        The bulk of the changes here are to the test harness. Many tests that were designed around notifySyncRequired()
        are rewritten to check for CCLayerTreeHost::setNeedsCommit() or WebLayerTreeView::scheduleComposite() instead.
        In a few instances, this required changing the setup logic around somewhat so that the layers being manipulated
        were in a tree that initialized without errors.

        * WebKit.gypi:
        * public/platform/WebContentLayer.h:
        * public/platform/WebExternalTextureLayer.h:
        * public/platform/WebLayer.h:
        * public/platform/WebLayerClient.h:
        * src/WebContentLayer.cpp:
        (WebKit::WebContentLayer::create):
        * src/WebContentLayerImpl.cpp:
        (WebKit::WebContentLayerImpl::create):
        (WebKit::WebContentLayerImpl::WebContentLayerImpl):
        * src/WebContentLayerImpl.h:
        * src/WebExternalTextureLayer.cpp:
        (WebKit::WebExternalTextureLayer::create):
        * src/WebExternalTextureLayerImpl.cpp:
        (WebKit::WebExternalTextureLayerImpl::create):
        (WebKit::WebExternalTextureLayerImpl::WebExternalTextureLayerImpl):
        * src/WebExternalTextureLayerImpl.h:
        * src/WebLayer.cpp:
        (WebKit::WebLayer::create):
        * src/WebLayerImpl.cpp:
        (WebKit::WebLayerImpl::create):
        (WebKit::WebLayerImpl::WebLayerImpl):
        * src/WebLayerImpl.h:
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::create):
        (WebKit::WebLayerTreeViewImpl::WebLayerTreeViewImpl):
        * src/WebLayerTreeViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHost::create):
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF::MockLayerTreeHostClient::createLayerTreeHostContext3D):
        (WTF::CCLayerTreeHostTestScrollSimple::animateAndLayout):
        * tests/CompositorMockGraphicsContext3D.h: Added.
        (WebCore::createCompositorMockGraphicsContext3D):
        * tests/CompositorMockWebGraphicsContext3D.h: Added.
        (WebKit::CompositorMockWebGraphicsContext3D::create):
        (WebKit::CompositorMockWebGraphicsContext3D::makeContextCurrent):
        (WebKit::CompositorMockWebGraphicsContext3D::createProgram):
        (WebKit::CompositorMockWebGraphicsContext3D::createShader):
        (WebKit::CompositorMockWebGraphicsContext3D::getShaderiv):
        (WebKit::CompositorMockWebGraphicsContext3D::getProgramiv):
        (WebKit::CompositorMockWebGraphicsContext3D::CompositorMockWebGraphicsContext3D):
        * tests/LayerChromiumTest.cpp:
        * tests/MockWebGraphicsContext3D.h:
        (WebKit::MockWebGraphicsContext3D::getContextAttributes):
        * tests/WebGLLayerChromiumTest.cpp:
        (WebKit::TEST):
        * tests/WebLayerTest.cpp:
        (testing::MockWebLayerTreeViewClient::animateAndLayout):
        (testing::MockWebLayerTreeViewClient::applyScrollAndScale):
        (testing::MockWebLayerTreeViewClient::createContext3D):
        (testing::MockWebLayerTreeViewClient::didRebindGraphicsContext):
        (testing::WebLayerTest::SetUp):
        (testing::WebLayerTest::TearDown):
        (testing::TEST_F):

2011-12-19  James Robinson  <jamesr@chromium.org>

        [chromium] Set the CCLayerTreeHost pointer on LayerChromium instances eagerly
        https://bugs.webkit.org/show_bug.cgi?id=74477

        Reviewed by Kenneth Russell.

        Add some new tests for LayerChromium::m_layerTreeHost behavior.

        * tests/CCLayerTreeHostTest.cpp:
        (::MockLayerTreeHost::create):
        (::MockLayerTreeHost::MockLayerTreeHost):
        (::CCLayerTreeHostTestShortlived1::beginTest):
        (::CCLayerTreeHostTestShortlived2::beginTest):
        (::CCLayerTreeHostTestShortlived3::beginTest):
        * tests/LayerChromiumTest.cpp:

2011-12-19  Adrienne Walker  <enne@google.com>

        [chromium] Add more using statements to (re)fix Chromium builders.

        Unreviewed gardening.

        * tests/Canvas2DLayerChromiumTest.cpp:

2011-12-19  Adrienne Walker  <enne@google.com>

        [chromium] Fix win builder due to more NotNull ambiguity errors.

        Unreviewed gardening.

        * tests/Canvas2DLayerChromiumTest.cpp:

2011-12-19  Iain Merrick  <husky@google.com>

        [chromium] Accelerated canvas broken in threaded compositing mode
        https://bugs.webkit.org/show_bug.cgi?id=72738

        We were flushing the Skia canvas in updateCompositorResources, which
        is illegal as it runs on the wrong thread. Moved to paintContentsIfDirty
        instead. For correct rendering on the compositor thread, we make a copy
        of the canvas texture in updateCompositorResources.

        Removed m_textureId and pushPropertiesTo from CanvasLayerChromium, as
        it's no longer common between Canvas2DLayerChromium and
        WebGLLayerChromium. WebGL changes do not change functionality.

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/Canvas2DLayerChromiumTest.cpp: Added.
        (WebCore::Canvas2DLayerChromiumTest::setTextureManager):

2011-12-19  Ryosuke Niwa  <rniwa@webkit.org>

        Chromium DEPS from 114686 to 115012.

        * DEPS:

2011-12-19  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Fixing memory leak in WebMediaStreamSource
        https://bugs.webkit.org/show_bug.cgi?id=74714

        Reviewed by Eric Seidel.

        Missed that PassRefPtr does a ref if constructed with a raw pointer.
        Also removed an extra space in WebMediaStreamDescriptor.cpp.

        * src/WebMediaStreamDescriptor.cpp:
        (WebKit::WebMediaStreamDescriptor::sources):
        * src/WebMediaStreamSource.cpp:
        (WebKit::WebMediaStreamSource::operator=):

2011-12-19  Adrienne Walker  <enne@google.com>

        Try to fix the Chromium win builder NotNull conflict.

        Unreviewed gardening.

        * tests/MockGraphicsContext3DTest.cpp:

2011-12-18  Keishi Hattori  <keishi@webkit.org>

        Implement <input type=color> UI WebKit chromium part
        https://bugs.webkit.org/show_bug.cgi?id=65897

        Reviewed by Darin Fisher.

        * WebKit.gyp: Added new files.
        * features.gypi: Added ENABLE_INPUT_COLOR.
        * public/WebColorChooser.h: Added. Interface for ColorChooserProxy to call.
        (WebKit::WebColorChooser::~WebColorChooser):
        (WebKit::WebColorChooser::setSelectedColor):
        (WebKit::WebColorChooser::endChooser):
        * public/WebColorChooserClient.h: Added.
        (WebKit::WebColorChooserClient::~WebColorChooserClient):
        (WebKit::WebColorChooserClient::didChooseColor): Only called when user changes the color.
        (WebKit::WebColorChooserClient::didEndChooser): Called when WebColorChooser::endChooser is called.
        * public/WebViewClient.h:
        (WebKit::WebViewClient::createColorChooser): Creates a new color chooser. If there is an old color chooser, this will end it.
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::createColorChooser): Calls WebViewClient::createColorChooser.
        * src/ChromeClientImpl.h:
        * src/ColorChooserProxy.cpp: Proxies calls to WebCore::ColorChooser to WebKit::WebColorChooser.
        (WebKit::ColorChooserProxy::ColorChooserProxy):
        (WebKit::ColorChooserProxy::~ColorChooserProxy):
        (WebKit::ColorChooserProxy::setSelectedColor):
        (WebKit::ColorChooserProxy::endChooser):
        * src/ColorChooserProxy.h:
        * src/WebColorChooserClientImpl.cpp: Proxies calls to WebKit::WebColorChooserClient to WebCore::ColorChooserClient.
        (WebKit::WebColorChooserClientImpl::WebColorChooserClientImpl):
        (WebKit::WebColorChooserClientImpl::~WebColorChooserClientImpl):
        (WebKit::WebColorChooserClientImpl::didChooseColor):
        (WebKit::WebColorChooserClientImpl::didEndChooser):
        * src/WebColorChooserClientImpl.h: Added.

2011-12-18  James Kozianski  <koz@chromium.org>

        [chromium] Add worldId parameter to allowScriptExtension()
        https://bugs.webkit.org/show_bug.cgi?id=74214

        Chromium uses the worldId to determine what extension is running in a
        v8 context and knowing that at the time allowScriptExtension() is
        called allows us to conditionally inject extension APIs.

        Reviewed by Darin Fisher.

        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowScriptExtension):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowScriptExtension):
        * src/FrameLoaderClientImpl.h:

2011-12-18  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r103169.
        http://trac.webkit.org/changeset/103169
        https://bugs.webkit.org/show_bug.cgi?id=74809

        it broke compilation on many platforms (Requested by loislo_
        on #webkit).

        * WebKit.gyp:
        * features.gypi:
        * public/WebColorChooser.h: Removed.
        * public/WebColorChooserClient.h: Removed.
        * public/WebViewClient.h:
        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:
        * src/ColorChooserProxy.cpp: Removed.
        * src/WebColorChooserClientImpl.cpp: Removed.
        * src/WebColorChooserClientImpl.h: Removed.

2011-12-18  Keishi Hattori  <keishi@webkit.org>

        Implement <input type=color> UI WebKit chromium part
        https://bugs.webkit.org/show_bug.cgi?id=65897

        Reviewed by Darin Fisher.

        * WebKit.gyp: Added new files.
        * features.gypi: Added ENABLE_INPUT_COLOR.
        * public/WebColorChooser.h: Added. Interface for ColorChooserProxy to call.
        (WebKit::WebColorChooser::~WebColorChooser):
        (WebKit::WebColorChooser::setSelectedColor):
        (WebKit::WebColorChooser::endChooser):
        * public/WebColorChooserClient.h: Added.
        (WebKit::WebColorChooserClient::~WebColorChooserClient):
        (WebKit::WebColorChooserClient::didChooseColor): Only called when user changes the color.
        (WebKit::WebColorChooserClient::didEndChooser): Called when WebColorChooser::endChooser is called.
        * public/WebViewClient.h:
        (WebKit::WebViewClient::createColorChooser): Creates a new color chooser. If there is an old color chooser, this will end it.
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::createColorChooser): Calls WebViewClient::createColorChooser.
        * src/ChromeClientImpl.h:
        * src/ColorChooserProxy.cpp: Proxies calls to WebCore::ColorChooser to WebKit::WebColorChooser.
        (WebKit::ColorChooserProxy::ColorChooserProxy):
        (WebKit::ColorChooserProxy::~ColorChooserProxy):
        (WebKit::ColorChooserProxy::setSelectedColor):
        (WebKit::ColorChooserProxy::endChooser):
        * src/ColorChooserProxy.h:
        * src/WebColorChooserClientImpl.cpp: Proxies calls to WebKit::WebColorChooserClient to WebCore::ColorChooserClient.
        (WebKit::WebColorChooserClientImpl::WebColorChooserClientImpl):
        (WebKit::WebColorChooserClientImpl::~WebColorChooserClientImpl):
        (WebKit::WebColorChooserClientImpl::didChooseColor):
        (WebKit::WebColorChooserClientImpl::didEndChooser):
        * src/WebColorChooserClientImpl.h: Added.

2011-12-17  Sam Weinig  <sam@webkit.org>

        Make PlatformTouchEvent inherit from PlatformEvent
        https://bugs.webkit.org/show_bug.cgi?id=74777

        Reviewed by Andreas Kling.

        * src/WebInputEventConversion.cpp:
        (WebKit::toPlatformTouchEventType):
        * tests/InnerGestureRecognizerTest.cpp:
        (BuildablePlatformTouchEvent::BuildablePlatformTouchEvent):
        (SimulateAndTestFirstClick):
        (TouchPointAndEvent::TouchPointAndEvent):
        Add PlatformEvent prefix to enum types.

2011-12-17  Adrienne Walker  <enne@google.com>

        [chromium] Reverting r103011, r103135 due to Aura test failures

        Unreviewed gardening.

        * WebKit.gypi:
        * public/platform/WebContentLayer.h:
        * public/platform/WebExternalTextureLayer.h:
        * public/platform/WebLayer.h:
        * public/platform/WebLayerClient.h:
        * src/WebContentLayer.cpp:
        (WebKit::WebContentLayer::create):
        * src/WebContentLayerImpl.cpp:
        (WebKit::WebContentLayerImpl::create):
        (WebKit::WebContentLayerImpl::WebContentLayerImpl):
        (WebKit::WebContentLayerImpl::notifySyncRequired):
        * src/WebContentLayerImpl.h:
        * src/WebExternalTextureLayer.cpp:
        (WebKit::WebExternalTextureLayer::create):
        * src/WebExternalTextureLayerImpl.cpp:
        (WebKit::WebExternalTextureLayerImpl::create):
        (WebKit::WebExternalTextureLayerImpl::WebExternalTextureLayerImpl):
        (WebKit::WebExternalTextureLayerImpl::notifySyncRequired):
        * src/WebExternalTextureLayerImpl.h:
        * src/WebLayer.cpp:
        (WebKit::WebLayer::create):
        * src/WebLayerImpl.cpp:
        (WebKit::WebLayerImpl::create):
        (WebKit::WebLayerImpl::WebLayerImpl):
        (WebKit::WebLayerImpl::notifySyncRequired):
        * src/WebLayerImpl.h:
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::create):
        (WebKit::WebLayerTreeViewImpl::WebLayerTreeViewImpl):
        * src/WebLayerTreeViewImpl.h:
        * tests/CCLayerTreeHostImplTest.cpp:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHost::create):
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF::CompositorMockWebGraphicsContext3D::create):
        (WTF::CompositorMockWebGraphicsContext3D::makeContextCurrent):
        (WTF::CompositorMockWebGraphicsContext3D::createProgram):
        (WTF::CompositorMockWebGraphicsContext3D::createShader):
        (WTF::CompositorMockWebGraphicsContext3D::getShaderiv):
        (WTF::CompositorMockWebGraphicsContext3D::getProgramiv):
        (WTF::CompositorMockWebGraphicsContext3D::CompositorMockWebGraphicsContext3D):
        (WTF::MockLayerTreeHostClient::createLayerTreeHostContext3D):
        (WTF::CCLayerTreeHostTestShortlived1::beginTest):
        (WTF::CCLayerTreeHostTestShortlived2::beginTest):
        (WTF::CCLayerTreeHostTestShortlived3::beginTest):
        (WTF::CCLayerTreeHostTestScrollSimple::beginCommitOnCCThread):
        (WTF::TestOpacityChangeLayerDelegate::notifySyncRequired):
        * tests/CompositorFakeGraphicsContext3D.h: Removed.
        * tests/CompositorFakeWebGraphicsContext3D.h: Removed.
        * tests/LayerChromiumTest.cpp:
        * tests/MockGraphicsContext3DTest.cpp: Renamed from Source/WebKit/chromium/tests/FakeGraphicsContext3DTest.cpp.
        (FrameCountingContext::FrameCountingContext):
        (FrameCountingContext::prepareTexture):
        (FrameCountingContext::frameCount):
        (TEST):
        (ContextThatCountsMakeCurrents::ContextThatCountsMakeCurrents):
        (ContextThatCountsMakeCurrents::makeContextCurrent):
        (ContextThatCountsMakeCurrents::makeCurrentCount):
        (ContextWithMakeCurrentThatFails::ContextWithMakeCurrentThatFails):
        (ContextWithMakeCurrentThatFails::makeContextCurrent):
        * tests/MockWebGraphicsContext3D.h: Renamed from Source/WebKit/chromium/tests/FakeWebGraphicsContext3D.h.
        (WebKit::MockWebGraphicsContext3D::initialize):
        (WebKit::MockWebGraphicsContext3D::makeContextCurrent):
        (WebKit::MockWebGraphicsContext3D::width):
        (WebKit::MockWebGraphicsContext3D::height):
        (WebKit::MockWebGraphicsContext3D::reshape):
        (WebKit::MockWebGraphicsContext3D::isGLES2Compliant):
        (WebKit::MockWebGraphicsContext3D::readBackFramebuffer):
        (WebKit::MockWebGraphicsContext3D::getPlatformTextureId):
        (WebKit::MockWebGraphicsContext3D::prepareTexture):
        (WebKit::MockWebGraphicsContext3D::postSubBufferCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::synthesizeGLError):
        (WebKit::MockWebGraphicsContext3D::isContextLost):
        (WebKit::MockWebGraphicsContext3D::mapBufferSubDataCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::unmapBufferSubDataCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::mapTexSubImage2DCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::unmapTexSubImage2DCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::setVisibilityCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::getRequestableExtensionsCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::requestExtensionCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::blitFramebufferCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::renderbufferStorageMultisampleCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::activeTexture):
        (WebKit::MockWebGraphicsContext3D::attachShader):
        (WebKit::MockWebGraphicsContext3D::bindAttribLocation):
        (WebKit::MockWebGraphicsContext3D::bindBuffer):
        (WebKit::MockWebGraphicsContext3D::bindFramebuffer):
        (WebKit::MockWebGraphicsContext3D::bindRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::bindTexture):
        (WebKit::MockWebGraphicsContext3D::blendColor):
        (WebKit::MockWebGraphicsContext3D::blendEquation):
        (WebKit::MockWebGraphicsContext3D::blendEquationSeparate):
        (WebKit::MockWebGraphicsContext3D::blendFunc):
        (WebKit::MockWebGraphicsContext3D::blendFuncSeparate):
        (WebKit::MockWebGraphicsContext3D::bufferData):
        (WebKit::MockWebGraphicsContext3D::bufferSubData):
        (WebKit::MockWebGraphicsContext3D::checkFramebufferStatus):
        (WebKit::MockWebGraphicsContext3D::clear):
        (WebKit::MockWebGraphicsContext3D::clearColor):
        (WebKit::MockWebGraphicsContext3D::clearDepth):
        (WebKit::MockWebGraphicsContext3D::clearStencil):
        (WebKit::MockWebGraphicsContext3D::colorMask):
        (WebKit::MockWebGraphicsContext3D::compileShader):
        (WebKit::MockWebGraphicsContext3D::compressedTexImage2D):
        (WebKit::MockWebGraphicsContext3D::compressedTexSubImage2D):
        (WebKit::MockWebGraphicsContext3D::copyTexImage2D):
        (WebKit::MockWebGraphicsContext3D::copyTexSubImage2D):
        (WebKit::MockWebGraphicsContext3D::cullFace):
        (WebKit::MockWebGraphicsContext3D::depthFunc):
        (WebKit::MockWebGraphicsContext3D::depthMask):
        (WebKit::MockWebGraphicsContext3D::depthRange):
        (WebKit::MockWebGraphicsContext3D::detachShader):
        (WebKit::MockWebGraphicsContext3D::disable):
        (WebKit::MockWebGraphicsContext3D::disableVertexAttribArray):
        (WebKit::MockWebGraphicsContext3D::drawArrays):
        (WebKit::MockWebGraphicsContext3D::drawElements):
        (WebKit::MockWebGraphicsContext3D::enable):
        (WebKit::MockWebGraphicsContext3D::enableVertexAttribArray):
        (WebKit::MockWebGraphicsContext3D::finish):
        (WebKit::MockWebGraphicsContext3D::flush):
        (WebKit::MockWebGraphicsContext3D::framebufferRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::framebufferTexture2D):
        (WebKit::MockWebGraphicsContext3D::frontFace):
        (WebKit::MockWebGraphicsContext3D::generateMipmap):
        (WebKit::MockWebGraphicsContext3D::getActiveAttrib):
        (WebKit::MockWebGraphicsContext3D::getActiveUniform):
        (WebKit::MockWebGraphicsContext3D::getAttachedShaders):
        (WebKit::MockWebGraphicsContext3D::getAttribLocation):
        (WebKit::MockWebGraphicsContext3D::getBooleanv):
        (WebKit::MockWebGraphicsContext3D::getBufferParameteriv):
        (WebKit::MockWebGraphicsContext3D::getContextAttributes):
        (WebKit::MockWebGraphicsContext3D::getError):
        (WebKit::MockWebGraphicsContext3D::getFloatv):
        (WebKit::MockWebGraphicsContext3D::getFramebufferAttachmentParameteriv):
        (WebKit::MockWebGraphicsContext3D::getIntegerv):
        (WebKit::MockWebGraphicsContext3D::getProgramiv):
        (WebKit::MockWebGraphicsContext3D::getProgramInfoLog):
        (WebKit::MockWebGraphicsContext3D::getRenderbufferParameteriv):
        (WebKit::MockWebGraphicsContext3D::getShaderiv):
        (WebKit::MockWebGraphicsContext3D::getShaderInfoLog):
        (WebKit::MockWebGraphicsContext3D::getShaderSource):
        (WebKit::MockWebGraphicsContext3D::getString):
        (WebKit::MockWebGraphicsContext3D::getTexParameterfv):
        (WebKit::MockWebGraphicsContext3D::getTexParameteriv):
        (WebKit::MockWebGraphicsContext3D::getUniformfv):
        (WebKit::MockWebGraphicsContext3D::getUniformiv):
        (WebKit::MockWebGraphicsContext3D::getUniformLocation):
        (WebKit::MockWebGraphicsContext3D::getVertexAttribfv):
        (WebKit::MockWebGraphicsContext3D::getVertexAttribiv):
        (WebKit::MockWebGraphicsContext3D::getVertexAttribOffset):
        (WebKit::MockWebGraphicsContext3D::hint):
        (WebKit::MockWebGraphicsContext3D::isBuffer):
        (WebKit::MockWebGraphicsContext3D::isEnabled):
        (WebKit::MockWebGraphicsContext3D::isFramebuffer):
        (WebKit::MockWebGraphicsContext3D::isProgram):
        (WebKit::MockWebGraphicsContext3D::isRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::isShader):
        (WebKit::MockWebGraphicsContext3D::isTexture):
        (WebKit::MockWebGraphicsContext3D::lineWidth):
        (WebKit::MockWebGraphicsContext3D::linkProgram):
        (WebKit::MockWebGraphicsContext3D::pixelStorei):
        (WebKit::MockWebGraphicsContext3D::polygonOffset):
        (WebKit::MockWebGraphicsContext3D::readPixels):
        (WebKit::MockWebGraphicsContext3D::releaseShaderCompiler):
        (WebKit::MockWebGraphicsContext3D::renderbufferStorage):
        (WebKit::MockWebGraphicsContext3D::sampleCoverage):
        (WebKit::MockWebGraphicsContext3D::scissor):
        (WebKit::MockWebGraphicsContext3D::shaderSource):
        (WebKit::MockWebGraphicsContext3D::stencilFunc):
        (WebKit::MockWebGraphicsContext3D::stencilFuncSeparate):
        (WebKit::MockWebGraphicsContext3D::stencilMask):
        (WebKit::MockWebGraphicsContext3D::stencilMaskSeparate):
        (WebKit::MockWebGraphicsContext3D::stencilOp):
        (WebKit::MockWebGraphicsContext3D::stencilOpSeparate):
        (WebKit::MockWebGraphicsContext3D::texImage2D):
        (WebKit::MockWebGraphicsContext3D::texParameterf):
        (WebKit::MockWebGraphicsContext3D::texParameteri):
        (WebKit::MockWebGraphicsContext3D::texSubImage2D):
        (WebKit::MockWebGraphicsContext3D::uniform1f):
        (WebKit::MockWebGraphicsContext3D::uniform1fv):
        (WebKit::MockWebGraphicsContext3D::uniform1i):
        (WebKit::MockWebGraphicsContext3D::uniform1iv):
        (WebKit::MockWebGraphicsContext3D::uniform2f):
        (WebKit::MockWebGraphicsContext3D::uniform2fv):
        (WebKit::MockWebGraphicsContext3D::uniform2i):
        (WebKit::MockWebGraphicsContext3D::uniform2iv):
        (WebKit::MockWebGraphicsContext3D::uniform3f):
        (WebKit::MockWebGraphicsContext3D::uniform3fv):
        (WebKit::MockWebGraphicsContext3D::uniform3i):
        (WebKit::MockWebGraphicsContext3D::uniform3iv):
        (WebKit::MockWebGraphicsContext3D::uniform4f):
        (WebKit::MockWebGraphicsContext3D::uniform4fv):
        (WebKit::MockWebGraphicsContext3D::uniform4i):
        (WebKit::MockWebGraphicsContext3D::uniform4iv):
        (WebKit::MockWebGraphicsContext3D::uniformMatrix2fv):
        (WebKit::MockWebGraphicsContext3D::uniformMatrix3fv):
        (WebKit::MockWebGraphicsContext3D::uniformMatrix4fv):
        (WebKit::MockWebGraphicsContext3D::useProgram):
        (WebKit::MockWebGraphicsContext3D::validateProgram):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib1f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib1fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib2f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib2fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib3f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib3fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib4f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib4fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttribPointer):
        (WebKit::MockWebGraphicsContext3D::viewport):
        (WebKit::MockWebGraphicsContext3D::createBuffer):
        (WebKit::MockWebGraphicsContext3D::createFramebuffer):
        (WebKit::MockWebGraphicsContext3D::createProgram):
        (WebKit::MockWebGraphicsContext3D::createRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::createShader):
        (WebKit::MockWebGraphicsContext3D::createTexture):
        (WebKit::MockWebGraphicsContext3D::deleteBuffer):
        (WebKit::MockWebGraphicsContext3D::deleteFramebuffer):
        (WebKit::MockWebGraphicsContext3D::deleteProgram):
        (WebKit::MockWebGraphicsContext3D::deleteRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::deleteShader):
        (WebKit::MockWebGraphicsContext3D::deleteTexture):
        (WebKit::MockWebGraphicsContext3D::texStorage2DEXT):
        * tests/WebGLLayerChromiumTest.cpp:
        (WebKit::CompositorMockWebGraphicsContext3D::create):
        (WebKit::CompositorMockWebGraphicsContext3D::makeContextCurrent):
        (WebKit::CompositorMockWebGraphicsContext3D::createProgram):
        (WebKit::CompositorMockWebGraphicsContext3D::createShader):
        (WebKit::CompositorMockWebGraphicsContext3D::getShaderiv):
        (WebKit::CompositorMockWebGraphicsContext3D::getProgramiv):
        (WebKit::CompositorMockWebGraphicsContext3D::getContextAttributes):
        (WebKit::CompositorMockWebGraphicsContext3D::CompositorMockWebGraphicsContext3D):
        (WebKit::createGraphicsContext):
        (WebKit::TEST):
        * tests/WebLayerTest.cpp:
        (testing::WebLayerTest::WebLayerTest):
        (testing::TEST_F):

2011-12-17  Kenichi Ishibashi  <bashi@chromium.org>

        [Chromium] Implement PluginViewBase::getFormValue
        https://bugs.webkit.org/show_bug.cgi?id=64434

        Reviewed by Darin Fisher.

        This patch was landed as r102873, but reverted because of Chromium Mac build failure.
        The fix was landed as Chromium r114920. The patch should be safe to land.

        No new tests. No behavior change at this time. We should add a test for PPAPI after chromium supports the feature.

        * public/WebPlugin.h: Added getFormValue().
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::getFormValue): Added.
        * src/WebPluginContainerImpl.h: Added getFormValue().

2011-12-16  James Robinson  <jamesr@chromium.org>

        [chromium] CCLayerDelegate and WebLayerClient do not need notifySyncRequired
        https://bugs.webkit.org/show_bug.cgi?id=74376

        Reviewed by Kenneth Russell.

        WebLayerClient::notifyNeedsComposite() is an odd interface for the same reason that
        CCLayerDelegate::notifySyncRequired() is - all scheduling decisions should route through the WebLayerTreeView,
        not individual layers. In practice, all implementations of WebLayerClient::notifySyncRequired() do the exact
        same thing as WebLayerTreeView::scheduleComposite(). This removes that callback, making WebLayerClient an empty
        interface, and routes all calls that would go to that interface to WebLayerTreeView::scheduleComposite().

        Once downstream implementations of WebLayerClient are removed, WebLayerClient.h and the constructors associated
        with it can be deleted.

        The bulk of the changes here are to the test harness. Many tests that were designed around notifySyncRequired()
        are rewritten to check for CCLayerTreeHost::setNeedsCommit() or WebLayerTreeView::scheduleComposite() instead.
        In a few instances, this required changing the setup logic around somewhat so that the layers being manipulated
        were in a tree that initialized without errors.

        * WebKit.gypi:
        * public/platform/WebContentLayer.h:
        * public/platform/WebExternalTextureLayer.h:
        * public/platform/WebLayer.h:
        * public/platform/WebLayerClient.h:
        * src/WebContentLayer.cpp:
        (WebKit::WebContentLayer::create):
        * src/WebContentLayerImpl.cpp:
        (WebKit::WebContentLayerImpl::create):
        (WebKit::WebContentLayerImpl::WebContentLayerImpl):
        * src/WebContentLayerImpl.h:
        * src/WebExternalTextureLayer.cpp:
        (WebKit::WebExternalTextureLayer::create):
        * src/WebExternalTextureLayerImpl.cpp:
        (WebKit::WebExternalTextureLayerImpl::create):
        (WebKit::WebExternalTextureLayerImpl::WebExternalTextureLayerImpl):
        * src/WebExternalTextureLayerImpl.h:
        * src/WebLayer.cpp:
        (WebKit::WebLayer::create):
        * src/WebLayerImpl.cpp:
        (WebKit::WebLayerImpl::create):
        (WebKit::WebLayerImpl::WebLayerImpl):
        * src/WebLayerImpl.h:
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::create):
        (WebKit::WebLayerTreeViewImpl::WebLayerTreeViewImpl):
        * src/WebLayerTreeViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHost::create):
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF::MockLayerTreeHostClient::createLayerTreeHostContext3D):
        (WTF::CCLayerTreeHostTestScrollSimple::animateAndLayout):
        * tests/CompositorMockGraphicsContext3D.h: Added.
        (WebCore::createCompositorMockGraphicsContext3D):
        * tests/CompositorMockWebGraphicsContext3D.h: Added.
        (WebKit::CompositorMockWebGraphicsContext3D::create):
        (WebKit::CompositorMockWebGraphicsContext3D::makeContextCurrent):
        (WebKit::CompositorMockWebGraphicsContext3D::createProgram):
        (WebKit::CompositorMockWebGraphicsContext3D::createShader):
        (WebKit::CompositorMockWebGraphicsContext3D::getShaderiv):
        (WebKit::CompositorMockWebGraphicsContext3D::getProgramiv):
        (WebKit::CompositorMockWebGraphicsContext3D::CompositorMockWebGraphicsContext3D):
        * tests/LayerChromiumTest.cpp:
        * tests/MockWebGraphicsContext3D.h:
        (WebKit::MockWebGraphicsContext3D::getContextAttributes):
        * tests/WebGLLayerChromiumTest.cpp:
        (WebKit::TEST):
        * tests/WebLayerTest.cpp:
        (testing::MockWebLayerTreeViewClient::animateAndLayout):
        (testing::MockWebLayerTreeViewClient::applyScrollAndScale):
        (testing::MockWebLayerTreeViewClient::createContext3D):
        (testing::MockWebLayerTreeViewClient::didRebindGraphicsContext):
        (testing::WebLayerTest::SetUp):
        (testing::WebLayerTest::TearDown):
        (testing::TEST_F):

2011-12-16  Eric Penner  <epenner@google.com>

        [chromium] Need to prepaint tiles in TiledLayerChromium
        https://bugs.webkit.org/show_bug.cgi?id=72686

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::ContentLayerChromiumWithUpdateTracking::idlePaintContentsCount):
        (WTF::ContentLayerChromiumWithUpdateTracking::resetPaintContentsCount):
        (WTF::ContentLayerChromiumWithUpdateTracking::idlePaintContentsIfDirty):
        (WTF::ContentLayerChromiumWithUpdateTracking::ContentLayerChromiumWithUpdateTracking):
        (WTF::CCLayerTreeHostTestOpacityChange::afterTest):
        * tests/TiledLayerChromiumTest.cpp:
        (WTF::FakeTiledLayerChromium::prepareToUpdateIdle):
        (WTF::FakeTiledLayerChromium::needsIdlePaint):
        (WTF::TEST):

2011-12-16  James Robinson  <jamesr@chromium.org>

        [chromium] Remove WebCString's dependency on WebCore
        https://bugs.webkit.org/show_bug.cgi?id=74761

        Reviewed by Darin Fisher.

        Remove WebCString::fromUTF16(), which are never called, and implement WebCString::utf16() using WTF instead of
        WebCore/platform/text/TextEncoding.

        * public/platform/WebCString.h:
        * src/WebCString.cpp:
        (WebKit::WebCString::utf16):

2011-12-16  Ryosuke Niwa  <rniwa@webkit.org>

        Rename registerCommandFor(Undo|Redo) to register(Undo|Redo)Step
        https://bugs.webkit.org/show_bug.cgi?id=74748

        Reviewed by Eric Seidel.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::registerUndoStep):
        (WebKit::EditorClientImpl::registerRedoStep):
        * src/EditorClientImpl.h:

2011-12-16  Sam Weinig  <sam@webkit.org>

        Give PlatformEvents a base class
        https://bugs.webkit.org/show_bug.cgi?id=74685

        Reviewed by Anders Carlsson.

        Add a base class for PlatformMouseEvent, PlatformKeyboardEvent, PlatformWheelEvent
        and PlatformGestureEvent and move Type enumeration and modifiers down to it.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::interpretKeyEvent):
        (WebKit::EditorClientImpl::handleEditingKeyboardEvent):
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::keyboardShortcut):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformMouseEventBuilder::PlatformMouseEventBuilder):
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder):
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        (WebKit::toPlatformKeyboardEventType):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::dragSourceEndedAt):
        * tests/InnerGestureRecognizerTest.cpp:
        (SimulateAndTestFirstClick):
        (TEST_F):
        * tests/KeyboardTest.cpp:
        (WebKit::KeyboardTest::interpretKeyEvent):
        (WebKit::KeyboardTest::interpretOSModifierKeyPress):
        (WebKit::KeyboardTest::interpretCtrlKeyPress):
        (WebKit::KeyboardTest::interpretTab):
        (WebKit::KeyboardTest::interpretNewLine):
        (WebKit::TEST_F):
        * tests/PopupMenuTest.cpp:
        (WebKit::SelectPopupMenuTest::simulateLeftMouseDownEvent):
        (WebKit::SelectPopupMenuTest::simulateLeftMouseUpEvent):
        (WebKit::TEST_F):

2011-12-16  Ryosuke Niwa  <rniwa@webkit.org>

        Only EditCommandComposition should implement unapply and reapply
        https://bugs.webkit.org/show_bug.cgi?id=74490

        Reviewed by Eric Seidel.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::registerCommandForUndo):
        (WebKit::EditorClientImpl::registerCommandForRedo):
        (WebKit::EditorClientImpl::undo):
        (WebKit::EditorClientImpl::redo):
        * src/EditorClientImpl.h:

2011-12-16  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Implement IDBObjectStore.count() and IDBIndex.count()
        https://bugs.webkit.org/show_bug.cgi?id=73686

        Reviewed by Tony Chang.

        Plumbing to support the new methods in Chromium.

        * src/IDBIndexBackendProxy.cpp:
        (WebKit::IDBIndexBackendProxy::count):
        * src/IDBIndexBackendProxy.h:
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::count):
        * src/IDBObjectStoreBackendProxy.h:
        * src/WebIDBIndexImpl.cpp:
        (WebKit::WebIDBIndexImpl::count):
        * src/WebIDBIndexImpl.h:
        * src/WebIDBObjectStoreImpl.cpp:
        (WebKit::WebIDBObjectStoreImpl::count):
        * src/WebIDBObjectStoreImpl.h:

2011-12-16  Adrienne Walker  <enne@google.com>

        [chromium] Disable compositor CCLayerTreeHostTestsetNeedsCommit1 test
        https://bugs.webkit.org/show_bug.cgi?id=74623

        Unreviewed gardening.

        This has been failing (timeout) intermittently on Mac.

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::TEST_F):

2011-12-16  Dana Jansens  <danakj@chromium.org>

        [chromium] Add setOpaque to WebMediaPlayerClient interface, don't set VideoLayer's opaque when grabbing current frame.
        https://bugs.webkit.org/show_bug.cgi?id=74722

        Reviewed by Darin Fisher.

        * public/WebMediaPlayerClient.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::readyStateChanged):
        (WebKit::WebMediaPlayerClientImpl::setOpaque):
        (WebKit::WebMediaPlayerClientImpl::getCurrentFrame):
        (WebKit::WebMediaPlayerClientImpl::WebMediaPlayerClientImpl):
        * src/WebMediaPlayerClientImpl.h:

2011-12-15  Stephen White  <senorblanco@chromium.org>

        Enable CSS_FILTERS in Chromium.
        https://bugs.webkit.org/show_bug.cgi?id=74334

        Reviewed by Chris Marrin.

        * features.gypi:

2011-12-15  Yongjun Zhang  <yongjun_zhang@apple.com>

        PODIntervalTree takes 1.7MB memory on www.nytimes.com.
        https://bugs.webkit.org/show_bug.cgi?id=73712

        Reviewed by Kenneth Russell.

        Change the test code in chromium port since PODRedBlackTree now takes PODFreeListArena<T>
        in its constructor.

        * tests/PODRedBlackTreeTest.cpp:
        (WebCore::TEST):

2011-12-15  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Clean up WebIDBObjectStore createIndex temp code
        https://bugs.webkit.org/show_bug.cgi?id=74205

        Reviewed by Darin Fisher.

        Remove a method and an implementation that only needed for
        older Chromium revisions.

        * public/WebIDBObjectStore.h:
        (WebKit::WebIDBObjectStore::createIndex):

2011-12-15  Tony Chang  <tony@chromium.org>

        Chromium Windows (Tests) is failing to build
        https://bugs.webkit.org/show_bug.cgi?id=74320

        Reviewed by Kenneth Russell.

        Roll chromium deps to r114686 to pull in a change to how generated
        headers include files from third_party/WebKit.  This should make the
        file path shorter, reducing the chance of hitting the 260 char path
        limit on Windows.

        * DEPS: roll to r114686

2011-12-15  James Robinson  <jamesr@chromium.org>

        [chromium] Set the CCLayerTreeHost pointer on LayerChromium instances eagerly
        https://bugs.webkit.org/show_bug.cgi?id=74477

        Reviewed by Kenneth Russell.

        Add some new tests for LayerChromium::m_layerTreeHost behavior.

        * tests/CCLayerTreeHostTest.cpp:
        (::MockLayerTreeHost::create):
        (::MockLayerTreeHost::MockLayerTreeHost):
        (::CCLayerTreeHostTestShortlived1::beginTest):
        (::CCLayerTreeHostTestShortlived2::beginTest):
        (::CCLayerTreeHostTestShortlived3::beginTest):
        * tests/LayerChromiumTest.cpp:

2011-12-15  Nat Duca  <nduca@chromium.org>

        [chromium] Add forUseOnAnotherThread to WebGraphicsContext3D::Attributes
        https://bugs.webkit.org/show_bug.cgi?id=74557

        Reviewed by Kenneth Russell.

        * public/platform/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::Attributes::Attributes):
        * src/GraphicsContext3DChromium.cpp:

2011-12-15  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Fixing #include statements and removing forwarding header file
        https://bugs.webkit.org/show_bug.cgi?id=74598

        Reviewed by Darin Fisher.

        WebMediaStreamSource.h had some issues when accessed from chromium. Also cleaned up the forwarding header.

        * WebKit.gyp:
        * public/WebMediaStreamSource.h: Removed.
        * public/platform/WebMediaStreamSource.h:

2011-12-15  Stephen White  <senorblanco@chromium.org>

        Unreviewed, rolling out r102956.
        http://trac.webkit.org/changeset/102956
        https://bugs.webkit.org/show_bug.cgi?id=74334

        Broke Chromium/Win build.

        * features.gypi:

2011-12-15  Kenneth Russell  <kbr@google.com>

        Unreviewed. Disable flaky tests. Built and tested on Linux.
        https://bugs.webkit.org/show_bug.cgi?id=74623

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::TEST_F):

2011-12-15  Stephen White  <senorblanco@chromium.org>

        Enable CSS_FILTERS in Chromium.
        https://bugs.webkit.org/show_bug.cgi?id=74334

        Reviewed by Kenneth Russell.

        * features.gypi:

2011-12-15  Martin Kosiba  <mkosiba@google.com>

        Fix find on web pages with -webkit-user-select: none for Chromium
        https://bugs.webkit.org/show_bug.cgi?id=72281

        Reviewed by Ryosuke Niwa.

        This will make it possible to search for text that has
        selection disabled (via the webkit-user-select attribute).

        WebFrameImpl::find will use findStringAndScrollToVisible, which is
        similar to findString except that it uses Range directly rather
        than passing the find result in the active selection.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::find):

2011-12-15  Kenneth Russell  <kbr@google.com>

        [chromium] Add DRT support for WebKitPageCacheSupportsPluginsPreferenceKey
        https://bugs.webkit.org/show_bug.cgi?id=74581

        Reviewed by Darin Fisher.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setPageCacheSupportsPlugins):
        * src/WebSettingsImpl.h:

2011-12-15  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: [Chromium] add support to inspector test suite to fetch test execution results from console
        https://bugs.webkit.org/show_bug.cgi?id=74208

        Reviewed by Yury Semikhatsky.

        This adds waitForTestResultsInConsole, a test suite method that monitors console for a message containing
        either PASS or FAIL and sets result accordingly. This is used by tests running in the extension context to
        communicate test results to the test driver (see devtools_sanity_unittest.cc for an example).

        * src/js/Tests.js:
        (.TestSuite.prototype.testWaitForResultsInConsole.onConsoleMessage):
        (.TestSuite.prototype.testWaitForResultsInConsole):

2011-12-15  Peter Beverloo  <peter@chromium.org>

        [Chromium] Enable TestNetscapePlugIn to link for Android
        https://bugs.webkit.org/show_bug.cgi?id=74597

        Reviewed by Tony Gentilcore.

        The -nostdlib linker flag is being passed to all targets being build
        for Android, which conflicts with the shared library the
        TestNetscapePlugIn target created. Explicitly exclude the flag.

        * WebKit.gyp:

2011-12-14  David Levin  <levin@chromium.org>

        [chromium] DatabaseObserver needs threadsafe fixes and other clean-up.
        https://bugs.webkit.org/show_bug.cgi?id=74558

        Reviewed by Dmitry Titov.

        The important part of this fix is the removal of AllowCrossThreadAccess so
        that ref counting happens appropriately.

        Minor clean up throughout: Removed unnecessary WTF prefix in many
        of these places and unnecessary String().

        * src/DatabaseObserver.cpp:
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::signalCompleted): Get rid of
        AllowCrossThreadAccess so that "this" get ref counted and remove mode from being
        a member variable since a String in a ThreadSafeRefCounted class is bad.
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge): Ditto.
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask): Pass through mode
        and minor code cleaning to do only one call to signalCompleted.
        (WebKit::allowDatabaseForWorker): Just removed unnecessary String()'s.

2011-12-14  Tony Chang  <tony@chromium.org>

        [chromium] Remove redundant third_party entries from chromium DEPS
        https://bugs.webkit.org/show_bug.cgi?id=74472

        Reviewed by Kenneth Russell.

        Removed redundant DEPS entries for third_party subdirectories
        coming from chromium_svn, which were causing intermittent gclient
        failures on the bots.

        * DEPS:

2011-12-14  Scott Graham  <scottmg@chromium.org>

        Increase maximum number of gamepad buttons in Chromium port interface
        https://bugs.webkit.org/show_bug.cgi?id=74559

        Reviewed by Darin Fisher.

        * public/platform/WebGamepad.h:

2011-12-14  Kenichi Ishibashi  <bashi@chromium.org>

        Unreviewed, rolling out r102873.
        http://trac.webkit.org/changeset/102873
        https://bugs.webkit.org/show_bug.cgi?id=64434

        Break the build

        * public/WebPlugin.h:
        * src/WebPluginContainerImpl.cpp:
        * src/WebPluginContainerImpl.h:

2011-12-14  Nat Duca  <nduca@chromium.org>

        [chromium] Add inhibitDraw to CCScheduler and drop root impl to prevent background flash on tab restore
        https://bugs.webkit.org/show_bug.cgi?id=74351

        Reviewed by James Robinson.

        * tests/CCSchedulerStateMachineTest.cpp:
        (WebCore::StateMachine::inhibitDraw):
        (WebCore::TEST):
        * tests/CCSchedulerTest.cpp:
        (WebKitTests::FakeCCSchedulerClient::setInhibitDraw):
        (WebKitTests::FakeCCSchedulerClient::inhibitDraw):
        (WebKitTests::SchedulerClientThatSetNeedsDrawInsideDraw::inhibitDraw):
        (WebKitTests::SchedulerClientThatSetNeedsCommitInsideDraw::inhibitDraw):

2011-12-14  Jing Zhao  <jingzhao@chromium.org>

        Opening two popup menus by dispatchEvent() makes problems.
        https://bugs.webkit.org/show_bug.cgi?id=73304

        Reviewed by Kent Tamura.

        By using element.dispatchEvent(), a user written script can open two
        popup menus, which causes the assertion in WebViewImpl::popupOpened()
        fail.

        ChromeClientImpl::hasOpenedPopup() is called by Chrome::hasOpenedPopup()
        in RenderMenuList::showPopup(), to check if there is an opened popup
        menu before opening a new popup menu.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::hasOpenedPopup): Checks the popup in WebViewImpl.
        * src/ChromeClientImpl.h: Overrides hasOpenedPopup().

2011-12-14  Kenichi Ishibashi  <bashi@chromium.org>

        [Chromium] Implement PluginViewBase::getFormValue
        https://bugs.webkit.org/show_bug.cgi?id=64434

        Adds getFormValue() to WebPluginContainerImpl as an implementation of PluginViewBase::getFormValue().

        Reviewed by Darin Fisher.

        No new tests. No behavior change at this time. We should add a test for PPAPI after chromium supports the feature.

        * public/WebPlugin.h: Added getFormValue().
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::getFormValue): Added.
        * src/WebPluginContainerImpl.h: Added getFormValue().

2011-12-14  Sami Kyostila  <skyostil@chromium.org>

        [chromium] Fix CCLayerTreeHostTest shutdown race
        https://bugs.webkit.org/show_bug.cgi?id=73926

        This patch fixes a shutdown race condition in CCLayerTreeHostTest which
        may happen if endTest() is called from within the drawLayersOnCCThread()
        test hook. The sequence of events leading to the problem is:

          1. CCThreadProxy::scheduledActionDrawAndSwap() is called when a frame
             begins.
          2. CCThreadProxy calls drawLayersOnCCThread(), which in turn calls
             endTest().
          3. Seeing it's not running in the main thread, endTest() posts a task
             calling itself in the main thread.
          4. CCThreadProxy posts a task for calling didCommitAndDrawFrame() in
             the main thread.

        The race is between the task posted in step #3 and the CC thread running
        in scheduledActionDrawAndSwap(). If the endTask() task is scheduled
        before the CC thread reaches step #4, it drains the pending message
        queue (CCLayerTreeHostTest.cpp:369) before the task in step #4 is
        posted.

        The result is that the didCommitAndDrawFrame() task is executed after
        the test fixture has been torn down, causing a read of unallocated
        memory in CCScopedThreadProxy::runTaskIfNotShutdown (as m_targetThread
        is no longer valid).

        The fix is check m_shutdown before touching m_targetThread in
        CCScopedThreadProxy. That is, events will still be queued after shutdown
        but they will not be processed.

        Reviewed by James Robinson.

2011-12-14  Jonathan Backer  <backer@chromium.org>

        [chromium] Plumb through flag for enabling partial swap
        https://bugs.webkit.org/show_bug.cgi?id=74513

        Reviewed by James Robinson.

        * public/WebSettings.h:
        * public/platform/WebLayerTreeView.h:
        (WebKit::WebLayerTreeView::Settings::Settings):
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setPartialSwapEnabled):
        * src/WebSettingsImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-12-14  Peter Beverloo  <peter@chromium.org>

        [Chromium] Roll chromium DEPS (r113807 -> r114356)
        https://bugs.webkit.org/show_bug.cgi?id=74496

        Reviewed by Tony Gentilcore.

        Roll deps to r114356 and update the location of sfntly to
        pick up the change at Chromium.

        * DEPS:

2011-12-13  Dirk Pranke  <dpranke@chromium.org>

        chromium port - remove nacl hack in DEPS/gyp_webkit
        https://bugs.webkit.org/show_bug.cgi?id=74150

        Reviewed by Tony Chang.

        This change reverts the change added in r101011; it is
        no longer necessary to pull in anything from Native Client for
        the chromium port to build.

        * DEPS:
        * gyp_webkit:

2011-12-13  Dave Michael  <dmichael@chromium.org>

        Export WebArrayBuffer::byteLength
        https://bugs.webkit.org/show_bug.cgi?id=74438

        Reviewed by Darin Fisher.

        * public/WebArrayBuffer.h:

2011-12-13  Kenneth Russell  <kbr@google.com>

        Unreviewed, rolling out r102693.
        http://trac.webkit.org/changeset/102693
        https://bugs.webkit.org/show_bug.cgi?id=74334

        Broke Chromium Windows DRT build

        * features.gypi:

2011-12-13  Peter Beverloo  <peter@chromium.org>

        [Chromium] Pull in FreeType and decrease check-out complexity for Android
        https://bugs.webkit.org/show_bug.cgi?id=74401

        Pull in FreeType in the third_party/ directory from a separate git
        repository at Chromium. This introduces a new prerequisite for checking
        out the Chromium WebKit port for Android, namely that git needs to be
        available on the system. gclient can handle this just fine.

        Reviewed by Adam Barth.

        * DEPS:

2011-12-13  Alok Priyadarshi  <alokp@chromium.org>

        [chromium] compositing/masks layout tests fail with accelerated drawing
        https://bugs.webkit.org/show_bug.cgi?id=72760

        Reviewed by Stephen White.

        * tests/TiledLayerChromiumTest.cpp:
        (WTF::FakeLayerTextureUpdater::createTexture):

2011-12-13  Stephen White  <senorblanco@chromium.org>

        Enable CSS_FILTERS in Chromium.
        https://bugs.webkit.org/show_bug.cgi?id=74334

        Reviewed by Kenneth Russell.

        * features.gypi:

2011-12-12  Ryosuke Niwa  <rniwa@webkit.org>

        WebKit code shouldn't be calling applyCommand directly
        https://bugs.webkit.org/show_bug.cgi?id=74337

        Reviewed by Darin Adler.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::replaceSelection):

2011-12-12  David Grogan  <dgrogan@chromium.org>

        Fix compilation error when !ENABLE(WORKERS)
        https://bugs.webkit.org/show_bug.cgi?id=74029

        Reviewed by Yury Semikhatsky.

        * features.gypi:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::openFromWorker):
        * src/PlatformSupport.cpp:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::disconnectEventAsText):
        * src/WebWorkerRunLoop.cpp:

2011-12-12  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Remove assumption that empty surface is always at end of list
        https://bugs.webkit.org/show_bug.cgi?id=74037

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebCore::TEST):

2011-12-09  Daniel Cheng  <dcheng@chromium.org>

        [chromium] Remove BufferDrag from WebClipboard::Buffer enum.
        https://bugs.webkit.org/show_bug.cgi?id=74227

        Reviewed by Tony Chang.

        This enum value was intended for asynchronous data retrieval during drop operations; since
        that was never implemented, I'm removing this enum value.

        * public/platform/WebClipboard.h:
        * src/AssertMatchingEnums.cpp:

2011-12-12  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Moving WebMediaStreamSource.h
        https://bugs.webkit.org/show_bug.cgi?id=74081

        Moving WebMediaStreamSource.h to public/platform.
        Keeping a stub in public as to not affect chromium right now.

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebMediaStreamSource.h:
        * public/platform/WebMediaStreamSource.h: Copied from Source/WebKit/chromium/public/WebMediaStreamSource.h.
        (WebKit::WebMediaStreamSource::WebMediaStreamSource):
        (WebKit::WebMediaStreamSource::~WebMediaStreamSource):
        (WebKit::WebMediaStreamSource::isNull):
        * src/AssertMatchingEnums.cpp:
        * src/UserMediaClientImpl.cpp:
        * src/WebMediaStreamDescriptor.cpp:
        * src/WebMediaStreamRegistry.cpp:
        * src/WebMediaStreamSource.cpp:
        * src/WebUserMediaRequest.cpp:

2011-12-09  James Robinson  <jamesr@chromium.org>

        [chromium] Remove forwarding headers for WebLayer APIs
        https://bugs.webkit.org/show_bug.cgi?id=73729

        Reviewed by Adam Barth.

        These are no longer necessary.

        * WebKit.gyp:
        * public/WebContentLayer.h: Removed.
        * public/WebContentLayerClient.h: Removed.
        * public/WebExternalTextureLayer.h: Removed.
        * public/WebLayer.h: Removed.
        * public/WebLayerClient.h: Removed.
        * public/WebLayerTreeView.h: Removed.
        * public/WebLayerTreeViewClient.h: Removed.

2011-12-09  Karl Koscher  <supersat@chromium.org>

        [chromium] add accessors to WebDOMMessageEvent
        https://bugs.webkit.org/show_bug.cgi?id=73346

        Reviewed by Darin Fisher.

        * public/WebDOMMessageEvent.h:
        * src/WebDOMMessageEvent.cpp:
        (WebKit::WebDOMMessageEvent::data):
        (WebKit::WebDOMMessageEvent::origin):

2011-12-09  Karl Koscher  <supersat@chromium.org>

        [chromium] add event methods to WebFrame
        https://bugs.webkit.org/show_bug.cgi?id=73259

        Reviewed by Darin Fisher.

        * public/WebDOMEventListener.h: Use EventTarget instead of Node
        * public/WebFrame.h: Add event methods
        * src/WebDOMEventListener.cpp: Use EventTarget instead of Node
        (WebKit::WebDOMEventListener::createEventListenerWrapper):
        (WebKit::WebDOMEventListener::getEventListenerWrapper):
        * src/WebDOMEventListenerPrivate.cpp: Use EventTarget instead of Node
        (WebKit::WebDOMEventListenerPrivate::createEventListenerWrapper):
        (WebKit::WebDOMEventListenerPrivate::getEventListenerWrapper):
        * src/WebDOMEventListenerPrivate.h: Use EventTarget instead of Node
        (WebKit::WebDOMEventListenerPrivate::ListenerInfo::ListenerInfo):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addEventListener): register a listener on a WebFrame
        (WebKit::WebFrameImpl::removeEventListener): remove a listener on a WebFrame
        (WebKit::WebFrameImpl::dispatchEvent): dispatch an event to a WebFrame
        * src/WebFrameImpl.h: Add event methods

2011-12-09  Dirk Pranke  <dpranke@chromium.org>

        chromium win build: revert build_webkit_exes_from_webkit_gyp change
        https://bugs.webkit.org/show_bug.cgi?id=74225

        Reviewed by Tony Chang.

        This change sets build_webkit_exes_from_webkit_gyp back to 1;
        the "All.gyp" solution doesn't work on windows.

        * gyp_webkit:

2011-12-09  Dirk Pranke  <dpranke@chromium.org>

        chromium: visual studio projects are busted when build_webkit_exes_from_webkit_gyp==0
        https://bugs.webkit.org/show_bug.cgi?id=74212

        Reviewed by Tony Chang.

        The change introduced in r102201 to split the executables out of
        WebKit.gyp apparently doesn't work right on Windows, since
        WebKit.gyp and Tools.gyp refer to dependent projects by
        different relative paths (it appears gyp doesn't normalize the
        paths). This change moves Tools.gyp to be in the same directory
        as WebKit.gyp (and All.gyp), which should fix this and
        conveniently will also solve the problem of how to add Tools.gyp
        to the chromium DEPS file.

        * All.gyp:
        * Tools.gyp: Renamed from ../../../Tools/Tools.gyp.

2011-12-09  Cary Clark  <caryclark@google.com>

        Chromium DEPS roll to pick up new use_skia=1 default on Chromium-Mac
        https://bugs.webkit.org/show_bug.cgi?id=74118

        Reviewed by Adam Barth.

        * DEPS:

2011-12-08  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Enable viewport metatag
        https://bugs.webkit.org/show_bug.cgi?id=73495

        Reviewed by Darin Fisher.

        Compute the appropriate fixed layout size, page, and device scale factors,
        based on the viewport meta tag parameters.

        See http://developer.android.com/guide/webapps/targeting.html for more information.


        * features.gypi:
        * public/WebView.h:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::layoutUpdated):
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):
        * src/ChromeClientImpl.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::isPageScaleFactorSet):
        (WebKit::WebViewImpl::setPageScaleFactor):
        (WebKit::WebViewImpl::observeNewNavigation):
        * src/WebViewImpl.h:

2011-12-08  Pierre Rossi  <pierre.rossi@gmail.com>

        Drop ENABLE_NO_LISTBOX_RENDERING, and make it a runtime decision.
        https://bugs.webkit.org/show_bug.cgi?id=73916

        Reviewed by Kent Tamura.

        * src/ExternalPopupMenu.cpp:
        (WebKit::ExternalPopupMenu::didAcceptIndices):
        (WebKit::ExternalPopupMenu::getPopupMenuInfo):

2011-12-08  David Reveman  <reveman@chromium.org>

        [Chromium] Add per-tile painting flag to DumpRenderTree and rename AcceleratedDrawing to AcceleratedPainting in chromium specific code.
        https://bugs.webkit.org/show_bug.cgi?id=74017

        Reviewed by James Robinson.

        Add WebSettings::setAcceleratedPaintingEnabled to public API.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setAcceleratedPaintingEnabled):
        (WebKit::WebSettingsImpl::setPerTilePaintingEnabled):
        * src/WebSettingsImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-12-08  James Robinson  <jamesr@chromium.org>

        [chromium] Move NonCompositedContentHost to WebKit
        https://bugs.webkit.org/show_bug.cgi?id=74047

        Reviewed by Kenneth Russell.

        Moves NonCompositedContentHost into WebKit/chromium/src. This class is a helper class designed to make it easier
        for WebViewImpl to interface with the compositor. The compositor proper should not depend on this class, and
        other clients of the compositor do not need this functionality.

        Follow-up patches will transition this code from using compositor-internal interfaces directly to using
        higher-level interfaces like the WebKit platform APIs. This patch simply does a file mv and updates namespaces
        to keep things simpler.

        Refactor only and covered by several unit tests.

        * WebKit.gyp:
        * src/NonCompositedContentHost.cpp: Renamed from Source/WebCore/platform/graphics/chromium/NonCompositedContentHost.cpp.
        (WebKit::NonCompositedContentHost::NonCompositedContentHost):
        (WebKit::NonCompositedContentHost::~NonCompositedContentHost):
        (WebKit::NonCompositedContentHost::setBackgroundColor):
        (WebKit::NonCompositedContentHost::setScrollLayer):
        (WebKit::NonCompositedContentHost::setViewport):
        (WebKit::NonCompositedContentHost::scrollLayer):
        (WebKit::NonCompositedContentHost::protectVisibleTileTextures):
        (WebKit::NonCompositedContentHost::invalidateRect):
        (WebKit::NonCompositedContentHost::notifyAnimationStarted):
        (WebKit::NonCompositedContentHost::notifySyncRequired):
        (WebKit::NonCompositedContentHost::paintContents):
        (WebKit::NonCompositedContentHost::showDebugBorders):
        (WebKit::NonCompositedContentHost::showRepaintCounter):
        * src/NonCompositedContentHost.h: Renamed from Source/WebCore/platform/graphics/chromium/NonCompositedContentHost.h.
        (WebKit::NonCompositedContentHost::create):
        (WebKit::NonCompositedContentHost::topLevelRootLayer):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::nonCompositedContentHost):
        * src/WebViewImpl.h:
        * tests/LayerChromiumTest.cpp:

2011-12-08  Sami Kyostila  <skyostil@google.com>

        [chromium] Layer contents scale change should trigger invalidation

        https://bugs.webkit.org/show_bug.cgi?id=74086

        When the contents scale of a layer is changed, the entire contents of
        the layer should be marked dirty.

        Reviewed by James Robinson.

        * tests/LayerChromiumTest.cpp:

2011-12-08  Dana Jansens  <danakj@chromium.org>

        [chromium] Set opaque() for VideoLayerChromium
        https://bugs.webkit.org/show_bug.cgi?id=73858

        Reviewed by James Robinson.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::isVideoFrameFormatOpaque):
        (WebKit::WebMediaPlayerClientImpl::getCurrentFrame):

2011-12-08  Elliot Poger  <epoger@google.com>

        Chromium DEPS roll 112974 -> 113603
        https://bugs.webkit.org/show_bug.cgi?id=74105

        Reviewed by Adam Barth.

        * DEPS:

2011-12-08  Tony Chang  <tony@chromium.org>

        [chromium] remove headers from WebKit.gyp that moved into WebKit/chromium/public/platform
        https://bugs.webkit.org/show_bug.cgi?id=74106

        Reviewed by Darin Fisher.

        * WebKit.gyp:

2011-12-08  Peter Beverloo  <peter@chromium.org>

        [Chromium] Exclude the four RenderTableCellDeathTest death tests for Android
        https://bugs.webkit.org/show_bug.cgi?id=73997

        The ASSERT_DEATH macro is not yet available in Google Test when
        building for Android, which causes compilation errors. This code
        will be removed once support lands in the GTest version Chromium
        uses. See https://bugs.webkit.org/show_bug.cgi?id=74089.

        Reviewed by Julien Chaffraix.

        * tests/RenderTableCellTest.cpp:

2011-12-08  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: WebKit API addition of IDBObjectStore.count() and IDBIndex.count()
        https://bugs.webkit.org/show_bug.cgi?id=73685

        Reviewed by Darin Fisher.

        Implementation to follow - this just extends the WebKit API.

        * public/WebIDBIndex.h:
        (WebKit::WebIDBIndex::count):
        * public/WebIDBObjectStore.h:
        (WebKit::WebIDBObjectStore::count):

2011-12-07  Alexandre Elias  <aelias@google.com>

        [chromium] Add page-scale animation support to Impl thread
        https://bugs.webkit.org/show_bug.cgi?id=72996

        Reviewed by James Robinson.

        This adds a new math helper class to compute the progress of the
        animation, and code in the CCLayerTreeHostImpl to apply the animation
        frame by frame.

        No new tests. (https://bugs.webkit.org/show_bug.cgi?id=71529 filed.)

        * public/WebCompositor.h:
        * public/WebInputEvent.h:
        (WebKit::WebPageScaleAnimationEvent::WebPageScaleAnimationEvent):
        * public/android/WebInputEventFactory.h:
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositorImpl::handlePageScaleAnimationEvent):
        * src/WebCompositorImpl.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/android/WebInputEventFactory.cpp:
        (WebKit::WebInputEventFactory::pageScaleAnimationEvent):

2011-12-07  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Plumb DPI info into PlatformScreen
        https://bugs.webkit.org/show_bug.cgi?id=70556

        Reviewed by Darin Fisher.
        
        Make DPI information accessible from WebKit through
        PlatformScreen. This is useful when making scaling 
        computations on various devices (e.g. Viewport meta tag).

        This patch adds DPI plumbing on Chromium Win/Mac/Linux
        platforms.

        * public/WebScreenInfo.h:
        (WebKit::WebScreenInfo::WebScreenInfo):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::screenHorizontalDPI):
        (WebCore::PlatformSupport::screenVerticalDPI):
        * src/mac/WebScreenInfoFactory.mm:
        (WebKit::WebScreenInfoFactory::screenInfo):
        * src/win/WebScreenInfoFactory.cpp:
        (WebKit::WebScreenInfoFactory::screenInfo):
        * src/x11/WebScreenInfoFactory.cpp:
        (WebKit::WebScreenInfoFactory::screenInfo):

2011-12-07  Alexandre Elias  <aelias@google.com>

        [chromium] Preserve original pageScale limits in WebViewImpl
        https://bugs.webkit.org/show_bug.cgi?id=72983

        Reviewed by Darin Fisher.

        Preserve the originally viewport-tag specified page scale limits, and
        compute the final ones in a new private method
        computePageScaleFactorLimits().  This is then called when contents
        size change (which can affect the minimum).

        Also clean up several minor bugs, namely clamping issues (reorder
        clampNegativeToZero to avoid negative scroll offsets, and force max to
        be greater than min), and incorrect behavior in the presence of
        "solid" scrollbars.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::contentsSizeChanged):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::clampPageScaleFactorToLimits):
        (WebKit::WebViewImpl::clampOffsetAtScale):
        (WebKit::WebViewImpl::setPageScaleFactorPreservingScrollOffset):
        (WebKit::WebViewImpl::setPageScaleFactor):
        (WebKit::WebViewImpl::setPageScaleFactorLimits):
        (WebKit::WebViewImpl::computePageScaleFactorLimits):
        (WebKit::WebViewImpl::didChangeContentsSize):
        * src/WebViewImpl.h:

2011-12-07  Chris Sharp  <csharp@chromium.org>
        
        Exposing boundsInScreenSpace in WebElement.
        https://bugs.webkit.org/show_bug.cgi?id=71579

        Exposing boundsInScreenSpace through a new function,
        boundsInViewportSpace, to assist in moving the Autofill UI out of
        WebKit in Chromium. Renamed the exposed function to provide a better
        meaning of what the function does in the Chromium code.
        More information can be found at:
        http://crbug.com/51644


        Reviewed by Darin Fisher.

        * public/WebElement.h:
        * src/WebElement.cpp:
        (WebKit::WebElement::boundsInViewportSpace):

2011-12-07  Adam Klein  <adamk@chromium.org>

        [MutationObservers] Enable in Chromium trunk
        https://bugs.webkit.org/show_bug.cgi?id=73851

        Reviewed by Ojan Vafai.

        Re-landing after fixing Chromium unit test crashes in r102171
        and inspector debugger crash in r102264.

        * features.gypi:

2011-12-07  Jonathan Backer  <backer@chromium.org>

        [chromium] Plumb damage from WebExternalTextureLayer and WebPluginContainer to CCDamageTracker
        https://bugs.webkit.org/show_bug.cgi?id=73485

        Reviewed by Darin Fisher.

        * public/platform/WebExternalTextureLayer.h:
        * src/WebExternalTextureLayer.cpp:
        (WebKit::WebExternalTextureLayer::invalidateRect):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::commitBackingTexture):

2011-12-06  Dirk Pranke  <dpranke@chromium.org>

        Fix typo in WebKit.gyp introduced in previous change.

        Unreviewed, build fix.

        * WebKit.gyp:

2011-12-06  Dirk Pranke  <dpranke@chromium.org>

        binaries in webkit.gyp should be split into a new file to break circular dependencies on webkit_support
        https://bugs.webkit.org/show_bug.cgi?id=73382

        Reviewed by Tony Chang.

        XCode (and hence GYP) can't handle circular dependencies between
        files (and projects). Accordingly, although the binaries in
        WebKit.gyp depend on webkit_support and webkit_support depends
        on webkit, we don't mention the latter dependency in the file.
        To fix this, this change moves the binaries like DRT into a new
        GYP file, and modifies gyp_webkit to build from that file
        instead of WebKit.gyp.

        * WebKit.gyp:
        * All.gyp:
        * WebKitUnitTests.gyp:
        * gyp_webkit:

2011-12-06  Adrienne Walker  <enne@google.com>

        [chromium] setNeedsCommit on non-composited host layers should trigger commit
        https://bugs.webkit.org/show_bug.cgi?id=73711

        Reviewed by James Robinson.

        Add some tests to make sure that modifying the noncomposited content
        host triggers commits.

        Properties that trigger setNeedsCommit should only do so when the
        property changes. Additionally, make more property changes properly
        trigger commits.

        * tests/LayerChromiumTest.cpp:

2011-12-06  David Reveman  <reveman@chromium.org>

        [Chromium] Implement tile-sized painting using SkPicture.
        https://bugs.webkit.org/show_bug.cgi?id=71869

        Reviewed by James Robinson.

        Add perTilePainting setting that is used by compositor to determine
        what texture uploader to use.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setPerTilePainting):
        * src/WebSettingsImpl.h:
        (WebKit::WebSettingsImpl::perTilePainting):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-12-06  Dana Jansens  <danakj@chromium.org>

        [chromium] Set opaque flag for ImageLayerChromium
        https://bugs.webkit.org/show_bug.cgi?id=72964

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/DragImageTest.cpp:
        (WebCore::TestImage::TestImage):
        (WebCore::TestImage::nativeImageForCurrentFrame):
        * tests/ImageLayerChromiumTest.cpp: Added.
        (WebCore::MockGraphicsLayerClient::notifyAnimationStarted):
        (WebCore::MockGraphicsLayerClient::notifySyncRequired):
        (WebCore::MockGraphicsLayerClient::paintContents):
        (WebCore::MockGraphicsLayerClient::showDebugBorders):
        (WebCore::MockGraphicsLayerClient::showRepaintCounter):
        (WebCore::TestImage::create):
        (WebCore::TestImage::TestImage):
        (WebCore::TestImage::isBitmapImage):
        (WebCore::TestImage::currentFrameHasAlpha):
        (WebCore::TestImage::size):
        (WebCore::TestImage::nativeImageForCurrentFrame):
        (WebCore::TestImage::destroyDecodedData):
        (WebCore::TestImage::decodedSize):
        (WebCore::TestImage::draw):
        (WebCore::TEST):

2011-12-06  Adam Klein  <adamk@chromium.org>

        [chromium] Guard access to WebKitPlatformSupport::currentThread with a null check
        https://bugs.webkit.org/show_bug.cgi?id=73937

        Reviewed by Adam Barth.

        Though |currentThread| is never null in production code, it is null in
        unit tests (such as Chromium's unit_tests) that call WebKit::initialize()
        without first constructing a MessageLoop.

        * src/WebKit.cpp:
        (WebKit::initialize):
        (WebKit::shutdown):

2011-12-06  Alexandre Elias  <aelias@google.com>

        [chromium] Apply sent deltas on finishCommit
        https://bugs.webkit.org/show_bug.cgi?id=73884

        Reviewed by James Robinson.

        This moves scroll and pageScale "sent" deltas to be applied to
        the layer at the end of the commit, instead of the beginning.

        This has several advantages, especially for page scale:
        - When pageScale changes, no longer any need to change the scroll's
        coordinate space at beginning of commit, which is complex and prone to
        bugs (this fixes a problem where we were forgetting to modify the
        scrollPosition before).
        - No need for non-commit-related code to consider the "sent" values.
        m_pageScale is now always the content scale factor, and
        m_pageScaleDelta is the scale to be on the impl-side matrix.
        - This will make it easy to send arbitrary fake or future delta
        values for example while pinch zooming out.

        The scroll logic is similarly altered for consistency's sake.  Note that
        I also moved the tree synchronize to the beginning of finishCommit
        in order to avoid having to change the pageScale coordinate space of
        sentScrollDelta in adjustScrollsForPageScaleChange().

        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKit::TEST_F):

2011-12-06  Adam Barth  <abarth@webkit.org>

        Remove forwarding header now that downstream has been fixed to refer to
        the actual location of this header.

        * public/WebRect.h: Removed.

2011-12-06  Dimitri Glazkov  <dglazkov@chromium.org>

        Unreviewed, rolling out r102091.
        http://trac.webkit.org/changeset/102091
        https://bugs.webkit.org/show_bug.cgi?id=73711

        Caused Clang Linux compile failure.

        * tests/LayerChromiumTest.cpp:

2011-12-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r102102.
        http://trac.webkit.org/changeset/102102
        https://bugs.webkit.org/show_bug.cgi?id=73925

        Causes segmentation fault on chromium unit_tests,
        content_unittests, sync_unit_tests (Requested by vsevik on
        #webkit).

        * features.gypi:

2011-12-06  Vsevolod Vlasov  <vsevik@chromium.org>

        Unreviewed chromium expectations update.

        * tests/KURLTest.cpp:
        (ComponentCase::TEST):

2011-12-06  Eric Penner  <epenner@google.com>

        [chromium] Set texture limits as multiples of viewport size instead of hardcoded values
        https://bugs.webkit.org/show_bug.cgi?id=72202

        Reviewed by James Robinson.

        * tests/TiledLayerChromiumTest.cpp:
        (WTF::TEST):

2011-12-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r102043.
        http://trac.webkit.org/changeset/102043
        https://bugs.webkit.org/show_bug.cgi?id=73898

        Breaks chromium mac-cg compilation. (Requested by vsevik on
        #webkit).

        * WebKit.gypi:
        * tests/ImageLayerChromiumTest.cpp: Removed.

2011-12-05  Rafael Weinstein  <rafaelw@chromium.org>

        [MutationObservers] Enable in Chromium trunk
        https://bugs.webkit.org/show_bug.cgi?id=73851

        Reviewed by Ojan Vafai.

        * features.gypi:

2011-12-05  James Robinson  <jamesr@chromium.org>

        chromium build fix

        * src/WebLayerTreeView.cpp:

2011-12-05  James Robinson  <jamesr@chromium.org>

        Rollout http://trac.webkit.org/changeset/102019, dependent has not
        landed in chromium

        * WebKit.gyp:
        * public/WebContentLayer.h: Added.
        * public/WebExternalTextureLayer.h: Added.
        * public/WebLayer.h: Added.
        * public/WebLayerClient.h: Added.
        * public/WebLayerTreeView.h: Added.
        * public/WebLayerTreeViewClient.h: Added.
        * src/WebLayerTreeView.cpp:
        * src/WebLayerTreeViewImpl.cpp:

2011-12-05  Dana Jansens  <danakj@chromium.org>

        Set opaque flag for WebGLLayerChromium
        https://bugs.webkit.org/show_bug.cgi?id=73876

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/WebGLLayerChromiumTest.cpp: Added.
        (WebKit::CompositorMockWebGraphicsContext3D::create):
        (WebKit::CompositorMockWebGraphicsContext3D::makeContextCurrent):
        (WebKit::CompositorMockWebGraphicsContext3D::createProgram):
        (WebKit::CompositorMockWebGraphicsContext3D::createShader):
        (WebKit::CompositorMockWebGraphicsContext3D::getShaderiv):
        (WebKit::CompositorMockWebGraphicsContext3D::getProgramiv):
        (WebKit::CompositorMockWebGraphicsContext3D::getContextAttributes):
        (WebKit::CompositorMockWebGraphicsContext3D::CompositorMockWebGraphicsContext3D):
        (WebKit::createGraphicsContext):
        (WebKit::TEST):

2011-12-05  Adrienne Walker  <enne@google.com>

        [chromium] setNeedsCommit on non-composited host layers should trigger commit
        https://bugs.webkit.org/show_bug.cgi?id=73711

        Reviewed by James Robinson.

        Add some tests to make sure that modifying the noncomposited content
        host triggers commits.

        Properties that trigger setNeedsCommit should only do so when the
        property changes. Additionally, make more property changes properly
        trigger commits.

        * tests/LayerChromiumTest.cpp:

2011-12-05  Stephen White  <senorblanco@chromium.org>

        Allow the ImageBuffers used by SVG filters to be accelerated
        https://bugs.webkit.org/show_bug.cgi?id=73842

        Reviewed by Kenneth Russell.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setAcceleratedFiltersEnabled):
        * src/WebSettingsImpl.h:

2011-12-05  Adam Barth  <abarth@webkit.org>

        [Chromium] Chromium fails to compile due to missing WebContentLayerClient.h
        https://bugs.webkit.org/show_bug.cgi?id=73881

        This patch adds a forwarding header to fix the downstream Windows build:
        http://build.chromium.org/p/chromium.webkit/builders/Win%20Builder/builds/12955/steps/compile/logs/stdio

        * public/WebContentLayerClient.h: Added.

2011-12-05  Adam Barth  <abarth@webkit.org>

        Add a shim to fix the downstream Chromium compile.  The real fix should
        be made downstream via http://codereview.chromium.org/8801036/, but the
        Chromium tree is closed at the moment.

        * public/WebRect.h: Added.

2011-12-01  Vangelis Kokkevis  <vangelis@chromium.org>

        Use ANGLE's texture_usage and texture_storage extensions when allocating compositor textures.
        https://bugs.webkit.org/show_bug.cgi?id=73621

        Add the necessary entry points and enums to GraphicsContext3D.

        Reviewed by Kenneth Russell.

        * public/platform/WebGraphicsContext3D.h:
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::texStorage2DEXT):
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DPrivate.h:
        * tests/MockWebGraphicsContext3D.h:
        (WebKit::MockWebGraphicsContext3D::texStorage2DEXT):

2011-12-05  Adam Barth  <abarth@webkit.org>

        Another attempted build fix.

        * src/linux/WebFontInfo.cpp:

2011-12-05  Adam Barth  <abarth@webkit.org>

        Fix Linux build.

        * public/linux/WebFontInfo.h:

2011-12-05  Adam Barth  <abarth@webkit.org>

        [Chromium] Remove no-longer-used forwarding headers in the WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=73845

        Reviewed by Darin Fisher.

        Delete unused forwarding headers and update includes to the new header
        locations.

        * WebKit.gyp:
        * bridge/PeerConnectionHandlerInternal.cpp:
        * bridge/PeerConnectionHandlerInternal.h:
        * public/WebArrayBuffer.h:
        * public/WebArrayBufferView.h: Removed.
        * public/WebAudioBus.h: Removed.
        * public/WebAudioDevice.h: Removed.
        * public/WebBlobData.h: Removed.
        * public/WebBlobRegistry.h: Removed.
        * public/WebCString.h: Removed.
        * public/WebCanvas.h: Removed.
        * public/WebClipboard.h: Removed.
        * public/WebColor.h: Removed.
        * public/WebColorName.h: Removed.
        * public/WebCommon.h: Removed.
        * public/WebCompositorInputHandler.h:
        * public/WebCookie.h: Removed.
        * public/WebCookieJar.h: Removed.
        * public/WebData.h: Removed.
        * public/WebDragData.h: Removed.
        * public/WebFileSystem.h: Removed.
        * public/WebFloatPoint.h: Removed.
        * public/WebFloatQuad.h: Removed.
        * public/WebFloatRect.h: Removed.
        * public/WebGamepad.h: Removed.
        * public/WebGamepads.h: Removed.
        * public/WebGraphicsContext3D.h: Removed.
        * public/WebHTTPBody.h: Removed.
        * public/WebHTTPHeaderVisitor.h: Removed.
        * public/WebHTTPLoadInfo.h: Removed.
        * public/WebIDBCallbacks.h:
        * public/WebImage.h: Removed.
        * public/WebIntent.h:
        * public/WebIntentServiceInfo.h:
        * public/WebKitPlatformSupport.h: Removed.
        * public/WebLocalizedString.h: Removed.
        * public/WebMediaStreamDescriptor.h: Removed.
        * public/WebMimeRegistry.h: Removed.
        * public/WebNonCopyable.h: Removed.
        * public/WebPageOverlay.h:
        * public/WebPeerConnectionHandler.h: Removed.
        * public/WebPeerConnectionHandlerClient.h: Removed.
        * public/WebPoint.h: Removed.
        * public/WebPrivateOwnPtr.h: Removed.
        * public/WebPrivatePtr.h: Removed.
        * public/WebRect.h: Removed.
        * public/WebSerializedScriptValue.h: Removed.
        * public/WebSize.h: Removed.
        * public/WebSocketStreamError.h: Removed.
        * public/WebSocketStreamHandle.h: Removed.
        * public/WebSocketStreamHandleClient.h: Removed.
        * public/WebString.h: Removed.
        * public/WebThread.h: Removed.
        * public/WebThreadSafeData.h: Removed.
        * public/WebURL.h: Removed.
        * public/WebURLError.h: Removed.
        * public/WebURLLoadTiming.h: Removed.
        * public/WebURLLoader.h: Removed.
        * public/WebURLLoaderClient.h: Removed.
        * public/WebURLRequest.h: Removed.
        * public/WebURLResponse.h: Removed.
        * public/WebVector.h: Removed.
        * public/WebWorkerRunLoop.h:
        * public/android/WebThemeEngine.h: Removed.
        * public/linux/WebFontFamily.h: Removed.
        * public/linux/WebThemeEngine.h: Removed.
        * public/mac/WebThemeEngine.h: Removed.
        * public/win/WebThemeEngine.h: Removed.
        * src/ApplicationCacheHost.cpp:
        * src/ApplicationCacheHostInternal.h:
        * src/AssertMatchingEnums.cpp:
        * src/AssociatedURLLoader.cpp:
        * src/AssociatedURLLoader.h:
        * src/AsyncFileSystemChromium.cpp:
        * src/AsyncFileWriterChromium.cpp:
        * src/AudioDestinationChromium.cpp:
        * src/AudioDestinationChromium.h:
        * src/AutofillPopupMenuClient.cpp:
        * src/BlobRegistryProxy.cpp:
        * src/CCThreadImpl.cpp:
        * src/ChromeClientImpl.cpp:
        * src/ChromiumCurrentTime.cpp:
        * src/ChromiumOSRandomSource.cpp:
        * src/ChromiumThreading.cpp:
        * src/CompositionUnderlineBuilder.h:
        * src/CompositionUnderlineVectorBuilder.h:
        * src/ContextMenuClientImpl.cpp:
        * src/DragClientImpl.cpp:
        * src/DragScrollTimer.h:
        * src/ExternalPopupMenu.cpp:
        * src/FrameLoaderClientImpl.cpp:
        * src/GraphicsContext3DChromium.cpp:
        * src/IDBCallbacksProxy.cpp:
        * src/IDBCursorBackendProxy.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        * src/IDBObjectStoreBackendProxy.cpp:
        * src/InspectorClientImpl.cpp:
        * src/InspectorFrontendClientImpl.cpp:
        * src/LocalFileSystemChromium.cpp:
        * src/LocalizedStrings.cpp:
        * src/NotificationPresenterImpl.cpp:
        * src/PlatformMessagePortChannel.cpp:
        * src/PlatformSupport.cpp:
        * src/ResourceHandle.cpp:
        * src/ResourceHandleInternal.h:
        * src/ScrollbarGroup.cpp:
        * src/SharedWorkerRepository.cpp:
        * src/SocketStreamHandle.cpp:
        * src/SpeechInputClientImpl.cpp:
        * src/StorageAreaProxy.cpp:
        * src/StorageEventDispatcherChromium.cpp:
        * src/StorageNamespaceProxy.cpp:
        * src/WebAccessibilityObject.cpp:
        * src/WebAnimationControllerImpl.cpp:
        * src/WebArrayBufferView.cpp:
        * src/WebAttribute.cpp:
        * src/WebAudioBus.cpp:
        * src/WebBindings.cpp:
        * src/WebBlobData.cpp:
        * src/WebCString.cpp:
        * src/WebColor.cpp:
        * src/WebCommon.cpp:
        * src/WebCompositorImpl.cpp:
        * src/WebCompositorInputHandlerImpl.cpp:
        * src/WebContentLayerImpl.cpp:
        * src/WebDOMEventListenerPrivate.h:
        * src/WebDOMMessageEvent.cpp:
        * src/WebDOMStringList.cpp:
        * src/WebData.cpp:
        * src/WebDataSourceImpl.cpp:
        * src/WebDatabase.cpp:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDocument.cpp:
        * src/WebDocumentType.cpp:
        * src/WebDragData.cpp:
        * src/WebEntities.cpp:
        * src/WebExternalTextureLayerImpl.cpp:
        * src/WebFileChooserCompletionImpl.h:
        * src/WebFileSystemCallbacksImpl.cpp:
        * src/WebFileSystemCallbacksImpl.h:
        * src/WebFloatQuad.cpp:
        * src/WebFontImpl.cpp:
        * src/WebFormElement.cpp:
        * src/WebFrameImpl.cpp:
        * src/WebGeolocationError.cpp:
        * src/WebGeolocationPermissionRequest.cpp:
        * src/WebGraphicsContext3D.cpp:
        * src/WebHTTPBody.cpp:
        * src/WebHTTPLoadInfo.cpp:
        * src/WebHistoryItem.cpp:
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBCursorImpl.h:
        * src/WebIDBDatabaseCallbacksImpl.cpp:
        * src/WebIDBDatabaseCallbacksImpl.h:
        * src/WebIDBDatabaseError.cpp:
        * src/WebIDBDatabaseImpl.h:
        * src/WebIDBIndexImpl.h:
        * src/WebIDBKey.cpp:
        * src/WebIDBKeyPath.cpp:
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        * src/WebIDBTransactionImpl.h:
        * src/WebIconLoadingCompletionImpl.h:
        * src/WebImageCG.cpp:
        * src/WebImageDecoder.cpp:
        * src/WebImageSkia.cpp:
        * src/WebInputElement.cpp:
        * src/WebKit.cpp:
        * src/WebLabelElement.cpp:
        * src/WebLayer.cpp:
        * src/WebLayerTreeView.cpp:
        * src/WebLayerTreeViewImpl.cpp:
        * src/WebMediaPlayerClientImpl.cpp:
        * src/WebMediaStreamDescriptor.cpp:
        * src/WebMediaStreamRegistry.cpp:
        * src/WebMediaStreamSource.cpp:
        * src/WebNode.cpp:
        * src/WebNotification.cpp:
        * src/WebOptionElement.cpp:
        * src/WebPageSerializer.cpp:
        * src/WebPageSerializerImpl.cpp:
        * src/WebPageSerializerImpl.h:
        * src/WebPluginContainerImpl.cpp:
        * src/WebPluginListBuilderImpl.cpp:
        * src/WebPluginLoadObserver.h:
        * src/WebPopupMenuImpl.cpp:
        * src/WebPopupMenuImpl.h:
        * src/WebRange.cpp:
        * src/WebRegularExpression.cpp:
        * src/WebScriptController.cpp:
        * src/WebScrollbarImpl.cpp:
        * src/WebSecurityOrigin.cpp:
        * src/WebSecurityPolicy.cpp:
        * src/WebSelectElement.cpp:
        * src/WebSerializedScriptValue.cpp:
        * src/WebSettingsImpl.cpp:
        * src/WebSharedWorkerImpl.cpp:
        * src/WebSocketImpl.cpp:
        * src/WebSocketImpl.h:
        * src/WebSpeechInputControllerMockImpl.cpp:
        * src/WebSpeechInputControllerMockImpl.h:
        * src/WebStorageAreaImpl.cpp:
        * src/WebStorageEventDispatcherImpl.cpp:
        * src/WebStorageNamespaceImpl.cpp:
        * src/WebString.cpp:
        * src/WebTextCheckingCompletionImpl.cpp:
        * src/WebThreadSafeData.cpp:
        * src/WebURL.cpp:
        * src/WebURLError.cpp:
        * src/WebURLLoadTiming.cpp:
        * src/WebURLRequest.cpp:
        * src/WebURLResponse.cpp:
        * src/WebURLResponsePrivate.h:
        * src/WebUserMediaRequest.cpp:
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:
        * src/WebWorkerClientImpl.cpp:
        * src/WebWorkerClientImpl.h:
        * src/WebWorkerImpl.cpp:
        * src/WorkerAsyncFileSystemChromium.cpp:
        * src/WorkerAsyncFileWriterChromium.cpp:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        * src/WorkerFileSystemCallbacksBridge.h:
        * src/WorkerFileWriterCallbacksBridge.cpp:
        * src/WrappedResourceRequest.h:
        * src/WrappedResourceResponse.h:
        * src/mac/WebSubstringUtil.mm:
        * tests/AssociatedURLLoaderTest.cpp:
        * tests/CCLayerTreeHostTest.cpp:
        * tests/FrameTestHelpers.cpp:
        * tests/MockWebGraphicsContext3D.h:
        * tests/PopupMenuTest.cpp:
        * tests/RunAllTests.cpp:
        * tests/WebLayerTest.cpp:
        * tests/WebPageNewSerializerTest.cpp:
        * tests/WebPageSerializerTest.cpp:
        * tests/WebURLRequestTest.cpp:
        * tests/WebUnitTests.h:
        * tests/WebViewTest.cpp:

2011-12-05  Dana Jansens  <danakj@chromium.org>

        [chromium] Set opaque flag for ImageLayerChromium
        https://bugs.webkit.org/show_bug.cgi?id=72964

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/ImageLayerChromiumTest.cpp: Added.
        (WebCore::MockGraphicsLayerClient::notifyAnimationStarted):
        (WebCore::MockGraphicsLayerClient::notifySyncRequired):
        (WebCore::MockGraphicsLayerClient::paintContents):
        (WebCore::MockGraphicsLayerClient::showDebugBorders):
        (WebCore::MockGraphicsLayerClient::showRepaintCounter):
        (WebCore::TestImage::create):
        (WebCore::TestImage::TestImage):
        (WebCore::TestImage::~TestImage):
        (WebCore::TestImage::isBitmapImage):
        (WebCore::TestImage::currentFrameHasAlpha):
        (WebCore::TestImage::size):
        (WebCore::TestImage::nativeImageForCurrentFrame):
        (WebCore::TestImage::destroyDecodedData):
        (WebCore::TestImage::decodedSize):
        (WebCore::TestImage::draw):
        (WebCore::TEST):

2011-12-02  James Robinson  <jamesr@chromium.org>

        [chromium] Remove forwarding headers for WebLayer APIs
        https://bugs.webkit.org/show_bug.cgi?id=73729

        Reviewed by Adam Barth.

        These are no longer necessary.

        * WebKit.gyp:
        * public/WebContentLayer.h: Removed.
        * public/WebContentLayerClient.h: Removed.
        * public/WebExternalTextureLayer.h: Removed.
        * public/WebLayer.h: Removed.
        * public/WebLayerClient.h: Removed.
        * public/WebLayerTreeView.h: Removed.
        * public/WebLayerTreeViewClient.h: Removed.
        * src/WebLayerTreeView.cpp:
        * src/WebLayerTreeViewImpl.cpp:
        * tests/WebLayerTest.cpp:

2011-12-05  Vsevolod Vlasov  <vsevik@chromium.org>

        Unreviewed, fixed chromium DEPS syntax.

        * DEPS:

2011-12-05  Vsevolod Vlasov  <vsevik@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-12-05  Eric Carlson  <eric.carlson@apple.com>

        WebKit/chromium part of: Add WebKit preferences for text track settings
        https://bugs.webkit.org/show_bug.cgi?id=73721

        Reviewed by John Sullivan.

        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::shouldDisplaySubtitles): Added.
        (WebKit::WebSettingsImpl::shouldDisplayCaptions): Ditto.
        (WebKit::WebSettingsImpl::shouldDisplayTextDescriptions): Ditto.
        * src/WebSettingsImpl.h:

2011-12-04  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-12-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r101906.
        http://trac.webkit.org/changeset/101906
        https://bugs.webkit.org/show_bug.cgi?id=73736

        Failing chromium webkit_unit_tests (Requested by scheib on
        #webkit).

        * WebKit.gypi:
        * tests/DispatchEventTest.cpp: Removed.
        * tests/data/event_target.html: Removed.

2011-12-02  Dave Michael  <dmichael@chromium.org>

        Add a unit test for creating, listening for, and dispatching events
        via the chromium API.
        https://bugs.webkit.org/show_bug.cgi?id=72988

        Reviewed by Darin Fisher.

        * WebKit.gypi:
        * tests/DispatchEventTest.cpp: Added.
        (WebKit::MockListener::MockListener):
        (WebKit::MockListener::~MockListener):
        (WebKit::MockListener::events):
        (WebKit::DispatchEventTest::DispatchEventTest):
        (WebKit::DispatchEventTest::TearDown):
        (WebKit::TEST_F):

2011-12-02  Nate Chapin  <japhet@chromium.org>

        Don't call FocusController:setActive() in 
        WebViewImpl::setFocus(), since being active and
        being focused are different concepts and chromium
        now properly sends setActive IPCs on all platforms.
        https://bugs.webkit.org/show_bug.cgi?id=73687

        Reviewed by Eric Seidel.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setFocus):
        * tests/WebViewTest.cpp: Test how different combinations of
            setIsActive() and setFocus() affect whether the document
            has focus.

2011-12-02  Dave Michael  <dmichael@chromium.org>

        Add WebArrayBuffer to chromium API
        https://bugs.webkit.org/show_bug.cgi?id=73593

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebArrayBuffer.h: Added.
        (WebKit::WebArrayBuffer::~WebArrayBuffer):
        (WebKit::WebArrayBuffer::WebArrayBuffer):
        (WebKit::WebArrayBuffer::operator=):
        (WebKit::WebArrayBuffer::isNull):
        * public/WebBindings.h:
        * src/WebArrayBuffer.cpp: Added.
        (WebKit::WebArrayBuffer::create):
        (WebKit::WebArrayBuffer::reset):
        (WebKit::WebArrayBuffer::assign):
        (WebKit::WebArrayBuffer::data):
        (WebKit::WebArrayBuffer::byteLength):
        (WebKit::WebArrayBuffer::toV8Value):
        (WebKit::WebArrayBuffer::WebArrayBuffer):
        (WebKit::WebArrayBuffer::operator=):
        (WebKit::WebArrayBuffer::operator WTF::PassRefPtr<WTF::ArrayBuffer>):
        * src/WebBindings.cpp:
        (WebKit::getArrayBufferImpl):
        (WebKit::WebBindings::getArrayBuffer):

2011-12-02  David Grogan  <dgrogan@chromium.org>

        Grant workers experimental access to IndexedDB.
        https://bugs.webkit.org/show_bug.cgi?id=73609

        Reviewed by Nate Chapin.

        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::allowIDBFromWorkerThread): Return
        true while behind a runtime flag, and while we figure out how to check
        permission in a thread-safe manner.
        (WebKit::IDBFactoryBackendProxy::openFromWorker): Using the webFrame
        from the worker seems to satisfy the weak condition in chromium that
        neither it nor it's associated RenderView is NULL.
        * src/IDBFactoryBackendProxy.h:

2011-12-01  James Robinson  <jamesr@chromium.org>

        [chromium] Move WebLayer APIs to platform directory
        https://bugs.webkit.org/show_bug.cgi?id=73610

        Reviewed by Darin Fisher.

        * public/WebContentLayer.h:
        * public/WebContentLayerClient.h:
        * public/WebExternalTextureLayer.h:
        * public/WebLayer.h:
        * public/WebLayerClient.h:
        * public/WebLayerTreeView.h:
        * public/WebLayerTreeViewClient.h:
        * public/platform/WebContentLayer.h: Copied from Source/WebKit/chromium/public/WebContentLayer.h.
        (WebKit::WebContentLayer::WebContentLayer):
        (WebKit::WebContentLayer::~WebContentLayer):
        (WebKit::WebContentLayer::operator=):
        * public/platform/WebContentLayerClient.h: Copied from Source/WebKit/chromium/public/WebContentLayerClient.h.
        (WebKit::WebContentLayerClient::~WebContentLayerClient):
        * public/platform/WebExternalTextureLayer.h: Copied from Source/WebKit/chromium/public/WebExternalTextureLayer.h.
        (WebKit::WebExternalTextureLayer::WebExternalTextureLayer):
        (WebKit::WebExternalTextureLayer::~WebExternalTextureLayer):
        (WebKit::WebExternalTextureLayer::operator=):
        * public/platform/WebLayer.h: Copied from Source/WebKit/chromium/public/WebLayer.h.
        (WebKit::WebLayer::WebLayer):
        (WebKit::WebLayer::~WebLayer):
        (WebKit::WebLayer::operator=):
        (WebKit::WebLayer::isNull):
        (WebKit::WebLayer::to):
        (WebKit::WebLayer::toConst):
        (WebKit::WebLayer::unwrap):
        (WebKit::WebLayer::constUnwrap):
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/platform/WebLayerClient.h: Copied from Source/WebKit/chromium/public/WebLayerClient.h.
        (WebKit::WebLayerClient::~WebLayerClient):
        * public/platform/WebLayerTreeView.h: Copied from Source/WebKit/chromium/public/WebLayerTreeView.h.
        (WebKit::WebLayerTreeView::Settings::Settings):
        (WebKit::WebLayerTreeView::WebLayerTreeView):
        (WebKit::WebLayerTreeView::~WebLayerTreeView):
        (WebKit::WebLayerTreeView::operator=):
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/platform/WebLayerTreeViewClient.h: Copied from Source/WebKit/chromium/public/WebLayerTreeViewClient.h.
        (WebKit::WebLayerTreeViewClient::~WebLayerTreeViewClient):
        * public/platform/WebPrivatePtr.h:
        * src/WebContentLayer.cpp:
        * src/WebContentLayerImpl.cpp:
        * src/WebExternalTextureLayer.cpp:
        * src/WebExternalTextureLayerImpl.cpp:
        * src/WebLayer.cpp:
        * src/WebLayerImpl.cpp:
        * src/WebLayerTreeView.cpp:
        * src/WebLayerTreeViewImpl.h:

2011-12-02  Karl Koscher  <supersat@chromium.org>

        [chromium] add setOpener method to WebFrame
        https://bugs.webkit.org/show_bug.cgi?id=73379

        Reviewed by Darin Fisher.

        * public/WebFrame.h:
        (WebKit::WebFrame::clearOpener): now an inline call to setOpener(0)
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setOpener): sets window.opener
        * src/WebFrameImpl.h:

2011-12-02  Kent Tamura  <tkent@chromium.org>

        Unreviewed, rolling out r101337.
        http://trac.webkit.org/changeset/101337
        https://bugs.webkit.org/show_bug.cgi?id=73189

        It's a wrong way to fix the problem

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::popupOpened):

2011-12-02  Kausalya Madhusudhanan  <kmadhusu@chromium.org>

        Added helper method to identify whether the page has custom page size style.
        https://bugs.webkit.org/show_bug.cgi?id=73585

        Reviewed by Darin Fisher.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::hasCustomPageSizeStyle):
        * src/WebFrameImpl.h:

2011-12-02  Tony Chang  <tony@chromium.org>

        [Chromium] GYP fix for Windows 2010 build
        https://bugs.webkit.org/show_bug.cgi?id=73483

        Reviewed by Adam Barth.

        Patch by Carlos Pizano.

        * WebKit.gyp: Exclude the android directory and remove a file match that doesn't match anything.

2011-12-01  Alok Priyadarshi  <alokp@chromium.org>

        [chromium] CCLayerQuad does not return FloatQuad in correct order
        https://bugs.webkit.org/show_bug.cgi?id=73247

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCLayerQuadTest.cpp: Added.
        (WebCore::TEST):

2011-11-30  Adam Klein  <adamk@chromium.org>

        [chromium] WebKitMutationObserver::deliverAllMutations should be exposed through the Chromium API
        https://bugs.webkit.org/show_bug.cgi?id=71242

        Reviewed by Darin Fisher.

        Relanding, depends on http://codereview.chromium.org/8748015/
        to fix a sandboxing issue on Chromium/Linux.

        Add addTaskObserver and removeTaskObserver to WebThread,
        along with a new WebThread::TaskObserver interface.

        For mutation observers, add a TaskObserver to the main thread
        to deliver mutations after each task runs.

        The Chromium implementation of the new WebThread methods is in
        http://codereview.chromium.org/8586038/.

        * public/platform/WebThread.h:
        (WebKit::WebThread::TaskObserver::~TaskObserver):
        * src/WebKit.cpp:
        (WebKit::initialize):
        (WebKit::shutdown):

2011-12-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r101833.
        http://trac.webkit.org/changeset/101833
        https://bugs.webkit.org/show_bug.cgi?id=73678

        test_expectations file invalid: run Tools/Scripts/new-run-
        webkit-tests --lint-test-files (Requested by scheib on
        #webkit).

        * WebKit.gypi:
        * tests/CCLayerQuadTest.cpp: Removed.

2011-12-02  Alok Priyadarshi  <alokp@chromium.org>

        [chromium] CCLayerQuad does not return FloatQuad in correct orientation
        https://bugs.webkit.org/show_bug.cgi?id=73247

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCLayerQuadTest.cpp: Added.
        (WebCore::TEST):

2011-12-02  Daniel Cheng  <dcheng@chromium.org>

        [chromium] Add plumbing for supporting custom MIME types in DataTransfer.
        https://bugs.webkit.org/show_bug.cgi?id=73594

        Reviewed by David Levin.

        * public/platform/WebClipboard.h:
        (WebKit::WebClipboard::readCustomData):
        * public/platform/WebDragData.h:
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::clipboardReadCustomData):
        * src/WebDragData.cpp:
        (WebKit::WebDragData::customData):
        (WebKit::WebDragData::setCustomData):

2011-12-02  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Rename "multientry" to "multiEntry" per spec change
        https://bugs.webkit.org/show_bug.cgi?id=73578

        Reviewed by Darin Fisher.

        * public/WebIDBIndex.h:
        (WebKit::WebIDBIndex::multiEntry):
        * public/WebIDBObjectStore.h:
        (WebKit::WebIDBObjectStore::createIndex):
        * src/IDBIndexBackendProxy.cpp:
        (WebKit::IDBIndexBackendProxy::multiEntry):
        * src/IDBIndexBackendProxy.h:
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::createIndex):
        * src/IDBObjectStoreBackendProxy.h:
        * src/WebIDBIndexImpl.cpp:
        (WebKit::WebIDBIndexImpl::multiEntry):
        * src/WebIDBIndexImpl.h:
        * src/WebIDBObjectStoreImpl.cpp:
        (WebKit::WebIDBObjectStoreImpl::createIndex):
        * src/WebIDBObjectStoreImpl.h:

2011-12-02  Sami Kyostila  <skyostil@chromium.org>

        [chromium] Make CCInputHandler scrolling stateful
        https://bugs.webkit.org/show_bug.cgi?id=73345

        This change makes the scrolling part of CCInputHandler stateful by
        replacing scrollRootLayer() with scrollBegin(), scrollBy() and
        scrollEnd(). This is done in preparation for scrollable sublayers.
        Specifically, scrollBegin() will allow CCLayerTreeHostImpl to perform
        input event hit testing to find the layer to be scrolled.

        Reviewed by Steve Block.

        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositorImpl::handleInputEvent):
        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKit::TEST_F):

2011-12-02  Pavel Feldman  <pfeldman@google.com>

        Web Inspector [chromium]: provisional fix for interactive ui tests
        https://bugs.webkit.org/show_bug.cgi?id=73633

        Reviewed by Yury Semikhatsky.

        * src/js/Tests.js:
        (.):
        (.TestSuite.prototype._executeCodeWhenScriptsAreParsed):

2011-12-01  David Levin  <levin@chromium.org>

        [chromium] Add WebKit API's to support the autosize algorithm in renderer process.
        https://bugs.webkit.org/show_bug.cgi?id=73058

        Reviewed by Darin Fisher.

        * public/WebView.h: Expose the auto-resize method.
        * public/WebWidgetClient.h:
        (WebKit::WebWidgetClient::didAutoResize):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView): Set the auto-resize
        state on the new view.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::resize): Extracted sendResizeEventAndRepaint, so
        that it can be used by layoutUpdated.
        (WebKit::WebViewImpl::queueBothResizeEventAndPaint): Ditto.
        (WebKit::WebViewImpl::hasHorizontalScrollbar): Added for testing purposes.
        (WebKit::WebViewImpl::hasVerticalScrollbar): Ditto.
        (WebKit::WebViewImpl::enableAutoResizeMode): Set-up auto-resize.
        (WebKit::WebViewImpl::layoutUpdated): Handle the auto-resize case by
        sending events and invalidation.
        * src/WebViewImpl.h: Expose the aut-reosize information.
        (WebKit::WebViewImpl::shouldAutoResize):
        (WebKit::WebViewImpl::minAutoSize):
        (WebKit::WebViewImpl::maxAutoSize):
        * tests/FrameTestHelpers.cpp:
        (WebKit::FrameTestHelpers::createWebViewAndLoad): Added the ability to
        specify the WebViewClient.
        * tests/FrameTestHelpers.h: Ditto.
        * tests/WebViewTest.cpp: Added a simple test for auto-resize.
        (WebKit::TestData::setWebView):
        (WebKit::TestData::setSize): Capture the new size.
        (WebKit::TestData::hasHorizontalScrollbar):
        (WebKit::TestData::hasVerticalScrollbar):
        (WebKit::TestData::width):
        (WebKit::TestData::height):
        (WebKit::AutoResizeWebViewClient::didAutoResize): Handle the resize event.
        (WebKit::AutoResizeWebViewClient::testData):
        (WebKit::TEST_F): The actual test.
        * tests/data/specify_size.html: Added.

2011-12-02  Xiyuan Xia  <xiyuan@chromium.org>

        [Chromium] Support adding/removing page overlay to WebView
        https://bugs.webkit.org/show_bug.cgi?id=73235

        Reviewed by James Robinson.

        * WebKit.gyp:
        * public/WebPageOverlay.h: Added.
        (WebKit::WebPageOverlay::~WebPageOverlay):
        * public/WebView.h:
        * src/PageOverlay.cpp:
        (WebKit::PageOverlay::create):
        (WebKit::PageOverlay::PageOverlay):
        (WebKit::OverlayGraphicsLayerClientImpl::create):
        (WebKit::OverlayGraphicsLayerClientImpl::paintContents):
        (WebKit::OverlayGraphicsLayerClientImpl::OverlayGraphicsLayerClientImpl):
        (WebKit::PageOverlay::update):
        (WebKit::PageOverlay::paintWebFrame):
        (WebKit::PageOverlay::invalidateWebFrame):
        * src/PageOverlay.h:
        (WebKit::PageOverlay::overlay):
        (WebKit::PageOverlay::setOverlay):
        (WebKit::PageOverlay::zOrder):
        (WebKit::PageOverlay::setZOrder):
        * src/PageOverlayList.cpp: Added.
        (WebKit::PageOverlayList::create):
        (WebKit::PageOverlayList::PageOverlayList):
        (WebKit::PageOverlayList::~PageOverlayList):
        (WebKit::PageOverlayList::add):
        (WebKit::PageOverlayList::remove):
        (WebKit::PageOverlayList::update):
        (WebKit::PageOverlayList::paintWebFrame):
        (WebKit::PageOverlayList::find):
        * src/PageOverlayList.h: Added.
        (WebKit::PageOverlayList::empty):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::paintPageOverlay):
        (WebKit::WebDevToolsAgentImpl::highlight):
        (WebKit::WebDevToolsAgentImpl::hideHighlight):
        * src/WebDevToolsAgentImpl.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::paintWithContext):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::addPageOverlay):
        (WebKit::WebViewImpl::removePageOverlay):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::didRecreateGraphicsContext):
        * src/WebViewImpl.h:
        (WebKit::WebViewImpl::pageOverlays):

2011-12-01  Jochen Eisinger  <jochen@chromium.org>

        [chromium] add referrer policy to WebContextMenuData
        https://bugs.webkit.org/show_bug.cgi?id=73567

        Reviewed by Darin Fisher.

        * public/WebContextMenuData.h:
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):

2011-12-01  Kelly Norton  <knorton@google.com>

        More void functions eager to return values in RenderObject & WebFrameImpl
        https://bugs.webkit.org/show_bug.cgi?id=73571

        Reviewed by Adam Barth.

        * src/WebFrameImpl.cpp:
        (WebKit::ChromePrintContext::computePageRects):

2011-12-01  Daniel Sievers  <sievers@chromium.org>

        [Chromium] Early returns in calculateDrawTransformsAndVisibilityInternal() are not respected by parent.
        https://bugs.webkit.org/show_bug.cgi?id=73270

        Non-drawing child trees should not be added to the parent render surface's layer list
        and should neither extend the parent layer's drawable content rect.

        This also fixes assertions from the content texture residency logic, which doesn't like it
        if we try to use a render surface through a parent, while that surface itself was never 'used'
        in the same frame.

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebCore::TEST):

2011-12-01  David Reveman  <reveman@chromium.org>

        [Chromium] Use contentBounds instead of bounds for invalidation.
        https://bugs.webkit.org/show_bug.cgi?id=73525

        Reviewed by James Robinson.

        Use setNeedsDisplay() instead of setNeedsDisplayRect() when possible.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::repaint):

2011-12-01  Elliot Poger  <epoger@google.com>

        webkit->chromium DEPS roll 111575->112463
        https://bugs.webkit.org/show_bug.cgi?id=73231

        Reviewed by Yury Semikhatsky.

        * DEPS:

2011-12-01  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: further align front-end configurations: get rid of saveAsAvailable preference, inline drag glass pane.
        https://bugs.webkit.org/show_bug.cgi?id=73555

        Reviewed by Yury Semikhatsky.

        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::canSaveAs):
        * src/InspectorFrontendClientImpl.h:
        * src/js/DevTools.js:

2011-12-01  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: query backend for capabilities explicitly.
        https://bugs.webkit.org/show_bug.cgi?id=73442

        Reviewed by Yury Semikhatsky.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::canClearBrowserCache):
        (WebKit::InspectorClientImpl::canClearBrowserCookies):
        * src/InspectorClientImpl.h:
        * src/js/DevTools.js:

2011-11-29  Hans Wennborg  <hans@chromium.org>

        IndexedDB: Cursor pre-fetching
        https://bugs.webkit.org/show_bug.cgi?id=73025

        Reviewed by Darin Fisher.

        Add plumbing for new pre-fetching related functions.

        * public/WebIDBCallbacks.h:
        (WebKit::WebIDBCallbacks::onSuccessWithPrefetch):
        * public/WebIDBCursor.h:
        (WebKit::WebIDBCursor::deleteFunction):
        (WebKit::WebIDBCursor::prefetchContinue):
        (WebKit::WebIDBCursor::prefetchReset):
        (WebKit::WebIDBCursor::postSuccessHandlerCallback):
        * public/WebIDBTransaction.h:
        (WebKit::WebIDBTransaction::addPendingEvents):
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::onSuccessWithPrefetch):
        * src/IDBCallbacksProxy.h:
        * src/IDBCursorBackendProxy.cpp:
        (WebKit::IDBCursorBackendProxy::postSuccessHandlerCallback):
        * src/IDBCursorBackendProxy.h:
        (WebKit::IDBCursorBackendProxy::prefetchContinue):
        (WebKit::IDBCursorBackendProxy::prefetchReset):
        * src/IDBTransactionBackendProxy.h:
        (WebKit::IDBTransactionBackendProxy::addPendingEvents):
        * src/WebIDBCursorImpl.cpp:
        (WebKit::WebIDBCursorImpl::prefetchContinue):
        (WebKit::WebIDBCursorImpl::prefetchReset):
        * src/WebIDBCursorImpl.h:

2011-12-01  Hans Wennborg  <hans@chromium.org>

        IndexedDB: Fix WebIDBObjectStore::createIndex() after r101602
        https://bugs.webkit.org/show_bug.cgi?id=73543

        Reviewed by Tony Gentilcore.

        r101602 introduces a new signature for createIndex(). Until Chromium
        has been updated to override that function, the default implementation
        must call the old version.

        * public/WebIDBObjectStore.h:
        (WebKit::WebIDBObjectStore::createIndex):

2011-11-30  David Reveman  <reveman@chromium.org>

        [Chromium] Improve tile invalidation.
        https://bugs.webkit.org/show_bug.cgi?id=71872

        Reviewed by James Robinson.

        Remove public API function WebContentLayer::invalidRect(). Add new
        test case to
        LayerChromiumTest.checkSetNeedsDisplayCausesCorrectBehavior that
        verifies that calling setNeedsDisplay() on a LayerChromium with
        empty bounds is handled correctly.

        * public/WebContentLayer.h:
        * src/WebContentLayer.cpp:
        (WebKit::WebContentLayer::invalidateRect):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::repaint):
        * tests/LayerChromiumTest.cpp:

2011-11-30  Takashi Toyoshima  <toyoshim@chromium.org>

        Add didUpdateBufferedAmount callback to WebSocketClient API
        https://bugs.webkit.org/show_bug.cgi?id=73306

        Reviewed by Darin Fisher.

        * public/WebSocketClient.h: Add didUpdateBufferedAmount and default implementations for all callbacks.
        (WebKit::WebSocketClient::didConnect):
        (WebKit::WebSocketClient::didReceiveMessage):
        (WebKit::WebSocketClient::didReceiveBinaryData):
        (WebKit::WebSocketClient::didReceiveMessageError):
        (WebKit::WebSocketClient::didUpdateBufferedAmount):
        (WebKit::WebSocketClient::didStartClosingHandshake):
        (WebKit::WebSocketClient::didClose):
        * src/WebSocketImpl.cpp:
        (WebKit::WebSocketImpl::didUpdateBufferedAmount):
        * src/WebSocketImpl.h:

2011-11-30  Scott Violet  <sky@google.com>

        [chromium] Expose WebLayerTreeView::setRootLayer as a call through
        to same method on CCLayerTreeHost.
        https://bugs.webkit.org/show_bug.cgi?id=73506

        Reviewed by James Robinson.

        * public/WebLayerTreeView.h: Adds setRootLayer.
        * src/WebLayerTreeView.cpp: Ditto.
        (WebKit::WebLayerTreeView::setRootLayer):

2011-11-30  Alexey Proskuryakov  <ap@apple.com>

        Remove an unneeded argument from FrameLoaderClient::download
        https://bugs.webkit.org/show_bug.cgi?id=73486

        Reviewed by Andreas Kling.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::download):
        * src/FrameLoaderClientImpl.h:
        Updated for the change.

2011-11-30  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Implement IDBIndex multientry feature
        https://bugs.webkit.org/show_bug.cgi?id=73232

        Reviewed by Tony Chang.

        Adds the multientry IDBIndex flag to the WebKit API. A version of the
        createIndex() method without this flag is retained until all callers
        are updated.

        * public/WebIDBIndex.h:
        (WebKit::WebIDBIndex::multientry):
        * public/WebIDBObjectStore.h:
        (WebKit::WebIDBObjectStore::createIndex):
        * src/IDBIndexBackendProxy.cpp:
        (WebKit::IDBIndexBackendProxy::multientry):
        * src/IDBIndexBackendProxy.h:
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::createIndex):
        * src/IDBObjectStoreBackendProxy.h:
        * src/WebIDBIndexImpl.cpp:
        (WebKit::WebIDBIndexImpl::multientry):
        * src/WebIDBIndexImpl.h:
        * src/WebIDBObjectStoreImpl.cpp:
        (WebKit::WebIDBObjectStoreImpl::createIndex):
        * src/WebIDBObjectStoreImpl.h:
        (WebKit::WebIDBObjectStoreImpl::createIndex):

2011-11-30  David Reveman  <reveman@chromium.org>

        [Chromium] Add support for painting into an SkPicture and then rasterizing into tile-sized chunks.
        https://bugs.webkit.org/show_bug.cgi?id=71388

        Reviewed by James Robinson.

        Track changes to texture updater.

        * tests/TiledLayerChromiumTest.cpp:
        (WTF::FakeLayerTextureUpdater::Texture::Texture):
        (WTF::FakeLayerTextureUpdater::Texture::~Texture):
        (WTF::FakeLayerTextureUpdater::Texture::updateRect):
        (WTF::FakeLayerTextureUpdater::createTexture):

2011-11-30  Gregg Tavares  <gman@google.com>

        Implement draft WEBGL_compressed_textures WebGL extension
        https://bugs.webkit.org/show_bug.cgi?id=72086

        Reviewed by Kenneth Russell.

        * public/WebGraphicsContext3D.h:
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DPrivate.h:
        * tests/MockWebGraphicsContext3D.h:
        (WebKit::MockWebGraphicsContext3D::compressedTexImage2D):
        (WebKit::MockWebGraphicsContext3D::compressedTexSubImage2D):

2011-11-18  Nat Duca  <nduca@chromium.org>

        [chromium] Enable threaded compositing via CCThreadProxy::hasThread only
        https://bugs.webkit.org/show_bug.cgi?id=70838

        Reviewed by James Robinson.

        * public/WebCompositor.h:
        * public/WebLayerTreeView.h:
        (WebKit::WebLayerTreeView::Settings::Settings):
        * public/WebSettings.h:
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositor::initialize):
        (WebKit::WebCompositor::shutdown):
        (WebKit::WebCompositor::fromIdentifier):
        * src/WebKit.cpp:
        (WebKit::initializeWithoutV8):
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        (WebKit::WebLayerTreeView::composite):
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::createLayerTreeHostContext3D):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        * src/WebSettingsImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::scheduleAnimation):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebViewImpl::scheduleComposite):
        (WebKit::WebViewImpl::graphicsContext3D):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::runTest):

2011-11-30  David Levin  <levin@chromium.org>

        [chromium] Move didUpdateLayout from WebFrameClient to WebViewClient.
        https://bugs.webkit.org/show_bug.cgi?id=73415

        Reviewed by Darin Fisher.

        * public/WebFrameClient.h: Move didUpdateLayout to WebViewClient.
        * public/WebViewClient.h:
        (WebKit::WebViewClient::didUpdateLayout): Ditto.
        * src/ChromeClientImpl.cpp: Call WebViewImpl now.
        (WebKit::ChromeClientImpl::layoutUpdated):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::layoutUpdated):
        * src/WebViewImpl.h: Added layoutUpdated.

2011-11-30  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: get rid of deferred backend->front-end commands processing.
        https://bugs.webkit.org/show_bug.cgi?id=73439

        Reviewed by Yury Semikhatsky.

        * src/WebDevToolsFrontendImpl.cpp:
        (WebKit::WebDevToolsFrontendImpl::WebDevToolsFrontendImpl):
        (WebKit::WebDevToolsFrontendImpl::frontendLoaded):
        (WebKit::WebDevToolsFrontendImpl::dispatchOnInspectorFrontend):
        * src/WebDevToolsFrontendImpl.h:

2011-11-30  Michael Nordman  <michaeln@google.com>

        [chromium] WebSQLDatabase could use some better error reporting.
        Instruments the database classes to report errors a the DatabaseObserver.
        https://bugs.webkit.org/show_bug.cgi?id=73258

        Reviewed by David Levin.

        * public/WebDatabase.h:
        * public/WebDatabaseObserver.h:
        (WebKit::WebDatabaseObserver::reportOpenDatabaseResult):
        (WebKit::WebDatabaseObserver::reportChangeVersionResult):
        (WebKit::WebDatabaseObserver::reportStartTransactionResult):
        (WebKit::WebDatabaseObserver::reportCommitTransactionResult):
        (WebKit::WebDatabaseObserver::reportExecuteStatementResult):
        (WebKit::WebDatabaseObserver::reportVacuumDatabaseResult):
        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::reportOpenDatabaseResult):
        (WebCore::DatabaseObserver::reportChangeVersionResult):
        (WebCore::DatabaseObserver::reportStartTransactionResult):
        (WebCore::DatabaseObserver::reportCommitTransactionResult):
        (WebCore::DatabaseObserver::reportExecuteStatementResult):
        (WebCore::DatabaseObserver::reportVacuumDatabaseResult):
        * src/WebDatabase.cpp:
        (WebKit::WebDatabase::isSyncDatabase):

2011-11-30  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r101440 and r101442.
        http://trac.webkit.org/changeset/101440
        http://trac.webkit.org/changeset/101442
        https://bugs.webkit.org/show_bug.cgi?id=73429

        multiple crashes on layout tests (Requested by hayato on
        #webkit).

        * WebKit.gyp:
        * WebKit.gypi:
        * public/WebCompositor.h:
        * public/WebCompositorClient.h:
        * public/WebCompositorInputHandler.h: Removed.
        * public/WebCompositorInputHandlerClient.h: Removed.
        * public/WebLayerTreeView.h:
        (WebKit::WebLayerTreeView::Settings::Settings):
        * public/WebSettings.h:
        * src/WebCompositorImpl.cpp:
        (WebCore::CCInputHandler::create):
        (WebKit::WebCompositor::setThread):
        (WebKit::WebCompositor::fromIdentifier):
        (WebKit::WebCompositorImpl::fromIdentifier):
        (WebKit::WebCompositorImpl::WebCompositorImpl):
        (WebKit::WebCompositorImpl::~WebCompositorImpl):
        (WebKit::WebCompositorImpl::setClient):
        (WebKit::WebCompositorImpl::handleInputEvent):
        (WebKit::WebCompositorImpl::identifier):
        (WebKit::WebCompositorImpl::willDraw):
        * src/WebCompositorImpl.h:
        (WebKit::WebCompositorImpl::create):
        * src/WebCompositorInputHandlerImpl.cpp: Removed.
        * src/WebCompositorInputHandlerImpl.h: Removed.
        * src/WebKit.cpp:
        (WebKit::initializeWithoutV8):
        (WebKit::shutdown):
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        (WebKit::WebLayerTreeView::composite):
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::createLayerTreeHostContext3D):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setUseThreadedCompositor):
        * src/WebSettingsImpl.h:
        (WebKit::WebSettingsImpl::useThreadedCompositor):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::scheduleAnimation):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebViewImpl::scheduleComposite):
        (WebKit::WebViewImpl::graphicsContext3D):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::onEndTest):
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (WTF::CCLayerTreeHostTestShortlived1::beginTest):
        (WTF::CCLayerTreeHostTestShortlived2::beginTest):
        (WTF::CCLayerTreeHostTestShortlived3::beginTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::beginTest):
        (WTF::CCLayerTreeHostTestOpacityChange::afterTest):
        * tests/WebCompositorImplTest.cpp: Renamed from Source/WebKit/chromium/tests/WebCompositorInputHandlerImplTest.cpp.

2011-11-30  Daniel Sievers  <sievers@chromium.org>

        [Chromium] Avoid ASSERT_NOT_REACHED() from creating FBO with content texture of size 0
        https://bugs.webkit.org/show_bug.cgi?id=73266

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebCore::TEST):

2011-11-30  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: do not report worker-related events unless inspector agent is enabled.
        https://bugs.webkit.org/show_bug.cgi?id=73411

        Reviewed by Yury Semikhatsky.

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::disconnectEventAsText):

2011-11-30  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Fix broken DRT build for Aura Linux
        https://bugs.webkit.org/show_bug.cgi?id=72667

        Reviewed by Tony Chang.

        * WebKit.gyp:

2011-11-29  Nat Duca  <nduca@chromium.org>

        Unreviewed. Fix clang build by using raw pointers instead of static OwnPtrs
        for WebCompositor managment.

        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositorImpl::initialize):
        (WebKit::WebCompositorImpl::shutdown):
        * src/WebCompositorImpl.h:

2011-11-18  Nat Duca  <nduca@chromium.org>

        [chromium] Enable threaded compositing via CCThreadProxy::hasThread only
        https://bugs.webkit.org/show_bug.cgi?id=70838

        Reviewed by James Robinson.

        * public/WebCompositor.h:
        * public/WebLayerTreeView.h:
        (WebKit::WebLayerTreeView::Settings::Settings):
        * public/WebSettings.h:
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositor::initialize):
        (WebKit::WebCompositor::shutdown):
        (WebKit::WebCompositor::fromIdentifier):
        * src/WebKit.cpp:
        (WebKit::initializeWithoutV8):
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        (WebKit::WebLayerTreeView::composite):
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::createLayerTreeHostContext3D):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        * src/WebSettingsImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::scheduleAnimation):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebViewImpl::scheduleComposite):
        (WebKit::WebViewImpl::graphicsContext3D):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::runTest):

2011-11-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r101418.
        http://trac.webkit.org/changeset/101418
        https://bugs.webkit.org/show_bug.cgi?id=73372

        Chromium renderer crashes with ENABLE(MUTATION_OBSERVERS)
        (Requested by aklein on #webkit).

        * public/platform/WebThread.h:
        * src/WebKit.cpp:
        (WebKit::initialize):
        (WebKit::shutdown):

2011-11-29  Dirk Pranke  <dpranke@chromium.org>

        add webkit_user_agent to DRT and webkit_unit_tests
        https://bugs.webkit.org/show_bug.cgi?id=73362

        Reviewed by Tony Chang.

        In preparation for building webkit_glue as a separate component,
        we need to explicitly declare DRT's and webkit_unit_tests'
        dependencies on webkit_user_agent.

        * WebKit.gyp:

2011-11-28  Adam Klein  <adamk@chromium.org>

        [chromium] WebKitMutationObserver::deliverAllMutations should be exposed through the Chromium API
        https://bugs.webkit.org/show_bug.cgi?id=71242

        Reviewed by Darin Fisher.

        Add addTaskObserver and removeTaskObserver to WebThread,
        along with a new WebThread::TaskObserver interface.

        For mutation observers, add a TaskObserver to the main thread
        to deliver mutations after each task runs.

        The Chromium side of this patch is http://codereview.chromium.org/8586038/

        * public/platform/WebThread.h:
        (WebKit::WebThread::TaskObserver::~TaskObserver):
        * src/WebKit.cpp:
        (WebKit::initialize):
        (WebKit::shutdown):

2011-11-29  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: split Preferences into Preferences and Capabilities.
        https://bugs.webkit.org/show_bug.cgi?id=73321

        Reviewed by Yury Semikhatsky.

        * src/js/DevTools.js:

2011-11-29  Jing Zhao  <jingzhao@chromium.org>

        Assertion fails when opening two popup menus
        https://bugs.webkit.org/show_bug.cgi?id=73189

        Reviewed by Kent Tamura.

        By using element.dispatchEvent(), a user written script can open two
        popup menus, which causes the assertion in WebViewImpl::popupOpened()
        fail.

        Check if there is an opened popup menu before opening a popup menu.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::popupOpened):

2011-11-28  David Grogan  <dgrogan@chromium.org>

        WebWorkerRunLoop wrapper around WorkerRunLoop
        https://bugs.webkit.org/show_bug.cgi?id=71757

        This allows the embedder to post tasks to webcore-created worker
        threads.  WebWorkerRunLoop is a thin wrapper that just holds a
        WorkerRunLoop*.  As such, it is not heap allocated and can be copied.

        Reviewed by Darin Fisher.

        * WebKit.gyp: Added WebWorkerRunLoop.{cpp,h}

        * public/WebWorkerRunLoop.h: Added. Interface the embedder will use to
        post Tasks to worker threads created in WebCore.
        (WebKit::WebWorkerRunLoop::Task::~Task):
        (WebKit::operator==): These are the operators necessary to allow
        WebWorkerRunLoop to be used as a key in a std::map using the value of
        the underlying WebCore::WorkerRunLoop* for the meaningful comparisons.
        (WebKit::operator<):

        * public/platform/WebKitPlatformSupport.h: Stubs for the embedder to
        implement.
        (WebKit::WebKitPlatformSupport::didStartWorkerRunLoop):
        (WebKit::WebKitPlatformSupport::didStopWorkerRunLoop):

        * src/PlatformSupport.cpp: Wrap incoming WorkerRunLoop objects in
        WebWorkerRunLoopImpl objects, forward them to WebKitPlatformSupport.
        (WebCore::PlatformSupport::didStartWorkerRunLoop):
        (WebCore::PlatformSupport::didStopWorkerRunLoop):

        * src/WebWorkerRunLoop.cpp: Added.
        (WebKit::WebWorkerRunLoop::WebWorkerRunLoop): Store incoming
        WorkerRunLoop pointer.
        (WebKit::WebWorkerRunLoop::postTask): Wrap incoming Task in
        ScriptExecutionContext::Task, post to stored WorkerRunLoop.
        (WebKit::WebWorkerRunLoop::equals): Support for the operators mentioned
        above.
        (WebKit::WebWorkerRunLoop::lessThan): Ditto.

2011-11-29  Roland Steiner  <rolandsteiner@chromium.org>

        <style scoped>: add ENABLE(STYLE_SCOPED) flag to WebKit
        https://bugs.webkit.org/show_bug.cgi?id=72848

        Reviewed by Dimitri Glazkov.

        * features.gypi:

2011-11-28  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Create CCDamageTracker class to determine regions of change for a surface.
        https://bugs.webkit.org/show_bug.cgi?id=72520

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCDamageTrackerTest.cpp: Added.
        (WebKitTests::executeCalculateDrawTransformsAndVisibility):
        (WebKitTests::emulateDrawingOneFrame):
        (WebKitTests::createTestTreeWithOneSurface):
        (WebKitTests::createTestTreeWithTwoSurfaces):
        (WebKitTests::createAndSetUpTestTreeWithOneSurface):
        (WebKitTests::createAndSetUpTestTreeWithTwoSurfaces):
        (WebKitTests::TEST_F):
        * tests/CCLayerImplTest.cpp:
        (WebCore::TEST):
        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebCore::TEST):
        * tests/CCLayerTreeTestCommon.h: Added.
        * tests/CCRenderSurfaceTest.cpp:
        (WebCore::TEST):
        * tests/LayerChromiumTest.cpp:

2011-11-28  Jon Lee  <jonlee@apple.com>

        Possible fix for test failures in r101307.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):

2011-11-28  Jon Lee  <jonlee@apple.com>

        Create skeleton framework for notifications support in WK2
        https://bugs.webkit.org/show_bug.cgi?id=73253
        <rdar://problem/10356943>

        Reviewed by Sam Weinig.

        Remove notificationPresenter() from the chrome client, since it is now managed by
        the notification controller.

        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:
        * src/WebNotification.cpp:
        (WebKit::WebNotification::title): Refactoring with NotificationContents conversion to struct.
        (WebKit::WebNotification::body): Ditto.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl): Set notification client in web view's page clients.

2011-11-28  Beth Dakin  <bdakin@apple.com>

        Speculative Chromium build fix.

        * src/ScrollbarGroup.cpp:
        (WebKit::ScrollbarGroup::scrollbarStyleChanged):
        * src/ScrollbarGroup.h:

2011-11-28  Dana Jansens  <danakj@chromium.org>

        FloatQuad::isRectilinear() returns false for 180degree rotations
        https://bugs.webkit.org/show_bug.cgi?id=73040

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/FloatQuadTest.cpp: Added.
        (WebCore::TEST):

2011-11-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r101273.
        http://trac.webkit.org/changeset/101273
        https://bugs.webkit.org/show_bug.cgi?id=73244

        multiple test failures and timeouts (Requested by tony^work on
        #webkit).

        * WebKit.gyp:

2011-11-28  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Fix broken DRT build for Aura Linux
        https://bugs.webkit.org/show_bug.cgi?id=72667

        Reviewed by Tony Chang.

        * WebKit.gyp:

2011-11-28  Adam Barth  <abarth@webkit.org>

        [Chromium] Move "final" batch of headers into public/platform
        https://bugs.webkit.org/show_bug.cgi?id=73198

        Reviewed by Darin Fisher.

        This patch moves another group of headers into the platform directory.
        I found these headers by reading through the list of headers and
        coorelating them with WebCore concepts.  This patch doesn't move all
        the APIs that coorespond to WebCore platform concepts because some,
        such as WebFontCache, are not used to support the WebCore platform but
        rather to provide the embedder access to the WebCore concept.  This
        patch should be the last bulk move of headers.

        There are two main groups of headers that make up the bulk of this
        patch:

        1) URLLoader-related headers.
        2) Geometry-related headers.

        * public/WebArrayBufferView.h: Replaced.
        * public/WebBlobData.h: Replaced.
        * public/WebCookie.h: Replaced.
        * public/WebExternalTextureLayer.h: Update include.
        * public/WebFloatPoint.h: Replaced.
        * public/WebFloatQuad.h: Replaced.
        * public/WebFloatRect.h: Replaced.
        * public/WebFrameClient.h: Update include.
        * public/WebHTTPBody.h: Replaced.
        * public/WebHTTPHeaderVisitor.h: Replaced.
        * public/WebHTTPLoadInfo.h: Replaced.
        * public/WebThreadSafeData.h: Replaced.
        * public/WebURLError.h: Replaced.
        * public/WebURLLoadTiming.h: Replaced.
        * public/WebURLLoaderClient.h: Replaced.
        * public/WebURLRequest.h: Replaced.
        * public/WebURLResponse.h: Replaced.
        * public/platform/WebArrayBufferView.h: Copied from Source/WebKit/chromium/public/WebArrayBufferView.h.
        * public/platform/WebBlobData.h: Copied from Source/WebKit/chromium/public/WebBlobData.h.
        * public/platform/WebCookie.h: Copied from Source/WebKit/chromium/public/WebCookie.h.
        * public/platform/WebFloatPoint.h: Copied from Source/WebKit/chromium/public/WebFloatPoint.h.
        * public/platform/WebFloatQuad.h: Copied from Source/WebKit/chromium/public/WebFloatQuad.h.
        * public/platform/WebFloatRect.h: Copied from Source/WebKit/chromium/public/WebFloatRect.h.
        * public/platform/WebHTTPBody.h: Copied from Source/WebKit/chromium/public/WebHTTPBody.h.
        * public/platform/WebHTTPHeaderVisitor.h: Copied from Source/WebKit/chromium/public/WebHTTPHeaderVisitor.h.
        * public/platform/WebHTTPLoadInfo.h: Copied from Source/WebKit/chromium/public/WebHTTPLoadInfo.h.
        * public/platform/WebThreadSafeData.h: Copied from Source/WebKit/chromium/public/WebThreadSafeData.h.
        * public/platform/WebURLError.h: Copied from Source/WebKit/chromium/public/WebURLError.h.
        * public/platform/WebURLLoadTiming.h: Copied from Source/WebKit/chromium/public/WebURLLoadTiming.h.
        * public/platform/WebURLLoader.h: Remove FIXME.
        * public/platform/WebURLLoaderClient.h: Copied from Source/WebKit/chromium/public/WebURLLoaderClient.h.
        * public/platform/WebURLRequest.h: Copied from Source/WebKit/chromium/public/WebURLRequest.h.
        * public/platform/WebURLResponse.h: Copied from Source/WebKit/chromium/public/WebURLResponse.h.

2011-11-25  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: delete WebDevToolsAgent::frontendLoaded
        https://bugs.webkit.org/show_bug.cgi?id=73131

        Now that the method is not used in Chromium we can delete it.

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:

2011-11-28  Adam Barth  <abarth@webkit.org>

        Update some sloppy includes.

        * public/platform/linux/WebSandboxSupport.h:
        * public/platform/win/WebThemeEngine.h:

2011-11-28  Adam Barth  <abarth@webkit.org>

        More forwarding headers.  Turns out I forgot to svn add them.  :(

        * public/android/WebSandboxSupport.h: Added.
        * public/linux/WebFontFamily.h: Added.
        * public/linux/WebSandboxSupport.h: Added.
        * public/mac/WebSandboxSupport.h: Added.
        * public/win/WebSandboxSupport.h: Added.

2011-11-28  Adam Barth  <abarth@webkit.org>

        Add missing forwaring headers.

        * public/android/WebThemeEngine.h: Added.
        * public/linux/WebThemeEngine.h: Added.
        * public/mac/WebThemeEngine.h: Added.
        * public/win/WebThemeEngine.h: Added.

2011-11-27  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Revert r101226.

        * DEPS:

2011-11-27  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Update Chromium revision.

        * DEPS:

2011-11-24  Adam Barth  <abarth@webkit.org>

        [Chromium] Move the next traunch of headers into public/platform
        https://bugs.webkit.org/show_bug.cgi?id=73073

        Reviewed by Darin Fisher.

        These headers are all the forward-declared classes in
        WebKitPlatformSupport (and their dependencies) that wrap concepts in
        WebCore/platform.

        There are a number of forward-declared classes in WebKitPlatformSupport
        that coorespond to WebCore concepts outside of WebCore/platform.  I've
        marked these with FIXME comments.  We'll need to study them in more
        detail to see whether they should move into WebCore/platform or whether
        we need to move them out of WebKitPlaformSupport.h.  (One possible
        resolution might be to introducing a WebKitClientSupport.h to hold
        statics for client concepts).

        * public/WebBlobRegistry.h: Replaced.
        * public/WebCanvas.h: Replaced.
        * public/WebClipboard.h: Replaced.
        * public/WebColor.h: Replaced.
        * public/WebColorName.h: Replaced.
        * public/WebCommonWorkerClient.h:
        * public/WebCompositionUnderline.h:
        * public/WebContentLayerClient.h:
        * public/WebContextMenuData.h:
        * public/WebCookieJar.h: Replaced.
        * public/WebCursorInfo.h:
        * public/WebDragData.h: Replaced.
        * public/WebFileSystem.h: Replaced.
        * public/WebFloatQuad.h:
        * public/WebFont.h:
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        * public/WebGeolocationController.h:
        * public/WebGeolocationPermissionRequestManager.h:
        * public/WebGraphicsContext3D.h: Replaced.
        * public/WebHTTPBody.h:
        * public/WebImage.h: Replaced.
        * public/WebImageDecoder.h:
        * public/WebLayer.h:
        * public/WebMediaPlayer.h:
        * public/WebMediaStreamDescriptor.h: Replaced.
        * public/WebMediaStreamSource.h:
        * public/WebMimeRegistry.h: Replaced.
        * public/WebNonCopyable.h: Replaced.
        * public/WebPeerConnectionHandler.h: Replaced.
        * public/WebPeerConnectionHandlerClient.h: Replaced.
        * public/WebPlugin.h:
        * public/WebPoint.h: Replaced.
        * public/WebRect.h: Replaced.
        * public/WebRegularExpression.h:
        * public/WebScreenInfo.h:
        * public/WebScrollbar.h:
        * public/WebSize.h: Replaced.
        * public/WebSocketStreamError.h: Replaced.
        * public/WebSocketStreamHandle.h: Replaced.
        * public/WebSocketStreamHandleClient.h: Replaced.
        * public/WebThread.h: Replaced.
        * public/WebTouchPoint.h:
        * public/WebURLLoader.h: Replaced.
        * public/WebWidget.h:
        * public/WebWidgetClient.h:
        * public/android/WebSandboxSupport.h: Removed.
        * public/android/WebThemeEngine.h: Removed.
        * public/linux/WebFontFamily.h: Removed.
        * public/linux/WebSandboxSupport.h: Removed.
        * public/linux/WebThemeEngine.h: Removed.
        * public/mac/WebSandboxSupport.h: Removed.
        * public/mac/WebThemeEngine.h: Removed.
        * public/platform/WebBlobRegistry.h: Copied from Source/WebKit/chromium/public/WebBlobRegistry.h.
        * public/platform/WebCanvas.h: Copied from Source/WebKit/chromium/public/WebCanvas.h.
        * public/platform/WebClipboard.h: Copied from Source/WebKit/chromium/public/WebClipboard.h.
        * public/platform/WebColor.h: Copied from Source/WebKit/chromium/public/WebColor.h.
        * public/platform/WebColorName.h: Copied from Source/WebKit/chromium/public/WebColorName.h.
        * public/platform/WebCookieJar.h: Copied from Source/WebKit/chromium/public/WebCookieJar.h.
        * public/platform/WebDragData.h: Copied from Source/WebKit/chromium/public/WebDragData.h.
        * public/platform/WebFileSystem.h: Copied from Source/WebKit/chromium/public/WebFileSystem.h.
        * public/platform/WebGraphicsContext3D.h: Copied from Source/WebKit/chromium/public/WebGraphicsContext3D.h.
        * public/platform/WebImage.h: Copied from Source/WebKit/chromium/public/WebImage.h.
        * public/platform/WebKitPlatformSupport.h:
        * public/platform/WebMediaStreamDescriptor.h: Copied from Source/WebKit/chromium/public/WebMediaStreamDescriptor.h.
        * public/platform/WebMimeRegistry.h: Copied from Source/WebKit/chromium/public/WebMimeRegistry.h.
        * public/platform/WebNonCopyable.h: Copied from Source/WebKit/chromium/public/WebNonCopyable.h.
        * public/platform/WebPeerConnectionHandler.h: Copied from Source/WebKit/chromium/public/WebPeerConnectionHandler.h.
        * public/platform/WebPeerConnectionHandlerClient.h: Copied from Source/WebKit/chromium/public/WebPeerConnectionHandlerClient.h.
        * public/platform/WebPoint.h: Copied from Source/WebKit/chromium/public/WebPoint.h.
        * public/platform/WebRect.h: Copied from Source/WebKit/chromium/public/WebRect.h.
        * public/platform/WebSize.h: Copied from Source/WebKit/chromium/public/WebSize.h.
        * public/platform/WebSocketStreamError.h: Copied from Source/WebKit/chromium/public/WebSocketStreamError.h.
        * public/platform/WebSocketStreamHandle.h: Copied from Source/WebKit/chromium/public/WebSocketStreamHandle.h.
        * public/platform/WebSocketStreamHandleClient.h: Copied from Source/WebKit/chromium/public/WebSocketStreamHandleClient.h.
        * public/platform/WebThread.h: Copied from Source/WebKit/chromium/public/WebThread.h.
        * public/platform/WebURLLoader.h: Copied from Source/WebKit/chromium/public/WebURLLoader.h.
        * public/platform/android: Added.
        * public/platform/android/WebSandboxSupport.h: Copied from Source/WebKit/chromium/public/android/WebSandboxSupport.h.
        * public/platform/android/WebThemeEngine.h: Copied from Source/WebKit/chromium/public/android/WebThemeEngine.h.
        * public/platform/linux: Added.
        * public/platform/linux/WebFontFamily.h: Copied from Source/WebKit/chromium/public/linux/WebFontFamily.h.
        * public/platform/linux/WebSandboxSupport.h: Copied from Source/WebKit/chromium/public/linux/WebSandboxSupport.h.
        * public/platform/linux/WebThemeEngine.h: Copied from Source/WebKit/chromium/public/linux/WebThemeEngine.h.
        (WebKit::WebThemeEngine::paint):
        * public/platform/mac: Added.
        * public/platform/mac/WebSandboxSupport.h: Copied from Source/WebKit/chromium/public/mac/WebSandboxSupport.h.
        * public/platform/mac/WebThemeEngine.h: Copied from Source/WebKit/chromium/public/mac/WebThemeEngine.h.
        (WebKit::WebThemeEngine::paintScrollbarThumb):
        * public/platform/win: Added.
        * public/platform/win/WebSandboxSupport.h: Copied from Source/WebKit/chromium/public/win/WebSandboxSupport.h.
        * public/platform/win/WebThemeEngine.h: Copied from Source/WebKit/chromium/public/win/WebThemeEngine.h.
        * public/win/WebSandboxSupport.h: Removed.
        * public/win/WebThemeEngine.h: Removed.

2011-11-27  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Updating the licences to the correct one.
        https://bugs.webkit.org/show_bug.cgi?id=73129

        Replacing the incorrect ones I have submitted with the correct ones.

        Reviewed by Darin Fisher.

        * bridge/PeerConnectionHandler.cpp:
        * bridge/PeerConnectionHandlerInternal.cpp:
        * bridge/PeerConnectionHandlerInternal.h:
        * public/WebMediaStreamDescriptor.h:
        * public/WebMediaStreamRegistry.h:
        * public/WebMediaStreamSource.h:
        * public/WebPeerConnectionHandler.h:
        * public/WebPeerConnectionHandlerClient.h:
        * src/WebMediaStreamDescriptor.cpp:
        * src/WebMediaStreamRegistry.cpp:
        * src/WebMediaStreamSource.cpp:

2011-11-26  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: remove disconnectFromBackend from the protocol.
        https://bugs.webkit.org/show_bug.cgi?id=73127

        We should instead use InspectorClient::closeInspectorFrontend that would
        be closing the front-end window.

        Reviewed by Yury Semikhatsky.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::closeInspectorFrontend):
        * src/InspectorClientImpl.h:
        * src/InspectorFrontendClientImpl.cpp:
        * src/InspectorFrontendClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::closeInspectorFrontend):
        (WebKit::WebDevToolsAgent::disconnectEventAsText):
        * src/WebDevToolsAgentImpl.h:

2011-11-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r101193.
        http://trac.webkit.org/changeset/101193
        https://bugs.webkit.org/show_bug.cgi?id=73158

        Breaks Windows and Qt minimal. (Requested by pfeldman on
        #webkit).

        * src/InspectorClientImpl.cpp:
        * src/InspectorClientImpl.h:
        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::disconnectFromBackend):
        * src/InspectorFrontendClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::disconnectEventAsText):
        * src/WebDevToolsAgentImpl.h:

2011-11-26  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: remove disconnectFromBackend from the protocol.
        https://bugs.webkit.org/show_bug.cgi?id=73127

        We should instead use InspectorClient::closeInspectorFrontend that would
        be closing the front-end window.

        Reviewed by Yury Semikhatsky.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::closeInspectorFrontend):
        * src/InspectorClientImpl.h:
        * src/InspectorFrontendClientImpl.cpp:
        * src/InspectorFrontendClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::closeInspectorFrontend):
        (WebKit::WebDevToolsAgent::disconnectEventAsText):
        * src/WebDevToolsAgentImpl.h:

2011-11-25  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: assertion failure in InspectorController::restoreInspectorStateFromCookie
        https://bugs.webkit.org/show_bug.cgi?id=73136

        Don't call connectFrontend twice on reattach.

        Reviewed by Pavel Feldman.

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::reattach):

2011-11-25  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Chromium build fix.

        * public/WebDevToolsFrontendClient.h:
        (WebKit::WebDevToolsFrontendClient::sendFrontendLoaded): dowsntream implementation
        with OVERRIDE modifier fails to compile without this stub.

2011-11-25  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: get rid of WebDevToolsFrontendClient::sendFrontendLoaded method
        https://bugs.webkit.org/show_bug.cgi?id=73126

        No need to have a separate client call for this. The front-end can store messages
        which arrive before front-end loaded and dispatch them later. This happens in layout
        tests only by the way as all other messages should be initiated by the front-end code.

        Reviewed by Pavel Feldman.

        * public/WebDevToolsFrontendClient.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::attach):
        (WebKit::WebDevToolsAgentImpl::frontendLoaded):
        * src/WebDevToolsFrontendImpl.cpp:
        (WebKit::WebDevToolsFrontendImpl::WebDevToolsFrontendImpl):
        (WebKit::WebDevToolsFrontendImpl::dispatchOnInspectorFrontend):
        (WebKit::WebDevToolsFrontendImpl::frontendLoaded):
        (WebKit::WebDevToolsFrontendImpl::doDispatchOnInspectorFrontend):
        * src/WebDevToolsFrontendImpl.h:

2011-11-24  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: remove legacy debugger support
        https://bugs.webkit.org/show_bug.cgi?id=73081

        Removed classed providing access to V8 debugging protocol. Clients should
        use Web Inspector protocol instead.

        Reviewed by Pavel Feldman.

        * WebKit.gyp:
        * public/WebDevToolsAgent.h:
        * public/WebDevToolsAgentClient.h:
        * src/DebuggerAgentImpl.cpp: Removed.
        * src/DebuggerAgentImpl.h: Removed.
        * src/DebuggerAgentManager.cpp: Removed.
        * src/DebuggerAgentManager.h: Removed.
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::WebDevToolsAgentImpl):
        (WebKit::WebDevToolsAgentImpl::~WebDevToolsAgentImpl):
        (WebKit::WebDevToolsAgentImpl::attach):
        (WebKit::WebDevToolsAgentImpl::detach):
        (WebKit::WebDevToolsAgentImpl::didNavigate):
        (WebKit::WebDevToolsAgentImpl::didClearWindowObject):
        * src/WebDevToolsAgentImpl.h:

2011-11-25  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Update Chromium deps revision to 111575

        * DEPS:

2011-11-24  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Removed obsolete touchui flag
        https://bugs.webkit.org/show_bug.cgi?id=73067

        Reviewed by Tony Chang.

        * features.gypi:

2011-11-24  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Indexes should be secondarily sorted on primary key
        https://bugs.webkit.org/show_bug.cgi?id=72567

        Reviewed by Tony Chang.

        Updates the IndexDataKey unit tests to include primary keys. The
        deprecated sequenceNumber element of IndexDataKey is still tested,
        although no longer used by callers.

        * tests/IDBLevelDBCodingTest.cpp:
        (IDBLevelDBCoding::TEST):

2011-11-23  Greg Billock  <gbillock@google.com>

        Add simple implementation for web intents chromium API data classes.
        https://bugs.webkit.org/show_bug.cgi?id=73036

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebIntent.h:
        * public/WebIntentServiceInfo.h:
        * src/WebIntent.cpp: Copied from Source/WebKit/chromium/public/WebIntent.h.
        (WebKit::WebIntent::WebIntent):
        (WebKit::WebIntent::action):
        (WebKit::WebIntent::setAction):
        (WebKit::WebIntent::type):
        (WebKit::WebIntent::setType):
        (WebKit::WebIntent::data):
        (WebKit::WebIntent::setData):
        (WebKit::WebIntent::identifier):
        (WebKit::WebIntent::setIdentifier):
        * src/WebIntentServiceInfo.cpp: Copied from Source/WebKit/chromium/public/WebIntentServiceInfo.h.
        (WebKit::WebIntentServiceInfo::WebIntentServiceInfo):
        (WebKit::WebIntentServiceInfo::url):
        (WebKit::WebIntentServiceInfo::setURL):
        (WebKit::WebIntentServiceInfo::title):
        (WebKit::WebIntentServiceInfo::setTitle):
        (WebKit::WebIntentServiceInfo::action):
        (WebKit::WebIntentServiceInfo::setAction):
        (WebKit::WebIntentServiceInfo::type):
        (WebKit::WebIntentServiceInfo::setType):
        (WebKit::WebIntentServiceInfo::disposition):
        (WebKit::WebIntentServiceInfo::setDisposition):

2011-11-23  Adam Barth  <abarth@webkit.org>

        [Chromium] Move WebKitPlatformSupport.h and dependencies to new public/platform directory
        https://bugs.webkit.org/show_bug.cgi?id=73066

        Reviewed by Darin Fisher.

        This patch creates a new subdirectory in the Chromium WebKit API to
        house "platform" header files.  As with the other Platform directories
        in WebKit, the platform directory cannot depend on headers outside of
        platform, but headers outside of platform can depend on platform.

        This patch moves WebKitPlatformSupport and its dependencies into this
        new directory and creates forwarding headers to easy migration for
        embedders of this API.  Over time, we will migrate more headers into
        this folder, as appropriate.

        * public/WebAccessibilityObject.h:
        * public/WebAccessibilityRole.h:
        * public/WebAnimationController.h:
        * public/WebApplicationCacheHost.h:
        * public/WebApplicationCacheHostClient.h:
        * public/WebArrayBufferView.h:
        * public/WebAttribute.h:
        * public/WebAudioBus.h: Replaced.
        * public/WebAudioDevice.h: Replaced.
        * public/WebAudioSourceProvider.h:
        * public/WebBindings.h:
        * public/WebBlob.h:
        * public/WebBlobData.h:
        * public/WebBlobRegistry.h:
        * public/WebCString.h: Replaced.
        * public/WebCache.h:
        * public/WebCanvas.h:
        * public/WebClipboard.h:
        * public/WebColor.h:
        * public/WebCommon.h: Replaced.
        * public/WebCommonWorkerClient.h:
        * public/WebCompositor.h:
        * public/WebConsoleMessage.h:
        * public/WebContentLayer.h:
        * public/WebContextMenuData.h:
        * public/WebCookie.h:
        * public/WebCrossOriginPreflightResultCache.h:
        * public/WebDOMEvent.h:
        * public/WebDOMEventListener.h:
        * public/WebDOMStringList.h:
        * public/WebData.h: Replaced.
        * public/WebDataSource.h:
        * public/WebDatabase.h:
        * public/WebDevToolsAgent.h:
        * public/WebDevToolsAgentClient.h:
        * public/WebDevToolsFrontend.h:
        * public/WebDeviceOrientationClientMock.h:
        * public/WebDeviceOrientationController.h:
        * public/WebDocument.h:
        * public/WebDragData.h:
        * public/WebExternalPopupMenuClient.h:
        * public/WebExternalTextureLayer.h:
        * public/WebFileChooserParams.h:
        * public/WebFileInfo.h:
        * public/WebFileSystem.h:
        * public/WebFileSystemCallbacks.h:
        * public/WebFileSystemEntry.h:
        * public/WebFileUtilities.h:
        * public/WebFileWriter.h:
        * public/WebFileWriterClient.h:
        * public/WebFindOptions.h:
        * public/WebFloatPoint.h:
        * public/WebFloatQuad.h:
        * public/WebFloatRect.h:
        * public/WebFont.h:
        * public/WebFontCache.h:
        * public/WebFontDescription.h:
        * public/WebFormControlElement.h:
        * public/WebFormElement.h:
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        * public/WebGamepad.h: Replaced.
        * public/WebGamepads.h: Replaced.
        * public/WebGeolocationClientMock.h:
        * public/WebGeolocationController.h:
        * public/WebGeolocationError.h:
        * public/WebGeolocationPermissionRequest.h:
        * public/WebGeolocationPermissionRequestManager.h:
        * public/WebGeolocationPosition.h:
        * public/WebGlyphCache.h:
        * public/WebGraphicsContext3D.h:
        * public/WebHTTPBody.h:
        * public/WebHTTPLoadInfo.h:
        * public/WebHistoryItem.h:
        * public/WebIDBCallbacks.h:
        * public/WebIDBCursor.h:
        * public/WebIDBDatabase.h:
        * public/WebIDBDatabaseCallbacks.h:
        * public/WebIDBDatabaseError.h:
        * public/WebIDBFactory.h:
        * public/WebIDBIndex.h:
        * public/WebIDBKey.h:
        * public/WebIDBKeyPath.h:
        * public/WebIDBKeyRange.h:
        * public/WebIDBObjectStore.h:
        * public/WebIDBTransaction.h:
        * public/WebIDBTransactionCallbacks.h:
        * public/WebIconURL.h:
        * public/WebImage.h:
        * public/WebInputEvent.h:
        * public/WebKit.h:
        * public/WebKitPlatformSupport.h: Replaced.
        * public/WebLayer.h:
        * public/WebLayerTreeView.h:
        * public/WebLocalizedString.h: Replaced.
        * public/WebMediaPlayer.h:
        * public/WebMediaStreamDescriptor.h:
        * public/WebMediaStreamRegistry.h:
        * public/WebMediaStreamSource.h:
        * public/WebMenuItemInfo.h:
        * public/WebMessagePortChannel.h:
        * public/WebMimeRegistry.h:
        * public/WebNamedNodeMap.h:
        * public/WebNetworkStateNotifier.h:
        * public/WebNode.h:
        * public/WebNodeCollection.h:
        * public/WebNodeList.h:
        * public/WebNotification.h:
        * public/WebNotificationPresenter.h:
        * public/WebOptionElement.h:
        * public/WebPageSerializer.h:
        * public/WebPasswordFormData.h:
        * public/WebPeerConnectionHandler.h:
        * public/WebPerformance.h:
        * public/WebPlugin.h:
        * public/WebPluginParams.h:
        * public/WebPoint.h:
        * public/WebPopupMenu.h:
        * public/WebPopupMenuInfo.h:
        * public/WebPrivateOwnPtr.h: Replaced.
        * public/WebPrivatePtr.h: Replaced.
        * public/WebRange.h:
        * public/WebRect.h:
        * public/WebRegularExpression.h:
        * public/WebRuntimeFeatures.h:
        * public/WebScriptController.h:
        * public/WebScriptSource.h:
        * public/WebScrollbar.h:
        * public/WebSearchableFormData.h:
        * public/WebSecurityOrigin.h:
        * public/WebSecurityPolicy.h:
        * public/WebSelectElement.h:
        * public/WebSerializedScriptValue.h: Replaced.
        * public/WebSettings.h:
        * public/WebSharedWorker.h:
        * public/WebSharedWorkerRepository.h:
        * public/WebSize.h:
        * public/WebSocket.h:
        * public/WebSocketClient.h:
        * public/WebSocketStreamError.h:
        * public/WebSocketStreamHandle.h:
        * public/WebSocketStreamHandleClient.h:
        * public/WebSpeechInputController.h:
        * public/WebSpeechInputResult.h:
        * public/WebSpellCheckClient.h:
        * public/WebStorageArea.h:
        * public/WebStorageEventDispatcher.h:
        * public/WebStorageNamespace.h:
        * public/WebString.h: Replaced.
        * public/WebTestingSupport.h:
        * public/WebTextCheckingCompletion.h:
        * public/WebTextCheckingResult.h:
        * public/WebTextRun.h:
        * public/WebThread.h:
        * public/WebThreadSafeData.h:
        * public/WebTouchPoint.h:
        * public/WebURL.h: Replaced.
        * public/WebURLError.h:
        * public/WebURLLoadTiming.h:
        * public/WebURLLoader.h:
        * public/WebURLRequest.h:
        * public/WebURLResponse.h:
        * public/WebUserMediaRequest.h:
        * public/WebVector.h: Replaced.
        * public/WebView.h:
        * public/WebViewClient.h:
        * public/WebWidget.h:
        * public/WebWidgetClient.h:
        * public/WebWindowFeatures.h:
        * public/android/WebInputEventFactory.h:
        * public/gtk/WebInputEventFactory.h:
        * public/linux/WebFontFamily.h:
        * public/linux/WebFontInfo.h:
        * public/linux/WebFontRenderStyle.h:
        * public/linux/WebFontRendering.h:
        * public/linux/WebRenderTheme.h:
        * public/linux/WebSandboxSupport.h:
        * public/mac/WebInputEventFactory.h:
        * public/mac/WebScreenInfoFactory.h:
        * public/platform: Added.
        * public/platform/WebAudioBus.h: Copied from Source/WebKit/chromium/public/WebAudioBus.h.
        * public/platform/WebAudioDevice.h: Copied from Source/WebKit/chromium/public/WebAudioDevice.h.
        * public/platform/WebCString.h: Copied from Source/WebKit/chromium/public/WebCString.h.
        * public/platform/WebCommon.h: Copied from Source/WebKit/chromium/public/WebCommon.h.
        * public/platform/WebData.h: Copied from Source/WebKit/chromium/public/WebData.h.
        * public/platform/WebGamepad.h: Copied from Source/WebKit/chromium/public/WebGamepad.h.
        * public/platform/WebGamepads.h: Copied from Source/WebKit/chromium/public/WebGamepads.h.
        * public/platform/WebKitPlatformSupport.h: Copied from Source/WebKit/chromium/public/WebKitPlatformSupport.h.
        * public/platform/WebLocalizedString.h: Copied from Source/WebKit/chromium/public/WebLocalizedString.h.
        * public/platform/WebPrivateOwnPtr.h: Copied from Source/WebKit/chromium/public/WebPrivateOwnPtr.h.
        * public/platform/WebPrivatePtr.h: Copied from Source/WebKit/chromium/public/WebPrivatePtr.h.
        * public/platform/WebSerializedScriptValue.h: Copied from Source/WebKit/chromium/public/WebSerializedScriptValue.h.
        * public/platform/WebString.h: Copied from Source/WebKit/chromium/public/WebString.h.
        * public/platform/WebURL.h: Copied from Source/WebKit/chromium/public/WebURL.h.
        * public/platform/WebVector.h: Copied from Source/WebKit/chromium/public/WebVector.h.
        * public/win/WebInputEventFactory.h:
        * public/win/WebScreenInfoFactory.h:
        * public/x11/WebScreenInfoFactory.h:

2011-11-23  Adam Barth  <abarth@webkit.org>

        [Chromium] Remove unused WebSecurityOrigin::isEmpty from WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=73065

        Reviewed by Eric Seidel.

        This API no longer has any callers.

        * public/WebSecurityOrigin.h:
        * src/WebSecurityOrigin.cpp:
        (WebKit::WebSecurityOrigin::isUnique):

2011-11-23  Dmitry Lomov  <dslomov@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=73054
        [V8][Chromium] Add list of transferred ArrayBuffers to SerializedScriptValue::create.

        Reviewed by David Levin.

        * src/WebSerializedScriptValue.cpp:
        (WebKit::WebSerializedScriptValue::serialize):

2011-11-23  Ami Fischman  <fischman@chromium.org>

        Teach VideoLayerChromium how to render native texture (to support HW video decode).
        https://bugs.webkit.org/show_bug.cgi?id=73043

        Reviewed by Kenneth Russell.

        * public/WebVideoFrame.h:
        * src/VideoFrameChromiumImpl.cpp:
        (WebKit::VideoFrameChromiumImpl::textureId):
        * src/VideoFrameChromiumImpl.h:

2011-11-23  Vincent Scheib  <scheib@chromium.org>

        Pointer Lock: Plumb movement coordinates from PlatformMouseEvent to MouseEvents.
        https://bugs.webkit.org/show_bug.cgi?id=73031

        Reviewed by Dimitri Glazkov.

        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformMouseEventBuilder::PlatformMouseEventBuilder):

2011-11-23  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Missing WEBKIT_EXPORT in WebMediaStreamRegistry
        https://bugs.webkit.org/show_bug.cgi?id=73010

        Reviewed by Darin Fisher.

        * public/WebMediaStreamRegistry.h:

2011-11-23  Scott Graham  <scottmg@chromium.org>

        Adding gamepad support
        https://bugs.webkit.org/show_bug.cgi?id=69451

        Add implementation of sampleGamepads in Chromium platform. Retrieves
        gamepad data from Chromium port and converts to DOM format, i.e.
        GamepadList.

        Reviewed by Darin Fisher.

        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::sampleGamepads):

2011-11-23  Dmitry Lomov  <dslomov@google.com>

        Get rid of WebCore dependencies from TypedArray implementation types
        https://bugs.webkit.org/show_bug.cgi?id=72783
        Reviewed by David Levin.

        * src/WebArrayBufferView.cpp: WebCore replaced with WTF

2011-11-23  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Adding embedding code for GetUserMedia
        https://bugs.webkit.org/show_bug.cgi?id=71678

        This patch includes a fix for https://bugs.webkit.org/show_bug.cgi?id=72925.

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebUserMediaClient.h: Added.
        (WebKit::WebUserMediaClient::~WebUserMediaClient):
        * public/WebUserMediaRequest.h: Added.
        (WebKit::WebUserMediaRequest::WebUserMediaRequest):
        (WebKit::WebUserMediaRequest::~WebUserMediaRequest):
        (WebKit::WebUserMediaRequest::operator=):
        (WebKit::WebUserMediaRequest::isNull):
        (WebKit::operator==):
        * public/WebViewClient.h:
        (WebKit::WebViewClient::userMediaClient):
        * src/UserMediaClientImpl.cpp: Added.
        (WebKit::UserMediaClientImpl::UserMediaClientImpl):
        (WebKit::UserMediaClientImpl::pageDestroyed):
        (WebKit::UserMediaClientImpl::requestUserMedia):
        (WebKit::UserMediaClientImpl::cancelUserMediaRequest):
        * src/UserMediaClientImpl.h: Added.
        * src/WebUserMediaRequest.cpp: Added.
        (WebKit::WebUserMediaRequest::WebUserMediaRequest):
        (WebKit::WebUserMediaRequest::reset):
        (WebKit::WebUserMediaRequest::audio):
        (WebKit::WebUserMediaRequest::video):
        (WebKit::WebUserMediaRequest::cameraPreferenceUser):
        (WebKit::WebUserMediaRequest::cameraPreferenceEnvironment):
        (WebKit::WebUserMediaRequest::securityOrigin):
        (WebKit::WebUserMediaRequest::requestSucceeded):
        (WebKit::WebUserMediaRequest::requestFailed):
        (WebKit::WebUserMediaRequest::equals):
        (WebKit::WebUserMediaRequest::assign):
        (WebKit::WebUserMediaRequest::operator UserMediaRequest*):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        * src/WebViewImpl.h:

2011-11-23  Antoine Labour  <piman@chromium.org>

        [chromium] Expose showFPSCounter and showPlatformLayerTree in WebLayerTreeView::Settings
        https://bugs.webkit.org/show_bug.cgi?id=72973

        Reviewed by Darin Fisher.

        * public/WebLayerTreeView.h:
        (WebKit::WebLayerTreeView::Settings::Settings):
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):

2011-11-22  Dirk Pranke  <dpranke@chromium.org>

        Roll DEPS to r111325 to fix an issue with the linux build

        https://bugs.webkit.org/show_bug.cgi?id=73004

        Unreviewed, build fix.

        There appears to be a bug in the Makefile generator for gyp
        that is causing make to not rebuild DRT on Linux.

        * DEPS:

2011-11-22  Kenneth Russell  <kbr@google.com>

        [chromium] Support Core Animation plugins in compositor
        https://bugs.webkit.org/show_bug.cgi?id=72921

        Reviewed by Stephen White.

        Added IOSurface support to WebPluginContainer. This code path is
        used only on Mac OS X, but is defined in the header on all
        platforms for simplicity.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::texImageIOSurface2DCHROMIUM):
        * public/WebPluginContainer.h:
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::texImageIOSurface2DCHROMIUM):
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DPrivate.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setBackingIOSurfaceId):
        (WebKit::WebPluginContainerImpl::platformLayer):
        (WebKit::WebPluginContainerImpl::handleKeyboardEvent):
        * src/WebPluginContainerImpl.h:

2011-11-22  Daniel Cheng  <dcheng@chromium.org>

        [chromium] Fix plumbing for differentiating between clipboard/selection pastes.
        https://bugs.webkit.org/show_bug.cgi?id=72056

        Reviewed by tony@chromium.org.

        Add a buffer parameter when retrieving the clipboard sequence number.

        * public/WebClipboard.h:
        (WebKit::WebClipboard::sequenceNumber):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::clipboardSequenceNumber):

2011-11-22  Greg Billock  <gbillock@google.com>

        Empty API for web intents
        https://bugs.webkit.org/show_bug.cgi?id=69870

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebIntent.h: Added.
        * public/WebIntentServiceInfo.h: Added.
        * public/WebFrame.h:
        * public/WebFrameClient.h:

2011-11-22  Scott Graham  <scottmg@chromium.org>

        Roll Chromium DEPS
        https://bugs.webkit.org/show_bug.cgi?id=72972

        Add dbus in Chromium as pulled dep and update to HEAD.

        Reviewed by Dirk Pranke.

        * DEPS:

2011-11-22  Dirk Pranke  <dpranke@chromium.org>

        Roll Chromium DEPS to r110960 and set the disable_nacl flag.
        https://bugs.webkit.org/show_bug.cgi?id=72911

        Unreviewed, build fix.

        ppapi starts to depend on the NaCl gyp files as of r109739, so
        we need to pass disable_nacl when running gyp to avoid pulling
        in too much of NaCl.

        * DEPS:
        * gyp_webkit:

2011-11-22  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: [chromium] fix internactive ui test for scripts panel.
        https://bugs.webkit.org/show_bug.cgi?id=72935

        Reviewed by Yury Semikhatsky.

        * src/js/Tests.js:
        (.TestSuite.prototype.testScriptsTabIsPopulatedOnInspectedPageRefresh.waitUntilScriptIsParsed):

2011-11-22  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: remove Inspector::bringToFront from the protocol.
        https://bugs.webkit.org/show_bug.cgi?id=72937

        Reviewed by Yury Semikhatsky.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::bringFrontendToFront):
        * src/InspectorClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::bringFrontendToFront):
        * src/WebDevToolsAgentImpl.h:

2011-11-17  Nat Duca  <nduca@chromium.org>

        [chromium] Route willDraw/setNeedsRedraw to CCInputHandler and fix double-drawing issues that result
        https://bugs.webkit.org/show_bug.cgi?id=72688

        Reviewed by James Robinson.

        * src/WebCompositorImpl.cpp:
        (WebCore::CCInputHandler::create):
        (WebKit::WebCompositorImpl::WebCompositorImpl):
        (WebKit::WebCompositorImpl::handleInputEvent):
        (WebKit::WebCompositorImpl::willDraw):
        * src/WebCompositorImpl.h:
        (WebKit::WebCompositorImpl::create):
        * tests/CCFrameRateControllerTest.cpp:
        (WebKitTests::FakeCCFrameRateControllerClient::beginFrame):
        * tests/CCSchedulerStateMachineTest.cpp:
        (WebCore::TEST):
        * tests/CCSchedulerTest.cpp:
        (WebKitTests::SchedulerClientThatSetNeedsDrawInsideDraw::SchedulerClientThatSetNeedsDrawInsideDraw):
        (WebKitTests::SchedulerClientThatSetNeedsDrawInsideDraw::setScheduler):
        (WebKitTests::SchedulerClientThatSetNeedsDrawInsideDraw::numDraws):
        (WebKitTests::SchedulerClientThatSetNeedsDrawInsideDraw::hasMoreResourceUpdates):
        (WebKitTests::SchedulerClientThatSetNeedsDrawInsideDraw::scheduledActionBeginFrame):
        (WebKitTests::SchedulerClientThatSetNeedsDrawInsideDraw::scheduledActionDrawAndSwap):
        (WebKitTests::SchedulerClientThatSetNeedsDrawInsideDraw::scheduledActionUpdateMoreResources):
        (WebKitTests::SchedulerClientThatSetNeedsDrawInsideDraw::scheduledActionCommit):
        (WebKitTests::TEST):

2011-11-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r100970.
        http://trac.webkit.org/changeset/100970
        https://bugs.webkit.org/show_bug.cgi?id=72925

        Caused AssociatedURLLoaderTest.Success to fail (Requested by
        koz on #webkit).

        * WebKit.gyp:
        * public/WebUserMediaClient.h: Removed.
        * public/WebUserMediaRequest.h: Removed.
        * public/WebViewClient.h:
        * src/UserMediaClientImpl.cpp: Removed.
        * src/UserMediaClientImpl.h: Removed.
        * src/WebUserMediaRequest.cpp: Removed.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        * src/WebViewImpl.h:

2011-11-21  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Adding embedding code for GetUserMedia
        https://bugs.webkit.org/show_bug.cgi?id=71678

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebUserMediaClient.h: Added.
        (WebKit::WebUserMediaClient::~WebUserMediaClient):
        * public/WebUserMediaRequest.h: Added.
        (WebKit::WebUserMediaRequest::WebUserMediaRequest):
        (WebKit::WebUserMediaRequest::~WebUserMediaRequest):
        (WebKit::WebUserMediaRequest::operator=):
        (WebKit::WebUserMediaRequest::isNull):
        (WebKit::operator==):
        * public/WebViewClient.h:
        (WebKit::WebViewClient::userMediaClient):
        * src/UserMediaClientImpl.cpp: Added.
        (WebKit::UserMediaClientImpl::UserMediaClientImpl):
        (WebKit::UserMediaClientImpl::pageDestroyed):
        (WebKit::UserMediaClientImpl::requestUserMedia):
        (WebKit::UserMediaClientImpl::cancelUserMediaRequest):
        * src/UserMediaClientImpl.h: Added.
        * src/WebUserMediaRequest.cpp: Added.
        (WebKit::WebUserMediaRequest::WebUserMediaRequest):
        (WebKit::WebUserMediaRequest::reset):
        (WebKit::WebUserMediaRequest::audio):
        (WebKit::WebUserMediaRequest::video):
        (WebKit::WebUserMediaRequest::cameraPreferenceUser):
        (WebKit::WebUserMediaRequest::cameraPreferenceEnvironment):
        (WebKit::WebUserMediaRequest::securityOrigin):
        (WebKit::WebUserMediaRequest::requestSucceeded):
        (WebKit::WebUserMediaRequest::requestFailed):
        (WebKit::WebUserMediaRequest::equals):
        (WebKit::WebUserMediaRequest::assign):
        (WebKit::WebUserMediaRequest::operator PassRefPtr<UserMediaRequest>):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        * src/WebViewImpl.h:

2011-11-21  James Robinson  <jamesr@chromium.org>

        [chromium] Fix tiler initialization in TiledLayerChromiumTest
        https://bugs.webkit.org/show_bug.cgi?id=72915

        Reviewed by Kenneth Russell.

        Setting the tile size or tiling option after the tiler is created invalidates it, and by default the newly
        created tiler will have border texels so the test doesn't pass. Switch things around in the test so the tiler
        is created only after all the options are set, which is closer to what the real code does.

        * tests/TiledLayerChromiumTest.cpp:
        (WTF::FakeTiledLayerChromium::FakeTiledLayerChromium):

2011-11-21  James Robinson  <jamesr@chromium.org>

        Fix chromium compile bustage - base interface added a parameter so my fake wasn't actually implementing it.

        * tests/TiledLayerChromiumTest.cpp:
        (WTF::FakeLayerTextureUpdater::prepareToUpdate):

2011-11-21  James Robinson  <jamesr@chromium.org>

        [chromium] Avoid pushing dirty tiles to the impl layer
        https://bugs.webkit.org/show_bug.cgi?id=72765

        Reviewed by Kenneth Russell.

        Add unit test for TiledLayerChromium's tile pushing behavior. Requires a fair amount of fake classes. If these
        fakes are useful in other tests, they should be moved to a shared location.

        * WebKit.gypi:
        * tests/TiledLayerChromiumTest.cpp: Added.
        (::FakeTextureAllocator::createTexture):
        (::FakeTextureAllocator::deleteTexture):
        (::FakeLayerTextureUpdater::FakeLayerTextureUpdater):
        (::FakeLayerTextureUpdater::~FakeLayerTextureUpdater):
        (::FakeLayerTextureUpdater::orientation):
        (::FakeLayerTextureUpdater::sampledTexelFormat):
        (::FakeLayerTextureUpdater::prepareToUpdate):
        (::FakeLayerTextureUpdater::updateTextureRect):
        (::FakeCCTiledLayerImpl::FakeCCTiledLayerImpl):
        (::FakeCCTiledLayerImpl::~FakeCCTiledLayerImpl):
        (::FakeCCTiledLayerImpl::hasTileAt):
        (::FakeTiledLayerChromium::FakeTiledLayerChromium):
        (::FakeTiledLayerChromium::~FakeTiledLayerChromium):
        (::FakeTiledLayerChromium::invalidateRect):
        (::FakeTiledLayerChromium::prepareToUpdate):
        (::FakeTiledLayerChromium::textureManager):
        (::FakeTiledLayerChromium::createTextureUpdater):
        (::FakeTiledLayerChromium::textureUpdater):
        (::TEST):

2011-11-21  Dominic Mazzoni  <dmazzoni@google.com>

        [Chromium] WebAccessibilityNotification should use AssertMatchingEnums.
        https://bugs.webkit.org/show_bug.cgi?id=72895

        Reviewed by Chris Fleizach.

        * public/WebAccessibilityNotification.h:
        * src/AssertMatchingEnums.cpp:
        * src/ChromeClientImpl.cpp:
        (WebKit::toWebAccessibilityNotification):

2011-11-21  Shinya Kawanaka  <shinyak@google.com>

        Implement a setter for UnifiedTextCheckerEnabled.
        https://bugs.webkit.org/show_bug.cgi?id=72872

        Reviewed by Darin Fisher.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setUnifiedTextCheckerEnabled): Added.
        * src/WebSettingsImpl.h:

2011-11-21  Jochen Eisinger  <jochen@chromium.org>

        Implement Meta referrer
        https://bugs.webkit.org/show_bug.cgi?id=72674

        Reviewed by Adam Barth.

        * WebKit.gyp:
        * public/WebFrame.h:
        * public/WebReferrerPolicy.h: Added.
        * public/WebSecurityPolicy.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::referrerPolicy):
        (WebKit::WebFrameImpl::setReferrerForRequest):
        * src/WebFrameImpl.h:
        * src/WebSecurityPolicy.cpp:
        (WebKit::WebSecurityPolicy::generateReferrerHeader):

2011-11-21  Dominic Mazzoni  <dmazzoni@google.com>

        Accessibility: Multiselect list boxes need to report the active option in addition to which items are selected.
        https://bugs.webkit.org/show_bug.cgi?id=72479

        Reviewed by Chris Fleizach.

        Test: accessibility/multiselect-list-reports-active-option.html

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::isSelectedOptionActive):

2011-11-20  Kenichi Ishibashi  <bashi@chromium.org>

        [Chromium] Remove old getFontFamilyForCharacters() and familyForChars() APIs.
        https://bugs.webkit.org/show_bug.cgi?id=72844

        Removes old APIs for getting font family for given characters.

        Reviewed by Darin Fisher.

        * public/linux/WebFontInfo.h: Removed old familyForChars().
        * public/linux/WebSandboxSupport.h: Removed old getFontFamilyForCharacters() and changed new getFontFamilyForCharacters() to be a pure virtual function.
        * src/linux/WebFontInfo.cpp: Removes old familyForChars().

2011-10-17  Antonio Gomes  <agomes@rim.com>

        Pass a Frame* parameter in EditorClient::respondToChangedSelection
        https://bugs.webkit.org/show_bug.cgi?id=70248

        Reviewed by Ryosuke Niwa.

        * src/EditorClientImpl.cpp: Make use of the newly added Frame* parameter.
        (WebKit::EditorClientImpl::respondToChangedSelection):
        * src/EditorClientImpl.h: Change the method signature, as per base class change.

2011-11-20  Adam Barth  <abarth@webkit.org>

        Add WebNode::hasEventListeners for Android
        https://bugs.webkit.org/show_bug.cgi?id=72817

        Reviewed by Darin Fisher.

        Expose this EventTarget interface in the Chromium WebKit API for use by
        Android.

        * public/WebNode.h:
        * src/WebNode.cpp:
        (WebKit::WebNode::hasEventListeners):

2011-11-20  Adam Barth  <abarth@webkit.org>

        [Chromium] Add GestureFlingStart and GestureFlingCancel to WebGestureEvent for Android
        https://bugs.webkit.org/show_bug.cgi?id=72819

        Reviewed by Darin Fisher.

        These gesture types are used with FlingAnimator for scrolling.

        * public/WebInputEvent.h:
        (WebKit::WebInputEvent::isScrollGestureEventType):
        (WebKit::WebGestureEvent::WebGestureEvent):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):

2011-11-20  Adam Barth  <abarth@webkit.org>

        [Chromium] Add WebInputEventFactory for Android
        https://bugs.webkit.org/show_bug.cgi?id=67890

        Reviewed by Darin Fisher.

        Like every Chromium OS, Android needs a WebInputFactory.

        * WebKit.gyp:
        * public/android/WebInputEventFactory.h: Added.
        * src/android/WebInputEventFactory.cpp: Added.

2011-11-19  Nat Duca  <nduca@chromium.org>

        Unreviewed, rolling out r100854.
        http://trac.webkit.org/changeset/100854

        Rollout DEPS roll. Made chromium bots cry.

        * DEPS:

2011-11-19  Nat Duca  <nduca@chromium.org>

        Unreviewed.  Rolled DEPS 109696->110838

        * DEPS:

2011-11-19  Adam Barth  <abarth@webkit.org>

        Integrate Source/WTF with the Chromium build system
        https://bugs.webkit.org/show_bug.cgi?id=72790

        Reviewed by Eric Seidel.

        Add a dependency on the new WTF.

        * WebKit.gyp:

2011-11-18  Takashi Toyoshima  <toyoshim@chromium.org>

        [Chromium] [WebSocket] export WebSocketChannel interface for plugins
        https://bugs.webkit.org/show_bug.cgi?id=72016

        Add WebSocket and WebSocketClient to WebKit API.

        Currently, only WebSocketStreamHandle class is exported to WebKit API.
        WebSocketStreamHandle implements bi-directional communication ports.
        If plugins handles the WebSocket protocol, WebSocketChannel and
        WebSocketChannelClient must be exported as WebSocket because they are
        the classes which implement the WebSocket protocol stack.

        Normally, we use WebWebSocketChannel and WebWebSocketChannelClient as
        their class names. But here we use just WebSocket and WebSocketClient
        because of avoiding WebWeb prefix and class name confliction on
        header include.

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebSocket.h: Added.
        (WebKit::WebSocket::~WebSocket):
        * public/WebSocketClient.h: Added.
        (WebKit::WebSocketClient::~WebSocketClient):
        * src/WebRuntimeFeatures.cpp: Insert websockets directory to include path in order to avoid filename confliction.
        (WebKit::WebRuntimeFeatures::enableSockets): Use WebCore namespace explicitly.
        * src/WebSocket.cpp: Added.
        (WebKit::WebSocket::create):
        * src/WebSocketImpl.cpp: Added.
        (WebKit::WebSocketImpl::WebSocketImpl):
        (WebKit::WebSocketImpl::~WebSocketImpl):
        (WebKit::WebSocketImpl::connect):
        (WebKit::WebSocketImpl::subprotocol):
        (WebKit::WebSocketImpl::sendText):
        (WebKit::WebSocketImpl::sendBinary):
        (WebKit::WebSocketImpl::bufferedAmount):
        (WebKit::WebSocketImpl::close):
        (WebKit::WebSocketImpl::fail):
        (WebKit::WebSocketImpl::disconnect):
        (WebKit::WebSocketImpl::didConnect):
        (WebKit::WebSocketImpl::didReceiveMessage):
        (WebKit::WebSocketImpl::didReceiveBinaryData):
        (WebKit::WebSocketImpl::didReceiveMessageError):
        (WebKit::WebSocketImpl::didStartClosingHandshake):
        (WebKit::WebSocketImpl::didClose):
        * src/WebSocketImpl.h: Added.
        (WebKit::WebSocketImpl::isNull):

2011-11-18  Alpha Lam  <hclam@chromium.org>

        [chromium] composited layers are blurry with a zoom-in page scale factor
        https://bugs.webkit.org/show_bug.cgi?id=71225

        Reviewed by James Robinson.

        Implements GraphicsLayerClient to return values for pageScaleFactor and deviceScaleFactor. They are used to determine contents scale factor compositer layers.

        * src/PageOverlay.cpp:
        (WebKit::OverlayGraphicsLayerClientImpl::deviceScaleFactor):
        (WebKit::OverlayGraphicsLayerClientImpl::pageScaleFactor):

2011-11-18  Scott Graham  <scottmg@chromium.org>

        IDL changes for gamepad support
        https://bugs.webkit.org/show_bug.cgi?id=71753

        Reviewed by Adam Barth.

        Update to use vendor-prefixed enable.

        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableGamepad):
        (WebKit::WebRuntimeFeatures::isGamepadEnabled):

2011-11-18  Daniel Cheng  <dcheng@chromium.org>

        [chromium] Use correct backing store for ChromiumDataObject in pasteboard writes.
        https://bugs.webkit.org/show_bug.cgi?id=72767

        Reviewed by Tony Chang.

        * src/WebDragData.cpp:
        (WebKit::WebDragData::initialize):
        (WebKit::WebDragData::assign):

2011-10-24  Darin Fisher  <darin@chromium.org>

        [chromium] Improve fullscreen API
        https://bugs.webkit.org/show_bug.cgi?id=70477

        Reviewed by Adam Barth.

        Move fullscreen entry points from WebView to WebWidget since they are
        just about widget geometry.

        Delay webkitfullscreenchange event until we know that we have entered
        fullscreen mode.  This is accomplished by expanding the WebKit APIs to
        differentiate will{Enter,Exit} from did{Enter,Exit} state changes.

        WebViewImpl is forced to keep a reference to the requested fullscreen
        element while we are requesting to enter fullscreen mode.  Once in
        fullscreen mode, we switch to keeping only a reference to the Frame
        containing the fullscreen element, which we drop upon exiting
        fullscreen mode.

        * public/WebView.h:
        * public/WebViewClient.h:
        * public/WebWidget.h:
        (WebKit::WebWidget::willEnterFullScreen):
        (WebKit::WebWidget::didEnterFullScreen):
        (WebKit::WebWidget::willExitFullScreen):
        (WebKit::WebWidget::didExitFullScreen):
        * public/WebWidgetClient.h:
        (WebKit::WebWidgetClient::enterFullScreen):
        (WebKit::WebWidgetClient::exitFullScreen):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::supportsFullscreenForNode):
        (WebKit::ChromeClientImpl::enterFullscreenForNode):
        (WebKit::ChromeClientImpl::exitFullscreenForNode):
        (WebKit::ChromeClientImpl::supportsFullScreenForElement):
        (WebKit::ChromeClientImpl::enterFullScreenForElement):
        (WebKit::ChromeClientImpl::exitFullScreenForElement):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::willEnterFullScreen):
        (WebKit::WebViewImpl::didEnterFullScreen):
        (WebKit::WebViewImpl::willExitFullScreen):
        (WebKit::WebViewImpl::didExitFullScreen):
        (WebKit::WebViewImpl::enterFullScreenForElement):
        (WebKit::WebViewImpl::exitFullScreenForElement):
        * src/WebViewImpl.h:

2011-11-17  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: dispatch messages from the front-end to the backend asynchronously.
        https://bugs.webkit.org/show_bug.cgi?id=72621

        Reviewed by Yury Semikhatsky.

        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::performDisconnectFromBackend):
        * src/InspectorFrontendClientImpl.h:

2011-11-18  Iain Merrick  <husky@google.com>

        [chromium] Pass screen refresh rate into compositor.
        https://bugs.webkit.org/show_bug.cgi?id=71040

        Reviewed by Tony Gentilcore.

        * public/WebScreenInfo.h:
        (WebKit::WebScreenInfo::WebScreenInfo):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::screenRefreshRate):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::runTest):

2011-11-17  Vincent Scheib  <scheib@chromium.org>

        Pointer Lock: Page Settings unecessary
        https://bugs.webkit.org/show_bug.cgi?id=72662

        Reviewed by Darin Fisher.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:

2011-11-17  Alexandre Elias  <aelias@google.com>

        [chromium] Don't clamp minimumPageScaleFactor when doc width is zero
        https://bugs.webkit.org/show_bug.cgi?id=72679

        Reviewed by James Robinson.

        For a brief period during initialization, the document width can be
        zero.  In that situation, don't try to limit minimumPageScaleFactor
        to the document size.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setPageScaleFactorLimits):

2011-11-06  Nat Duca  <nduca@chromium.org>

        [chromium] Fix handling of setNeedsCommit and setNeedsAnimate in threaded mode
        https://bugs.webkit.org/show_bug.cgi?id=71638

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostTest.cpp:
        (TestHooks::animateAndLayout):
        (MockLayerTreeHostClient::animateAndLayout):
        (CCLayerTreeHostTest::postSetNeedsAnimateToMainThread):
        (CCLayerTreeHostTest::dispatchSetNeedsAnimate):
        (CCLayerTreeHostTestSetNeedsAnimate::CCLayerTreeHostTestSetNeedsAnimate):
        (CCLayerTreeHostTestSetNeedsAnimate::beginTest):
        (CCLayerTreeHostTestSetNeedsAnimate::animateAndLayout):
        (CCLayerTreeHostTestSetNeedsAnimate::drawLayersOnCCThread):
        (CCLayerTreeHostTestSetNeedsAnimate::afterTest):

2011-11-17  Elliot Glaysher  <erg@chromium.org>

        [chromium] Don't include internal GTK headers so we build with GTK_DISABLE_SINGLE_INCLUDES

        https://bugs.webkit.org/show_bug.cgi?id=72653

        Reviewed by James Robinson.

        * src/gtk/WebInputEventFactory.cpp:
        (WebKit::gdkStateToWebEventModifiers): Remove a
        GTK_CHECK_VERSION that will always be true, as the oldest
        libgtk we support is 2.18.


2011-11-17  David Reveman  <reveman@chromium.org>

        [Chromium] Calls to paintContentsIfDirty() and updateCompositorResources() should be balanced.
        https://bugs.webkit.org/show_bug.cgi?id=72630

        Reviewed by James Robinson.

        Add test that check if calls to paintContentsIfDirty() and
        updateCompositorResources() are balanced when layer opacity
        changes during paintContent().

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::layerTreeHost):
        (WTF::TestOpacityChangeLayerDelegate::TestOpacityChangeLayerDelegate):
        (WTF::TestOpacityChangeLayerDelegate::paintContents):
        (WTF::TestOpacityChangeLayerDelegate::drawsContent):
        (WTF::TestOpacityChangeLayerDelegate::preserves3D):
        (WTF::TestOpacityChangeLayerDelegate::notifySyncRequired):
        (WTF::ContentLayerChromiumWithUpdateTracking::create):
        (WTF::ContentLayerChromiumWithUpdateTracking::paintContentsCount):
        (WTF::ContentLayerChromiumWithUpdateTracking::resetPaintContentsCount):
        (WTF::ContentLayerChromiumWithUpdateTracking::updateCount):
        (WTF::ContentLayerChromiumWithUpdateTracking::resetUpdateCount):
        (WTF::ContentLayerChromiumWithUpdateTracking::paintContentsIfDirty):
        (WTF::ContentLayerChromiumWithUpdateTracking::updateCompositorResources):
        (WTF::ContentLayerChromiumWithUpdateTracking::ContentLayerChromiumWithUpdateTracking):
        (WTF::CCLayerTreeHostTestOpacityChange::CCLayerTreeHostTestOpacityChange):
        (WTF::CCLayerTreeHostTestOpacityChange::beginTest):
        (WTF::CCLayerTreeHostTestOpacityChange::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestOpacityChange::afterTest):
        (WTF::TEST_F):

2011-11-17  Peter Kasting  <pkasting@google.com>

        Unreviewed, rolling out r100676.
        http://trac.webkit.org/changeset/100676
        https://bugs.webkit.org/show_bug.cgi?id=72393

        Looks like r100572 was not the source of the crashes.

        * src/js/DevTools.js:

2011-11-17  Peter Kasting  <pkasting@google.com>

        Unreviewed, rolling out r100572.
        https://bugs.webkit.org/show_bug.cgi?id=72393
        https://bugs.webkit.org/show_bug.cgi?id=72651

        May have caused seg faults on Chromium Linux dbg bot.

        * src/js/DevTools.js:

2011-11-17  Adrienne Walker  <enne@google.com>

        [chromium] Implicitly skip render surfaces that won't be drawn
        https://bugs.webkit.org/show_bug.cgi?id=71038

        Update a test that depends on a layer not getting removed.

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebCore::TEST):

2011-11-17  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Remove onlineDetectionEnabled from Preferences
        https://bugs.webkit.org/show_bug.cgi?id=72617

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:

2011-11-17  Kenichi Ishibashi  <bashi@chromium.org>

        [chromium] don't call fontconfig twice in complex text path
        https://bugs.webkit.org/show_bug.cgi?id=38701

        Reviewed by Tony Chang.

        Add new API for getFamilyForChars() so that keeping correct font mapping of the given characters.

        * public/linux/WebFontFamily.h: Added.
        * public/linux/WebFontInfo.h: Add a new API.
        * public/linux/WebSandboxSupport.h:
        (WebKit::WebSandboxSupport::getFontFamilyForCharacters): Ditto.
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::getFontFamilyForCharacters): Ditto.
        * src/linux/WebFontInfo.cpp:
        (WebKit::WebFontInfo::familyForChars): Modified to get weight and italic properties of the font. Old API uses new API internally.

2011-11-17  Adam Barth  <abarth@webkit.org>

        [Chromium] Introduce WebSecurityOrigin::isUnique in preparation for removing WebSecurityOrigin::isEmpty
        https://bugs.webkit.org/show_bug.cgi?id=72580

        Reviewed by Darin Fisher.

        We've removed the concept of empty security origins from WebKit because
        it doesn't exist in the specs.  Now it's time to remove it from the API.

        * public/WebSecurityOrigin.h:
        (WebKit::WebSecurityOrigin::isUnique):

2011-11-15  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: introduce Debugger domain capabilities concept.
        https://bugs.webkit.org/show_bug.cgi?id=72393

        Many of the Preferences that we have in Settings.js and override in DevTools.js
        are really not preferences, but capabilities. Protocol clients should have a way
        of figuring out whether some capability is present before using it.

        Reviewed by Yury Semikhatsky.

        * src/js/DevTools.js:

2011-11-11  Adrienne Walker  <enne@google.com>

        [chromium] Expose mock scrollbars to window.internals
        https://bugs.webkit.org/show_bug.cgi?id=72195

        Reviewed by James Robinson.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setMockScrollbarsEnabled):
        * src/WebSettingsImpl.h:

2011-11-16  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Track property changes for render surfaces.
        https://bugs.webkit.org/show_bug.cgi?id=72521

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCLayerImplTest.cpp:
        (WebCore::TEST):
        * tests/CCRenderSurfaceTest.cpp: Added.
        (WebCore::TEST):

2011-11-16  Alexandre Elias  <aelias@google.com>

        [chromium] Improvements for page scale delta during commit
        https://bugs.webkit.org/show_bug.cgi?id=72471

        Reviewed by James Robinson.

        Page scale now follows the same commit flow as scroll position:
        the delta is folded into m_pageScale at BFAC time, and a "sent" value
        is preserved for temporary use until the commit finishes.

        I also merged setPageScaleFactor and setPageScaleFactorLimits into one
        function on the impl side.  The reason is that setPageFactor must
        be applied after the limits are updated, but on the other hand setting
        the limits first may cause an unnecessary clamp of the scale delta.
        Merging the methods avoids this bind.

        No new tests. (planning to add later: https://bugs.webkit.org/show_bug.cgi?id=71529)

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::applyScrollAndScale):

2011-11-16  Dave Michael  <dmichael@chromium.org>

        Fix up chromium API for creating events, initializing message events
        https://bugs.webkit.org/show_bug.cgi?id=71478

        - Fix a mistake when checking the exception code during event creation.
        - Change WebFrame parameter to pointer so that NULL may be passed.

        This is required for the following chromium CL: http://codereview.chromium.org/8437093/

        Tested in Chromium by:
         ui_test --gtest_filter=*PPAPITest.PostMessage*

        Reviewed by Darin Fisher.

        * public/WebDOMMessageEvent.h:
        * src/WebDOMMessageEvent.cpp:
        (WebKit::WebDOMMessageEvent::initMessageEvent):
        * src/WebDocument.cpp:
        (WebKit::WebDocument::createEvent):

2011-11-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r100438.
        http://trac.webkit.org/changeset/100438
        https://bugs.webkit.org/show_bug.cgi?id=72536

        Broke unit tests (Requested by jamesr_ on #webkit).

        * public/WebScreenInfo.h:
        (WebKit::WebScreenInfo::WebScreenInfo):
        * src/PlatformSupport.cpp:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-11-16  Alexandre Elias  <aelias@google.com>

        [chromium] Add minimum/maximumPageScaleFactor API and clamp fixes
        https://bugs.webkit.org/show_bug.cgi?id=72463

        Reviewed by Darin Fisher.

        We need a way to read back the computed min/max page scale factor in
        order to support the software path, and for some application logic
        such as zooming in/out when tapping form fields.

        I also added a few clamp calls that are needed in some corner cases.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setPageScaleFactor):
        (WebKit::WebViewImpl::setPageScaleFactorLimits):
        (WebKit::WebViewImpl::minimumPageScaleFactor):
        (WebKit::WebViewImpl::maximumPageScaleFactor):
        * src/WebViewImpl.h:

2011-11-16  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Application cache status should be updated after swapCache().
        https://bugs.webkit.org/show_bug.cgi?id=72123

        Reviewed by Pavel Feldman.

        * src/ApplicationCacheHost.cpp:
        (WebCore::ApplicationCacheHost::swapCache):

2011-11-16  Iain Merrick  <husky@google.com>

        [chromium] Pass screen refresh rate into compositor.
        https://bugs.webkit.org/show_bug.cgi?id=71040

        Reviewed by Tony Gentilcore.

        * public/WebScreenInfo.h:
        (WebKit::WebScreenInfo::WebScreenInfo):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::screenRefreshRate):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-11-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r100340.
        http://trac.webkit.org/changeset/100340
        https://bugs.webkit.org/show_bug.cgi?id=72448

        Caused assertion failure in Win dbg canary. (Requested by
        pkasting on #webkit).

        * tests/CCLayerTreeHostImplTest.cpp:

2011-11-15  Nat Duca  <nduca@chromium.org>

        [chromium] Fuse MainThread and CCThread
        https://bugs.webkit.org/show_bug.cgi?id=72426

        Reviewed by James Robinson.

        * WebKit.gyp:
        * WebKit.gypi:
        * src/CCMainThreadImpl.cpp: Removed.
        * src/CCThreadImpl.cpp:
        (WebKit::CCThreadImpl::CCThreadImpl):
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositor::setThread):
        * src/WebKit.cpp:
        (WebKit::initializeWithoutV8):
        (WebKit::shutdown):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::endTest):
        * tests/CCThreadTest.cpp: Removed.

2011-11-15  Jochen Eisinger  <jochen@chromium.org>

        Rename ReferrerPolicy to clarify its meaning
        https://bugs.webkit.org/show_bug.cgi?id=72420

        Reviewed by Nate Chapin.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::loadFrameRequest):

2011-11-15  Anders Carlsson  <andersca@apple.com>

        HostWindow screenToWindow/windowToScreen should be screenToRootView/rootViewToScreen
        https://bugs.webkit.org/show_bug.cgi?id=72397

        Reviewed by Dan Bernstein.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::screenToRootView):
        (WebKit::ChromeClientImpl::rootViewToScreen):
        * src/ChromeClientImpl.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::screenToRootView):
        (WebKit::WebPopupMenuImpl::rootViewToScreen):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::refreshAutofillPopup):

2011-11-15  Scott Graham  <scottmg@chromium.org>

        [Chromium] gamepad changes to the public interface of Chromium port
        https://bugs.webkit.org/show_bug.cgi?id=71518

        Reviewed by Darin Fisher.

        Adds stubs for Chromium port, and defines shared memory structure to
        be used between browser and WebKit.

        Includes just the parts that touch the public interface so they can be
        reviewed separately. See also:
        https://bugs.webkit.org/show_bug.cgi?id=69451 and
        http://codereview.chromium.org/8345027

        * WebKit.gyp:
        * public/WebGamepad.h: Added.
        (WebKit::WebGamepad::WebGamepad):
        * public/WebGamepads.h: Added.
        (WebKit::WebGamepads::WebGamepads):
        * public/WebKitPlatformSupport.h:
        (WebKit::WebKitPlatformSupport::sampleGamepads):
        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableGamepad):
        (WebKit::WebRuntimeFeatures::isGamepadEnabled):

2011-11-14  Anders Carlsson  <andersca@apple.com>

        HostWindow invalidation functions should use root view coordinates
        https://bugs.webkit.org/show_bug.cgi?id=72338

        Reviewed by Dan Bernstein.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::invalidateRootView):
        (WebKit::ChromeClientImpl::invalidateContentsAndRootView):
        (WebKit::ChromeClientImpl::invalidateContentsForSlowScroll):
        * src/ChromeClientImpl.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::invalidateRootView):
        (WebKit::WebPopupMenuImpl::invalidateContentsAndRootView):
        (WebKit::WebPopupMenuImpl::invalidateContentsForSlowScroll):
        * src/WebPopupMenuImpl.h:

2011-11-15  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: move generic code from DevTools.js into the WebCore.
        https://bugs.webkit.org/show_bug.cgi?id=72377

        re-landing r100269.

        Reviewed by Yury Semikhatsky.

        * src/js/DevTools.js:
        (WebInspector.setInspectedTabId):

2011-11-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r100269.
        http://trac.webkit.org/changeset/100269
        https://bugs.webkit.org/show_bug.cgi?id=72383

        "Broke dozens of tests due to exception in loadingFinished"
        (Requested by tonyg-cr on #webkit).

        * src/js/DevTools.js:
        ():
        (devtools.domContentLoaded):
        (WebInspector.UIString):
        (WebInspector.setToolbarColors):
        (WebInspector.resetToolbarColors):
        (.WebInspector.InspectorFrontendHostStub.prototype.inspectedURLChanged):

2011-11-15  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: move generic code from DevTools.js into the WebCore.
        https://bugs.webkit.org/show_bug.cgi?id=72377

        This includes support for themed toolbar, remote debugging routines,
        removes a couple of obsolete overrides from the DevTools.js

        Reviewed by Yury Semikhatsky.

        * src/js/DevTools.js:
        (WebInspector.setInspectedTabId):

2011-11-15  Alpha Lam  <hclam@chromium.org>

        [chromium] scroll deltas are cleared during commit to the main thread
        https://bugs.webkit.org/show_bug.cgi?id=71916

        Reviewed by James Robinson.

        Modify test to verify sentScrollDeltas() values of CCLayerImpl during commit.

        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKit::TEST_F):

2011-11-14  Julien Chaffraix  <jchaffraix@webkit.org>

        [chromium] Fix the build after moving some arrays to WTF
        https://bugs.webkit.org/show_bug.cgi?id=72345

        Reviewed by Dirk Pranke.

        * public/WebArrayBufferView.h: s/WebCore/WTF/g.

2011-11-14  Ian Vollick  <vollick@chromium.org>

        Expose compositeAndReadback in WebLayerTreeView
        https://bugs.webkit.org/show_bug.cgi?id=72188

        Reviewed by Darin Fisher.

        * public/WebLayerTreeView.h:
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::compositeAndReadback):

2011-11-14  Raymond Toy  <rtoy@google.com>

        Add buffering to handle mismatch between hardware buffer size and webaudio render size
        https://bugs.webkit.org/show_bug.cgi?id=71949

        Reviewed by Kenneth Russell.

        * src/AudioDestinationChromium.cpp:
        (WebCore::AudioDestinationChromium::AudioDestinationChromium):
        Create the FIFO for buffering.
        (WebCore::AudioDestinationChromium::render):  Get rid of
        m_renderCountPerCallback and let the FIFO consume function produce
        the appropriate nubmer of calls to the webaudio producer.  Also
        remove the rounding of the callback size so we use whatever the
        hardware returns.  Removed maximumCallbackBufferSize and use
        fifoSize to set the FIFO size.
        (WebCore::AudioDestinationChromium::FIFO::FIFO):
        (WebCore::AudioDestinationChromium::FIFO::consume):
        (WebCore::AudioDestinationChromium::FIFO::findWrapLengths):
        (WebCore::AudioDestinationChromium::FIFO::fillBuffer):
        Implementation of new FIFO class.
        * src/AudioDestinationChromium.h:
        (WebCore::AudioDestinationChromium::FIFO::updateIndex):
        Define new FIFO class.

2011-11-14  Adrienne Walker  <enne@google.com>

        [chromium] Pipe compositor commit/swap up to WebWidgetClient
        https://bugs.webkit.org/show_bug.cgi?id=72041

        Reviewed by Darin Fisher.

        * public/WebWidgetClient.h:
        (WebKit::WebWidgetClient::didCommitAndDrawCompositorFrame):
        (WebKit::WebWidgetClient::didCompleteSwapBuffers):
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::didCommitAndDrawFrame):
        (WebKit::WebLayerTreeViewImpl::didCompleteSwapBuffers):
        * src/WebLayerTreeViewImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::didCommitAndDrawFrame):
        (WebKit::WebViewImpl::didCompleteSwapBuffers):
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHostClient::didCommitAndDrawFrame):
        (WTF::MockLayerTreeHostClient::didCompleteSwapBuffers):

2011-11-14  Tony Chang  <tony@chromium.org>

        Remove the CSS3_FLEXBOX compile time flag and enable on all ports
        https://bugs.webkit.org/show_bug.cgi?id=72196

        Reviewed by Ojan Vafai.

        * features.gypi:

2011-11-14  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] setPageScaleFactor and associated methods should take scaling limits into account
        https://bugs.webkit.org/show_bug.cgi?id=72176

        Reviewed by Darin Fisher.
 
        A couple of changes:
 
        1. setPageScaleFactorLimits now affects the behavior of other scaling methods
           including setPageScaleFactor.
        2. setPageScaleFactorPreservingScrollOffset introduced that scales the scroll offset 
           along with the page, preserving the scroll position within the page bounds.
 

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::computePageScaleFactorWithinLimits):
        (WebKit::WebViewImpl::clampOffsetAtScale):
        (WebKit::WebViewImpl::setPageScaleFactorPreservingScrollOffset):
        (WebKit::WebViewImpl::setPageScaleFactor):
        (WebKit::WebViewImpl::setPageScaleFactorLimits):
        (WebKit::WebViewImpl::applyScrollAndScale):
        * src/WebViewImpl.h:

2011-11-14  Vincent Scheib  <scheib@chromium.org>

        Mouse Lock: Renaming to 'Pointer Lock': Runtime Enable Flags
        https://bugs.webkit.org/show_bug.cgi?id=72303

        Reviewed by Darin Fisher.

        * public/WebRuntimeFeatures.h:
        * public/WebSettings.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enablePointerLock):
        (WebKit::WebRuntimeFeatures::isPointerLockEnabled):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setPointerLockEnabled):
        * src/WebSettingsImpl.h:

2011-11-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r100176.
        http://trac.webkit.org/changeset/100176
        https://bugs.webkit.org/show_bug.cgi?id=72309

        it broke the Mac builds (missing symbols) in a non-obvious way
        (Requested by jchaffraix on #webkit).

        * public/WebGraphicsContext3D.h:
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DPrivate.h:
        * tests/MockWebGraphicsContext3D.h:

2011-11-14  Adam Barth  <abarth@webkit.org>

        Remove the concept of an empty SecurityOrigin
        https://bugs.webkit.org/show_bug.cgi?id=72287

        Reviewed by Eric Seidel.

        I'll rename the API in a subsequent patch.

        * src/WebSecurityOrigin.cpp:
        (WebKit::WebSecurityOrigin::isEmpty):

2011-11-14  Vincent Scheib  <scheib@chromium.org>

        Mouse Lock: Renaming to 'Pointer Lock': ENABLE Flags
        https://bugs.webkit.org/show_bug.cgi?id=72286

        Reviewed by Adam Barth.

        * features.gypi:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableMouseLockAPI):
        (WebKit::WebRuntimeFeatures::isMouseLockAPIEnabled):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setMouseLockEnabled):

2011-11-14  Gregg Tavares  <gman@google.com>

        Implement WEBGL_EXPERIMENTAL_compressed_textures WebGL extension
        https://bugs.webkit.org/show_bug.cgi?id=72086

        Reviewed by Kenneth Russell.

        * public/WebGraphicsContext3D.h:
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DPrivate.h:
        * tests/MockWebGraphicsContext3D.h:
        (WebKit::MockWebGraphicsContext3D::compressedTexImage2D):
        (WebKit::MockWebGraphicsContext3D::compressedTexSubImage2D):

2011-11-14  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Adding a sources() method to WebMediaStreamDescriptor
        https://bugs.webkit.org/show_bug.cgi?id=72116

        Reviewed by Darin Fisher.

        * public/WebMediaStreamDescriptor.h:
        * public/WebMediaStreamSource.h:
        * src/WebMediaStreamDescriptor.cpp:
        (WebKit::WebMediaStreamDescriptor::sources):
        * src/WebMediaStreamSource.cpp:
        (WebKit::WebMediaStreamSource::operator=):

2011-11-14  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Allow for null WebPeerConnectionHandler
        https://bugs.webkit.org/show_bug.cgi?id=72114

        Fixing crash if WebKitPlatformSupport returns a null WebPeerConnectionHandler
        to PeerConnectionHandlerInternal.

        Reviewed by Adam Barth.

        * bridge/PeerConnectionHandlerInternal.cpp:
        (WebCore::PeerConnectionHandlerInternal::PeerConnectionHandlerInternal):
        (WebCore::PeerConnectionHandlerInternal::produceInitialOffer):
        (WebCore::PeerConnectionHandlerInternal::handleInitialOffer):
        (WebCore::PeerConnectionHandlerInternal::processSDP):
        (WebCore::PeerConnectionHandlerInternal::processPendingStreams):
        (WebCore::PeerConnectionHandlerInternal::sendDataStreamMessage):
        (WebCore::PeerConnectionHandlerInternal::stop):
        (WebCore::PeerConnectionHandlerInternal::didCompleteICEProcessing):
        (WebCore::PeerConnectionHandlerInternal::didGenerateSDP):
        (WebCore::PeerConnectionHandlerInternal::didReceiveDataStreamMessage):
        (WebCore::PeerConnectionHandlerInternal::didAddRemoteStream):
        (WebCore::PeerConnectionHandlerInternal::didRemoveRemoteStream):
        * public/WebKitPlatformSupport.h:

2011-11-14  Jonathan Backer  <backer@chromium.org>

        [chromium] Plumb through partial swap
        https://bugs.webkit.org/show_bug.cgi?id=72028

        Reviewed by Kenneth Russell.

        * public/WebGraphicsContext3D.h:
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::postSubBufferCHROMIUM):
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DPrivate.h:
        * tests/MockWebGraphicsContext3D.h:
        (WebKit::MockWebGraphicsContext3D::postSubBufferCHROMIUM):

2011-11-14  Iain Merrick  <husky@google.com>

        [chromium] Fix incorrect usage of ASSERT in CCLayerTreeHostTest
        https://bugs.webkit.org/show_bug.cgi?id=72026

        ASSERT is stripped out in release builds so it shouldn't be used
        in unit tests, except when calling debug-only functions like
        isMainThread().

        Replacing with ASSERT_TRUE (or EXPECT_TRUE in constructors, where
        we can't return a value).

        Reviewed by Tony Gentilcore.

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF::CCLayerTreeHostTest::onEndTest):
        (WTF::CCLayerTreeHostTest::dispatchSetNeedsCommit):
        (WTF::CCLayerTreeHostTest::dispatchSetNeedsRedraw):
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::doBeginTest):

2011-11-14  Alexander Pavlov  <apavlov@chromium.org>

        [chromium] r99963 causes inspector/debugger/script-formatter.html to fail text diff
        https://bugs.webkit.org/show_bug.cgi?id=72204

        The concatenate_script_formatter_worker_js action (along with concatenate_heap_snapshot_worker_js)
        did not depend on their 'input_file' files and, hence, did not get invoked on their input_file changes.

        Reviewed by Yury Semikhatsky.

        * WebKit.gyp:

2011-11-13  Nat Duca  <nduca@chromium.org>

        [chromium] LayerRendererChromium::initialize should fail when GaphicsContext3D::makeCurrent fails
        https://bugs.webkit.org/show_bug.cgi?id=72102

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-11-13  Kent Tamura  <tkent@chromium.org>

        [Chromium] Remove WebFileChooserParams::acceptTypes
        https://bugs.webkit.org/show_bug.cgi?id=71998

        Reviewed by Darin Fisher.

        * public/WebFileChooserParams.h: Remove acceptTypes.
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::runOpenPanel): Remove acceptTypes generatio code.

2011-11-11  Nico Weber  <thakis@chromium.org>

        [chromium] Remove 2 static initializers and 3 exit time destructors. Turn on -Wexit-time-destructors.
        https://bugs.webkit.org/show_bug.cgi?id=72146

        Reviewed by Nate Chapin.

        * WebKit.gyp:
        * src/DebuggerAgentManager.cpp:
        (WebKit::DebuggerAgentManager::debugHostDispatchHandler):
        (WebKit::DebuggerAgentManager::onWebViewClosed):
        * src/DebuggerAgentManager.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::keyboardShortcut):
        * src/WebViewImpl.cpp:
        (WebKit::pageGroupLoadDeferrerStack):
        (WebKit::WebView::willEnterModalLoop):
        (WebKit::WebView::didExitModalLoop):

2011-11-11  Nat Duca  <nduca@chromium.org>

        Since GraphicsContext3D::makeContextCurrent can fail, return bool.

        https://bugs.webkit.org/show_bug.cgi?id=72101

        Reviewed by Kenneth Russell.

        * src/GraphicsContext3DChromium.cpp:

2011-11-11  Ojan Vafai  <ojan@chromium.org>

        Unreviewed. Rolled DEPS.
        https://bugs.webkit.org/show_bug.cgi?id=72174

        * DEPS:

2011-11-11  James Robinson  <jamesr@chromium.org>

        Rollout http://trac.webkit.org/changeset/99844
        Solution is more complicated than the problem it was intended to solve.

        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKit::TEST_F):

2011-11-11  Iain Merrick  <husky@google.com>

        [chromium] CCThreadProxy::finishAllRendering hangs if !visible
        https://bugs.webkit.org/show_bug.cgi?id=71920

        Reviewed by James Robinson.

        * tests/CCSchedulerStateMachineTest.cpp:
        (WebCore::TEST):

2011-11-11  Antoine Labour  <piman@chromium.org>

        [chromium] Add translation/scaling to WebExternalTextureLayer
        https://bugs.webkit.org/show_bug.cgi?id=72087

        Reviewed by James Robinson.

        * public/WebExternalTextureLayer.h:
        * src/WebExternalTextureLayer.cpp:
        (WebKit::WebExternalTextureLayer::setUVRect):
        (WebKit::WebExternalTextureLayer::uvRect):

2011-11-11  Adam Klein  <adamk@chromium.org>

        Remove no-op StorageNamespace::unlock method
        https://bugs.webkit.org/show_bug.cgi?id=72181

        Reviewed by Darin Adler.

        * src/StorageNamespaceProxy.cpp:
        * src/StorageNamespaceProxy.h:

2011-11-11  Stephen Chenney  <schenney@chromium.org>

        [Chromium] DRT does not have LayoutTestController.pageSizeAndMarginsInPixels
        https://bugs.webkit.org/show_bug.cgi?id=49257

        Add the WebFrame::getPageProperty method for Chromium.

        Reviewed by Darin Fisher.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::getPageProperty):
        * src/WebFrameImpl.h:

2011-11-11  Jeff Timanus  <twiz@chromium.org>

        [chromium] Patch that implementing the changes required to allow WebGL
        to share its backing store directly with the compositor.
        WebGL rendering contexts create and render to FBOs managed by a
        DrawingBuffer instance. All PlatformLayer lifetime management is
        performed by the DrawingBuffer.
        Changes are only relevant to Chromium ports. Functionality is
        unchanged for other ports.
        https://bugs.webkit.org/show_bug.cgi?id=53201

        Reviewed by Stephen White.

        * src/GraphicsContext3DChromium.cpp: GraphicsContext3DPrivate no longer caches
        the WebGLLayerChromium instance.  Instead, it is accessed via DrawingBuffer instances
        passed as arguments to the necessary routines.
        (WebCore::GraphicsContext3DPrivate::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3DPrivate::paintCompositedResultsToCanvas):
        (WebCore::GraphicsContext3DPrivate::paintRenderingResultsToImageData):
        (WebCore::GraphicsContext3D::~GraphicsContext3D):
        (WebCore::GraphicsContext3D::platformLayer):
        (WebCore::GraphicsContext3D::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3D::paintRenderingResultsToImageData):
        * src/GraphicsContext3DPrivate.h:

2011-11-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r100010.
        http://trac.webkit.org/changeset/100010
        https://bugs.webkit.org/show_bug.cgi?id=72172

        "Broke gclient syncing on the chromium bots." (Requested by
        ojan on #webkit).

        * DEPS:

2011-11-11  Ojan Vafai  <ojan@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-11-11  James Robinson  <jamesr@chromium.org>

        [chromium] Fix CCLayerTreeHost leak in webkit_unit_tests
        https://bugs.webkit.org/show_bug.cgi?id=72081

        Reviewed by Kenneth Russell.

        LayerChromium and CCLayerTreeHosts hold RefPtr<>s to each other, so if
        you do not clear out the layerTreeHost pointer on the LayerChromium
        the layer tree is leaked. The real code does this in WebViewImpl but
        this test was not.

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::doBeginTest):

2011-11-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r99826.
        http://trac.webkit.org/changeset/99826
        https://bugs.webkit.org/show_bug.cgi?id=72109

        "Likely causing test flakiness" (Requested by tonyg-cr on
        #webkit).

        * tests/FrameTestHelpers.cpp:
        (WebKit::FrameTestHelpers::registerMockedURLLoad):
        (WebKit::FrameTestHelpers::createWebViewAndLoad):
        * tests/FrameTestHelpers.h:
        * tests/WebFrameTest.cpp:
        (WebKit::WebFrameTest::registerMockedHttpURLLoad):
        (WebKit::WebFrameTest::registerMockedChromeURLLoad):
        (WebKit::TEST_F):
        * tests/WebViewTest.cpp:
        (WebKit::TEST_F):
        * tests/data/page_with_image.mht: Removed.

2011-11-10  Daniel Cheng  <dcheng@chromium.org>

        [chromium] Add plumbing for JS to write to clipboard in copy/cut events.
        https://bugs.webkit.org/show_bug.cgi?id=71414

        Reviewed by Darin Fisher.

        * public/WebClipboard.h:
        (WebKit::WebClipboard::writeDataObject):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::clipboardWriteDataObject):

2011-11-10  Vsevolod Vlasov  <vsevik@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-11-10  Iain Merrick  <husky@google.com>

        [Chromium] Fix CCLayerTreeHostImplTest::scrollRootCallsCommitAndRedraw
        https://bugs.webkit.org/show_bug.cgi?id=72027

        We weren't calling setScrollable(true) when setting up the test, so
        scroll events were being ignored. Test failed in debug builds, but passed
        in release because we were using ASSERT instead of ASSERT_TRUE.

        Reviewed by Tony Gentilcore.

        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKit::TEST_F):

2011-11-10  Alpha Lam  <hclam@chromium.org>

        [chromium] Scroll deltas are cleared during commit to the main thread
        https://bugs.webkit.org/show_bug.cgi?id=71916

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKit::TEST_F):
        CCLayerTreeHostImplTest.scrollDeltaRepeatedScrolls
        This test is modified to verify that CCLayerTreeHostImpl::processScrollDeltas()
        maintain the current scroll deltas and scroll positions.
        It also verifies that scroll deltas are subtracted correctly by calling
        CCLayerTreeHostCommon::applyScrollAndScale().
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::doBeginTest):
        call setLayerTreeHost() on the root layer.

2011-11-10  Jay Civelli  <jcivelli@chromium.org>

        Fix progress load reporting for MHTML documents.

        MHTML documents containing references to resources they don't include
        never finish loading.
        https://bugs.webkit.org/show_bug.cgi?id=71859

        Reviewed by Adam Barth.

        * tests/FrameTestHelpers.cpp:
        (WebKit::FrameTestHelpers::registerMockedURLLoadAsHTML):
        (WebKit::FrameTestHelpers::registerMockedURLLoad):
        (WebKit::FrameTestHelpers::createWebViewAndLoad):
        * tests/FrameTestHelpers.h:
        * tests/WebFrameTest.cpp:
        (WebKit::WebFrameTest::registerMockedHttpURLLoad):
        (WebKit::WebFrameTest::registerMockedChromeURLLoad):
        (WebKit::TEST_F):
        * tests/WebViewTest.cpp:
        (WebKit::TEST_F):
        * tests/data/page_with_image.mht: Added.

2011-11-09  Tommy Widenflycht  <tommyw@google.com>

        [chromium] MediaStream API: Add WebMediaStreamRegistry
        https://bugs.webkit.org/show_bug.cgi?id=71458

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebMediaStreamRegistry.h: Added.
        * src/WebMediaStreamRegistry.cpp: Added.
        (WebKit::WebMediaStreamRegistry::lookupMediaStreamDescriptor):

2011-11-09  Alexandre Elias  <aelias@google.com>

        [chromium] Add draw-time scale delta to compositor thread
        https://bugs.webkit.org/show_bug.cgi?id=71595

        Reviewed by James Robinson.

        There are two magnify values:
        1. The WebKit-side pageScale value corresponding to the resolution of
           the painted content.
        2. The Impl-side-only scaleDelta value representing the additional
           degree of current magnification, applied as a draw transform.  WebKit
           is never explicitly aware of this value and the only way to change it
           currently is via pinch events (and in the future, double-tap/etc
           events).  At the end of a pinch zoom, we multiply pageScale *
           scaleDelta and tell WebKit to use it as the new pageScale.

        Scroll offsets and max-extents are maintained in pageScale space.
        When the scale changes, we need to take care to convert them to the
        new scale and avoid getting them clamped to the extents at the wrong
        scale.

        I removed maxScrollPosition on the non-impl side because it makes no
        sense to precompute it in the presence of an impl-side zoom.  Replaced
        with a simple 'bool m_scrollable'.

        zoomAnimatorTransform is not used because it currently isn't in the
        branch, and mostly doesn't behave the way we want anyway (it does most
        things in WebKit thread).  We will need to unify these later.

        Also introduce deviceOrPageScaleFactorChanged() call which invalidates
        layers.

        * public/WebLayerTreeViewClient.h:
        * public/WebView.h:
        * src/WebCompositorImpl.cpp:
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::applyScrollAndScale):
        * src/WebLayerTreeViewImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::enableFixedLayoutMode):
        (WebKit::WebViewImpl::setPageScaleFactorLimits):
        (WebKit::WebViewImpl::applyScrollAndScale):
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKit::CCLayerTreeHostImplTest::expectContains):
        (WebKit::TEST_F):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::TestHooks::applyScrollAndScale):
        (WTF::MockLayerTreeHostClient::applyScrollAndScale):
        (WTF::CCLayerTreeHostTestScrollSimple::beginTest):
        (WTF::CCLayerTreeHostTestScrollSimple::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestScrollSimple::applyScrollAndScale):
        (WTF::CCLayerTreeHostTestScrollMultipleRedraw::beginTest):
        (WTF::CCLayerTreeHostTestScrollMultipleRedraw::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestScrollMultipleRedraw::applyScrollAndScale):

2011-11-09  Dominic Mazzoni  <dmazzoni@google.com>

        Fix crash by handling case when AccessibilityObject::lineForPosition
        returns -1.
        https://bugs.webkit.org/show_bug.cgi?id=71561

        Adds layout test: platform/chromium/accessibility/insertion-point-line-number-on-password-crashes.html

        Reviewed by Dimitri Glazkov.

        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::lineBreaks):

2011-11-09  Jay Civelli  <jcivelli@chromium.org>

        Fix MHTML generation to use the QuotedPrintable encoding for text resources.
        This was regressed when we added binary encoding support.
        https://bugs.webkit.org/show_bug.cgi?id=71857

        Reviewed by Adam Barth.

        * tests/WebPageNewSerializerTest.cpp:
        (WebKit::LineReader::LineReader):
        (WebKit::LineReader::getNextLine):
        (WebKit::WebPageNewSerializeTest::setUpCSSTestPage):
        (WebKit::TEST_F):

2011-11-09  Henrik Grunell  <grunell@chromium.org>

        Adding missing implementation of WebMediaStreamDescriptor::label().

        [Chromium] Missing WebMediaStreamDescriptor::label() implementation
        https://bugs.webkit.org/show_bug.cgi?id=71657

        Reviewed by Adam Barth.

        * src/WebMediaStreamDescriptor.cpp:
        (WebKit::WebMediaStreamDescriptor::label):

2011-11-09  Alexei Svitkine  <asvitkine@chromium.org>

        Chromium: Add plumbing to enable dragging dev tools via the empty space on the toolbar.
        https://bugs.webkit.org/show_bug.cgi?id=71842

        These are the only WebKit-side changes needed. The rest will be done on the Chromium side.

        Chromium bug: http://crbug.com/44350

        Reviewed by Pavel Feldman.

        * public/WebDevToolsFrontendClient.h:
        (WebKit::WebDevToolsFrontendClient::moveWindowBy):
        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::moveWindowBy):

2011-11-08  Jay Civelli  <jcivelli@chromium.org>

        Fixes and reenables the WebPageSerializer tests.
        https://bugs.webkit.org/show_bug.cgi?id=71874

        Reviewed by Adam Barth.

        * WebKit.gypi:
        * tests/WebPageNewSerializerTest.cpp:
        (WebKit::TestWebFrameClient::~TestWebFrameClient):
        (WebKit::WebPageNewSerializeTest::SetUp):
        (WebKit::WebPageNewSerializeTest::resourceVectorContains):
        (WebKit::TEST_F):
        * tests/WebPageSerializerTest.cpp:
        (WebKit::WebPageSerializerTest::WebPageSerializerTest):
        (WebKit::WebPageSerializerTest::webVectorContains):
        (WebKit::TEST_F):

2011-11-07  Adam Barth  <abarth@webkit.org>

        Move static "policy" state from SecurityOrigin.cpp to SecurityPolicy.cpp
        https://bugs.webkit.org/show_bug.cgi?id=71755

        Reviewed by Eric Seidel.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setReferrerForRequest):
        * src/WebSecurityPolicy.cpp:
        (WebKit::WebSecurityPolicy::addOriginAccessWhitelistEntry):
        (WebKit::WebSecurityPolicy::removeOriginAccessWhitelistEntry):
        (WebKit::WebSecurityPolicy::resetOriginAccessWhitelists):
        (WebKit::WebSecurityPolicy::shouldHideReferrer):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::initializeMainFrame):

2011-11-08  Nat Duca  <nduca@chromium.org>

        [chromium] When GC3DPrivate::initializExtensions fails, dont keep retrying
        https://bugs.webkit.org/show_bug.cgi?id=71637

        Reviewed by Kenneth Russell.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::initializeExtensions):

2011-11-08  Adam Klein  <adamk@chromium.org>

        Use a typedef for ExceptionCode in all header files instead of including ExceptionCode.h
        https://bugs.webkit.org/show_bug.cgi?id=71845

        Reviewed by Adam Barth.

        * src/SharedWorkerRepository.cpp:

2011-11-08  Fady Samuel  <fsamuel@chromium.org>

        Delete WebViewimpl::scalePage
        https://bugs.webkit.org/show_bug.cgi?id=71711

        Reviewed by Darin Fisher.

        Once this patch lands: http://codereview.chromium.org/8477033

        WebViewImpl::scalePage will no longer be used in Chromium and
        can safely be deleted.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:

2011-11-08  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: implement compound (array) key support
        https://bugs.webkit.org/show_bug.cgi?id=62284

        Reviewed by Tony Chang.

        Extend WebKit API to support Array values as IDBKeys.

        * public/WebIDBKey.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebIDBKey.cpp:
        (WebKit::WebIDBKey::createArray):
        (WebKit::convertFromWebIDBKeyArray):
        (WebKit::convertToWebIDBKeyArray):
        (WebKit::WebIDBKey::assignArray):
        (WebKit::WebIDBKey::array):
        * tests/IDBBindingUtilitiesTest.cpp:
        (WebCore::TEST):
        * tests/IDBLevelDBCodingTest.cpp:
        (IDBLevelDBCoding::createArrayIDBKey):
        (IDBLevelDBCoding::TEST):
        (IDBLevelDBCoding::compareStrings):

2011-11-08  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: display notification in the front-end when inspected worker terminates
        https://bugs.webkit.org/show_bug.cgi?id=71770

        Exposed an API for the browser to notify inspector front-end when inspeced instance
        terminates. It is used now for tracking shared workers termination.

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::createFrontendDisconnectedEvent):

2011-11-08  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: add sanity test for automatic reattach to a page which is reloaded after crash
        https://bugs.webkit.org/show_bug.cgi?id=71786

        Added a test function that checks if console evaluation works after crashed tab reloading.

        Reviewed by Pavel Feldman.

        * src/js/Tests.js:
        (.TestSuite.prototype.testReattachAfterCrash):

2011-11-07  Emil A Eklund  <eae@chromium.org>

        Revert platform and scrolling to ints
        https://bugs.webkit.org/show_bug.cgi?id=71585

        Reviewed by Eric Seidel.

        Replace all uses of LayoutUnit and related types with ints in platform
        and scrolling code.

        * tests/ScrollAnimatorNoneTest.cpp:
        (MockScrollableArea::visibleHeight):
        (MockScrollableArea::visibleWidth):

2011-11-07  Adam Barth  <abarth@webkit.org>

        Move DomainRelaxationForbidden scheme registry to SchemeRegistry
        https://bugs.webkit.org/show_bug.cgi?id=71750

        Reviewed by Eric Seidel.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setDomainRelaxationForbidden):

2011-11-07  Beth Dakin  <bdakin@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=71490
        Support uiStateTransitionProgress for scrollbars
        -and corresponding-
        <rdar://problem/9849612>

        Reviewed by Sam Weinig.

        Scrollbar::mouseUp() now takes a PlatformMouseEvent as a parameter.
        * src/WebScrollbarImpl.cpp:
        (WebKit::WebScrollbarImpl::onMouseUp):

2011-11-07  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Rename WebView::scalePage to WebView::setPageScaleFactor to match WebCore
        https://bugs.webkit.org/show_bug.cgi?id=71485

        Reviewed by Darin Fisher.

        Created new method setPageScaleFactor to replace scalePage to match
        renamed method in WebCore. This change will happen in three stages:

        1. A new method is created called setPageScaleFactor with the same
           functionality as scalePage.
        2. All call sites of scalePage are changed to setPageScaleFactor in the Chromium
           repository.
        3. scalePage is deleted from WebView/WebViewImpl

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::pageScaleFactor):
        (WebKit::WebViewImpl::scalePage):
        (WebKit::WebViewImpl::setPageScaleFactor):
        * src/WebViewImpl.h:

2011-11-07  Jessie Berlin  <jberlin@apple.com>

        Need a way to allow a scheme access to Local Storage and Databases while Private Browsing is
        enabled.
        https://bugs.webkit.org/show_bug.cgi?id=71631

        Reviewed by Jon Honeycutt.

        * src/StorageAreaProxy.h:
        (WebCore::StorageAreaProxy::disabledByPrivateBrowsingInFrame):
        Chromium uses a different method to track its icognito mode, so always return false.

2011-11-07  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: use native worker inspector instead of fake workers
        https://bugs.webkit.org/show_bug.cgi?id=71670

        chrome://workers link is replaced with instructions on discovering shared workers
        in Task Manager.

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:
        ():

2011-11-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-11-05  Daniel Cheng  <dcheng@chromium.org>

        [chromium] Use the security origin instead of the URL when checking notification permissions
        https://bugs.webkit.org/show_bug.cgi?id=71590

        Reviewed by Adam Barth.

        * public/WebNotificationPresenter.h:
        * src/NotificationPresenterImpl.cpp:
        (WebKit::NotificationPresenterImpl::checkPermission):

2011-11-04  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Re-named the original scissorRect to clipRect
        https://bugs.webkit.org/show_bug.cgi?id=71580

        Reviewed by James Robinson.

        * tests/CCLayerImplTest.cpp:
        (WebCore::TEST):
        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebCore::TEST):
        * tests/LayerChromiumTest.cpp:

2011-11-04  Robert Sesek  <rsesek@chromium.org>

        [chromium] Use Chromium's copy of libWebKitSystemInterfaceLeopard.a
        https://bugs.webkit.org/show_bug.cgi?id=71563

        Reviewed by Adam Barth.

        Roll Chromium DEPS r108107:108476 to pull in
        libWebKitSystemInterfaceLeopard.a.

        * DEPS:

2011-11-03  Adrienne Walker  <enne@google.com>

        [chromium] Implement checkerboarding for missing layer tiles
        https://bugs.webkit.org/show_bug.cgi?id=69585

        Reviewed by James Robinson.

        To pipe the background color of the document to the non-composited
        host, set it during paint. This may be more frequent than necessary,
        but it'll catch all style changes.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::nonCompositedContentHost):
        (WebKit::WebViewImplContentPainter::paint):
        * src/WebViewImpl.h:
        * tests/CCLayerImplTest.cpp:
        (WebCore::TEST):

2011-11-04  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Expose deviceScaleFactor to WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=70614

        Reviewed by Darin Fisher.

        This exposes the device scale factor to the Chromium-WebKit API.
        This scale factor is the ratio between the current device's DPI
        and the target device's DPI. 

        For details on how this can be accessed from CSS and javascript, please
        see here:

        http://developer.android.com/guide/webapps/targeting.html#DensityCSS

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::deviceScaleFactor):
        (WebKit::WebViewImpl::setDeviceScaleFactor):
        * src/WebViewImpl.h:

2011-11-03  Adrienne Walker  <enne@google.com>

        [chromium] Fix incorrect visibility/scissor rect for threaded compositing
        https://bugs.webkit.org/show_bug.cgi?id=70962

        Reviewed by James Robinson.

        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::WebLayerTreeViewImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHost::MockLayerTreeHost):

2011-11-02  Xiaomei Ji  <xji@chromium.org>

        Enable ctrl-arrow move cursor by word in visual order in cr-win by command line flag.
        https://bugs.webkit.org/show_bug.cgi?id=71163

        Reviewed by Ryosuke Niwa.

        To minimize the risk to LTR users, we enable this feature first to chromium win
        by command line flag. This and corresponding changset in chromium
        (http://codereview.chromium.org/8400078/)
        should be removed after this feature is enabled without command line flag. 

        The work flow is:
        1. (chromium) adds command line flag --enable-visual-word-movement,
           pass it to WebCore::Settings through WebPreferences.
        2. in FrameSelection::modifyMovingLeft|Right, when 'visualWordMovementEnabled' is true in page's Settings,
           trigger visual word movement instead of logical one.
 
        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setVisualWordMovementEnabled):
        * src/WebSettingsImpl.h:

2011-11-03  Darin Adler  <darin@apple.com>

        Change remaining callers of releaseRef to call leakRef
        https://bugs.webkit.org/show_bug.cgi?id=71422

        * public/WebPrivatePtr.h:
        (WebKit::WebPrivatePtr::WebPrivatePtr):
        (WebKit::WebPrivatePtr::operator=):
        * src/WebDOMEvent.cpp:
        (WebKit::WebDOMEvent::WebDOMEvent):
        * src/WebData.cpp:
        (WebKit::WebData::assign):
        (WebKit::WebData::WebData):
        (WebKit::WebData::operator=):
        * src/WebDragData.cpp:
        (WebKit::WebDragData::initialize):
        (WebKit::WebDragData::WebDragData):
        (WebKit::WebDragData::operator=):
        * src/WebHTTPBody.cpp:
        (WebKit::WebHTTPBody::initialize):
        (WebKit::WebHTTPBody::WebHTTPBody):
        (WebKit::WebHTTPBody::operator=):
        (WebKit::WebHTTPBody::ensureMutable):
        * src/WebNodeCollection.cpp:
        (WebKit::WebNodeCollection::WebNodeCollection):
        * src/WebNodeList.cpp:
        (WebKit::WebNodeList::WebNodeList):
        * src/WebNotification.cpp:
        (WebKit::WebNotification::WebNotification):
        (WebKit::WebNotification::operator=):
        * src/WebRange.cpp:
        (WebKit::WebRange::WebRange):
        (WebKit::WebRange::operator=):
        * src/WebSecurityOrigin.cpp:
        (WebKit::WebSecurityOrigin::WebSecurityOrigin):
        (WebKit::WebSecurityOrigin::operator=):
        * src/WebThreadSafeData.cpp:
        (WebKit::WebThreadSafeData::WebThreadSafeData):
        Use leakRef.

2011-11-02  Darin Adler  <darin@apple.com>

        Change remaining callers of releaseRef to call leakRef
        https://bugs.webkit.org/show_bug.cgi?id=71422

        * public/WebPrivatePtr.h:
        (WebKit::WebPrivatePtr::WebPrivatePtr):
        (WebKit::WebPrivatePtr::operator=):
        * src/WebDOMEvent.cpp:
        (WebKit::WebDOMEvent::WebDOMEvent):
        * src/WebData.cpp:
        (WebKit::WebData::assign):
        (WebKit::WebData::WebData):
        (WebKit::WebData::operator=):
        * src/WebDragData.cpp:
        (WebKit::WebDragData::initialize):
        (WebKit::WebDragData::WebDragData):
        (WebKit::WebDragData::operator=):
        * src/WebHTTPBody.cpp:
        (WebKit::WebHTTPBody::initialize):
        (WebKit::WebHTTPBody::WebHTTPBody):
        (WebKit::WebHTTPBody::operator=):
        (WebKit::WebHTTPBody::ensureMutable):
        * src/WebNodeCollection.cpp:
        (WebKit::WebNodeCollection::WebNodeCollection):
        * src/WebNodeList.cpp:
        (WebKit::WebNodeList::WebNodeList):
        * src/WebNotification.cpp:
        (WebKit::WebNotification::WebNotification):
        (WebKit::WebNotification::operator=):
        * src/WebRange.cpp:
        (WebKit::WebRange::WebRange):
        (WebKit::WebRange::operator=):
        * src/WebSecurityOrigin.cpp:
        (WebKit::WebSecurityOrigin::WebSecurityOrigin):
        (WebKit::WebSecurityOrigin::operator=):
        * src/WebThreadSafeData.cpp:
        (WebKit::WebThreadSafeData::WebThreadSafeData):
        Use leakRef.

2011-11-03  Daniel Cheng  <dcheng@chromium.org>

        [chromium] Remove unused clipboard methods
        https://bugs.webkit.org/show_bug.cgi?id=71512

        Reviewed by Tony Chang.

        * public/WebClipboard.h:
        (WebKit::WebClipboard::getSequenceNumber):
        (WebKit::WebClipboard::readAvailableTypes):
        (WebKit::WebClipboard::writeImage):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::clipboardGetSequenceNumber):
        (WebCore::PlatformSupport::clipboardReadAvailableTypes):

2011-11-03  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Refactor WebFrameImpl::createFrameView() to use Frame:createView
        https://bugs.webkit.org/show_bug.cgi?id=70507

        Reviewed by Darin Fisher.

        No change in functionality except for fixed layout mode. Fixed layout mode has
        not been fully upstreamed yet, so no new tests yet:
        https://bugs.webkit.org/show_bug.cgi?id=70562 will address this.

        This patch also fixes https://bugs.webkit.org/show_bug.cgi?id=70555
        It was decided that fixed layout mode might need to be disabled for some content,
        and so this change enables the embedder to decide whether to enable fixed layout on
        navigation.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):

2011-10-28  Hans Wennborg  <hans@chromium.org>

        IndexedDB: Recycle cursor objects when calling continue()
        https://bugs.webkit.org/show_bug.cgi?id=71115

        Reviewed by Darin Fisher.

        Add the new onSuccessWithContinuation() callback to IDB wrappers.

        * public/WebIDBCallbacks.h:
        (WebKit::WebIDBCallbacks::onSuccessWithContinuation):
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::onSuccessWithContinuation):
        * src/IDBCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onSuccessWithContinuation):
        * src/WebIDBCallbacksImpl.h:

2011-11-02  Pavel Feldman  <pfeldman@google.com>

        Web Inspector [chromium]: fix debug front-end zip generation.
        https://bugs.webkit.org/show_bug.cgi?id=71376

        Reviewed by Yury Semikhatsky.

        * WebKit.gyp:
        * scripts/generate_devtools_zip.py:

2011-11-02  Jon Lee  <jonlee@apple.com>

        Expand DragController to provide more information about the dragging session
        https://bugs.webkit.org/show_bug.cgi?id=71324
        <rdar://problem/10379175>

        Reviewed by Darin Adler.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::dragTargetDragEnterOrOver): The drag operation is contained
        within the new DragSession struct. Minor refactor.

2011-10-31  Nat Duca  <nduca@chromium.org>

        [chromium] Slow down commit and draw rate based on visibility and draw completion
        https://bugs.webkit.org/show_bug.cgi?id=71267

        Reviewed by James Robinson.

        * tests/CCSchedulerStateMachineTest.cpp:
        (WebCore::TEST):
        * tests/CCSchedulerTest.cpp:
        (WebKitTests::FakeCCSchedulerClient::reset):
        (WebKitTests::FakeCCSchedulerClient::setVisible):
        (WebKitTests::FakeCCSchedulerClient::visible):
        (WebKitTests::TEST):

2011-11-02  Tom Sepez  <tsepez@chromium.org>

        XSSAuditor is silent
        https://bugs.webkit.org/show_bug.cgi?id=70973

        Reviewed by Adam Barth.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didDetectXSS):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didDetectXSS):
        * src/FrameLoaderClientImpl.h:

2011-11-02  Jon Lee  <jonlee@apple.com>

        <input=file multiple> default text uses singular instead of plural
        https://bugs.webkit.org/show_bug.cgi?id=71319
        <rdar://problem/10379021>

        Reviewed by Darin Adler.

        * src/LocalizedStrings.cpp:
        (WebCore::fileButtonNoFilesSelectedLabel):

2011-11-02  Andrey Kosyakov  <caseq@chromium.org>

        Unreviewed fix for build failure on chromium shared linux caused by r99020.

        * WebKit.gyp:

2011-11-01  Darin Adler  <darin@apple.com>

        Change HTMLSelectElement::setSelectedIndex to use enums instead of bools
        https://bugs.webkit.org/show_bug.cgi?id=70184

        Reviewed by Kent Tamura.

        * tests/PopupMenuTest.cpp:
        (WebKit::TestPopupMenuClient::valueChanged): Replaced setSelectedIndexByUser
        call with a call to the renamed optionSelectedByUser, also removed one argument.

2011-11-01  Nat Duca  <nduca@chromium.org>

        [chromium] Move resource-releasing logic into CCProxy and cleanup setNeedsCommit
        https://bugs.webkit.org/show_bug.cgi?id=71269

        Reviewed by James Robinson.

        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::composite):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        * tests/CCLayerTreeHostTest.cpp:
        (CCLayerTreeHostTest::postSetNeedsCommitToMainThread):
        (CCLayerTreeHostTest::dispatchSetNeedsCommit):
        (CCLayerTreeHostTestShortlived2::beginTest):
        (CCLayerTreeHostTestCommitingWithContinuousRedraw::beginTest):
        (CCLayerTreeHostTestCommitingWithContinuousRedraw::drawLayersOnCCThread):
        (CCLayerTreeHostTestSetNeedsCommit1::beginTest):
        (CCLayerTreeHostTestSetNeedsCommit2::beginTest):
        (CCLayerTreeHostTestSetNeedsCommit2::drawLayersOnCCThread):
        (CCLayerTreeHostTestSetNeedsRedraw::beginTest):
        (CCLayerTreeHostTestScrollSimple::beginTest):
        (CCLayerTreeHostTestScrollSimple::drawLayersOnCCThread):
        (CCLayerTreeHostTestScrollMultipleRedraw::beginTest):
        (CCLayerTreeHostTestScrollMultipleRedraw::drawLayersOnCCThread):

2011-11-01  Julien Chaffraix  <jchaffraix@webkit.org>

        Pack RenderTableCell bits
        https://bugs.webkit.org/show_bug.cgi?id=71135

        Reviewed by Darin Adler.

        * WebKit.gypi:
        * tests/RenderTableCellTest.cpp: Added.
        Added some tests for the column/row index limit
        that was implemented in RenderTableCell.

2011-11-01  Nate Chapin  <japhet@chromium.org>

        Add 2 new TargetTypes (to match ResourceRequest::TargetType)
        and ensure we don't pass chromium a TargetType it doesn't
        yet understand.
        https://bugs.webkit.org/show_bug.cgi?id=70972

        Reviewed by Darin Fisher.

        * public/WebURLRequest.h:
        * src/WebURLRequest.cpp:

2011-11-01  Tommy Widenflycht  <tommyw@google.com>

        [chromium] Media Stream API: Adding supporting classes to WebPeerConnectionHandler
        https://bugs.webkit.org/show_bug.cgi?id=71008

        Expanding WebMediaStreamDescriptor and adding WebMediaStreamSource

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebMediaStreamDescriptor.h:
        * public/WebMediaStreamSource.h: Copied from Source/WebKit/chromium/public/WebMediaStreamDescriptor.h.
        (WebKit::WebMediaStreamSource::WebMediaStreamSource):
        (WebKit::WebMediaStreamSource::~WebMediaStreamSource):
        (WebKit::WebMediaStreamSource::isNull):
        * src/AssertMatchingEnums.cpp:
        * src/WebMediaStreamDescriptor.cpp:
        (WebKit::WebMediaStreamDescriptor::operator=):
        (WebKit::WebMediaStreamDescriptor::initialize):
        * src/WebMediaStreamSource.cpp: Copied from Source/WebKit/chromium/src/WebMediaStreamDescriptor.cpp.
        (WebKit::WebMediaStreamSource::WebMediaStreamSource):
        (WebKit::WebMediaStreamSource::reset):
        (WebKit::WebMediaStreamSource::operator PassRefPtr<MediaStreamSource>):
        (WebKit::WebMediaStreamSource::operator MediaStreamSource*):
        (WebKit::WebMediaStreamSource::initialize):
        (WebKit::WebMediaStreamSource::id):
        (WebKit::WebMediaStreamSource::type):
        (WebKit::WebMediaStreamSource::name):

2011-11-01  Nat Duca  <nduca@chromium.org>

        CCSchedulerTests fail on Chromium Windows (dbg) after r98915
        https://bugs.webkit.org/show_bug.cgi?id=71294

        Reviewed by James Robinson.

        * tests/CCSchedulerTest.cpp:
        (WebKitTests::TEST):

2011-11-01  Alok Priyadarshi  <alokp@chromium.org>

        Roll chromium DEPS.

        Unreviewed.

        * DEPS:

2011-11-01  Pavel Feldman  <pfeldman@google.com>

        Not reviewed: fix chromium interactive tests.

        * src/js/Tests.js:
        (.TestSuite.prototype.showPanel):

2011-10-31  Tommy Widenflycht  <tommyw@google.com>

        [Chromium] Media Stream API: add the Chromium WebKit interfaces
        https://bugs.webkit.org/show_bug.cgi?id=58550

        Adds the bridging code + the minimum amount of Web* supporting code.

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * bridge/PeerConnectionHandler.cpp: Renamed from Source/WebCore/platform/mediastream/PeerHandler.cpp.
        (WebCore::PeerConnectionHandler::create):
        (WebCore::PeerConnectionHandler::PeerConnectionHandler):
        (WebCore::PeerConnectionHandler::~PeerConnectionHandler):
        (WebCore::PeerConnectionHandler::produceInitialOffer):
        (WebCore::PeerConnectionHandler::handleInitialOffer):
        (WebCore::PeerConnectionHandler::processSDP):
        (WebCore::PeerConnectionHandler::processPendingStreams):
        (WebCore::PeerConnectionHandler::sendDataStreamMessage):
        (WebCore::PeerConnectionHandler::stop):
        * bridge/PeerConnectionHandlerInternal.cpp: Added.
        (WebCore::PeerConnectionHandlerInternal::PeerConnectionHandlerInternal):
        (WebCore::PeerConnectionHandlerInternal::~PeerConnectionHandlerInternal):
        (WebCore::PeerConnectionHandlerInternal::produceInitialOffer):
        (WebCore::PeerConnectionHandlerInternal::handleInitialOffer):
        (WebCore::PeerConnectionHandlerInternal::processSDP):
        (WebCore::PeerConnectionHandlerInternal::processPendingStreams):
        (WebCore::PeerConnectionHandlerInternal::sendDataStreamMessage):
        (WebCore::PeerConnectionHandlerInternal::stop):
        (WebCore::PeerConnectionHandlerInternal::didCompleteICEProcessing):
        (WebCore::PeerConnectionHandlerInternal::didGenerateSDP):
        (WebCore::PeerConnectionHandlerInternal::didReceiveDataStreamMessage):
        (WebCore::PeerConnectionHandlerInternal::didAddRemoteStream):
        (WebCore::PeerConnectionHandlerInternal::didRemoveRemoteStream):
        * bridge/PeerConnectionHandlerInternal.h: Added.
        * public/WebKitPlatformSupport.h:
        (WebKit::WebKitPlatformSupport::createPeerConnectionHandler):
        * public/WebMediaStreamDescriptor.h: Added.
        (WebKit::WebMediaStreamDescriptor::WebMediaStreamDescriptor):
        (WebKit::WebMediaStreamDescriptor::~WebMediaStreamDescriptor):
        (WebKit::WebMediaStreamDescriptor::isNull):
        * public/WebPeerConnectionHandler.h: Added.
        (WebKit::WebPeerConnectionHandler::~WebPeerConnectionHandler):
        * public/WebPeerConnectionHandlerClient.h: Added.
        (WebKit::WebPeerConnectionHandlerClient::~WebPeerConnectionHandlerClient):
        * src/WebMediaStreamDescriptor.cpp: Added.
        (WebKit::WebMediaStreamDescriptor::WebMediaStreamDescriptor):
        (WebKit::WebMediaStreamDescriptor::reset):
        (WebKit::WebMediaStreamDescriptor::operator=):
        (WebKit::WebMediaStreamDescriptor::operator WTF::PassRefPtr<WebCore::MediaStreamDescriptor>):
        (WebKit::WebMediaStreamDescriptor::operator WebCore::MediaStreamDescriptor*):

        Tests for the Media Stream API will be provided by the bug 56587, pending enough landed code.

2011-10-31  Yuzhu Shen  <yzshen@google.com>

        [chromium] Calling methods of WebFontImpl causes assertions
        https://bugs.webkit.org/show_bug.cgi?id=71232

        Added FontCachePurgePreventer in several methods.

        Reviewed by James Robinson.

        * src/WebFontImpl.cpp:
        (WebKit::WebFontImpl::calculateWidth):
        (WebKit::WebFontImpl::offsetForPosition):
        (WebKit::WebFontImpl::selectionRectForText):
        (WebKit::WebFontImpl::estimateTextBounds):

2011-10-28  Nat Duca  <nduca@chromium.org>

        [chromium] Connect CCThreadProxy to FrameRateController and SchedulerStateMachine via CCScheduler
        https://bugs.webkit.org/show_bug.cgi?id=71100

        Reviewed by James Robinson.

        * tests/CCSchedulerStateMachineTest.cpp:
        (WebCore::StateMachine::setUpdateMoreResourcesPending):
        (WebCore::StateMachine::updateMoreResourcesPending):
        (WebCore::TEST):
        * tests/CCSchedulerTest.cpp:

2011-10-31  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Remove null key support (part 2)
        https://bugs.webkit.org/show_bug.cgi?id=71132

        Reviewed by Darin Fisher.

        * public/WebIDBKey.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebIDBKey.cpp:

2011-10-31  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: move localization support into UIUtil.js, reduce externs.
        https://bugs.webkit.org/show_bug.cgi?id=71220

        Reviewed by Yury Semikhatsky.

        * src/js/DevTools.js:

2011-10-31  Adam Barth  <abarth@webkit.org>

        [Chromium] The Chromium port calls OwnPtr::get and RefPtr::get way more often than needed
        https://bugs.webkit.org/show_bug.cgi?id=71205

        Reviewed by Ryosuke Niwa.

        WebKit style is to use the implicit Boolean conversions rather than
        calling get() on these pointer types.  This patch cleans up most (all?)
        of these style issues in the Chromium port in the hopes that they'll be
        copy/pasted less in the future.

        * src/ApplicationCacheHostInternal.h:
        (WebCore::ApplicationCacheHostInternal::toWebApplicationCacheHost):
        * src/AudioDestinationChromium.cpp:
        (WebCore::AudioDestinationChromium::AudioDestinationChromium):
        (WebCore::AudioDestinationChromium::start):
        (WebCore::AudioDestinationChromium::stop):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::setMainDocumentError):
        (WebKit::FrameLoaderClientImpl::committedLoad):
        (WebKit::FrameLoaderClientImpl::finishedLoading):
        (WebKit::FrameLoaderClientImpl::redirectDataToPlugin):
        * src/PlatformMessagePortChannel.cpp:
        (WebCore::PlatformMessagePortChannel::postMessageToRemote):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::start):
        (WebCore::ResourceHandle::loadResourceSynchronously):
        * src/SocketStreamHandle.cpp:
        (WebCore::SocketStreamHandleInternal::connect):
        (WebCore::SocketStreamHandleInternal::send):
        (WebCore::SocketStreamHandleInternal::didOpenStream):
        (WebCore::SocketStreamHandleInternal::didSendData):
        (WebCore::SocketStreamHandleInternal::didReceiveData):
        (WebCore::SocketStreamHandleInternal::didClose):
        (WebCore::SocketStreamHandleInternal::didFail):
        (WebCore::SocketStreamHandle::platformSend):
        (WebCore::SocketStreamHandle::platformClose):
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::hitTest):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::findChildByExpression):
        (WebKit::WebFrameImpl::loadHistoryItem):
        (WebKit::WebFrameImpl::characterIndexForPoint):
        (WebKit::WebFrameImpl::selectionAsText):
        (WebKit::WebFrameImpl::selectionAsMarkup):
        (WebKit::WebFrameImpl::getPrintPageShrink):
        (WebKit::WebFrameImpl::printPage):
        (WebKit::WebFrameImpl::printEnd):
        (WebKit::WebFrameImpl::scopeStringMatches):
        * src/WebIDBKey.cpp:
        (WebKit::WebIDBKey::type):
        * src/WebIDBKeyRange.cpp:
        (WebKit::WebIDBKeyRange::lower):
        (WebKit::WebIDBKeyRange::upper):
        (WebKit::WebIDBKeyRange::lowerOpen):
        (WebKit::WebIDBKeyRange::upperOpen):
        * src/WebImageCG.cpp:
        (WebKit::WebImage::WebImage):
        (WebKit::WebImage::operator=):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::~WebMediaPlayerClientImpl):
        (WebKit::WebMediaPlayerClientImpl::readyStateChanged):
        (WebKit::WebMediaPlayerClientImpl::repaint):
        (WebKit::WebMediaPlayerClientImpl::loadInternal):
        (WebKit::WebMediaPlayerClientImpl::cancelLoad):
        (WebKit::WebMediaPlayerClientImpl::play):
        (WebKit::WebMediaPlayerClientImpl::pause):
        (WebKit::WebMediaPlayerClientImpl::sourceAppend):
        (WebKit::WebMediaPlayerClientImpl::sourceEndOfStream):
        (WebKit::WebMediaPlayerClientImpl::naturalSize):
        (WebKit::WebMediaPlayerClientImpl::hasVideo):
        (WebKit::WebMediaPlayerClientImpl::hasAudio):
        (WebKit::WebMediaPlayerClientImpl::setVisible):
        (WebKit::WebMediaPlayerClientImpl::duration):
        (WebKit::WebMediaPlayerClientImpl::currentTime):
        (WebKit::WebMediaPlayerClientImpl::seek):
        (WebKit::WebMediaPlayerClientImpl::seeking):
        (WebKit::WebMediaPlayerClientImpl::setEndTime):
        (WebKit::WebMediaPlayerClientImpl::setRate):
        (WebKit::WebMediaPlayerClientImpl::paused):
        (WebKit::WebMediaPlayerClientImpl::supportsFullscreen):
        (WebKit::WebMediaPlayerClientImpl::supportsSave):
        (WebKit::WebMediaPlayerClientImpl::setVolume):
        (WebKit::WebMediaPlayerClientImpl::networkState):
        (WebKit::WebMediaPlayerClientImpl::readyState):
        (WebKit::WebMediaPlayerClientImpl::maxTimeSeekable):
        (WebKit::WebMediaPlayerClientImpl::buffered):
        (WebKit::WebMediaPlayerClientImpl::dataRate):
        (WebKit::WebMediaPlayerClientImpl::totalBytesKnown):
        (WebKit::WebMediaPlayerClientImpl::totalBytes):
        (WebKit::WebMediaPlayerClientImpl::bytesLoaded):
        (WebKit::WebMediaPlayerClientImpl::setSize):
        (WebKit::WebMediaPlayerClientImpl::paintCurrentFrameInContext):
        (WebKit::WebMediaPlayerClientImpl::setPreload):
        (WebKit::WebMediaPlayerClientImpl::hasSingleSecurityOrigin):
        (WebKit::WebMediaPlayerClientImpl::movieLoadType):
        (WebKit::WebMediaPlayerClientImpl::mediaTimeForTimeValue):
        (WebKit::WebMediaPlayerClientImpl::decodedFrameCount):
        (WebKit::WebMediaPlayerClientImpl::droppedFrameCount):
        (WebKit::WebMediaPlayerClientImpl::audioDecodedByteCount):
        (WebKit::WebMediaPlayerClientImpl::videoDecodedByteCount):
        (WebKit::WebMediaPlayerClientImpl::acceleratedRenderingInUse):
        (WebKit::WebMediaPlayerClientImpl::putCurrentFrame):
        (WebKit::WebMediaPlayerClientImpl::startDelayedLoad):
        * src/WebURLRequest.cpp:
        (WebKit::WebURLRequest::extraData):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::theme):
        (WebKit::WebViewImpl::mainFrameImpl):
        (WebKit::WebViewImpl::tabKeyCyclesThroughElements):
        (WebKit::WebViewImpl::hideSelectPopup):
        (WebKit::WebViewImpl::popupClosed):
        (WebKit::WebViewImpl::focusedWebCoreFrame):
        (WebKit::WebViewImpl::close):
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):
        (WebKit::WebViewImpl::handleInputEvent):
        (WebKit::WebViewImpl::setFocus):
        (WebKit::WebViewImpl::compositionRange):
        (WebKit::WebViewImpl::caretOrSelectionRange):
        (WebKit::WebViewImpl::settings):
        (WebKit::WebViewImpl::pageEncoding):
        (WebKit::WebViewImpl::setPageEncoding):
        (WebKit::WebViewImpl::setInitialFocus):
        (WebKit::WebViewImpl::clearFocusedNode):
        (WebKit::WebViewImpl::copyImageAt):
        (WebKit::WebViewImpl::dragTargetDragEnter):
        (WebKit::WebViewImpl::dragTargetDragLeave):
        (WebKit::WebViewImpl::dragTargetDrop):
        (WebKit::WebViewImpl::dragTargetDragEnterOrOver):
        (WebKit::WebViewImpl::inspectElementAt):
        (WebKit::WebViewImpl::applyAutofillSuggestions):
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::postMessageTask):
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::waitForOperationToComplete):
        (WebCore::WorkerAsyncFileSystemChromium::createWorkerFileSystemCallbacksBridge):

2011-10-31  Vangelis Kokkevis  <vangelis@chromium.org>

        Add missing declaration in WebSettings.h
        https://bugs.webkit.org/show_bug.cgi?id=71165

        Reviewed by Darin Fisher.

        * public/WebSettings.h:

2011-10-29  Jochen Eisinger  <jochen@chromium.org>

        Implement IDBFactory.deleteDatabase
        https://bugs.webkit.org/show_bug.cgi?id=62622

        Reviewed by Tony Chang.

        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::deleteDatabase):
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::getDatabaseNames):
        (WebKit::WebIDBFactoryImpl::open):
        (WebKit::WebIDBFactoryImpl::deleteDatabase):
        * src/WebIDBFactoryImpl.h:

2011-10-28  Sadrul Habib Chowdhury  <sadrul@chromium.org>
 
        Add support for sending scroll-update events from EventSender.
        https://bugs.webkit.org/show_bug.cgi?id=66272

        Reviewed by Adam Barth.

        * public/WebInputEvent.h:
        (WebKit::WebGestureEvent::WebGestureEvent):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):

2011-10-28  James Robinson  <jamesr@chromium.org>

        [chromium] Track wheel event handler registration and pass to input filter
        https://bugs.webkit.org/show_bug.cgi?id=71078

        Reviewed by Kenneth Russell.

        Pushes mouse wheel event handler notifications to CCLayerTreeHost when compositing.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::numWheelEventHandlersChanged):
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositorImpl::handleInputEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::numberOfWheelEventHandlersChanged):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:

2011-10-28  Jochen Eisinger  <jochen@chromium.org>

        Rename a number of methods mentioning JavaScript to just Script instead
        https://bugs.webkit.org/show_bug.cgi?id=71105

        Reviewed by Adam Barth.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowScript):
        * src/FrameLoaderClientImpl.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::collectGarbage):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setJavaScriptEnabled):

2011-10-28  Adam Barth  <abarth@webkit.org>

        Remove getExceptionCodeDescription()
        https://bugs.webkit.org/show_bug.cgi?id=71103

        Reviewed by Eric Seidel.

        Migrate to new API.

        * src/StorageInfoChromium.cpp:
        * src/WebStorageQuotaCallbacksImpl.cpp:
        (WebKit::WebStorageQuotaCallbacksImpl::didFail):

2011-10-28  Hans Wennborg  <hans@chromium.org>

        IndexedDB: Clean-up unused functions in WebIDBFactory
        https://bugs.webkit.org/show_bug.cgi?id=71011

        Reviewed by Tony Chang.

        This is a clean-up after r97453. Since Chromium was updated,
        these functions are no longer used.

        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::getDatabaseNames):
        (WebKit::WebIDBFactory::open):

2011-10-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-10-28  Jochen Eisinger  <jochen@chromium.org>

        Add allowScriptFromSource callback to FrameLoaderClient
        https://bugs.webkit.org/show_bug.cgi?id=71013

        Reviewed by Darin Fisher.

        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowScriptFromSource):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowScriptFromSource):
        * src/FrameLoaderClientImpl.h:

2011-10-26  Nat Duca  <nduca@chromium.org>

        [chromium] Implement frame rate control portions of CCScheduler
        https://bugs.webkit.org/show_bug.cgi?id=70713

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCDelayBasedTimeSourceTest.cpp: Added.
        (WebKitTests::TEST):
        * tests/CCFrameRateControllerTest.cpp: Added.
        (WebKitTests::FakeCCFrameRateControllerClient::FakeCCFrameRateControllerClient):
        (WebKitTests::FakeCCFrameRateControllerClient::reset):
        (WebKitTests::FakeCCFrameRateControllerClient::frameBegun):
        (WebKitTests::FakeCCFrameRateControllerClient::beginFrame):
        (WebKitTests::TEST):
        * tests/CCLayerTreeHostTest.cpp:
        * tests/CCSchedulerTestCommon.h: Added.
        (WebKitTests::FakeCCTimeSourceClient::FakeCCTimeSourceClient):
        (WebKitTests::FakeCCTimeSourceClient::reset):
        (WebKitTests::FakeCCTimeSourceClient::tickCalled):
        (WebKitTests::FakeCCTimeSourceClient::onTimerTick):
        (WebKitTests::FakeCCThread::FakeCCThread):
        (WebKitTests::FakeCCThread::reset):
        (WebKitTests::FakeCCThread::hasPendingTask):
        (WebKitTests::FakeCCThread::runPendingTask):
        (WebKitTests::FakeCCThread::pendingDelay):
        (WebKitTests::FakeCCThread::postTask):
        (WebKitTests::FakeCCThread::postDelayedTask):
        (WebKitTests::FakeCCThread::threadID):
        (WebKitTests::FakeCCDelayBasedTimeSource::FakeCCDelayBasedTimeSource):
        (WebKitTests::FakeCCDelayBasedTimeSource::setMonotonicallyIncreasingTime):
        (WebKitTests::FakeCCDelayBasedTimeSource::monotonicallyIncreasingTime):

2011-10-27  Vangelis Kokkevis  <vangelis@chromium.org>

        Expose Settings::setAcceleratedCompositingForFixedPositionEnabled to WebSettingsImpl.
        https://bugs.webkit.org/show_bug.cgi?id=71077

        Reviewed by James Robinson.

        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setAcceleratedCompositingForFixedPositionEnabled):
        * src/WebSettingsImpl.h:

2011-10-27  Peng Huang  <penghuang@chromium.org>

        [chromium] Remove some APIs which are not used anymore.
        https://bugs.webkit.org/show_bug.cgi?id=71068

        Reviewed by Darin Fisher.

        * public/WebWidget.h:
        * src/WebPopupMenuImpl.cpp:
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:

2011-10-27  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Track when CCLayerImpl properties have changed.
        https://bugs.webkit.org/show_bug.cgi?id=70442

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCLayerImplTest.cpp: Added.
        (WebCore::TEST):

2011-10-27  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: HTTP headers merged incorrect in Chrome
        https://bugs.webkit.org/show_bug.cgi?id=69674

        Reviewed by Pavel Feldman.

        * src/WebHTTPLoadInfo.cpp:
        (WebKit::addHeader):

2011-10-27  Stephen Chenney  <schenney@chromium.org>

        [Chromium] Need setPrinting
        https://bugs.webkit.org/show_bug.cgi?id=46152

        Reviewed by Hajime Morita.

        * public/WebFrame.h: Added pure virtual prototype for printPagesWithBoundaries. Added enum
        and changed parameters for renderTreeAsText.
        * src/WebFrameImpl.cpp:
        (WebKit::ChromePrintContext::spoolAllPagesWithBoundaries): Added this method, based on
        the static in PrintContext. This uses Chromium specific page spooling and transforms.
        (WebKit::WebFrameImpl::renderTreeAsText): Updated to allow text dump in printed format.
        (WebKit::WebFrameImpl::printPagesWithBoundaries): Added method for testing printing page
        breaks.
        * src/WebFrameImpl.h: Added prototype.

2011-10-27  Antoine Labour  <piman@chromium.org>

        Fix teardown in Web*LayerImpl, and add tests for Web*Layer
        https://bugs.webkit.org/show_bug.cgi?id=70431

        Reviewed by James Robinson.

        * src/WebContentLayerImpl.cpp:
        (WebKit::WebContentLayerImpl::~WebContentLayerImpl):
        * src/WebExternalTextureLayerImpl.cpp:
        (WebKit::WebExternalTextureLayerImpl::~WebExternalTextureLayerImpl):
        * src/WebLayerImpl.cpp:
        (WebKit::WebLayerImpl::~WebLayerImpl):

2011-10-24  Nat Duca  <nduca@chromium.org>

        [chromium] Encapsulate state machine parts of scheduling in CCSchedulerStateMachine
        https://bugs.webkit.org/show_bug.cgi?id=70714

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCSchedulerStateMachineTest.cpp: Added.
        (WebCore::StateMachine::setCommitState):
        (WebCore::StateMachine::commitState):
        (WebCore::StateMachine::setNeedsCommit):
        (WebCore::StateMachine::needsCommit):
        (WebCore::StateMachine::setNeedsRedraw):
        (WebCore::StateMachine::needsRedraw):
        (WebCore::StateMachine::setUpdatedThisFrame):
        (WebCore::StateMachine::updatedThisFrame):
        (WebCore::TEST):

2011-10-27  Nat Duca  <nduca@chromium.org>

        Unreviewed, rolling out r98612.
        http://trac.webkit.org/changeset/98612
        https://bugs.webkit.org/show_bug.cgi?id=70714

        Broke build

        * WebKit.gypi:
        * tests/CCSchedulerStateMachineTest.cpp: Removed.

2011-10-24  Nat Duca  <nduca@chromium.org>

        [chromium] Encapsulate state machine parts of scheduling in CCSchedulerStateMachine
        https://bugs.webkit.org/show_bug.cgi?id=70714

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCSchedulerStateMachineTest.cpp: Added.
        (WebCore::StateMachine::setCommitState):
        (WebCore::StateMachine::commitState):
        (WebCore::StateMachine::setNeedsCommit):
        (WebCore::StateMachine::needsCommit):
        (WebCore::StateMachine::setNeedsRedraw):
        (WebCore::StateMachine::needsRedraw):
        (WebCore::StateMachine::setUpdatedThisFrame):
        (WebCore::StateMachine::updatedThisFrame):
        (WebCore::TEST):

2011-10-27  Dave Michael  <dmichael@chromium.org>

        Chromium ui_tests WorkerTest.WorkerMessagePort[GC] were broken by https://bugs.webkit.org/attachment.cgi?id=112342
        https://bugs.webkit.org/show_bug.cgi?id=70953

        Reviewed by David Levin.

        * src/PlatformMessagePortChannel.cpp:
        (WebCore::PlatformMessagePortChannel::hasPendingActivity):

2011-10-27  Aaron Colwell  <acolwell@chromium.org>

        Enable MEDIA_SOURCE feature for Chromium
        https://bugs.webkit.org/show_bug.cgi?id=70745

        Reviewed by David Levin.

        * features.gypi:

2011-10-26  Chris Rogers  <crogers@google.com>

        Add chromium bridging for AudioSourceProviderClient and setFormat() method so we can know audio stream format
        https://bugs.webkit.org/show_bug.cgi?id=70650

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebAudioSourceProvider.h:
        (WebKit::WebAudioSourceProvider::setClient):
        * public/WebAudioSourceProviderClient.h: Copied from Source/WebKit/chromium/public/WebAudioSourceProvider.h.
        (WebKit::WebAudioSourceProviderClient::~WebAudioSourceProviderClient):
        * public/WebMediaPlayer.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::loadInternal):
        (WebKit::WebMediaPlayerClientImpl::audioSourceProvider):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::wrap):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::setClient):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::provideInput):
        (WebKit::WebMediaPlayerClientImpl::AudioClientImpl::setFormat):
        * src/WebMediaPlayerClientImpl.h:
        (WebKit::WebMediaPlayerClientImpl::AudioClientImpl::AudioClientImpl):
        (WebKit::WebMediaPlayerClientImpl::AudioClientImpl::~AudioClientImpl):
        (WebKit::WebMediaPlayerClientImpl::AudioClientImpl::wrap):

2011-10-25  Stephen White  <senorblanco@chromium.org>

        [chromium] Canvas2D should rate-limit drawing to prevent swamping the GPU process.
        https://bugs.webkit.org/show_bug.cgi?id=70367

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::markContextChanged):
        Remove the call to setTextureChanged (it will be handled internally
        by the compositor in setContextNeedsDisplay() instead).  This decouples
        GraphicsContext3D from WebGLLayerChromium a bit.

2011-10-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r98393.
        http://trac.webkit.org/changeset/98393
        https://bugs.webkit.org/show_bug.cgi?id=70892

        "Compilation is broken on Chromium Webkit Mac Builder (dbg) "
        (Requested by yurys on #webkit).

        * WebKit.gypi:
        * src/WebContentLayerImpl.cpp:
        (WebKit::WebContentLayerImpl::~WebContentLayerImpl):
        (WebKit::WebContentLayerImpl::setDrawsContent):
        * src/WebExternalTextureLayerImpl.cpp:
        (WebKit::WebExternalTextureLayerImpl::~WebExternalTextureLayerImpl):
        * src/WebLayerImpl.cpp:
        (WebKit::WebLayerImpl::~WebLayerImpl):
        * tests/LayerChromiumTest.cpp:
        * tests/WebLayerTest.cpp: Removed.

2011-10-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r98429.
        http://trac.webkit.org/changeset/98429
        https://bugs.webkit.org/show_bug.cgi?id=70881

        "webkit_gpu_tests fail in Chromium" (Requested by yurys on
        #webkit).

        * public/WebLayerTreeView.h:
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositor::setThread):
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        (WebKit::WebLayerTreeView::composite):
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::createLayerTreeHostContext3D):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::runTest):

2011-10-26  Polina Sokolova  <polina@chromium.org>

        Remove temporary hack needed to ease Chromium/WebKit commit.
        https://bugs.webkit.org/show_bug.cgi?id=70791

        Reviewed by Darin Fisher.

        * public/WebDocument.h:

2011-10-25  Nat Duca  <nduca@chromium.org>

        [chromium] Enable threaded compositing via CCThreadProxy::hasThread only
        https://bugs.webkit.org/show_bug.cgi?id=70838

        Reviewed by James Robinson.

        * public/WebLayerTreeView.h:
        * src/WebCompositorImpl.cpp:
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        (WebKit::WebLayerTreeView::composite):
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::createLayerTreeHostContext3D):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-10-25  Antoine Labour  <piman@chromium.org>

        Fix teardown in Web*LayerImpl, and add tests for Web*Layer
        https://bugs.webkit.org/show_bug.cgi?id=70431

        Reviewed by James Robinson.

        * src/WebContentLayerImpl.cpp:
        (WebKit::WebContentLayerImpl::~WebContentLayerImpl):
        * src/WebExternalTextureLayerImpl.cpp:
        (WebKit::WebExternalTextureLayerImpl::~WebExternalTextureLayerImpl):
        * src/WebLayerImpl.cpp:
        (WebKit::WebLayerImpl::~WebLayerImpl):

2011-10-25  Adam Barth  <abarth@webkit.org>

        EventTarget.h shouldn't need to know about every feature and ifdef
        https://bugs.webkit.org/show_bug.cgi?id=70659

        Reviewed by Darin Adler.

        This cast isn't needed because dispatchEvent is a virtual function.

        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::connectTask):

2011-10-25  Michal Mocny  <mmocny@google.com>

        [chromium] WebGraphicsContext3D setVisibilityCHROMIUM extension changed to pure virtual.
        https://bugs.webkit.org/show_bug.cgi?id=70818

        Reviewed by Kenneth Russell.

        * public/WebGraphicsContext3D.h:

2011-10-25  Dave Michael  <dmichael@chromium.org>

        Make it possible to create and dispatch a message event through chromium API

        Removed messageChannels parameter, since it's hard to get right and I don't need it. Changed message_data->messageData. Reordered includes.

        https://bugs.webkit.org/show_bug.cgi?id=69962

        Reviewed by David Levin.

        * WebKit.gyp:
        * public/WebDOMEvent.h:
        * public/WebDOMMessageEvent.h: Added.
        * public/WebDocument.h:
        * public/WebNode.h:
        * src/PlatformMessagePortChannel.cpp:
        (WebCore::PlatformMessagePortChannel::hasPendingActivity):
        * src/WebDOMEvent.cpp:
        (WebKit::WebDOMEvent::operator WTF::PassRefPtr<WebCore::Event>):
        * src/WebDOMMessageEvent.cpp: Added.
        (WebKit::WebDOMMessageEvent::initMessageEvent):
        * src/WebDocument.cpp:
        (WebKit::WebDocument::createEvent):
        * src/WebNode.cpp:
        (WebKit::WebNode::dispatchEvent):

2011-10-25  Gene Girard  <girard@chromium.org>

        Re-enable touch tests (from 66577)
        https://bugs.webkit.org/show_bug.cgi?id=70351

        Reviewed by Adam Barth.

        * tests/InnerGestureRecognizerTest.cpp:
        (TEST_F):

2011-10-25  Nat Duca  <nduca@chromium.org>

        Unreviewed. Rolled DEPS.

        * DEPS:

2011-10-25  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: redesign workers sidebar pane
        https://bugs.webkit.org/show_bug.cgi?id=70815

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js: Expose link to shared workers inspection page to WebCore.
        ():

2011-10-25  Nico Weber  <thakis@chromium.org>

        [chromium] Try to fix mac build after r98294
        https://bugs.webkit.org/show_bug.cgi?id=70753

        Remove test for ScrollAnimatorNone on mac.

        Unreviewed, build fix.

        * WebKit.gypi:

2011-10-24  Geoffrey Garen  <ggaren@apple.com>

        Removed SharedUChar and tightened language around its previous uses
        https://bugs.webkit.org/show_bug.cgi?id=70698

        Reviewed by David Levin.

        - Renamed "threadSafeCopy" and "crossThreadCopy" to "isolatedCopy" because
        the former names gave the dangerous misimpression that the resulting object
        was thread-safe, which is not true.


        * src/WorkerFileSystemCallbacksBridge.cpp:

2011-10-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r98294 and r98306.
        http://trac.webkit.org/changeset/98294
        http://trac.webkit.org/changeset/98306
        https://bugs.webkit.org/show_bug.cgi?id=70790

        the first patch broke chromium-mac and the second gclient
        (Requested by jchaffraix on #webkit).

        * WebKit.gypi:

2011-10-24  Nico Weber  <thakis@chromium.org>

        [chromium] Try to fix mac build after r98294
        https://bugs.webkit.org/show_bug.cgi?id=70785

        Remove test for ScrollAnimatorNone on mac.

        Unreviewed, build fix.

        * WebKit.gypi:

2011-10-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r98266.
        http://trac.webkit.org/changeset/98266
        https://bugs.webkit.org/show_bug.cgi?id=70767

        Broke the chromium build. (Requested by dave_levin on
        #webkit).

        * features.gypi:

2011-10-21  Nat Duca  <nduca@chromium.org>

        [chromium] Add isTraceEventEnabled to PlatformSupport.
        https://bugs.webkit.org/show_bug.cgi?id=70618

        Reviewed by Darin Fisher.

        * public/WebKitPlatformSupport.h:
        (WebKit::WebKitPlatformSupport::isTraceEventEnabled):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::isTraceEventEnabled):

2011-10-24  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Throw DATA_ERR on invalid keys, remove null key support
        https://bugs.webkit.org/show_bug.cgi?id=70065

        Reviewed by Tony Chang.

        Part 1 of a two-sided commit. Renames IDBKey::NullType to
        IDBKey::InvalidType. JS binding yields this type rather
        than throwing immediately so the correct exception type can
        be raised. Checks for invalid keys added to front-end classes.

        * src/AssertMatchingEnums.cpp:
        * src/WebIDBKey.cpp:
        (WebKit::WebIDBKey::assignNull):

2011-10-24  Nat Duca  <nduca@chromium.org>

        [chromium] Expose WebThread::postDelayedTask to CCThread
        https://bugs.webkit.org/show_bug.cgi?id=70712

        Reviewed by James Robinson.

        * src/CCThreadImpl.cpp:
        (WebKit::CCThreadImpl::postDelayedTask):
        * src/CCThreadImpl.h:

2011-10-24  Nat Duca  <nduca@chromium.org>

        [chromium] Manage webkit_unit_tests TestSuite lifetime explicitly in DLL build
        https://bugs.webkit.org/show_bug.cgi?id=70688

        Reviewed by Tony Chang.

        * tests/RunAllTests.cpp:
        (main):
        * tests/WebUnitTests.cpp:
        (WebKit::InitTestSuite):
        (WebKit::RunAllUnitTests):
        (WebKit::DeleteTestSuite):
        * tests/WebUnitTests.h:

2011-10-24  Aaron Colwell  <acolwell@chromium.org>

        Enable MEDIA_SOURCE feature for Chromium
        https://bugs.webkit.org/show_bug.cgi?id=70745

        Reviewed by David Levin.

        * features.gypi:

2011-10-24  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: allow debugging dedicated worker initialization
        https://bugs.webkit.org/show_bug.cgi?id=70723

        Pass worker thread start mode to the worker thread.

        Reviewed by Pavel Feldman.

        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::startWorkerContext):
        * src/WebWorkerClientImpl.h:

2011-10-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-10-21  Nat Duca  <nduca@chromium.org>

        [chromium] Make setVisibility extension- and thread-correct
        https://bugs.webkit.org/show_bug.cgi?id=70635

        Reviewed by Kenneth Russell.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::setVisibilityCHROMIUM):
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::setVisibilityCHROMIUM):
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DPrivate.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setVisibilityState):

2011-10-21  Adam Barth  <abarth@webkit.org>

        Introduce Event::hasInterface to make uses of interfaceName more readable
        https://bugs.webkit.org/show_bug.cgi?id=70652

        Reviewed by Eric Seidel.

        Update call sites to the new interface.

        * src/WebDOMEvent.cpp:
        (WebKit::WebDOMEvent::isMutationEvent):
        (WebKit::WebDOMEvent::isTextEvent):
        (WebKit::WebDOMEvent::isCompositionEvent):
        (WebKit::WebDOMEvent::isMessageEvent):
        (WebKit::WebDOMEvent::isWheelEvent):
        (WebKit::WebDOMEvent::isOverflowEvent):
        (WebKit::WebDOMEvent::isPageTransitionEvent):
        (WebKit::WebDOMEvent::isPopStateEvent):
        (WebKit::WebDOMEvent::isProgressEvent):
        (WebKit::WebDOMEvent::isXMLHttpRequestProgressEvent):
        (WebKit::WebDOMEvent::isWebKitAnimationEvent):
        (WebKit::WebDOMEvent::isWebKitTransitionEvent):
        (WebKit::WebDOMEvent::isBeforeLoadEvent):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleEvent):

2011-10-21  Adam Barth  <abarth@webkit.org>

        Event.h has too many virtual isMumbleEvent() functions
        https://bugs.webkit.org/show_bug.cgi?id=70636

        Reviewed by Dimitri Glazkov.

        Update these callsites to the new API.

        * src/WebDOMEvent.cpp:
        (WebKit::WebDOMEvent::isKeyboardEvent):
        (WebKit::WebDOMEvent::isMutationEvent):
        (WebKit::WebDOMEvent::isTextEvent):
        (WebKit::WebDOMEvent::isCompositionEvent):
        (WebKit::WebDOMEvent::isClipboardEvent):
        (WebKit::WebDOMEvent::isMessageEvent):
        (WebKit::WebDOMEvent::isWheelEvent):
        (WebKit::WebDOMEvent::isBeforeTextInsertedEvent):
        (WebKit::WebDOMEvent::isOverflowEvent):
        (WebKit::WebDOMEvent::isPageTransitionEvent):
        (WebKit::WebDOMEvent::isProgressEvent):
        (WebKit::WebDOMEvent::isBeforeLoadEvent):

2011-10-20  Zhenyao Mo  <zmo@google.com>

        Implement mechanism to enable privileged webgl extensions
        https://bugs.webkit.org/show_bug.cgi?id=70538

        Reviewed by Darin Fisher.

        * public/WebSettings.h: Add the flag.
        * src/WebSettingsImpl.cpp: Ditto.
        (WebKit::WebSettingsImpl::setPrivilegedWebGLExtensionsEnabled):
        * src/WebSettingsImpl.h: Ditto.

2011-10-21  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: remove debugger support for out-of-process dedicated workers
        https://bugs.webkit.org/show_bug.cgi?id=70602

        Now that Chromium uses in-process dedicated workers, remove support for out-of-process
        dedicated workers debugger.

        Reviewed by Pavel Feldman.

        * public/WebWorker.h:
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::connectToInspector):
        (WebKit::WebWorkerClientImpl::disconnectFromInspector):
        (WebKit::WebWorkerClientImpl::WebWorkerClientImpl):
        * src/WebWorkerClientImpl.h:
        * src/WebWorkerImpl.cpp:
        * src/WebWorkerImpl.h:

2011-10-20  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-10-20  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Fixed Layout API needs to check that a FrameView has been created to avoid segfaults
        https://bugs.webkit.org/show_bug.cgi?id=70519

        Reviewed by Adam Barth.

        Simple patch. Upcoming patches for https://bugs.webkit.org/show_bug.cgi?id=70559 will make
        use of these methods in certain situations where the main frame doesn't yet have a FrameView.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::isFixedLayoutModeEnabled):
        (WebKit::WebViewImpl::enableFixedLayoutMode):
        (WebKit::WebViewImpl::fixedLayoutSize):
        (WebKit::WebViewImpl::setFixedLayoutSize):

2011-10-20  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-10-20  Darin Adler  <darin@apple.com>

        Remove OptionElement (first half)
        https://bugs.webkit.org/show_bug.cgi?id=70276

        Reviewed by Kent Tamura.

        Update hand-written binding for option element so it does not depend on otherwise-unneeded functions.

        * src/WebOptionElement.cpp:
        (WebKit::WebOptionElement::defaultSelected): Call hasAttribute.
        (WebKit::WebOptionElement::setDefaultSelected): Call setAttribute.

        * src/WebSearchableFormData.cpp:
        (HTMLNames::IsSelectInDefaultState): Call hasAttribute.

2011-10-20  Nico Weber  <thakis@chromium.org>

        [chromium/mac] Add support for building with make
        https://bugs.webkit.org/show_bug.cgi?id=70455

        Reviewed by Adam Barth.

        Depends on http://codereview.chromium.org/8352029/
        `GYP_GENERATORS=make Tools/Scripts/update-webkit --chromium` will
        create a toplevel Makefile.chromium.

        If that file exists and is newer than Source/WebKit/chromium/WebKit.xcodeproj,
        `Tools/Scripts/build-webkit --chromium` will build with make instead of
        xcodebuild.

        * gyp_webkit:
2011-10-20  Nat Duca  <nduca@chromium.org>

        [chromium] Route onSwapBuffersComplete from LayerRenderer to CCScheduler.

        Reviewed by James Robinson.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DSwapBuffersCompleteCallbackAdapter::~GraphicsContext3DSwapBuffersCompleteCallbackAdapter):
        (WebCore::GraphicsContext3DSwapBuffersCompleteCallbackAdapter::GraphicsContext3DSwapBuffersCompleteCallbackAdapter):
        (WebCore::GraphicsContext3DSwapBuffersCompleteCallbackAdapter::onSwapBuffersComplete):
        (WebCore::GraphicsContext3DSwapBuffersCompleteCallbackAdapter::create):
        (WebCore::GraphicsContext3DPrivate::setSwapBuffersCompleteCallbackCHROMIUM):
        * src/GraphicsContext3DPrivate.h:
        * tests/CCLayerTreeHostImplTest.cpp:
        (WebCore::CCLayerTreeHostImplTest::onSwapBuffersCompleteOnImplThread):
        * tests/CCSchedulerTest.cpp:
        (WebCore::CCSchedulerTest::CCSchedulerTest):
        (WebCore::TEST_F):

2011-10-20  Michal Mocny  <mmocny@google.com>

        [chromium] Add a setVisibility method to WebGraphicsContext3D.
        https://bugs.webkit.org/show_bug.cgi?id=68905

        Reviewed by Kenneth Russell.

        Added hooks for notifying WebGraphicsContext3D of surface visibility changes.
        Useful for releasing various graphics resource.

        * DEPS:
        * public/WebGraphicsContext3D.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setVisibilityState):
        * tests/MockWebGraphicsContext3D.h:
        (WebKit::MockWebGraphicsContext3D::setVisibility):

2011-10-20  Antoine Labour  <piman@chromium.org>

        Export missing symbols from Web*Layer
        https://bugs.webkit.org/show_bug.cgi?id=70440

        Reviewed by Darin Fisher.

        * public/WebContentLayer.h:
        * public/WebExternalTextureLayer.h:
        * public/WebLayer.h:
        * public/WebLayerTreeView.h:

2011-10-17  Nat Duca  <nduca@chromium.org>

        [chromium] Allow CCLayerTreeHostImpl to call back to proxy via CCLayerTreeHostImplClient
        https://bugs.webkit.org/show_bug.cgi?id=70291

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostImplTest.cpp:
        (WebCore::CCLayerTreeHostImplTest::CCLayerTreeHostImplTest):
        (WebCore::CCLayerTreeHostImplTest::setNeedsRedrawOnImplThread):
        (WebCore::CCLayerTreeHostImplTest::setNeedsCommitOnImplThread):
        (WebCore::TEST_F):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHostImpl::create):
        (WTF::MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (WTF::MockLayerTreeHost::createLayerTreeHostImpl):

2011-10-20  Vincent Scheib  <scheib@chromium.org>

        MouseLock compile and run time flags.
        https://bugs.webkit.org/show_bug.cgi?id=70530

        Reviewed by Darin Fisher.

        * features.gypi:
        * public/WebRuntimeFeatures.h:
        * public/WebSettings.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableMouseLockAPI):
        (WebKit::WebRuntimeFeatures::isMouseLockAPIEnabled):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setMouseLockEnabled):
        * src/WebSettingsImpl.h:

2011-10-20  Hao Zheng  <zhenghao@chromium.org>

        [Chromium] Reduce dependencies of ImageDiff to compile it for Android.
        https://bugs.webkit.org/show_bug.cgi?id=69997

        Reviewed by Tony Chang.

        This change is required to make ImageDiff for Android, and can benefit
        other platforms, too. On Android, most targets are built as
        toolsets:target. while ImageDiff needs to be built as toolsets:host.
        Currently, building the standalone target of ImageDiff depends on about
        85 other targets (try  make ImageDiff'), which is inefficient. After the
        change, ImageDiff only depends on webkit_support_gfx, which in turn
        depends on libpng and zlib.

        * WebKit.gyp:

2011-10-20  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r97917.
        http://trac.webkit.org/changeset/97917
        https://bugs.webkit.org/show_bug.cgi?id=70475

        number of crashes on Snow Leopard/Lion tests bots
        http://build.webkit.org/results/Lion%20Intel%20Release%20(Tests)/r97917%20(2020)/http/tests/inspector
        /extensions-network-redirect-crash-log.txt (Requested by
        loislo on #webkit).

        * src/WebOptionElement.cpp:
        (WebKit::WebOptionElement::defaultSelected):
        (WebKit::WebOptionElement::setDefaultSelected):
        * src/WebSearchableFormData.cpp:
        (HTMLNames::IsSelectInDefaultState):

2011-10-19  Nat Duca  <nduca@chromium.org>

        [chromium] Route requestAnimationFrame through CCProxy in threaded mode
        https://bugs.webkit.org/show_bug.cgi?id=70160

        Reviewed by James Robinson.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::scheduleAnimation):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scheduleAnimation):
        * src/WebViewImpl.h:

2011-10-19  Nico Weber  <thakis@chromium.org>

        [chromium/mac] Use clang as compiler!
        https://bugs.webkit.org/show_bug.cgi?id=70425

        Reviewed by Adam Barth.

        It looks like http://trac.webkit.org/changeset/97415 was all that's
        needed to get this to work.

        * gyp_webkit:
        Don't force clang off, which means it's now on by default on mac.

2011-10-19  Darin Adler  <darin@apple.com>

        Remove OptionElement (first half)
        https://bugs.webkit.org/show_bug.cgi?id=70276

        Reviewed by Kent Tamura.

        Update hand-written binding for option element so it does not depend on otherwise-unneeded functions.

        * src/WebOptionElement.cpp:
        (WebKit::WebOptionElement::defaultSelected): Call hasAttribute.
        (WebKit::WebOptionElement::setDefaultSelected): Call setAttribute.

        * src/WebSearchableFormData.cpp:
        (HTMLNames::IsSelectInDefaultState): Call hasAttribute.

2011-10-19  Kent Tamura  <tkent@chromium.org>

        [Chromium]: Move from FileChooserSettings deprecatedAcceptType to acceptMIMETypes
        https://bugs.webkit.org/show_bug.cgi?id=70003

        Reviewed by Darin Fisher.

        * public/WebFileChooserParams.h:
        Add acceptMIMETypes, and make acceptTypes deprecated.
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::runOpenPanel):
        - Set WebFileChooserParams::acceptMIMETypes
        - Set a joined string to WebFileChooserParams::acceptTypes until we remove acceptTypes.

2011-10-19  Adam Bergkvist  <adam.bergkvist@ericsson.com>

        Update MediaStream to use WebCore platform interfaces
        https://bugs.webkit.org/show_bug.cgi?id=68464

        Reviewed by Adam Barth.

        Removed WebMediaStreamTrack* since they will no longer be needed.

        * WebKit.gyp:
        * public/WebMediaStreamTrack.h: Removed.
        * public/WebMediaStreamTrackList.h: Removed.
        * src/WebMediaStreamTrack.cpp: Removed.
        * src/WebMediaStreamTrackList.cpp: Removed.

2011-10-19  Zhenyao Mo  <zmo@google.com>

        Implement WEBGL_debug_shaders and WEBGL_debug_renderer_info extensions
        https://bugs.webkit.org/show_bug.cgi?id=70077

        Reviewed by Kenneth Russell.

        * public/WebGraphicsContext3D.h: Added support for getTranslatedShaderSourceANGLE.
        (WebKit::WebGraphicsContext3D::getTranslatedShaderSourceANGLE):
        * src/Extensions3DChromium.cpp: Ditto.
        (WebCore::Extensions3DChromium::getTranslatedShaderSourceANGLE):
        * src/GraphicsContext3DChromium.cpp: Ditto.
        * src/GraphicsContext3DPrivate.h: Ditto.

2011-10-19  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, rolling out r97850.
        http://trac.webkit.org/changeset/97850
        https://bugs.webkit.org/show_bug.cgi?id=70334

        tests are crashing on xp debug

        * DEPS:

2011-10-19  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: make extension tests pass on chromium
        https://bugs.webkit.org/show_bug.cgi?id=70334

        Reviewed by Pavel Feldman.

        * DEPS: roll chromium 105970:106056

2011-10-18  Yuzo Fujishima  <yuzo@google.com>

        [chromium] Attempt to fix Linux Clang compilation error.

        Unreviewed.

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTestThreadOnly::runTestThreaded):
        (WTF::TEST_F):

2011-10-18  James Robinson  <jamesr@chromium.org>

        [chromium] Remove USE(THREADED_COMPOSITING) from the tree, this is controlled by a runtime setting
        https://bugs.webkit.org/show_bug.cgi?id=70356

        Reviewed by Kenneth Russell.

        * features.gypi:
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::scheduleComposite):
        * src/WebLayerTreeViewImpl.h:
        * src/WebViewImpl.h:

2011-10-18  Antoine Labour  <piman@chromium.org>

        Enable out-of-thread compositing in WebKit compositor API
        https://bugs.webkit.org/show_bug.cgi?id=69850

        Reviewed by James Robinson.

        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        (WebKit::WebLayerTreeView::composite):

2011-10-18  James Robinson  <jamesr@chromium.org>

        [chromium] Fix shutdown race when posting main thread task to CCThreadProxy and enable tests
        https://bugs.webkit.org/show_bug.cgi?id=70161

        Reviewed by David Levin.

        Enables the CCLayerTreeHostTest* tests by default. Most tests are run twice in a single thread and multiple
        thread configuration. Some tests run only in the multiple thread configuration if they depend on the compositor
        thread scheduling draws by itself.

        * tests/CCLayerTreeHostTest.cpp:
        (::CCLayerTreeHostTest::timeout):
        (::CCLayerTreeHostTest::clearTimeout):
        (::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (::CCLayerTreeHostTest::onEndTest):
        (::CCLayerTreeHostTest::TimeoutTask::TimeoutTask):
        (::CCLayerTreeHostTest::TimeoutTask::clearTest):
        (::CCLayerTreeHostTest::TimeoutTask::~TimeoutTask):
        (::CCLayerTreeHostTest::TimeoutTask::Run):
        (::CCLayerTreeHostTest::runTest):
        (::CCLayerTreeHostTest::doBeginTest):
        (::CCLayerTreeHostTestThreadOnly::runTest):
        (::CCLayerTreeHostTestSetNeedsRedraw::commitCompleteOnCCThread):

2011-10-18  Adam Barth  <abarth@webkit.org>

        Always enable ENABLE(XPATH)
        https://bugs.webkit.org/show_bug.cgi?id=70217

        Reviewed by Eric Seidel.

        * features.gypi:

2011-10-18  Chris Fleizach  <cfleizach@apple.com>

        AX: buttons of number type <input> controls are not fully accessible
        https://bugs.webkit.org/show_bug.cgi?id=70241

        Reviewed by Darin Adler.

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2011-10-17  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r97677.
        http://trac.webkit.org/changeset/97677
        https://bugs.webkit.org/show_bug.cgi?id=70308

        A dependent revision was rolled out. (Requested by tkent on
        #webkit).

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2011-10-17  Jochen Eisinger  <jochen@chromium.org>

        Make NavigationAction wrap a ResourceRequest instead of a KURL.
        https://bugs.webkit.org/show_bug.cgi?id=68803

        Use the request in the NavigationAction, if the FrameLoadRequest
        doesn't already contain a request.

        Reviewed by Nate Chapin.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::createWindow):

2011-10-17  James Robinson  <jamesr@chromium.org>

        [chromium] Fix a new[]/delete mismatch in InnerGestureRecognizerTest that makes valgrind sad
        https://bugs.webkit.org/show_bug.cgi?id=70273

        Reviewed by Mihai Parparita.

        * tests/InnerGestureRecognizerTest.cpp:
        (TouchSequence::~TouchSequence):

2011-10-17  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-10-17  Peter Beverloo  <peter@chromium.org>

        [Chromium] Add a missing semi-colon in ExternalPopupMenu.cpp
        https://bugs.webkit.org/show_bug.cgi?id=70232

        Reviewed by Andreas Kling.

        * src/ExternalPopupMenu.cpp:
        (WebKit::ExternalPopupMenu::didAcceptIndices):

2011-10-17  James Robinson  <jamesr@chromium.org>

        Unreviewed, rolling out r97690.
        http://trac.webkit.org/changeset/97690
        https://bugs.webkit.org/show_bug.cgi?id=70161

        Hits assertion in CCLayerTreeHostTests

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::onEndTest):
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::testTimeout):
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (WTF::CCLayerTreeHostTest::endTest):
        (WTF::CCLayerTreeHostTestThreadOnly::runTest):
        (WTF::TEST_F):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::commitCompleteOnCCThread):
        * tests/CCThreadTest.cpp:
        (WebKit::PingPongTestUsingTasks::ping):

2011-10-17  James Robinson  <jamesr@chromium.org>

        [chromium] Fix shutdown race when posting main thread task to CCThreadProxy and enable tests
        https://bugs.webkit.org/show_bug.cgi?id=70161

        Reviewed by David Levin.

        Enables the CCLayerTreeHostTest* tests by default. Most tests are run twice in a single thread and multiple
        thread configuration. Some tests run only in the multiple thread configuration if they depend on the compositor
        thread scheduling draws by itself.

        * tests/CCLayerTreeHostTest.cpp:
        (::CCLayerTreeHostTest::timeout):
        (::CCLayerTreeHostTest::clearTimeout):
        (::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (::CCLayerTreeHostTest::onEndTest):
        (::CCLayerTreeHostTest::TimeoutTask::TimeoutTask):
        (::CCLayerTreeHostTest::TimeoutTask::clearTest):
        (::CCLayerTreeHostTest::TimeoutTask::~TimeoutTask):
        (::CCLayerTreeHostTest::TimeoutTask::Run):
        (::CCLayerTreeHostTest::runTest):
        (::CCLayerTreeHostTest::doBeginTest):
        (::CCLayerTreeHostTestThreadOnly::runTest):
        (::CCLayerTreeHostTestSetNeedsRedraw::commitCompleteOnCCThread):

2011-10-17  Alok Priyadarshi  <alokp@chromium.org>

        Add layout tests for WebPlugin compositor path
        https://bugs.webkit.org/show_bug.cgi?id=69027

        Reviewed by James Robinson.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::printEnd):

2011-10-17  Chris Fleizach  <cfleizach@apple.com>

        AX: buttons of number type <input> controls are not fully accessible
        https://bugs.webkit.org/show_bug.cgi?id=70241

        Build fix. Fix matching enums.

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2011-10-17  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: don't check for debugger pause details in interactive ui tests
        https://bugs.webkit.org/show_bug.cgi?id=70228

        Removed debugger pause details validation. The only check left is that debugger pause event is fired when expected.

        Reviewed by Pavel Feldman.

        * src/js/Tests.js:
        (.TestSuite.prototype.testPauseWhenLoadingDevTools):
        (.TestSuite.prototype.testPauseWhenScriptIsRunning.didEvaluateInConsole):
        (.TestSuite.prototype.testPauseWhenScriptIsRunning.testScriptPause):
        (.TestSuite.prototype.testPauseWhenScriptIsRunning):
        (.TestSuite.prototype.testPauseInSharedWorkerInitialization):
        (.TestSuite.prototype._waitForScriptPause):

2011-10-17  Mikhail Naganov  <mnaganov@chromium.org>

        Unreviewed. Remove reference to third_party/skia/gpu.
        It was removed from Chromium DEPS in Chromium r105526.

        * DEPS:

2011-10-17  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-10-16  Adam Barth  <abarth@webkit.org>

        Always enable ENABLE(DOM_STORAGE)
        https://bugs.webkit.org/show_bug.cgi?id=70189

        Reviewed by Eric Seidel.

        * features.gypi:
        * src/StorageAreaProxy.cpp:
        * src/StorageAreaProxy.h:
        * src/StorageEventDispatcherChromium.cpp:
        * src/StorageEventDispatcherImpl.cpp:
        * src/StorageEventDispatcherImpl.h:
        * src/StorageNamespaceProxy.cpp:
        * src/StorageNamespaceProxy.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableLocalStorage):
        (WebKit::WebRuntimeFeatures::isLocalStorageEnabled):
        (WebKit::WebRuntimeFeatures::enableSessionStorage):
        (WebKit::WebRuntimeFeatures::isSessionStorageEnabled):
        * src/WebStorageAreaImpl.cpp:
        * src/WebStorageAreaImpl.h:
        * src/WebStorageEventDispatcherImpl.cpp:
        * src/WebStorageEventDispatcherImpl.h:
        * src/WebStorageNamespaceImpl.cpp:
        * src/WebStorageNamespaceImpl.h:

2011-10-15  Adam Barth  <abarth@webkit.org>

        Rename ENABLE(SKIA_TEXT) to USE(SKIA_TEXT)
        https://bugs.webkit.org/show_bug.cgi?id=70191

        Reviewed by Daniel Bates.

        * features.gypi:

2011-10-15  Adam Barth  <abarth@webkit.org>

        Remove unused ENABLE(SKIA_GPU)
        https://bugs.webkit.org/show_bug.cgi?id=70192

        Reviewed by Daniel Bates.

        There do not appear to be any references to this macro.

        * features.gypi:

2011-10-15  Vincent Scheib  <scheib@chromium.org>

        [Chromium] Populate WebMouseEvent movementX/Y on Mac
        https://bugs.webkit.org/show_bug.cgi?id=70167

        Reviewed by Adam Barth.

        * src/mac/WebInputEventFactory.mm:
        (WebKit::setWebEventLocationFromEventInView):

2011-10-15  Antoine Labour  <piman@chromium.org>

        Add WebAcceleratedContentLayer backed by a texture to support accelerated content hosting
        https://bugs.webkit.org/show_bug.cgi?id=70084

        Reviewed by James Robinson.

        * WebKit.gyp:
        * public/WebExternalTextureLayer.h: Added.
        (WebKit::WebExternalTextureLayer::WebExternalTextureLayer):
        (WebKit::WebExternalTextureLayer::~WebExternalTextureLayer):
        (WebKit::WebExternalTextureLayer::operator=):
        * src/WebExternalTextureLayer.cpp: Copied from Source/WebCore/platform/graphics/chromium/cc/CCPluginLayerImpl.h.
        (WebKit::WebExternalTextureLayer::create):
        (WebKit::WebExternalTextureLayer::setTextureId):
        (WebKit::WebExternalTextureLayer::textureId):
        (WebKit::WebExternalTextureLayer::setFlipped):
        (WebKit::WebExternalTextureLayer::flipped):
        (WebKit::WebExternalTextureLayer::WebExternalTextureLayer):
        (WebKit::WebExternalTextureLayer::operator=):
        (WebKit::WebExternalTextureLayer::operator PassRefPtr<WebExternalTextureLayerImpl>):
        * src/WebExternalTextureLayerImpl.cpp: Copied from Source/WebCore/platform/graphics/chromium/cc/CCPluginLayerImpl.h.
        (WebKit::WebExternalTextureLayerImpl::create):
        (WebKit::WebExternalTextureLayerImpl::WebExternalTextureLayerImpl):
        (WebKit::WebExternalTextureLayerImpl::~WebExternalTextureLayerImpl):
        (WebKit::WebExternalTextureLayerImpl::drawsContent):
        (WebKit::WebExternalTextureLayerImpl::paintContents):
        (WebKit::WebExternalTextureLayerImpl::notifySyncRequired):
        * src/WebExternalTextureLayerImpl.h: Copied from Source/WebCore/platform/graphics/chromium/cc/CCPluginLayerImpl.h.

2011-10-15  Michael Nordman  <michaeln@google.com>

        [Chromium] Some WebSQLDatabase in worker bug fixes.
        https://bugs.webkit.org/show_bug.cgi?id=70071

        - Test for a NULL webView WebWorkerClientImpl.
        - Avoid altering Database instance lifetimes during WorkerThread::stop().

        Reviewed by David Levin.

        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::allowFileSystem):
        (WebKit::WebWorkerClientImpl::allowDatabase):

2011-10-14  Darin Adler  <darin@apple.com>

       Try to fix Chromium build.

        * tests/PopupMenuTest.cpp:
        (WebKit::TestPopupMenuClient::valueChanged):
        Use toHTMLSelectElement instead of toSelectElement.

2011-10-14  Dmitry Lomov  <dslomov@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=70120
        [Chromium] Pass MessagePortArray to SerializedScriptValue::serialize/deserialize.
        This patch augments SerializedScriptValue with MessagePortArray* parameter to implement MessagePort 
        transfer within the message in the future.

        Reviewed by David Levin.

        * src/WebSerializedScriptValue.cpp:
        (WebKit::WebSerializedScriptValue::serialize):

2011-10-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-10-14  Daniel Cheng  <dcheng@chromium.org>

        Context-aware HTML paste for Chromium
        https://bugs.webkit.org/show_bug.cgi?id=62112

        Reviewed by Ryosuke Niwa.

        Add WebKit side for plumbing to receive context for HTML paste.

        * public/WebClipboard.h:
        (WebKit::WebClipboard::readHTML):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::clipboardReadHTML):

2011-10-14  Peter Beverloo  <peter@chromium.org>

        [Chromium] Inherit settings from Chromium's envsetup.sh, address a NDK todo
        https://bugs.webkit.org/show_bug.cgi?id=70028

        Reviewed by Adam Barth.

        * WebKit.gyp:
        * gyp_webkit:

2011-10-14  Ryosuke Niwa  <rniwa@webkit.org>

        Chromium Mac build fix after r97478.

        * src/mac/WebSubstringUtil.mm:
        (WebKit::WebSubstringUtil::attributedSubstringInRange):

2011-10-12  Ryosuke Niwa  <rniwa@webkit.org>

        Make the interface of locationAndLengthFromRange and rangeFromLocationAndLength consistent
        https://bugs.webkit.org/show_bug.cgi?id=69964

        Reviewed by Enrica Casucci.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::firstRectForCharacterRange):
        (WebKit::WebFrameImpl::characterIndexForPoint):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::compositionRange):
        (WebKit::WebViewImpl::getSelectionOffsetsAndTextInEditableContent):
        (WebKit::WebViewImpl::caretOrSelectionRange):
        * src/mac/WebSubstringUtil.mm:
        (WebKit::WebSubstringUtil::attributedSubstringInRange):

2011-10-13  Arko Saha  <arko@motorola.com>

        Microdata: Basic implementation of document.getItems() method.
        https://bugs.webkit.org/show_bug.cgi?id=68610

        Reviewed by Ryosuke Niwa.

        Added ENABLE(MICRODATA) feature flag. Implement document.getItems() DOM API.
        Spec : http://www.whatwg.org/specs/web-apps/current-work/complete/microdata.html

        * features.gypi:

2011-10-12  Hans Wennborg  <hans@chromium.org>

        IndexedDB: Remove SQLite backing store
        https://bugs.webkit.org/show_bug.cgi?id=69620

        Reviewed by Darin Fisher.

        Remove the SQLite backing store implementation; it is not used anymore.
        Also remove the maximumSize parameter, it is not used either.

        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::getDatabaseNames):
        (WebKit::WebIDBFactory::open):
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::getDatabaseNames):
        (WebKit::IDBFactoryBackendProxy::open):
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::getDatabaseNames):
        (WebKit::WebIDBFactoryImpl::open):
        * src/WebIDBFactoryImpl.h:

2011-10-14  Justin Schuh  <jschuh@chromium.org>

        Clear WebMediaPlayerClientImpl back pointer on destruction
        https://bugs.webkit.org/show_bug.cgi?id=69973

        Reviewed by James Robinson.

        Clear the backpointer and remove the unused m_currentFrame

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::~WebMediaPlayerClientImpl):
        (WebKit::WebMediaPlayerClientImpl::load):
        (WebKit::WebMediaPlayerClientImpl::getCurrentFrame):
        (WebKit::WebMediaPlayerClientImpl::putCurrentFrame):
        * src/WebMediaPlayerClientImpl.h:

2011-10-14  Polina Sokolova  <polina@chromium.org>

        Make it possible for plugins to get current fullscreen element.
        WebCore::Document already has webkitCurrentFullScreenElement().
        Add a wrapper for it in WebKit::WebDocument.
        https://bugs.webkit.org/show_bug.cgi?id=70076

        Reviewed by Darin Fisher.

        * public/WebDocument.h:
        * src/WebDocument.cpp:
        (WebKit::WebDocument::securityOrigin):
        (WebKit::WebDocument::isHTMLDocument):
        (WebKit::WebDocument::isPluginDocument):
        (WebKit::WebDocument::fullScreenElement):

2011-10-13  Antoine Labour  <piman@chromium.org>

        Expose layer debug borders to WebLayer
        https://bugs.webkit.org/show_bug.cgi?id=70079

        Reviewed by Darin Fisher.

        * public/WebLayer.h:
        * src/WebLayer.cpp:
        (WebKit::WebLayer::setDebugBorderColor):
        (WebKit::WebLayer::setDebugBorderWidth):

2011-10-13  Julien Chaffraix  <jchaffraix@webkit.org>

        Remove layerX / layerY from the Chromium API
        https://bugs.webkit.org/show_bug.cgi?id=70052

        Reviewed by Darin Fisher.

        * public/WebDOMMouseEvent.h:
        * src/WebDOMMouseEvent.cpp:
        Just remove the 2 properties without considering the ABI stability.

2011-10-13  Nico Weber  <thakis@chromium.org>

        [chromium] Automatically pull clang on `update-webkit --chromium` on mac
        https://bugs.webkit.org/show_bug.cgi?id=70058

        Reviewed by Adam Barth.

        * DEPS:

2011-10-13  John Knottenbelt  <jknotten@chromium.org>

        [Chromium] Allow building without speech input enabled.
        https://bugs.webkit.org/show_bug.cgi?id=69867

        Reviewed by Darin Fisher.

        * src/AssertMatchingEnums.cpp:
        * src/WebSpeechInputControllerMockImpl.cpp:
        (WebKit::WebSpeechInputControllerMock::create):
        * src/WebSpeechInputControllerMockImpl.h:
        * src/WebSpeechInputResult.cpp:

2011-10-13  Peng Huang  <shawn.p.huang@gmail.com>

        [chromium] Add a selectionBounds() method to WebWidget.
        https://bugs.webkit.org/show_bug.cgi?id=69028

        Reviewed by Darin Fisher.

        * public/WebWidget.h:
        (WebKit::WebWidget::selectionBounds):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::selectionRange):
        (WebKit::WebViewImpl::selectionBounds):
        * src/WebViewImpl.h:

2011-10-13  Kent Tamura  <tkent@chromium.org>

        Cleanup of HTMLSelectElement
        https://bugs.webkit.org/show_bug.cgi?id=69908

        Reviewed by Darin Adler.

        Change the HTMLSelectElement::listItems() return type:
          Vector<Element*> -> Vector<HTMLElement*>

        * src/WebSearchableFormData.cpp:
        (HTMLNames::IsSelectInDefaultState):
        * src/WebSelectElement.cpp:
        (WebKit::WebSelectElement::listItems):

2011-10-12  Joseph Pecoraro  <joepeck@webkit.org>

        Pass Parsed Accept Attribute MIME Types to WebKit Clients
        https://bugs.webkit.org/show_bug.cgi?id=69598

        Reviewed by Kent Tamura.

        Chromium uses the deprecated accept string. Switching to
        the new approach will require coordination with their port.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::runOpenPanel):

2011-10-12  Antoine Labour  <piman@chromium.org>

        Fix CCThreadTest.startPostAndWaitOnCondition
        https://bugs.webkit.org/show_bug.cgi?id=69967

        Reviewed by Darin Fisher.

        * tests/CCThreadTest.cpp:
        (WebKit::TEST):

2011-10-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-10-12  Nico Weber  <thakis@chromium.org>

        [chromium] Add a setSelectionToRange() method to WebFrame.
        https://bugs.webkit.org/show_bug.cgi?id=69846

        Also add a method to WebRange to create a range given a frame and an
        interval.

        This will be used to implement the "replacement range" feature of OS X
        IMEs, see http://codereview.chromium.org/8227018 (the change to
        render_widget.cc).
        The renderer will set the selection to the replacement range before
        calling confirmComposition(). This matches how WK2 does this, see
        Source/WebKit2/WebProcess/WebPage/mac/WebPageMac.mm,
        WebPage::setComposition(). The function convertToRange() was taken
        from there, too.

        Reviewed by Darin Fisher.

        * public/WebFrame.h:
        (WebKit::WebFrame::setSelectionToRange):
        * src/WebFrameImpl.cpp:
        (WebKit::WebViewImpl::setSelectionToRange):
        * src/WebFrameImpl.h:
        (WebKit::WebViewImpl::setSelectionToRange):
        * src/WebRange.cpp:
        (WebRange::fromGlobalRange):
        * src/WebRange.h:
        (WebRange::fromGlobalRange):

2011-10-12  Sergey Glazunov  <serg.glazunov@gmail.com>

        ScriptController::executeIfJavaScriptURL gets confused by synchronous frame loads
        https://bugs.webkit.org/show_bug.cgi?id=69777

        Reviewed by Adam Barth.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadJavaScriptURL):

2011-10-12  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: testPauseWhenLoadingDevTools is broken
        https://bugs.webkit.org/show_bug.cgi?id=69934

        Reviewed by Pavel Feldman.

        * src/js/Tests.js:

2011-10-12  Cary Clark  <caryclark@google.com>

        [Chromium] Prevent fallback fonts from purging while measuring
        https://bugs.webkit.org/show_bug.cgi?id=69855

        Reviewed by Eric Seidel.

        When Chrome computes the page width, an international page
        may bring in a fallback font. FontCache::getCachedFontData
        expects the font cache to be locked, so the measure path
        needs to include an instance of FontCachePurgePreventer.

        Adding FontCachePurgePreventer suppresses a debug-time assert
        when running PageCycler over international tests.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::contentsPreferredWidth):

2011-10-12  Pavel Podivilov  <podivilov@chromium.org>

        Unreviewed, CCThreadTest.startPostAndWaitOnCondition is flaky on linux.

        * tests/CCThreadTest.cpp:
        (WebKit::TEST):

2011-10-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-10-12  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector:  add test for pause in shared worker initialization
        https://bugs.webkit.org/show_bug.cgi?id=69915

        Add WebKit part of interactive ui test for pause in worker initialization.

        Reviewed by Pavel Feldman.

        * src/js/Tests.js:
        (.TestSuite.prototype.testPauseInSharedWorkerInitialization):

2011-10-12  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: repair interactive tests for debugger pause
        https://bugs.webkit.org/show_bug.cgi?id=69912

        Listen to DebuggerModel event instead of overriding private methods on it.

        Reviewed by Pavel Feldman.

        * src/js/Tests.js:
        (.TestSuite.prototype._waitForScriptPause):

2011-10-11  Steve VanDeBogart  <vandebo@chromium.org>

        [chromium] Add accessor for plugin request to not scale print output.
        https://bugs.webkit.org/show_bug.cgi?id=68853

        Reviewed by Darin Fisher.

        * public/WebFrame.h:
        * public/WebPlugin.h:
        (WebKit::WebPlugin::isPrintScalingDisabled):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::isPrintScalingDisabledForPlugin):
        * src/WebFrameImpl.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::isPrintScalingDisabled):
        * src/WebPluginContainerImpl.h:

2011-10-11  Antoine Labour  <piman@chromium.org>

        Separate compositor client thread from webkit's main thread.
        https://bugs.webkit.org/show_bug.cgi?id=69048

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebKitPlatformSupport.h:
        (WebKit::WebKitPlatformSupport::currentThread):
        * src/CCMainThreadImpl.cpp: Added.
        (WTF::TaskWrapper::TaskWrapper):
        (WTF::TaskWrapper::~TaskWrapper):
        (WTF::TaskWrapper::run):
        (WebCore::CCMainThread::initialize):
        (WebCore::CCMainThread::postTask):

2011-10-11  Simon Fraser  <simon.fraser@apple.com>

        Make custom scrollbar theme for use in DRT, to reduce pixel diffs between platforms
        https://bugs.webkit.org/show_bug.cgi?id=68134

        Reviewed by Darin Adler.

        Use ScrollbarThemeMock when the setting to use mock scrollbars is enabled.
        
        Make ScrollbarTheme::nativeTheme() private, and add a new static theme() method
        that reads the setting, and returns the mock theme if set. All callers now use
        theme() rther than nativeTheme(). Add the new ScrollbarTheme.cpp file to the build.

        * src/WebScrollbarImpl.cpp:
        (WebKit::WebScrollbar::defaultThickness):

2011-10-11  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r97202, r97207, and r97215.
        http://trac.webkit.org/changeset/97202
        http://trac.webkit.org/changeset/97207
        http://trac.webkit.org/changeset/97215
        https://bugs.webkit.org/show_bug.cgi?id=69894

        Broke builds (Requested by rniwa on #webkit).

        * src/AutofillPopupMenuClient.cpp:
        * src/AutofillPopupMenuClient.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::applyAutofillSuggestions):
        * tests/PopupMenuTest.cpp:

2011-10-11  Ryosuke Niwa  <rniwa@webkit.org>

        Second attempt to fix Chromium Windows build after r97202.

        * tests/PopupMenuTest.cpp:
        (WebKit::TestPopupMenuClient::boundingBoxRect):
        (WebKit::TestPopupMenuClient::setFocusedNode):

2011-10-11  Ryosuke Niwa  <rniwa@webkit.org>

        Chromium build fix attempt after r97202.

        * tests/PopupMenuTest.cpp:
        (WebKit::SelectPopupMenuTest::boundingBoxRect):

2011-10-11  Fady Samuel  <fsamuel@chromium.org>

        Towards making PopupMenuClient more testable
        https://bugs.webkit.org/show_bug.cgi?id=69631

        Reviewed by Simon Fraser.

        * src/AutofillPopupMenuClient.cpp:
        (WebKit::AutofillPopupMenuClient::boundingBoxRect):
        * src/AutofillPopupMenuClient.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::applyAutofillSuggestions):

2011-10-11  Dominic Mazzoni  <dmazzoni@google.com>

        WebAccessibilityObject needs titleUIElement
        https://bugs.webkit.org/show_bug.cgi?id=69869

        Reviewed by Dimitri Glazkov.

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::titleUIElement):

2011-10-10  Adam Klein  <adamk@chromium.org>

        [MutationObservers] Add stub implementation of WebKitMutationObserver
        https://bugs.webkit.org/show_bug.cgi?id=68949

        Reviewed by Ryosuke Niwa, Oliver Hunt, and Dimitri Glazkov.

        * features.gypi: Added 'enable_mutation_observers' variable.

2011-10-11  Mike Reed  <reed@google.com>

        re-add support for GDI text behind a compile flag
        https://bugs.webkit.org/show_bug.cgi?id=69530

        Reviewed by James Robinson.

        * features.gypi:

2011-10-11  Pavel Podivilov  <podivilov@chromium.org>

        Unreviewed, roll chromium revision to pick HTML speech input images update.

        * DEPS:

2011-10-11  Antoine Labour  <piman@chromium.org>

        Expose WebLayer::isNull
        https://bugs.webkit.org/show_bug.cgi?id=69813

        Reviewed by Darin Fisher.

        * public/WebLayer.h:
        (WebKit::WebLayer::isNull):

2011-10-10  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r97087.
        http://trac.webkit.org/changeset/97087
        https://bugs.webkit.org/show_bug.cgi?id=69805

        failing assert on debug builds (Requested by simonjam on
        #webkit).

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadJavaScriptURL):

2011-10-10  Nico Weber  <thakis@chromium.org>

        [chromium] Pull tools/clang from upstream.
        https://bugs.webkit.org/show_bug.cgi?id=69797

        Reviewed by Adam Barth.

        * DEPS:

2011-10-10  Sergey Glazunov  <serg.glazunov@gmail.com>

        ScriptController::executeIfJavaScriptURL gets confused by synchronous frame loads
        https://bugs.webkit.org/show_bug.cgi?id=69777

        Reviewed by Adam Barth.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadJavaScriptURL):

2011-10-10  Dominic Mazzoni  <dmazzoni@google.com>

        [Chromium] Get rid of WebAccessibilityCache.
        https://bugs.webkit.org/show_bug.cgi?id=68224

        Reviewed by Dimitri Glazkov.

        * WebKit.gyp:
        * public/WebAccessibilityCache.h: Removed.
        * src/WebAccessibilityCache.cpp: Removed.
        * src/WebAccessibilityCacheImpl.cpp: Removed.
        * src/WebAccessibilityCacheImpl.h: Removed.

2011-10-10  Pavel Podivilov  <podivilov@chromium.org>

        Unreviewed, mark CCThreadTest.startPostAndWaitOnCondition as flaky on win and mac.

        * tests/CCThreadTest.cpp:
        (WebKit::TEST):

2011-10-07  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: allow to start WorkerContext paused
        https://bugs.webkit.org/show_bug.cgi?id=69635

        Expose methods for pausing shared worker on start.

        Reviewed by Pavel Feldman.

        * public/WebSharedWorker.h:
        (WebKit::WebSharedWorker::pauseWorkerContextOnStart): specifies that the worker
        context should be paused and weit for explicit call to resumeWorkerContext before
        running its script.
        (WebKit::WebSharedWorker::resumeWorkerContext):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::WebSharedWorkerImpl):
        (WebKit::WebSharedWorkerImpl::startWorkerContext):
        (WebKit::WebSharedWorkerImpl::pauseWorkerContextOnStart):
        (WebKit::resumeWorkerContextTask):
        (WebKit::WebSharedWorkerImpl::resumeWorkerContext):
        (WebKit::WebSharedWorkerImpl::attachDevTools):
        (WebKit::reconnectToWorkerContextInspectorTask):
        (WebKit::WebSharedWorkerImpl::reattachDevTools):
        (WebKit::WebSharedWorkerImpl::detachDevTools):
        (WebKit::WebSharedWorkerImpl::dispatchDevToolsMessage):
        * src/WebSharedWorkerImpl.h:
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::startWorkerContext):
        (WebKit::WebWorkerClientImpl::updateInspectorStateCookie):
        * src/WebWorkerClientImpl.h:
        * src/WebWorkerImpl.cpp:
        (WebKit::WebWorkerImpl::startWorkerContext):
        (WebKit::WebWorkerImpl::detachDevTools):
        (WebKit::WebWorkerImpl::dispatchDevToolsMessage):

2011-10-09  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] Zoom animator front-end
        https://bugs.webkit.org/show_bug.cgi?id=68035

        Modifications to get zoom texture-scale parameters from ScaleAnimator directly
        instead of via Settings.

        Reviewed by Kenneth Russell.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):

2011-10-07  Antoine Labour  <piman@chromium.org>

        Webkit API for compositor
        https://bugs.webkit.org/show_bug.cgi?id=69107

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebContentLayer.h: Added.
        (WebKit::WebContentLayer::WebContentLayer):
        (WebKit::WebContentLayer::~WebContentLayer):
        (WebKit::WebContentLayer::operator=):
        * public/WebContentLayerClient.h: Added.
        (WebKit::WebContentLayerClient::~WebContentLayerClient):
        * public/WebLayer.h: Added.
        (WebKit::WebLayer::WebLayer):
        (WebKit::WebLayer::operator=):
        (WebKit::WebLayer::to):
        (WebKit::WebLayer::toConst):
        (WebKit::WebLayer::unwrap):
        (WebKit::WebLayer::constUnwrap):
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebLayerClient.h: Added.
        (WebKit::WebLayerClient::~WebLayerClient):
        * public/WebLayerTreeView.h: Added.
        (WebKit::WebLayerTreeView::Settings::Settings):
        (WebKit::WebLayerTreeView::WebLayerTreeView):
        (WebKit::WebLayerTreeView::~WebLayerTreeView):
        (WebKit::WebLayerTreeView::operator=):
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebLayerTreeViewClient.h: Added.
        (WebKit::WebLayerTreeViewClient::~WebLayerTreeViewClient):
        * src/WebContentLayer.cpp: Added.
        (WebKit::WebContentLayer::create):
        (WebKit::WebContentLayer::setDrawsContent):
        (WebKit::WebContentLayer::drawsContent):
        (WebKit::WebContentLayer::setNeedsDisplay):
        (WebKit::WebContentLayer::dirtyRect):
        (WebKit::WebContentLayer::WebContentLayer):
        (WebKit::WebContentLayer::operator=):
        (WebKit::WebContentLayer::operator PassRefPtr<WebContentLayerImpl>):
        * src/WebContentLayerImpl.cpp: Added.
        (WebKit::WebContentLayerImpl::create):
        (WebKit::WebContentLayerImpl::WebContentLayerImpl):
        (WebKit::WebContentLayerImpl::~WebContentLayerImpl):
        (WebKit::WebContentLayerImpl::setDrawsContent):
        (WebKit::WebContentLayerImpl::drawsContent):
        (WebKit::WebContentLayerImpl::paintContents):
        (WebKit::WebContentLayerImpl::notifySyncRequired):
        * src/WebContentLayerImpl.h: Added.
        * src/WebLayer.cpp: Added.
        (WebKit::WebLayer::create):
        (WebKit::WebLayer::~WebLayer):
        (WebKit::WebLayer::reset):
        (WebKit::WebLayer::assign):
        (WebKit::WebLayer::equals):
        (WebKit::WebLayer::rootLayer):
        (WebKit::WebLayer::parent):
        (WebKit::WebLayer::addChild):
        (WebKit::WebLayer::insertChild):
        (WebKit::WebLayer::replaceChild):
        (WebKit::WebLayer::removeFromParent):
        (WebKit::WebLayer::removeAllChildren):
        (WebKit::WebLayer::setAnchorPoint):
        (WebKit::WebLayer::anchorPoint):
        (WebKit::WebLayer::setAnchorPointZ):
        (WebKit::WebLayer::anchorPointZ):
        (WebKit::WebLayer::setBounds):
        (WebKit::WebLayer::bounds):
        (WebKit::WebLayer::setMasksToBounds):
        (WebKit::WebLayer::masksToBounds):
        (WebKit::WebLayer::setMaskLayer):
        (WebKit::WebLayer::maskLayer):
        (WebKit::WebLayer::setOpacity):
        (WebKit::WebLayer::opacity):
        (WebKit::WebLayer::setOpaque):
        (WebKit::WebLayer::opaque):
        (WebKit::WebLayer::setPosition):
        (WebKit::WebLayer::position):
        (WebKit::WebLayer::setSublayerTransform):
        (WebKit::WebLayer::sublayerTransform):
        (WebKit::WebLayer::setTransform):
        (WebKit::WebLayer::transform):
        (WebKit::WebLayer::WebLayer):
        (WebKit::WebLayer::operator=):
        (WebKit::WebLayer::operator PassRefPtr<LayerChromium>):
        * src/WebLayerImpl.cpp: Added.
        (WebKit::WebLayerImpl::create):
        (WebKit::WebLayerImpl::WebLayerImpl):
        (WebKit::WebLayerImpl::~WebLayerImpl):
        (WebKit::WebLayerImpl::drawsContent):
        (WebKit::WebLayerImpl::paintContents):
        (WebKit::WebLayerImpl::notifySyncRequired):
        * src/WebLayerImpl.h: Added.
        * src/WebLayerTreeView.cpp: Added.
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        (WebKit::WebLayerTreeView::create):
        (WebKit::WebLayerTreeView::reset):
        (WebKit::WebLayerTreeView::assign):
        (WebKit::WebLayerTreeView::equals):
        (WebKit::WebLayerTreeView::composite):
        (WebKit::WebLayerTreeView::setViewportSize):
        (WebKit::WebLayerTreeView::viewportSize):
        (WebKit::WebLayerTreeView::WebLayerTreeView):
        (WebKit::WebLayerTreeView::operator=):
        (WebKit::WebLayerTreeView::operator PassRefPtr<CCLayerTreeHost>):
        * src/WebLayerTreeViewImpl.cpp: Added.
        (WebKit::WebLayerTreeViewImpl::create):
        (WebKit::WebLayerTreeViewImpl::WebLayerTreeViewImpl):
        (WebKit::WebLayerTreeViewImpl::~WebLayerTreeViewImpl):
        (WebKit::WebLayerTreeViewImpl::animateAndLayout):
        (WebKit::WebLayerTreeViewImpl::applyScrollDelta):
        (WebKit::WebLayerTreeViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebLayerTreeViewImpl::didRecreateGraphicsContext):
        (WebKit::WebLayerTreeViewImpl::scheduleComposite):
        * src/WebLayerTreeViewImpl.h: Added.

2011-10-07  Shawn Singh  <shawnsingh@chromium.org>

        First round of unit tests for CCLayerTreeHostCommon.
        https://bugs.webkit.org/show_bug.cgi?id=69197

        Reviewed by James Robinson.

        This round of tests focuses on verifying the computation of matrix transforms
        in calculateDrawTransformsAndVisibility.

        * WebKit.gypi:
        * tests/CCLayerTreeHostCommonTest.cpp: Added.
        (WebCore::setLayerPropertiesForTesting):
        (WebCore::executeCalculateDrawTransformsAndVisibility):
        (WebCore::remove3DComponentOfMatrix):
        (WebCore::LayerChromiumWithForcedDrawsContent::LayerChromiumWithForcedDrawsContent):
        (WebCore::LayerChromiumWithForcedDrawsContent::drawsContent):
        (WebCore::TEST):

2011-10-07  Tony Chang  <tony@chromium.org>

        Fix chromium compile when using the components build.  This test
        helper file is using methods not available when compiling as a dll.

        * WebKit.gyp:

2011-10-07  Adam Barth  <abarth@webkit.org>

        Remove setShouldPaintCustomScrollbars, which has no callers
        https://bugs.webkit.org/show_bug.cgi?id=69300

        Reviewed by Darin Adler.

        Anders tells me this function no longer has any callers.  We should
        remove it before it grows any!

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:

2011-10-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r96879.
        http://trac.webkit.org/changeset/96879
        https://bugs.webkit.org/show_bug.cgi?id=69618

        Broke CCLayerTreeHostTestShortlived1 on chromium mac.
        (Requested by podivilov on #webkit).

        * features.gypi:
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::onEndTest):

2011-10-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r96909.
        http://trac.webkit.org/changeset/96909
        https://bugs.webkit.org/show_bug.cgi?id=69616

        Broke chromium mac compilation (Requested by podivilov on
        #webkit).

        * WebKit.gyp:
        * public/WebContentLayer.h: Removed.
        * public/WebContentLayerClient.h: Removed.
        * public/WebLayer.h: Removed.
        * public/WebLayerClient.h: Removed.
        * public/WebLayerTreeView.h: Removed.
        * public/WebLayerTreeViewClient.h: Removed.
        * src/WebContentLayer.cpp: Removed.
        * src/WebContentLayerImpl.cpp: Removed.
        * src/WebContentLayerImpl.h: Removed.
        * src/WebLayer.cpp: Removed.
        * src/WebLayerImpl.cpp: Removed.
        * src/WebLayerImpl.h: Removed.
        * src/WebLayerTreeView.cpp: Removed.
        * src/WebLayerTreeViewImpl.cpp: Removed.
        * src/WebLayerTreeViewImpl.h: Removed.

2011-10-07  Pavel Podivilov  <podivilov@chromium.org>

        Unreviewed, revert r96924.

        * public/WebContentLayer.h:

2011-10-07  Pavel Podivilov  <podivilov@chromium.org>

        Unreviewed, fix mac build after r96909.

        * public/WebContentLayer.h:

2011-10-07  Anna Cavender  <annacc@chromium.org>

        Turn ENABLE_VIDEO_TRACK on for chromium.
        https://bugs.webkit.org/show_bug.cgi?id=69460

        Reviewed by David Levin.

        * features.gypi:

2011-10-07  Pavel Feldman  <pfeldman@google.com>

        Not reviewed: also add glass pane to the frame document's body.

        * src/js/DevTools.js:

2011-10-07  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: glass pane does not disappear after network panel's grid column resize.
        https://bugs.webkit.org/show_bug.cgi?id=69607

        Reviewed by Yury Semikhatsky.

        * src/js/DevTools.js:

2011-10-07  Nate Chapin  <japhet@chromium.org>

        Always call setActive() in WebViewImpl::setFocus(),
        not just when enabling focus.
        https://bugs.webkit.org/show_bug.cgi?id=65220

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * WebKit.gypi:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setFocus):
        * tests/FrameTestHelpers.cpp: Added, refactored out of WebFrameTest.cpp.
        (WebKit::FrameTestHelpers::registerMockedURLLoad):
        (WebKit::FrameTestHelpers::loadFrame):
        (WebKit::FrameTestHelpers::defaultWebFrameClient):
        (WebKit::FrameTestHelpers::defaultWebViewClient):
        (WebKit::FrameTestHelpers::createWebViewAndLoad):
        * tests/FrameTestHelpers.h: Added, refactored out of WebFrameTest.cpp.
        * tests/WebFrameTest.cpp:
        * tests/WebViewTest.cpp: Added.

2011-10-06  Bill Budge  <bbudge@chromium.org>

        Adds a field, "saveAs", to WebFileChooserParams to present the file chooser
        dialog in "Save As" mode (allows the user to choose a possibly non-existent file
        for saving).
        https://bugs.webkit.org/show_bug.cgi?id=69301

        Reviewed by Darin Fisher.

        * public/WebFileChooserParams.h:
        (WebKit::WebFileChooserParams::WebFileChooserParams):

2011-10-06  Antoine Labour  <piman@chromium.org>

        Webkit API for compositor
        https://bugs.webkit.org/show_bug.cgi?id=69107

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebContentLayer.h: Added.
        (WebKit::WebContentLayer::WebContentLayer):
        (WebKit::WebContentLayer::~WebContentLayer):
        (WebKit::WebContentLayer::operator=):
        * public/WebContentLayerClient.h: Added.
        (WebKit::WebContentLayerClient::~WebContentLayerClient):
        * public/WebLayer.h: Added.
        (WebKit::WebLayer::WebLayer):
        (WebKit::WebLayer::operator=):
        (WebKit::WebLayer::to):
        (WebKit::WebLayer::toConst):
        (WebKit::WebLayer::unwrap):
        (WebKit::WebLayer::constUnwrap):
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebLayerClient.h: Added.
        (WebKit::WebLayerClient::~WebLayerClient):
        * public/WebLayerTreeView.h: Added.
        (WebKit::WebLayerTreeView::Settings::Settings):
        (WebKit::WebLayerTreeView::WebLayerTreeView):
        (WebKit::WebLayerTreeView::~WebLayerTreeView):
        (WebKit::WebLayerTreeView::operator=):
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebLayerTreeViewClient.h: Added.
        (WebKit::WebLayerTreeViewClient::~WebLayerTreeViewClient):
        * src/WebContentLayer.cpp: Added.
        (WebKit::WebContentLayer::create):
        (WebKit::WebContentLayer::setDrawsContent):
        (WebKit::WebContentLayer::drawsContent):
        (WebKit::WebContentLayer::setNeedsDisplay):
        (WebKit::WebContentLayer::dirtyRect):
        (WebKit::WebContentLayer::WebContentLayer):
        (WebKit::WebContentLayer::operator=):
        (WebKit::WebContentLayer::operator PassRefPtr<WebContentLayerImpl>):
        * src/WebContentLayerImpl.cpp: Added.
        (WebKit::WebContentLayerImpl::create):
        (WebKit::WebContentLayerImpl::WebContentLayerImpl):
        (WebKit::WebContentLayerImpl::~WebContentLayerImpl):
        (WebKit::WebContentLayerImpl::setDrawsContent):
        (WebKit::WebContentLayerImpl::drawsContent):
        (WebKit::WebContentLayerImpl::paintContents):
        (WebKit::WebContentLayerImpl::notifySyncRequired):
        * src/WebContentLayerImpl.h: Added.
        * src/WebLayer.cpp: Added.
        (WebKit::WebLayer::create):
        (WebKit::WebLayer::~WebLayer):
        (WebKit::WebLayer::reset):
        (WebKit::WebLayer::assign):
        (WebKit::WebLayer::equals):
        (WebKit::WebLayer::rootLayer):
        (WebKit::WebLayer::parent):
        (WebKit::WebLayer::addChild):
        (WebKit::WebLayer::insertChild):
        (WebKit::WebLayer::replaceChild):
        (WebKit::WebLayer::removeFromParent):
        (WebKit::WebLayer::removeAllChildren):
        (WebKit::WebLayer::setAnchorPoint):
        (WebKit::WebLayer::anchorPoint):
        (WebKit::WebLayer::setAnchorPointZ):
        (WebKit::WebLayer::anchorPointZ):
        (WebKit::WebLayer::setBounds):
        (WebKit::WebLayer::bounds):
        (WebKit::WebLayer::setMasksToBounds):
        (WebKit::WebLayer::masksToBounds):
        (WebKit::WebLayer::setMaskLayer):
        (WebKit::WebLayer::maskLayer):
        (WebKit::WebLayer::setOpacity):
        (WebKit::WebLayer::opacity):
        (WebKit::WebLayer::setOpaque):
        (WebKit::WebLayer::opaque):
        (WebKit::WebLayer::setPosition):
        (WebKit::WebLayer::position):
        (WebKit::WebLayer::setSublayerTransform):
        (WebKit::WebLayer::sublayerTransform):
        (WebKit::WebLayer::setTransform):
        (WebKit::WebLayer::transform):
        (WebKit::WebLayer::WebLayer):
        (WebKit::WebLayer::operator=):
        (WebKit::WebLayer::operator PassRefPtr<LayerChromium>):
        * src/WebLayerImpl.cpp: Added.
        (WebKit::WebLayerImpl::create):
        (WebKit::WebLayerImpl::WebLayerImpl):
        (WebKit::WebLayerImpl::~WebLayerImpl):
        (WebKit::WebLayerImpl::drawsContent):
        (WebKit::WebLayerImpl::paintContents):
        (WebKit::WebLayerImpl::notifySyncRequired):
        * src/WebLayerImpl.h: Added.
        * src/WebLayerTreeView.cpp: Added.
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        (WebKit::WebLayerTreeView::create):
        (WebKit::WebLayerTreeView::reset):
        (WebKit::WebLayerTreeView::assign):
        (WebKit::WebLayerTreeView::equals):
        (WebKit::WebLayerTreeView::composite):
        (WebKit::WebLayerTreeView::setViewportSize):
        (WebKit::WebLayerTreeView::viewportSize):
        (WebKit::WebLayerTreeView::WebLayerTreeView):
        (WebKit::WebLayerTreeView::operator=):
        (WebKit::WebLayerTreeView::operator PassRefPtr<CCLayerTreeHost>):
        * src/WebLayerTreeViewImpl.cpp: Added.
        (WebKit::WebLayerTreeViewImpl::create):
        (WebKit::WebLayerTreeViewImpl::WebLayerTreeViewImpl):
        (WebKit::WebLayerTreeViewImpl::~WebLayerTreeViewImpl):
        (WebKit::WebLayerTreeViewImpl::animateAndLayout):
        (WebKit::WebLayerTreeViewImpl::applyScrollDelta):
        (WebKit::WebLayerTreeViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebLayerTreeViewImpl::didRecreateGraphicsContext):
        (WebKit::WebLayerTreeViewImpl::scheduleComposite):
        * src/WebLayerTreeViewImpl.h: Added.

2011-10-06  Kent Tamura  <tkent@chromium.org>

        [Chromium] Build fix for r96907.

        * tests/PopupMenuTest.cpp:
        (WebKit::TestPopupMenuClient::valueChanged):
        Use HTMLSelectElement instead of SelectElement.

2011-10-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r96896.
        http://trac.webkit.org/changeset/96896
        https://bugs.webkit.org/show_bug.cgi?id=69601

        broke windows and mac chromium builds (Requested by simonjam
        on #webkit).

        * WebKit.gyp:
        * public/WebContentLayer.h: Removed.
        * public/WebContentLayerClient.h: Removed.
        * public/WebLayer.h: Removed.
        * public/WebLayerClient.h: Removed.
        * public/WebLayerTreeView.h: Removed.
        * public/WebLayerTreeViewClient.h: Removed.
        * src/WebContentLayer.cpp: Removed.
        * src/WebContentLayerImpl.cpp: Removed.
        * src/WebContentLayerImpl.h: Removed.
        * src/WebLayer.cpp: Removed.
        * src/WebLayerImpl.cpp: Removed.
        * src/WebLayerImpl.h: Removed.
        * src/WebLayerTreeView.cpp: Removed.
        * src/WebLayerTreeViewImpl.cpp: Removed.
        * src/WebLayerTreeViewImpl.h: Removed.

2011-10-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-10-06  Antoine Labour  <piman@chromium.org>

        Webkit API for compositor
        https://bugs.webkit.org/show_bug.cgi?id=69107

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebContentLayer.h: Added.
        (WebKit::WebContentLayer::WebContentLayer):
        (WebKit::WebContentLayer::~WebContentLayer):
        (WebKit::WebContentLayer::operator=):
        * public/WebContentLayerClient.h: Added.
        (WebKit::WebContentLayerClient::~WebContentLayerClient):
        * public/WebLayer.h: Added.
        (WebKit::WebLayer::WebLayer):
        (WebKit::WebLayer::operator=):
        (WebKit::WebLayer::to):
        (WebKit::WebLayer::toConst):
        (WebKit::WebLayer::unwrap):
        (WebKit::WebLayer::constUnwrap):
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebLayerClient.h: Added.
        (WebKit::WebLayerClient::~WebLayerClient):
        * public/WebLayerTreeView.h: Added.
        (WebKit::WebLayerTreeView::Settings::Settings):
        (WebKit::WebLayerTreeView::WebLayerTreeView):
        (WebKit::WebLayerTreeView::~WebLayerTreeView):
        (WebKit::WebLayerTreeView::operator=):
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebLayerTreeViewClient.h: Added.
        (WebKit::WebLayerTreeViewClient::~WebLayerTreeViewClient):
        * src/WebContentLayer.cpp: Added.
        (WebKit::WebContentLayer::create):
        (WebKit::WebContentLayer::setDrawsContent):
        (WebKit::WebContentLayer::drawsContent):
        (WebKit::WebContentLayer::setNeedsDisplay):
        (WebKit::WebContentLayer::dirtyRect):
        (WebKit::WebContentLayer::WebContentLayer):
        (WebKit::WebContentLayer::operator=):
        (WebKit::WebContentLayer::operator PassRefPtr<WebContentLayerImpl>):
        * src/WebContentLayerImpl.cpp: Added.
        (WebKit::WebContentLayerImpl::create):
        (WebKit::WebContentLayerImpl::WebContentLayerImpl):
        (WebKit::WebContentLayerImpl::~WebContentLayerImpl):
        (WebKit::WebContentLayerImpl::setDrawsContent):
        (WebKit::WebContentLayerImpl::drawsContent):
        (WebKit::WebContentLayerImpl::paintContents):
        (WebKit::WebContentLayerImpl::notifySyncRequired):
        * src/WebContentLayerImpl.h: Added.
        * src/WebLayer.cpp: Added.
        (WebKit::WebLayer::create):
        (WebKit::WebLayer::~WebLayer):
        (WebKit::WebLayer::reset):
        (WebKit::WebLayer::assign):
        (WebKit::WebLayer::equals):
        (WebKit::WebLayer::rootLayer):
        (WebKit::WebLayer::parent):
        (WebKit::WebLayer::addChild):
        (WebKit::WebLayer::insertChild):
        (WebKit::WebLayer::replaceChild):
        (WebKit::WebLayer::removeFromParent):
        (WebKit::WebLayer::removeAllChildren):
        (WebKit::WebLayer::setAnchorPoint):
        (WebKit::WebLayer::anchorPoint):
        (WebKit::WebLayer::setAnchorPointZ):
        (WebKit::WebLayer::anchorPointZ):
        (WebKit::WebLayer::setBounds):
        (WebKit::WebLayer::bounds):
        (WebKit::WebLayer::setMasksToBounds):
        (WebKit::WebLayer::masksToBounds):
        (WebKit::WebLayer::setMaskLayer):
        (WebKit::WebLayer::maskLayer):
        (WebKit::WebLayer::setOpacity):
        (WebKit::WebLayer::opacity):
        (WebKit::WebLayer::setOpaque):
        (WebKit::WebLayer::opaque):
        (WebKit::WebLayer::setPosition):
        (WebKit::WebLayer::position):
        (WebKit::WebLayer::setSublayerTransform):
        (WebKit::WebLayer::sublayerTransform):
        (WebKit::WebLayer::setTransform):
        (WebKit::WebLayer::transform):
        (WebKit::WebLayer::WebLayer):
        (WebKit::WebLayer::operator=):
        (WebKit::WebLayer::operator PassRefPtr<LayerChromium>):
        * src/WebLayerImpl.cpp: Added.
        (WebKit::WebLayerImpl::create):
        (WebKit::WebLayerImpl::WebLayerImpl):
        (WebKit::WebLayerImpl::~WebLayerImpl):
        (WebKit::WebLayerImpl::drawsContent):
        (WebKit::WebLayerImpl::paintContents):
        (WebKit::WebLayerImpl::notifySyncRequired):
        * src/WebLayerImpl.h: Added.
        * src/WebLayerTreeView.cpp: Added.
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        (WebKit::WebLayerTreeView::create):
        (WebKit::WebLayerTreeView::reset):
        (WebKit::WebLayerTreeView::assign):
        (WebKit::WebLayerTreeView::equals):
        (WebKit::WebLayerTreeView::composite):
        (WebKit::WebLayerTreeView::setViewportSize):
        (WebKit::WebLayerTreeView::viewportSize):
        (WebKit::WebLayerTreeView::WebLayerTreeView):
        (WebKit::WebLayerTreeView::operator=):
        (WebKit::WebLayerTreeView::operator PassRefPtr<CCLayerTreeHost>):
        * src/WebLayerTreeViewImpl.cpp: Added.
        (WebKit::WebLayerTreeViewImpl::create):
        (WebKit::WebLayerTreeViewImpl::WebLayerTreeViewImpl):
        (WebKit::WebLayerTreeViewImpl::~WebLayerTreeViewImpl):
        (WebKit::WebLayerTreeViewImpl::animateAndLayout):
        (WebKit::WebLayerTreeViewImpl::applyScrollDelta):
        (WebKit::WebLayerTreeViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebLayerTreeViewImpl::didRecreateGraphicsContext):
        (WebKit::WebLayerTreeViewImpl::scheduleComposite):
        * src/WebLayerTreeViewImpl.h: Added.

2011-10-06  James Robinson  <jamesr@chromium.org>

        [chromium] Remove USE(THREADED_COMPOSITING) from the tree
        https://bugs.webkit.org/show_bug.cgi?id=69489

        Reviewed by Darin Fisher.

        Updated CCLayerTreeHostTest::onEndTest() to pump all pending messages
        after posting the Quit task and before tearing down any test
        infrastructure.

        * features.gypi:
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):

2011-10-06  James Robinson  <jamesr@chromium.org>

        [chromium] Remove obsolete WebWidgetClient::didActivateAcceleratedCompositing call
        https://bugs.webkit.org/show_bug.cgi?id=69576

        Reviewed by Darin Fisher.

        The chromium implementation of this function went away at r104017.

        * public/WebWidgetClient.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-10-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r96861.
        http://trac.webkit.org/changeset/96861
        https://bugs.webkit.org/show_bug.cgi?id=69573

        This patch didn't compile on windows (Requested by annacc on
        #webkit).

        * features.gypi:

2011-10-06  Anna Cavender  <annacc@chromium.org>

        Turn ENABLE_VIDEO_TRACK on for chromium.
        https://bugs.webkit.org/show_bug.cgi?id=69460

        Reviewed by David Levin.

        * features.gypi:

2011-10-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r96791.
        http://trac.webkit.org/changeset/96791
        https://bugs.webkit.org/show_bug.cgi?id=69528

        webkit_unit_tests broken on Mac and Win (Requested by
        hwennborg on #webkit).

        * features.gypi:
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):

2011-10-06  Hans Wennborg  <hans@chromium.org>

        [Chromium] WebKit.gyp fix to unbreak Linux(shared) build after r96791

        Unreviewed gardening.

        * WebKit.gyp:

2011-10-03  Hans Wennborg  <hans@chromium.org>

        IndexedDB: Remove SQLite-LevelDB migration code
        https://bugs.webkit.org/show_bug.cgi?id=69264

        Reviewed by Tony Chang.

        Remove setOverrideBackingStoreType. It was used in the layout test
        for migration.

        * public/WebIDBFactory.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::getDatabaseNames):
        (WebKit::WebIDBFactoryImpl::open):

2011-10-06  James Robinson  <jamesr@chromium.org>

        [chromium] Remove USE(THREADED_COMPOSITING) from the tree
        https://bugs.webkit.org/show_bug.cgi?id=69489

        Reviewed by Darin Fisher.

        * features.gypi:
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):

2011-10-05  Alexei Svitkine  <asvitkine@chromium.org>

        Make destructor of WebURLLoaderClient virtual.
        https://bugs.webkit.org/show_bug.cgi?id=69457

        Reviewed by Darin Fisher.

        * public/WebURLLoaderClient.h:
        (WebKit::WebURLLoaderClient::~WebURLLoaderClient):

2011-10-05  Vangelis Kokkevis  <vangelis@chromium.org>

        Switching threaded compositor from a compile time option to a
        run time one.
        https://bugs.webkit.org/show_bug.cgi?id=69391

        Reviewed by Darin Fisher.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setMinimumAccelerated2dCanvasSize):
        (WebKit::WebSettingsImpl::setUseThreadedCompositor):
        * src/WebSettingsImpl.h:
        (WebKit::WebSettingsImpl::useThreadedCompositor):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebViewImpl::scheduleComposite):
        (WebKit::WebViewImpl::graphicsContext3D):

2011-10-05  Jer Noble  <jer.noble@apple.com>

        WEB_AUDIO does not compile on Leopard 32-bit.
        https://bugs.webkit.org/show_bug.cgi?id=69292

        Reviewed by Simon Fraser.

        Platform-independent portions of WEB_AUDIO have changed from double -> float, and 
        platform-specific subclasses must change as well.

        * src/AudioDestinationChromium.cpp:
        (WebCore::AudioDestination::create):
        (WebCore::AudioDestinationChromium::AudioDestinationChromium):
        (WebCore::AudioDestination::hardwareSampleRate):
        * src/AudioDestinationChromium.h:
        (WebCore::AudioDestinationChromium::sampleRate):

2011-10-05  James Robinson  <jamesr@chromium.org>

        [chromium] Hook WebCompositor interface for input events up to the compositor proper
        https://bugs.webkit.org/show_bug.cgi?id=69394

        Reviewed by Darin Fisher.

        This teaches WebCompositorImpl about WebCore::CCInputHandler, which WebCompositorImpl implements, and
        CCScrollController, which WebCompositorImpl will use in the future to do actual scrolling. One thing that is a
        bit unusual here is WebCore::CCInputHandler::create() which is defined in WebCompositorImpl.cpp.  This is
        because we need a WebKit object (WebKit::WebCompositorImpl) to be owned by a WebCore object (WebCore::CCThreadProxy).
        The WebCore side only needs to know about the interface, CCInputHandler, but the actual implementation has to
        live in WebKit in order to know about the concrete type.

        * src/WebCompositorImpl.cpp:
        (WebCore::CCInputHandler::create):
        (WebKit::WebCompositor::fromIdentifier):
        (WebKit::WebCompositorImpl::fromIdentifier):
        (WebKit::WebCompositorImpl::WebCompositorImpl):
        (WebKit::WebCompositorImpl::~WebCompositorImpl):
        (WebKit::WebCompositorImpl::setClient):
        (WebKit::WebCompositorImpl::handleInputEvent):
        (WebKit::WebCompositorImpl::identifier):
        * src/WebCompositorImpl.h:
        (WebKit::WebCompositorImpl::create):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:
        * tests/WebCompositorImplTest.cpp:

2011-10-05  Anna Cavender  <annacc@chromium.org>

        Functions to make <track> enabled at runtime.
        https://bugs.webkit.org/show_bug.cgi?id=69352

        Reviewed by Adam Barth.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableVideoTrack):
        (WebKit::WebRuntimeFeatures::isVideoTrackEnabled):

2011-10-05  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: provide a way for persisting worker inspector state
        https://bugs.webkit.org/show_bug.cgi?id=69422

        Provided an API for saving/restoring worker inspector state.

        Reviewed by Pavel Feldman.

        * public/WebCommonWorkerClient.h:
        (WebKit::WebCommonWorkerClient::saveDevToolsAgentState):
        * public/WebSharedWorker.h:
        (WebKit::WebSharedWorker::reattachDevTools):
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::reconnectToWorkerContextInspectorTask):
        (WebKit::WebSharedWorkerImpl::reattachDevTools):
        * src/WebSharedWorkerImpl.h:
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::updateInspectorStateCookie):
        (WebKit::WebWorkerBase::updateInspectorStateCookieTask):
        * src/WebWorkerBase.h:
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::updateInspectorStateCookie):
        * src/WebWorkerClientImpl.h:

2011-10-04  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: save inspector state into single string instead of string map
        https://bugs.webkit.org/show_bug.cgi?id=69335

        Now that Chromium side is updated, remove unused methods from the DevToolsAgent API.

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgent.h:
        * public/WebDevToolsAgentClient.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::updateInspectorStateCookie):
        * src/WebDevToolsAgentImpl.h:

2011-10-04  Kent Tamura  <tkent@chromium.org>

        Introduce feature flags for incomplete input types
        https://bugs.webkit.org/show_bug.cgi?id=68971

        Reviewed by Hajime Morita.

        * features.gypi: Add disabled ENABLE_INPUT_TYPE_* flags.

2011-10-04  Scott Graham  <scottmg@chromium.org>

        Add GAMEPAD feature flag
        https://bugs.webkit.org/show_bug.cgi?id=66859

        Reviewed by Darin Fisher.

        * features.gypi:

2011-10-04  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Moved files towards GTK removal
        https://bugs.webkit.org/show_bug.cgi?id=69229

        Reviewed by Tony Chang.

        * WebKit.gyp:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setScrollbarColors):
        * src/linux/WebFontInfo.cpp: Renamed from Source/WebKit/chromium/src/gtk/WebFontInfo.cpp.
        (WebKit::WebFontInfo::familyForChars):
        (WebKit::WebFontInfo::renderStyleForStrike):

2011-10-04  James Robinson  <jamesr@chromium.org>

        [chromium] Extract scheduling logic from CCThreadProxy to its own class
        https://bugs.webkit.org/show_bug.cgi?id=69049

        Reviewed by Kenneth Russell.

        Adds some unit tests for the new CCScheduler class. Since the class is very simple today, the tests are
        similarly quite simple.

        * WebKit.gypi:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::postSetNeedsCommitThenRedrawToMainThread):
        (WTF::CCLayerTreeHostTest::dispatchSetNeedsCommitThenRedraw):
        (WTF::CCLayerTreeHostTestShortlived2::beginTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::beginTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::beginTest):
        * tests/CCSchedulerTest.cpp: Added.

2011-10-04  Scott Graham  <scottmg@chromium.org>

        occasional crash in Chromium in dispatching keyEvent
        https://bugs.webkit.org/show_bug.cgi?id=67941

        Reviewed by Tony Chang.

        Guard Frame while handling keyEvent, as it can lose last reference due
        to actions of handler.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::keyEvent):

2011-10-04  Anders Carlsson  <andersca@apple.com>

        Remove PlatformWheelEvent::m_isAccepted
        https://bugs.webkit.org/show_bug.cgi?id=69357

        Reviewed by Darin Adler.

        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder):
        m_isAccepted has been removed.

        * src/WebScrollbarImpl.cpp:
        (WebKit::WebScrollbarImpl::onMouseWheel):
        Just return the value of handleWheelEvent.

2011-10-04  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: save inspector state into single string instead of string map
        https://bugs.webkit.org/show_bug.cgi?id=69335

        Added explicit methods for saving and restoring agent runtime state.

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgent.h:
        * public/WebDevToolsAgentClient.h:
        (WebKit::WebDevToolsAgentClient::saveAgentRuntimeState):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::reattach):
        (WebKit::WebDevToolsAgentImpl::updateInspectorStateCookie):
        * src/WebDevToolsAgentImpl.h:

2011-10-03  James Robinson  <jamesr@chromium.org>

        [chromium] Tweak WebCompositor API for input event handling to express three possible states
        https://bugs.webkit.org/show_bug.cgi?id=69304

        Reviewed by Darin Fisher.

        * public/WebCompositorClient.h:
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositorImpl::~WebCompositorImpl):
        (WebKit::WebCompositorImpl::handleInputEvent):

2011-10-03  Anders Carlsson  <andersca@apple.com>

        Remove custom scrollbar painting hooks
        https://bugs.webkit.org/show_bug.cgi?id=69163

        Reviewed by Alexey Proskuryakov.

        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setShouldPaintCustomScrollbars):

2011-10-03  Elliot Poger  <epoger@google.com>

        webkit->chromium DEPS roll 103471->103694
        https://bugs.webkit.org/show_bug.cgi?id=69271

        This brings in a new tools/win/supalink directory from
        http://src.chromium.org/viewvc/chrome?view=rev&revision=103474

        Reviewed by Adam Barth.

        * DEPS:

2011-10-03  James Robinson  <jamesr@chromium.org>

        [chromium] Add WebWidget API for accessing the current WebCompositor
        https://bugs.webkit.org/show_bug.cgi?id=69181

        Reviewed by Darin Fisher.

        Add new WebWidgetClient::did(Activate|Deactivate)Compositor calls intended to replace
        didActivateAccleratedCompositing(bool) so that the enable call can be parameterized.

        Add a WebCompositor identifier parameter to didEnableAcceleratedCompositing that can be used on the compositor
        thread to get access to a WebCompositor pointer.

        * public/WebWidget.h:
        (WebKit::WebWidget::compositor):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::compositor):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:

2011-10-03  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r96481.
        http://trac.webkit.org/changeset/96481
        https://bugs.webkit.org/show_bug.cgi?id=69251

        Breaks webkit_unit_tests on Linux(dbg) (Requested by hwennborg
        on #webkit).

        * WebKit.gypi:
        * public/WebCompositor.h:
        * public/WebWidgetClient.h:
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositorImpl::WebCompositorImpl):
        (WebKit::WebCompositorImpl::~WebCompositorImpl):
        (WebKit::WebCompositorImpl::setClient):
        (WebKit::WebCompositorImpl::handleInputEvent):
        * src/WebCompositorImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        * tests/WebCompositorImplTest.cpp: Removed.

2011-10-02  James Robinson  <jamesr@chromium.org>

        [chromium] Add WebWidget API for accessing the current WebCompositor
        https://bugs.webkit.org/show_bug.cgi?id=69181

        Reviewed by Darin Fisher.

        Add new WebWidgetClient::did(Activate|Deactivate)Compositor calls intended to replace
        didActivateAccleratedCompositing(bool) so that the enable call can be parameterized.

        Add a WebCompositor identifier parameter to didEnableAcceleratedCompositing that can be used on the compositor
        thread to get access to a WebCompositor pointer.

        * public/WebWidget.h:
        (WebKit::WebWidget::compositor):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::compositor):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:

2011-09-30  Adrienne Walker  <enne@google.com>

        [chromium] Track separate scroll deltas on the compositor thread
        https://bugs.webkit.org/show_bug.cgi?id=69034

        Reviewed by James Robinson.

        Add testing support for scroll deltas on layers.

        * WebKit.gypi:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::applyScrollDelta):
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostImplTest.cpp: Added.
        (WebCore::CCLayerTreeHostImplTest::CCLayerTreeHostImplTest):
        (WebCore::CCLayerTreeHostImplTest::expectClearedScrollDeltasRecursive):
        (WebCore::CCLayerTreeHostImplTest::expectContains):
        (WebCore::TEST_F):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::TestHooks::applyScrollDelta):
        (WTF::MockLayerTreeHostClient::applyScrollDelta):
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (WTF::CCLayerTreeHostTestThreadOnly::runTest):
        (WTF::CCLayerTreeHostTestScrollSimple::CCLayerTreeHostTestScrollSimple):
        (WTF::CCLayerTreeHostTestScrollSimple::beginTest):
        (WTF::CCLayerTreeHostTestScrollSimple::beginCommitOnCCThread):
        (WTF::CCLayerTreeHostTestScrollSimple::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestScrollSimple::applyScrollDelta):
        (WTF::CCLayerTreeHostTestScrollSimple::afterTest):
        (WTF::TEST_F):
        (WTF::CCLayerTreeHostTestScrollMultipleRedraw::CCLayerTreeHostTestScrollMultipleRedraw):
        (WTF::CCLayerTreeHostTestScrollMultipleRedraw::beginTest):
        (WTF::CCLayerTreeHostTestScrollMultipleRedraw::beginCommitOnCCThread):
        (WTF::CCLayerTreeHostTestScrollMultipleRedraw::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestScrollMultipleRedraw::applyScrollDelta):
        (WTF::CCLayerTreeHostTestScrollMultipleRedraw::afterTest):
        * tests/TreeSynchronizerTest.cpp:
        (WebCore::TEST):

2011-09-30  Shawn Singh  <shawnsingh@chromium.org>

        Adding unit tests for LayerChromium.  Emphasis on verifying
        behavior of notifySyncRequired callback and tree manipulations.
        https://bugs.webkit.org/show_bug.cgi?id=68572

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/LayerChromiumTest.cpp: Added.

2011-09-30  James Robinson  <jamesr@chromium.org>

        [chromium] Pass a processed bool in WebCompositorClient::didHandleInputEvent to indicate if the event was processed
        https://bugs.webkit.org/show_bug.cgi?id=69169

        Reviewed by Darin Fisher.

        If the compositor does not process the input event the embedder might want to do something with it - for
        example, if the input event type is part of a CTRL+T keyboard accelerator sequence the browser might want to
        open a new tab. This passes that state through the didHandleInputEvent callback.

        * public/WebCompositorClient.h:
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositorImpl::handleInputEvent):

2011-09-30  Elliot Poger  <epoger@google.com>

        webkit->chromium DEPS roll 102910->103471
        https://bugs.webkit.org/show_bug.cgi?id=69160

        Reviewed by Adam Barth.

        * DEPS:

2011-09-29  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: [chromium] expose inspector protocol version to the embedder.
        https://bugs.webkit.org/show_bug.cgi?id=69092

        Reviewed by Yury Semikhatsky.

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::inspectorProtocolVersion):
        (WebKit::WebDevToolsAgent::supportsInspectorProtocolVersion):

2011-09-30  James Robinson  <jamesr@chromium.org>

        [chromium] Add WebKit API for sending input events to the compositor thread
        https://bugs.webkit.org/show_bug.cgi?id=69117

        Reviewed by Darin Fisher.

        Adds a new WebKit interface to allow the embedder to pass input events directly to the compositor thread.
        Exposes the new WebCompositor interface and associated client. These interfaces are slightly different in that
        they can only be interacted with from the compositor thread.

        Changes the initialization path for the compositor thread to using an externally allocated and managed thread
        instead of one internal to WebCore so that the embedder can interact with the thread more easily. This also
        simplifies the startup and shutdown paths.  The contract is that WebCompositor::setThread() must be called
        before any compositor can be initialized and the passed-in thread must outlive all compositor instances.

        Each WebCompositor instance is associated with a WebWidget.  There isn't any way to get a WebCompositor for a
        given WebWidget in this patch, that will be done in a follow-up.

        * WebKit.gyp:
        * public/WebCompositor.h:
        (WebKit::WebCompositor::~WebCompositor):
        * public/WebCompositorClient.h:
        (WebKit::WebCompositorClient::~WebCompositorClient):
        * src/CCThreadImpl.cpp:
        (WebKit::CCThreadImpl::create):
        (WebKit::CCThreadImpl::CCThreadImpl):
        * src/CCThreadImpl.h:
        * src/WebCompositorImpl.cpp: Added.
        (WebKit::WebCompositor::setThread):
        (WebKit::WebCompositorImpl::WebCompositorImpl):
        (WebKit::WebCompositorImpl::~WebCompositorImpl):
        (WebKit::WebCompositorImpl::setClient):
        (WebKit::WebCompositorImpl::handleInputEvent):
        * src/WebCompositorImpl.h:
        (WebKit::WebCompositorImpl::create):
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        * tests/CCThreadTest.cpp:
        (WebKit::TEST):

2011-09-29  Iain Merrick  <husky@google.com>

        Add unit test for CCLayerSorter
        https://bugs.webkit.org/show_bug.cgi?id=68622

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCLayerSorterTest.cpp: Added.
        (WebCore::TEST):

2011-09-29  Hans Wennborg  <hans@chromium.org>

        IndexedDB: Use LevelDB also for in-memory databases
        https://bugs.webkit.org/show_bug.cgi?id=68903

        Reviewed by Steve Block.

        Don't fall back to SQLite or use a temporary dir for in-memory
        databases (Incognito and layout tests); LevelDB supports in-memory
        databases now.

        * public/WebIDBFactory.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::getDatabaseNames):
        (WebKit::WebIDBFactoryImpl::open):

2011-09-28  Fady Samuel  <fsamuel@chromium.org>

        [Chromium] Seperate GTK specific Gyp rules from X11 Gyp rules
        https://bugs.webkit.org/show_bug.cgi?id=68936

        Reviewed by Tony Chang.

        * WebKit.gyp:
        * public/gtk/WebFontInfo.h:
        * public/linux/WebFontInfo.h: Copied from Source/WebKit/chromium/public/gtk/WebFontInfo.h.

2011-09-27  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-09-27  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: Bug with console.log and popstate/hashchange events
        https://bugs.webkit.org/show_bug.cgi?id=67732

        Added WebKit part of a new interactive UI test for the bug with duplicated console messages after navigation back.

        Reviewed by Pavel Feldman.

        * src/js/Tests.js:
        (.TestSuite.prototype.testConsoleOnNavigateBack.firstConsoleMessageReceived):
        (.TestSuite.prototype.testConsoleOnNavigateBack.didClickLink):
        (.TestSuite.prototype.testConsoleOnNavigateBack.didNavigateBack):
        (.TestSuite.prototype.testConsoleOnNavigateBack.didCompleteNavigation):
        (.TestSuite.prototype.testConsoleOnNavigateBack):

2011-09-27  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-09-26  Nat Duca  <nduca@chromium.org>

        [chromium] Make CCThreadProxy draw
        https://bugs.webkit.org/show_bug.cgi?id=67417

        Disable CCLayerTreeHostTest temporarily. Will re-enable
        with https://bugs.webkit.org/show_bug.cgi?id=67418

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostTest.cpp:

2011-09-26  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Second half of IDBFactory.getDatabaseNames implementation
        https://bugs.webkit.org/show_bug.cgi?id=68818

        Reviewed by Tony Chang.

        Adds ability to enumerate IndexedDB databases within an origin.

        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::onSuccess):
        * src/IDBCallbacksProxy.h:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::getDatabaseNames):
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onSuccess):
        * src/WebIDBCallbacksImpl.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::getDatabaseNames):
        * src/WebIDBFactoryImpl.h:

2011-09-26  Fady Samuel  <fsamuel@chromium.org>

        Removed an unnecessary include in WebFrameImpl
        https://bugs.webkit.org/show_bug.cgi?id=68834

        Reviewed by Darin Fisher.

        * src/WebFrameImpl.cpp:

2011-09-26  Mihai Parparita  <mihaip@chromium.org>

        Fix copy and paste error in r96002.

        * tests/InnerGestureRecognizerTest.cpp:
        (TEST_F):

2011-09-26  Mihai Parparita  <mihaip@chromium.org>

        Disable Chromium gesture recognizer tests that started to fail on the
        Mac bots recently.

        * tests/InnerGestureRecognizerTest.cpp:
        (TEST_F):

2011-09-26  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] Revise zoom animator backend to use full transform instead of just scale.
        https://bugs.webkit.org/show_bug.cgi?id=68535

        Reviewed by Kenneth Russell.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setZoomLevel):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):

2011-09-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r95256.
        http://trac.webkit.org/changeset/95256
        https://bugs.webkit.org/show_bug.cgi?id=68814

        Temporary CRASH calls no longer needed (Requested by enne on
        #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):

2011-09-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-09-24  Adam Barth  <abarth@webkit.org>

        Always enable ENABLE(OFFLINE_WEB_APPLICATIONS)
        https://bugs.webkit.org/show_bug.cgi?id=68767

        Reviewed by Eric Seidel.

        * features.gypi:
        * src/ApplicationCacheHost.cpp:
        * src/ApplicationCacheHostInternal.h:
        * src/AssertMatchingEnums.cpp:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::reachedApplicationCacheOriginQuota):
        * src/ChromeClientImpl.h:
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::applicationCacheHost):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableApplicationCache):
        (WebKit::WebRuntimeFeatures::isApplicationCacheEnabled):

2011-09-23  Adam Klein  <adamk@chromium.org>

        Add ENABLE_MUTATION_OBSERVERS feature flag
        https://bugs.webkit.org/show_bug.cgi?id=68732

        Reviewed by Ojan Vafai.

        This flag will guard an implementation of the "Mutation Observers" proposed in
        http://lists.w3.org/Archives/Public/public-webapps/2011JulSep/1622.html

        * features.gypi:

2011-09-23  Jay Civelli  <jcivelli@chromium.org>

        Making some WebBlob methods exportable.
        This is needed by the shared lib chromium build.
        https://bugs.webkit.org/show_bug.cgi?id=68709

        Reviewed by Darin Fisher.

        * public/WebBlob.h:

2011-09-23  Varun Jain  <varunjain@google.com>

        Refactor WebViewImpl::scrollFocusedNodeIntoRect to a better place and add tests 
        https://bugs.webkit.org/show_bug.cgi?id=68198

        Reviewed by Dimitri Glazkov.

        * public/WebView.h:
        (WebKit::WebView::scrollFocusedNodeIntoRect):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollFocusedNodeIntoRect):

2011-09-23  Mihai Parparita  <mihaip@chromium.org>

        Unreviewed, rolling out r95860.
        http://trac.webkit.org/changeset/95860
        https://bugs.webkit.org/show_bug.cgi?id=68648

        Breaks overhang rendering on Chromium Mac

        * features.gypi:

2011-09-23  Adam Klein  <adamk@chromium.org>

        [chromium] Remove WEBWIDGET_HAS_ANIMATE_CHANGES #define
        https://bugs.webkit.org/show_bug.cgi?id=68720

        Reviewed by James Robinson.

        References to this macro were removed in http://crrev.com/102314.

        * public/WebWidget.h:

2011-09-23  Stephen Chenney  <schenney@chromium.org>

        [Chromium] Crash in WebCore::DatabaseObserver
        https://bugs.webkit.org/show_bug.cgi?id=67805

        Reviewed by David Levin.

        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::canEstablishDatabase): Added a check for a
        null frame or page, and return false if null. Investigated
        changing the fall-through return value to false but decided against
        it given the way the code is used and existing default values for
        related code. Reproduction and testing depends on having a document
        with no frame or no page, which sometimes happens in practice but is
        hard to construct explicitly.

2011-09-23  Scott Graham  <scottmg@chromium.org>

        occasional crash in Chromium in dispatching keyEvent
        https://bugs.webkit.org/show_bug.cgi?id=67941

        Reviewed by Darin Fisher.

        Use focusedWebCoreNode() to handle null document for frame when
        retrieving focused node in handling keyEvent.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::keyEvent):

2011-09-23  Fady Samuel  <fsamuel@chromium.org>

        Refactor paintOverhangAreas to allow non-Mac Chromium platforms to reuse code
        https://bugs.webkit.org/show_bug.cgi?id=68648

        Reviewed by Dimitri Glazkov.

        * features.gypi:

2011-09-23  Elliot Poger  <epoger@google.com>

        update layout_tests to account for new default of use_skia=1
        https://bugs.webkit.org/show_bug.cgi?id=68698

        Rolls Source/WebKit/chromium/DEPS to pick up new default use_skia=1
        from http://src.chromium.org/viewvc/chrome?view=rev&revision=102532
        (Chromium-on-Mac now uses the Skia graphics library instead of
        Core Graphics).

        Also updates layout_test code to work with that change.

        Reviewed by Mihai Parparita.

        * DEPS:

2011-09-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-09-22  James Robinson  <jamesr@chromium.org>

        Unreviewed, rolling out r95699.
        http://trac.webkit.org/changeset/95699
        https://bugs.webkit.org/show_bug.cgi?id=67417

        Makes many chromium compositor tests crash

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (WTF::TEST_F):
        * tests/TreeSynchronizerTest.cpp:
        (WebCore::TEST):

2011-09-22  Nat Duca  <nduca@chromium.org>

        [chromium] Make CCThreadProxy draw
        https://bugs.webkit.org/show_bug.cgi?id=67417

        Disable CCLayerTreeHostTest temporarily. Will re-enable
        with https://bugs.webkit.org/show_bug.cgi?id=67418

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostTest.cpp:

2011-09-21  Joshua Bell  <jsbell@chromium.org>

        Implement WebKit side of IDBFactory::getDatabaseNames
        https://bugs.webkit.org/show_bug.cgi?id=68037

        Reviewed by Tony Chang.

        Interface changes and stub implementations for
        new IndexedDB IDBFactory.getDatabaseNames. This is
        part one of a two-sided patch.

        * public/WebIDBCallbacks.h:
        (WebKit::WebIDBCallbacks::onSuccess):
        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::getDatabaseNames):

2011-09-21  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Code cleanup in gesture recognizer unit tests
        https://bugs.webkit.org/show_bug.cgi?id=68561

        Fix some style nits in the gesture recognizer unit tests.

        Reviewed by David Levin.

        * tests/InnerGestureRecognizerTest.cpp:
        (InspectableGestureRecognizerChromium::stubEdgeFunction):
        (BuildablePlatformTouchPoint::BuildablePlatformTouchPoint):
        (TEST_F):

2011-09-21  Aaron Boodman  <aa@chromium.org>

        Remove old and busted context notification APIs
        https://bugs.webkit.org/show_bug.cgi?id=68381

        Reviewed by David Levin.

        * public/WebFrameClient.h:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didCreateScriptContext):
        (WebKit::FrameLoaderClientImpl::willReleaseScriptContext):

2011-09-21  Xianzhu Wang  <wangxianzhu@chromium.org>

        Ensure TestWebKitAPI works on mac, win, chromium-mac and chromium-linux
        https://bugs.webkit.org/show_bug.cgi?id=68206

        Reviewed by Tony Chang.

        * WebKit.gyp:

2011-09-21  chandra shekar vallala  <chandra.vallala@gmail.com>

        [chromium]ClearFocusedNode doesn't clear the cursor or selection in editable div element.
        https://bugs.webkit.org/show_bug.cgi?id=68351

        Reviewed by Darin Fisher.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::clearFocusedNode):

2011-09-20  Jay Civelli  <jcivelli@chromium.org>

        This CL makes it possible to create a blob from Chromium.
        https://bugs.webkit.org/show_bug.cgi?id=68286

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebBlob.h: Added.
        * src/WebBlob.cpp: Added.

2011-09-20  Jochen Eisinger  <jochen@chromium.org>

        [chromium] remove obsolete WebPermissionClient::allowImages method
        https://bugs.webkit.org/show_bug.cgi?id=68380

        Reviewed by Darin Fisher.

        * DEPS:
        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowImage):

2011-09-20  Aaron Boodman  <aa@chromium.org>

        Rework script context creation/release notifications
        https://bugs.webkit.org/show_bug.cgi?id=67828

        Reviewed by Adam Barth.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didCreateScriptContext):
        (WebKit::WebFrameClient::didDestroyScriptContext):
        (WebKit::WebFrameClient::willReleaseScriptContext):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didCreateScriptContext):
        (WebKit::FrameLoaderClientImpl::willReleaseScriptContext):
        * src/FrameLoaderClientImpl.h:
        * tests/WebFrameTest.cpp:
        (WebKit::TEST_F):
        (WebKit::ContextLifetimeTestWebFrameClient::Notification::Notification):
        (WebKit::ContextLifetimeTestWebFrameClient::Notification::~Notification):
        (WebKit::ContextLifetimeTestWebFrameClient::Notification::Equals):
        (WebKit::ContextLifetimeTestWebFrameClient::~ContextLifetimeTestWebFrameClient):
        (WebKit::ContextLifetimeTestWebFrameClient::reset):
        (WebKit::ContextLifetimeTestWebFrameClient::didCreateScriptContext):
        (WebKit::ContextLifetimeTestWebFrameClient::willReleaseScriptContext):
        * tests/data/context_notifications_test.html: Added.
        * tests/data/context_notifications_test_frame.html: Added.

2011-09-19  Geoffrey Garen  <ggaren@apple.com>

        Removed ENABLE_JSC_MULTIPLE_THREADS and related #ifdefs.
        https://bugs.webkit.org/show_bug.cgi?id=68422

        Missed this one case before.

        * features.gypi:

2011-09-19  Raymond Toy  <rtoy@google.com>

        Ask for audio hardware buffer size instead of using hardwired constants.
        https://bugs.webkit.org/show_bug.cgi?id=67952

        Reviewed by Kenneth Russell.

        * public/WebKitPlatformSupport.h:
        (WebKit::WebKitPlatformSupport::audioHardwareBufferSize): Declare
        new member function audioHardwareBufferSize.
        * src/AudioDestinationChromium.cpp:
        (WebCore::AudioDestinationChromium::AudioDestinationChromium):
        Call audioHardwareBufferSize() to get buffer size; update
        m_callbackBuffersize and m_renderCountPerCallback appropriately.
        Remove global variables callbackBufferSize and
        renderCountPerCallback.  Add constant for maximum
        allowed buffer size and verify we don't exceed it.
        (WebCore::AudioDestinationChromium::render): Use new member
        variables instead of globals.
        * src/AudioDestinationChromium.h:
        Define new member variables m_callbackBufferSize and
        m_renderCountPerCallback

2011-09-19  Adam Barth  <abarth@webkit.org>

        Always enable ENABLE(EVENTSOURCE)
        https://bugs.webkit.org/show_bug.cgi?id=68414

        Reviewed by Eric Seidel.

        * features.gypi:

2011-09-19  Robert Kroeger  <rjkroege@chromium.org>

        Suppress flakey test on windows in Chromium gesture recognizer
        https://bugs.webkit.org/show_bug.cgi?id=68408

        Reviewed by Adam Barth.

        * tests/InnerGestureRecognizerTest.cpp:
        (TEST_F):

2011-09-19  Dominic Mazzoni  <dmazzoni@google.com>

        Expose AXObjectCache methods so that WebAccessibilityCache
        can be deleted.
        https://bugs.webkit.org/show_bug.cgi?id=68225

        Reviewed by Dimitri Glazkov.

        This patch exposes the functionality needed from AXObjectCache
        with new methods in WebAccessibilityObject and WebDocument.
        Next, Chromium will be updated to use only these methods and
        not WebAccessibilityCache. Then, WebAccessibilityCache can be
        deleted from WebKit.

        * public/WebAccessibilityObject.h:
        * public/WebDocument.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::enableAccessibility):
        (WebKit::WebAccessibilityObject::accessibilityEnabled):
        (WebKit::WebAccessibilityObject::axID):
        * src/WebDocument.cpp:
        (WebKit::WebDocument::accessibilityObject):
        (WebKit::WebDocument::accessibilityObjectFromID):

2011-09-19  Bill Budge  <bbudge@chromium.org>

        Perform HTTP method and header validation in AssociatedURLLoader for
        requests coming from untrusted code (eg. Native Client in Chrome). Use
        the same code as XMLHttpRequest to reduce code duplication and have
        behavior identical to XHR in Javascript. Add an 'untrustedHTTP' option
        to WebURLLoaderOptions, which AssociatedURLLoader can use to determine
        if it should check the request method and headers.
        https://bugs.webkit.org/show_bug.cgi?id=67655

        Reviewed by Darin Fisher.

        * public/WebURLLoaderOptions.h:
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::setDelayedError):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        * tests/AssociatedURLLoaderTest.cpp:
        (WebKit::AssociatedURLLoaderTest::CheckMethodFails):
        (WebKit::AssociatedURLLoaderTest::CheckHeaderFails):
        (WebKit::AssociatedURLLoaderTest::CheckFails):
        (WebKit::TEST_F):

2011-09-19  Adam Barth  <abarth@webkit.org>

        Rename ENABLE(OPENTYPE_SANITIZER) to USE(OPENTYPE_SANITIZER)
        https://bugs.webkit.org/show_bug.cgi?id=68292

        Reviewed by Eric Seidel.

        * features.gypi:

2011-09-19  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r95385 and r95457.
        http://trac.webkit.org/changeset/95385
        http://trac.webkit.org/changeset/95457
        https://bugs.webkit.org/show_bug.cgi?id=68395

        Broke chromium browser_tests (Requested by dslomov on
        #webkit).

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didCreateIsolatedScriptContext):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didCreateScriptContextForFrame):
        (WebKit::FrameLoaderClientImpl::didDestroyScriptContextForFrame):
        (WebKit::FrameLoaderClientImpl::didCreateIsolatedScriptContext):
        * src/FrameLoaderClientImpl.h:
        * tests/WebFrameTest.cpp:
        (WebKit::TEST_F):
        * tests/data/context_notifications_test.html: Removed.
        * tests/data/context_notifications_test_frame.html: Removed.

2011-09-19  Aaron Boodman  <aa@chromium.org>

        r95385 broke Chromium. Fix it.
        https://bugs.webkit.org/show_bug.cgi?id=68378

        Unreviewed, build fix.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didCreateScriptContext):
        (WebKit::FrameLoaderClientImpl::willReleaseScriptContext):

2011-09-19  Jochen Eisinger  <jochen@chromium.org>

        Unreviewed, build fix

        It's not enough to disable clang plugins.

        * gyp_webkit:

2011-09-19  Jochen Eisinger  <jochen@chromium.org>

        [chromium] Disable clang when building chromium in WebKit
        https://bugs.webkit.org/show_bug.cgi?id=68343

        Reviewed by Adam Barth.

        * DEPS:
        * gyp_webkit:

2011-09-19  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Gesture recognizer fires taptype only every other touch
        down/up sequence https://bugs.webkit.org/show_bug.cgi?id=68368
 
        Reviewed by Adam Barth.

        The addition of doubletap detection to the gesture recognizer missed some of the
        outgoing edges in the recognizer state machine. Thsi change simplifies the logic
        and handles all outgoing edges.


        * tests/InnerGestureRecognizerTest.cpp:
        Additional tests added to ensure that all edges in the state
        machine are accounted for.
        (BuildablePlatformTouchEvent::BuildablePlatformTouchEvent):
        (SimulateAndTestFirstClick):
        (TEST_F):

2011-09-19  Peter Rybin  <peter.rybin@gmail.com>

        TextPosition refactoring: Merge ZeroBasedNumber and OneBasedNumber classes
        https://bugs.webkit.org/show_bug.cgi?id=63541

        Reviewed by Adam Barth.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::executeScript):
        (WebKit::WebFrameImpl::executeScriptInIsolatedWorld):
        (WebKit::WebFrameImpl::executeScriptAndReturnValue):

2011-09-19  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r95416.
        http://trac.webkit.org/changeset/95416
        https://bugs.webkit.org/show_bug.cgi?id=68367

        Broke chromium-mac (Requested by beverloo on #webkit).

        * DEPS:

2011-09-19  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-09-19  Ilya Tikhonovsky  <loislo@chromium.org>

        Web Inspector: extend timeline coverage.
        https://bugs.webkit.org/show_bug.cgi?id=68260

        Another place with js function call from native.

        Reviewed by Pavel Feldman.

        * src/WebDevToolsFrontendImpl.cpp:
        (WebKit::WebDevToolsFrontendImpl::dispatchOnInspectorFrontend):

2011-09-17  Mihai Parparita  <mihaip@chromium.org>

        FrameLoaderClient BackForwardList-related methods are unsued
        https://bugs.webkit.org/show_bug.cgi?id=68293

        Reviewed by Darin Adler.

        Remove FrameLoaderClient methods that were added by r51629, since only        
        the old (since-deleted) Android port needed them.

        * src/FrameLoaderClientImpl.cpp:
        * src/FrameLoaderClientImpl.h:

2011-09-17  Aaron Boodman  <aa@chromium.org>

        Rework script context creation/release notifications
        https://bugs.webkit.org/show_bug.cgi?id=67828

        Reviewed by Adam Barth.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didCreateScriptContext):
        (WebKit::WebFrameClient::didDestroyScriptContext):
        (WebKit::WebFrameClient::willReleaseScriptContext):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didCreateScriptContext):
        (WebKit::FrameLoaderClientImpl::willReleaseScriptContext):
        * src/FrameLoaderClientImpl.h:

2011-09-17  chandra shekar vallala  <chandra.vallala@motorola.com>

        [chromium]The focus of an input field inside an Iframe doesn't get cleared even though clearFocusedNode is called.
        https://bugs.webkit.org/show_bug.cgi?id=68162

        Add a unit-test to check whether the focus of node is get cleared when clearFocusNode called.
        This test check for focus of input node inside a frame after clear focus get called.
        Reviewed by Adam Barth.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::clearFocusedNode):
        * tests/WebFrameTest.cpp:
        (WebKit::TEST_F): Added a unit test to make sure that focus of the node is get cleared.
        * tests/data/autofocus_input_field_iframe.html: Added.
        * tests/data/iframe_clear_focused_node_test.html: Added.

2011-09-16  Adam Barth  <abarth@webkit.org>

        Rename ENABLE(LEVELDB) to USE(LEVELDB)
        https://bugs.webkit.org/show_bug.cgi?id=68290

        Reviewed by Darin Adler.

        * features.gypi:
        * tests/IDBLevelDBCodingTest.cpp:

2011-09-16  Jochen Eisinger  <jochen@chromium.org>

        Rename FrameLoaderClient::allowImages to FrameLoaderClient::allowImage and include the image URL as parameter
        https://bugs.webkit.org/show_bug.cgi?id=68071

        Reviewed by Adam Barth.

        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowImage):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowImage):
        * src/FrameLoaderClientImpl.h:

2011-09-16  Dmitry Lomov  <dslomov@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=67733
        [Chromium] Separate WebKit initialization and V8 initialization in chromium port.

        Reviewed by Darin Fisher.

        * public/WebKit.h:
        * src/WebKit.cpp:
        (WebKit::initialize):
        (WebKit::initializeWithoutV8):

2011-09-16  Vincent Scheib  <scheib@chromium.org>

        [Chromium] Add movementX/Y members to WebMouseEvent
        https://bugs.webkit.org/show_bug.cgi?id=68174

        Reviewed by Dimitri Glazkov.

        * public/WebInputEvent.h:
        (WebKit::WebMouseEvent::WebMouseEvent):

2011-09-16  Nat Duca  <nduca@chromium.org>

        [chromium] Create WebGL layer for graphics contexts on demand
        https://bugs.webkit.org/show_bug.cgi?id=68288

        Reviewed by James Robinson.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::GraphicsContext3DPrivate):
        (WebCore::GraphicsContext3DPrivate::platformLayer):
        * src/GraphicsContext3DPrivate.h:

2011-09-16  chandra shekar v  <chandra.vallala@motorola.com>

        [chromium] compilation failed in target 'webkit_unit_tests'.
        https://bugs.webkit.org/show_bug.cgi?id=68078

        Reviewed by Adam Barth.

        * tests/WebFrameTest.cpp:
        (WebKit::TestReloadDoesntRedirectWebFrameClient::decidePolicyForNavigation):

2011-09-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r95312.
        http://trac.webkit.org/changeset/95312
        https://bugs.webkit.org/show_bug.cgi?id=68277

        It's innocent, innocent I tell you! (Requested by jamesr_ on
        #webkit).

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::TestHooks::beginCommitOnCCThread):
        (WTF::TestHooks::commitCompleteOnCCThread):
        (WTF::TestHooks::drawLayersOnCCThread):
        (WTF::MockLayerTreeHostImpl::create):
        (WTF::MockLayerTreeHostImpl::beginCommit):
        (WTF::MockLayerTreeHostImpl::commitComplete):
        (WTF::MockLayerTreeHostImpl::drawLayers):
        (WTF::MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (WTF::MockLayerTreeHost::create):
        (WTF::MockLayerTreeHost::createLayerTreeHostImpl):
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF::CompositorMockWebGraphicsContext3D::create):
        (WTF::CompositorMockWebGraphicsContext3D::makeContextCurrent):
        (WTF::CompositorMockWebGraphicsContext3D::createProgram):
        (WTF::CompositorMockWebGraphicsContext3D::createShader):
        (WTF::CompositorMockWebGraphicsContext3D::getShaderiv):
        (WTF::CompositorMockWebGraphicsContext3D::getProgramiv):
        (WTF::CompositorMockWebGraphicsContext3D::CompositorMockWebGraphicsContext3D):
        (WTF::MockLayerTreeHostClient::create):
        (WTF::MockLayerTreeHostClient::animateAndLayout):
        (WTF::MockLayerTreeHostClient::createCompositorThread):
        (WTF::MockLayerTreeHostClient::createLayerTreeHostContext3D):
        (WTF::MockLayerTreeHostClient::createRootLayerPainter):
        (WTF::MockLayerTreeHostClient::didRecreateGraphicsContext):
        (WTF::MockLayerTreeHostClient::MockLayerTreeHostClient):
        (WTF::CCLayerTreeHostTest::postSetNeedsCommitToMainThread):
        (WTF::CCLayerTreeHostTest::postSetNeedsRedrawToMainThread):
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::onBeginTest):
        (WTF::CCLayerTreeHostTest::onEndTest):
        (WTF::CCLayerTreeHostTest::dispatchSetNeedsCommit):
        (WTF::CCLayerTreeHostTest::dispatchSetNeedsRedraw):
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::testTimeout):
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (WTF::CCLayerTreeHostTestShortlived2::beginTest):
        (WTF::CCLayerTreeHostTestShortlived3::beginTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::beginTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::commitCompleteOnCCThread):

2011-09-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r95309.
        http://trac.webkit.org/changeset/95309
        https://bugs.webkit.org/show_bug.cgi?id=68271

        Broke many chromium gpu tests. (Requested by dave_levin on
        #webkit).

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::animateAndLayout):
        (WTF::CCLayerTreeHostTest::beginCommitOnCCThread):
        (WTF::CCLayerTreeHostTest::beginCommitOnMainThread):
        (WTF::CCLayerTreeHostTest::commitOnCCThread):
        (WTF::CCLayerTreeHostTest::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTest::commitCompleteOnMainThread):
        (WTF::CCLayerTreeHostTest::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTest::updateLayers):
        (WTF::CCLayerTreeHostTest::onBeginTest):
        (WTF::CCLayerTreeHostTest::doEndTest):
        (WTF::CCLayerTreeHostTest::onEndTest):
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::testTimeout):
        (WTF::MockLayerTreeHostClient::MockLayerTreeHostClient):
        (WTF::MockLayerTreeHostClient::createLayerTreeHostContext3D):
        (WTF::MockLayerTreeHostClient::animateAndLayout):
        (WTF::MockLayerTreeHostClient::updateLayers):
        (WTF::MockLayerTreeHostCommitter::create):
        (WTF::MockLayerTreeHostCommitter::commit):
        (WTF::MockLayerTreeHostCommitter::MockLayerTreeHostCommitter):
        (WTF::MockLayerTreeHostImpl::create):
        (WTF::MockLayerTreeHostImpl::beginCommit):
        (WTF::MockLayerTreeHostImpl::commitComplete):
        (WTF::MockLayerTreeHostImpl::drawLayersAndPresent):
        (WTF::MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (WTF::MockLayerTreeHostImplProxy::create):
        (WTF::MockLayerTreeHostImplProxy::createLayerTreeHostImpl):
        (WTF::MockLayerTreeHostImplProxy::MockLayerTreeHostImplProxy):
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF::MockLayerTreeHost::createLayerTreeHostImplProxy):
        (WTF::MockLayerTreeHost::updateLayers):
        (WTF::MockLayerTreeHost::createLayerTreeHostCommitter):
        (WTF::MockLayerTreeHost::beginCommit):
        (WTF::MockLayerTreeHost::commitComplete):
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (WTF::CCLayerTreeHostTestShortlived2::beginTest):
        (WTF::CCLayerTreeHostTestShortlived3::beginTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::beginTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::commitOnCCThread):

2011-09-16  Iain Merrick  <husky@google.com>

        [chromium] Fix CCLayerTreeHostTest
        https://bugs.webkit.org/show_bug.cgi?id=67418

        Fixes needed to compile and link with USE_THREADED_COMPOSITING
        enabled, and to pass the basic unit test.

        Reviewed by James Robinson.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::GraphicsContext3DPrivate):
        (WebCore::GraphicsContext3DPrivate::platformLayer):
        * src/GraphicsContext3DPrivate.h:
        * tests/CCLayerTreeHostTest.cpp:
        (TestHooks::beginCommitOnCCThread):
        (TestHooks::commitCompleteOnCCThread):
        (TestHooks::drawLayersOnCCThread):
        (MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (MockLayerTreeHostImpl::beginCommit):
        (MockLayerTreeHostImpl::commitComplete):
        (MockLayerTreeHostImpl::drawLayers):
        (MockLayerTreeHost::MockLayerTreeHost):
        (MockLayerTreeHost::createLayerTreeHostImpl):
        (CompositorMockWebGraphicsContext3D::makeContextCurrent):
        (CompositorMockWebGraphicsContext3D::createProgram):
        (CompositorMockWebGraphicsContext3D::createShader):
        (CompositorMockWebGraphicsContext3D::getShaderiv):
        (CompositorMockWebGraphicsContext3D::getProgramiv):
        (MockLayerTreeHostClient::MockLayerTreeHostClient):
        (MockLayerTreeHostClient::animateAndLayout):
        (MockLayerTreeHostClient::createCompositorThread):
        (MockLayerTreeHostClient::createLayerTreeHostContext3D):
        (MockLayerTreeHostClient::createRootLayerPainter):
        (MockLayerTreeHostClient::didRecreateGraphicsContext):
        (CCLayerTreeHostTest::postSetNeedsCommitToMainThread):
        (CCLayerTreeHostTest::postSetNeedsRedrawToMainThread):
        (CCLayerTreeHostTest::onEndTest):
        (CCLayerTreeHostTest::dispatchSetNeedsCommit):
        (CCLayerTreeHostTest::dispatchSetNeedsRedraw):
        (CCLayerTreeHostTest::runTest):
        (CCLayerTreeHostTest::doBeginTest):
        (CCLayerTreeHostTestShortlived2::beginTest):
        (CCLayerTreeHostTestShortlived3::beginTest):
        (CCLayerTreeHostTestCommitingWithContinuousRedraw::beginTest):
        (CCLayerTreeHostTestCommitingWithContinuousRedraw::commitCompleteOnCCThread):
        (CCLayerTreeHostTestCommitingWithContinuousRedraw::drawLayersOnCCThread):
        (CCLayerTreeHostTestSetNeedsCommit1::beginTest):
        (CCLayerTreeHostTestSetNeedsCommit1::drawLayersOnCCThread):
        (CCLayerTreeHostTestSetNeedsCommit1::commitCompleteOnCCThread):
        (CCLayerTreeHostTestSetNeedsCommit2::beginTest):
        (CCLayerTreeHostTestSetNeedsCommit2::drawLayersOnCCThread):
        (CCLayerTreeHostTestSetNeedsCommit2::commitCompleteOnCCThread):
        (CCLayerTreeHostTestSetNeedsRedraw::beginTest):
        (CCLayerTreeHostTestSetNeedsRedraw::drawLayersOnCCThread):
        (CCLayerTreeHostTestSetNeedsRedraw::commitCompleteOnCCThread):

2011-09-16  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: [Extensions API] support extensions for remote inspector front-end
        https://bugs.webkit.org/show_bug.cgi?id=67840

        Reviewed by Pavel Feldman.

        - expose extension API as a single, standalone file for easy reuse in remote extension scripts.

        * WebKit.gyp:
        * scripts/generate_devtools_extension_api.py: Added.
        * scripts/generate_devtools_zip.py:

2011-09-16  Ilya Tikhonovsky  <loislo@chromium.org>

        Web Inspector: change WebInspector.currentPanel getter/setter to functions.
        https://bugs.webkit.org/show_bug.cgi?id=68242

        This is necessary for the panel switching performance tests.

        Reviewed by Pavel Feldman.

        * src/js/Tests.js:
        (.TestSuite.prototype.showPanel):

2011-09-15  Adam Barth  <abarth@webkit.org>

        Sigh.  Missed this one.

        * features.gypi:
2011-09-15  Adam Barth  <abarth@webkit.org>

        Rename ENABLE(DATABASE) to ENABLE(SQL_DATABASE)
        https://bugs.webkit.org/show_bug.cgi?id=68205

        Reviewed by Eric Seidel.

        * src/DatabaseObserver.cpp:
        * src/WebDatabase.cpp:
        (WebKit::WebDatabase::updateDatabaseSize):
        (WebKit::WebDatabase::updateSpaceAvailable):
        (WebKit::WebDatabase::resetSpaceAvailable):
        (WebKit::WebDatabase::closeDatabaseImmediately):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableDatabase):
        (WebKit::WebRuntimeFeatures::isDatabaseEnabled):

2011-09-15  Adrienne Walker  <enne@google.com>

        [chromium] Add temporary diagnostics for LayerTreeHost::commitTo crash
        https://bugs.webkit.org/show_bug.cgi?id=68204

        Reviewed by James Robinson.

        Add CRASH calls to determine which assumptions are being violated.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):

2011-09-15  David Levin  <levin@chromium.org>

        Remove TestWebKitAPI from the chromium build until it is made to work
        with the shared component build.

        * WebKit.gyp:

2011-09-15  Eric Seidel  <eric@webkit.org>

        Remove ENABLE(SVG_AS_IMAGE) since all major ports have it on by default
        https://bugs.webkit.org/show_bug.cgi?id=68182

        Reviewed by Adam Barth.

        * features.gypi:

2011-09-15  Jon Lee  <jonlee@apple.com>

        Submitting a form with target=_blank works only once
        https://bugs.webkit.org/show_bug.cgi?id=28633
        <rdar://problem/7357787>

        Reviewed by Andy Estes.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::mouseDown): Remove call to resetMultipleFormSubmissionProtection() since
        it will be made in platform-independent function EventHandler::handleMousePressEvent().

2011-09-15  Eric Seidel  <eric@webkit.org>

        Remove ENABLE_SVG_ANIMATION as all major ports have it on by default
        https://bugs.webkit.org/show_bug.cgi?id=68022

        Reviewed by Ryosuke Niwa.

        * features.gypi:

2011-09-15  James Simonsen  <simonjam@chromium.org>

        Ref protect HTMLObjectElement and HTMLEmbedElement while requesting plugins
        https://bugs.webkit.org/show_bug.cgi?id=68014

        Reviewed by Adam Barth.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::createPlugin): Moved protection up to HTMLObjectElement and HTMLEmbedElement.

2011-09-15  David Levin  <levin@chromium.org>

        [chromium] Attempt to fix the shared build after r95188.

        * WebKit.gyp:

2011-09-15  Brian Salomon  <bsalomon@google.com>

        [Skia/Chrome] 
        https://bugs.webkit.org/show_bug.cgi?id=68096

        This change removes WebGraphicsContext3D::grGLInterface(). It has been
        superceded by WebGraphicsContext3D::createGrGLInterface which sets up
        the per-GL call callback used to set the correct context.

        Reviewed by Stephen White.

        * public/WebGraphicsContext3D.h:
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::grContext):
        * src/WebGraphicsContext3D.cpp:
        (WebKit::WebGraphicsContext3D::createGrGLInterface):

2011-09-15  Xianzhu Wang  <wangxianzhu@chromium.org>

        Let TestWebKitAPI work for chromium
        https://bugs.webkit.org/show_bug.cgi?id=67756

        Reviewed by Sam Weinig.

        * WebKit.gyp:

2011-09-14  Hao Zheng  <zhenghao@chromium.org>

        Remove some dependencies of DRT for Android.
        https://bugs.webkit.org/show_bug.cgi?id=68126

        Reviewed by Tony Chang.

        We don't need mesa and TestNetscapePlugIn on Android, so remove them.
        As copy_TNPI depends on TNPI, adding copy_TNPI is enough.

        * WebKit.gyp:

2011-09-14  Peter Beverloo  <peter@chromium.org>

        [Chromium] Make WEB_AUDIO conditional and fix the build when disabled
        https://bugs.webkit.org/show_bug.cgi?id=68107

        Reviewed by Kenneth Russell.

        * features.gypi:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::audioSourceProvider):
        * src/WebMediaPlayerClientImpl.h:

2011-09-14  John Bauman  <jbauman@chromium.org>

        [chromium] Return correct value for getContextAttributes().preserveDrawingBuffer
        https://bugs.webkit.org/show_bug.cgi?id=68082

        Reviewed by Kenneth Russell.

        WebKit::WebGraphicsContext3D::Attributes doesn't save
        preserveDrawingBuffer, so that has to be saving in
        GraphicsContext3DPrivate.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::GraphicsContext3DPrivate):
        (WebCore::GraphicsContext3DPrivate::create):
        (WebCore::GraphicsContext3DPrivate::createGraphicsContextFromWebContext):
        (WebCore::GraphicsContext3DPrivate::getContextAttributes):
        * src/GraphicsContext3DPrivate.h:

2011-09-14  Antoine Labour  <piman@chromium.org>

        Remove the dependency on GraphicsLayer from CCLayerTreeHost.
        Move root layer management into the NonCompositedContentHost.
        Have WebViewImpl create a NonCompositedContentHost explicitly.
        https://bugs.webkit.org/show_bug.cgi?id=67883

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::invalidateRootLayerRect):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        (WebKit::WebViewImpl::setVisibilityState):
        * src/WebViewImpl.h:

2011-09-14  Nebojsa Ciric  <cira@chromium.org>

        Changed WebKit.gyp to use the new grit version of the scripts that handle
        .pak files.
        https://bugs.webkit.org/show_bug.cgi?id=68013

        Reviewed by Tony Chang.

        * DEPS:
        * WebKit.gyp:

2011-09-14  Anders Carlsson  <andersca@apple.com>

        Fix Chromium build.

        * src/ResourceHandle.cpp:

2011-09-13  Eric Seidel  <eric@webkit.org>

        Remove ENABLE_SVG_USE as <use> is required by HTML5
        https://bugs.webkit.org/show_bug.cgi?id=68019

        Reviewed by Ryosuke Niwa.

        * features.gypi:

2011-09-13  Adam Barth  <abarth@webkit.org>

        [Chromium] The checked state of WebPopupMenuItem isn't initialized
        https://bugs.webkit.org/show_bug.cgi?id=67889

        Reviewed by Darin Fisher.

        It seems we're failing to initialize the checked state of
        WebPopupMenuItems, potentially because Android is the first platform to
        use popup menus for <select> elements.

        * src/ExternalPopupMenu.cpp:
        (WebKit::ExternalPopupMenu::getPopupMenuInfo):

2011-09-13  Eric Seidel  <eric@webkit.org>

        Remove ENABLE_SVG_FOREIGN_OBJECT as it is a required part of HTML5
        https://bugs.webkit.org/show_bug.cgi?id=68018

        Reviewed by Ryosuke Niwa.

        * features.gypi:

2011-09-13  James Simonsen  <simonjam@chromium.org>

        [Chromium] Ref protect element in FrameLoaderClientImpl::createPlugin
        https://bugs.webkit.org/show_bug.cgi?id=68014

        Reviewed by Nate Chapin.

        Test: plugins/destroy-during-npp-new.htm under valgrind

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::createPlugin):

2011-09-13  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-09-12  Fumitoshi Ukai  <ukai@chromium.org>

        Unreviewed. Roll DEPS again.

        * DEPS:

2011-09-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r95015.
        http://trac.webkit.org/changeset/95015
        https://bugs.webkit.org/show_bug.cgi?id=67987

        compiled failed on Chromium Win bot (Requested by ukai on
        #webkit).

        * DEPS:

2011-09-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-09-12  David Levin  <levin@chromium.org>

        [chromium] Remove AllowCrossThreadAccess for WorkerFileWriterCallbacksBridge.
        https://bugs.webkit.org/show_bug.cgi?id=67943

        Reviewed by Adam Barth.

        * src/WorkerFileWriterCallbacksBridge.cpp: Removed AllowCrossThreadAccess
        allowing the automatic ref counting to work. This was previous needed when
        the ref counting wasn't working but that was fixed in r94986. Note that the
        design was to have ref counting since the methods take PassRefPtr and the
        class is ThreadSafeRefCounted. (Ideally we have noticed this flaw when
        adding in AllowCrossThreadAccess.)
        (WebKit::WorkerFileWriterCallbacksBridge::postWriteToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::postTruncateToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::postAbortToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::didWrite):
        (WebKit::WorkerFileWriterCallbacksBridge::didFail):
        (WebKit::WorkerFileWriterCallbacksBridge::didTruncate):
        (WebKit::WorkerFileWriterCallbacksBridge::postInitToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::dispatchTaskToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::dispatchTaskToWorkerThread):

2011-09-08  Nat Duca  <nduca@chromium.org>

        [chromium] Add GraphicsContext3DPrivate:createGraphicsContextForAnotherThread
        https://bugs.webkit.org/show_bug.cgi?id=67832

        The compositor thread needs to create a GraphicsContext3D without
        actually making it current. In previous attempts at doing this, we
        modified all graphics3D creation to not make the contexts current, but
        this prove to be shockingly fragile. Since this is a very
        Chromium-specific behavior, this patch makes creationForAnotherThread a
        method on the private GraphicsContext3D interface.
        GraphicsContext3D::create behaves as usual.

        Reviewed by Kenneth Russell.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::createGraphicsContextFromWebContext):
        (WebCore::GraphicsContext3DPrivate::createGraphicsContextForAnotherThread):
        (WebCore::GraphicsContext3D::create):
        * src/GraphicsContext3DPrivate.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebViewImpl::graphicsContext3D):
        * tests/MockGraphicsContext3DTest.cpp:
        (TEST):

2011-09-11  Jeremy Moskovich  <jeremy@chromium.org>

        [Chromium] Change OOP Font loading code to use CGFont*() APIs.
        https://bugs.webkit.org/show_bug.cgi?id=66935

        This change is necessary due a bug in ATSFontDeactivate() on 10.7.
        See crbug.com/93191 for details.

        Reviewed by Eric Seidel.

        * public/mac/WebSandboxSupport.h:
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::loadFont):

2011-09-11  Adam Barth  <abarth@webkit.org>

        [Chromium] Add more key codes to WebInputEvent for Android
        https://bugs.webkit.org/show_bug.cgi?id=67887

        Reviewed by Darin Fisher.

        * src/WebInputEvent.cpp:
        (WebKit::staticKeyIdentifiers):

2011-09-09  Fady Samuel  <fsamuel@chromium.org>

        Move pageScaleFactor code from Frame.{h|cpp} to Page.{h|cpp}
        https://bugs.webkit.org/show_bug.cgi?id=67250

        Reviewed by Simon Fraser.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::pageScaleFactor):
        (WebKit::WebViewImpl::scalePage):

2011-09-09  Hao Zheng  <zhenghao@chromium.org>

        [chromium] Implement DRT support for Android.
        https://bugs.webkit.org/show_bug.cgi?id=67590

        Reviewed by Tony Chang.

        Exclude Android specific files of DRT from other platforms.

        * WebKit.gyp:

2011-09-09  Hao Zheng  <zhenghao@chromium.org>

        [Chromium] Add WebSandboxSupport and WebThemeEngine for Android.
        https://bugs.webkit.org/show_bug.cgi?id=67584

        Reviewed by Steve Block.

        Make src/PlatformSupport.cpp and src/WebFrameImpl.cpp compile on
        Chromium port for Android.

        * WebKit.gyp:
        * public/android: Added.
        * public/android/WebSandboxSupport.h: Added.
        * public/android/WebThemeEngine.h: Added.
        (WebKit::WebThemeEngine::getSize):
        (WebKit::WebThemeEngine::paint):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::getFontFamilyForCharacters):
        (WebCore::PlatformSupport::getRenderStyleForStrike):
        * src/WebFrameImpl.cpp:

2011-09-09  Martin Kosiba  <mkosiba@chromium.org>

        Exposing the isLink method on WebNode for the Chromium port on Android.

        Reviewed by Darin Fisher.

        * public/WebNode.h:
        * src/WebNode.cpp:
        (WebKit::WebNode::isLink):

2011-09-08  Adam Barth  <abarth@webkit.org>

        Another attempt to fix the Chromium build.  (Missed one.)

        * src/WebPageSerializerImpl.cpp:
        (WebKit::WebPageSerializerImpl::serialize):

2011-09-08  Adam Barth  <abarth@webkit.org>

        Attempt to fix Chromium build.  We can just grab the encoding from the document.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/WebDocument.cpp:
        (WebKit::WebDocument::encoding):
        * src/WebPageSerializerImpl.cpp:
        (WebKit::WebPageSerializerImpl::preActionBeforeSerializeOpenTag):
        * src/WebSearchableFormData.cpp:
        (HTMLNames::GetFormEncoding):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::pageEncoding):

2011-09-08  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] Add backend compositor support for rescaling (zooming) textures during zoom animation.
        https://bugs.webkit.org/show_bug.cgi?id=66472

        This patch contains plumbing from Internals to WebViewImpl that can be removed
        at a later time when the zoom animator code is complete.

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setZoomLevel):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):

2011-09-08  Scott Byer  <scottbyer@chromium.org>

        Compile in ScrollAnimator for Chromium on all platforms by default.
        https://bugs.webkit.org/show_bug.cgi?id=67650

        Reviewed by Adam Barth.

        * features.gypi:

2011-09-07  Adam Barth  <abarth@webkit.org>

        FrameLoader::addExtraFieldsToRequest can crash when called from or after FrameLoader::detachFromParent
        https://bugs.webkit.org/show_bug.cgi?id=61810

        Reviewed by Eric Seidel.

        Fix this crash as suggested by Darin Fisher in
        https://bugs.webkit.org/show_bug.cgi?id=61810#c21.  This patch does not
        include the test requested by Alexey Proskuryakov in
        https://bugs.webkit.org/show_bug.cgi?id=61810#c6.  I would really much
        rather include a test with this patch, but my attempts to write a test
        have failed.  :(

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::loadFrameRequest):

2011-09-07  Eric Boren  <borenet@gmail.com>

        [Chromium] Modify WebTouchEvent structure to match WebCore::TouchEvent
        https://bugs.webkit.org/show_bug.cgi?id=66800

        Reviewed by Darin Fisher.

        * public/WebInputEvent.h:
        (WebKit::WebTouchEvent::WebTouchEvent):
        * public/WebTouchPoint.h:
        (WebKit::WebTouchPoint::WebTouchPoint):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformTouchEventBuilder::PlatformTouchEventBuilder):
        (WebKit::WebTouchEventBuilder::WebTouchEventBuilder):
        * src/WebInputEventConversion.h:

2011-09-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r94635.
        http://trac.webkit.org/changeset/94635
        https://bugs.webkit.org/show_bug.cgi?id=67704

        Linux Touch build is failing to compile this change.
        (Requested by loislo on #webkit).

        * public/WebInputEvent.h:
        (WebKit::WebTouchEvent::WebTouchEvent):
        * public/WebTouchPoint.h:
        (WebKit::WebTouchPoint::WebTouchPoint):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformTouchEventBuilder::PlatformTouchEventBuilder):
        (WebKit::WebMouseEventBuilder::WebMouseEventBuilder):
        (WebKit::WebMouseWheelEventBuilder::WebMouseWheelEventBuilder):
        (WebKit::WebKeyboardEventBuilder::WebKeyboardEventBuilder):
        * src/WebInputEventConversion.h:

2011-09-05  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: repair console sniffing for interactive ui tests
        https://bugs.webkit.org/show_bug.cgi?id=67608

        Reviewed by Pavel Feldman.

        * src/js/Tests.js:
        (.TestSuite.prototype.evaluateInConsole_):

2011-09-06  Eric Boren  <borenet@gmail.com>

        [Chromium] Modify WebTouchEvent structure to match WebCore::TouchEvent
        https://bugs.webkit.org/show_bug.cgi?id=66800

        Reviewed by Darin Fisher.

        * public/WebInputEvent.h:
        (WebKit::WebTouchEvent::WebTouchEvent):
        * public/WebTouchPoint.h:
        (WebKit::WebTouchPoint::WebTouchPoint):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformTouchEventBuilder::PlatformTouchEventBuilder):
        (WebKit::WebTouchEventBuilder::WebTouchEventBuilder):
        * src/WebInputEventConversion.h:

2011-09-06  Ben Smith  <binji@chromium.org>

        [chromium] Fix WebFrameClient receiving isRedirect when reloading
        https://bugs.webkit.org/show_bug.cgi?id=63591

        Reviewed by Adam Barth.

        Fix bug when quickly reloading a WebFrame where the
        WebFrameClient would get called with decidePolicyForNavigation
        isRedirect=true.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDecidePolicyForNavigationAction):
        * src/WebDataSourceImpl.h:
        (WebKit::WebDataSourceImpl::isRedirect):
        * tests/WebFrameTest.cpp:
        (WebKit::TestReloadDoesntRedirectWebFrameClient::decidePolicyForNavigation):
        (WebKit::TestReloadDoesntRedirectWebFrameClient::cancelledError):
        (WebKit::TEST_F):

2011-09-06  Ryosuke Niwa  <rniwa@webkit.org>

        Rename confirmCompositionWithoutDisturbingSelection to cancelComposition
        https://bugs.webkit.org/show_bug.cgi?id=67569

        Reviewed by Antonio Gomes.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::unmarkText):

2011-09-06  Adam Barth  <abarth@webkit.org>

        [Chromium] Add WebFloatQuad.h for Android
        https://bugs.webkit.org/show_bug.cgi?id=67573

        Reviewed by Darin Fisher.

        Android uses this wrapper of WebCore::FloatQuad in some API methods
        (which will appear in subsequent patches).

        * WebKit.gyp:
        * public/WebFloatQuad.h: Added.
        * src/WebFloatQuad.cpp: Added.

2011-09-06  Adam Barth  <abarth@webkit.org>

        [Chromium] Add didAcceptIndices to ExternalPopupMenuClient for Android
        https://bugs.webkit.org/show_bug.cgi?id=67574

        Reviewed by Darin Fisher.

        In Android, external popup menus can admit multiple selection (e.g.,
        for listboxes presented using external UI).

        * public/WebExternalPopupMenuClient.h:
        * src/ExternalPopupMenu.cpp:
        (WebKit::ExternalPopupMenu::didAcceptIndices):
        * src/ExternalPopupMenu.h:

2011-09-06  Aaron Colwell  <acolwell@chromium.org>

        Allow MediaSource API to be enabled at runtime.
        https://bugs.webkit.org/show_bug.cgi?id=67306

        Reviewed by Eric Carlson.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableMediaSource):
        (WebKit::WebRuntimeFeatures::isMediaSourceEnabled):

2011-09-06  Ryosuke Niwa  <rniwa@webkit.org>

        REGRESSION(r94274): FormManagerTest.PreviewForm and FillFormNonEmptyField fail on chromium
        https://bugs.webkit.org/show_bug.cgi?id=67453

        Reviewed by Kent Tamura.

        Chromium code incorrectly calls Node::isFocusable without updating layout, and was hitting assertions.
        Fix the assertion failure (and a potential crash) by updating layout in WebCore::isFocusable.

        * src/WebNode.cpp:
        (WebKit::WebNode::isFocusable):

2011-09-04  Adam Barth  <abarth@webkit.org>

        [Chromium] Add mutliple to WebPopupMenuInfo for Android
        https://bugs.webkit.org/show_bug.cgi?id=67576

        Reviewed by Darin Fisher.

        This flag requests that the embedder allow multiple selection for the
        popup menu.  (See also https://bugs.webkit.org/show_bug.cgi?id=67574.)

        * public/WebPopupMenuInfo.h:
        * src/ExternalPopupMenu.cpp:
        (WebKit::ExternalPopupMenu::getPopupMenuInfo):

2011-09-04  Adam Barth  <abarth@webkit.org>

        [Chromium] Add memory threshold values to WebKitPlatformSupport.h
        https://bugs.webkit.org/show_bug.cgi?id=67575

        Reviewed by Darin Fisher.

        Instead of hard-coding these values, we now grab them from
        WebKitPlatformSupport because Android wishes to configure them on a
        per-device basis.

        One could view grabing these values from PlatformSupport as a bit of a
        layering violation (because they feel like policy), but another view is
        that the alternative implementation is to query the OS for various
        memory parameters.  In either case, getting these values via
        PlatformSupport is much easier and consistent with the other memory
        related queries in PlatformSupport already.

        * public/WebKitPlatformSupport.h:
        (WebKit::WebKitPlatformSupport::lowMemoryUsageMB):
        (WebKit::WebKitPlatformSupport::highMemoryUsageMB):
        (WebKit::WebKitPlatformSupport::highUsageDeltaMB):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::lowMemoryUsageMB):
        (WebCore::PlatformSupport::highMemoryUsageMB):
        (WebCore::PlatformSupport::highUsageDeltaMB):

2011-09-02  Adam Barth  <abarth@webkit.org>

        Remove WebKitClient.h
        https://bugs.webkit.org/show_bug.cgi?id=67539

        Reviewed by Sam Weinig.

        This API no longer has any callers.

        * WebKit.gyp:
        * public/WebKit.h:
        * public/WebKitClient.h: Removed.
        * src/WebKit.cpp:

2011-09-02  Bill Budge  <bbudge@chromium.org>

        Add a 'didDownloadData' method to ResourceHandleInternal and pass these
        notifications to WebURLLoaderClients.
        https://bugs.webkit.org/show_bug.cgi?id=67229

        Reviewed by Darin Fisher.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::didDownloadData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didDownloadData):
        * src/ResourceHandleInternal.h:

2011-09-02  Peng Huang  <penghuang@chromium.org>

        Need API for getting surrounding text from webkit in chromium
        https://bugs.webkit.org/show_bug.cgi?id=66681

        Reviewed by Ryosuke Niwa.

        Add getSelectionOffsetsAndTextInEditableContent() to Chromium's
        WebViewImpl. This function is for supporting some input methods which
        need input context around the edit caret.

        * public/WebWidget.h:
        (WebKit::WebWidget::getSelectionOffsetsAndTextInEditableContent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::getSelectionOffsetsAndTextInEditableContent):
        * src/WebViewImpl.h:

2011-09-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-09-02  Adrienne Walker  <enne@google.com>

        [chromium] Remove LayerRendererChromium references from the LayerChromium tree
        https://bugs.webkit.org/show_bug.cgi?id=66430

        Reviewed by James Robinson.

        Change references to LayerRendererChromium to CCLayerTreeHost.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::acceleratedRenderingInUse):

2011-09-01  Robert Kroeger  <rjkroege@chromium.org>

 
        [chromium] Code cleanup FIXME in Chromium recognizer
        https://bugs.webkit.org/show_bug.cgi?id=67448

        Updated GestureRecognizer unit tests for more encapsulated
        gesture recognizer implementation.

        Reviewed by Adam Barth.

        * tests/InnerGestureRecognizerTest.cpp:
        (InspectableGestureRecognizerChromium::InspectableGestureRecognizerChromium):
        (InspectableGestureRecognizerChromium::signature):
        (InspectableGestureRecognizerChromium::edgeFunction):
        (InspectableGestureRecognizerChromium::updateValues):
        (InspectableGestureRecognizerChromium::addEdgeFunction):
        (InspectableGestureRecognizerChromium::setStateTest):
        (InspectableGestureRecognizerChromium::isInsideManhattanSquare):
        (InspectableGestureRecognizerChromium::isInClickTimeWindow):
        (InspectableGestureRecognizerChromium::stubEdgeFunction):
        (GestureRecognizerTest::GestureRecognizerTest):
        (TEST_F):

2011-09-01  Brian Salomon  <bsalomon@google.com>

        [Chromium, Skia] Add virtual to WebGraphicsContext3D to create a new GrGLInterface per context. Insert per-skia-GL-function callback to set correct GL context.
        https://bugs.webkit.org/show_bug.cgi?id=67395

        Reviewed by Kenneth Russell.

        * WebKit.gyp:
        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::onCreateGrGLInterface):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::grContext):
        * src/WebGraphicsContext3D.cpp: Added.
        (WebKit::WebGraphicsContext3D::createGrGLInterface):

2011-08-29  Nat Duca  <nduca@chromium.org>

        [chromium] Introduce CCSingleThreadProxy in order to move LayerRenderer to CCLayerTreeHostImpl
        https://bugs.webkit.org/show_bug.cgi?id=66807

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::didRecreateGraphicsContext):
        * tests/CCThreadTaskTest.cpp:
        (WebCore::TEST):

2011-09-01  Dominic Mazzoni  <dmazzoni@google.com>

        Add API functions to enable starting and stopping speech input,
        and checking the current speech input state.
        https://bugs.webkit.org/show_bug.cgi?id=60170

        Reviewed by Dimitri Glazkov.

        * public/WebInputElement.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::isSpeechInputEnabled):
        (WebKit::WebInputElement::getSpeechInputState):
        (WebKit::WebInputElement::startSpeechInput):
        (WebKit::WebInputElement::stopSpeechInput):

2011-08-31  Greg Billock  <gbillock@google.com>

        Add pass-throughs for NPObject/v8::Value marshalling to WebBindings
        https://bugs.webkit.org/show_bug.cgi?id=67302

        Reviewed by Darin Fisher.

        * public/WebBindings.h:
        * src/WebBindings.cpp:
        (WebKit::WebBindings::toNPVariant):
        (WebKit::WebBindings::toV8Value):
        * src/WebSerializedScriptValue.cpp:
        (WebKit::WebSerializedScriptValue::serialize):

2011-08-31  Adam Barth  <abarth@webkit.org>

        [Chromium] Rename PlatformBridge to PlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=67349

        Reviewed by Darin Fisher.

        This matches the WebKitPlatformSupport embedder API.

        * WebKit.gyp:
        * src/AssertMatchingEnums.cpp:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::shouldRunModalDialogDuringPageDismissal):
        * src/PlatformBridge.cpp: Removed.
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandle::cacheMetadata):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::WebFrameImpl):
        (WebKit::WebFrameImpl::~WebFrameImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImplContentPainter::paint):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-08-31  Sailesh Agrawal  <sail@chromium.org>

        Chromium Mac: PDF: Scrollsbars should be visible when scrolling using the two finger gesture on Lion
        https://bugs.webkit.org/show_bug.cgi?id=66599

        Reviewed by Darin Fisher.

        Overlay scrollbars over a pdf wouldn't stay visible if a gesture was in progress. Normally we use a beginScrollGesture and endScrollGesture to keep the scrollbars visible. Unfortunately PDFs didn't handle gesture events so we didn't get the begin/end gesture events.

        This change pipes gesture events to WebPluginContainerImpl if possible. This fixes this bug.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleGestureEvent):
        * src/WebPluginContainerImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::gestureEvent):

2011-08-31  Sailesh Agrawal  <sail@chromium.org>

        Chromium Mac: Add fallback for drawing PDF overhang area
        https://bugs.webkit.org/show_bug.cgi?id=66614

        Reviewed by Darin Fisher.

        This change adds a fallback for overhang drawing for PDF content. This fallback is needed until the PDF plugin uses the linen pattern to draw its own overhang.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::paintCustomOverhangArea):
        * src/ChromeClientImpl.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::paintCustomOverhangArea):
        * src/WebPluginContainerImpl.h:

2011-08-31  James Weatherall  <wez@chromium.org>

        [chromium] Have the FrameLoaderClient release any plugin widget
        reference is holding when the FrameLoader detaches it, to ensure that
        the plugin won't out-live the containing page.
        https://bugs.webkit.org/show_bug.cgi?id=66517

        Reviewed by Darin Fisher.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::detachedFromParent3):

2011-08-31  Adam Barth  <abarth@webkit.org>

        [Chromium] Rename WebKitClient to WebKitPlatformSupport
        https://bugs.webkit.org/show_bug.cgi?id=67309

        Reviewed by Darin Fisher.

        WebKitClient doesn't actually represent the WebKit Client.  Instead, it
        represents supporting code for the WebKit Platform.  This patch renames
        WebKitClient to WebKitPlatformSupport to make it easier for folks to
        understand the difference between the Client and the Platform.

        This patch includes shims so as not to break the Chromium build.  Once
        the Chromium side is updated, I'll remove the shims.

        * WebKit.gyp:
        * public/WebFrameClient.h:
        * public/WebKit.h:
        (WebKit::webKitClient):
        * public/WebKitClient.h: Removed.
        * public/WebKitPlatformSupport.h: Copied from Source/WebKit/chromium/public/WebKitClient.h.
        (WebKit::WebKitPlatformSupport::~WebKitPlatformSupport):
        * src/ApplicationCacheHostInternal.h:
        * src/AssociatedURLLoader.cpp:
        * src/AsyncFileSystemChromium.cpp:
        (WebCore::AsyncFileSystemChromium::AsyncFileSystemChromium):
        * src/AudioDestinationChromium.cpp:
        (WebCore::AudioDestinationChromium::AudioDestinationChromium):
        (WebCore::AudioDestination::hardwareSampleRate):
        * src/BlobRegistryProxy.cpp:
        (WebCore::BlobRegistryProxy::BlobRegistryProxy):
        * src/CCThreadImpl.cpp:
        (WebKit::CCThreadImpl::CCThreadImpl):
        * src/ChromiumCurrentTime.cpp:
        (WTF::currentTime):
        (WTF::monotonicallyIncreasingTime):
        * src/ChromiumOSRandomSource.cpp:
        (WTF::cryptographicallyRandomValuesFromOS):
        * src/ChromiumThreading.cpp:
        (WTF::ChromiumThreading::callOnMainThread):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::canShowMIMEType):
        (WebKit::FrameLoaderClientImpl::userAgent):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3D::create):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):
        * src/LocalizedStrings.cpp:
        (WebCore::query):
        * src/PlatformBridge.cpp:
        (WebCore::getCookieJar):
        (WebCore::PlatformBridge::cacheMetadata):
        (WebCore::PlatformBridge::clipboardIsFormatAvailable):
        (WebCore::PlatformBridge::clipboardReadPlainText):
        (WebCore::PlatformBridge::clipboardReadHTML):
        (WebCore::PlatformBridge::clipboardReadImage):
        (WebCore::PlatformBridge::clipboardGetSequenceNumber):
        (WebCore::PlatformBridge::clipboardWriteSelection):
        (WebCore::PlatformBridge::clipboardWritePlainText):
        (WebCore::PlatformBridge::clipboardWriteURL):
        (WebCore::PlatformBridge::clipboardWriteImage):
        (WebCore::PlatformBridge::clipboardWriteData):
        (WebCore::PlatformBridge::clipboardReadAvailableTypes):
        (WebCore::PlatformBridge::clipboardReadData):
        (WebCore::PlatformBridge::clipboardReadFilenames):
        (WebCore::PlatformBridge::prefetchDNS):
        (WebCore::PlatformBridge::fileExists):
        (WebCore::PlatformBridge::deleteFile):
        (WebCore::PlatformBridge::deleteEmptyDirectory):
        (WebCore::PlatformBridge::getFileSize):
        (WebCore::PlatformBridge::revealFolderInOS):
        (WebCore::PlatformBridge::getFileModificationTime):
        (WebCore::PlatformBridge::directoryName):
        (WebCore::PlatformBridge::pathByAppendingComponent):
        (WebCore::PlatformBridge::makeAllDirectories):
        (WebCore::PlatformBridge::getAbsolutePath):
        (WebCore::PlatformBridge::isDirectory):
        (WebCore::PlatformBridge::filePathToURL):
        (WebCore::PlatformBridge::openFile):
        (WebCore::PlatformBridge::closeFile):
        (WebCore::PlatformBridge::seekFile):
        (WebCore::PlatformBridge::truncateFile):
        (WebCore::PlatformBridge::readFromFile):
        (WebCore::PlatformBridge::writeToFile):
        (WebCore::PlatformBridge::ensureFontLoaded):
        (WebCore::PlatformBridge::loadFont):
        (WebCore::PlatformBridge::getFontFamilyForCharacters):
        (WebCore::PlatformBridge::getRenderStyleForStrike):
        (WebCore::PlatformBridge::databaseOpenFile):
        (WebCore::PlatformBridge::databaseDeleteFile):
        (WebCore::PlatformBridge::databaseGetFileAttributes):
        (WebCore::PlatformBridge::databaseGetFileSize):
        (WebCore::PlatformBridge::databaseGetSpaceAvailableForOrigin):
        (WebCore::PlatformBridge::createIDBKeysFromSerializedValuesAndKeyPath):
        (WebCore::PlatformBridge::injectIDBKeyIntoSerializedValue):
        (WebCore::PlatformBridge::signedPublicKeyAndChallengeString):
        (WebCore::PlatformBridge::computedDefaultLanguage):
        (WebCore::PlatformBridge::isSupportedImageMIMEType):
        (WebCore::PlatformBridge::isSupportedJavaScriptMIMEType):
        (WebCore::PlatformBridge::isSupportedNonImageMIMEType):
        (WebCore::PlatformBridge::mimeTypeForExtension):
        (WebCore::PlatformBridge::wellKnownMimeTypeForExtension):
        (WebCore::PlatformBridge::mimeTypeFromFile):
        (WebCore::PlatformBridge::preferredExtensionForMIMEType):
        (WebCore::PlatformBridge::plugins):
        (WebCore::PlatformBridge::loadPlatformImageResource):
        (WebCore::PlatformBridge::loadPlatformAudioResource):
        (WebCore::PlatformBridge::decodeAudioFileData):
        (WebCore::PlatformBridge::sandboxEnabled):
        (WebCore::PlatformBridge::setSharedTimerFiredFunction):
        (WebCore::PlatformBridge::setSharedTimerFireInterval):
        (WebCore::PlatformBridge::stopSharedTimer):
        (WebCore::PlatformBridge::decrementStatsCounter):
        (WebCore::PlatformBridge::incrementStatsCounter):
        (WebCore::PlatformBridge::histogramCustomCounts):
        (WebCore::PlatformBridge::histogramEnumeration):
        (WebCore::PlatformBridge::suddenTerminationChanged):
        (WebCore::PlatformBridge::paintButton):
        (WebCore::PlatformBridge::paintMenuList):
        (WebCore::PlatformBridge::paintScrollbarArrow):
        (WebCore::PlatformBridge::paintScrollbarThumb):
        (WebCore::PlatformBridge::paintScrollbarTrack):
        (WebCore::PlatformBridge::paintSpinButton):
        (WebCore::PlatformBridge::paintTextField):
        (WebCore::PlatformBridge::paintTrackbar):
        (WebCore::PlatformBridge::paintProgressBar):
        (WebCore::PlatformBridge::getThemePartSize):
        (WebCore::PlatformBridge::paintThemePart):
        (WebCore::PlatformBridge::traceEventBegin):
        (WebCore::PlatformBridge::traceEventEnd):
        (WebCore::PlatformBridge::visitedLinkHash):
        (WebCore::PlatformBridge::isLinkVisited):
        (WebCore::PlatformBridge::memoryUsageMB):
        (WebCore::PlatformBridge::actualMemoryUsageMB):
        * src/PlatformMessagePortChannel.cpp:
        (WebCore::PlatformMessagePortChannel::PlatformMessagePortChannel):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::start):
        (WebCore::ResourceHandle::loadResourceSynchronously):
        * src/SharedWorkerRepository.cpp:
        (WebCore::SharedWorkerRepository::isAvailable):
        (WebCore::SharedWorkerRepository::connect):
        (WebCore::SharedWorkerRepository::documentDetached):
        (WebCore::SharedWorkerRepository::hasSharedWorkers):
        * src/SocketStreamHandle.cpp:
        (WebCore::SocketStreamHandleInternal::connect):
        * src/StorageEventDispatcherChromium.cpp:
        (WebCore::StorageEventDispatcher::dispatch):
        * src/StorageNamespaceProxy.cpp:
        (WebCore::StorageNamespace::localStorageNamespace):
        * src/WebKit.cpp:
        (WebKit::generateEntropy):
        (WebKit::initialize):
        (WebKit::shutdown):
        (WebKit::webKitPlatformSupport):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::supportsType):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::copy):
        * src/WebViewImpl.cpp:
        * src/WebWorkerClientImpl.cpp:
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::WorkerAsyncFileSystemChromium):
        * src/WorkerFileWriterCallbacksBridge.cpp:
        (WebKit::WorkerFileWriterCallbacksBridge::initOnMainThread):
        * tests/RunAllTests.cpp:

2011-08-31  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-08-31  Nat Duca  <nduca@chromium.org>

        [Chromium] Unreviewed, fix inconsistent WebKit.gypi after r94106
        https://bugs.webkit.org/show_bug.cgi?id=67288

        * WebKit.gypi:

2011-08-30  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r94142, r94144, r94145, and r94148.
        http://trac.webkit.org/changeset/94142
        http://trac.webkit.org/changeset/94144
        http://trac.webkit.org/changeset/94145
        http://trac.webkit.org/changeset/94148
        https://bugs.webkit.org/show_bug.cgi?id=67262

        Broke isindex element (Requested by rniwa on #webkit).

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::textFieldDidEndEditing):
        (WebKit::EditorClientImpl::doTextFieldCommandFromEvent):
        * src/WebInputElement.cpp:
        (WebKit::toWebInputElement):
        * src/WebPasswordFormUtils.cpp:
        (WebKit::findPasswordFormFields):

2011-08-30  Ryosuke Niwa  <rniwa@webkit.org>

        Chromium build fix after r94142.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::textFieldDidEndEditing):
        (WebKit::EditorClientImpl::doTextFieldCommandFromEvent):
        * src/WebPasswordFormUtils.cpp:
        (WebKit::findPasswordFormFields):

2011-08-30  Ryosuke Niwa  <rniwa@webkit.org>

        Get rid of toInputElement()
        https://bugs.webkit.org/show_bug.cgi?id=67175

        Reviewed by Darin Adler.

        * src/WebInputElement.cpp:
        (WebKit::toWebInputElement):

2011-08-30  Nat Duca  <nduca@chromium.org>

        Unreviewed, fix WebGL layout tests due to missing WebView pointer.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::createGraphicsContextFromWebContext):

2011-08-30  Aaron Colwell  <acolwell@chromium.org>

        Add MediaSource API to HTMLMediaElement
        https://bugs.webkit.org/show_bug.cgi?id=64731

        Reviewed by Eric Carlson.

        * public/WebMediaPlayer.h:
        (WebKit::WebMediaPlayer::sourceAppend):
        (WebKit::WebMediaPlayer::sourceEndOfStream):
        * public/WebMediaPlayerClient.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::sourceOpened):
        (WebKit::WebMediaPlayerClientImpl::sourceURL):
        (WebKit::WebMediaPlayerClientImpl::sourceAppend):
        (WebKit::WebMediaPlayerClientImpl::sourceEndOfStream):
        * src/WebMediaPlayerClientImpl.h:

2011-08-30  Nat Duca  <nduca@chromium.org>

        [chromium] Allow GraphicsContexts to be created from MockWebGraphicsContexts
        https://bugs.webkit.org/show_bug.cgi?id=67179

        Reviewed by Kenneth Russell.

        * WebKit.gypi:
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::create):
        (WebCore::GraphicsContext3DInternal::createFromWebContext):
        (WebCore::GraphicsContext3D::create):
        * src/GraphicsContext3DInternal.h:
        * tests/MockGraphicsContext3DTest.cpp: Renamed from Source/WebKit/chromium/tests/MockWebGraphicsContext3DTest.cpp.
        (FrameCountingContext::FrameCountingContext):
        (FrameCountingContext::prepareTexture):
        (FrameCountingContext::frameCount):
        (TEST):

2011-08-30  Adam Barth  <abarth@webkit.org>

        [Chromium] Add null checks for document()->loader()
        https://bugs.webkit.org/show_bug.cgi?id=67077

        Reviewed by Nate Chapin.

        Document::loader can return 0 for a number of reasons.  Call sites need
        to null check the result, like we do for Document::frame.  I suspect
        some of these are real crashes, along the lines of
        http://trac.webkit.org/changeset/93692, but null checking this function
        is just good practice.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/WebSearchableFormData.cpp:
        (HTMLNames::GetFormEncoding):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::pageEncoding):

2011-08-29  Darin Fisher  <darin@chromium.org>

        [chromium] DumpRenderTree should be explicit about its dependency on
        GoogleURL
        https://bugs.webkit.org/show_bug.cgi?id=67169

        Reviewed by Ryosuke Niwa.

        DumpRenderTree uses GoogleURL code directly, and it should be explicit
        about that instead of picking up this dependency transitively, which
        only works for the static build.

        This is needed to support the "component" build of DumpRenderTree, in
        which the various Chromium dependencies are built as separate DLLs.

        * WebKit.gyp:

2011-08-30  Tony Chang  <tony@chromium.org>

        Fix chromium compile when using clang.  Another compile error due
        to r94080.

        * src/ChromeClientImpl.h:
        (WebKit::ChromeClientImpl::scrollRectIntoView):

2011-08-30  Tony Chang  <tony@chromium.org>

        Roll chromium DEPS to r98771.

        * DEPS:

2011-08-29  Chris Marrin  <cmarrin@apple.com>

        Rename GraphicsContext3DInternal to GraphicsContext3DPrivate and add a dummy version of this class for Mac
        https://bugs.webkit.org/show_bug.cgi?id=67172

        Reviewed by Kenneth Russell.

        * WebKit.gyp:
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::Extensions3DChromium):
        (WebCore::Extensions3DChromium::supports):
        (WebCore::Extensions3DChromium::ensureEnabled):
        (WebCore::Extensions3DChromium::isEnabled):
        (WebCore::Extensions3DChromium::getGraphicsResetStatusARB):
        (WebCore::Extensions3DChromium::blitFramebuffer):
        (WebCore::Extensions3DChromium::renderbufferStorageMultisample):
        (WebCore::Extensions3DChromium::mapBufferSubDataCHROMIUM):
        (WebCore::Extensions3DChromium::unmapBufferSubDataCHROMIUM):
        (WebCore::Extensions3DChromium::mapTexSubImage2DCHROMIUM):
        (WebCore::Extensions3DChromium::unmapTexSubImage2DCHROMIUM):
        (WebCore::Extensions3DChromium::setSwapBuffersCompleteCallbackCHROMIUM):
        (WebCore::Extensions3DChromium::rateLimitOffscreenContextCHROMIUM):
        (WebCore::Extensions3DChromium::paintFramebufferToCanvas):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DPrivate::GraphicsContext3DPrivate):
        (WebCore::GraphicsContext3DPrivate::~GraphicsContext3DPrivate):
        (WebCore::GraphicsContext3DPrivate::initialize):
        (WebCore::GraphicsContext3DPrivate::extractWebGraphicsContext3D):
        (WebCore::GraphicsContext3DPrivate::platformGraphicsContext3D):
        (WebCore::GraphicsContext3DPrivate::platformTexture):
        (WebCore::GraphicsContext3DPrivate::grContext):
        (WebCore::GraphicsContext3DPrivate::prepareTexture):
        (WebCore::GraphicsContext3DPrivate::platformLayer):
        (WebCore::GraphicsContext3DPrivate::markContextChanged):
        (WebCore::GraphicsContext3DPrivate::markLayerComposited):
        (WebCore::GraphicsContext3DPrivate::layerComposited):
        (WebCore::GraphicsContext3DPrivate::paintFramebufferToCanvas):
        (WebCore::GraphicsContext3DPrivate::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3DPrivate::paintCompositedResultsToCanvas):
        (WebCore::GraphicsContext3DPrivate::paintRenderingResultsToImageData):
        (WebCore::GraphicsContext3DPrivate::paintsIntoCanvasBuffer):
        (WebCore::GraphicsContext3DPrivate::reshape):
        (WebCore::GraphicsContext3DPrivate::getInternalFramebufferSize):
        (WebCore::GraphicsContext3DPrivate::isContextLost):
        (WebCore::GraphicsContext3DPrivate::isGLES2Compliant):
        (WebCore::GraphicsContext3DPrivate::bindAttribLocation):
        (WebCore::GraphicsContext3DPrivate::bufferData):
        (WebCore::GraphicsContext3DPrivate::bufferSubData):
        (WebCore::GraphicsContext3DPrivate::getActiveAttrib):
        (WebCore::GraphicsContext3DPrivate::getActiveUniform):
        (WebCore::GraphicsContext3DPrivate::getAttribLocation):
        (WebCore::GraphicsContext3DPrivate::getContextAttributes):
        (WebCore::GraphicsContext3DPrivate::getProgramInfoLog):
        (WebCore::GraphicsContext3DPrivate::getShaderInfoLog):
        (WebCore::GraphicsContext3DPrivate::getShaderSource):
        (WebCore::GraphicsContext3DPrivate::getString):
        (WebCore::GraphicsContext3DPrivate::getUniformLocation):
        (WebCore::GraphicsContext3DPrivate::shaderSource):
        (WebCore::GraphicsContext3DPrivate::texImage2D):
        (WebCore::GraphicsContext3DPrivate::texSubImage2D):
        (WebCore::GraphicsContext3DPrivate::uniform1fv):
        (WebCore::GraphicsContext3DPrivate::uniform1iv):
        (WebCore::GraphicsContext3DPrivate::uniform2fv):
        (WebCore::GraphicsContext3DPrivate::uniform2iv):
        (WebCore::GraphicsContext3DPrivate::uniform3fv):
        (WebCore::GraphicsContext3DPrivate::uniform3iv):
        (WebCore::GraphicsContext3DPrivate::uniform4fv):
        (WebCore::GraphicsContext3DPrivate::uniform4iv):
        (WebCore::GraphicsContext3DPrivate::uniformMatrix2fv):
        (WebCore::GraphicsContext3DPrivate::uniformMatrix3fv):
        (WebCore::GraphicsContext3DPrivate::uniformMatrix4fv):
        (WebCore::GraphicsContext3DPrivate::getExtensions):
        (WebCore::GraphicsContext3DPrivate::isResourceSafe):
        (WebCore::GraphicsContext3DPrivate::initializeExtensions):
        (WebCore::GraphicsContext3DPrivate::supportsExtension):
        (WebCore::GraphicsContext3DPrivate::ensureExtensionEnabled):
        (WebCore::GraphicsContext3DPrivate::isExtensionEnabled):
        (WebCore::GraphicsContext3D::~GraphicsContext3D):
        (WebCore::GraphicsContext3D::create):
        (WebCore::GraphicsContext3D::platformGraphicsContext3D):
        (WebCore::GraphicsContext3D::platformTexture):
        (WebCore::GraphicsContext3D::grContext):
        (WebCore::GraphicsContext3D::prepareTexture):
        (WebCore::GraphicsContext3D::getInternalFramebufferSize):
        (WebCore::GraphicsContext3D::isResourceSafe):
        (WebCore::GraphicsContext3D::platformLayer):
        (WebCore::GraphicsContext3D::layerComposited):
        (WebCore::GraphicsContext3D::paintsIntoCanvasBuffer):
        (WebCore::GraphicsContext3DPrivate::setContextLostCallback):
        (WebCore::GraphicsContext3D::isGLES2Compliant):
        (WebCore::GraphicsContext3DPrivate::setSwapBuffersCompleteCallbackCHROMIUM):
        * src/GraphicsContext3DInternal.h: Removed.
        * src/GraphicsContext3DPrivate.h: Copied from Source/WebKit/chromium/src/GraphicsContext3DInternal.h.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::graphicsContext3D):

2011-08-30  Kaustubh Atrawalkar  <kaustubh@motorola.com>

        The unused ScrollView* argument can and should be removed from
        scrollRectIntoView.
        https://bugs.webkit.org/show_bug.cgi?id=67117

        Reviewed by Darin Adler.

        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::scrollRectIntoView):
        * src/WebPopupMenuImpl.h:

2011-08-29  Greg Billock  <gbillock@google.com>

        [Chromium] Add ability to do static SerializedScriptValue deserialization
        https://bugs.webkit.org/show_bug.cgi?id=66877

        Reviewed by Darin Fisher.

        * public/WebSerializedScriptValue.h:
        * src/WebSerializedScriptValue.cpp:
        (WebKit::WebSerializedScriptValue::deserialize):
        (WebKit::WebSerializedScriptValue::serialize):

2011-08-27  Peter Beverloo  <peter@chromium.org>

        Teach the update and build scripts how to handle dependencies
        and cross-compiling rules for the Chromium port on OS(ANDROID).
        https://bugs.webkit.org/show_bug.cgi?id=66687

        Reviewed by Adam Barth.

        * gyp_webkit:

2011-08-26  Iain Merrick  <husky@google.com>

        [chromium] Add MockWebGraphicsContext3D, for compositor unit testing
        https://bugs.webkit.org/show_bug.cgi?id=67006

        MockWebGraphicsContext3D is a no-op implementation of the pure virtual
        interface WebGraphicsContext3D. I've included a test with a couple of
        example usages: subclassing it manually, and using it with GMock.

        Reviewed by Kenneth Russell.

        * WebKit.gypi:
        * tests/MockWebGraphicsContext3D.h: Added.
        (WebKit::MockWebGraphicsContext3D::initialize):
        (WebKit::MockWebGraphicsContext3D::makeContextCurrent):
        (WebKit::MockWebGraphicsContext3D::width):
        (WebKit::MockWebGraphicsContext3D::height):
        (WebKit::MockWebGraphicsContext3D::reshape):
        (WebKit::MockWebGraphicsContext3D::isGLES2Compliant):
        (WebKit::MockWebGraphicsContext3D::readBackFramebuffer):
        (WebKit::MockWebGraphicsContext3D::getPlatformTextureId):
        (WebKit::MockWebGraphicsContext3D::prepareTexture):
        (WebKit::MockWebGraphicsContext3D::synthesizeGLError):
        (WebKit::MockWebGraphicsContext3D::isContextLost):
        (WebKit::MockWebGraphicsContext3D::mapBufferSubDataCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::unmapBufferSubDataCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::mapTexSubImage2DCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::unmapTexSubImage2DCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::getRequestableExtensionsCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::requestExtensionCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::blitFramebufferCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::renderbufferStorageMultisampleCHROMIUM):
        (WebKit::MockWebGraphicsContext3D::activeTexture):
        (WebKit::MockWebGraphicsContext3D::attachShader):
        (WebKit::MockWebGraphicsContext3D::bindAttribLocation):
        (WebKit::MockWebGraphicsContext3D::bindBuffer):
        (WebKit::MockWebGraphicsContext3D::bindFramebuffer):
        (WebKit::MockWebGraphicsContext3D::bindRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::bindTexture):
        (WebKit::MockWebGraphicsContext3D::blendColor):
        (WebKit::MockWebGraphicsContext3D::blendEquation):
        (WebKit::MockWebGraphicsContext3D::blendEquationSeparate):
        (WebKit::MockWebGraphicsContext3D::blendFunc):
        (WebKit::MockWebGraphicsContext3D::blendFuncSeparate):
        (WebKit::MockWebGraphicsContext3D::bufferData):
        (WebKit::MockWebGraphicsContext3D::bufferSubData):
        (WebKit::MockWebGraphicsContext3D::checkFramebufferStatus):
        (WebKit::MockWebGraphicsContext3D::clear):
        (WebKit::MockWebGraphicsContext3D::clearColor):
        (WebKit::MockWebGraphicsContext3D::clearDepth):
        (WebKit::MockWebGraphicsContext3D::clearStencil):
        (WebKit::MockWebGraphicsContext3D::colorMask):
        (WebKit::MockWebGraphicsContext3D::compileShader):
        (WebKit::MockWebGraphicsContext3D::copyTexImage2D):
        (WebKit::MockWebGraphicsContext3D::copyTexSubImage2D):
        (WebKit::MockWebGraphicsContext3D::cullFace):
        (WebKit::MockWebGraphicsContext3D::depthFunc):
        (WebKit::MockWebGraphicsContext3D::depthMask):
        (WebKit::MockWebGraphicsContext3D::depthRange):
        (WebKit::MockWebGraphicsContext3D::detachShader):
        (WebKit::MockWebGraphicsContext3D::disable):
        (WebKit::MockWebGraphicsContext3D::disableVertexAttribArray):
        (WebKit::MockWebGraphicsContext3D::drawArrays):
        (WebKit::MockWebGraphicsContext3D::drawElements):
        (WebKit::MockWebGraphicsContext3D::enable):
        (WebKit::MockWebGraphicsContext3D::enableVertexAttribArray):
        (WebKit::MockWebGraphicsContext3D::finish):
        (WebKit::MockWebGraphicsContext3D::flush):
        (WebKit::MockWebGraphicsContext3D::framebufferRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::framebufferTexture2D):
        (WebKit::MockWebGraphicsContext3D::frontFace):
        (WebKit::MockWebGraphicsContext3D::generateMipmap):
        (WebKit::MockWebGraphicsContext3D::getActiveAttrib):
        (WebKit::MockWebGraphicsContext3D::getActiveUniform):
        (WebKit::MockWebGraphicsContext3D::getAttachedShaders):
        (WebKit::MockWebGraphicsContext3D::getAttribLocation):
        (WebKit::MockWebGraphicsContext3D::getBooleanv):
        (WebKit::MockWebGraphicsContext3D::getBufferParameteriv):
        (WebKit::MockWebGraphicsContext3D::getContextAttributes):
        (WebKit::MockWebGraphicsContext3D::getError):
        (WebKit::MockWebGraphicsContext3D::getFloatv):
        (WebKit::MockWebGraphicsContext3D::getFramebufferAttachmentParameteriv):
        (WebKit::MockWebGraphicsContext3D::getIntegerv):
        (WebKit::MockWebGraphicsContext3D::getProgramiv):
        (WebKit::MockWebGraphicsContext3D::getProgramInfoLog):
        (WebKit::MockWebGraphicsContext3D::getRenderbufferParameteriv):
        (WebKit::MockWebGraphicsContext3D::getShaderiv):
        (WebKit::MockWebGraphicsContext3D::getShaderInfoLog):
        (WebKit::MockWebGraphicsContext3D::getShaderSource):
        (WebKit::MockWebGraphicsContext3D::getString):
        (WebKit::MockWebGraphicsContext3D::getTexParameterfv):
        (WebKit::MockWebGraphicsContext3D::getTexParameteriv):
        (WebKit::MockWebGraphicsContext3D::getUniformfv):
        (WebKit::MockWebGraphicsContext3D::getUniformiv):
        (WebKit::MockWebGraphicsContext3D::getUniformLocation):
        (WebKit::MockWebGraphicsContext3D::getVertexAttribfv):
        (WebKit::MockWebGraphicsContext3D::getVertexAttribiv):
        (WebKit::MockWebGraphicsContext3D::getVertexAttribOffset):
        (WebKit::MockWebGraphicsContext3D::hint):
        (WebKit::MockWebGraphicsContext3D::isBuffer):
        (WebKit::MockWebGraphicsContext3D::isEnabled):
        (WebKit::MockWebGraphicsContext3D::isFramebuffer):
        (WebKit::MockWebGraphicsContext3D::isProgram):
        (WebKit::MockWebGraphicsContext3D::isRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::isShader):
        (WebKit::MockWebGraphicsContext3D::isTexture):
        (WebKit::MockWebGraphicsContext3D::lineWidth):
        (WebKit::MockWebGraphicsContext3D::linkProgram):
        (WebKit::MockWebGraphicsContext3D::pixelStorei):
        (WebKit::MockWebGraphicsContext3D::polygonOffset):
        (WebKit::MockWebGraphicsContext3D::readPixels):
        (WebKit::MockWebGraphicsContext3D::releaseShaderCompiler):
        (WebKit::MockWebGraphicsContext3D::renderbufferStorage):
        (WebKit::MockWebGraphicsContext3D::sampleCoverage):
        (WebKit::MockWebGraphicsContext3D::scissor):
        (WebKit::MockWebGraphicsContext3D::shaderSource):
        (WebKit::MockWebGraphicsContext3D::stencilFunc):
        (WebKit::MockWebGraphicsContext3D::stencilFuncSeparate):
        (WebKit::MockWebGraphicsContext3D::stencilMask):
        (WebKit::MockWebGraphicsContext3D::stencilMaskSeparate):
        (WebKit::MockWebGraphicsContext3D::stencilOp):
        (WebKit::MockWebGraphicsContext3D::stencilOpSeparate):
        (WebKit::MockWebGraphicsContext3D::texImage2D):
        (WebKit::MockWebGraphicsContext3D::texParameterf):
        (WebKit::MockWebGraphicsContext3D::texParameteri):
        (WebKit::MockWebGraphicsContext3D::texSubImage2D):
        (WebKit::MockWebGraphicsContext3D::uniform1f):
        (WebKit::MockWebGraphicsContext3D::uniform1fv):
        (WebKit::MockWebGraphicsContext3D::uniform1i):
        (WebKit::MockWebGraphicsContext3D::uniform1iv):
        (WebKit::MockWebGraphicsContext3D::uniform2f):
        (WebKit::MockWebGraphicsContext3D::uniform2fv):
        (WebKit::MockWebGraphicsContext3D::uniform2i):
        (WebKit::MockWebGraphicsContext3D::uniform2iv):
        (WebKit::MockWebGraphicsContext3D::uniform3f):
        (WebKit::MockWebGraphicsContext3D::uniform3fv):
        (WebKit::MockWebGraphicsContext3D::uniform3i):
        (WebKit::MockWebGraphicsContext3D::uniform3iv):
        (WebKit::MockWebGraphicsContext3D::uniform4f):
        (WebKit::MockWebGraphicsContext3D::uniform4fv):
        (WebKit::MockWebGraphicsContext3D::uniform4i):
        (WebKit::MockWebGraphicsContext3D::uniform4iv):
        (WebKit::MockWebGraphicsContext3D::uniformMatrix2fv):
        (WebKit::MockWebGraphicsContext3D::uniformMatrix3fv):
        (WebKit::MockWebGraphicsContext3D::uniformMatrix4fv):
        (WebKit::MockWebGraphicsContext3D::useProgram):
        (WebKit::MockWebGraphicsContext3D::validateProgram):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib1f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib1fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib2f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib2fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib3f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib3fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib4f):
        (WebKit::MockWebGraphicsContext3D::vertexAttrib4fv):
        (WebKit::MockWebGraphicsContext3D::vertexAttribPointer):
        (WebKit::MockWebGraphicsContext3D::viewport):
        (WebKit::MockWebGraphicsContext3D::createBuffer):
        (WebKit::MockWebGraphicsContext3D::createFramebuffer):
        (WebKit::MockWebGraphicsContext3D::createProgram):
        (WebKit::MockWebGraphicsContext3D::createRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::createShader):
        (WebKit::MockWebGraphicsContext3D::createTexture):
        (WebKit::MockWebGraphicsContext3D::deleteBuffer):
        (WebKit::MockWebGraphicsContext3D::deleteFramebuffer):
        (WebKit::MockWebGraphicsContext3D::deleteProgram):
        (WebKit::MockWebGraphicsContext3D::deleteRenderbuffer):
        (WebKit::MockWebGraphicsContext3D::deleteShader):
        (WebKit::MockWebGraphicsContext3D::deleteTexture):
        * tests/MockWebGraphicsContext3DTest.cpp: Added.
        (TEST):
        (FrameCountingContext::FrameCountingContext):
        (FrameCountingContext::prepareTexture):
        (FrameCountingContext::frameCount):

2011-08-26  Nate Chapin  <japhet@chromium.org>

        Use enums instead of bools for ThreadableLoaderOptions
        variables.
        https://bugs.webkit.org/show_bug.cgi?id=66984

        Reviewed by David Levin.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::loadAsynchronously):

2011-08-25  Jeremy Apthorp  <jeremya@google.com>

        Enable fullscreen API in Chromium by default.
        https://bugs.webkit.org/show_bug.cgi?id=66993

        Reviewed by Adam Barth.

        * features.gypi:

2011-08-25  Scott Graham  <scottmg@chromium.org>

        Enable incremental linking for component build on Chromium
        https://bugs.webkit.org/show_bug.cgi?id=66950

        Reviewed by Darin Fisher.

        Turns on Use Library Dependency Inputs for webkit.vcproj on Windows
        build, when incremental_chrome_dll gyp flag is set. This is to get
        faster incremental links on Windows builds.

        * WebKit.gyp:

2011-08-25  Pavel Podivilov  <podivilov@chromium.org>

        Unreviewed, fix chromium devtools tests.

        * src/js/Tests.js:
        (.TestSuite.prototype.evaluateInConsole_):

2011-08-25  John Bates  <jbates@google.com>

        [chromium] Leaking SkBitmaps for background images
        https://bugs.webkit.org/show_bug.cgi?id=66488

        Reviewed by Stephen White.

        This patch simply changes NativeImageSkia to have a SkBitmap instead of
        deriving from SkBitmap. All dependent code updated to access the member
        instead of calling SkBitmap methods on NativeImageSkia objects. This
        may or may not fix the memory leak, but it's definitely a bug that could
        cause memory leaks.

        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::clipboardWriteImage):
        * src/WebImageDecoder.cpp:
        (WebKit::WebImageDecoder::getFrameAtIndex):
        * src/WebImageSkia.cpp:
        (WebKit::WebImage::fromData):
        (WebKit::WebImage::operator=):

2011-08-25  Brian Salomon  <bsalomon@google.com>

        [SKIA] Move forward decl of skia type outside namespace Webkit
        https://bugs.webkit.org/show_bug.cgi?id=66942

        Reviewed by Stephen White.

        * public/WebGraphicsContext3D.h:

2011-08-25  Mikhail Naganov  <mnaganov@chromium.org>

        Chromium: expose MemoryCache::prune and FontCache::purgeInactiveFontData.
        https://bugs.webkit.org/show_bug.cgi?id=66132

        Reviewed by Tony Gentilcore.

        * public/WebCache.h:
        * public/WebFontCache.h:
        * src/WebCache.cpp:
        (WebKit::WebCache::clear):
        (WebKit::WebCache::prune):
        * src/WebFontCache.cpp:
        (WebKit::WebFontCache::prune):

2011-08-24  Kentaro Hara  <haraken@google.com>

        Implement a keypath parser strictly following the specification
        https://bugs.webkit.org/show_bug.cgi?id=62288

        Reviewed by Tony Chang.

        Implemented a keypath parser that accepts either an empty string, a JavaScript
        identifier, or multiple JavaScript identifiers separated by periods.
        We fixed createObjectStore() and createIndex() so that they parse and check
        their |keypath| argument and return an appropriate exception if the |keypath|
        is not valid. We also added unit tests for the new keypath parser in
        tests/IDBKeyPathTest.cpp. We replaced IDBKeyPathElement with String here and there.

        Tests: IDBKeyPathTest.*
               IDBKeyFromValueAndKeyPathTest.*
               InjectIDBKeyTest.*

        * public/WebIDBKeyPath.h:
        * src/WebIDBKeyPath.cpp:
        (WebKit::WebIDBKeyPath::create): Replaced IDBKeyPathElement with String
        (WebKit::WebIDBKeyPath::WebIDBKeyPath): Replaced IDBKeyPathElement with String
        (WebKit::WebIDBKeyPath::assign): Replaced IDBKeyPathElement with String
        (WebKit::WebIDBKeyPath::operator const WTF::Vector<WTF::String, 0>&): Replaced IDBKeyPathElement with String
        * tests/IDBBindingUtilitiesTest.cpp:
        (WebCore::checkKeyFromValueAndKeyPathInternal): Replaced IDBKeyPathElement with String
        (WebCore::injectKey): Replaced IDBKeyPathElement with String
        (WebCore::TEST): Rewrote tests for the new keypath parser
        * tests/IDBKeyPathTest.cpp:
        (WebCore::checkKeyPath): Checks if a keypath is an expected keypath or not
        (WebCore::TEST): Unit tests for the new keypath parser

2011-08-24  Eric Uhrhane  <ericu@chromium.org>

        Reviewed by Adam Barth.

        [filesystem/Chromium] Filesystem paths need proper URL escaping
        https://bugs.webkit.org/show_bug.cgi?id=62811

        Fix http://code.google.com/p/chromium/issues/detail?id=78860 by making
        KURLChromium.cpp's escaping code actually work.

        Here I added the needed calls to encodeWithURLEscapeSequences.
        * src/AsyncFileSystemChromium.cpp:
        (WebCore::AsyncFileSystemChromium::virtualPathToFileSystemURL):
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::virtualPathToFileSystemURL):

        Here I updated the test to reflect the new functionality in
        encodeWithURLEscapeSequences.
        * tests/KURLTest.cpp:

2011-08-24  Ilya Sherman  <isherman@chromium.org>

        Remove some dead Autofill code
        https://bugs.webkit.org/show_bug.cgi?id=66899
        http://code.google.com/p/chromium/issues/detail?id=51644

        Reviewed by James Robinson.

        * WebKit.gyp:
        * public/WebAutofillClient.h:
        * public/WebFrame.h:
        * public/WebPasswordAutocompleteListener.h: Removed.
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::EditorClientImpl):
        (WebKit::EditorClientImpl::handleKeyboardEvent):
        (WebKit::EditorClientImpl::textFieldDidBeginEditing):
        (WebKit::EditorClientImpl::textFieldDidEndEditing):
        (WebKit::EditorClientImpl::textDidChangeInTextField):
        (WebKit::EditorClientImpl::doTextFieldCommandFromEvent):
        * src/EditorClientImpl.h:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidFinishDocumentLoad):
        * src/WebFrameImpl.cpp:
        (WebKit::frameContentAsPlainText):
        (WebKit::WebFrameImpl::scopeStringMatches):
        (WebKit::WebFrameImpl::~WebFrameImpl):
        * src/WebFrameImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::mouseDown):

2011-08-24  Tom Sepez  <tsepez@chromium.org>

        chromium WebFrameImpl - don't load javascript URLs against chrome internal pages.
        https://bugs.webkit.org/show_bug.cgi?id=66720

        Reviewed by Adam Barth.

        * public/WebSecurityPolicy.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadJavaScriptURL):
        * src/WebSecurityPolicy.cpp:
        (WebKit::WebSecurityPolicy::registerURLSchemeAsNotAllowingJavascriptURLs):
        * tests/WebFrameTest.cpp:
        (WebKit::WebFrameTest::WebFrameTest):
        (WebKit::WebFrameTest::registerMockedHttpURLLoad):
        (WebKit::WebFrameTest::registerMockedChromeURLLoad):
        (WebKit::WebFrameTest::serveRequests):
        (WebKit::WebFrameTest::loadHttpFrame):
        (WebKit::WebFrameTest::loadChromeFrame):
        (WebKit::WebFrameTest::registerMockedURLLoad):
        (WebKit::WebFrameTest::loadFrame):
        (WebKit::TEST_F):
        * tests/data/history.html: Added.

2011-08-24  Jeremy Apthorp  <jeremya@google.com>

        Expose fullscreen API on WebElement/WebDocument
        https://bugs.webkit.org/show_bug.cgi?id=66746

        Reviewed by Darin Fisher.

        * public/WebPluginContainer.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setFullscreen):
        * src/WebPluginContainerImpl.h:

2011-08-24  Brian Salomon  <bsalomon@google.com>

        [SKIA] Allow WebKitGraphicsContext3D implementation to provide a compatible GrGLInterface
        https://bugs.webkit.org/show_bug.cgi?id=66809

        Reviewed by Stephen White.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::grGLInterface):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::grContext):

2011-08-23  Adam Barth  <abarth@webkit.org>

        WebSearchableFormData crashes when given a detached HTMLFormElement
        https://bugs.webkit.org/show_bug.cgi?id=66831

        Reviewed by Dimitri Glazkov.

        We need to null-check the Frame.

        * src/WebSearchableFormData.cpp:
        (HTMLNames::GetFormEncoding):
        * tests/WebFrameTest.cpp:
        (WebKit::TEST_F):
        * tests/data/form.html: Added.

2011-08-23  Iain Merrick  <husky@google.com>

        [chromium] Make WebGL context current before querying for extensions
        https://bugs.webkit.org/show_bug.cgi?id=66788

        We're making changes on the Chromium side for threaded compositing that
        will require makeContextCurrent to be called on the appropriate thread
        before any other GL calls.

        In line with other GraphicsContext3D implementations, we do this
        implicitly. This is the minimum change that makes WebGL compliant.

        Reviewed by Kenneth Russell.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initializeExtensions):

2011-08-23  Scott Byer  <scottbyer@chromium.org>

        ScrollAnimatorNone coasting implementation
        https://bugs.webkit.org/show_bug.cgi?id=66258

        Reviewed by James Robinson.

        * tests/ScrollAnimatorNoneTest.cpp:
        (MockScrollableArea::visibleHeight):
        (MockScrollableArea::visibleWidth):
        (ScrollAnimatorNoneTest::SavePerAxisData::SavePerAxisData):
        (ScrollAnimatorNoneTest::SavePerAxisData::operator==):
        (ScrollAnimatorNoneTest::SetUp):
        (ScrollAnimatorNoneTest::updateDataFromParameters):
        (ScrollAnimatorNoneTest::animateScroll):
        (ScrollAnimatorNoneTest::attackArea):
        (ScrollAnimatorNoneTest::releaseArea):
        (ScrollAnimatorNoneTest::coastCurve):
        (ScrollAnimatorNoneTest::curveTestInner):
        (TEST_F):

2011-08-23  James Robinson  <jamesr@chromium.org>

        [chromium] Need a way to test lost compositor context recovery
        https://bugs.webkit.org/show_bug.cgi?id=66820

        Reviewed by Kenneth Russell.

        Adds a testing-only API to simulate a lost compositor context.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::loseCompositorContext):
        * src/WebViewImpl.h:

2011-08-23  Nat Duca  <nduca@chromium.org>

        [chromium] Implement CCThread in terms of WebThread
        https://bugs.webkit.org/show_bug.cgi?id=66610

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebThread.h:
        (WebKit::WebThread::~WebThread):
        * src/CCThreadImpl.cpp: Added.
        (WebKit::GetThreadIDTask::GetThreadIDTask):
        (WebKit::GetThreadIDTask::~GetThreadIDTask):
        (WebKit::GetThreadIDTask::run):
        (WebKit::CCThreadTaskAdapter::CCThreadTaskAdapter):
        (WebKit::CCThreadTaskAdapter::~CCThreadTaskAdapter):
        (WebKit::CCThreadTaskAdapter::run):
        (WebKit::CCThreadImpl::create):
        (WebKit::CCThreadImpl::~CCThreadImpl):
        (WebKit::CCThreadImpl::postTask):
        (WebKit::CCThreadImpl::threadID):
        (WebKit::CCThreadImpl::CCThreadImpl):
        * src/CCThreadImpl.h: Renamed from Source/WebCore/platform/graphics/chromium/cc/CCThread.cpp.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::createCompositorThread):
        * src/WebViewImpl.h:
        * tests/CCThreadTest.cpp:

2011-08-23  Iain Merrick  <husky@google.com>

        [chromium] Renderer crashes when about:gpucrash is loaded
        https://bugs.webkit.org/show_bug.cgi?id=66814

        WebViewImpl::didRecreateGraphicsContext() was calling
        setRootLayer() on the CC layer tree, but the root layer
        doesn't actually change and the code wasn't defensive
        against this. This CL adds some asserts to catch tree
        corruption and removes the unnecessary calls.

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::didRecreateGraphicsContext):

2011-08-23  Dmitry Lomov  <Dmitry Lomov (dslomov@google.com)>

        https://bugs.webkit.org/show_bug.cgi?id=66751 
        [Chromium]WebWorkerClientImpl should always invoke
        InspectorIntrumentation on main thread.
        The fix moves calls to InspectorInstrumentation from
        WebWorkerClientImpl to unedrlying WorkerMessagingProxy.

        Reviewed by Pavel Feldman.

        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::terminateWorkerContext):
        (WebKit::WebWorkerClientImpl::workerContextDestroyed):

2011-08-23  Adam Klein  <adamk@chromium.org>

        [chromium] Remove a few FIXME #defines in API headers
        https://bugs.webkit.org/show_bug.cgi?id=66791

        Reviewed by James Robinson.

        * DEPS:
        Roll chromium_rev to r97891.
        * public/WebFileSystem.h:
        #define made obsolete in http://crrev.com/97520.
        * public/WebKitClient.h:
        #define made obsolete in http://crrev.com/97524 and
        http://crrev.com/97891.


2011-08-23  Al Patrick  <apatrick@chromium.org>

        Add shareResources flag to 3D graphics context attributes
        https://bugs.webkit.org/show_bug.cgi?id=66516

        Reviewed by James Robinson.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::Attributes::Attributes):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):
        * src/WebViewImpl.cpp:
        (std::getCompositorContextAttributes):

2011-08-23  Fady Samuel  <fsamuel@chromium.org>

        New MainFrame views should inherit fixed layout settings from existing MainFrame view in Chromium.
        https://bugs.webkit.org/show_bug.cgi?id=66780

        Fixed layout mode is set from WebViewImpl, but new main FrameViews are created on loading new pages. The new page's FrameView should get its
        fixed layout settings from the current page.

        Reviewed by Darin Fisher.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):

2011-08-23  Matt Falkenhagen  <falken@chromium.org>

        [chromium] Update WebSettings to support per-script font settings
        https://bugs.webkit.org/show_bug.cgi?id=66220

        Reviewed by Tony Chang.

        * WebKit.gyp:
        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setStandardFontFamily):
        (WebKit::WebSettingsImpl::setFixedFontFamily):
        (WebKit::WebSettingsImpl::setSerifFontFamily):
        (WebKit::WebSettingsImpl::setSansSerifFontFamily):
        (WebKit::WebSettingsImpl::setCursiveFontFamily):
        (WebKit::WebSettingsImpl::setFantasyFontFamily):
        * src/WebSettingsImpl.h:

2011-08-23  Nat Duca  <nduca@chromium.org>

        Unreviewd, roll chromium reverse DEPS 97698:97834
        https://bugs.webkit.org/show_bug.cgi?id=66781

        * DEPS:

2011-08-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r93575.
        http://trac.webkit.org/changeset/93575
        https://bugs.webkit.org/show_bug.cgi?id=66744

        Does not compile on chromium canaries (Requested by jamesr on
        #webkit).

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setStandardFontFamily):
        (WebKit::WebSettingsImpl::setFixedFontFamily):
        (WebKit::WebSettingsImpl::setSerifFontFamily):
        (WebKit::WebSettingsImpl::setSansSerifFontFamily):
        (WebKit::WebSettingsImpl::setCursiveFontFamily):
        (WebKit::WebSettingsImpl::setFantasyFontFamily):
        * src/WebSettingsImpl.h:

2011-08-22  Matt Falkenhagen  <falken@chromium.org>

        [chromium] Update WebSettings to support per-script font settings
        https://bugs.webkit.org/show_bug.cgi?id=66220

        Reviewed by Tony Chang.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setStandardFontFamily):
        (WebKit::WebSettingsImpl::setFixedFontFamily):
        (WebKit::WebSettingsImpl::setSerifFontFamily):
        (WebKit::WebSettingsImpl::setSansSerifFontFamily):
        (WebKit::WebSettingsImpl::setCursiveFontFamily):
        (WebKit::WebSettingsImpl::setFantasyFontFamily):
        * src/WebSettingsImpl.h:

2011-08-22  Iain Merrick  <husky@google.com>

        [chromium] WebViewImpl should not reshape the 3D context
        https://bugs.webkit.org/show_bug.cgi?id=66704

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebViewImpl::graphicsContext3D):

2011-08-22  Nat Duca  <nduca@chromium.org>

        Make GraphicsContext3D::isResourceSafe a function and, on Chromium, determine its value lazily
        https://bugs.webkit.org/show_bug.cgi?id=66708

        Reviewed by Kenneth Russell.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::isResourceSafe):
        (WebCore::GraphicsContext3D::create):
        (WebCore::GraphicsContext3D::isResourceSafe):
        * src/GraphicsContext3DInternal.h:

2011-08-22  Adam Klein  <adamk@chromium.org>

        [chromium] Remove deprecated and unused bits of WebIDB* headers
        https://bugs.webkit.org/show_bug.cgi?id=66711

        Reviewed by Tony Chang.

        The Chromium side of this patch was submitted as
        http://crrev.com/97687.

        * public/WebIDBCallbacks.h:
        * public/WebIDBCursor.h:
        (WebKit::WebIDBCursor::primaryKey):
        (WebKit::WebIDBCursor::value):
        (WebKit::WebIDBCursor::deleteFunction):
        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::transaction):

2011-08-22  Dimitri Glazkov  <dglazkov@chromium.org>

        Remove third_party/leveldb, because it's no longer used and doesn't exist downstream.

        * DEPS: Done it.

2011-08-22  Dimitri Glazkov  <dglazkov@chromium.org>

        Roll Chromium DEPS to 97698.

        * DEPS: Rolled.

2011-08-22  Justin Novosad  <junov@chromium.org>

        [Chromium] Crash when allocation of very large canvas fails
        https://bugs.webkit.org/show_bug.cgi?id=66563

        Reviewed by Stephen White.

        * DEPS:
        Bumping up the chrome DEPS to pick up 97474, which is
        required by this patch.

2011-08-20  Nebojsa Ciric  <cira@chromium.org>

        Add dependency on v8-i18n library. We used v8 repository before.
        Chromium DEPS change was already submited (http://codereview.chromium.org/7583050).
        https://bugs.webkit.org/show_bug.cgi?id=66573

        Reviewed by Kent Tamura.

        * DEPS:

2011-08-19  Adam Klein  <adamk@chromium.org>

        [chromium] Remove various unreferenced bits from Chromium API headers
        https://bugs.webkit.org/show_bug.cgi?id=66575

        Reviewed by Tony Chang.

        * public/WebApplicationCacheHost.h:
        (WebKit::WebApplicationCacheHost::willStartMainResourceRequest):
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didReceiveTitle):
        * public/WebVideoFrame.h:

2011-08-19  Fady Samuel  <fsamuel@chromium.org>

        Expose Fixed Layout Size mode to Chromium's WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=66568

        Reviewed by Darin Fisher.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::isFixedLayoutModeEnabled):
        (WebKit::WebViewImpl::enableFixedLayoutMode):
        (WebKit::WebViewImpl::fixedLayoutSize):
        (WebKit::WebViewImpl::setFixedLayoutSize):
        * src/WebViewImpl.h:

2011-08-17  Adrienne Walker  <enne@google.com>

        [chromium] Split tiler into main thread / compositor thread versions
        https://bugs.webkit.org/show_bug.cgi?id=66065

        Reviewed by James Robinson.

        Add a test for assignment and copy constructor for TilingData.

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-08-19  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: [Extensions API][chromium] webInspector.resources deprecation warning is given even for extensions that don't use webInspector.resources
        https://bugs.webkit.org/show_bug.cgi?id=66553

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:
        (WebInspector.platformExtensionAPI):

2011-08-18  James Kozianski  <koz@chromium.org>

        Chromium plumbing for webkitRequestFullScreen
        https://bugs.webkit.org/show_bug.cgi?id=66031

        Reviewed by Darin Fisher.

        * public/WebView.h:
        * public/WebViewClient.h:
        (WebKit::WebViewClient::enterFullscreenForElement):
        (WebKit::WebViewClient::exitFullscreenForElement):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::enterFullScreenForElement):
        (WebKit::ChromeClientImpl::exitFullScreenForElement):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::exitFullscreen):
        * src/WebViewImpl.h:

2011-08-18  Chris Rogers  <crogers@google.com>

        Implement WebMediaPlayerClientImpl::audioSourceProvider() and interface into chromium
        https://bugs.webkit.org/show_bug.cgi?id=66441

        Reviewed by Darin Fisher.

        * public/WebAudioSourceProvider.h: Added.
        (WebKit::WebAudioSourceProvider::~WebAudioSourceProvider):
        * public/WebMediaPlayer.h:
        (WebKit::WebMediaPlayer::audioSourceProvider):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::audioSourceProvider):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::provideInput):
        * src/WebMediaPlayerClientImpl.h:
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::AudioSourceProviderImpl):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::~AudioSourceProviderImpl):
        (WebKit::WebMediaPlayerClientImpl::AudioSourceProviderImpl::initialize):

2011-08-18  Sailesh Agrawal  <sail@chromium.org>

        Chromium Mac: Show scrollbar when doing search
        https://bugs.webkit.org/show_bug.cgi?id=66209

        Reviewed by James Robinson.

        Fixed a bug in invalidateArea where it wouldn't properly invalidate overlay scrollbars. The problem was that it was assuming that the scrollbar was always to the right of the visible scrollbar. This isn't true for overlay scrollbars.

        No tests because there are no Mac 10.7 chromium bots yet.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::invalidateArea):

2011-08-18  James Robinson  <jamesr@chromium.org>

        [chromium] Draw the root/"non-composited content" in compositor side
        https://bugs.webkit.org/show_bug.cgi?id=58834

        Reviewed by Kenneth Russell.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::didRecreateGraphicsContext):
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        * src/WebViewImpl.h:

2011-08-18  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        GestureRecognizer: Update how gesture-scroll works.

        Add a unit-test to make sure the correct gesture events are being
        generated.
        https://bugs.webkit.org/show_bug.cgi?id=66267

        Reviewed by Adam Barth.

        * tests/InnerGestureRecognizerTest.cpp:
        (WebCore::BuildablePlatformTouchPoint::BuildablePlatformTouchPoint):
        (WebCore::BuildablePlatformTouchEvent::BuildablePlatformTouchEvent):
        (WebCore::TEST_F):

2011-08-18  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r93329.
        http://trac.webkit.org/changeset/93329
        https://bugs.webkit.org/show_bug.cgi?id=66497

        Turned text on chromium win blue (Requested by jamesr_ on
        #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::setRootPlatformLayer):
        (WebKit::WebViewImpl::didRecreateGraphicsContext):
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        * src/WebViewImpl.h:

2011-08-18  Dominic Mazzoni  <dmazzoni@google.com>

        Add a bunch of accessors to WebAccessibilityObject to expose more of
        AccessibilityObject to Chromium, including range control values,
        document load state, live region attributes, and a few other
        ARIA attributes.

        https://bugs.webkit.org/show_bug.cgi?id=66411

        Reviewed by Dimitri Glazkov.

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::isAriaReadOnly):
        (WebKit::WebAccessibilityObject::isButtonStateMixed):
        (WebKit::WebAccessibilityObject::isControl):
        (WebKit::WebAccessibilityObject::isFocused):
        (WebKit::WebAccessibilityObject::isLoaded):
        (WebKit::WebAccessibilityObject::isRequired):
        (WebKit::WebAccessibilityObject::isVertical):
        (WebKit::WebAccessibilityObject::accessKey):
        (WebKit::WebAccessibilityObject::ariaHasPopup):
        (WebKit::WebAccessibilityObject::ariaLiveRegionAtomic):
        (WebKit::WebAccessibilityObject::ariaLiveRegionBusy):
        (WebKit::WebAccessibilityObject::ariaLiveRegionRelevant):
        (WebKit::WebAccessibilityObject::ariaLiveRegionStatus):
        (WebKit::WebAccessibilityObject::estimatedLoadingProgress):
        (WebKit::WebAccessibilityObject::hierarchicalLevel):
        (WebKit::WebAccessibilityObject::valueDescription):
        (WebKit::WebAccessibilityObject::valueForRange):
        (WebKit::WebAccessibilityObject::maxValueForRange):
        (WebKit::WebAccessibilityObject::minValueForRange):

2011-08-15  Dmitry Lomov  <dslomov@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=61016
        [WebWorkers][Chromium] Use v8 Isolates for in-process implementation of WebWorkers.
        This adds an implementation of in-process dedicated workers to chromium port.
        The crux of the matter is the reimplementation of WebWorkerClientImpl. WebWorkerClientImpl now 
        implements all three of Worker{Loader,Context,Object}Proxies and delegates the implementation to 
        WebKit's standard WorkerMessagingProxy.
        For now, we have 3 implementations of workers in chromium WebKit:
          - In-process dedicated workers (this checkin)
          - Inter-process shared workers
          - Inter-process dedicated workers (defunct after this checkin)
        This patch extracts some new common interfaces (NewWebWorkerBase and NewWebWorkerClient) for these 
        three implementations. 
        Removing the remainings of inter-process dedicated workers -related classes is left for a separate patch 
        (it will require coordinated changes on chromuium side).

        Reviewed by David Levin.

        * public/WebCommonWorkerClient.h:
        * src/DatabaseObserver.cpp:
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge):
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask):
        (WebKit::allowDatabaseForWorker):
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
        * src/WebSharedWorkerImpl.h:
        (WebKit::WebSharedWorkerImpl::newCommonClient):
        * src/WebWorkerBase.h:
        (WebKit::WebWorkerBase::view):
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::createWorkerContextProxy):
        (WebKit::WebWorkerClientImpl::startWorkerContext):
        (WebKit::WebWorkerClientImpl::terminateWorkerContext):
        (WebKit::WebWorkerClientImpl::postMessageToWorkerContext):
        (WebKit::WebWorkerClientImpl::hasPendingActivity):
        (WebKit::WebWorkerClientImpl::workerObjectDestroyed):
        (WebKit::WebWorkerClientImpl::connectToInspector):
        (WebKit::WebWorkerClientImpl::disconnectFromInspector):
        (WebKit::WebWorkerClientImpl::sendMessageToInspector):
        (WebKit::WebWorkerClientImpl::postMessageToPageInspector):
        (WebKit::WebWorkerClientImpl::postTaskToLoader):
        (WebKit::WebWorkerClientImpl::postTaskForModeToWorkerContext):
        (WebKit::WebWorkerClientImpl::postMessageToWorkerObject):
        (WebKit::WebWorkerClientImpl::confirmMessageFromWorkerObject):
        (WebKit::WebWorkerClientImpl::reportPendingActivity):
        (WebKit::WebWorkerClientImpl::workerContextClosed):
        (WebKit::WebWorkerClientImpl::postExceptionToWorkerObject):
        (WebKit::WebWorkerClientImpl::postConsoleMessageToWorkerObject):
        (WebKit::WebWorkerClientImpl::workerContextDestroyed):
        (WebKit::WebWorkerClientImpl::allowFileSystem):
        (WebKit::WebWorkerClientImpl::openFileSystem):
        (WebKit::WebWorkerClientImpl::allowDatabase):
        (WebKit::WebWorkerClientImpl::dispatchDevToolsMessage):
        (WebKit::WebWorkerClientImpl::view):
        (WebKit::WebWorkerClientImpl::WebWorkerClientImpl):
        (WebKit::WebWorkerClientImpl::~WebWorkerClientImpl):
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::newCommonClient):
        * src/WebWorkerImpl.cpp:
        (WebKit::WebWorkerImpl::newCommonClient):
        * src/WebWorkerImpl.h:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-08-18  James Robinson  <jamesr@chromium.org>

        [chromium] Draw the root/"non-composited content" in compositor side
        https://bugs.webkit.org/show_bug.cgi?id=58834

        Reviewed by Darin Fisher.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::didRecreateGraphicsContext):
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        * src/WebViewImpl.h:

2011-08-18  Tony Chang  <tony@chromium.org>

        Revert r93294, doesn't compile on Chromium Mac.

        * features.gypi:

2011-08-17  Adam Roben  <aroben@apple.com>

        Make WebCore keep track of the current device scale factor

        Fixes <http://webkit.org/b/66413> WebCore requires every WebKit port to keep track of the
        device scale factor

        Reviewed by Darin Adler.

        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:
        Removed deviceScaleFactor.

2011-08-18  Steve Block  <steveblock@google.com>

        Remove a superfluous 'using' from WebBindings.cpp
        https://bugs.webkit.org/show_bug.cgi?id=66046

        Reviewed by Alexey Proskuryakov.

        * src/WebBindings.cpp:

2011-08-18  Gavin Peters  <gavinp@chromium.org>

        Prepare frames for history navigation.

        Before beginning an explicit history navigation in a newly initialized
        frame, it's important to give a "previous" item to avoid crashes, and
        give a state to the state machine to avoid extra validating loads.

        https://bugs.webkit.org/show_bug.cgi?id=66322

        Reviewed by Darin Fisher.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadHistoryItem):

2011-08-18  Nico Weber  <thakis@chromium.org>

        [chromium/mac] Enable smooth scrolling
        https://bugs.webkit.org/show_bug.cgi?id=66418

        Reviewed by Dimitri Glazkov.

        * features.gypi:

2011-08-17  Scott Byer  <scottbyer@chromium.org>

        ScrollAnimatorNone: Remove unused field
        https://bugs.webkit.org/show_bug.cgi?id=66312

        Reviewed by Adam Barth.

        * tests/ScrollAnimatorNoneTest.cpp:
        (ScrollAnimatorNoneTest::updateDataFromParameters):
        (TEST_F):

2011-08-16  Chang Shu  <cshu@webkit.org>

        Support reset in WebCore::Internals
        https://bugs.webkit.org/show_bug.cgi?id=66307

        Reviewed by Dimitri Glazkov.

        Added framework code in WebKit.

        * public/WebTestingSupport.h:
        * src/WebTestingSupport.cpp:
        (WebKit::WebTestingSupport::resetInternalsObject):

2011-08-15  Aaron Boodman  <aa@chromium.org>

        Remove support for old didCreateIsolatedContext() signature
        https://bugs.webkit.org/show_bug.cgi?id=66249

        Reviewed by Darin Fisher.

        * public/WebFrameClient.h:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didCreateIsolatedScriptContext):

2011-08-17  Aaron Boodman  <aa@chromium.org>

        Remove support for old didCreateIsolatedContext() signature
        https://bugs.webkit.org/show_bug.cgi?id=66249

        Reviewed by Darin Fisher.

        * public/WebFrameClient.h:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didCreateIsolatedScriptContext):

2011-08-17  David Grogan  <dgrogan@chromium.org>

        Remove onTimeout from WebIDBTransactionCallbacks.h
        https://bugs.webkit.org/show_bug.cgi?id=66326

        Reviewed by Tony Chang.

        * public/WebIDBTransactionCallbacks.h:

2011-08-16  Per-Erik Brodin  <per-erik.brodin@ericsson.com>

        Make it possible to explicitly prevent a preflight via ThreadableLoaderOptions
        https://bugs.webkit.org/show_bug.cgi?id=65694

        Reviewed by Alexey Proskuryakov.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::loadAsynchronously):

2011-08-12  John Abd-El-Malek  <jam@chromium.org>

        [chromium] cleanup after previous webkit change rolled into chrome
        https://bugs.webkit.org/show_bug.cgi?id=66177

        Reviewed by James Robinson.

        * DEPS:
        * WebKit.gyp:
        * public/WebScrollbar.h:

2011-08-16  Stephen White  <senorblanco@chromium.org>

        GraphicsContext3D should allow its hostWindow to be NULL
        https://bugs.webkit.org/show_bug.cgi?id=66305

        Allow the hostWindow param (and m_webViewImpl) to be NULL.  This
        makes it much easier to enable GPU acceleration at a lower level
        in WebKit's platform/graphics layer, without needing access to the
        Page* or HostWindow*.  Also bump the chromium DEPS to chrome r96940,
        which includes a similar change for the in-process GraphicsContext3D
        implementations.

        Reviewed by James Robinson.

        * DEPS:
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):
        (WebCore::GraphicsContext3DInternal::platformTexture):
        (WebCore::GraphicsContext3DInternal::paintsIntoCanvasBuffer):

2011-08-16  Mikhail Naganov  <mnaganov@chromium.org>

        Web Inspector: [Chromium] Add deployment of NetworkPanel .css files to concatenated version
        https://bugs.webkit.org/show_bug.cgi?id=66316

        Reviewed by Pavel Feldman.

        * WebKit.gyp:

2011-08-16  Mikhail Naganov  <mnaganov@chromium.org>

        Web Inspector: [Chromium] Fix 'inspector_resources' target to depend on 'concatenated_heap_snapshot_worker_js'
        https://bugs.webkit.org/show_bug.cgi?id=66300

        Reviewed by Pavel Feldman.

        * WebKit.gyp:

2011-08-15  Dmitry Titov  <dimich@chromium.org>

        [Chromium] Add WebFrameClient::didAdoptURLLoader() notification
        https://bugs.webkit.org/show_bug.cgi?id=66167

        Reviewed by Darin Fisher.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didAdoptURLLoader):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::transferLoadingResourceFromPage):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::ResourceHandleInternal):
        (WebCore::ResourceHandleInternal::FromResourceHandle):
        (WebCore::ResourceHandle::ResourceHandle):
        (WebCore::ResourceHandle::firstRequest):
        (WebCore::ResourceHandle::client):
        (WebCore::ResourceHandle::setClient):
        (WebCore::ResourceHandle::~ResourceHandle):
        * src/ResourceHandleInternal.h: Added.
        (WebCore::ResourceHandleInternal::~ResourceHandleInternal):
        (WebCore::ResourceHandleInternal::setOwner):
        (WebCore::ResourceHandleInternal::request):
        (WebCore::ResourceHandleInternal::client):
        (WebCore::ResourceHandleInternal::setClient):
        (WebCore::ResourceHandleInternal::loader):

2011-08-15  Dmitry Titov  <dimich@chromium.org>

        FrameLoaderClient::transferLoadingResourceFromPage does not have enough parameters
        https://bugs.webkit.org/show_bug.cgi?id=66165

        Reviewed by Darin Fisher.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::transferLoadingResourceFromPage):
        * src/FrameLoaderClientImpl.h:

2011-08-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r93060.
        http://trac.webkit.org/changeset/93060
        https://bugs.webkit.org/show_bug.cgi?id=66259

        Does not compile on Chromium Windows (Requested by
        abarth|gardener on #webkit).

        * public/WebCache.h:
        * public/WebFontCache.h:
        * src/WebCache.cpp:
        (WebKit::WebCache::clear):
        * src/WebFontCache.cpp:

2011-08-15  Mikhail Naganov  <mnaganov@chromium.org>

        Chromium: expose MemoryCache::prune and FontCache::purgeInactiveFontData.
        https://bugs.webkit.org/show_bug.cgi?id=66132

        Reviewed by Darin Fisher.

        * public/WebCache.h:
        * public/WebFontCache.h:
        * src/WebCache.cpp:
        (WebKit::WebCache::prune):
        * src/WebFontCache.cpp:
        (WebKit::WebFontCache::prune):

2011-08-15  Nico Weber  <thakis@chromium.org>

        [chromium] Implement shouldRubberBandInDirection
        https://bugs.webkit.org/show_bug.cgi?id=66206

        Reviewed by Adam Barth.

        History swiping can only start after an unhandled mouse wheel event
        came back from the renderer, because mouse wheel javascript handlers
        take precedence over history swiping. This means that rubberbanding
        must not consume wheel events if they could trigger history, else
        history swiping won't be triggered for pages without wheel handlers
        either.

        This is based on the implementation in
        Source/WebKit2/WebProcess/WebCoreSupport/WebChromeClient.cpp

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::shouldRubberBandInDirection):
        * src/ChromeClientImpl.h:

2011-08-10  Aaron Boodman  <aa@chromium.org>

        Pass additional details to client in didCreateIsolatedContext
        https://bugs.webkit.org/show_bug.cgi?id=66037

        Reviewed by Darin Fisher.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didCreateIsolatedScriptContext):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::didCreateIsolatedScriptContext):
        * src/FrameLoaderClientImpl.h:

2011-08-10  Adam Roben  <aroben@apple.com>

        Clear up scale factor terminology

        WebKit by and large deals with two scale factors: one intrinsic to the device on which the
        software is running, and one that is per-Page and can be controlled via API calls. This
        patch names the former "deviceScaleFactor" and the latter "pageScaleFactor", and makes the
        code use those names. It should introduce no behavior changes.

        Fixes <http://webkit.org/b/55787> WebKit uses multiple conflicting names to refer to the
        device scale factor

        Reviewed by Simon Fraser.

        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:

2011-08-12  Fady Samuel  <fsamuel@chromium.org>

        Refactoring of PopupMenuChromium For Readability and Maintainability
        https://bugs.webkit.org/show_bug.cgi?id=66009

        Reviewed by Darin Fisher.

        * src/ChromeClientImpl.cpp:
        * src/WebPopupMenuImpl.cpp:
        * src/WebViewImpl.cpp:
        * tests/PopupMenuTest.cpp:

2011-08-12  Fady Samuel  <fsamuel@chromium.org>

        Expose pageScaleFactor() to Chromium's WebViewImpl
        https://bugs.webkit.org/show_bug.cgi?id=66067

        Reviewed by Darin Fisher.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::pageScaleFactor):
        * src/WebViewImpl.h:

2011-08-12  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        Wire gesture tap events, add support for gesture events in the DRT and add a layout test for it.
        https://bugs.webkit.org/show_bug.cgi?id=66105

        Reviewed by Darin Fisher.

        * public/WebInputEvent.h:
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):

2011-08-12  Tommy Widenflycht  <tommyw@google.com>

        [Chromium] Implement the embedders for the HTML5 Track List objects
        https://bugs.webkit.org/show_bug.cgi?id=60260

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebMediaStreamTrack.h: Added.
        (WebKit::WebMediaStreamTrack::WebMediaStreamTrack):
        (WebKit::WebMediaStreamTrack::~WebMediaStreamTrack):
        (WebKit::WebMediaStreamTrack::isNull):
        * public/WebMediaStreamTrackList.h: Added.
        (WebKit::WebMediaStreamTrackList::WebMediaStreamTrackList):
        (WebKit::WebMediaStreamTrackList::~WebMediaStreamTrackList):
        (WebKit::WebMediaStreamTrackList::isNull):
        * src/WebMediaStreamTrack.cpp: Added.
        (WebKit::WebMediaStreamTrack::initialize):
        (WebKit::WebMediaStreamTrack::reset):
        (WebKit::WebMediaStreamTrack::WebMediaStreamTrack):
        (WebKit::WebMediaStreamTrack::operator WTF::PassRefPtr<WebCore::MediaStreamTrack>):
        * src/WebMediaStreamTrackList.cpp: Added.
        (WebKit::WebMediaStreamTrackList::initialize):
        (WebKit::WebMediaStreamTrackList::reset):
        (WebKit::WebMediaStreamTrackList::WebMediaStreamTrackList):
        (WebKit::WebMediaStreamTrackList::operator WTF::PassRefPtr<MediaStreamTrackList>):

2011-08-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r92976.
        http://trac.webkit.org/changeset/92976
        https://bugs.webkit.org/show_bug.cgi?id=66159

        Does not compile on chromium-win (Requested by abarth|gardener
        on #webkit).

        * src/ChromeClientImpl.cpp:
        * src/WebPopupMenuImpl.cpp:
        * src/WebViewImpl.cpp:

2011-08-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r92978.
        http://trac.webkit.org/changeset/92978
        https://bugs.webkit.org/show_bug.cgi?id=66155

        This patch does not compile (Requested by abarth|gardener on
        #webkit).

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::zoomLevel):
        (WebKit::WebViewImpl::setZoomLevel):
        (WebKit::WebViewImpl::zoomLimitsChanged):
        (WebKit::WebViewImpl::fullFramePluginZoomLevelChanged):
        (WebKit::WebView::zoomLevelToZoomFactor):
        (WebKit::WebView::zoomFactorToZoomLevel):
        * src/WebViewImpl.h:

2011-08-12  Fady Samuel  <fsamuel@chromium.org>

        Chromium's WebKit API should use floats instead of doubles for zoom to match WebCore
        https://bugs.webkit.org/show_bug.cgi?id=66089

        Reviewed by Darin Fisher.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::zoomLevel):
        (WebKit::WebViewImpl::setZoomLevel):
        (WebKit::WebViewImpl::zoomLimitsChanged):
        (WebKit::WebViewImpl::fullFramePluginZoomLevelChanged):
        (WebKit::WebView::zoomLevelToZoomFactor):
        (WebKit::WebView::zoomFactorToZoomLevel):
        * src/WebViewImpl.h:

2011-08-12  Fady Samuel  <fsamuel@chromium.org>

        Refactoring of PopupMenuChromium
        https://bugs.webkit.org/show_bug.cgi?id=66009

        Reviewed by Darin Fisher.

        * src/ChromeClientImpl.cpp:
        * src/WebPopupMenuImpl.cpp:
        * src/WebViewImpl.cpp:

2011-08-12  Fady Samuel  <fsamuel@chromium.org>

        Expose pageScaleFactor in Chromium's WebHistoryItem
        https://bugs.webkit.org/show_bug.cgi?id=66139

        Reviewed by Darin Fisher.

        * public/WebHistoryItem.h:
        * src/WebHistoryItem.cpp:
        (WebKit::WebHistoryItem::pageScaleFactor):
        (WebKit::WebHistoryItem::setPageScaleFactor):

2011-08-10  Nat Duca  <nduca@chromium.org>

        [chromium] Add WebThread to WebKitClient
        https://bugs.webkit.org/show_bug.cgi?id=66013

        Reviewed by Darin Fisher.

        * public/WebKitClient.h:
        (WebKit::WebKitClient::createThread):
        * public/WebThread.h: Added.
        (WebKit::WebThread::~WebThread):

2011-08-11  John Bauman  <jbauman@chromium.org>

        Readback composited webgl results for printing
        https://bugs.webkit.org/show_bug.cgi?id=65658

        Reviewed by James Robinson.

        Add support for reading from the composited version of a canvas.

        * public/WebGraphicsContext3D.h:
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::paintFramebufferToCanvas):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::paintFramebufferToCanvas):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3DInternal::paintCompositedResultsToCanvas):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToImageData):
        (WebCore::GraphicsContext3DInternal::reshape):
        * src/GraphicsContext3DInternal.h:

2011-08-05  Nat Duca  <nduca@chromium.org>

        [chromium] Make WebViewImpl point at CCLayerTreeHost and related separation
        https://bugs.webkit.org/show_bug.cgi?id=65791

        With this patch, LayerRendererChromium becomes increasingly responsible
        for rendering, while render scheduling and tree hosting moves into the
        CCLayerTreeHost.

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::setRootPlatformLayer):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        (WebKit::WebViewImpl::scrollRootLayerRect):
        (WebKit::WebViewImpl::invalidateRootLayerRect):
        (WebKit::getCompositorSettings):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::createRootLayerPainter):
        (WebKit::WebViewImpl::animateAndLayout):
        (WebKit::WebViewImpl::didRecreateGraphicsContext):
        (WebKit::WebViewImpl::scheduleComposite):
        (WebKit::WebViewImpl::updateLayerTreeViewport):
        (WebKit::WebViewImpl::graphicsContext3D):
        (WebKit::WebViewImpl::setVisibilityState):
        * src/WebViewImpl.h:

2011-08-11  Nico Weber  <thakis@chromium.org>

        [chromium] Expose "min/max scroll size", "has horizontal/vertical scrollbar", "number of wheel handlers" to clients
        https://bugs.webkit.org/show_bug.cgi?id=66094

        Reviewed by James Robinson.

        We want to implement two-finger-swipe for history like safari does on
        os x lion. The way this works is:
        * If a page has no horizontal scrollbars, or the page is all the way
          to the left, scrolling to the left will go back in history instead.
        * Same for right/forward.

        This is modelled after the WebKit2 functions
        WKPageIsPinnedToLeftSide(), WKPageIsPinnedToRightSide(),
        WKPageHasHorizontalScrollbar(), and
        webPageProxy::willHandleHorizontalScrollEvents().

        * public/WebFrame.h:
        * public/WebViewClient.h:
        (WebKit::WebViewClient::numWheelEventHandlersChanged):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::numWheelEventHandlersChanged):
        * src/ChromeClientImpl.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::hasHorizontalScrollbar):
        (WebKit::WebFrameImpl::hasVerticalScrollbar):
        (WebKit::WebFrameImpl::isPinnedToLeft):
        (WebKit::WebFrameImpl::isPinnedToRight):
        * src/WebFrameImpl.h:

2011-08-11  Marja Hltt  <marja@chromium.org>

        Remove the temporary workaround added by http://trac.webkit.org/changeset/51338
        https://bugs.webkit.org/show_bug.cgi?id=65908

        Reviewed by Adam Barth.

        SecurityOrigin for a file URL returns "file://", and
        SecurityOrigin::createFromString("file://") creates a unique (null)
        security origin (because "file://" is first canonicalized to "file:///"
        and that is a directory). This means the conversion SecurityOrigin ->
        string -> SecurityOrigin doens't give back the same SecurityOrigin in
        case of file URLs.

        WebStorageNamespaceImpl::createStorageArea contains a workaround which
        changes the string "file://" into "file:///a" before giving it to
        SecurityOrigin::createFromString.

        If SecurityOrigin::m_enforceFilePathSeparation is true, then
        SecurityOrigin::toString() returns "null" for file URLs, and this
        problem does not exist, and the workaround code is not ran.

        This patch removes the workaround.

        * src/WebStorageNamespaceImpl.cpp:
        (WebKit::WebStorageNamespaceImpl::createStorageArea):

2011-08-10  John Abd-El-Malek  <jam@chromium.org>

        [chromium] Update WebScrollbar so that it works with overlay scrollbars on Lion
        https://bugs.webkit.org/show_bug.cgi?id=66008

        Reviewed by James Robinson.

        * WebKit.gyp:
        * public/WebScrollbar.h:
        * public/WebScrollbarClient.h:
        * src/ScrollbarGroup.cpp: Added.
        (WebKit::ScrollbarGroup::ScrollbarGroup):
        (WebKit::ScrollbarGroup::~ScrollbarGroup):
        (WebKit::ScrollbarGroup::scrollbarCreated):
        (WebKit::ScrollbarGroup::scrollbarDestroyed):
        (WebKit::ScrollbarGroup::setLastMousePosition):
        (WebKit::ScrollbarGroup::scrollSize):
        (WebKit::ScrollbarGroup::scrollPosition):
        (WebKit::ScrollbarGroup::setScrollOffset):
        (WebKit::ScrollbarGroup::invalidateScrollbarRect):
        (WebKit::ScrollbarGroup::invalidateScrollCornerRect):
        (WebKit::ScrollbarGroup::isActive):
        (WebKit::ScrollbarGroup::enclosingScrollableArea):
        (WebKit::ScrollbarGroup::isScrollCornerVisible):
        (WebKit::ScrollbarGroup::getTickmarks):
        (WebKit::ScrollbarGroup::convertFromContainingViewToScrollbar):
        (WebKit::ScrollbarGroup::horizontalScrollbar):
        (WebKit::ScrollbarGroup::verticalScrollbar):
        (WebKit::ScrollbarGroup::minimumScrollPosition):
        (WebKit::ScrollbarGroup::maximumScrollPosition):
        (WebKit::ScrollbarGroup::visibleHeight):
        (WebKit::ScrollbarGroup::visibleWidth):
        (WebKit::ScrollbarGroup::contentsSize):
        (WebKit::ScrollbarGroup::overhangAmount):
        (WebKit::ScrollbarGroup::currentMousePosition):
        (WebKit::ScrollbarGroup::shouldSuspendScrollAnimations):
        (WebKit::ScrollbarGroup::scrollbarStyleChanged):
        (WebKit::ScrollbarGroup::isOnActivePage):
        (WebKit::ScrollbarGroup::disconnectFromPage):
        * src/ScrollbarGroup.h: Added.
        (WebKit::ScrollbarGroup::scrollCornerRect):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::paint):
        (WebKit::WebPluginContainerImpl::reportGeometry):
        (WebKit::WebPluginContainerImpl::scrollbarGroup):
        (WebKit::WebPluginContainerImpl::willStartLiveResize):
        (WebKit::WebPluginContainerImpl::willEndLiveResize):
        (WebKit::WebPluginContainerImpl::handleMouseEvent):
        * src/WebPluginContainerImpl.h:
        * src/WebScrollbarImpl.cpp:
        (WebKit::WebScrollbar::createForPlugin):
        (WebKit::WebScrollbarImpl::WebScrollbarImpl):
        (WebKit::WebScrollbarImpl::~WebScrollbarImpl):
        (WebKit::WebScrollbarImpl::setScrollOffset):
        (WebKit::WebScrollbarImpl::invalidateScrollbarRect):
        (WebKit::WebScrollbarImpl::getTickmarks):
        (WebKit::WebScrollbarImpl::convertFromContainingViewToScrollbar):
        (WebKit::WebScrollbarImpl::scrollbarStyleChanged):
        (WebKit::WebScrollbarImpl::isOverlay):
        (WebKit::WebScrollbarImpl::setValue):
        (WebKit::WebScrollbarImpl::scroll):
        (WebKit::WebScrollbarImpl::onMouseMove):
        (WebKit::WebScrollbarImpl::onMouseLeave):
        (WebKit::WebScrollbarImpl::onMouseWheel):
        (WebKit::WebScrollbarImpl::onKeyDown):
        * src/WebScrollbarImpl.h:
        (WebKit::WebScrollbarImpl::scrollOffset):
        (WebKit::WebScrollbarImpl::scrollbar):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::willStartLiveResize):
        (WebKit::WebViewImpl::willEndLiveResize):

2011-08-10  Dmitry Lomov  <dslomov@google.com>
        
        [Chromium] Decouple implementation of allowFileSystem, openFileSystem and allowDatabase from WebWorkerBase.
        https://bugs.webkit.org/show_bug.cgi?id=65997.

        This patch moves implementation of allowFileSystem, openFileSystem and allowDatabase from
        WebWorkerBase to respectively LocalFileSystemChromium and DatabaseObserver, 
        parameterizing them with relevant data from WebWorker.

        Reviewed by Jian Li.

        * src/DatabaseObserver.cpp: Move allowDatabase from WebWorkerBase and update the caller.
        (WebKit::AllowDatabaseMainThreadBridge::create):
        (WebKit::AllowDatabaseMainThreadBridge::cancel):
        (WebKit::AllowDatabaseMainThreadBridge::result):
        (WebKit::AllowDatabaseMainThreadBridge::signalCompleted):
        (WebKit::AllowDatabaseMainThreadBridge::AllowDatabaseMainThreadBridge):
        (WebKit::AllowDatabaseMainThreadBridge::allowDatabaseTask):
        (WebKit::AllowDatabaseMainThreadBridge::didComplete):
        (WebKit::allowDatabaseForWorker):
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/LocalFileSystemChromium.cpp: Move allowFileSystem and openFileSystem from WebWorkerBase and update the caller.
        (WebCore::openFileSystemHelper):
        * src/WebWorkerBase.cpp: Move allowFileSystem, openFileSystem and allowDatabase to LocalFileSystemChromium and DatabaseObserver resp.
        * src/WebWorkerBase.h:
        (WebKit::WebWorkerBase::webView):
        * src/WorkerFileSystemCallbacksBridge.cpp: Generalized WorkerFileSystemCallbacksBridge to work on WorkerLoaderProxy, not on WebWorkerBase.
        (WebKit::WorkerFileSystemCallbacksBridge::stop):
        (WebKit::WorkerFileSystemCallbacksBridge::WorkerFileSystemCallbacksBridge):
        (WebKit::WorkerFileSystemCallbacksBridge::dispatchTaskToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::mayPostTaskToWorker):
        * src/WorkerFileSystemCallbacksBridge.h:
        (WebKit::WorkerFileSystemCallbacksBridge::create):

2011-08-10  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Remove Network.initialContentSet from protocol, store workers content on backend.
        https://bugs.webkit.org/show_bug.cgi?id=65929

        Reviewed by Pavel Feldman.

        * src/SharedWorkerRepository.cpp:
        (WebCore::SharedWorkerScriptLoader::didReceiveResponse):

2011-08-10  Andrey Kosyakov  <caseq@chromium.org>

        Unreviewed. Rolled DEPS 95813:96009 to pick data url timing fix.

        * DEPS:

2011-08-10  Peter Kasting  <pkasting@google.com>

        [Chromium] Name an enum used in some template arguments.
        https://bugs.webkit.org/show_bug.cgi?id=65953

        Reviewed by Darin Fisher.

        * public/WebHTTPBody.h:

2011-08-09  Alexei Svitkine  <asvitkine@chromium.org>

        [Chromium] Enable rubber banding when scrolling.

        https://bugs.webkit.org/show_bug.cgi?id=65707

        Reviewed by Dimitri Glazkov.

        * features.gypi:
        * public/WebInputEvent.h:
        (WebKit::WebMouseWheelEvent::WebMouseWheelEvent):
        (WebKit::WebGestureEvent::WebGestureEvent):
        * public/mac/WebInputEventFactory.h:
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder):
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebInputEventConversion.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::GestureEvent):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::gestureEvent):
        (WebKit::WebViewImpl::handleInputEvent):
        * src/WebViewImpl.h:
        * src/mac/WebInputEventFactory.mm:
        (WebKit::gestureEventTypeForEvent):
        (WebKit::phaseForNSEventPhase):
        (WebKit::phaseForEvent):
        (WebKit::momentumPhaseForEvent):
        (WebKit::WebInputEventFactory::mouseWheelEvent):
        (WebKit::WebInputEventFactory::gestureEvent):

2011-08-09  Dmitry Lomov  <dslomov@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=65778
        [WebWorkers][chromium] Make statics thread-safe and make sure V8 API accesses correct isolates

        Reviewed by Dmitry Titov.

        * src/BoundObject.cpp:

2011-08-09  Jochen Eisinger  <jochen@chromium.org>

        [chromium] remove temporary #define from WebURLRequest.h
        https://bugs.webkit.org/show_bug.cgi?id=65813

        Reviewed by Darin Fisher.

        * public/WebURLRequest.h:

2011-08-09  Jochen Eisinger  <jochen@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-08-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r92619.
        http://trac.webkit.org/changeset/92619
        https://bugs.webkit.org/show_bug.cgi?id=65881

        This patch breaks chromium canary (Requested by jianli on
        #webkit).

        * src/BoundObject.cpp:

2011-08-08  Scott Byer  <scottbyer@chromium.org>

        Scroll animator changes to nail the framerate
        https://bugs.webkit.org/show_bug.cgi?id=65645

        Reviewed by James Robinson.

        * tests/ScrollAnimatorNoneTest.cpp:
        (TEST):

2011-08-08  Dmitry Lomov  <dslomov@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=65778
        [WebWorkers][chromium] Make statics thread-safe and make sure V8 API accesses correct isolates

        Reviewed by David Levin.

        * src/BoundObject.cpp: AllowAllocation moved from V8Utilities.h to V8Binding.h

2011-08-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r92607.
        http://trac.webkit.org/changeset/92607
        https://bugs.webkit.org/show_bug.cgi?id=65865

        This patch breaks Chromium Mac Canary (Requested by jianli on
        #webkit).

        * features.gypi:
        * public/WebInputEvent.h:
        (WebKit::WebMouseWheelEvent::WebMouseWheelEvent):
        * public/mac/WebInputEventFactory.h:
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder):
        * src/WebInputEventConversion.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):
        * src/WebViewImpl.h:
        * src/mac/WebInputEventFactory.mm:
        (WebKit::WebInputEventFactory::mouseWheelEvent):

2011-08-08  Alexei Svitkine  <asvitkine@chromium.org>

        [Chromium] Enable rubber banding when scrolling.

        https://bugs.webkit.org/show_bug.cgi?id=65707

        Reviewed by Dimitri Glazkov.

        * features.gypi:
        * public/WebInputEvent.h:
        (WebKit::WebMouseWheelEvent::WebMouseWheelEvent):
        (WebKit::WebGestureEvent::WebGestureEvent):
        * public/mac/WebInputEventFactory.h:
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder):
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebInputEventConversion.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::GestureEvent):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::gestureEvent):
        (WebKit::WebViewImpl::handleInputEvent):
        * src/WebViewImpl.h:
        * src/mac/WebInputEventFactory.mm:
        (WebKit::gestureEventTypeForEvent):
        (WebKit::phaseForNSEventPhase):
        (WebKit::phaseForEvent):
        (WebKit::momentumPhaseForEvent):
        (WebKit::WebInputEventFactory::mouseWheelEvent):
        (WebKit::WebInputEventFactory::gestureEvent):

2011-08-08  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed. Rolled Chromium DEPS from 95576 to 95783.

        * DEPS:

2011-08-05  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: implement dock/undock in WebKit2 without getting into WebCore.
        https://bugs.webkit.org/show_bug.cgi?id=65763

        Reviewed by Yury Semikhatsky.

        * src/InspectorFrontendClientImpl.cpp:
        * src/InspectorFrontendClientImpl.h:
        * src/js/DevTools.js:
        (devtools.domContentLoaded):

2011-08-07  James Kozianski  <koz@chromium.org>

        Make the fullscreen JS API enabled at runtime.
        https://bugs.webkit.org/show_bug.cgi?id=65501

        Reviewed by Adam Barth.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableFullScreenAPI):
        (WebKit::WebRuntimeFeatures::isFullScreenAPIEnabled):

2011-08-05  James Robinson  <jamesr@chromium.org>

        [chromium] Accelerated canvas breaks when moving canvases or resources between Pages
        https://bugs.webkit.org/show_bug.cgi?id=65402

        Reviewed by Stephen White.

        Remove plumbing for copyTextureToParentTexture extension, it's no longer used or needed.

        * public/WebGraphicsContext3D.h:
        * src/Extensions3DChromium.cpp:
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DInternal.h:

2011-08-05  Jochen Eisinger  <jochen@chromium.org>

        Introduce a new ResourceRequest::TargetType for XHRs
        https://bugs.webkit.org/show_bug.cgi?id=65544

        Reviewed by Darin Fisher.

        * public/WebURLRequest.h:

2011-08-04  James Robinson  <jamesr@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-08-04  David Levin  <levin@chromium.org>

        CStringBuffer should have thread safety checks turned on.
        https://bugs.webkit.org/show_bug.cgi?id=58093

        Reviewed by Dmitry Titov.

        * DEPS: Roll far enough to pick up the latest WebKit::initialize
        fix for Linux.

2011-08-04  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r92415.
        http://trac.webkit.org/changeset/92415
        https://bugs.webkit.org/show_bug.cgi?id=65728

        Causes many DEBUG crashes (Requested by abarth on #webkit).

        * public/WebURLRequest.h:

2011-08-04  Jochen Eisinger  <jochen@chromium.org>

        Introduce a new ResourceRequest::TargetType for XHRs
        https://bugs.webkit.org/show_bug.cgi?id=65544

        Reviewed by Darin Fisher.

        * public/WebURLRequest.h:

2011-08-04  Jochen Eisinger  <jochen@chromium.org>

        Get rid of ResourceRequestBase::m_targetType. Move it to chromium's ResourceRequest.
        https://bugs.webkit.org/show_bug.cgi?id=48483

        Reviewed by Alexey Proskuryakov.

        * src/SharedWorkerRepository.cpp:
        (WebCore::SharedWorkerScriptLoader::SharedWorkerScriptLoader):

2011-08-04  Brian Weinstein  <bweinstein@apple.com>

        WebKit2: Web Inspector always starts in undocked mode
        https://bugs.webkit.org/show_bug.cgi?id=65493
        <rdar://problem/9353114>

        Reviewed by Adam Roben.
        
        Add a stub method for Chromium.

        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::canAttachWindow):
        * src/InspectorFrontendClientImpl.h:

2011-08-03  Kentaro Hara  <haraken@google.com>

        Implement EventSender.scalePageBy()
        https://bugs.webkit.org/show_bug.cgi?id=58013

        Reviewed by Darin Fisher.

        Implemented EventSender.scalePageBy(f, x, y), which scales a page by a factor of f
        and then sets a scroll position to (x, y). Enabled the tests that had been waiting
        for the implementation of EventSender.scalePageBy(f, x, y).

        Tests: compositing/scaling/tiled-layer-recursion.html
               fast/repaint/scale-page-shrink.html
               fast/dom/Element/scale-page-client-rects.html
               fast/dom/Range/scale-page-client-rects.html
               fast/events/scroll-in-scaled-page-with-overflow-hidden.html
               fast/dom/Element/scale-page-bounding-client-rect.html
               fast/dom/Range/scale-page-bounding-client-rect.html

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scalePage): A wrapper method for scalePage() in WebCore.
        * src/WebViewImpl.h:

2011-08-03  Darin Fisher  <darin@chromium.org>

        [Chromium] Rename WEBKIT_API to WEBKIT_EXPORT.
        https://bugs.webkit.org/show_bug.cgi?id=65649

        Reviewed by Adam Barth.

        * README:
        * public/WebAccessibilityCache.h:
        * public/WebAccessibilityObject.h:
        * public/WebArrayBufferView.h:
        * public/WebAttribute.h:
        * public/WebAudioBus.h:
        * public/WebBindings.h:
        * public/WebBlobData.h:
        * public/WebBlobRegistry.h:
        * public/WebCString.h:
        * public/WebCache.h:
        * public/WebColor.h:
        * public/WebCommon.h:
        * public/WebCrossOriginPreflightResultCache.h:
        * public/WebDOMEvent.h:
        * public/WebDOMEventListener.h:
        * public/WebDOMMouseEvent.h:
        * public/WebDOMMutationEvent.h:
        * public/WebDOMStringList.h:
        * public/WebData.h:
        * public/WebDatabase.h:
        * public/WebDevToolsAgent.h:
        * public/WebDevToolsFrontend.h:
        * public/WebDeviceOrientationClientMock.h:
        * public/WebDeviceOrientationController.h:
        * public/WebDocument.h:
        * public/WebDocumentType.h:
        * public/WebDragData.h:
        * public/WebElement.h:
        * public/WebFont.h:
        * public/WebFontCache.h:
        * public/WebFormControlElement.h:
        * public/WebFormElement.h:
        * public/WebFrame.h:
        * public/WebGeolocationClientMock.h:
        * public/WebGeolocationController.h:
        * public/WebGeolocationError.h:
        * public/WebGeolocationPermissionRequest.h:
        * public/WebGeolocationPermissionRequestManager.h:
        * public/WebGeolocationPosition.h:
        * public/WebGlyphCache.h:
        * public/WebHTTPBody.h:
        * public/WebHTTPLoadInfo.h:
        * public/WebHistoryItem.h:
        * public/WebIDBDatabaseError.h:
        * public/WebIDBFactory.h:
        * public/WebIDBKey.h:
        * public/WebIDBKeyPath.h:
        * public/WebIDBKeyRange.h:
        * public/WebImage.h:
        * public/WebImageDecoder.h:
        * public/WebInputElement.h:
        * public/WebInputEvent.h:
        * public/WebKit.h:
        * public/WebLabelElement.h:
        * public/WebMediaElement.h:
        * public/WebNamedNodeMap.h:
        * public/WebNetworkStateNotifier.h:
        * public/WebNode.h:
        * public/WebNodeCollection.h:
        * public/WebNodeList.h:
        * public/WebNotification.h:
        * public/WebOptionElement.h:
        * public/WebPageSerializer.h:
        * public/WebPasswordFormData.h:
        * public/WebPerformance.h:
        * public/WebPluginDocument.h:
        * public/WebPopupMenu.h:
        * public/WebRange.h:
        * public/WebRegularExpression.h:
        * public/WebRuntimeFeatures.h:
        * public/WebScriptController.h:
        * public/WebScrollbar.h:
        * public/WebSearchableFormData.h:
        * public/WebSecurityOrigin.h:
        * public/WebSecurityPolicy.h:
        * public/WebSelectElement.h:
        * public/WebSerializedScriptValue.h:
        * public/WebSharedWorker.h:
        * public/WebSpeechInputControllerMock.h:
        * public/WebSpeechInputResult.h:
        * public/WebStorageEventDispatcher.h:
        * public/WebStorageNamespace.h:
        * public/WebString.h:
        * public/WebTestingSupport.h:
        * public/WebThreadSafeData.h:
        * public/WebURLLoadTiming.h:
        * public/WebURLRequest.h:
        * public/WebURLResponse.h:
        * public/WebView.h:
        * public/WebWorker.h:
        * public/gtk/WebFontInfo.h:
        * public/gtk/WebInputEventFactory.h:
        * public/linux/WebFontRenderStyle.h:
        * public/linux/WebFontRendering.h:
        * public/linux/WebRenderTheme.h:
        * public/mac/WebInputEventFactory.h:
        * public/mac/WebScreenInfoFactory.h:
        * public/mac/WebSubstringUtil.h:
        * public/win/WebInputEventFactory.h:
        * public/win/WebScreenInfoFactory.h:
        * public/x11/WebScreenInfoFactory.h:
        * tests/WebUnitTests.h:

2011-08-03  Michael Nordman  <michaeln@google.com>

        [Chromium] Minor cleanup, remove a deprecated method.
        The old WebDatabase::updateDatabaseSize method has been replaced with 
        updateDatabaseSize, updateSpaceAvailable, and resetSpaceAvailable.
        https://bugs.webkit.org/show_bug.cgi?id=65553

        Reviewed by Adam Barth.

        * public/WebDatabase.h:
        * src/WebDatabase.cpp:

2011-08-03  Pavel Feldman  <pfeldman@google.com>

        Web Inspector: [Timeline] Hover on paint events and see rect outline around that area.
        https://bugs.webkit.org/show_bug.cgi?id=65510

        Reviewed by Yury Semikhatsky.

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::paintPageOverlay):

2011-08-03  Jeremy Moskovich  <jeremy@chromium.org>

        [Chromium] Fix OOP font loading to work on 10.6.6 and above.
        https://bugs.webkit.org/show_bug.cgi?id=65543

        In 10.6.6 the function used to get the unique ID for an NSFont in the 
        renderer was changed so it fails in the sandbox (it now tries to access
        the on-disk font file). In order to work around this, we get the font
        ID from the browser process.

        To speed things up, we introduce 2 levels of caching in WebKit. A font
        name cache where we can perform a quick lookup without the need for the
        font id and a font id cache which we can only lookup in after getting
        the unique ID from the browser process.

        Reviewed by Kenneth Russell.

        No new tests since this is not readily testable.

        * public/mac/WebSandboxSupport.h: Plumb font ID parameter through.
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::loadFont): ditto.

2011-08-03  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: remove Node parameter from the InspectorClient::highlight
        https://bugs.webkit.org/show_bug.cgi?id=65549

        Reviewed by Yury Semikhatsky.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::highlight):
        * src/InspectorClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::highlight):
        * src/WebDevToolsAgentImpl.h:

2011-08-02  David Reveman  <reveman@chromium.org>

        [Chromium] Remove outer border from TilingData as it's no longer needed by layer compositor for anti-aliasing.
        https://bugs.webkit.org/show_bug.cgi?id=64942

        Reviewed by James Robinson.

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-08-02  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Layering violations in gesture recognizer
        https://bugs.webkit.org/show_bug.cgi?id=65044

       Reviewed by Adam Barth.

        Moved gesture recognition higher up the event delivery code
        path so that recognition of gestures is completely separated
        from gesture handling.

        * features.gypi:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):
        Added code to reset the gesture recognizer to preserve parallel
        layout test execution.
        * src/WebPopupMenuImpl.cpp:
        Support dispatching touch and gesture events to Popups.
        (WebKit::WebPopupMenuImpl::WebPopupMenuImpl):
        (WebKit::WebPopupMenuImpl::TouchEvent):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        Added gesture recognition creation.
        (WebKit::WebViewImpl::touchEvent):
        Added recognition of gestures and dispatch of gesture events.
        (WebKit::WebViewImpl::resetGestureRecognizer):
        * src/WebViewImpl.h:

2011-08-02  Zhenyao Mo  <zmo@google.com>

        Unreviewed, mark SelectPopupMenuTest.SelectItemKeyEvent as flaky, gardener stuff.

        * tests/PopupMenuTest.cpp:
        (WebKit::TEST_F):

2011-08-02  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Remove initator column for JSC, fix network resource initiator tests.
        https://bugs.webkit.org/show_bug.cgi?id=65534

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:
        ():

2011-08-02  Nat Duca  <nduca@chromium.org>

        [chromium] Remove resizeOnscreenContent from LRC. It can be derived.
        https://bugs.webkit.org/show_bug.cgi?id=65519

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-08-01  Jean-luc Brouillet  <jeanluc@chromium.org>

        Removing old source files in gyp files that slow build
        https://bugs.webkit.org/show_bug.cgi?id=65503

        Reviewed by Adam Barth.

        A number of stale files are listed in the gyp files. These slow the
        build on Visual Studio 2010. Removing them.

        * WebKit.gyp:

2011-08-01  Nat Duca  <nduca@chromium.org>

        [chromium] Add null check to setSwapbuffersCompletCallbackChromium
        https://bugs.webkit.org/show_bug.cgi?id=65485

        Reviewed by James Robinson.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::SwapBuffersCompleteCallbackAdapter::create):

2011-08-01  Yuta Kitamura  <yutak@chromium.org>

        WebSocket: Rename SocketStreamHandleClient member functions
        https://bugs.webkit.org/show_bug.cgi?id=65374

        Reviewed by Kent Tamura.

        * src/SocketStreamHandle.cpp:
        (WebCore::SocketStreamHandleInternal::didOpenStream):
        (WebCore::SocketStreamHandleInternal::didReceiveData):
        (WebCore::SocketStreamHandleInternal::didClose):
        (WebCore::SocketStreamHandleInternal::didFail):

2011-07-31  Bill Budge  <bbudge@chromium.org>

        [Chromium] Remove the parameterless WebFrame::createAssociatedURLLoader
        overload, and change the overload that takes WebURLLoaderOptions to
        use a default value. This is equivalent to the original parameterless
        overload.
        https://bugs.webkit.org/show_bug.cgi?id=65280

        Reviewed by Darin Fisher.

        * public/WebFrame.h:
        * src/AssociatedURLLoader.cpp:
        * src/AssociatedURLLoader.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-07-30  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-30  Patrick Gansterer  <paroga@webkit.org>

        Remove inclusion of MainThread.h from Threading.h
        https://bugs.webkit.org/show_bug.cgi?id=65081

        Reviewed by Darin Adler.

        Add missing include statements for MainThread.

        * src/WebKit.cpp:
        * src/WebViewImpl.cpp:
        * tests/CCThreadTest.cpp:

2011-07-29  Zhenyao Mo  <zmo@google.com>

        Unreviewed, rolling out r92011.
        http://trac.webkit.org/changeset/92011
        https://bugs.webkit.org/show_bug.cgi?id=65044

        break chromium win build

        * features.gypi:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::WebPopupMenuImpl):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::touchEvent):
        * src/WebViewImpl.h:

2011-07-29  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Layering violations in gesture recognizer
        https://bugs.webkit.org/show_bug.cgi?id=65044

        Reviewed by Adam Barth.

        Moved gesture recognition higher up the event delivery code
        path so that recognition of gestures is completely separated
        from gesture handling.

        * features.gypi:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):
        Added code to reset the gesture recognizer to preserve parallel
        layout test execution.
        * src/WebPopupMenuImpl.cpp:
        Support dispatching touch and gesture events to Popups.
        (WebKit::WebPopupMenuImpl::WebPopupMenuImpl):
        (WebKit::WebPopupMenuImpl::TouchEvent):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        Added gesture recognition creation.
        (WebKit::WebViewImpl::touchEvent):
        Added recognition of gestures and dispatch of gesture events.
        (WebKit::WebViewImpl::resetGestureRecognizer):
        * src/WebViewImpl.h:

2011-07-29  Scott Byer  <scottbyer@chromium.org>

        Scroll animation refinements.
        https://bugs.webkit.org/show_bug.cgi?id=65154

        Reviewed by Adam Barth.

        Fix scroll animation bugs when scrolling to the ends of a document. Smooth over slow event repeat rates
        better. Fix tests to allow for unit testing of scrolling up and not just down.

        Additional unit tests added to ScrollAnimatorNoneTest:
        ScrollQuadraticSmoothed, ScrollLotsQuadraticSmoothed, ScrollDownToBumper, ScrollUpToBumper
        
        * tests/ScrollAnimatorNoneTest.cpp:
        (ScrollAnimatorNoneTest::reset):
        (ScrollAnimatorNoneTest::updateDataFromParameters):
        (ScrollAnimatorNoneTest::animateScroll):
        (ScrollAnimatorNoneTest::checkDesiredPosition):
        (ScrollAnimatorNoneTest::checkSoftLanding):

2011-07-28  Naoki Takano  <honten@chromium.org>

        [Chromium] Add form() function to access parent WebFormElement from WebFormControlElement.
        https://bugs.webkit.org/show_bug.cgi?id=65304
        http://code.google.com/p/chromium/issues/detail?id=63553

        Reviewed by Darin Fisher.

        Chromium Autofill feature needs to access the parent WebFormElement from WebFormControlElement. So added form() method.

        * public/WebFormControlElement.h: Add form() function.
        * src/WebFormControlElement.cpp:
        (WebKit::WebFormControlElement::form): Return parent WebFormElement.

2011-07-28  Nico Weber  <thakis@chromium.org>

        [chromium] Make WebImage::assign(CGImageRef) a WEBKIT_API
        https://bugs.webkit.org/show_bug.cgi?id=65265

        Reviewed by James Robinson.

        Required for the components build on mac. The inline function
        operator=(CGImageRef) is used from outside webkit, and calls this
        function.

        * public/WebImage.h:

2011-07-28  Mihai Parparita  <mihaip@chromium.org>

        [Chromium] Remove WebDocument::insertStyleText
        https://bugs.webkit.org/show_bug.cgi?id=65332

        Reviewed by Tony Chang.

        As of http://crrev.com/94499 no Chromium code calls this anymore.
        Also does a bit of #include cleanup.

        * public/WebDocument.h:
        * src/WebDocument.cpp:

2011-07-27  Fady Samuel  <fsamuel@chromium.org>

        Added a Chromium WebKit API method to set the minimum row height of a popup listbox.
        https://bugs.webkit.org/show_bug.cgi?id=64897

        Reviewed by Darin Fisher.

        * public/WebPopupMenu.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenu::setMinimumRowHeight):

2011-07-27  Peng Huang  <penghuang@chromium.org>

        Add more text input types for chromium
        https://bugs.webkit.org/show_bug.cgi?id=64937

        Reviewed by Darin Fisher.

        * public/WebTextInputType.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::textInputType):

2011-07-27  Ryosuke Niwa  <rniwa@webkit.org>

        Add sfntly library to the Chromium DEPS file.

        * DEPS:

2011-07-27  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-25  Mihai Parparita  <mihaip@chromium.org>

        [Chromium] Add better WebKit API for chrome.tabs.insertCSS extension API
        https://bugs.webkit.org/show_bug.cgi?id=65158

        Reviewed by David Hyatt.

        Add WebDocument::insertUserStyleSheet which inserts a user stylesheet,
        instead of forcing extensions to use insertStyleText which manipulates
        the DOM of the page and results in compatibility issues (see
        http://crbug.com/82220).

        * public/WebDocument.h:
        * src/WebDocument.cpp:
        (WebKit::WebDocument::insertUserStyleSheet):

2011-07-27  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Disable cache option should only clear memory cache, not disable it.
        https://bugs.webkit.org/show_bug.cgi?id=65184

        Reviewed by Pavel Feldman.

        * src/InspectorClientImpl.cpp:
        * src/InspectorClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:

2011-07-27  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        Pass on the suggested name for download file to the client.
        https://bugs.webkit.org/show_bug.cgi?id=65181

        Reviewed by Darin Fisher.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::startDownload):

2011-07-27  Tony Gentilcore  <tonyg@chromium.org>

        Speculative win build fix after r91835
        https://bugs.webkit.org/show_bug.cgi?id=65255

        Unreviewed build fix.

        * src/WebFontImpl.cpp:

2011-07-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r91809.
        http://trac.webkit.org/changeset/91809
        https://bugs.webkit.org/show_bug.cgi?id=65225

        Does not build on Chromium Windows (Requested by abarth on
        #webkit).

        * features.gypi:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::WebPopupMenuImpl):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::touchEvent):
        * src/WebViewImpl.h:

2011-07-26  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Layering violations in gesture recognizer
        https://bugs.webkit.org/show_bug.cgi?id=65044

        Reviewed by Adam Barth.

        Moved gesture recognition higher up the event delivery code
        path so that recognition of gestures is completely separated
        from gesture handling.

        * features.gypi:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFrameView):
        Added code to reset the gesture recognizer to preserve parallel
        layout test execution.
        * src/WebPopupMenuImpl.cpp:
        Support dispatching touch and gesture events to Popups.
        (WebKit::WebPopupMenuImpl::WebPopupMenuImpl):
        (WebKit::WebPopupMenuImpl::TouchEvent):
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        Added gesture recognition creation.
        (WebKit::WebViewImpl::touchEvent):
        Added recognition of gestures and dispatch of gesture events.
        (WebKit::WebViewImpl::resetGestureRecognizer):
        * src/WebViewImpl.h:

2011-07-26  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        Add support for download='filename' attribute in anchors.
        https://bugs.webkit.org/show_bug.cgi?id=64580

        Reviewed by Adam Barth.

        * features.gypi:
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::loadURLExternally):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDecidePolicyForNavigationAction):
        (WebKit::FrameLoaderClientImpl::startDownload):
        * src/FrameLoaderClientImpl.h:

2011-07-26  Brett Wilson  <brettw@chromium.org>

        Cancel the load when an associated URL loader goes out of scope.
        Previously, the load would continue even when the WebURLLoader object
        was deleted, and the data would just get queued up.

        https://bugs.webkit.org/show_bug.cgi?id=65204

        Reviewed by Darin Fisher.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::cancel):

2011-07-25  Al Patrick  <apatrick@chromium.org>

        Removed support for the GL_latch_CHROMIUM extension which Chromium no longer supports.
        https://bugs.webkit.org/show_bug.cgi?id=65043

        Reviewed by James Robinson.

        * public/WebGraphicsContext3D.h:
        * src/Extensions3DChromium.cpp:
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DInternal.h:

2011-07-25  Nico Weber  <thakis@chromium.org>

        [chromium] Don't link in both libjpeg and libjpeg_turbo in the components build
        https://bugs.webkit.org/show_bug.cgi?id=65138

        Reviewed by James Robinson.

        * WebKit.gyp:

2011-07-25  Chris Rogers  <crogers@google.com>

        Update Chromium DRT to output binary (instead of base64-encoded) data for web audio testing
        https://bugs.webkit.org/show_bug.cgi?id=65039

        Reviewed by Tony Chang.

        * WebKit.gyp:
        * public/WebArrayBufferView.h: Added.
        (WebKit::WebArrayBufferView::~WebArrayBufferView):
        (WebKit::WebArrayBufferView::WebArrayBufferView):
        * public/WebBindings.h:
        * src/WebArrayBufferView.cpp: Added.
        (WebKit::WebArrayBufferView::assign):
        (WebKit::WebArrayBufferView::reset):
        (WebKit::WebArrayBufferView::baseAddress):
        (WebKit::WebArrayBufferView::byteOffset):
        (WebKit::WebArrayBufferView::byteLength):
        (WebKit::WebArrayBufferView::WebArrayBufferView):
        (WebKit::WebArrayBufferView::operator=):
        (WebKit::WebArrayBufferView::operator PassRefPtr<ArrayBufferView>):
        * src/WebBindings.cpp:
        (WebKit::getArrayBufferViewImpl):
        (WebKit::WebBindings::getArrayBufferView):

2011-07-23  Alok Priyadarshi  <alokp@chromium.org>

        Switching off acceleration for small canvas broke gpu tests
        https://bugs.webkit.org/show_bug.cgi?id=65053

        Reviewed by Stephen White.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setMinimumAccelerated2dCanvasSize):
        * src/WebSettingsImpl.h:

2011-07-23  Yuta Kitamura  <yutak@chromium.org>

        [Chromium] Turn on new WebSocket protocol in worker shadow page
        https://bugs.webkit.org/show_bug.cgi?id=64852

        Reviewed by Dmitry Titov.

        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::initializeLoader):
        Initialize the value of WebCore::Settings::useHixie76WebSocketProtocol()
        for a new shadow page. The default value of this flag is overridden through
        WebPreferences (located in webkit/glue in Chromium source tree) but a shadow
        page does not receive the preference values from it.

2011-07-22  James Robinson  <jamesr@chromium.org>

        [chromium] Remove code that attempted to explicitly sync compositing state before compositing
        https://bugs.webkit.org/show_bug.cgi?id=65055

        Reviewed by Kenneth Russell.

        There was some logic in WebViewImpl to try to synchronously calculate compositing requirements and sync
        compositing state on all frames before painting in an attempt to flush out all pending updates before entering
        the composite routines. The idea behind this code was that it would allow us to not worry about compositing
        turning off in the middle of a composite operation due to things like RenderLayer overlap being lazily
        calculated.  In practice, we still need to be defensive to compositing requirements updating during the
        composite anyway and this code is quite expensive on some pages (10ms+ on the HTML specification on my box).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::layout):
        * src/WebViewImpl.h:

2011-07-22  Cris Neckar  <cdn@chromium.org>

        Hook v8 up to cryptographicallyRandomValues as an entropy source.
        https://bugs.webkit.org/show_bug.cgi?id=64887

        Reviewed by Adam Barth.

        * public/WebKitClient.h:
        * src/WebKit.cpp:
        (WebKit::generateEntropy):
        (WebKit::initialize):

2011-07-22  Andrew Scherkus  <scherkus@chromium.org>

        Remove surfaceType() and texture() methods from Chromium video frame classes.
        https://bugs.webkit.org/show_bug.cgi?id=64818

        Reviewed by Kenneth Russell.

        * public/WebVideoFrame.h:
        * src/AssertMatchingEnums.cpp:
        * src/VideoFrameChromiumImpl.cpp:
        * src/VideoFrameChromiumImpl.h:

2011-07-22  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-22  Ryosuke Niwa  <rniwa@webkit.org>

        Revert r91510 due to Chromium debug test failures.

        * src/WebKit.cpp:
        (WebKit::initialize):

2011-07-20  Cris Neckar  <cdn@chromium.org>

        Hook v8 up to cryptographicallyRandomValues as an entropy source.
        https://bugs.webkit.org/show_bug.cgi?id=64887

        Reviewed by Adam Barth.

        * src/WebKit.cpp:
        (WebKit::generateEntropy):
        (WebKit::initialize):

2011-07-21  Vsevolod Vlasov  <vsevik@chromium.org>

        [Chromium DevTools] Remove unused method setAgentIdentifierPrefix from WebDevToolAgent.
        https://bugs.webkit.org/show_bug.cgi?id=64793

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:

2011-07-21  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-20  Al Patrick  <apatrick@chromium.org>

        Set the parent context to that of the associated view when calling GraphicsContext3DChromium::copyTextureToParentCHROMIUM.
        This fixes a race condition whereby the view window does not exist when the offscreen context is created. It allows
        accelerated 2D canvases to be added to newly created window.
        https://bugs.webkit.org/show_bug.cgi?id=64905

        Reviewed by James Robinson.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::copyTextureToParentTextureCHROMIUM):

2011-07-19  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Add support for disabling cache in web inspector.
        https://bugs.webkit.org/show_bug.cgi?id=64097

        Reviewed by Pavel Feldman.

        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::setCacheDisabled):
        * src/InspectorClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::setCacheDisabled):
        * src/WebDevToolsAgentImpl.h:
        * src/js/DevTools.js:
        ():

2011-07-20  Peter Kasting  <pkasting@google.com>

        Remove "const" from obviously-non-const accessors
        https://bugs.webkit.org/show_bug.cgi?id=62302

        Reviewed by Darin Adler.

        * public/WebElement.h:
        * src/WebElement.cpp:
        (WebKit::WebElement::innerText): Not const due to call to newly-non-const Element::innerText().
        * src/WebSearchableFormData.cpp: Use non-const Node*s for code that calls newly non-const accessors.
        (HTMLNames::IsSelectInDefaultState):
        (HTMLNames::IsInDefaultState):
        * src/WebViewImpl.cpp: Use non-const Node*s for code that calls newly non-const accessors.
        (WebKit::WebViewImpl::setComposition):
        (WebKit::WebViewImpl::confirmComposition):
        (WebKit::WebViewImpl::textInputType):

2011-07-20  Ilya Sherman  <isherman@chromium.org>

        Remove TODO in WebNode.h from a two-sided patch that has now landed
        https://bugs.webkit.org/show_bug.cgi?id=64840

        Reviewed by Darin Fisher.

        * public/WebNode.h:

2011-07-20  Glen Shires  <gshires@google.com>

        Bug 64625: Add isSpeechInputEnabled flag to WebContextMenuData.
        https://bugs.webkit.org/show_bug.cgi?id=64625

        Reviewed by Darin Fisher.

        * public/WebContextMenuData.h:
        (WebKit::WebContextMenuData::WebContextMenuData): added flag isSpeechInputEnabled
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): set flag isSpeechInputEnabled

2011-07-20  Andrey Kosyakov  <caseq@chromium.org>

        Web Inspector: move Network log view to an iframe
        https://bugs.webkit.org/show_bug.cgi?id=62006

        Reviewed by Pavel Feldman.

        * WebKit.gyp:

2011-07-19  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-19  Dominic Mazzoni  <dmazzoni@google.com>

        Adds some methods to retrieve accessible information from tables and
        table cells. Also refactors WebAccessibilityObject to use WebPrivatePtr
        instead of its own implementation that didn't allow access to subclasses
        of AccessibilityObject.
        https://bugs.webkit.org/show_bug.cgi?id=64805

        Reviewed by Dimitri Glazkov.

        * public/WebAccessibilityObject.h:
        (WebKit::WebAccessibilityObject::WebAccessibilityObject):
        (WebKit::WebAccessibilityObject::isNull):
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::reset):
        (WebKit::WebAccessibilityObject::assign):
        (WebKit::WebAccessibilityObject::equals):
        (WebKit::WebAccessibilityObject::accessibilityDescription):
        (WebKit::WebAccessibilityObject::actionVerb):
        (WebKit::WebAccessibilityObject::canSetFocusAttribute):
        (WebKit::WebAccessibilityObject::canSetValueAttribute):
        (WebKit::WebAccessibilityObject::isValid):
        (WebKit::WebAccessibilityObject::childCount):
        (WebKit::WebAccessibilityObject::childAt):
        (WebKit::WebAccessibilityObject::firstChild):
        (WebKit::WebAccessibilityObject::focusedChild):
        (WebKit::WebAccessibilityObject::lastChild):
        (WebKit::WebAccessibilityObject::nextSibling):
        (WebKit::WebAccessibilityObject::parentObject):
        (WebKit::WebAccessibilityObject::previousSibling):
        (WebKit::WebAccessibilityObject::canSetSelectedAttribute):
        (WebKit::WebAccessibilityObject::isAnchor):
        (WebKit::WebAccessibilityObject::isChecked):
        (WebKit::WebAccessibilityObject::isCollapsed):
        (WebKit::WebAccessibilityObject::isFocused):
        (WebKit::WebAccessibilityObject::isEnabled):
        (WebKit::WebAccessibilityObject::isHovered):
        (WebKit::WebAccessibilityObject::isIndeterminate):
        (WebKit::WebAccessibilityObject::isLinked):
        (WebKit::WebAccessibilityObject::isMultiSelectable):
        (WebKit::WebAccessibilityObject::isOffScreen):
        (WebKit::WebAccessibilityObject::isPasswordField):
        (WebKit::WebAccessibilityObject::isPressed):
        (WebKit::WebAccessibilityObject::isReadOnly):
        (WebKit::WebAccessibilityObject::isSelected):
        (WebKit::WebAccessibilityObject::isVisible):
        (WebKit::WebAccessibilityObject::isVisited):
        (WebKit::WebAccessibilityObject::boundingBoxRect):
        (WebKit::WebAccessibilityObject::helpText):
        (WebKit::WebAccessibilityObject::headingLevel):
        (WebKit::WebAccessibilityObject::hitTest):
        (WebKit::WebAccessibilityObject::keyboardShortcut):
        (WebKit::WebAccessibilityObject::performDefaultAction):
        (WebKit::WebAccessibilityObject::roleValue):
        (WebKit::WebAccessibilityObject::selectionEnd):
        (WebKit::WebAccessibilityObject::selectionStart):
        (WebKit::WebAccessibilityObject::setFocused):
        (WebKit::WebAccessibilityObject::stringValue):
        (WebKit::WebAccessibilityObject::title):
        (WebKit::WebAccessibilityObject::url):
        (WebKit::WebAccessibilityObject::node):
        (WebKit::WebAccessibilityObject::document):
        (WebKit::WebAccessibilityObject::hasComputedStyle):
        (WebKit::WebAccessibilityObject::computedStyleDisplay):
        (WebKit::WebAccessibilityObject::accessibilityIsIgnored):
        (WebKit::WebAccessibilityObject::lineBreaks):
        (WebKit::WebAccessibilityObject::columnCount):
        (WebKit::WebAccessibilityObject::rowCount):
        (WebKit::WebAccessibilityObject::cellForColumnAndRow):
        (WebKit::WebAccessibilityObject::cellColumnIndex):
        (WebKit::WebAccessibilityObject::cellColumnSpan):
        (WebKit::WebAccessibilityObject::cellRowIndex):
        (WebKit::WebAccessibilityObject::cellRowSpan):
        (WebKit::WebAccessibilityObject::WebAccessibilityObject):
        (WebKit::WebAccessibilityObject::operator=):
        (WebKit::WebAccessibilityObject::operator WTF::PassRefPtr<WebCore::AccessibilityObject>):

2011-07-19  Robert Sesek  <rsesek@chromium.org>

        [Chromium] Need to remove app/ from DEPS
        https://bugs.webkit.org/show_bug.cgi?id=64750

        Reviewed by Tony Chang.

        Roll DEPS and remove dependencies on Chromium's /src/app.

        * DEPS:
        * WebKit.gyp:

2011-07-19  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: add sanity test for shared worker inspector
        https://bugs.webkit.org/show_bug.cgi?id=64799

        Reviewed by Pavel Feldman.

        * src/js/Tests.js:
        (.TestSuite.prototype.testSharedWorker):
        (.TestSuite.prototype.evaluateInConsole_):

2011-07-19  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Rename agentIdentifierPrefix to processId, move out from page agent and make static.
        https://bugs.webkit.org/show_bug.cgi?id=64729

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::setAgentIdentifierPrefix):
        (WebKit::WebDevToolsAgentImpl::setProcessId):
        * src/WebDevToolsAgentImpl.h:

2011-07-18  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-18  James Robinson  <jamesr@chromium.org>

        Timer scheduling should be based off the monotonic clock
        https://bugs.webkit.org/show_bug.cgi?id=64544

        Reviewed by Darin Adler.

        Renames setSharedTimerFireTime to setSharedTimerFireInterval to be consistent with WebCore.

        * public/WebKitClient.h:
        (WebKit::WebKitClient::setSharedTimerFireInterval):
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::setSharedTimerFireInterval):

2011-07-18  Yuzhu Shen  <yzshen@chromium.com>

        Reviewed by James Robinson.

        [chromium] WebFontImpl::drawText needs to handle the canvasIsOpaque input.
        https://bugs.webkit.org/show_bug.cgi?id=64555
        
        This change handles canvasIsOpaque for the WEBKIT_USING_SKIA case.
 
        * src/WebFontImpl.cpp: handled canvasIsOpaque.
        * src/WebFontImpl.h: added method declaration.

2011-07-16  Simon Fraser  <simon.fraser@apple.com>

        Add code to attempt to align compositing layers to pixel boundaries when page scale changes
        https://bugs.webkit.org/show_bug.cgi?id=64658

        Reviewed by Dan Bernstein.

        Removed implementations of backingScaleFactor() and pageScaleFactor() now
        that GraphicsLayerClient has default implementations.

        * src/PageOverlay.cpp:

2011-07-15  Simon Fraser  <simon.fraser@apple.com>

        Have GraphicsLayer pull their contentsScale, rather than pushing it onto them
        https://bugs.webkit.org/show_bug.cgi?id=64643

        Reviewed by Darin Adler.
        
        Impement new GraphicsLayerClient methods related to contents scale.

        * src/PageOverlay.cpp:
        (WebKit::OverlayGraphicsLayerClientImpl::backingScaleFactor):
        (WebKit::OverlayGraphicsLayerClientImpl::pageScaleFactor):

2011-07-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-15  Kenneth Russell  <kbr@google.com>

        Don't restore WebGL context if it was guilty of a graphics reset
        https://bugs.webkit.org/show_bug.cgi?id=64497

        Reviewed by Stephen White.

        Actually implement getGraphicsResetStatusARB rather than inferring
        the status based on whether the context has been lost.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::getGraphicsResetStatusARB):
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::getGraphicsResetStatusARB):
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DInternal.h:

2011-07-15  Dan Bernstein  <mitz@apple.com>

        Chromium build fix.

        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::setCursorHiddenUntilMouseMoves):
        * src/WebPopupMenuImpl.h:

2011-07-15  Dan Bernstein  <mitz@apple.com>

        REGRESSION: Mouse cursor doesnt hide when full screen video HUD hides
        https://bugs.webkit.org/show_bug.cgi?id=64615

        Reviewed by Anders Carlsson.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::setCursorHiddenUntilMouseMoves): Added this stub.
        * src/ChromeClientImpl.h:

2011-07-14  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled Chromium revision to 92606.

        * DEPS:

2011-07-14  Ilya Sherman  <isherman@chromium.org>

        Rename AutoFill -> Autofill and autoFill -> autofill
        https://bugs.webkit.org/show_bug.cgi?id=64333
        http://code.google.com/p/chromium/issues/detail?id=72758

        Reviewed by Darin Fisher.

        * WebKit.gyp:
        * public/WebAutofillClient.h:
        (WebKit::WebAutofillClient::didAcceptAutofillSuggestion):
        (WebKit::WebAutofillClient::didSelectAutofillSuggestion):
        (WebKit::WebAutofillClient::didClearAutofillSelection):
        (WebKit::WebAutofillClient::removeAutocompleteSuggestion):
        (WebKit::WebAutofillClient::textFieldDidBeginEditing):
        (WebKit::WebAutofillClient::textFieldDidEndEditing):
        (WebKit::WebAutofillClient::textFieldDidChange):
        (WebKit::WebAutofillClient::textFieldDidReceiveKeyDown):
        (WebKit::WebAutofillClient::~WebAutofillClient):
        * public/WebNode.h:
        * public/WebView.h:
        * src/AutofillPopupMenuClient.cpp:
        (WebKit::AutofillPopupMenuClient::AutofillPopupMenuClient):
        (WebKit::AutofillPopupMenuClient::~AutofillPopupMenuClient):
        (WebKit::AutofillPopupMenuClient::getSuggestionsCount):
        (WebKit::AutofillPopupMenuClient::getSuggestion):
        (WebKit::AutofillPopupMenuClient::getLabel):
        (WebKit::AutofillPopupMenuClient::getIcon):
        (WebKit::AutofillPopupMenuClient::removeSuggestionAtIndex):
        (WebKit::AutofillPopupMenuClient::canRemoveSuggestionAtIndex):
        (WebKit::AutofillPopupMenuClient::valueChanged):
        (WebKit::AutofillPopupMenuClient::selectionChanged):
        (WebKit::AutofillPopupMenuClient::selectionCleared):
        (WebKit::AutofillPopupMenuClient::itemText):
        (WebKit::AutofillPopupMenuClient::itemLabel):
        (WebKit::AutofillPopupMenuClient::itemIcon):
        (WebKit::AutofillPopupMenuClient::itemIsEnabled):
        (WebKit::AutofillPopupMenuClient::itemStyle):
        (WebKit::AutofillPopupMenuClient::menuStyle):
        (WebKit::AutofillPopupMenuClient::clientPaddingLeft):
        (WebKit::AutofillPopupMenuClient::clientPaddingRight):
        (WebKit::AutofillPopupMenuClient::popupDidHide):
        (WebKit::AutofillPopupMenuClient::itemIsSeparator):
        (WebKit::AutofillPopupMenuClient::itemIsWarning):
        (WebKit::AutofillPopupMenuClient::setTextFromItem):
        (WebKit::AutofillPopupMenuClient::fontSelector):
        (WebKit::AutofillPopupMenuClient::hostWindow):
        (WebKit::AutofillPopupMenuClient::createScrollbar):
        (WebKit::AutofillPopupMenuClient::initialize):
        (WebKit::AutofillPopupMenuClient::setSuggestions):
        (WebKit::AutofillPopupMenuClient::convertListIndexToInternalIndex):
        (WebKit::AutofillPopupMenuClient::getWebView):
        (WebKit::AutofillPopupMenuClient::textFieldStyle):
        * src/AutofillPopupMenuClient.h:
        (WebKit::AutofillPopupMenuClient::itemToolTip):
        (WebKit::AutofillPopupMenuClient::itemAccessibilityText):
        (WebKit::AutofillPopupMenuClient::clientInsetLeft):
        (WebKit::AutofillPopupMenuClient::clientInsetRight):
        (WebKit::AutofillPopupMenuClient::listSize):
        (WebKit::AutofillPopupMenuClient::selectedIndex):
        (WebKit::AutofillPopupMenuClient::itemIsLabel):
        (WebKit::AutofillPopupMenuClient::itemIsSelected):
        (WebKit::AutofillPopupMenuClient::shouldPopOver):
        (WebKit::AutofillPopupMenuClient::valueShouldChangeOnHotTrack):
        (WebKit::AutofillPopupMenuClient::getTextField):
        (WebKit::AutofillPopupMenuClient::getSelectedIndex):
        (WebKit::AutofillPopupMenuClient::setSelectedIndex):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::textFieldDidBeginEditing):
        (WebKit::EditorClientImpl::textFieldDidEndEditing):
        (WebKit::EditorClientImpl::textDidChangeInTextField):
        (WebKit::EditorClientImpl::doAutofill):
        (WebKit::EditorClientImpl::doTextFieldCommandFromEvent):
        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::setAutofilled):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setAutofillClient):
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::mouseDown):
        (WebKit::WebViewImpl::autocompleteHandleKeyEvent):
        (WebKit::WebViewImpl::hideAutofillPopup):
        (WebKit::WebViewImpl::setFocus):
        (WebKit::WebViewImpl::applyAutofillSuggestions):
        (WebKit::WebViewImpl::hidePopups):
        (WebKit::WebViewImpl::refreshAutofillPopup):
        * src/WebViewImpl.h:
        (WebKit::WebViewImpl::autofillClient):
        (WebKit::WebViewImpl::autofillPopupDidHide):

2011-07-14  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: URL parameters should consistently use camel case names
        https://bugs.webkit.org/show_bug.cgi?id=64520

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:
        (devtools.domContentLoaded): Now that Chromium side is updated we can remove the old parameter
        handling code.

2011-07-14  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: URL parameters should consistently use camel case names
        https://bugs.webkit.org/show_bug.cgi?id=64520

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:
        (devtools.domContentLoaded):

2011-07-13  Noel Gordon  <noel.gordon@gmail.com>

        [chromium] Clean undeeded WebCore:: namespace prefixing from WebBindings.
        https://bugs.webkit.org/show_bug.cgi?id=64361

        Reviewed by Kent Tamura.

        * src/WebBindings.cpp:
        (WebKit::makeIntArrayImpl):
        (WebKit::makeStringArrayImpl):

2011-07-13  James Robinson  <jamesr@chromium.org>

        [chromium] No implementation defined for WTF::monotonicallyIncreasingTime
        https://bugs.webkit.org/show_bug.cgi?id=64420

        Reviewed by Tony Gentilcore.

        Provides an implementation of WTF::monotonicallyIncreasingTime() alongside the implementation of
        WTF::currentTime().

        * src/ChromiumCurrentTime.cpp:
        (WTF::monotonicallyIncreasingTime):
        * src/PlatformBridge.cpp:

2011-07-13  Vsevolod Vlasov  <vsevik@chromium.org>

        Chromium DevTools: Enable clear cache and cookies from network panel in chromium.
        https://bugs.webkit.org/show_bug.cgi?id=64095

        Reviewed by Pavel Feldman.

        * src/js/DevTools.js:
        ():

2011-07-12  Al Patrick  <apatrick@chromium.org>

        Added the ability to dynamically change the parent context of a WebGraphicsContext3D.
        GraphicsContext3DInternal::platformTexture uses this to set the parent as appropriate.
        https://bugs.webkit.org/show_bug.cgi?id=64397

        Reviewed by Kenneth Russell.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::setParentContext):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::platformTexture):

2011-07-12  James Robinson  <jamesr@chromium.org>

        [chromium] Delete the unused legacy accelerated canvas 2d code
        https://bugs.webkit.org/show_bug.cgi?id=64214

        Reviewed by Stephen White.

        Adds a way to stash a GrContext* on a GraphicsContext3D. Previously, this was handled by
        SharedGraphicsContext3D, but we don't need that class any more.  This is used only for the shared
        GraphicsContext3D stashed on the Page and shared by all accelerated canvases within the Page, for WebGL and
        compositor contexts the GrContext is never set.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::~GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::grContext):
        (WebCore::GraphicsContext3D::grContext):
        * src/GraphicsContext3DInternal.h:

2011-07-12  Joseph Pecoraro  <joepeck@webkit.org>

        ApplicationCache update should not immediately fail when reaching per-origin quota
        https://bugs.webkit.org/show_bug.cgi?id=64177

        Reviewed by Alexey Proskuryakov.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::reachedApplicationCacheOriginQuota):
        * src/ChromeClientImpl.h:

2011-07-12  John Bates  <jbates@google.com>

        Move call to syncCompositingLayers so that we do not trigger redundant draws.
        https://bugs.webkit.org/show_bug.cgi?id=64224

        doComposite was triggering two composites every time a canvas was dirtied.
        By moving syncCompositingLayers call to layout, the client code can draw without triggering
        a redundant frame. Also renamed WebViewImpl::updateLayers to
        syncCompositingLayers, because it was confusing.

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::layout):
        (WebKit::WebViewImpl::syncCompositingLayers):
        * src/WebViewImpl.h:

2011-07-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-12  Evan Martin  <evan@chromium.org>

        [chromium] DRT depends on v8
        https://bugs.webkit.org/show_bug.cgi?id=64376

        DumpRenderTree.cpp has calls to v8:: functions, so it should have a build
        dependency on v8.  This fixes missing references in the shared-object build.

        * WebKit.gyp:

2011-07-11  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-08  Nate Chapin  <japhet@chromium.org>

        Check activeDocumentLoader() in
        WebFrameImpl::currentHistoryItem() and return
        early if null, since that should mean we're
        shutting down.
        https://bugs.webkit.org/show_bug.cgi?id=52923

        Reviewed by Darin Fisher.

        No known repro, so no new test.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::currentHistoryItem):

2011-07-07  Vsevolod Vlasov  <vsevik@chromium.org>

        Web Inspector: Add support for clearing cache and cookies from network panel.
        https://bugs.webkit.org/show_bug.cgi?id=63999

        Reviewed by Pavel Feldman.

        * public/WebDevToolsAgentClient.h:
        (WebKit::WebDevToolsAgentClient::clearBrowserCache):
        (WebKit::WebDevToolsAgentClient::clearBrowserCookies):
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::clearBrowserCache):
        (WebKit::InspectorClientImpl::clearBrowserCookies):
        * src/InspectorClientImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::clearBrowserCache):
        (WebKit::WebDevToolsAgentImpl::clearBrowserCookies):
        * src/WebDevToolsAgentImpl.h:

2011-07-06  Adam Barth  <abarth@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2011-07-06  Johnny Ding  <jnd@chromium.org>

        https://bugs.webkit.org/show_bug.cgi?id=63857
        Check WebWidgetClient before calling it to close widget.  

        Reviewed by Tony Chang.

        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::popupClosed):

2011-07-06  Adrienne Walker  <enne@google.com>

        [chromium] Add compositor texture manager soft limits and lost focus reclaiming
        https://bugs.webkit.org/show_bug.cgi?id=64009

        Reviewed by James Robinson.

        Reclaim textures when the tab loses focus.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setVisibilityState):

2011-06-30  Cris Neckar  <cdn@chromium.org>

        Reviewed by Darin Fisher.

        Add versioning to Chromium clipboard and prevent polling from inside events.
        https://bugs.webkit.org/show_bug.cgi?id=63738

        * public/WebClipboard.h:
        (WebKit::WebClipboard::getSequenceNumber):
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::clipboardGetSequenceNumber):

2011-07-06  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-07-05  Yury Semikhatsky  <yurys@chromium.org>

        [Chromium] Web Inspector: extend WebSharedWorker with inspector transport methods
        https://bugs.webkit.org/show_bug.cgi?id=63942

        Added methods for connecting inspector to shared worker and for passing
        messages between shared worker inspector and corresponding inspector frontend.

        Reviewed by Pavel Feldman.

        * public/WebCommonWorkerClient.h:
        (WebKit::WebCommonWorkerClient::dispatchDevToolsMessage):
        * public/WebSharedWorker.h:
        (WebKit::WebSharedWorker::attachDevTools):
        (WebKit::WebSharedWorker::detachDevTools):
        (WebKit::WebSharedWorker::dispatchDevToolsMessage):
        * public/WebWorkerClient.h:
        * src/WebSharedWorkerImpl.cpp:
        (WebKit::connectToWorkerContextInspectorTask):
        (WebKit::WebSharedWorkerImpl::attachDevTools):
        (WebKit::disconnectFromWorkerContextInspectorTask):
        (WebKit::WebSharedWorkerImpl::detachDevTools):
        (WebKit::dispatchOnInspectorBackendTask):
        (WebKit::WebSharedWorkerImpl::dispatchDevToolsMessage):
        * src/WebSharedWorkerImpl.h:
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::postMessageToPageInspectorTask):

2011-07-01  Kent Tamura  <tkent@chromium.org>

        [Chromium] Rebaseline for fast/forms/input-file-re-render.html
        https://bugs.webkit.org/show_bug.cgi?id=63733

        * DEPS: Update chromium revision to 91405 to have "Choose Files" string.

2011-07-01  Michael Nordman  <michaeln@google.com>

        Reviewed by Darin Fisher.

        [Chromium] FileSystem API can be used to learn about installed software on the user's computer
        https://bugs.webkit.org/show_bug.cgi?id=63220

        * public/WebMimeRegistry.h:
        (WebKit::WebMimeRegistry::wellKnownMimeTypeForExtension):
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::wellKnownMimeTypeForExtension):

2011-07-01  Scott Byer  <scottbyer@chromium.org>

        Reviewed by Adam Barth.

        Smooth scrolling fixes
        https://bugs.webkit.org/show_bug.cgi?id=63770

        Fix issues found in manual testing; distill the traces into unit tests. Fix the issues the tests exposed in the
        scroll animation code.

        * tests/ScrollAnimatorNoneTest.cpp:
        (ScrollAnimatorNoneTest::updateDataFromParameters):
        (TEST_F):

2011-07-01  Hans Wennborg  <hans@chromium.org>

        IndexedDB: make LevelDB the default back-end
        https://bugs.webkit.org/show_bug.cgi?id=63817

        Reviewed by Tony Chang.

        Use LevelDB as the default back-end.

        Covered by existing layout tests for indexeddb, which will now be
        using the LevelDB back-end.

        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):

2011-07-01  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Ojan Vafai.

        Move m_isDirectional from FrameSelection to VisibleSelection
        https://bugs.webkit.org/show_bug.cgi?id=63473

        Don't pass MakeNonDirectionalSelection to setSelection since no other port does this.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::selectRange):

2011-07-01  Andrew Scherkus  <scherkus@chromium.org>

        Reviewed by Darin Fisher.

        Re-enable WTF_USE_WEBAUDIO_FFMPEG for Chromium
        https://bugs.webkit.org/show_bug.cgi?id=63783

        * features.gypi:

2011-07-01  Tony Chang  <tony@chromium.org>

        Fix the chromium build.  sql is a new top level directory.

        * DEPS:

2011-07-01  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-30  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Hajime Morita.

        [Chromium] Remove WebBindings::makeNode.
        https://bugs.webkit.org/show_bug.cgi?id=63613

        Dead code elimination. No change in behaviour, so no new tests.

        * public/WebBindings.h:
        * src/WebBindings.cpp:

2011-06-30  Kent Tamura  <tkent@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] Implement WebCore::defaultDetailsSummaryText()
        https://bugs.webkit.org/show_bug.cgi?id=63700

        * public/WebLocalizedString.h: Add new key.
        * src/LocalizedStrings.cpp: Call query() with the new key.
        (WebCore::defaultDetailsSummaryText):

2011-06-30  Andrew Scherkus  <scherkus@chromium.org>

        Unreviewed.

        Temporarily disabling WTF_USE_WEBAUDIO_FFMPEG due to FFmpeg update.

        * features.gypi:

2011-06-30  John Bates  <jbates@google.com>

        Reviewed by James Robinson.

        Chromium bug: Compositing on a lost context causes latch deadlocks.
        The cause of deadlock was that a setLatch command is added to the lost
        compositor GL context, and a waitLatch would never complete on a child context.
        This change checks whether the compositor context is in error state before
        doing the compositing.
        https://bugs.webkit.org/show_bug.cgi?id=63681

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):

2011-06-30  Cary Clark  <caryclark@google.com>

        Reviewed by James Robinson.

        Use Skia if Skia on Mac Chrome is enabled
        https://bugs.webkit.org/show_bug.cgi?id=62999

        * WebKit.gyp:
        If building for Skia, exclude CG files.
        If not, exclude Skia files.

        * features.gypi:
        Enable Skia on Chromium Mac if so instructed by the gyp define.
        Allow Skia to be hardware accelerated on the Mac.

        * public/WebCommon.h:
        If Skia is defined on the Mac, define it in the WebXXX
        interfaces as well.

2011-06-30  Sreeram Ramachandran  <sreeram@chromium.org>

        Reviewed by Adam Barth.

        Suppress modal JavaScript/HTML dialogs during unload events
        https://bugs.webkit.org/show_bug.cgi?id=56397

        Implementation of the new shouldRunModalDialogDuringPageDismissal() API
        to block alerts during unload handlers. Logs such events to the console
        and updates histograms.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::shouldRunModalDialogDuringPageDismissal):
        * src/ChromeClientImpl.h:

2011-06-30  Anders Carlsson  <andersca@apple.com>

        Reviewed by Dan Bernstein.

        More ScrollableArea scaffolding
        https://bugs.webkit.org/show_bug.cgi?id=63678

        Add an enclosingScrollableArea stub.

        * src/WebScrollbarImpl.cpp:
        (WebKit::WebScrollbarImpl::enclosingScrollableArea):
        * src/WebScrollbarImpl.h:

2011-06-28  Hans Wennborg  <hans@chromium.org>

        Reviewed by Tony Chang.

        IndexedDB: Prepare for running layout tests with LevelDB
        https://bugs.webkit.org/show_bug.cgi?id=63593

        WebIDBFactory should decide what DefaultBackingStore means.
        Also fix handling of layout test and incognito mode properly.

        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):

2011-06-30  Alexander Pavlov  <apavlov@chromium.org>

        Reviewed by Kent Tamura.

        [Chromium] Autofill suggestions appear in upper left corner after input change
        https://bugs.webkit.org/show_bug.cgi?id=63702

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::screenToWindow): Implemented.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::refreshAutoFillPopup): Pass screen (not window) coordinates into setWindowRect().

2011-06-30  Kentaro Hara  <haraken@google.com>

        Reviewed by Kent Tamura.

        Change the label of an HTML5 file chooser button to "Choose Files"
        https://bugs.webkit.org/show_bug.cgi?id=49245

        We should notify capability of multiple files to users.

        Test: fast/forms/input-file-label.html

        * DEPS:
        * public/WebLocalizedString.h: Depends on chromium_rev>=91051.
        * src/LocalizedStrings.cpp:
        (WebCore::fileButtonChooseMultipleFilesLabel): Returns a "Choose Files" label.

2011-06-29  James Hawkins  <jhawkins@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Fix a crash on when executeCommand(copy) is called on a null node.
        https://bugs.webkit.org/show_bug.cgi?id=63626

        * src/WebFrameImpl.cpp:
        (WebKit::pluginContainerFromNode):

2011-06-29  Andrey Kosyakov  <caseq@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: backend needs to provide system-unique object ids, so these remain unique across navigation
        https://bugs.webkit.org/show_bug.cgi?id=62894

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::setAgentProcessIdentifier):
        * src/WebDevToolsAgentImpl.h:

2011-06-28  Ilya Sherman  <isherman@chromium.org>

        Reviewed by Adam Barth.

        form.autocomplete="off" does not work
        https://bugs.webkit.org/show_bug.cgi?id=35823

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::autofill): Update callsite.
        * src/WebFormElement.cpp:
        (WebKit::WebFormElement::autoComplete): Update callsite.
        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::autoComplete): Update callsite.
        * src/WebPasswordFormUtils.cpp:
        (WebKit::findPasswordFormFields): Update callsite.

2011-06-28  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89968.
        http://trac.webkit.org/changeset/89968
        https://bugs.webkit.org/show_bug.cgi?id=63581

        Broke chromium windows compile (Requested by jamesr on
        #webkit).

        * WebKit.gyp:
        * features.gypi:
        * public/WebCommon.h:

2011-06-28  Cary Clark  <caryclark@google.com>

        Reviewed by James Robinson.

        Use Skia if Skia on Mac Chrome is enabled
        https://bugs.webkit.org/show_bug.cgi?id=62999

        * WebKit.gyp:
        If building for Skia, exclude CG files.
        If not, exclude Skia files.

        * features.gypi:
        Enable Skia on Chromium Mac if so instructed by the gyp define.
        Allow Skia to be hardware accelerated on the Mac.

        * public/WebCommon.h:
        If Skia is defined on the Mac, define it in the WebXXX
        interfaces as well.

2011-06-28  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-27  James Hawkins  <jhawkins@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] Pass an optional WebNode that is the node receiving the context menu action.
        https://bugs.webkit.org/show_bug.cgi?id=63503

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::pluginContainerFromNode):
        (WebKit::WebFrameImpl::executeCommand):
        (WebKit::WebFrameImpl::printBegin):
        * src/WebFrameImpl.h:

2011-06-27  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-27  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Darin Fisher.

        Adding binary part support to MHTML.
        https://bugs.webkit.org/show_bug.cgi?id=63310

        * public/WebPageSerializer.h:
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serializeToMHTML):
        (WebKit::WebPageSerializer::serializeToMHTMLUsingBinaryEncoding):

2011-05-17  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Implement CCLayerTreeHost and CCLayerTreeHostImpl portions of threaded compositor
        https://bugs.webkit.org/show_bug.cgi?id=58408

        Redirect invalidates and scheduling into compositor when in
        threaded compositing mode. Add stress tests for CCLayerTreeHost.

        * WebKit.gypi:
        * public/WebWidget.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::animate):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::animateAndLayout):
        (WebKit::WebViewImpl::updateLayers):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebViewImpl::reallocateRenderer):
        (WebKit::WebViewImpl::updateLayerRendererSettings):
        (WebKit::WebViewImpl::updateLayerRendererViewport):
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp: Added.
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::animateAndLayout):
        (WTF::CCLayerTreeHostTest::beginCommitOnCCThread):
        (WTF::CCLayerTreeHostTest::beginCommitOnMainThread):
        (WTF::CCLayerTreeHostTest::commitOnCCThread):
        (WTF::CCLayerTreeHostTest::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTest::commitCompleteOnMainThread):
        (WTF::CCLayerTreeHostTest::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTest::updateLayers):
        (WTF::CCLayerTreeHostTest::onBeginTest):
        (WTF::CCLayerTreeHostTest::doEndTest):
        (WTF::CCLayerTreeHostTest::onEndTest):
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::testTimeout):
        (WTF::MockLayerTreeHostClient::MockLayerTreeHostClient):
        (WTF::MockLayerTreeHostClient::createLayerTreeHostContext3D):
        (WTF::MockLayerTreeHostClient::animateAndLayout):
        (WTF::MockLayerTreeHostClient::updateLayers):
        (WTF::MockLayerTreeHostCommitter::create):
        (WTF::MockLayerTreeHostCommitter::commit):
        (WTF::MockLayerTreeHostCommitter::MockLayerTreeHostCommitter):
        (WTF::MockLayerTreeHostImpl::create):
        (WTF::MockLayerTreeHostImpl::beginCommit):
        (WTF::MockLayerTreeHostImpl::commitComplete):
        (WTF::MockLayerTreeHostImpl::drawLayersAndPresent):
        (WTF::MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (WTF::MockLayerTreeHostImplProxy::create):
        (WTF::MockLayerTreeHostImplProxy::createLayerTreeHostImpl):
        (WTF::MockLayerTreeHostImplProxy::MockLayerTreeHostImplProxy):
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF::MockLayerTreeHost::createLayerTreeHostImplProxy):
        (WTF::MockLayerTreeHost::updateLayers):
        (WTF::MockLayerTreeHost::createLayerTreeHostCommitter):
        (WTF::MockLayerTreeHost::beginCommit):
        (WTF::MockLayerTreeHost::commitComplete):
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (WTF::CCLayerTreeHostTest::endTest):
        (WTF::CCLayerTreeHostTestShortlived1::CCLayerTreeHostTestShortlived1):
        (WTF::CCLayerTreeHostTestShortlived1::beginTest):
        (WTF::CCLayerTreeHostTestShortlived1::afterTest):
        (WTF::TEST_F):
        (WTF::CCLayerTreeHostTestShortlived2::CCLayerTreeHostTestShortlived2):
        (WTF::CCLayerTreeHostTestShortlived2::beginTest):
        (WTF::CCLayerTreeHostTestShortlived2::afterTest):
        (WTF::CCLayerTreeHostTestShortlived3::CCLayerTreeHostTestShortlived3):
        (WTF::CCLayerTreeHostTestShortlived3::beginTest):
        (WTF::CCLayerTreeHostTestShortlived3::afterTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::CCLayerTreeHostTestCommitingWithContinuousRedraw):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::beginTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::CCLayerTreeHostTestSetNeedsCommit1):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::CCLayerTreeHostTestSetNeedsCommit2):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::CCLayerTreeHostTestSetNeedsRedraw):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::afterTest):
        * tests/CCThreadTest.cpp:
        (WebCore::TEST):

2011-06-27  Yuta Kitamura  <yutak@chromium.org>

        Reviewed by Adam Barth.

        [Chromium] Add useHixie76WebSocketProtocol to WebSettings
        https://bugs.webkit.org/show_bug.cgi?id=63424

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setHixie76WebSocketProtocolEnabled):
        * src/WebSettingsImpl.h:

2011-06-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [Chromium] Remove WebSecurityOrigin::grantUniversalAccess
        https://bugs.webkit.org/show_bug.cgi?id=63415

        This function has no callers and is downright dangerous.

        * public/WebSecurityOrigin.h:
        * src/WebSecurityOrigin.cpp:

2011-06-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [Chromium] Remove code behind WEBKIT_FRAME_TO_DOCUMENT_API_MOVE
        https://bugs.webkit.org/show_bug.cgi?id=63402

        These old APIs are no longer needed.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-06-25  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [Chromium] Update WebKit for WEBKIT_FRAME_TO_DOCUMENT_API_MOVE
        https://bugs.webkit.org/show_bug.cgi?id=63394

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchWillPerformClientRedirect):

2011-06-25  Adam Barth  <abarth@webkit.org>

        Roll Chromium DEPS.

        * DEPS:

2011-06-25  Adam Barth  <abarth@webkit.org>

        Unreviewed build fix.  Remove ifdefs around these two functions because
        we're not planning to move them.  This patch makes WebFrameImpl.h
        consistent with WebFrame.h so we can build with the new API
        configuration.

        * src/WebFrameImpl.h:

2011-06-24  Nat Duca  <nduca@chromium.org>

        Unreviewed, rolling out r89694.
        http://trac.webkit.org/changeset/89694
        https://bugs.webkit.org/show_bug.cgi?id=58408

        Test shell still not ready for animate changes.

        * WebKit.gypi:
        * public/WebWidget.h:
        (WebKit::WebWidget::animate):
        (WebKit::WebWidget::composite):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::animate):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::fullFramePluginZoomLevelChanged):
        (WebKit::WebView::zoomLevelToZoomFactor):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::reallocateRenderer):
        (WebKit::WebViewImpl::updateLayerRendererViewport):
        (WebKit::WebViewImpl::graphicsContext3D):
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp: Removed.
        * tests/CCThreadTest.cpp:
        (WebCore::TEST):

2011-05-17  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Implement CCLayerTreeHost and CCLayerTreeHostImpl portions of threaded compositor
        https://bugs.webkit.org/show_bug.cgi?id=58408

        Redirect invalidates and scheduling into compositor when in
        threaded compositing mode. Add stress tests for CCLayerTreeHost.

        * WebKit.gypi:
        * public/WebWidget.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::animate):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::animateAndLayout):
        (WebKit::WebViewImpl::updateLayers):
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::setRootLayerNeedsDisplay):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::createLayerTreeHostContext3D):
        (WebKit::WebViewImpl::reallocateRenderer):
        (WebKit::WebViewImpl::updateLayerRendererSettings):
        (WebKit::WebViewImpl::updateLayerRendererViewport):
        * src/WebViewImpl.h:
        * tests/CCLayerTreeHostTest.cpp: Added.
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::animateAndLayout):
        (WTF::CCLayerTreeHostTest::beginCommitOnCCThread):
        (WTF::CCLayerTreeHostTest::beginCommitOnMainThread):
        (WTF::CCLayerTreeHostTest::commitOnCCThread):
        (WTF::CCLayerTreeHostTest::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTest::commitCompleteOnMainThread):
        (WTF::CCLayerTreeHostTest::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTest::updateLayers):
        (WTF::CCLayerTreeHostTest::onBeginTest):
        (WTF::CCLayerTreeHostTest::doEndTest):
        (WTF::CCLayerTreeHostTest::onEndTest):
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::testTimeout):
        (WTF::MockLayerTreeHostClient::MockLayerTreeHostClient):
        (WTF::MockLayerTreeHostClient::createLayerTreeHostContext3D):
        (WTF::MockLayerTreeHostClient::animateAndLayout):
        (WTF::MockLayerTreeHostClient::updateLayers):
        (WTF::MockLayerTreeHostCommitter::create):
        (WTF::MockLayerTreeHostCommitter::commit):
        (WTF::MockLayerTreeHostCommitter::MockLayerTreeHostCommitter):
        (WTF::MockLayerTreeHostImpl::create):
        (WTF::MockLayerTreeHostImpl::beginCommit):
        (WTF::MockLayerTreeHostImpl::commitComplete):
        (WTF::MockLayerTreeHostImpl::drawLayersAndPresent):
        (WTF::MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (WTF::MockLayerTreeHostImplProxy::create):
        (WTF::MockLayerTreeHostImplProxy::createLayerTreeHostImpl):
        (WTF::MockLayerTreeHostImplProxy::MockLayerTreeHostImplProxy):
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF::MockLayerTreeHost::createLayerTreeHostImplProxy):
        (WTF::MockLayerTreeHost::updateLayers):
        (WTF::MockLayerTreeHost::createLayerTreeHostCommitter):
        (WTF::MockLayerTreeHost::beginCommit):
        (WTF::MockLayerTreeHost::commitComplete):
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (WTF::CCLayerTreeHostTest::endTest):
        (WTF::CCLayerTreeHostTestShortlived1::CCLayerTreeHostTestShortlived1):
        (WTF::CCLayerTreeHostTestShortlived1::beginTest):
        (WTF::CCLayerTreeHostTestShortlived1::afterTest):
        (WTF::TEST_F):
        (WTF::CCLayerTreeHostTestShortlived2::CCLayerTreeHostTestShortlived2):
        (WTF::CCLayerTreeHostTestShortlived2::beginTest):
        (WTF::CCLayerTreeHostTestShortlived2::afterTest):
        (WTF::CCLayerTreeHostTestShortlived3::CCLayerTreeHostTestShortlived3):
        (WTF::CCLayerTreeHostTestShortlived3::beginTest):
        (WTF::CCLayerTreeHostTestShortlived3::afterTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::CCLayerTreeHostTestCommitingWithContinuousRedraw):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::beginTest):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestCommitingWithContinuousRedraw::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::CCLayerTreeHostTestSetNeedsCommit1):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit1::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::CCLayerTreeHostTestSetNeedsCommit2):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsCommit2::afterTest):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::CCLayerTreeHostTestSetNeedsRedraw):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::beginTest):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::drawLayersAndPresentOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::commitOnCCThread):
        (WTF::CCLayerTreeHostTestSetNeedsRedraw::afterTest):
        * tests/CCThreadTest.cpp:
        (WebCore::TEST):

2011-06-24  Chris Rogers  <crogers@google.com>

        Reviewed by Kenneth Russell.

        Enable Web Audio for Chromium Win
        https://bugs.webkit.org/show_bug.cgi?id=63338

        * features.gypi:

2011-06-24  Dominic Cooney  <dominicc@chromium.org>

        Reviewed by Dimitri Glazkov.

        Convert shadow DOM-related tests to use window.internals
        https://bugs.webkit.org/show_bug.cgi?id=61671

        Remove shadow DOM-related methods from Chromium API. These are not
        required any more.

        * public/WebElement.h:
        * src/WebElement.cpp:

2011-06-24  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Darin Fisher.

        Web Inspector: [Chromium] Successfully prefetched page shows up as an error in console
        https://bugs.webkit.org/show_bug.cgi?id=62396

        * public/WebURLError.h:
        (WebKit::WebURLError::WebURLError):
        * src/WebURLError.cpp:
        (WebKit::WebURLError::operator=):
        (WebKit::WebURLError::operator ResourceError):

2011-06-23  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: provide context menu item for enabling native worker inspection
        https://bugs.webkit.org/show_bug.cgi?id=63258

        * src/js/DevTools.js:
        ():

2011-06-23  John Bates  <jbates@google.com>

        Reviewed by James Robinson.

        Fix latch deadlock when GPU process crashes or context is lost
        https://bugs.webkit.org/show_bug.cgi?id=63189

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):

2011-06-23  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-23  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Fix WebScrollBarImpl on Mac after recent smooth scrolling changes
        https://bugs.webkit.org/show_bug.cgi?id=63260

        * src/WebScrollbarImpl.cpp:
        (WebKit::WebScrollbarImpl::visibleHeight):
        (WebKit::WebScrollbarImpl::visibleWidth):
        (WebKit::WebScrollbarImpl::contentsSize):
        (WebKit::WebScrollbarImpl::overhangAmount):
        * src/WebScrollbarImpl.h:

2011-06-23  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-22  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Kent Tamura.

        [chromium] Remove calls to Position::deprecatedNode
        https://bugs.webkit.org/show_bug.cgi?id=63226

        Call containerNode instead of deprecatedNode.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::textInputType):

2011-06-22  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Fisher.

        [Chromium] Add WebDocument APIs for the functions moving from WebFrame
        https://bugs.webkit.org/show_bug.cgi?id=62831

        The next phase will be to change all the callers and then remove all
        the code inside the ifdef.

        * public/WebDocument.h:
            - Add new APIs.
        * public/WebFrame.h:
            - These two APIs were too disgusting.  I could not, in good
              conscience, touch them.
        * public/WebSecurityOrigin.h:
            - Turns out this API is supposed to be on WebSecurityOrigin, not
              WebDocument.
        * src/WebDocument.cpp:
            - Implement the APIs.
        (WebKit::WebDocument::url):
        (WebKit::WebDocument::securityOrigin):
        (WebKit::WebDocument::encoding):
        (WebKit::WebDocument::openSearchDescriptionURL):
        (WebKit::WebDocument::forms):
        (WebKit::WebDocument::insertStyleText):
        * src/WebFrameImpl.cpp:
            - Change these implements to just be stubs that call into the real
              implementations in WebDocument.
        (WebKit::WebFrameImpl::url):
        (WebKit::WebFrameImpl::openSearchDescriptionURL):
        (WebKit::WebFrameImpl::encoding):
        (WebKit::WebFrameImpl::forms):
        (WebKit::WebFrameImpl::securityOrigin):
        (WebKit::WebFrameImpl::grantUniversalAccess):
        (WebKit::WebFrameImpl::insertStyleText):
        (WebKit::WebFrameImpl::contentAsMarkup):
        * src/WebSecurityOrigin.cpp:
        (WebKit::WebSecurityOrigin::grantUniversalAccess):

2011-06-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89489.
        http://trac.webkit.org/changeset/89489
        https://bugs.webkit.org/show_bug.cgi?id=63203

        Broke chromium mac build on build.webkit.org (Requested by
        abarth on #webkit).

        * WebKit.gyp:
        * features.gypi:
        * public/WebCommon.h:

2011-06-22  Cary Clark  <caryclark@google.com>

        Reviewed by Darin Fisher.

        Use Skia if Skia on Mac Chrome is enabled
        https://bugs.webkit.org/show_bug.cgi?id=62999

        * WebKit.gyp:
        If building for Skia, exclude CG files.
        If not, exclude Skia files.

        * features.gypi:
        Enable Skia on Chromium Mac if so instructed by the gyp define.
        Allow Skia to be hardware accelerated on the Mac.

        * public/WebCommon.h:
        If Skia is defined on the Mac, define it in the WebXXX
        interfaces as well.

2011-06-22  Adam Barth  <abarth@webkit.org>

        Rollout 88332.

        * features.gypi:
        * public/WebRuntimeFeatures.h:
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/WebRuntimeFeatures.cpp:

2011-06-20  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Kent Tamura.

        FileChooser should be only created when we need to choose files.
        https://bugs.webkit.org/show_bug.cgi?id=63039

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::runOpenPanel): Changed to use settings.
        (WebKit::ChromeClientImpl::enumerateChosenDirectory): Updated decls.
        * src/ChromeClientImpl.h:

2011-06-21  Tony Chang  <tony@chromium.org>

        Reviewed by Eric Seidel.

        add css parsing of flex()
        https://bugs.webkit.org/show_bug.cgi?id=62050

        * features.gypi: Add a gyp flag (enable_css3_flexbox) for setting ENABLE_CSS3_FLEXBOX.

2011-06-21  Zhenyao Mo  <zmo@google.com>

        Reviewed by Kenneth Russell.

        Implement drawingBufferWidth/drawingBufferHeight in WebGL
        https://bugs.webkit.org/show_bug.cgi?id=58497

        * src/GraphicsContext3DChromium.cpp: Make getInternalFramebufferSize method const.
        (WebCore::GraphicsContext3DInternal::getInternalFramebufferSize):
        (WebCore::GraphicsContext3D::getInternalFramebufferSize):
        * src/GraphicsContext3DInternal.h:

2011-06-21  Dmitry Lomov  <dslomov@google.com>

        Reviewed by Adam Barth.

        https://bugs.webkit.org/show_bug.cgi?id=62653
        [V8][Chromium] Make StringCache in V8 bindings per-isolate

        * src/WebKit.cpp:
        (WebKit::initialize): Initialize V8PerIsolateBindingData eagerly
        * src/WebScriptController.cpp:
        (WebKit::WebScriptController::enableV8SingleThreadMode): StringCache is now per-isolate, so ok in multithreaded contexts.

2011-06-21  Chris Evans  <cevans@chromium.org>

        Reviewed by Darin Fisher.

        Wire in checkIfRunInsecureContent to the chromium WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=63026

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::checkIfRunInsecureContent): add in basic plumbing.
        * src/WebFrameImpl.h:

2011-06-21  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89185.
        http://trac.webkit.org/changeset/89185
        https://bugs.webkit.org/show_bug.cgi?id=63068

        For breaking navigation with inspector opened. (Requested by
        pfeldman on #webkit).

        * src/WebScriptController.cpp:
        (WebKit::WebScriptController::enableV8SingleThreadMode):

2011-06-20  Scott Byer  <scottbyer@chromium.org>

        Reviewed by Adam Barth.

        Smooth scrolling for Chromium, initial patch.
        https://bugs.webkit.org/show_bug.cgi?id=61878

        Add in a default scrolling animator in the platform directory, with a run time enable switch, to provide
        animated / smooth scrolling on platforms and for input devices where it's not provided by the platform, and to
        be easily configurable to what situatuations the animations are provided for. The smooth scrolling code is
        compiled out by default.

        Unit tests ScrollAnimatorNoneTest.cpp

        * WebKit.gypi:
        * features.gypi:
        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setEnableScrollAnimator):
        * src/WebSettingsImpl.h:
        * tests/ScrollAnimatorNoneTest.cpp: Added.
        (MockScrollableArea::MockScrollableArea):
        (MockScrollableArea::scrollAnimatorEnabled):
        (MockScrollAnimatorNone::MockScrollAnimatorNone):
        (MockScrollAnimatorNone::currentX):
        (MockScrollAnimatorNone::currentY):
        (MockScrollAnimatorNone::reset):
        (TEST):
        (ScrollAnimatorNoneTest::ScrollAnimatorNoneTest):
        (ScrollAnimatorNoneTest::SetUp):
        (ScrollAnimatorNoneTest::TearDown):
        (ScrollAnimatorNoneTest::reset):
        (ScrollAnimatorNoneTest::updateDataFromParameters):
        (ScrollAnimatorNoneTest::animateScroll):
        (ScrollAnimatorNoneTest::curveIntegralAt):
        (ScrollAnimatorNoneTest::attackArea):
        (ScrollAnimatorNoneTest::releaseArea):
        (ScrollAnimatorNoneTest::attackCurve):
        (ScrollAnimatorNoneTest::releaseCurve):
        (ScrollAnimatorNoneTest::curveDerivativeAt):
        (ScrollAnimatorNoneTest::curveTestInner):
        (ScrollAnimatorNoneTest::curveTest):
        (TEST_F):

2011-06-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Dimitri Glazkov.

        Several pyauto tests are failing because some infobars
        https://bugs.webkit.org/show_bug.cgi?id=62968

        This function used to evaluate script as if there was a user gesture
        (due to the lack of a source URL). This patch re-introduces the user
        gesture (this time explicitly), which causes the pyauto tests listed in
        http://code.google.com/p/chromium/issues/detail?id=86397 to start
        passing again.  It's unclear whether this forced gesture is needed in
        non-test scenarios.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::executeScriptAndReturnValue):

2011-06-20  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: remove LayoutTestController::setTimelineProfilingEnabled.
        https://bugs.webkit.org/show_bug.cgi?id=62994

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:

2011-06-19  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-18  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Darin Adler.

        Separate concerns of loading file icons and choosing files.
        https://bugs.webkit.org/show_bug.cgi?id=62931

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::loadIconForFiles): Renamed to better reflect the intent.
        * src/ChromeClientImpl.h: Ditto.
        * src/WebIconLoadingCompletionImpl.cpp:
        (WebKit::WebIconLoadingCompletionImpl::WebIconLoadingCompletionImpl): Changed to use FileIconLoader.
        (WebKit::WebIconLoadingCompletionImpl::didLoadIcon): Ditto.
        * src/WebIconLoadingCompletionImpl.h: Dito.

2011-06-18  Yufeng Shen  <miletus@chromium.org>

        Reviewed by Darin Fisher.

        Adding "force" filed to Touch Event
        https://bugs.webkit.org/show_bug.cgi?id=62766

        * public/WebTouchPoint.h:
        (WebKit::WebTouchPoint::WebTouchPoint):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformTouchPointBuilder::PlatformTouchPointBuilder):

2011-06-17  Chris Rogers  <crogers@google.com>

        Unreviewed build fix.

        Build fix - fix chromium shared win builder
        https://bugs.webkit.org/show_bug.cgi?id=62924

        * features.gypi:

2011-06-17  Dmitry Lomov  <dslomov@google.com>

        Reviewed by Adam Barth.

        https://bugs.webkit.org/show_bug.cgi?id=62653
        [V8][Chromium] Make StringCache in V8 bindings per-isolate
        This moves StringCache into V8BindingPerIsolateData.

        * src/WebScriptController.cpp:
        (WebKit::WebScriptController::enableV8SingleThreadMode): StringCache is now per-isolate, so ok in multithreaded contexts.

2011-06-17  Ryosuke Niwa  <rniwa@webkit.org>

        Roll Chromium DEPS.

        * DEPS:

2011-06-17  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89143.
        http://trac.webkit.org/changeset/89143
        https://bugs.webkit.org/show_bug.cgi?id=62912

        Possible Chromeos test breakage (Requested by senorblanco on
        #webkit).

        * src/AsyncFileSystemChromium.cpp:
        (WebCore::AsyncFileSystemChromium::virtualPathToFileSystemURL):
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::virtualPathToFileSystemURL):
        * tests/KURLTest.cpp:
        (ComponentCase::TEST):

2011-06-17  Chris Rogers  <crogers@google.com>

        Reviewed by Tony Chang.

        Enable Web Audio for chromium windows build
        https://bugs.webkit.org/show_bug.cgi?id=62895

        * features.gypi:

2011-06-17  Eric Uhrhane  <ericu@chromium.org>

        Reviewed by Adam Barth.

        [filesystem/Chromium] Filesystem paths need proper URL escaping
        https://bugs.webkit.org/show_bug.cgi?id=62811

        Fix http://code.google.com/p/chromium/issues/detail?id=78860 by making
        KURLChromium.cpp's escaping code actually work.

        Here I added the needed calls to encodeWithURLEscapeSequences.
        * src/AsyncFileSystemChromium.cpp:
        (WebCore::AsyncFileSystemChromium::virtualPathToFileSystemURL):
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::virtualPathToFileSystemURL):

        Here I updated the test to reflect the new functionality in
        encodeWithURLEscapeSequences.
        * tests/KURLTest.cpp:

2011-06-16  Bill Budge  <bbudge@chromium.org>

        Reviewed by Adam Barth.

        The AssociatedURLLoader returns URL access errors synchronously. Use a timer to return such errors asynchronously. Also add unit tests for successful loads, same-origin restriction by default, and successful cross-origin loads.
        https://bugs.webkit.org/show_bug.cgi?id=60059

        * WebKit.gyp:
        * WebKit.gypi:
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::ClientAdapter::enableErrorNotifications):
        (WebKit::AssociatedURLLoader::ClientAdapter::notifyError):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        * tests/AssociatedURLLoaderTest.cpp: Added.
        (WebKit::TestWebFrameClient::cancelledError):
        (WebKit::AssociatedURLLoaderTest::AssociatedURLLoaderTest):
        (WebKit::AssociatedURLLoaderTest::SetUp):
        (WebKit::AssociatedURLLoaderTest::TearDown):
        (WebKit::AssociatedURLLoaderTest::serveRequests):
        (WebKit::AssociatedURLLoaderTest::createAssociatedURLLoader):
        (WebKit::AssociatedURLLoaderTest::willSendRequest):
        (WebKit::AssociatedURLLoaderTest::didSendData):
        (WebKit::AssociatedURLLoaderTest::didReceiveResponse):
        (WebKit::AssociatedURLLoaderTest::didDownloadData):
        (WebKit::AssociatedURLLoaderTest::didReceiveData):
        (WebKit::AssociatedURLLoaderTest::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoaderTest::didFinishLoading):
        (WebKit::AssociatedURLLoaderTest::didFail):
        (WebKit::TEST_F):

2011-06-16  Sailesh Agrawal  <sail@chromium.org>

        Reviewed by Mihai Parparita.

        [Chromium] Overlay scrollbars leave glitches on web content
        https://bugs.webkit.org/show_bug.cgi?id=62383

        Fix glitches when scrolling with overlay scrollbars. The problem was that the render widget was copying the scrollbars when scrolling. Fix was to intersect the clip rect with the scroll rect. This is the same thing that Safari does (see WebChromeClient::scroll).

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::scroll):

2011-06-16  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-16  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Fisher.

        [Chromium] Prepare to move some APIs from WebFrame to WebDocument
        https://bugs.webkit.org/show_bug.cgi?id=62781

        This patch adds a WEBKIT_FRAME_TO_DOCUMENT_API_MOVE ifdef to prepare
        for moving a number of Document-specific APIs from WebFrame to
        WebDocument.  This ifdef will allow us to move these APIs without
        disrupting the consumers of the APIs (too much).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-06-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89026.
        http://trac.webkit.org/changeset/89026
        https://bugs.webkit.org/show_bug.cgi?id=62804

        These patches were likely correct.  I'll investigate the
        browser_test failures. (Requested by abarth on #webkit).

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::loadFrameRequest):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::performMediaPlayerAction):

2011-06-16  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: Cache XHR content in backend, do not use initialContentSet for XHRs.
        https://bugs.webkit.org/show_bug.cgi?id=61205

        Added inspector backend cache for XHR content.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):

2011-06-16  Tommy Widenflycht  <tommyw@google.com>

        Reviewed by Tony Gentilcore.

        MediaStream API: Runtime enabled features
        https://bugs.webkit.org/show_bug.cgi?id=62798

        Add the WebRuntimeFeatures API for Media Streams and enable the feature by default in DumpRenderTree.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableMediaStream):
        (WebKit::WebRuntimeFeatures::isMediaStreamEnabled):

2011-06-16  Torsten Kurbad  <gentoo@tk-webart.de>

        Reviewed by Eric Seidel.

        Add support for sys.platform == 'linux3' by relaxing 
        conditional statements and/or extending lookup dicts.
        This way, Linux kernels >=3.0-rc1 get supported in the
        build process.
        https://bugs.webkit.org/show_bug.cgi?id=62730

        * gyp_webkit:

2011-06-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r89025.
        http://trac.webkit.org/changeset/89025
        https://bugs.webkit.org/show_bug.cgi?id=62799

        "Some layout tests fail" (Requested by yurys on #webkit).

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):

2011-06-16  Vitaly Repeshko  <vitalyr@chromium.org>

        Unreviewed.

        Revert Adam's user gesture patch series r89002, r89005, r89007, r89018
        https://bugs.webkit.org/show_bug.cgi?id=62796

        The patches broke chromium browser tests.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::loadFrameRequest):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::performMediaPlayerAction):

2011-06-16  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: Cache XHR content in backend, do not use initialContentSet for XHRs.
        https://bugs.webkit.org/show_bug.cgi?id=61205

        Added inspector backend cache for XHR content.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):

2011-06-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Remove HTMLVideoElement::processingUserGesture
        https://bugs.webkit.org/show_bug.cgi?id=62784

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::performMediaPlayerAction):

2011-06-15  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Pavel Feldman.

        WebInspector [Chromium]: Make heap snapshots UI more responsive.
        https://bugs.webkit.org/show_bug.cgi?id=62360

        Two changes have been made:
          - when we request elements, sort array only partially;
          - when populating children, do it in batches;

        * WebKit.gyp:

2011-06-15  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Remove Event::fromUserGesture
        https://bugs.webkit.org/show_bug.cgi?id=62778

        This call site is not definite about there not being a user gesture.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::loadFrameRequest):

2011-06-15  Darin Adler  <darin@apple.com>

        Reviewed by Adam Barth.

        Remove obsolete LOOSE_OWN_PTR code
        https://bugs.webkit.org/show_bug.cgi?id=59909

        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::StorageAreaProxy): Use adoptPtr
        instead of LOOSE_OWN_PTR.
        * src/StorageNamespaceProxy.cpp:
        (WebCore::StorageNamespaceProxy::StorageNamespaceProxy): Ditto.

2011-06-15  Andrey Kosyakov  <caseq@chromium.org>

       Unreviewed, rolled out r88937 (broke build on mac)

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):

2011-06-15  Pavel Feldman  <pfeldman@chromium.org>

        Not reviewed: [Chromium] one line background color fix for inspector.

        * src/js/devTools.css:
        (body.detached.platform-mac-snowleopard #toolbar):
        (body.detached.platform-mac-snowleopard.inactive #toolbar):

2011-06-14  Hans Wennborg  <hans@chromium.org>

        Reviewed by Tony Gentilcore.

        IndexedDB: LevelDB doesn't do incognito mode; fall back to SQLite.
        https://bugs.webkit.org/show_bug.cgi?id=62633

        LevelDB does not support in-memory databases. Fall back to SQLite
        for incognito mode browsing. This will be tested by browser_tests
        in Chromium.

        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):

2011-06-10  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Dmitry Titov.

        [Chromium] Worker object may be garbage collected if it doesn't send any messages
        https://bugs.webkit.org/show_bug.cgi?id=62446

        Assume that WorkerContext has pending activity before explicit notification
        is received from it. It prevents worker object from being collected before
        the first message from its context is received.

        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::startWorkerContext):
        (WebKit::WebWorkerClientImpl::startWorkerContextInternal):
        (WebKit::WebWorkerClientImpl::startWorkerContextTask):
        * src/WebWorkerClientImpl.h:

2011-06-14  Eric Uhrhane  <ericu@chromium.org>

        Reviewed by Darin Fisher.

        Clean up filesystem base path code.
        https://bugs.webkit.org/show_bug.cgi?id=60218

        Change a bunch of url-held-in-a-string parameters into real KURLS and
        WebURLs.  Also add a #define to make it easier to stage this change, as
        it involves both Chromium and WebKit changes that would ideally be 
        simultaneous.

        No new tests--no change in functionality.

        * public/WebFileSystem.h:
        * public/WebFileSystemCallbacks.h:
        * public/WebFrame.h:
        * src/AsyncFileSystemChromium.cpp:
        * src/AsyncFileSystemChromium.h:
        * src/WebFileSystemCallbacksImpl.cpp:
        * src/WebFileSystemCallbacksImpl.h:
        * src/WebFrameImpl.cpp:
        * src/WorkerAsyncFileSystemChromium.cpp:
        * src/WorkerAsyncFileSystemChromium.h:
        * src/WorkerAsyncFileWriterChromium.cpp:
        * src/WorkerAsyncFileWriterChromium.h:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        * src/WorkerFileSystemCallbacksBridge.h:
        * src/WorkerFileWriterCallbacksBridge.cpp:
        * src/WorkerFileWriterCallbacksBridge.h:

2011-06-14  James Robinson  <jamesr@chromium.org>

        Reviewed by Stephen White.

        [chromium] Compositor shader initialization is inefficient
        https://bugs.webkit.org/show_bug.cgi?id=62618

        Add a TRACE_EVENT() around initial compositor initialization.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2011-06-14  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Fisher.

        WebFrame::url() should use the one true URL
        https://bugs.webkit.org/show_bug.cgi?id=62610

        The Document's URL is the one true URL.  Thou shalt have no URLs before
        Document::url().

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::url):

2011-06-13  James Simonsen  <simonjam@chromium.org>

        [Chromium] Unreviewed, rolled DEPS.

        * DEPS:

2011-06-13  James Simonsen  <simonjam@chromium.org>

        Reviewed by James Robinson.

        [Chromium] Implement monotonicallyIncreasingClock()
        https://bugs.webkit.org/show_bug.cgi?id=62162

        * public/WebKitClient.h:
        (WebKit::WebKitClient::monotonicallyIncreasingTime): Added.
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::monotonicallyIncreasingTime): Added.

2011-06-13  Jian Li  <jianli@chromium.org>

        Reviewed by David Levin.

        [Chromium] WebNotification should check if ScriptExecutionContext is gone
        before dispatching events.
        https://bugs.webkit.org/show_bug.cgi?id=62592

        * public/WebNotification.h:
        * src/WebNotification.cpp:
        (WebKit::WebNotification::dispatchDisplayEvent):
        (WebKit::WebNotification::dispatchErrorEvent):
        (WebKit::WebNotification::dispatchCloseEvent):
        (WebKit::WebNotification::dispatchClickEvent):
        (WebKit::WebNotification::dispatchEvent): Added a helper method to check
        the context and dispatch an event.

2011-06-13  Dmitry Lomov  <dslomov@google.com>

        Reviewed by Adam Barth.

        https://bugs.webkit.org/show_bug.cgi?id=62345
        Use per-isolate embedder data instead of statics for caches in bindings.
        This is a prerequisite for more than one v8 isolate per process.

        * tests/IDBBindingUtilitiesTest.cpp:
        (WebCore::TEST):

2011-06-13  Lei Zhang  <thestig@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] Add a WebSetting to control printing backgrounds
        https://bugs.webkit.org/show_bug.cgi?id=62423

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setShouldPrintBackgrounds):
        * src/WebSettingsImpl.h:

2011-06-13  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add accessors for selectionStart and selectionEnd.
        https://bugs.webkit.org/show_bug.cgi?id=62596

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::selectionEnd):
        (WebKit::WebAccessibilityObject::selectionStart):

2011-06-13  Adam Barth  <abarth@webkit.org>

        Reviewed by Nate Chapin.

        Factor IconController out of FrameLoader
        https://bugs.webkit.org/show_bug.cgi?id=62509

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::iconURLs):

2011-06-12  Adam Barth  <abarth@webkit.org>

        Reviewed by Alexey Proskuryakov.

        Rename FrameLoaderClient::interruptForPolicyChangeError to use the past tense
        https://bugs.webkit.org/show_bug.cgi?id=62516

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::interruptedForPolicyChangeError):
        * src/FrameLoaderClientImpl.h:

2011-06-12  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Remove FrameLoader::isProcessingUserGesture
        https://bugs.webkit.org/show_bug.cgi?id=62519

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::isProcessingUserGesture):

2011-06-10  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by James Robinson.

        Web Inspector: [Chromium] DevTools does not highlight elements when accelerated compositing is on.
        https://bugs.webkit.org/show_bug.cgi?id=62149

        Added page overlay for inspector highlight support.

        * WebKit.gyp:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::attachRootGraphicsLayer):
        * src/PageOverlay.cpp: Added.
        (WebKit::PageOverlay::create):
        (WebKit::PageOverlay::PageOverlay):
        (WebKit::OverlayGraphicsLayerClientImpl::create):
        (WebKit::OverlayGraphicsLayerClientImpl::~OverlayGraphicsLayerClientImpl):
        (WebKit::OverlayGraphicsLayerClientImpl::notifyAnimationStarted):
        (WebKit::OverlayGraphicsLayerClientImpl::notifySyncRequired):
        (WebKit::OverlayGraphicsLayerClientImpl::paintContents):
        (WebKit::OverlayGraphicsLayerClientImpl::showDebugBorders):
        (WebKit::OverlayGraphicsLayerClientImpl::showRepaintCounter):
        (WebKit::OverlayGraphicsLayerClientImpl::OverlayGraphicsLayerClientImpl):
        (WebKit::PageOverlay::clear):
        (WebKit::PageOverlay::update):
        (WebKit::PageOverlay::paintWebFrame):
        (WebKit::PageOverlay::invalidateWebFrame):
        * src/PageOverlay.h: Added.
        (WebKit::PageOverlay::~PageOverlay):
        (WebKit::PageOverlay::setClient):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::paintPageOverlay):
        (WebKit::WebDevToolsAgentImpl::highlight):
        (WebKit::WebDevToolsAgentImpl::hideHighlight):
        * src/WebDevToolsAgentImpl.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::paintWithContext):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setPageOverlayClient):
        (WebKit::WebViewImpl::setOverlayLayer):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        (WebKit::WebViewImpl::setRootPlatformLayer):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::reallocateRenderer):
        * src/WebViewImpl.h:
        (WebKit::WebViewImpl::pageOverlay):

2011-06-10  David Levin  <levin@chromium.org>

        Reviewed by Dmitry Titov.

        Fetching a Worker with url that isn't allowed from a file based test causes DRT to crash.
        https://bugs.webkit.org/show_bug.cgi?id=62469

        Test: fast/workers/worker-crash-with-invalid-location.html

        * src/SharedWorkerRepository.cpp:
        (WebCore::SharedWorkerScriptLoader::SharedWorkerScriptLoader): Changed to using the RefCounted version
        of WorkerScriptLoader.
        (WebCore::SharedWorkerScriptLoader::load): Rearranged calls as done in similar places,
        which allows for SharedWorkerScriptLoader to be deleted during the laodAsynchronously call
        and for unsetPendingActivity to be called.
        (WebCore::SharedWorkerScriptLoader::notifyFinished): Changed to using the RefCounted version
        of WorkerScriptLoader.

2011-06-10  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-10  Tony Chang  <tony@chromium.org>

        Reviewed by Dimitri Glazkov.

        [chromium] make features.gypi the same as features_override.gypi
        https://bugs.webkit.org/show_bug.cgi?id=62399

        Make the file the same as chromium's features_override.gypi so we
        can remove features_override.gypi in chromium.

        Remove ENABLE_DATAGRID=0 since the define is gone and remove
        ENABLE_FULLSCREEN_API=1 since we want to disable it.

        * features.gypi:

2011-06-09  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Dmitry Titov.

        [Chromium] Worker object may be garbage collected even if it has message handlers
        https://bugs.webkit.org/show_bug.cgi?id=62292

        I'd like to convert the test case into a layout test but I don't see yet
        how to do this so that the test isn't too slow and reliable. The problem
        with test is that full-GC needs to be triggered right after
        WebWorkerClientImpl::confirmMessageFromWorkerObject is called and there
        is no way to hook WebWorkerClientImpl::confirmMessageFromWorkerObject from JavaScript.
        So no test for now.

        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::confirmMessageFromWorkerObject):
        (WebKit::WebWorkerClientImpl::confirmMessageFromWorkerObjectTask): update worker context pending
        activity state every time a message is confirmed since the message may have created a new activity.
        * src/WebWorkerClientImpl.h:

2011-06-09  James Kozianski  <koz@chromium.org>

        Unreviewed, rolling out r88466.
        http://trac.webkit.org/changeset/88466
        https://bugs.webkit.org/show_bug.cgi?id=60059

        Broke PPAPITest.URLLoader test on the chromium bots

        * WebKit.gyp:
        * WebKit.gypi:
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        * tests/AssociatedURLLoaderTest.cpp: Removed.

2011-06-09  James Robinson  <jamesr@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] webkitRequestFullscreen exposed to web even when feature is disabled
        https://bugs.webkit.org/show_bug.cgi?id=62397

        Remove ENABLE_FULLSCREEN_API define from chromium builds since this exposes the webkitRequestFullscreen function
        even when the runtime setting was disabled.

        * features.gypi:

2011-06-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r88486.
        http://trac.webkit.org/changeset/88486
        https://bugs.webkit.org/show_bug.cgi?id=62409

        Broke chromium-win compile (Requested by jamesr on #webkit).

        * public/WebData.h:
        * public/WebPageSerializer.h:
        * src/WebData.cpp:
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serialize):
        (WebKit::WebPageSerializer::serializeToMHTML):

2011-06-09  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Darin Fisher.

        Page serializer APIs now use WebData instead of fetching the entire
        resource contents.
        https://bugs.webkit.org/show_bug.cgi?id=61908

        * public/WebData.h:
        * public/WebPageSerializer.h:
        * src/WebData.cpp:
        (WebKit::WebData::getSomeData):
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serialize):
        (WebKit::WebPageSerializer::serializeToMHTML):

2011-06-09  Bill Budge  <bbudge@chromium.org>

        Reviewed by Adam Barth.

        The AssociatedURLLoader returns URL access errors synchronously. Use a timer to return such errors asynchronously. Also add unit tests for successful loads, same-origin restriction by default, and successful cross-origin loads.
        https://bugs.webkit.org/show_bug.cgi?id=60059

        * WebKit.gyp:
        * WebKit.gypi:
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::ClientAdapter::enableErrorNotifications):
        (WebKit::AssociatedURLLoader::ClientAdapter::notifyError):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        * tests/AssociatedURLLoaderTest.cpp: Added.
        (WebKit::TestWebFrameClient::cancelledError):
        (WebKit::AssociatedURLLoaderTest::AssociatedURLLoaderTest):
        (WebKit::AssociatedURLLoaderTest::SetUp):
        (WebKit::AssociatedURLLoaderTest::TearDown):
        (WebKit::AssociatedURLLoaderTest::serveRequests):
        (WebKit::AssociatedURLLoaderTest::createAssociatedURLLoader):
        (WebKit::AssociatedURLLoaderTest::willSendRequest):
        (WebKit::AssociatedURLLoaderTest::didSendData):
        (WebKit::AssociatedURLLoaderTest::didReceiveResponse):
        (WebKit::AssociatedURLLoaderTest::didDownloadData):
        (WebKit::AssociatedURLLoaderTest::didReceiveData):
        (WebKit::AssociatedURLLoaderTest::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoaderTest::didFinishLoading):
        (WebKit::AssociatedURLLoaderTest::didFail):
        (WebKit::TEST_F):

2011-06-09  Nico Weber  <thakis@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Make a few destructors private.
        https://bugs.webkit.org/show_bug.cgi?id=62341

        No intended functionality change.

        * src/NotificationPresenterImpl.cpp:
        (WebKit::VoidCallbackClient::~VoidCallbackClient):
        * src/WebTextCheckingCompletionImpl.h:
        (WebKit::WebTextCheckingCompletionImpl::~WebTextCheckingCompletionImpl):
        * src/WebURLRequest.cpp:
        (WebKit::WebURLRequestPrivateImpl::~WebURLRequestPrivateImpl):
        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponsePrivateImpl::~WebURLResponsePrivateImpl):

2011-06-09  James Robinson  <jamesr@chromium.org>

        Fix chromium build on build.webkit.org builders.

        * features.gypi:

2011-06-08  Justin Novosad  <junov@chromium.org>

        Reviewed by James Robinson.

        [Chromium] Crash when closing a tab with accelerated 2d canvas
        https://bugs.webkit.org/show_bug.cgi?id=62324
        In GraphicsContext3DInternal::setContextLostCallback we are passing a
        non-refcounted ptr to a refcounted member. this can cause an access
        violation after the destruction of GraphicsContext3D.  Upon destruction
        a null callback is sent to setContextLostCallback, which is good
        except that it gets placed in a non-null adapter object.  This fix
        prevents the creation of the adapter when the callback is null, thus
        preventing a later crash.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContextLostCallbackAdapter::create):

2011-06-08  James Robinson  <jamesr@chromium.org>

        Hopefully last change to features.gypi - set ENABLE_REGISTER_PROTOCOL_HANDLER based off of the the variable set
        in chromium's common.gypi. Should green up the chromium linux tester on build.webkit.org.

        * features.gypi:

2011-06-08  James Robinson  <jamesr@chromium.org>

        Set ENABLE_REGISTER_PROTOCOL_HANDLER=1 for chromium. I didn't mean to turn that off...

        * features.gypi:

2011-06-08  James Robinson  <jamesr@chromium.org>

        [chromium] Update the chromium-within-WebKit revision to r88481
        https://bugs.webkit.org/show_bug.cgi?id=62353

        * DEPS:

2011-06-08  Sailesh Agrawal  <sail@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] Add stubs to WebWidget
        https://bugs.webkit.org/show_bug.cgi?id=62263

        This change add stub implementations for all WebWidget functions. Having stub methods should make it easier to add new functions to the class without breaking Chromium.

        * public/WebWidget.h:
        (WebKit::WebWidget::close):
        (WebKit::WebWidget::size):
        (WebKit::WebWidget::resize):
        (WebKit::WebWidget::animate):
        (WebKit::WebWidget::layout):
        (WebKit::WebWidget::paint):
        (WebKit::WebWidget::composite):
        (WebKit::WebWidget::themeChanged):
        (WebKit::WebWidget::handleInputEvent):
        (WebKit::WebWidget::mouseCaptureLost):
        (WebKit::WebWidget::setFocus):
        (WebKit::WebWidget::setComposition):
        (WebKit::WebWidget::confirmComposition):
        (WebKit::WebWidget::compositionRange):
        (WebKit::WebWidget::textInputType):
        (WebKit::WebWidget::caretOrSelectionBounds):
        (WebKit::WebWidget::selectionRange):
        (WebKit::WebWidget::caretOrSelectionRange):
        (WebKit::WebWidget::setTextDirection):
        (WebKit::WebWidget::isAcceleratedCompositingActive):

2011-06-08  Tom Sepez  <tsepez@chromium.org>

        Reviewed by Adam Barth.

        Add new permission callbacks for mixed content blocking.
        https://bugs.webkit.org/show_bug.cgi?id=61946

        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowDisplayingInsecureContent):
        (WebKit::WebPermissionClient::allowRunningInsecureContent):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowDisplayingInsecureContent):
        (WebKit::FrameLoaderClientImpl::allowRunningInsecureContent):
        * src/FrameLoaderClientImpl.h:

2011-06-08  Ryosuke Niwa  <rniwa@webkit.org>

        Added new entries for skia/third_party/glu.

        * DEPS:

2011-06-08  Ryosuke Niwa  <rniwa@webkit.org>

        Rolled DEPS.

        * DEPS:

2011-06-08  Ryan Sleevi  <rsleevi@chromium.org>

        Reviewed by Tony Chang.

        Suppress C++0x compat warnings when compiling Chromium port with GCC 4.6

        Compiling Chromium port under GCC 4.6 produces warnings about nullptr
        https://bugs.webkit.org/show_bug.cgi?id=62242

        * WebKit.gyp:

2011-06-08  Greg Simon  <gregsimon@chromium.org>

        Reviewed by Dimitri Glazkov.

        Control Indexeddb backends from LayoutTestController
        https://bugs.webkit.org/show_bug.cgi?id=61000

        * public/WebIDBFactory.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactory::setOverrideBackingStoreType):
        (WebKit::WebIDBFactory::setTemporaryDatabaseFolder):
        (WebKit::WebIDBFactoryImpl::open):

2011-06-08  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add a method to return the line breaks for any element with
        multiline text content.
        https://bugs.webkit.org/show_bug.cgi?id=62236

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::lineBreaks):

2011-06-08  Ilya Tikhonovsky  <loislo@chromium.org>

        Unreviewed chromium build fix for r88332.

        * src/WebRuntimeFeatures.cpp:

2011-06-08  Hironori Bono  <hbono@chromium.org>

        Reviewed by Brent Fulgham.

        Add SpellCheck API
        https://bugs.webkit.org/show_bug.cgi?id=59693

        This change adds two SpellCheck API functions (addSpellcheckRange and
        removeSpellcheckRange) and one attribute (spellcheckRange) discussed in
        the public-webapps ML. This change is currently available only on Chromium.

        * features.gypi:
        * public/WebRuntimeFeatures.h:
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableSpellCheckAPI):
        (WebKit::WebRuntimeFeatures::isSpellCheckAPIEnabled):

2011-06-07  James Kozianski  <koz@chromium.org>

        [Chromium] Unreviewed. Disable SelectItemEvenFire that fails on
        chromium canaries.

        * tests/PopupMenuTest.cpp:
        (WebKit::TEST_F):

2011-06-07  Robert Kroeger  <rjkroege@chromium.org>

        Reviewed by Adam Barth.

        [chromium] Add a basic gesture recognizer to the Chromium platform
        https://bugs.webkit.org/show_bug.cgi?id=54417

        Added unit tests for the basic chromium platform gesture recognizer.

        * tests/InnerGestureRecognizerTest.cpp: Added.
        (WebCore::InspectableInnerGestureRecognizer::InspectableInnerGestureRecognizer):
        (WebCore::InspectableInnerGestureRecognizer::signature):
        (WebCore::InspectableInnerGestureRecognizer::firstTouchPosition):
        (WebCore::InspectableInnerGestureRecognizer::setFirstTouchTime):
        (WebCore::InspectableInnerGestureRecognizer::firstTouchTime):
        (WebCore::InspectableInnerGestureRecognizer::setLastTouchTime):
        (WebCore::InspectableInnerGestureRecognizer::lastTouchTime):
        (WebCore::InspectableInnerGestureRecognizer::edgeFunction):
        (WebCore::InspectableInnerGestureRecognizer::updateValues):
        (WebCore::InspectableInnerGestureRecognizer::addEdgeFunction):
        (WebCore::BuildablePlatformTouchPoint::setX):
        (WebCore::BuildablePlatformTouchPoint::setY):
        (WebCore::BuildablePlatformTouchPoint::BuildablePlatformTouchPoint):
        (WebCore::TestGestureRecognizer::TestGestureRecognizer):
        (WebCore::TestGestureRecognizer::SetUp):
        (WebCore::TestGestureRecognizer::TearDown):
        (WebCore::TEST_F):

2011-06-07  Vangelis Kokkevis  <vangelis@chromium.org>

        Reviewed by James Robinson.

        Disable compositing for RTL pages in the RenderLayerCompositor rather
        than later on in the WebViewImpl.
        https://bugs.webkit.org/show_bug.cgi?id=62246

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::allowedCompositingTriggers):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::layout):
        (WebKit::WebViewImpl::setRootGraphicsLayer):

2011-06-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r88254, r88262, and r88268.
        http://trac.webkit.org/changeset/88254
        http://trac.webkit.org/changeset/88262
        http://trac.webkit.org/changeset/88268
        https://bugs.webkit.org/show_bug.cgi?id=62234

        I fail at changing features.gypi (Requested by abarth on
        #webkit).

        * features.gypi:

2011-06-07  Adam Barth  <abarth@webkit.org>

        Reviewed by Tony Chang.

        Fix "branding" issue in features.gypi
        https://bugs.webkit.org/show_bug.cgi?id=62229

        Apparently we need to move the conditional block further out of the
        nesting in order to see the branding variable.  This patch also remove
        the dummy branding variable I added to get the buildbot building again.

        * features.gypi:

2011-06-07  Adam Barth  <abarth@webkit.org>

        Attempt to fix the cr-win build.

        * features.gypi:

2011-06-07  Adam Barth  <abarth@webkit.org>

        Reviewed by Dimitri Glazkov.

        Synchronize features.gypi and features_override.gypi in preparation for removing features_override.gypi
        https://bugs.webkit.org/show_bug.cgi?id=62135

        After this patch is rolled into Chromium, we should be able to delete
        features_override.gyp downstream.  Once we do that, we can simplify
        this file somewhat by removing at least on level of nesting.

        * features.gypi:

2011-06-03  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: correctly handle disconnect from worker when script execution is paused
        https://bugs.webkit.org/show_bug.cgi?id=62019

        Dispatch disconnecFrontend message in debugger task mode to make sure
        it is processed even if execution is paused.

        * src/WebWorkerImpl.cpp:
        (WebKit::WebWorkerImpl::detachDevTools):
        (WebKit::WebWorkerImpl::dispatchDevToolsMessage):

2011-06-07  Naoki Takano  <takano.naoki@gmail.com>

        Reviewed by Kent Tamura.

        [Chromium] Click event is not fired for a menulist <select>
        https://bugs.webkit.org/show_bug.cgi?id=60563

        * tests/PopupMenuTest.cpp:
        (WebKit::TestPopupMenuClient::TestPopupMenuClient): Initialize m_node.
        (WebKit::TestPopupMenuClient::valueChanged): To fire 'change' event, forward the event like RenderMenuList.
        (WebKit::TestPopupMenuClient::itemIsEnabled): Change to return true or false according to disabled item or not.
        (WebKit::TestPopupMenuClient::setDisabledIndex): Set disabled index to simulate disabled item.
        (WebKit::TestPopupMenuClient::setFocusedNode): Set focused node to dispatch the event.
        (WebKit::SelectPopupMenuTest::SelectPopupMenuTest): Add baseURL.
        (WebKit::SelectPopupMenuTest::TearDown): Add UnregisterAllMockedURLs() call.
        (WebKit::SelectPopupMenuTest::registerMockedURLLoad): To simulate html load, call RegisterMockedURL().
        (WebKit::SelectPopupMenuTest::serveRequests): Call ServeAsynchronousMockedRequests().
        (WebKit::SelectPopupMenuTest::loadFrame): Simulate load frame with url string.
        (WebKit::TEST_F): Implement SelectItemEventFire, SelectItemKeyEvent, SelectItemRemoveSelectOnChange and SelectItemRemoveSelectOnChange.
        * tests/data/select_event.html: Added for SelectItemEventFire and SelectItemKeyEvent.
        * tests/data/select_event_remove_on_change.html: Added SelectItemRemoveSelectOnChange.
        * tests/data/select_event_remove_on_click.html: Added SelectItemRemoveSelectOnChange.
        * WebKit.gyp: Added PopupMenuTest.cpp. Because webkit_support dependency is added, we can't build PopupMenuTest.cpp with Chromium-win (shared) configuration.

2011-06-06  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make WebViewImpl's destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62155

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/WebViewImpl.h:

2011-06-06  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Delete dead clipboard code.
        https://bugs.webkit.org/show_bug.cgi?id=62113

        * src/WebDragData.cpp:

2011-06-06  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make WebURLRequestPrivateImpl's and WebURLResponsePrivateImpl's destructors virtual
        https://bugs.webkit.org/show_bug.cgi?id=62148

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/WebURLRequest.cpp:
        (WebKit::WebURLRequestPrivateImpl::~WebURLRequestPrivateImpl):
        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponsePrivateImpl::~WebURLResponsePrivateImpl):

2011-06-06  Shishir Agrawal  <shishir@chromium.org>

        Reviewed by Tony Gentilcore.

        Add a "prerender" state for page visibility.
        https://bugs.webkit.org/show_bug.cgi?id=62062

        * public/WebPageVisibilityState.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setVisibilityState):

2011-06-06  Nico Weber  <thakis@chromium.org>

        Reviewed by Dimitri Glazkov.

        webkit/glue/webmediaplayer_impl.cc deletes an object of type
        WebVideoFrame, which means this patch fixes a real bug, not just
        a theoretical one.

        [chromium] Give WebVideoFrame a virtual destructor
        https://bugs.webkit.org/show_bug.cgi?id=61742

        * public/WebVideoFrame.h:
        (WebKit::WebVideoFrame::~WebVideoFrame):

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make ResourceHandleInternal's destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62073

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::~ResourceHandleInternal):

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make ChromePrintContext's destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62076

        Since WebFrameImpl's m_printContext is a OnwPtr<ChromePrintContext>
        that is dynamically set to either a ChromePrintContext or a
        ChromePluginPrintContext, this fixes an actual bug.

        * src/WebFrameImpl.cpp:
        (WebKit::ChromePrintContext::~ChromePrintContext):
        (WebKit::ChromePluginPrintContext::~ChromePluginPrintContext):

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make WebTextCheckingCompletionImpl's destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62074

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/WebTextCheckingCompletionImpl.h:
        (WebKit::WebTextCheckingCompletionImpl::~WebTextCheckingCompletionImpl):

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make PlatformMessagePortChannel's destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62072

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/PlatformMessagePortChannel.h:

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Give VoidCallbackClient a virtual destructor
        https://bugs.webkit.org/show_bug.cgi?id=62067

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/NotificationPresenterImpl.cpp:
        (WebKit::VoidCallbackClient::~VoidCallbackClient):

2011-06-04  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make WebFrameImpl destructor virtual
        https://bugs.webkit.org/show_bug.cgi?id=62065

        This is _not_ to fix a real bug, just to make clang's
        -Wdelete-non-virtual-dtor happy. As discussed at
        http://codereview.chromium.org/7094005/, we prefer making leaf class
        destructors virtual over making the leaf classes final.

        * src/WebFrameImpl.h:

2011-06-03  Philippe Beauchamp  <philippe.beauchamp@gmail.com>

        Reviewed by Dimitri Glazkov.

        Add the feature "Add as search engine..." in a search text field context menu for chromium
        https://bugs.webkit.org/show_bug.cgi?id=47980

        * public/WebContextMenuData.h:
        * public/WebSearchableFormData.h:
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/WebSearchableFormData.cpp:
        (WebKit::WebSearchableFormData::WebSearchableFormData):

2011-06-03  Naoki Takano  <takano.naoki@gmail.com>

        Reviewed by Eric Seidel.

        [Chromium] Call setToolTipText() in WebPopupMenuImpl mouse move handler to show tool tip in select popup window.
        https://bugs.webkit.org/show_bug.cgi?id=61260
        http://code.google.com/p/chromium/issues/detail?id=12721

        * public/WebMenuItemInfo.h: Add toolTip.
        * public/WebViewClient.h: Remove setToolTipText().
        * public/WebWidgetClient.h: Add setTooTipText().
        (WebKit::WebWidgetClient::setToolTipText):
        * src/ExternalPopupMenu.cpp:
        (WebKit::ExternalPopupMenu::getPopupMenuInfo): Add popupItem.toolTip set.
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::MouseMove): Call setToolTipText().

2011-06-03  Hans Wennborg  <hans@chromium.org>

        Reviewed by Steve Block.

        IndexedDB: Clean-up use of INT64_MAX in LevelDB back-end
        https://bugs.webkit.org/show_bug.cgi?id=62009

        Don't use INT64_MAX, use the various encodeMaxKey() functions instead.

        * tests/IDBLevelDBCodingTest.cpp:
        (IDBLevelDBCoding::TEST):

2011-06-03  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: [Chromium] cpu-profiler-profiling layout test is flaky on Linux Debug.
        https://bugs.webkit.org/show_bug.cgi?id=61533

        Skip cpu-profiler-profiling in debug, implement a fast headless alternative.

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::setJavaScriptProfilingEnabled):
        * src/WebDevToolsAgentImpl.h:

2011-06-02  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: add an option for automatically attaching to new workers
        https://bugs.webkit.org/show_bug.cgi?id=61930

        Notification about worker context termination are now sent to the inspector.

        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::terminateWorkerContext):
        (WebKit::WebWorkerClientImpl::disconnectFromInspector):
        (WebKit::WebWorkerClientImpl::workerContextDestroyed):

2011-06-02  Aaron Colwell  <acolwell@chromium.org>

        Reviewed by David Levin.

        Add mediaTimeForTimeValue() implementation.
        https://bugs.webkit.org/show_bug.cgi?id=61555

        * public/WebMediaPlayer.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::mediaTimeForTimeValue):
        * src/WebMediaPlayerClientImpl.h:

2011-06-02  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Adam Barth.

        Adding MHTML generation support to MHTMLArchive.
        https://bugs.webkit.org/show_bug.cgi?id=7169

        * public/WebPageSerializer.h:
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serializeToMHTML):

2011-06-02  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Darin Adler.

        Add build logistics and plumbing for window.internals object.
        https://bugs.webkit.org/show_bug.cgi?id=60313

        * WebKit.gyp: Added linking new webkit_test_support library.
        * public/WebTestingSupport.h: Added.
        * src/WebTestingSupport.cpp: Added.

2011-06-02  Aaron Colwell  <acolwell@chromium.org>

        Reviewed by David Levin.

        Update chromium version
        https://bugs.webkit.org/show_bug.cgi?id=61555

        * DEPS:

2011-06-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87920.
        http://trac.webkit.org/changeset/87920
        https://bugs.webkit.org/show_bug.cgi?id=61943

        This patch does not build in Win Builder (dbg)(shared)
        downstream (Requested by abarth|gardener on #webkit).

        * tests/PopupMenuTest.cpp:
        (WebKit::TestPopupMenuClient::TestPopupMenuClient):
        (WebKit::TestPopupMenuClient::valueChanged):
        (WebKit::TestPopupMenuClient::itemIsEnabled):
        (WebKit::SelectPopupMenuTest::TearDown):
        * tests/data/popup/select_event.html: Removed.
        * tests/data/popup/select_event_remove_on_change.html: Removed.
        * tests/data/popup/select_event_remove_on_click.html: Removed.

2011-06-02  Dimitri Glazkov  <dglazkov@chromium.org>

        Unreviewed, rolling out r87926.
        http://trac.webkit.org/changeset/87926
        https://bugs.webkit.org/show_bug.cgi?id=60313

        Fails to find WebCoreTestSupport.dylib on bots.

        * WebKit.gyp:
        * public/WebTestingSupport.h: Removed.
        * src/WebTestingSupport.cpp: Removed.

2011-06-02  Aaron Colwell  <acolwell@chromium.org>

        Reviewed by Dimitri Glazkov.

        Bring gyp_webkit up to date with changes made to
        gyp_chromium so chromium_rev can be advanced past
        revision 87140.
        https://bugs.webkit.org/show_bug.cgi?id=61881

        * gyp_webkit:

2011-05-21  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Darin Adler.

        Add build logistics and plumbing for window.internals object.
        https://bugs.webkit.org/show_bug.cgi?id=60313

        * WebKit.gyp: Added linking new webkit_test_support library.
        * public/WebTestingSupport.h: Added.
        * src/WebTestingSupport.cpp: Added.

2011-06-02  Naoki Takano  <takano.naoki@gmail.com>

        Reviewed by Dimitri Glazkov.

        [Chromium] Click event is not fired for a menulist <select>
        https://bugs.webkit.org/show_bug.cgi?id=60563

        * tests/PopupMenuTest.cpp:
        (WebKit::TestPopupMenuClient::TestPopupMenuClient): Initialize m_node.
        (WebKit::TestPopupMenuClient::valueChanged): To fire 'change' event, forward the event like RenderMenuList.
        (WebKit::TestPopupMenuClient::itemIsEnabled): Change to return true or false according to disabled item or not.
        (WebKit::TestPopupMenuClient::setDisabledIndex): Set disabled index to simulate disabled item.
        (WebKit::TestPopupMenuClient::setFocusedNode): Set focused node to dispatch the event.
        (WebKit::SelectPopupMenuTest::SelectPopupMenuTest): Add baseURL.
        (WebKit::SelectPopupMenuTest::TearDown): Add UnregisterAllMockedURLs() call.
        (WebKit::SelectPopupMenuTest::registerMockedURLLoad): To simulate html load, call RegisterMockedURL().
        (WebKit::SelectPopupMenuTest::serveRequests): Call ServeAsynchronousMockedRequests().
        (WebKit::SelectPopupMenuTest::loadFrame): Simulate load frame with url string.
        (WebKit::TEST_F): Implement SelectItemEventFire, SelectItemKeyEvent, SelectItemRemoveSelectOnChange and SelectItemRemoveSelectOnChange.
        * tests/data/select_event.html: Added for SelectItemEventFire and SelectItemKeyEvent.
        * tests/data/select_event_remove_on_change.html: Added SelectItemRemoveSelectOnChange.
        * tests/data/select_event_remove_on_click.html: Added SelectItemRemoveSelectOnChange.

2011-06-01  Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        [chromium] Fix syncing of removed mask and replica layers
        https://bugs.webkit.org/show_bug.cgi?id=61895

        * tests/TreeSynchronizerTest.cpp:
        (WebCore::TEST):

2011-06-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87788.
        http://trac.webkit.org/changeset/87788
        https://bugs.webkit.org/show_bug.cgi?id=61856

        breaks windows chromium canary (Requested by jknotten on
        #webkit).

        * public/WebPageSerializer.h:
        * src/WebPageSerializer.cpp:

2011-06-01  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Adam Barth.

        Adding MHTML generation support to MHTMLArchive.
        https://bugs.webkit.org/show_bug.cgi?id=7169

        * public/WebPageSerializer.h:
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serializeToMHTML):

2011-06-01  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector [Chromium]: Put worker scripts into devtools_frontend.zip.
        https://bugs.webkit.org/show_bug.cgi?id=61803

        * WebKit.gyp:
        * scripts/generate_devtools_zip.py:

2011-06-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87781.
        http://trac.webkit.org/changeset/87781
        https://bugs.webkit.org/show_bug.cgi?id=61842

        breaks chromium linux release (Requested by mnaganov on
        #webkit).

        * WebKit.gyp:
        * scripts/generate_devtools_zip.py:

2011-05-31  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector [Chromium]: Put worker scripts into devtools_frontend.zip.
        https://bugs.webkit.org/show_bug.cgi?id=61803

        * WebKit.gyp:
        * scripts/generate_devtools_zip.py:

2011-05-31  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by Kent Tamura.

        [Chromium] webkitStorageInfo methods (for quota API) should not crash when error callback is not given.
        https://bugs.webkit.org/show_bug.cgi?id=61823

        Fixed assertion on errorCallback parameter.

        Test: storage/quotainfo-no-callbacks.html

        * src/StorageInfoChromium.cpp:
        (WebCore::StorageInfo::queryUsageAndQuota):
        (WebCore::StorageInfo::requestQuota):

2011-05-31  Daniel Erat  <derat@chromium.org>

        Reviewed by Tony Chang.

        Make WebScreenInfoFactory return fresh screen dimensions.
        https://bugs.webkit.org/show_bug.cgi?id=61679

        * public/x11/WebScreenInfoFactory.h:
        * src/x11/WebScreenInfoFactory.cpp:
        (WebKit::WebScreenInfoFactory::screenInfo):

2011-05-31  Cary Clark  <caryclark@google.com>

        Reviewed by Eric Seidel.

        Allow Chromium porting layer to use Skia on Mac.
        https://bugs.webkit.org/show_bug.cgi?id=61548

        * public/WebCommon.h:
        Don't allow WebKit to use CG if it is already using Skia.

        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::paintScrollbarThumb):
        Allow scrollbar thumb draw to take WebCanvas.

2011-05-27  Jochen Eisinger  <jochen@chromium.org>

        Reviewed by Adam Barth.

        Check access policy on all storage operations
        https://bugs.webkit.org/show_bug.cgi?id=61581

        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::length):
        (WebCore::StorageAreaProxy::key):
        (WebCore::StorageAreaProxy::getItem):
        (WebCore::StorageAreaProxy::setItem):
        (WebCore::StorageAreaProxy::removeItem):
        (WebCore::StorageAreaProxy::clear):
        (WebCore::StorageAreaProxy::contains):
        (WebCore::StorageAreaProxy::canAccessStorage):
        * src/StorageAreaProxy.h:
        * src/WebStorageAreaImpl.cpp:
        (WebKit::WebStorageAreaImpl::length):
        (WebKit::WebStorageAreaImpl::key):
        (WebKit::WebStorageAreaImpl::getItem):

2011-05-27  Jochen Eisinger  <jochen@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] drop unused WebFrame parameter to WebStorageArea::setItem
        https://bugs.webkit.org/show_bug.cgi?id=61583

        * public/WebStorageArea.h:
        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::setItem):
        * src/WebStorageAreaImpl.cpp:
        (WebKit::WebStorageAreaImpl::setItem):
        * src/WebStorageAreaImpl.h:

2011-05-27  David Levin  <levin@chromium.org>

        Reviewed by Darin Fisher.

        Need a callback for when the preferred rendered size may have changed.
        https://bugs.webkit.org/show_bug.cgi?id=61309

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didUpdateLayout): Added stub.
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::layoutUpdated): Plumbed through the call to WebFrameClient::didUpdateLayout.
        * src/ChromeClientImpl.h: Added declaration.

2011-05-27  Shishir Agrawal  <shishir@chromium.org>

        Reviewed by Tony Gentilcore.

        Enable Page Visibility API in the chromium port.
        https://bugs.webkit.org/show_bug.cgi?id=61397

        * features.gypi:

2011-05-26  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Adam Barth.

        Fix worldID and destinationDomain argument names
        https://bugs.webkit.org/show_bug.cgi?id=61571

        As part of working on r87423, I noticed a couple of inconsistencies in
        argument names:
        - We would use worldId in .h files but worldID in .cpp files.
          Standardize on the latter
        - SecurityOrigin::addOriginAccessWhitelistEntry would take a
          destinationDomains argument, even though the actual parameter was for
          a single domain (renamed to be singular).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::executeScriptInIsolatedWorld):
        (WebKit::WebFrameImpl::setIsolatedWorldSecurityOrigin):
        * src/WebFrameImpl.h:

2011-05-26  Leandro Gracia Gil  <leandrogracia@chromium.org>

        Reviewed by Dmitry Titov.

        Add missing compile guards for WebWorkers in WebKit.
        https://bugs.webkit.org/show_bug.cgi?id=61536

        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemHelper):
        * src/PlatformBridge.cpp:
        * src/WebFileSystemCallbacksImpl.cpp:
        (WebKit::WebFileSystemCallbacksImpl::didOpenFileSystem):
        * src/WorkerAsyncFileSystemChromium.cpp:
        * src/WorkerAsyncFileSystemChromium.h:
        * src/WorkerAsyncFileWriterChromium.cpp:
        * src/WorkerAsyncFileWriterChromium.h:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        * src/WorkerFileSystemCallbacksBridge.h:
        * src/WorkerFileWriterCallbacksBridge.cpp:
        * src/WorkerFileWriterCallbacksBridge.h:

2011-05-26  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] simplify TestNetscapePlugIn naming logic
        https://bugs.webkit.org/show_bug.cgi?id=61577

        * WebKit.gyp: drop use of product_prefix, just use the name
        needed directly.

2011-05-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87444.
        http://trac.webkit.org/changeset/87444
        https://bugs.webkit.org/show_bug.cgi?id=61582

        Layout test regressions in Chromium/WebKit: fast/css/first-
        letter-text-fragment-crash.html, fast/css/first-letter-
        visibility.html (Requested by aklein on #webkit).

        * public/WebFrameClient.h:
        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:

2011-05-26  David Levin  <levin@chromium.org>

        Reviewed by Darin Fisher.

        Need a callback for when the preferred rendered size changed.
        https://bugs.webkit.org/show_bug.cgi?id=61309

        * public/WebFrameClient.h
        (WebKit::WebFrameClient::didChangeContentsPreferredSize): Added stub.
        * src/ChromeClientImpl.h:
        (WebKit::ChromeClientImpl::contentsPreferredSizeChanged): Added declaration.
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::contentsPreferredSizeChanged): Added call to WebFrameClient::didChangeContentsPreferredSize.

2011-05-26  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Adam Barth.

        Support cross-origin XMLHttpRequest in isolated worlds
        https://bugs.webkit.org/show_bug.cgi?id=59843

        Expose setIsolatedWorldSecurityOrigin in the WebFrame API.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setIsolatedWorldSecurityOrigin):
        * src/WebFrameImpl.h:

2011-05-26  Michael Nordman  <michaeln@google.com>

        Reviewed by Darin Fisher.

        [Chromium] Use SecurityOrigin produced databaseIdentifier strings, instead of
        SecurityOrigin RefPtrs, as the top level key into the DatabaseTracker's
        collection of open databases. Otherwise we can fail to lookup databases when
        trying to forceably close them via  WebDatabase::closeDatabaseImmediately.
        https://bugs.webkit.org/show_bug.cgi?id=61417

        * src/WebDatabase.cpp:
        (WebKit::WebDatabase::closeDatabaseImmediately):

2011-05-26  Sailesh Agrawal  <sail@chromium.org>

        Reviewed by Tony Chang.

        Expose willStartLiveResize and willEndLiveResize in WebWidget
        https://bugs.webkit.org/show_bug.cgi?id=60518

        * public/WebWidget.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::willStartLiveResize):
        (WebKit::WebPopupMenuImpl::willEndLiveResize):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::willStartLiveResize):
        (WebKit::WebViewImpl::willEndLiveResize):
        * src/WebViewImpl.h:

2011-05-25  Shishir Agrawal  <shishir@chromium.org>

        Reviewed by Dimitri Glazkov.

        Fix crash in Chromium memory test.
        https://bugs.webkit.org/show_bug.cgi?id=61451

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):

2011-05-25  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87333.
        http://trac.webkit.org/changeset/87333
        https://bugs.webkit.org/show_bug.cgi?id=61488

        Breaks Chromium build due to pure virtual methods. (Requested
        by aklein on #webkit).

        * public/WebWidget.h:
        * src/WebPopupMenuImpl.cpp:
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:

2011-05-25  Sailesh Agrawal  <sail@chromium.org>

        Reviewed by Darin Fisher.

        Expose willStartLiveResize and willEndLiveResize in WebWidget
        https://bugs.webkit.org/show_bug.cgi?id=60518

        * public/WebWidget.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::willStartLiveResize):
        (WebKit::WebPopupMenuImpl::willEndLiveResize):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::willStartLiveResize):
        (WebKit::WebViewImpl::willEndLiveResize):
        * src/WebViewImpl.h:

2011-05-25  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r87257.
        http://trac.webkit.org/changeset/87257
        https://bugs.webkit.org/show_bug.cgi?id=61457

        This broke layout tests, see bug 61431. (Requested by
        hwennborg on #webkit).

        * public/WebIDBFactory.h:
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::WebIDBFactoryImpl):
        (WebKit::WebIDBFactoryImpl::open):
        * src/WebIDBFactoryImpl.h:

2011-05-24  Keishi Hattori  <keishi@webkit.org>

        Reviewed by Kent Tamura.

        Disable textfield implementation of <input type=color>. Add INPUT_COLOR feature flag. Add input color sanitizer.
        https://bugs.webkit.org/show_bug.cgi?id=61273

        * features.gypi: Added INPUT_COLOR feature flag.

2011-05-24  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Add FIXME comments about removing FrameLoader::isProcessingUserGesture
        https://bugs.webkit.org/show_bug.cgi?id=61395

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidNavigateWithinPage):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::isProcessingUserGesture):

2011-05-24  Greg Simon  <gregsimon@chromium.org>

        Reviewed by Dimitri Glazkov.

        Control Indexeddb backends from LayoutTestController
        https://bugs.webkit.org/show_bug.cgi?id=61000

        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::setEnableMigration):
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::setEnableMigration):
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactory::setOverrideBackingStoreType):
        (WebKit::WebIDBFactory::setTemporaryDatabaseFolder):
        (WebKit::WebIDBFactoryImpl::WebIDBFactoryImpl):
        (WebKit::WebIDBFactoryImpl::open):
        (WebKit::WebIDBFactoryImpl::setEnableMigration):
        * src/WebIDBFactoryImpl.h:

2011-05-24  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Adam Barth.

        Adding MHTML reading support to WebCore.
        https://bugs.webkit.org/show_bug.cgi?id=7168

       * features.gypi:

2011-05-24  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Enable skia gpu rendering for content layers
        https://bugs.webkit.org/show_bug.cgi?id=56749

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::reallocateRenderer):

2011-05-24  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: Reorganize InspectorBackendDispatch code to eliminate duplication
        https://bugs.webkit.org/show_bug.cgi?id=61300

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::shouldInterruptForMessage):

2011-05-23  Gavin Peters  <gavinp@chromium.org>

        Reviewed by Adam Barth.

        fix rel=prerender target types
        https://bugs.webkit.org/show_bug.cgi?id=61297

        The original fix in https://bugs.webkit.org/show_bug.cgi?id=61079
        didn't properly map the target type, and didn't carry the target
        types through to chromium properly.  Fixed.

        No new tests; it's very hard to catch these with a layout test, however
        all of the chromium Prerender browser tests will test this functionality
        when I land an upcoming chromium CL.

        * public/WebURLRequest.h:

2011-05-23  Tony Chang  <tony@chromium.org>

        Reviewed by James Robinson.

        [chromium] Link tcmalloc to DRT so we can use the heap checker
        https://bugs.webkit.org/show_bug.cgi?id=61292

        * WebKit.gyp:

2011-05-23  Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        [chromium] Fix division by zero in TilingData for boundary case texture sizes
        https://bugs.webkit.org/show_bug.cgi?id=61164

        Add additional tests for small max texture sizes.

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-05-23  Ruben  <chromium@hybridsource.org>

        Reviewed by Tony Chang.

        Chromium gyp patch to use new POSIX defines toolkit_uses_gtk and os_posix
        https://bugs.webkit.org/show_bug.cgi?id=61219

        * WebKit.gyp:
        * WebKit.gypi:

2011-05-23  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: provide initial implementation of worker inspector transport
        https://bugs.webkit.org/show_bug.cgi?id=60267

        WebWorker and WebWorkerClient are extended with methods for passing
        DevTools messages between worker context inspector and page inspector.

        * public/WebWorker.h:
        (WebKit::WebWorker::attachDevTools):
        (WebKit::WebWorker::detachDevTools):
        (WebKit::WebWorker::dispatchDevToolsMessage):
        * public/WebWorkerClient.h:
        (WebKit::WebWorkerClient::dispatchDevToolsMessage):
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::postMessageToPageInspector):
        (WebKit::WebWorkerBase::postMessageToPageInspectorTask):
        * src/WebWorkerBase.h:
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::WebWorkerClientImpl):
        (WebKit::WebWorkerClientImpl::connectToInspector):
        (WebKit::WebWorkerClientImpl::disconnectFromInspector):
        (WebKit::WebWorkerClientImpl::sendMessageToInspector):
        (WebKit::WebWorkerClientImpl::dispatchDevToolsMessage):
        * src/WebWorkerClientImpl.h:
        * src/WebWorkerImpl.cpp:
        (WebKit::WebWorkerImpl::startWorkerContext):
        (WebKit::connectToWorkerContextInspectorTask):
        (WebKit::WebWorkerImpl::attachDevTools):
        (WebKit::disconnectFromWorkerContextInspectorTask):
        (WebKit::WebWorkerImpl::detachDevTools):
        (WebKit::dispatchOnInspectorBackendTask):
        (WebKit::WebWorkerImpl::dispatchDevToolsMessage):
        * src/WebWorkerImpl.h:

2011-05-22  Greg Simon  <gregsimon@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Updating chromium DEPS

        https://bugs.webkit.org/show_bug.cgi?id=61236

        * DEPS:

2011-05-21  Jochen Eisinger  <jochen@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] add extraData field to resource requests
        https://bugs.webkit.org/show_bug.cgi?id=61033

        * WebKit.gypi:
        * public/WebURLRequest.h:
        (WebKit::WebURLRequest::ExtraData::~ExtraData):
        * src/WebURLRequest.cpp:
        (WebKit::WebURLRequest::extraData):
        (WebKit::WebURLRequest::setExtraData):
        * tests/WebURLRequestTest.cpp: Added.
        (WebKit::TestExtraData::TestExtraData):
        (WebKit::TestExtraData::~TestExtraData):
        (WebKit::TEST):

2011-05-20  Michael Nordman  <michaeln@google.com>

        Reviewed by Darin Fisher.

        Changes to allow the WebDatabase system to participate in Chrome's unified quota
        management system. Now that changes outside of the database system affect the space
        available to the database system, we need new ways of getting the limit to renderers.

        Split WebDatabase::updateDatabaseSizeAndSpaceAvailable() into three methods.
        - WebDatabase::updateDatababaseSize()
        - WebDatabase::updateSpaceAvailable()
        - WebDatabase::resetSpaceAvailable()
        The WebDatabase methods are used to 'push' size and space available info into renderers.
        The space available can change independently of a database having changed size.

        Also provide a means for the renderer to 'pull' the space available from the main
        process if that value has not been pushed into it.
        - WebCore::PlatformBridge::databaseGetSpaceAvailableForOrigin()
        - WebKit::WebKitClient::databaseGetSpaceAvailableForOrigin()

        https://bugs.webkit.org/show_bug.cgi?id=60985

        * public/WebDatabase.h:
        * public/WebKitClient.h:
        (WebKit::WebKitClient::databaseGetSpaceAvailableForOrigin):
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::databaseGetSpaceAvailableForOrigin):
        * src/WebDatabase.cpp:
        (WebKit::WebDatabase::updateDatabaseSize):
        (WebKit::WebDatabase::updateSpaceAvailable):
        (WebKit::WebDatabase::resetSpaceAvailable):

2011-05-20  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Sam Weinig.

        numberOfActiveAnimations() can include animations from documents in the page cache
        https://bugs.webkit.org/show_bug.cgi?id=53641

        Pass the Frame's document as the one to count animations on.

        * src/WebAnimationControllerImpl.cpp:
        (WebKit::WebAnimationControllerImpl::numberOfActiveAnimations):

2011-05-19  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] remove <(library) variable
        https://bugs.webkit.org/show_bug.cgi?id=61158

        This was for a build experiment; we can just use the correct value now.

        * WebKit.gyp:

2011-05-20  Vitaly Repeshko  <vitalyr@chromium.org>

        Unreviewed.

        [chromium] Updating chromium DEPS.

        * DEPS:

2011-05-19  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r86869, r86873, r86875, and r86877.
        http://trac.webkit.org/changeset/86869
        http://trac.webkit.org/changeset/86873
        http://trac.webkit.org/changeset/86875
        http://trac.webkit.org/changeset/86877
        https://bugs.webkit.org/show_bug.cgi?id=61139

        broke builds and debug DRT (Requested by rniwa on #webkit).

        * WebKit.gyp:
        * public/WebTestingSupport.h: Removed.
        * src/WebTestingSupport.cpp: Removed.

2011-05-18  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Darin Adler.

        Add build logistics and plumbing for window.internals object.
        https://bugs.webkit.org/show_bug.cgi?id=60313

        * WebKit.gyp: Added linking new webkit_test_support library.
        * public/WebTestingSupport.h: Added.
        * src/WebTestingSupport.cpp: Added.

2011-05-19  Kenichi Ishibashi  <bashi@chromium.org>

        Reviewed by Kent Tamura.

        [Chromium] IME candidate window appears wrong position in an iframe
        https://bugs.webkit.org/show_bug.cgi?id=61023

        Always adjusts the range to window relative coordinates.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::firstRectForCharacterRange): Removed condition
        which excludes editable selectionRoot from adjusting.

2011-05-18  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Add histograms for paint times
        https://bugs.webkit.org/show_bug.cgi?id=61010

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):
        (WebKit::WebViewImpl::layout):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImplContentPainter::paint):

2011-05-17  MORITA Hajime  <morrita@google.com>

        Reviewed by Tony Chang.

        [Refactoring] Member variables of DocumentMarker should be encapsulated.        
        https://bugs.webkit.org/show_bug.cgi?id=56814

        Moved addMarker() implementation to
        WebCore::DocumentMarkerController::addTextMatchMarker().
        
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMarker):

2011-05-18  Alok Priyadarshi  <alokp@chromium.org> and Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        Split canvas from LayerTilerChromium
        https://bugs.webkit.org/show_bug.cgi?id=60719

        * src/WebViewImpl.cpp:

2011-05-18  Brett Wilson  <brettw@chromium.org>

        Reviewed by Adam Barth.

        Don't create empty file objects if no download file path is specified.
        https://bugs.webkit.org/show_bug.cgi?id=60798

        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponse::setDownloadFilePath):

2011-05-17  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] Enable detailed heap snapshots by default.
        https://bugs.webkit.org/show_bug.cgi?id=60286

        * src/js/DevTools.js:
        ():

2011-05-17  Tao Bai  <michaelbai@chromium.org>

        Reviewed by Darin Fisher.

        Clear deprecated icon APIs from chromium port.
        https://bugs.webkit.org/show_bug.cgi?id=60989

        * public/WebFrame.h: Removed faviconURL()
        * public/WebFrameClient.h: Removed didChangeIcons()
        * src/FrameLoaderClientImpl.cpp:
             Removed the code to support deprecated API
        (WebKit::FrameLoaderClientImpl::dispatchDidChangeIcons):
        * src/WebFrameImpl.cpp: Removed faviconURL()
        * src/WebFrameImpl.h:  Removed faviconURL()

2011-05-17  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Ryosuke Niwa.

        [chromium] Clipboard policy callbacks from EditorClientImpl are reversed
        https://bugs.webkit.org/show_bug.cgi?id=60994

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::canCopyCut):
        (WebKit::EditorClientImpl::canPaste):

2011-05-17  Andrew Wilson  <atwilson@chromium.org>

        Unreviewed, rolling out r86647.
        http://trac.webkit.org/changeset/86647
        https://bugs.webkit.org/show_bug.cgi?id=56814

        Broke tests downstream in Chromium

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMarker):

2011-05-17  Yufeng Shen  <miletus@chromium.org>

        Reviewed by Darin Fisher.

        Make WebKit expose extra touch information
        https://bugs.webkit.org/show_bug.cgi?id=59030

        * public/WebTouchPoint.h:
        (WebKit::WebTouchPoint::WebTouchPoint):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformTouchPointBuilder::PlatformTouchPointBuilder):

2011-05-16  James Robinson  <jamesr@chromium.org>

        Reviewed by Kenneth Russell.
        https://bugs.webkit.org/show_bug.cgi?id=58830

        Add unit tests for the compositor's TreeSynchronizer.

        * WebKit.gypi:
        * tests/TreeSynchronizerTest.cpp: Added.
        (WebCore::MockCCLayerImpl::create):
        (WebCore::MockCCLayerImpl::~MockCCLayerImpl):
        (WebCore::MockCCLayerImpl::setCCLayerDestructionList):
        (WebCore::MockCCLayerImpl::MockCCLayerImpl):
        (WebCore::MockLayerChromium::create):
        (WebCore::MockLayerChromium::~MockLayerChromium):
        (WebCore::MockLayerChromium::createCCLayerImpl):
        (WebCore::MockLayerChromium::pushPropertiesTo):
        (WebCore::MockLayerChromium::MockLayerChromium):
        (WebCore::expectTreesAreIdentical):
        (WebCore::TEST):

2011-05-16  MORITA Hajime  <morrita@google.com>

        Reviewed by Tony Chang.

        [Refactoring] Member variables of DocumentMarker should be encapsulated.        
        https://bugs.webkit.org/show_bug.cgi?id=56814

        Moved addMarker() implementation to
        WebCore::DocumentMarkerController::addTextMatchMarker().
        
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::addMarker):

2011-05-16  Andrew Wilson  <atwilson@chromium.org>

        Unreviewed, rolling out r86625.
        http://trac.webkit.org/changeset/86625
        https://bugs.webkit.org/show_bug.cgi?id=60719

        Caused failed assertion on Chromium gpu canary bots

        * src/WebViewImpl.cpp:

2011-05-16  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Split canvas from LayerTilerChromium
        https://bugs.webkit.org/show_bug.cgi?id=60719

        * src/WebViewImpl.cpp:

2011-05-13  Jon Lee  <jonlee@apple.com>

        Reviewed by Simon Fraser.

        Can't horizontally scroll iframes and overflow because wheel events are always accepted
        https://bugs.webkit.org/show_bug.cgi?id=60779

        * src/ChromeClientImpl.h:
        (WebKit::ChromeClientImpl::shouldRubberBandInDirection): Default impl of new ChromeClient method
        (WebKit::ChromeClientImpl::numWheelEventHandlersChanged): Default impl of new ChromeClient method

2011-05-13  Tao Bai  <michaelbai@chromium.org>

        Reviewed by Darin Fisher.

        Handle the touch icon.
        https://bugs.webkit.org/show_bug.cgi?id=60247

        Added WebIconURL for the corresponding IconURL.
        Added method iconURLs() to specify the type of icon need to return.
        The favIconURL() is deprecated and will be removed later. 

        * WebKit.gyp:
        * features.gypi:
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didChangeIcons):
        * public/WebIconURL.h: Added.
        (WebKit::WebIconURL::WebIconURL):
        (WebKit::WebIconURL::iconType):
        (WebKit::WebIconURL::iconURL):
        * src/AssertMatchingEnums.cpp:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidChangeIcons):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::favIconURL):
        * src/WebFrameImpl.h:

2011-05-13  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Prune #includes from FrameView.h (Part 2)
        https://bugs.webkit.org/show_bug.cgi?id=60748

        - Update files that were depending on FrameView.h #including Frame.h or
          Page.h.

        * src/AutoFillPopupMenuClient.cpp:
        * src/PlatformBridge.cpp:
        * src/WebPopupMenuImpl.cpp:

2011-05-13  Brett Wilson  <brettw@chromium.org>

        Reviewed by Adam Barth.

        Don't destroy a null FcPattern when failing to do a FontConfig match.
        This crashes, and there's nothing FcDestroy could do with a null
        pointer even if it didn't crash.
        https://bugs.webkit.org/show_bug.cgi?id=60777

        * src/gtk/WebFontInfo.cpp:
        (WebKit::WebFontInfo::renderStyleForStrike):

2011-05-11  Hans Wennborg  <hans@chromium.org>

        Reviewed by Tony Gentilcore.

        IndexedDB: Fix integer comparison bug in LevelDB coding routines
        https://bugs.webkit.org/show_bug.cgi?id=60623

        Unit test for comparison of encoded keys.

        * tests/IDBLevelDBCodingTest.cpp:
        (IDBLevelDBCoding::TEST):

2011-05-05  Hans Wennborg  <hans@chromium.org>

        Reviewed by Steve Block.

        IndexedDB: Transaction rollback prevented by open SQLite statement
        https://bugs.webkit.org/show_bug.cgi?id=60032

        Implement two new methods in IDBTransactionBackendInterface.

        * src/IDBTransactionBackendProxy.cpp:
        (WebKit::IDBTransactionBackendProxy::registerOpenCursor):
        (WebKit::IDBTransactionBackendProxy::unregisterOpenCursor):
        * src/IDBTransactionBackendProxy.h:

2011-05-13  Patrick Gansterer  <paroga@webkit.org>

        Reviewed by Adam Barth.

        Enable OwnPtr strict mode in MediaPlayer
        https://bugs.webkit.org/show_bug.cgi?id=59466

        Let the CreateMediaEnginePlayer function return a PassOwnPtr instead of a raw pointer.
        Also fix the templete argument of OwnPtr for the m_private member variable.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::create):
        * src/WebMediaPlayerClientImpl.h:

2011-05-12  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [Chromium] Add a WebSetting to control DNS prefetch
        https://bugs.webkit.org/show_bug.cgi?id=60736

        DNS prefetch got disabled in Chrome accidentially in
        http://trac.webkit.org/changeset/74041.  This patch adds a WebSettings
        API so we can enable it again.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setDNSPrefetchingEnabled):
        * src/WebSettingsImpl.h:

2011-05-11  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make openFileSystem check for permission first
        https://bugs.webkit.org/show_bug.cgi?id=60683

        * public/WebCommonWorkerClient.h:
        (WebKit::WebCommonWorkerClient::allowFileSystem):
        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowFileSystem):
        * src/LocalFileSystemChromium.cpp:
        (WebCore::openFileSystemNotAllowed):
        (WebCore::openFileSystemHelper):
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::allowFileSystem):
        * src/WebWorkerBase.h:
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::allowFileSystem):

2011-05-12  Nikolas Zimmermann  <nzimmermann@rim.com>

        Reviewed by Darin Adler.

        String operator+ reallocates unnecessarily when concatting > 2 strings
        https://bugs.webkit.org/show_bug.cgi?id=58420

        Provide a faster String append operator. See Source/JavaScriptCore/ChangeLog for details.

        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::keyboardShortcut): Cast to String first, before trying to convert to platform dependant type.
        * src/WebHTTPLoadInfo.cpp:
        (WebKit::addHeader): Don't pass WebString to makeString, explicit cast to String first.
        * tests/IDBLevelDBCodingTest.cpp: Cast to String first, to avoid conflicting with gtests global templatified operator+.
        (IDBLevelDBCoding::TEST):

2011-05-10  Tony Gentilcore  <tonyg@chromium.org>

        Reviewed by Darin Adler.

        Perform some forward declarations suggested by include-what-you-use
        https://bugs.webkit.org/show_bug.cgi?id=60545

        * src/WebHistoryItem.cpp:
        * src/WebNotification.cpp:
        * src/WebTextCheckingCompletionImpl.cpp:
        * src/mac/WebSubstringUtil.mm:

2011-05-11  Levi Weintraub  <leviw@chromium.org>

        Reviewed by Eric Seidel.

        Rename Widget::pos()
        https://bugs.webkit.org/show_bug.cgi?id=60575

        Renaming Widget::pos() to the more-descriptive location().

        * src/WebInputEventConversion.cpp:
        (WebKit::WebMouseEventBuilder::WebMouseEventBuilder):
        (WebKit::WebMouseWheelEventBuilder::WebMouseWheelEventBuilder):

2011-05-11  Antoine Labour  <piman@chromium.org>

        Reviewed by David Levin.

        Don't buffer data for resources loaded by AssociatedURLLoader.
        https://bugs.webkit.org/show_bug.cgi?id=60656

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::loadAsynchronously): set shouldBufferData to false in ThreadableLoaderOptions

2011-05-11  Nat Duca  <nduca@chromium.org>

        Reviewed by Kenneth Russell.

        [chromium] Make throttling of WebGL based on webgl frames, not compositor frames
        https://bugs.webkit.org/show_bug.cgi?id=60508

        Tell LayerRendererChromium when the requestAnimFrame-callbacks are running.

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::rateLimitOffscreenContextCHROMIUM):
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::rateLimitOffscreenContextCHROMIUM):
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DInternal.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::animate):

2011-05-11  John Bauman  <jbauman@chromium.org>

        Reviewed by Kenneth Russell.

        Don't send zeros in TexImage if GL implementation handles that
        https://bugs.webkit.org/show_bug.cgi?id=60581

        Chromium already handles zeroing textures upon creation, so don't
        bother zeroing them in WebKit, as that causes some unnecessary memcpys
        of zeros.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3D::create):

2011-05-10  Kent Tamura  <tkent@chromium.org>

        Reviewed by Hajime Morita.

        [Chromium] Fix a bug of WebFrameImpl::forms()
        https://bugs.webkit.org/show_bug.cgi?id=60606

        If document()->forms() contained non-HTML element, the second for
        loop didn't stop.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::forms): Simplify the function by wtf::Vector().

2011-05-10  Ilya Tikhonovsky  <loislo@chromium.org>

        Unreviewed buildfix for strict OwnPtr patch.

        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::loadPlatformAudioResource):
        (WebCore::PlatformBridge::decodeAudioFileData):

2011-05-06  Brett Wilson  <brettw@chromium.org>

        Reviewed by Adam Barth.

        Use a File object to store the downloaded file reference rather than
        just the path. This keeps the file and permissions in scope (using the
        already-existing blob system) so the browser won't delete the file
        when the load is complete. Instead, the file will be cleaned up when
        the request objects are deleted.
        https://bugs.webkit.org/show_bug.cgi?id=60281

        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponse::downloadFilePath):
        (WebKit::WebURLResponse::setDownloadFilePath):

2011-05-10  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: [Chromium] Drop obsolete test code for the Profiles panel.
        https://bugs.webkit.org/show_bug.cgi?id=60471

        * src/js/Tests.js:

2011-05-10  Adam Barth  <abarth@webkit.org>

        Attempt to fix the clang build.

        * src/WebDevToolsAgentImpl.cpp:

2011-05-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r86091.
        http://trac.webkit.org/changeset/86091
        https://bugs.webkit.org/show_bug.cgi?id=60510

        Broke Chromium win release build. (Requested by dave_levin on
        #webkit).

        * WebKit.gyp:
        * features.gypi:
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didChangeIcons):
        * public/WebIconURL.h: Removed.
        * src/AssertMatchingEnums.cpp:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidChangeIcons):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::favIconURL):
        * src/WebFrameImpl.h:

2011-05-09  Tao Bai  <michaelbai@chromium.org>

        Reviewed by David Levin.

        Handle the touch icon.
        https://bugs.webkit.org/show_bug.cgi?id=60247

        Added WebIconURL for the corresponding IconURL.
        Added method iconURLs() to specify the type of icon need to return.
        The favIconURL() is deprecated.

        * WebKit.gyp:
        * features.gypi:
        * public/WebFrame.h:
        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didChangeIcons):
        * public/WebIconURL.h: Added.
        (WebKit::WebIconURL::WebIconURL):
        * src/AssertMatchingEnums.cpp:
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidChangeIcons):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::favIconURL):
        * src/WebFrameImpl.h:

2011-05-09  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] make DumpRenderTree build in components for linux
        https://bugs.webkit.org/show_bug.cgi?id=60491

        * WebKit.gyp: move some code that was in a Windows-only block to be used
        on all platforms.

2011-05-09  Adam Barth  <abarth@webkit.org>

        Reviewed by Tony Gentilcore.

        Make Chromium build with strict PassOwnPtr
        https://bugs.webkit.org/show_bug.cgi?id=60461

        Fixed many, many PassOwnPtr nits.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::autofill):
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::createObjectStore):
        (WebKit::IDBDatabaseBackendProxy::transaction):
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::createIndex):
        (WebKit::IDBObjectStoreBackendProxy::index):
        * src/IDBTransactionBackendProxy.cpp:
        (WebKit::IDBTransactionBackendProxy::objectStore):
        * src/PlatformMessagePortChannel.cpp:
        (WebCore::MessagePortChannel::create):
        (WebCore::PlatformMessagePortChannel::tryGetMessageFromRemote):
        * src/SharedWorkerRepository.cpp:
        (WebCore::SharedWorkerRepository::connect):
        * src/SocketStreamHandle.cpp:
        (WebCore::SocketStreamHandleInternal::create):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::DebuggerTask::DebuggerTask):
        (WebKit::DebuggerTask::~DebuggerTask):
        (WebKit::DebuggerTask::run):
        (WebKit::WebDevToolsAgent::interruptAndDispatch):
        * src/WebDevToolsFrontendImpl.cpp:
        (WebKit::WebDevToolsFrontendImpl::WebDevToolsFrontendImpl):
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onSuccess):
        * src/WebIDBCursorImpl.cpp:
        (WebKit::WebIDBCursorImpl::update):
        (WebKit::WebIDBCursorImpl::continueFunction):
        (WebKit::WebIDBCursorImpl::deleteFunction):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::setVersion):
        (WebKit::WebIDBDatabaseImpl::open):
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):
        * src/WebIDBIndexImpl.cpp:
        (WebKit::WebIDBIndexImpl::openObjectCursor):
        (WebKit::WebIDBIndexImpl::openKeyCursor):
        (WebKit::WebIDBIndexImpl::getObject):
        (WebKit::WebIDBIndexImpl::getKey):
        * src/WebIDBObjectStoreImpl.cpp:
        (WebKit::WebIDBObjectStoreImpl::get):
        (WebKit::WebIDBObjectStoreImpl::put):
        (WebKit::WebIDBObjectStoreImpl::deleteFunction):
        (WebKit::WebIDBObjectStoreImpl::clear):
        (WebKit::WebIDBObjectStoreImpl::openCursor):
        * src/WebIDBTransactionImpl.cpp:
        (WebKit::WebIDBTransactionImpl::setCallbacks):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::loadFrameRequest):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setDevToolsAgentClient):
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::postMessageToWorkerObject):
        * src/WebWorkerImpl.cpp:
        (WebKit::WebWorkerImpl::postMessageToWorkerContext):
        * src/WorkerFileWriterCallbacksBridge.cpp:
        (WebKit::WorkerFileWriterCallbacksBridge::initOnMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::didWrite):
        (WebKit::WorkerFileWriterCallbacksBridge::didFail):
        (WebKit::WorkerFileWriterCallbacksBridge::didTruncate):

2011-05-09  Shishir Agrawal  <shishir@chromium.org>

        Reviewed by Tony Gentilcore.

        Implement Page Visibility API.
        https://bugs.webkit.org/show_bug.cgi?id=54181

        * WebKit.gyp:
        * public/WebPageVisibilityState.h: Added.
        * public/WebView.h:
        (WebKit::WebView::setVisibilityState):
        * public/WebViewClient.h:
        (WebKit::WebViewClient::visibilityState):
        * src/AssertMatchingEnums.cpp:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setVisibilityState):
        * src/WebViewImpl.h:

2011-05-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r85974.
        http://trac.webkit.org/changeset/85974
        https://bugs.webkit.org/show_bug.cgi?id=60444

        broke browser tests (Requested by inferno-sec on #webkit).

        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponse::downloadFilePath):
        (WebKit::WebURLResponse::setDownloadFilePath):

2011-05-06  Kent Tamura  <tkent@chromium.org>

        Reviewed by Ryosuke Niwa.

        Eliminate WebCore/dom/InputElement.{cpp,h}
        https://bugs.webkit.org/show_bug.cgi?id=60262

        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::defaultMaxLength):
          Replace InputElement::s_maximumLength with HTMLInputElement::maximumLength.
        (WebKit::toWebInputElement):
          Follow the return type change of Node::toInputElement().

2011-05-06  Justin Schuh  <jschuh@chromium.org>

        Reviewed by Adam Barth.

        [Chromium] Whitelist input events interpreted as user gestures
        https://bugs.webkit.org/show_bug.cgi?id=60213

        * public/WebInputEvent.h:
        (WebKit::WebInputEvent::isUserGestureEventType):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):

2011-05-06  Brett Wilson  <brettw@chromium.org>

        Reviewed by Adam Barth.

        Use a File object to store the downloaded file reference rather than
        just the path. This keeps the file and permissions in scope (using the
        already-existing blob system) so the browser won't delete the file
        when the load is complete. Instead, the file will be cleaned up when
        the request objects are deleted.
        https://bugs.webkit.org/show_bug.cgi?id=60281

        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponse::downloadFilePath):
        (WebKit::WebURLResponse::setDownloadFilePath):

2011-05-06  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by James Robinson.

        [chromium]: Reland using WebPermissionClient for checking indexed db usage
        https://bugs.webkit.org/show_bug.cgi?id=60386

        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowIndexedDB):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::open):

2011-05-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r85919.
        http://trac.webkit.org/changeset/85919
        https://bugs.webkit.org/show_bug.cgi?id=60378

        broke chromium database tests (Requested by inferno-sec on
        #webkit).

        * public/WebPermissionClient.h:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::open):

2011-05-04  Philippe Normand  <pnormand@igalia.com>

        Reviewed by Dimitri Glazkov.

        Implement LayoutTestController::pseudoShadowId()
        https://bugs.webkit.org/show_bug.cgi?id=60034

        * public/WebElement.h:
        * src/WebElement.cpp:
        (WebKit::WebElement::shadowPseudoId):

2011-05-05  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make IndexedDB code use WebPermissionClient API
        https://bugs.webkit.org/show_bug.cgi?id=60340

        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowIndexedDB):
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::open):

2011-05-05  Adam Barth  <abarth@webkit.org>

        Roll Chromium DEPS.

        * DEPS:

2011-05-05  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Eric Seidel.

        Rename SelectionController to FrameSelection
        https://bugs.webkit.org/show_bug.cgi?id=60234

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::selectWordAroundCaret):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::textInputType):
        (WebKit::WebViewImpl::caretOrSelectionBounds):
        (WebKit::WebViewImpl::caretOrSelectionRange):
        (WebKit::WebViewImpl::clearFocusedNode):

2011-05-03  Hans Wennborg  <hans@chromium.org>

        Reviewed by Steve Block.

        IndexedDB: Unit tests for LevelDB key coding functions
        https://bugs.webkit.org/show_bug.cgi?id=59692

        Add unit tests for the basic key coding functions used by the LevelDB back-end.

        * WebKit.gypi:
        * tests/IDBLevelDBCodingTest.cpp: Added.
        (IDBLevelDBCoding::TEST):

2011-05-04  MORITA Hajime  <morrita@google.com>

        Unreviewed unit test skip (startPostAndWaitOnCondition)
        which fails on Windows 7. See bug 60248 for tracking.
        
        * tests/CCThreadTest.cpp:
        (WebCore::TEST):

2011-05-04  Cris Neckar  <cdn@chromium.org>

        Reviewed by Adam Barth.

        Expose WebView directly through ChromeClient.
        https://bugs.webkit.org/show_bug.cgi?id=49902

        * src/AutoFillPopupMenuClient.cpp:
        (WebKit::AutoFillPopupMenuClient::getWebView):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::webView):
        * src/ChromeClientImpl.h:
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):
        * src/PlatformBridge.cpp:
        (WebCore::toWebWidgetClient):
        * src/StorageNamespaceProxy.cpp:
        (WebCore::StorageNamespace::sessionStorageNamespace):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::fromPage):

2011-05-04  Nate Chapin  <japhet@chromium.org>

        Reviewed by Mihai Parparita.

        Ensure we don't overwrite user-specified scroll positions
        on same document HistoryItem navigations.
        https://bugs.webkit.org/show_bug.cgi?id=59877

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::loadHistoryItem):
        (WebKit::WebFrameImpl::currentHistoryItem):
        (WebKit::WebFrameImpl::WebFrameImpl):
        * src/WebFrameImpl.h:

2011-05-04  Tao Bai  <michaelbai@chromium.org>

        Reviewed by David Kilzer.

        Populate touch-icon url to FrameLoaderClient
        https://bugs.webkit.org/show_bug.cgi?id=59143

        Respected the change of FrameLoaderClient.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidChangeIcons):
        * src/FrameLoaderClientImpl.h:

2011-05-04  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Ojan Vafai.

        Send the char events to the select popup if one is showing to fix
        a bug were pressing a letter would not select the matching option.
        https://bugs.webkit.org/show_bug.cgi?id=47769

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::keyEvent):
        (WebKit::WebViewImpl::charEvent):
        * src/WebViewImpl.h:

2011-05-03  Justin Novosad  <junov@chromium.org>

        Reviewed by Kenneth Russell.

        [Chromium] Make accelerated 2d canvas enabled by default with skia
        https://bugs.webkit.org/show_bug.cgi?id=59929
        Added new flag for enabling the legacy accelerated 2d canvas
        The flag is not yet functional with this change.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setLegacyAccelerated2dCanvasEnabled):
        * src/WebSettingsImpl.h:

2011-05-03  Alpha Lam  <hclam@chromium.org>

        Not reviewed. Build fix.

        More 0 to nullptr.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::pluginLoadObserver):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3D::~GraphicsContext3D):
        * src/WebAudioBus.cpp:
        (WebKit::WebAudioBus::release):
        * src/WebBlobData.cpp:
        (WebKit::WebBlobData::reset):
        * src/WebViewImpl.cpp:
        (WebKit::WebView::addUserScript):
        (WebKit::WebView::addUserStyleSheet):

2011-05-03  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by James Robinson.

        [chromium] Go through WebPermissionClient for local storage access.  Also cleanup left over code from previous WebPermissionClient change.
        https://bugs.webkit.org/show_bug.cgi?id=60066

        * public/WebFrameClient.h:
        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowLocalStorage):
        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowScriptExtension):
        (WebKit::FrameLoaderClientImpl::allowJavaScript):
        (WebKit::FrameLoaderClientImpl::allowPlugins):
        (WebKit::FrameLoaderClientImpl::allowImages):
        (WebKit::FrameLoaderClientImpl::didNotAllowScript):
        (WebKit::FrameLoaderClientImpl::didNotAllowPlugins):
        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::setItem):

2011-05-03  Tony Chang  <tony@chromium.org>

        Unreviewed, rolling the version of chromium to r83922.

        * DEPS:

2011-05-03  Julien Chaffraix  <jchaffraix@codeaurora.org>

        Reviewed by Dimitri Glazkov.

        Element:shadowRoot & Element::ensureShadowRoot should return ShadowRoot*
        https://bugs.webkit.org/show_bug.cgi?id=58703

        * src/WebElement.cpp: Added #include for ShadowRoot.h.

2011-05-02  Adam Klein  <adamk@chromium.org>

        Reviewed by Tony Chang.

        Roll chromium DEPS to r83722, add new crypto directory to DEPS
        https://bugs.webkit.org/show_bug.cgi?id=59992

        * DEPS:

2011-05-02  Adam Roben  <aroben@apple.com>

        Take advantage of implicit conversion from nullptr_t to PassOwnPtr

        Fixes <http://webkit.org/b/59964> Implicit conversion from std::nullptr_t to PassOwnPtr
        doesn't work, but should

        Reviewed by Adam Barth.

        * src/WebMediaPlayerClientImpl.cpp:

2011-05-03  Pavel Feldman  <pfeldman@google.com>

        Not reviewed: re-applied r85589.

        * src/js/DevTools.js:
        (.WebInspector.InspectorFrontendHostStub.prototype.inspectedURLChanged):

2011-05-03  Pavel Feldman  <pfeldman@google.com>

        Reviewed by Yury Semikhatsky.

        Web Inspector: [remote debugging] use document.title to set window name.
        https://bugs.webkit.org/show_bug.cgi?id=60012

        * src/js/DevTools.js:
        (WebInspector.InspectorFrontendHostStub.prototype.inspectedURLChanged):

2011-05-02  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by Dimitri Glazkov.

        Chromium windows build is broken due to r85395
        https://bugs.webkit.org/show_bug.cgi?id=59945
        
        Include SecurityOrigin.h in IDBFactoryBackendProxy.cpp

        * src/IDBFactoryBackendProxy.cpp:

2011-04-30  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Eric Seidel.

        V8Proxy.h shouldn't include SecurityOrigin.h
        https://bugs.webkit.org/show_bug.cgi?id=59859

        Add SecurityOrigin.h includes to places that were relying on transitive
        includes.

        * src/ApplicationCacheHost.cpp:
        * src/WebGeolocationPermissionRequest.cpp:

2011-04-29  Chris Evans  <cevans@chromium.org>

        Reviewed by Adam Barth.

        Add WebCore::Setting to block displaying and/or running insecure content on secure pages
        https://bugs.webkit.org/show_bug.cgi?id=58378

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setAllowDisplayOfInsecureContent):
        (WebKit::WebSettingsImpl::setAllowRunningOfInsecureContent):
        * src/WebSettingsImpl.h:
        Simple plumbing for the new boolean settings.

2011-04-29  Kenneth Russell  <kbr@google.com>

        Unreviewed build fix. Skip WebPageNewSerializerTest.cpp in Windows multi-DLL build.

        * WebKit.gyp:

2011-04-28  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] support components build on Linux
        https://bugs.webkit.org/show_bug.cgi?id=59748

        * WebKit.gyp: adjust tests to not be Windows-specific.
        * public/WebCommon.h: add #defines to support Linux.
        * public/linux/WebFontRenderStyle.h: expose Linux-specific API.
        * tests/RunAllTests.cpp: adjust ifdefs to not be Windows-specific.

2011-04-29  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Chromium DevTools: Fix network panel timing/size/headers tests.
        https://bugs.webkit.org/show_bug.cgi?id=59696

        * src/js/Tests.js:
        (.TestSuite.prototype.testNetworkSize.finishResource):
        (.TestSuite.prototype.testNetworkSyncSize.finishResource):
        (.TestSuite.prototype.testNetworkRawHeadersText.finishResource):
        (.TestSuite.prototype.testNetworkTiming.finishResource):

2011-04-29  Pavel Feldman  <pfeldman@google.com>

        Reviewed by Yury Semikhatsky.

        Web Inspector: add "open link in new tab" action into the network and resources panels.
        https://bugs.webkit.org/show_bug.cgi?id=59788

        This change also distinguishes context menu items case between platforms.

        * src/js/DevTools.js:

2011-04-28  Nat Duca  <nduca@chromium.org>

        Reviewed by Kenneth Russell.

        [chromium] Add swapBuffersCompleteCallback to Extensions3DChromium
        https://bugs.webkit.org/show_bug.cgi?id=59626

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::WebGraphicsSwapBuffersCompleteCallbackCHROMIUM::~WebGraphicsSwapBuffersCompleteCallbackCHROMIUM):
        (WebKit::WebGraphicsContext3D::setSwapBuffersCompleteCallbackCHROMIUM):
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::setSwapBuffersCompleteCallbackCHROMIUM):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::SwapBuffersCompleteCallbackAdapter::~SwapBuffersCompleteCallbackAdapter):
        (WebCore::SwapBuffersCompleteCallbackAdapter::SwapBuffersCompleteCallbackAdapter):
        (WebCore::SwapBuffersCompleteCallbackAdapter::onSwapBuffersComplete):
        (WebCore::SwapBuffersCompleteCallbackAdapter::create):
        (WebCore::GraphicsContext3DInternal::setSwapBuffersCompleteCallbackCHROMIUM):
        * src/GraphicsContext3DInternal.h:
        * src/WebViewImpl.cpp:

2011-04-28  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Fix silly bug with WebPermissionClient
        https://bugs.webkit.org/show_bug.cgi?id=59769

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowJavaScript):
        (WebKit::FrameLoaderClientImpl::allowPlugins):
        (WebKit::FrameLoaderClientImpl::allowImages):

2011-04-28  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Adam Barth.

        Introducing a new API to serialize a WebView back to HTML.
        https://bugs.webkit.org/show_bug.cgi?id=58947

        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * src/WebPageSerializer.cpp:
        (WebKit::WebPageSerializer::serialize):
        * tests/WebPageNewSerializerTest.cpp: Added.
        * tests/data/pageserializer: Added.
        * tests/data/pageserializer/blank_frames.html: Added.
        * tests/data/pageserializer/blue_background.png: Added.
        * tests/data/pageserializer/css_test_page.html: Added.
        * tests/data/pageserializer/green_background.png: Added.
        * tests/data/pageserializer/iframe.html: Added.
        * tests/data/pageserializer/iframe2.html: Added.
        * tests/data/pageserializer/import_style_from_link.css: Added.
        * tests/data/pageserializer/import_styles.css: Added.
        * tests/data/pageserializer/link_styles.css: Added.
        * tests/data/pageserializer/ol-dot.png: Added.
        * tests/data/pageserializer/orange_background.png: Added.
        * tests/data/pageserializer/purple_background.png: Added.
        * tests/data/pageserializer/red_background.png: Added.
        * tests/data/pageserializer/simple.xhtml: Added.
        * tests/data/pageserializer/top_frame.html: Added.
        * tests/data/pageserializer/ul-dot.png: Added.
        * tests/data/pageserializer/yellow_background.png: Added.

2011-04-28  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Add a WebPermissionClient to be used for checking permissions of features
        https://bugs.webkit.org/show_bug.cgi?id=59720

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::allowPlugins):
        (WebKit::WebFrameClient::didNotAllowPlugins):
        (WebKit::WebFrameClient::allowImages):
        (WebKit::WebFrameClient::allowScript):
        (WebKit::WebFrameClient::allowDatabase):
        (WebKit::WebFrameClient::didNotAllowScript):
        * public/WebPermissionClient.h: Added.
        (WebKit::WebPermissionClient::allowDatabase):
        (WebKit::WebPermissionClient::allowImages):
        (WebKit::WebPermissionClient::allowPlugins):
        (WebKit::WebPermissionClient::allowScript):
        (WebKit::WebPermissionClient::allowScriptExtension):
        (WebKit::WebPermissionClient::allowReadFromClipboard):
        (WebKit::WebPermissionClient::allowWriteToClipboard):
        (WebKit::WebPermissionClient::didNotAllowPlugins):
        (WebKit::WebPermissionClient::didNotAllowScript):
        (WebKit::WebPermissionClient::~WebPermissionClient):
        * public/WebView.h:
        * public/WebViewClient.h:
        (WebKit::WebViewClient::didEndEditing):
        * src/DatabaseObserver.cpp:
        (WebCore::DatabaseObserver::canEstablishDatabase):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::toggleContinuousSpellChecking):
        (WebKit::EditorClientImpl::canCopyCut):
        (WebKit::EditorClientImpl::canPaste):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowScriptExtension):
        (WebKit::FrameLoaderClientImpl::allowJavaScript):
        (WebKit::FrameLoaderClientImpl::allowPlugins):
        (WebKit::FrameLoaderClientImpl::allowImages):
        (WebKit::FrameLoaderClientImpl::didNotAllowScript):
        (WebKit::FrameLoaderClientImpl::didNotAllowPlugins):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::enableContinuousSpellChecking):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setAutoFillClient):
        (WebKit::WebViewImpl::setPermissionClient):
        (WebKit::WebViewImpl::WebViewImpl):
        * src/WebViewImpl.h:
        (WebKit::WebViewImpl::permissionClient):

2011-04-28  Kenneth Russell  <kbr@google.com>

        Unreviewed fix for Windows multi-DLL build.

        * WebKit.gyp:

2011-04-27  Dmitry Lomov  <dslomov@google.com>

        Reviewed by David Levin.
        
        CrossThreadCopier should not have a default specialization for raw pointers
        https://bugs.webkit.org/show_bug.cgi?id=59234
        Removed the ablity to pass raw pointers cross-thread
        Added and applied annotations for doing that

        * src/WebSharedWorkerImpl.cpp:
        (WebKit::WebSharedWorkerImpl::connect):
        (WebKit::WebSharedWorkerImpl::connectTask):
        * src/WebSharedWorkerImpl.h:
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::postMessageToWorkerObject):
        (WebKit::WebWorkerBase::postExceptionToWorkerObject):
        (WebKit::WebWorkerBase::postConsoleMessageToWorkerObject):
        (WebKit::WebWorkerBase::confirmMessageFromWorkerObject):
        (WebKit::WebWorkerBase::reportPendingActivity):
        (WebKit::WebWorkerBase::workerContextClosed):
        (WebKit::WebWorkerBase::workerContextDestroyed):
        * src/WebWorkerClientImpl.cpp:
        (WebKit::WebWorkerClientImpl::startWorkerContext):
        (WebKit::WebWorkerClientImpl::terminateWorkerContext):
        (WebKit::WebWorkerClientImpl::postMessageToWorkerContext):
        (WebKit::WebWorkerClientImpl::workerObjectDestroyed):
        (WebKit::WebWorkerClientImpl::postMessageToWorkerObject):
        (WebKit::WebWorkerClientImpl::postExceptionToWorkerObject):
        (WebKit::WebWorkerClientImpl::postConsoleMessageToWorkerObject):
        (WebKit::WebWorkerClientImpl::confirmMessageFromWorkerObject):
        (WebKit::WebWorkerClientImpl::reportPendingActivity):
        * src/WebWorkerImpl.cpp:
        (WebKit::WebWorkerImpl::postMessageToWorkerContext):
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postMoveToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postCopyToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postRemoveToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postRemoveRecursivelyToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postReadMetadataToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postCreateFileToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postCreateDirectoryToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postFileExistsToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postDirectoryExistsToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::postReadDirectoryToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didFailOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didOpenFileSystemOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didSucceedOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didReadMetadataOnMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::didReadDirectoryOnMainThread):
        * src/WorkerFileWriterCallbacksBridge.cpp:
        (WebKit::WorkerFileWriterCallbacksBridge::postWriteToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::postTruncateToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::postAbortToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::didWrite):
        (WebKit::WorkerFileWriterCallbacksBridge::didFail):
        (WebKit::WorkerFileWriterCallbacksBridge::didTruncate):
        (WebKit::WorkerFileWriterCallbacksBridge::postInitToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::dispatchTaskToMainThread):
        (WebKit::WorkerFileWriterCallbacksBridge::dispatchTaskToWorkerThread):
        * tests/CCThreadTest.cpp:
        (WebCore::TEST):

2011-04-27  James Robinson  <jamesr@chromium.org>

        Reviewed by Kenneth Russell.

        [chromium] Ensure compositing layers are up to date before entering doComposite
        https://bugs.webkit.org/show_bug.cgi?id=59159

        Explicitly update and sync the compositing layer data structures for all frames in the tree before entering the
        composite operation so that lazily updated state doesn't mutate the GraphicsLayer tree while compositing.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):

2011-04-27  James Robinson  <jamesr@chromium.org>

        Reviewed by Adam Barth.

        Fix OwnPtr strict issues in chromium linux build
        https://bugs.webkit.org/show_bug.cgi?id=59664

        * src/WebImageDecoder.cpp:
        (WebKit::WebImageDecoder::getFrameAtIndex):
        * src/WebImageSkia.cpp:
        (WebKit::WebImage::fromData):

2011-04-27  Adam Barth  <abarth@webkit.org>

        Reviewed by David Levin.

        Make GraphicsContext3DChromium play nice with strict OwnPtrs
        https://bugs.webkit.org/show_bug.cgi?id=59659

        Attempt #2.  Hopefully this time I won't make everything crash.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):

2011-04-27  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Darin Fisher.

        remove unneeded TestWebWidget class
        https://bugs.webkit.org/show_bug.cgi?id=59573

        * tests/PopupMenuTest.cpp:

2011-04-27  Tony Chang  <tony@chromium.org>

        Reviewed by Ojan Vafai.

        [chromium] add a build target to make a zip file with the inspector debug files
        https://bugs.webkit.org/show_bug.cgi?id=56656

        * WebKit.gyp: Add target
        * scripts/concatenate_css_files.py: Pass in a string of html rather
            than a filename
        * scripts/concatenate_js_files.py: Same as above
        * scripts/generate_devtools_html.py: Refactor main into a helper function
        * scripts/generate_devtools_zip.py: Added.

2011-04-27  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Eric Seidel.

        Frame.h shouldn't include Document.h
        https://bugs.webkit.org/show_bug.cgi?id=59560
        
        Add Document.h #includes for files that were relying on transitive
        #includes via Frame.h.

        * src/LocalFileSystemChromium.cpp:
        * src/StorageEventDispatcherImpl.cpp:
        * src/WebFrameImpl.h:
        * src/WebWorkerBase.cpp:

2011-04-26  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by Eric Seidel.

        Typedefing the shared timer function.
        https://bugs.webkit.org/show_bug.cgi?id=59564

        * public/WebKitClient.h:
        (WebKit::WebKitClient::setSharedTimerFiredFunction):

2011-04-26  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, rolling out r84982.
        http://trac.webkit.org/changeset/84982
        https://bugs.webkit.org/show_bug.cgi?id=59558

        re-land r84951

        * WebKit.gyp:
        * public/WebFrame.h:
        * public/WebWidget.h:
        * public/mac/WebSubstringUtil.h: Added.
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::firstRectForCharacterRange):
        (WebKit::WebFrameImpl::characterIndexForPoint):
        * src/WebFrameImpl.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::compositionRange):
        (WebKit::WebPopupMenuImpl::caretOrSelectionRange):
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::compositionRange):
        (WebKit::WebViewImpl::caretOrSelectionRange):
        * src/WebViewImpl.h:
        * src/mac/WebSubstringUtil.mm: Added.
        (WebKit::WebSubstringUtil::attributedSubstringInRange):

2011-04-26  Sam Weinig  <sam@webkit.org>

        Reviewed by David Hyatt.

        Remove Datagrid from the tree
        https://bugs.webkit.org/show_bug.cgi?id=59543

        * features.gypi:
        Remove feature.

2011-04-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r84951.
        http://trac.webkit.org/changeset/84951
        https://bugs.webkit.org/show_bug.cgi?id=59558

        "breaks chromium compile" (Requested by dpranke on #webkit).

        * WebKit.gyp:
        * public/WebFrame.h:
        * public/WebWidget.h:
        * public/mac/WebSubstringUtil.h: Removed.
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::firstRectForCharacterRange):
        * src/WebFrameImpl.h:
        * src/WebPopupMenuImpl.cpp:
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:
        * src/mac/WebSubstringUtil.mm: Removed.

2011-04-26  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] Implement EditorClient::canCopyCut and EditorClient::canPaste
        https://bugs.webkit.org/show_bug.cgi?id=59264

        * public/WebViewClient.h:
        (WebKit::WebViewClient::canTriggerClipboardRead):
        (WebKit::WebViewClient::canTriggerClipboardWrite):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::canCopyCut):
        (WebKit::EditorClientImpl::canPaste):

2011-04-26  Evan Martin  <evan@chromium.org>

        Unreviewed, Chrome/Mac build fix.

        * WebKit.gypi: Remove extra file.  (I removed a subtraction, but
        forgot to remove the corresponding addition that the subtraction
        was counteracting.)

2011-04-26  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] refactor duplicated list of test source files
        https://bugs.webkit.org/show_bug.cgi?id=59478

        The platform-specific unit test files were listed twice in
        WebKit.gyp: once for the components build, once for the normal
        build.  Refactor this into the unified webkit_unittest_files
        variable.  (It appears the omission of WebPageSerializerTest
        in one instance was an oversight.)

        * WebKit.gyp:
        * WebKit.gypi:

2011-04-26  Robert Sesek  <rsesek@chromium.org>

        Reviewed by Dimitri Glazkov.

        [Chromium] Implement WebKit methods to assist with Cocoa NSTextInput implementation
        https://bugs.webkit.org/show_bug.cgi?id=54969

        * WebKit.gyp:
        * public/WebFrame.h:
        * public/WebWidget.h:
        * public/mac/WebSubstringUtil.h: Added.
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::firstRectForCharacterRange): Return the result rect in window coordinates
        (WebKit::WebFrameImpl::characterIndexForPoint): New method on WebFrame
        * src/WebFrameImpl.h:
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::compositionRange): New method on WebWidget; empty impl
        (WebKit::WebPopupMenuImpl::caretOrSelectionRange): New method on WebWidget; empty impl
        * src/WebPopupMenuImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::compositionRange): New method on WebWidget
        (WebKit::WebViewImpl::caretOrSelectionRange): New method on WebWidget
        * src/WebViewImpl.h:
        * src/mac/WebSubstringUtil.mm: Added.
        (WebKit::WebSubstringUtil::attributedSubstringInRange):

2011-04-26  Adam Barth  <abarth@webkit.org>

        Reviewed by David Levin.

        Moar strict OwnPtr fixes for WebKit/chromium
        https://bugs.webkit.org/show_bug.cgi?id=59437

        This patch fixes all but two strict OwnPtr issues in WebKit/chromium.

        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::setExtraData):
        (WebKit::WebDataSourceImpl::setNextPluginLoadObserver):
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebDataSourceImpl.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::attach):
        (WebKit::WebDevToolsAgentImpl::detach):
        (WebKit::WebDevToolsAgent::interruptAndDispatch):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::printBegin):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::createWebMediaPlayer):
        (WebKit::WebMediaPlayerClientImpl::loadInternal):
        * src/WebSpeechInputControllerMockImpl.cpp:
        (WebKit::WebSpeechInputControllerMockImpl::WebSpeechInputControllerMockImpl):
        * src/WebStorageEventDispatcherImpl.cpp:
        (WebKit::WebStorageEventDispatcherImpl::WebStorageEventDispatcherImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::settings):
        (WebKit::WebViewImpl::applyAutoFillSuggestions):
        (WebKit::WebView::addUserScript):
        (WebKit::WebView::addUserStyleSheet):

2011-04-26  Ruben  <chromium@hybridsource.org>

        Reviewed by Tony Chang.

        Change linux ifdefs for Chromium to Unix instead, allowing
        new Unix ports to be enabled by default
        https://bugs.webkit.org/show_bug.cgi?id=59297

        * src/PlatformBridge.cpp:
        * src/WebFrameImpl.cpp:
        * src/WebViewImpl.cpp:

2011-04-26  Stephen White  <senorblanco@chromium.org>

        Reviewed by Kenneth Russell.

        Partial revert of http://trac.webkit.org/changeset/84893, since it
        triggered a large number of layout test failures.
        https://bugs.webkit.org/show_bug.cgi?id=59459

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):

2011-04-26  Hans Wennborg  <hans@chromium.org>

        Reviewed by Tony Gentilcore.

        IndexedDB: Enable compile-time flag for LevelDB
        https://bugs.webkit.org/show_bug.cgi?id=59457

        Set ENABLE_LEVELDB=1 in features.gypi.

        * features.gypi:

2011-04-26  Pavel Feldman  <pfeldman@google.com>

        Reviewed by Yury Semikhatsky.

        Chromium DevTools: recognize WebP as a valid mimetype in the Chromium port.
        https://bugs.webkit.org/show_bug.cgi?id=59332

        * src/js/DevTools.js:

2011-04-26  Adam Barth  <abarth@webkit.org>

        Reviewed by David Levin.

        WebKit/chromium should play nice with strict OwnPtrs
        https://bugs.webkit.org/show_bug.cgi?id=59434

        This fixes about half the issues.

        * src/ApplicationCacheHost.cpp:
        (WebCore::ApplicationCacheHost::maybeLoadMainResource):
        * src/ApplicationCacheHostInternal.h:
        (WebCore::ApplicationCacheHostInternal::ApplicationCacheHostInternal):
        * src/AutoFillPopupMenuClient.cpp:
        (WebKit::AutoFillPopupMenuClient::initialize):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::initialize):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::start):
        (WebCore::ResourceHandle::ResourceHandle):
        (WebCore::ResourceHandle::loadResourceSynchronously):
        * src/SocketStreamHandle.cpp:
        (WebCore::SocketStreamHandleInternal::connect):

2011-04-25  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, build fix.

        Change FAILS_ to DISABLED_ in r84813.

        * tests/TransparencyWinTest.cpp:
        (WebCore::TEST):

2011-04-25  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by James Robinson.

        Suppress test failure in Chromium webkit_unit_tests.
        https://bugs.webkit.org/show_bug.cgi?id=59358

        Looks like this started failing after
        http://trac.webkit.org/changeset/84631.

        * tests/TransparencyWinTest.cpp:
        (WebCore::TEST):

2011-04-22  Mikhail Naganov  <mnaganov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] Move detailed heap snapshots storage and processing into workers.
        https://bugs.webkit.org/show_bug.cgi?id=59094

        * WebKit.gyp:

2011-04-22  Andrey Kosyakov  <caseq@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Extensions API] misc API cleanup
        https://bugs.webkit.org/show_bug.cgi?id=59194

        * src/js/DevTools.js:
        (WebInspector.platformExtensionAPI):

2011-04-21  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Beth Dakin.

        AX: order AccessibilityRole alphabetically
        https://bugs.webkit.org/show_bug.cgi?id=31524

        * public/WebAccessibilityRole.h:

2011-04-21  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Adam Roben.

        Add a feature define to allow <details> and <summary> to be disabled
        https://bugs.webkit.org/show_bug.cgi?id=59118
        <rdar://problem/9257045>

        * features.gypi:

2011-04-21  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Sam Weinig.

        Add Frame* to the argument lists of canCopyCut and canPaste
        https://bugs.webkit.org/show_bug.cgi?id=59153

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::canCopyCut):
        (WebKit::EditorClientImpl::canPaste):
        * src/EditorClientImpl.h:

2011-04-21  Roland Steiner  <rolandsteiner@chromium.org>

        Reviewed by Dimitri Glazkov.

        Bug 58704 - Decide on node type for ShadowRoot
        https://bugs.webkit.org/show_bug.cgi?id=58704

        Add a new enum entry to WebNode::NodeType for shadow roots.
        Adapt calling sites for new SHADOW_ROOT_NODE node type.

        * public/WebNode.h:
        * src/WebPageSerializerImpl.cpp:
        (WebKit::WebPageSerializerImpl::buildContentForNode):

2011-04-20  Dominic Cooney  <dominicc@chromium.org>

        Reviewed by Dimitri Glazkov.

        layoutTestController can create and destroy shadow DOM
        https://bugs.webkit.org/show_bug.cgi?id=59058

        Chromium DRT relies on the Chromium WebKit API

        * public/WebElement.h:
        * src/WebElement.cpp:
        (WebKit::WebElement::shadowRoot): don't steal a zero refcount
        (WebKit::WebElement::ensureShadowRoot): added
        (WebKit::WebElement::removeShadowRoot): added

2011-04-20  Alexey Marinichev  <amarinichev@chromium.org>

        Reviewed by Kenneth Russell.

        Check for null m_context in WebGLLayerChromium and add resetting platform layer's context in the destructor of GraphicsContext3D.
        https://bugs.webkit.org/show_bug.cgi?id=59045

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3D::~GraphicsContext3D): call into platform
        layer and unregister itself.

2011-04-20  Yuzhu Shen  <yzshen@chromium.org>

        Reviewed by Tony Chang.

        [chromium] linux chromium doesn't set click count for mouse up events.
        https://bugs.webkit.org/show_bug.cgi?id=58921

        The reason why we need such a fix is that the Pepper API passes this information to plugins,
        and some consumers (e.g., Flash) need it to detect double-clicks.

        * src/gtk/WebInputEventFactory.cpp: set click count for mouse up events.
        * tests/WebInputEventFactoryTestGtk.cpp: added test case MouseUpClickCount.

2011-04-20  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] expose title text direction on WebDataSource
        https://bugs.webkit.org/show_bug.cgi?id=59010

        * public/WebDataSource.h:
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::pageTitle):
        (WebKit::WebDataSourceImpl::pageTitleDirection):
        * src/WebDataSourceImpl.h:

2011-04-20  Pavel Feldman  <pfeldman@google.com>

        Reviewed by Yury Semikhatsky.

        Web Inspector: add saveAs into the InspectorFrontendHost binding.
        https://bugs.webkit.org/show_bug.cgi?id=58979

        * public/WebDevToolsFrontendClient.h:
        (WebKit::WebDevToolsFrontendClient::saveAs):
        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::saveAs):
        * src/InspectorFrontendClientImpl.h:
        * src/js/DevTools.js:

2011-04-19  Naoki Takano  <takano.naoki@gmail.com>

        Reviewed by Kent Tamura.

        [Chromium]UI polishes and tweaks to Autofill dropdown menu.
        https://bugs.webkit.org/show_bug.cgi?id=58505

        * src/AutoFillPopupMenuClient.cpp:
        (WebKit::AutoFillPopupMenuClient::initialize): Set AutofillPopup for menuStyle.

2011-04-19  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, attempting build fix.

        Disable leveldb to work around
        http://code.google.com/p/leveldb/issues/detail?id=1.

        * features.gypi:

2011-04-19  Dominic Cooney  <dominicc@chromium.org>

        Reviewed by Dimitri Glazkov.

        Check the type of the wrapper when unwrapping NPObjects to native
        Ranges and Elements
        https://bugs.webkit.org/show_bug.cgi?id=58957

        * src/WebBindings.cpp:
        (WebKit::getRangeImpl): check HasInstance
        (WebKit::getElementImpl): check HasInstance

2011-04-19  Evan Martin  <evan@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] didReceiveTitle API signature should not change
        https://bugs.webkit.org/show_bug.cgi?id=58909

        My previous attempt at a temporary shim was wrong.
        This second try should correctly work with older clients.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didReceiveTitle):

2011-04-19  Jungshik Shin  <jshin@chromium.org>

        Reviewed by Adam Barth

        Fix the compile failure in UniscribeHelperTest.cpp due to
        a change in UniscribeHelper made by the CL for bug 48860
        (r84264)

        http://bugs.webkit.org/show_bug.cgi?id=48860

        * tests/UniscribeHelperTest.cpp:
        (TEST_F):

2011-04-19  Stuart Morgan  <stuartmorgan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Clicking on plugin for first time blocks focus shift
        https://bugs.webkit.org/show_bug.cgi?id=58419

        Switched to using FocusController when moving focus to a plugin
        so that cross-frame focus changes are handled correctly.

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleMouseEvent):

2011-04-19  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: Rename lengthReceived to encodedDataLength/dataLength
        https://bugs.webkit.org/show_bug.cgi?id=58883

        Renamed lengthReceived to encodedDataLength/dataLength.

        * public/WebURLLoaderClient.h:
        (WebKit::WebURLLoaderClient::didReceiveData):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidReceiveContentLength):
        * src/FrameLoaderClientImpl.h:
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):

2011-04-19  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Chromium DevTools: Network panel timing test is flaky
        https://bugs.webkit.org/show_bug.cgi?id=58699

        Fixed network timing test flakiness.

        * src/js/Tests.js:
        (.TestSuite.prototype.testNetworkTiming.finishResource):

2011-04-19  Andrey Kosyakov  <caseq@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: add chrome.devTools alias to webInspector namespace for chromium port
        https://bugs.webkit.org/show_bug.cgi?id=58894

        * src/js/DevTools.js:
        (WebInspector.platformExtensionAPI):

2011-04-19  Kinuko Yasuda  <kinuko@chromium.org>

        Not reviewed; another build fix attempt.

        * src/StorageInfoChromium.cpp:
        (WebCore::StorageInfo::queryUsageAndQuota):
        (WebCore::StorageInfo::requestQuota):
        * src/WebStorageQuotaCallbacksImpl.cpp:
        (WebKit::WebStorageQuotaCallbacksImpl::WebStorageQuotaCallbacksImpl):
        * src/WebStorageQuotaCallbacksImpl.h:

2011-04-19  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by David Levin.

        [Chromium] Enable QUOTA API at runtime if enable-quota flag is given
        https://bugs.webkit.org/show_bug.cgi?id=58784

        * features.gypi: Added ENABLE_QUOTA=1.
        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableQuota): Added.
        (WebKit::WebRuntimeFeatures::isQuotaEnabled): Added.

2011-04-19  John Gregg  <johnnyg@google.com>

        Reviewed by Darin Fisher.

        Enable folder drag-n-drop when using a "webkitdirectory" file input
        https://bugs.webkit.org/show_bug.cgi?id=58401

        This uses a new ChromeClient API to enumerate the directory and 
        return all the files, as if the user had selected that directory
        by clicking the control in the normal way.

        * public/WebViewClient.h:
        (WebKit::WebViewClient::enumerateChosenDirectory):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::enumerateChosenDirectory):
        * src/ChromeClientImpl.h:

2011-04-18  Evan Martin  <evan@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] expose title direction to webkit client
        https://bugs.webkit.org/show_bug.cgi?id=58823

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::didReceiveTitle):
        Add new param to API.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidReceiveTitle):
        Pass new param in API.

2011-04-17  Patrick Gansterer  <paroga@webkit.org>

        Reviewed by Adam Barth.

        Rename PLATFORM(CG) to USE(CG)
        https://bugs.webkit.org/show_bug.cgi?id=58729

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::~GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3DInternal::reshape):
        * src/GraphicsContext3DInternal.h:
        * src/PlatformBridge.cpp:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):

2011-04-15  John Bates  <jbates@google.com>

        Reviewed by Kenneth Russell.

        Change WebGraphicsContext3D virtuals to pure virtuals as intended
        https://bugs.webkit.org/show_bug.cgi?id=58479

        * public/WebGraphicsContext3D.h:

2011-04-15  Shishir Agrawal  <shishir@chromium.org>

        Reviewed by James Robinson.

        Add a flag to guard Page Visibility API changes.
        https://bugs.webkit.org/show_bug.cgi?id=58464

        * features.gypi:

2011-04-15  Charlie Reis  <creis@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] fast/events/popup-allowed-from-gesture-initiated-form-submit.html causing debug ASSERT
        https://bugs.webkit.org/show_bug.cgi?id=44079

        Remove an assert whose invariant doesn't hold.

        * src/FrameLoaderClientImpl.cpp:

2011-04-15  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by David Levin.

        Expose unified Quota API if QUOTA build flag is enabled
        https://bugs.webkit.org/show_bug.cgi?id=58648

        * src/AssertMatchingEnums.cpp: Added enum assertions.
        * src/StorageInfoChromium.cpp: Made a build fix.

2011-04-15  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: Rename rawRequestHeadersText and RawResponseHeadersText to requestHeadersText and responseHeadersText
        https://bugs.webkit.org/show_bug.cgi?id=58650

        * public/WebHTTPLoadInfo.h:
        * src/WebHTTPLoadInfo.cpp:
        (WebKit::WebHTTPLoadInfo::requestHeadersText):
        (WebKit::WebHTTPLoadInfo::setRequestHeadersText):
        (WebKit::WebHTTPLoadInfo::responseHeadersText):
        (WebKit::WebHTTPLoadInfo::setResponseHeadersText):

2011-04-15  Zelidrag Hornung  <zelidrag@chromium.org>

        Reviewed by Darin Fisher.

        Added enums for external file system type and exposed factory function
        for creating File- and DirectoryEntry objects from Chromium side.
        https://bugs.webkit.org/show_bug.cgi?id=58456

        * public/WebFileSystem.h:
        * public/WebFrame.h:
        * src/AssertMatchingEnums.cpp:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFileSystem):
        (WebKit::WebFrameImpl::createFileEntry):
        * src/WebFrameImpl.h:

2011-04-15  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] Create tests for network panel timing, size and raw headers text
        https://bugs.webkit.org/show_bug.cgi?id=58566

        Added network timing, size and raw headers tests for Inspector
        Since chromium used different version of network stack for layout
        tests, these are interactive ui tests (DevToolsSanityTest.TestNetwork*)

        * src/js/Tests.js:
        (.TestSuite.prototype.testNetworkSize.finishResource):
        (.TestSuite.prototype.testNetworkSyncSize.finishResource):
        (.TestSuite.prototype.testNetworkRawHeadersText.finishResource):
        (.TestSuite.prototype.testNetworkTiming.finishResource):

2011-04-14  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: Enable raw HTTP headers support
        https://bugs.webkit.org/show_bug.cgi?id=58259

        Added raw headers text support to inspector.

        * public/WebHTTPLoadInfo.h:
        * src/WebHTTPLoadInfo.cpp:
        (WebKit::WebHTTPLoadInfo::rawRequestHeadersText):
        (WebKit::WebHTTPLoadInfo::setRawRequestHeadersText):
        (WebKit::WebHTTPLoadInfo::rawResponseHeadersText):
        (WebKit::WebHTTPLoadInfo::setRawResponseHeadersText):

2011-04-14  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: ResourceResponse should have encodedDataLength field for synchronous requests transfer size
        https://bugs.webkit.org/show_bug.cgi?id=58447

        FrameLoader now takes encoded data length for synchronous requests from the field with the same name.

        * public/WebHTTPLoadInfo.h:
        * src/WebHTTPLoadInfo.cpp:
        (WebKit::WebHTTPLoadInfo::encodedDataLength):
        (WebKit::WebHTTPLoadInfo::setEncodedDataLength):

2011-04-14  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Remove dependency on chromium skia::PlatformCanvas
        https://bugs.webkit.org/show_bug.cgi?id=57563

        * public/WebCanvas.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::printPage):
        * tests/TransparencyWinTest.cpp:
        (WebCore::drawNativeRect):
        (WebCore::getPixelAt):
        (WebCore::clearTopLayerAlphaChannel):
        (WebCore::clearTopLayerAlphaPixel):
        (WebCore::TEST):

2011-04-14  Brian Salomon  <bsalomon@google.com>

        Reviewed by Kenneth Russell.

        In skia platform call SkBitmap::notifyPixelsChanged on WebGL readback
        https://bugs.webkit.org/show_bug.cgi?id=58543

        No new tests. Tested by fast/canvas/webgl/canvas-test.html

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):

2011-04-14  Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        [chromium] TilingData should return 1 tile if tile size is texture size.
        https://bugs.webkit.org/show_bug.cgi?id=58364

        Update test to properly handle this case.

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-04-14  Bill Budge  <bbudge@chromium.org>

        Reviewed by Darin Fisher.

        Make WebURLLoaderOptions disallow cross origin requests by default.
        https://bugs.webkit.org/show_bug.cgi?id=58475

        No new tests. Exposes no new functionality.

        * public/WebURLLoaderOptions.h:
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):

2011-04-13  James Robinson  <jamesr@chromium.org>

        Reviewed by Simon Fraser.

        Allow setting composited backing stores for scrollbars and scroll corners
        https://bugs.webkit.org/show_bug.cgi?id=57202

        Remove a lot of scrollbar hacks from the chromium compositor implementation now that
        scrollbars go to real layers.

        * src/WebScrollbarImpl.cpp:
        (WebKit::WebScrollbarImpl::invalidateScrollCornerRect):
        (WebKit::WebScrollbarImpl::scrollCornerPresent):
        * src/WebScrollbarImpl.h:
        (WebKit::WebScrollbarImpl::scrollCornerRect):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::reallocateRenderer):

2011-04-13  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Jian Li.

        [chromium] Remove unnecessary #define now that chrome has rolled to the latest WebKit
        https://bugs.webkit.org/show_bug.cgi?id=58474

        * DEPS:
        * public/WebSpellCheckClient.h:

2011-04-13  Zhenyao Mo  <zmo@google.com>

        Reviewed by Kenneth Russell.

        Extension3D needs to provide a way to check if an extension is enabled
        https://bugs.webkit.org/show_bug.cgi?id=58410

        Implement isEnabled() in chromium port.

        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::isEnabled):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::isExtensionEnabled):
        * src/GraphicsContext3DInternal.h:

2011-04-13  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by David Levin.

        Add mock implementation and plumbing code for unified Quota API
        https://bugs.webkit.org/show_bug.cgi?id=57927

        Added plumbing code for the quota API, that is based on the
        discussion on public-webapps:
        http://lists.w3.org/Archives/Public/public-webapps/2011JanMar/0346.html

        * WebKit.gyp: Added new file entries.
        * src/StorageInfoChromium.cpp: Added.
        * src/WebStorageQuotaCallbacksImpl.cpp: Added. An implementation of
        WebStorageQuotaCallbacks.
        * src/WebStorageQuotaCallbacksImpl.h: Added.

2011-04-12  Hans Wennborg  <hans@chromium.org>

        Reviewed by Jeremy Orlow.

        Chromium: Set ENABLE_LEVELDB=1 and add leveldb and snappy to DEPS
        https://bugs.webkit.org/show_bug.cgi?id=58343

        Set ENABLE_LEVELDB=1 so that code gets compiled by the EWS bots.
        Add the necessary dependencies to the DEPS file.

        * DEPS:
        * features.gypi:

2011-04-12  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [Chromium] Add WebSettings::setValidationMessageTimerMagnification()
        https://bugs.webkit.org/show_bug.cgi?id=57426

        * public/WebSettings.h: Declare new function.
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setValidationMessageTimerMagnification):
         Passing the specified value to WebCore::Settings.
        * src/WebSettingsImpl.h: Declare new function.

2011-04-12  Antoine Labour  <piman@chromium.org>

        Reviewed by Kenneth Russell.

        Allow WebView users to recreate dependent contexts after a context lost
        event. Similarly to the startup case, a temporary context gets created,
        that gets used by the layer renderer once it itself gets recreated.
        https://bugs.webkit.org/show_bug.cgi?id=58385

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::reallocateRenderer): use the temporary context to
        recreate the layer renderer if it's valid.
        (WebKit::WebViewImpl::graphicsContext3D): create a temporary context if
        the layer renderer's context is lost.

2011-04-12  Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        [chromium] TilingData mishandles very small texture sizes
        https://bugs.webkit.org/show_bug.cgi?id=58364

        Update test to properly handle texture sizes of 0-3.

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-04-12  Jian Li  <jianli@chromium.org>

        Unreviewed, rolling out r83649.
        http://trac.webkit.org/changeset/83649
        https://bugs.webkit.org/show_bug.cgi?id=57563

        This patch causes compiling errors for chromium

        * public/WebCanvas.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::printPage):
        * tests/TransparencyWinTest.cpp:
        (WebCore::drawNativeRect):
        (WebCore::getPixelAt):
        (WebCore::clearTopLayerAlphaChannel):
        (WebCore::clearTopLayerAlphaPixel):
        (WebCore::TEST):

2011-04-12  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Jian Li.

        [chromium] Fix spellcheck regression in context menus
        https://bugs.webkit.org/show_bug.cgi?id=58386

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):

2011-04-12  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Tony Chang.

        [chromium] Use new dragTargetDragEnter() function signature
        https://bugs.webkit.org/show_bug.cgi?id=58303

        After WebKit/chromium/DEPS rolls to chromium r80907, the drag identity
        based version of dragTargetDragEnter() is no longer used; remove it.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:

2011-04-12  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Remove dependency on chromium skia::PlatformCanvas
        https://bugs.webkit.org/show_bug.cgi?id=57563

        * public/WebCanvas.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::printPage):
        * tests/TransparencyWinTest.cpp:
        (WebCore::drawNativeRect):
        (WebCore::getPixelAt):
        (WebCore::clearTopLayerAlphaChannel):
        (WebCore::clearTopLayerAlphaPixel):
        (WebCore::TEST):

2011-04-12  Adam Barth  <abarth@webkit.org>

        Revert unintentional changes to WebKit.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:

2011-04-11  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Darin Fisher.

        [chromium]: Get the list of misspelled words in the WebKit code insetad of in chromium's RenderView
        https://bugs.webkit.org/show_bug.cgi?id=58260

        * public/WebContextMenuData.h:
        * public/WebSpellCheckClient.h:
        (WebKit::WebSpellCheckClient::spellCheck):
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::checkSpellingOfString):

2011-04-12  Bill Budge  <bbudge@chromium.org>

        Reviewed by Darin Fisher.

        Move the WebURLLoaderOptions struct into its own file and rename the CrossOriginRequestPolicy enum to conform to the WebKit coding standard.
        https://bugs.webkit.org/show_bug.cgi?id=58287

        No new tests. No new functionality exposed.

        * WebKit.gyp:
        * public/WebURLLoader.h:
        * public/WebURLLoaderOptions.h: Added.
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        * src/AssociatedURLLoader.h:

2011-04-11  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [chromium] script formatting doesn't work when chromium is built with debug_devtools=1.
        https://bugs.webkit.org/show_bug.cgi?id=58232

        * WebKit.gyp:

2011-04-11  John Bates  <jbates@google.com>

        Reviewed by Kenneth Russell.

        chromium support for glSetLatch and glWaitLatch between 3D contexts
        https://bugs.webkit.org/show_bug.cgi?id=58003

        * public/WebGraphicsContext3D.h:
        (WebKit::WebGraphicsContext3D::getParentToChildLatchCHROMIUM):
        (WebKit::WebGraphicsContext3D::getChildToParentLatchCHROMIUM):
        (WebKit::WebGraphicsContext3D::waitLatchCHROMIUM):
        (WebKit::WebGraphicsContext3D::setLatchCHROMIUM):
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::waitLatchCHROMIUM):
        (WebCore::Extensions3DChromium::setLatchCHROMIUM):
        * src/GraphicsContext3DChromium.cpp:
        * src/GraphicsContext3DInternal.h:

2011-04-11  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Tony Chang.

        [chromium] Crash in WebViewImpl::caretOrSelectionBounds
        https://bugs.webkit.org/show_bug.cgi?id=58269

        The bug was caused by caretOrSelectionBounds's incorrectly assuming
        SelectionController::toNormalizedRange to always return a non-null Range.

        Fixed the bug by adding a null pointer check. Also replaced calls to deprecatedNode
        by containerNode() and calls to SelectionController::start() and SelectionController::end()
        by calls to SelectionController::base() and SelectionController::extent() because
        selection extends from base to extent, not from start to end.

        Test: editing/selection/extend-over-file-input-by-drag-crash.html

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::caretOrSelectionBounds):

2011-04-11  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Eric Carlson.

        Rename MediaControls to MediaControlRootElement.
        https://bugs.webkit.org/show_bug.cgi?id=58250

        Mechanical move using do-webcore-rename.

2011-04-11  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Dmitry Titov.

        [chromium] Implement image/png support in DataTransferItems
        https://bugs.webkit.org/show_bug.cgi?id=58106

        Add glue for reading image data from clipboard.

        * DEPS:
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::clipboardReadImage):

2011-04-05  Hans Wennborg  <hans@chromium.org>

        Reviewed by Steve Block.

        IndexedDB: Introduce skeleton for LevelDB backend
        https://bugs.webkit.org/show_bug.cgi?id=57827

        * features.gypi:
            Add ENABLE_LEVELDB=0.
        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::open):
            Remove pre-roll open() function.

2011-04-10  Kent Tamura  <tkent@chromium.org>

        [Chromium] Fix build errors on "Win Shared Builder (dbg)"

        * WebKit.gyp: Exclude WebFrameTest.cpp for WEBKIT_DLL.

2011-04-10  Kent Tamura  <tkent@chromium.org>

        Unreviewed, rolling out r83353.
        http://trac.webkit.org/changeset/83353
        https://bugs.webkit.org/show_bug.cgi?id=58106

        The new test doesn't pass on all Chromium platforms.

        * DEPS:
        * src/PlatformBridge.cpp:

2011-04-09  Sreeram Ramachandran  <sreeram@google.com>

        Reviewed by Ryosuke Niwa.

        Gather data on modal dialogs shown during unload events
        https://bugs.webkit.org/show_bug.cgi?id=58115

        Implementation of the new API to receive notifications of modal dialogs
        dispatched during unload events. Count the notifications through a histogram.

        No tests because it's not clear how to test chromium histograms from webkit.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::willRunModalDialogDuringPageDismissal):
        * src/ChromeClientImpl.h:

2011-04-08  Aaron Boodman  <aa@chromium.org>

        Reviewed by Dmitry Titov.

        Re-land http://trac.webkit.org/changeset/83007. This works
        without changes after https://bugs.webkit.org/show_bug.cgi?id=58110.

        https://bugs.webkit.org/show_bug.cgi?id=58096

        * WebKit.gyp:
        * WebKit.gypi:
        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrame::frameForContext):
        * tests/WebFrameTest.cpp:
        (WebKit::WebFrameTest::WebFrameTest):
        (WebKit::WebFrameTest::registerMockedURLLoad):
        (WebKit::WebFrameTest::loadFrame):
        (WebKit::TEST_F):

2011-04-08  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Dmitry Titov.

        [chromium] Implement image/png support in DataTransferItems
        https://bugs.webkit.org/show_bug.cgi?id=58106

        Add glue for reading image data from clipboard.

        * DEPS:
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::clipboardReadImage):

2011-04-08  Alpha Lam  <hclam@chromium.org>

        Unreviewed, rolling out r83335.
        http://trac.webkit.org/changeset/83335
        https://bugs.webkit.org/show_bug.cgi?id=53556

        GTK and QT bots are broken

        * features.gypi:

2011-04-07  Anna Cavender  <annacc@chromium.org>

        Reviewed by Eric Carlson.

        Setup ENABLE(TRACK) feature define
        https://bugs.webkit.org/show_bug.cgi?id=53556

        * features.gypi:

2011-04-08  Dmitry Titov  <dimich@chromium.org>

        Reviewed by Adam Barth.

        [Chromium] Remove unneeded usage of V8::Lockers in IDB tests.
        https://bugs.webkit.org/show_bug.cgi?id=58110
        Since they are simple one-thread tests.
        This code parallels the code in Chromium's idb bindings that uses v8 Lockers in utility process,
        which is equally not needed since there is only one thread running v8 in that process.

        * tests/IDBBindingUtilitiesTest.cpp:

2011-04-07  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: add test for script formatter worker.
        https://bugs.webkit.org/show_bug.cgi?id=57447

        * WebKit.gyp:

2011-04-08  Kent Tamura  <tkent@chromium.org>

        [Chromium] The second attempt of fixing for Windows (dbg)(shared) build.

        * WebKit.gyp: webkit should not depend on webkit_support.

2011-04-08  Kent Tamura  <tkent@chromium.org>

        [Chromium] Build fix for Windows (dbg)(shared).

        * WebKit.gyp: Add webkit_support dependency, which is required for webkit_unittest_files.

2011-04-07  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] Add WebKit API to query and request unified offline-storage quota
        https://bugs.webkit.org/show_bug.cgi?id=57849
        Just adding the API, this does not do anything yet.

        The API is based on the public discussion for unified quota API:
        http://lists.w3.org/Archives/Public/public-webapps/2011JanMar/0346.html
        (The detail is not yet fully specified and might be subject to change.)

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::queryStorageUsageAndQuota): Added.
        (WebKit::WebFrameClient::requestStorageQuota): Added.
        * public/WebStorageQuotaCallbacks.h: Added.
        (WebKit::WebStorageQuotaCallbacks::~WebStorageQuotaCallbacks):
        * public/WebStorageQuotaType.h: Added.

2011-04-07  Dominic Cooney  <dominicc@google.com>

        Reviewed by Dimitri Glazkov.

        Let shadow DOM have a list of nodes at the top level of a shadow.
        https://bugs.webkit.org/show_bug.cgi?id=57813

        * src/WebElement.cpp:
        (WebKit::WebElement::shadowRoot): shadow roots are ContainerNodes now

2011-04-07  Magnus Danielsson  <public@fuzzac.com>

        Reviewed by Darin Fisher.

        [chromium] WebPageSerializerImpl doesn't serialize sub-frames correctly
        https://bugs.webkit.org/show_bug.cgi?id=53897

        When serializing a web page using 'save page as', sub-frames and resources gets
        saved in a sub-directory. However, frame elements didn't get updated to reference
        these saved sub-frames, but were still referencing the original url. So when opening
        a saved web page, any sub-frames would get pulled in from the original url rather than 
        what was saved.

        In addition to this, sub-frames in the sub-directory erroneously had the name of the
        sub-directory prepended to the path of resources located in the same sub-directory.

        * src/WebPageSerializerImpl.cpp:
        (WebKit::WebPageSerializerImpl::openTagToStrne: Fixed resource paths in sub-frames. 
        Also made sure sub-frames are referenced correctly from parent frame.
        (WebKit::WebPageSerializerImpl::endTagToString): Removed constness from argument.
        (WebKit::WebPageSerializerImpl::buildContentForNode): Ditto.
        * src/WebPageSerializerImpl.h:

2011-04-07  Nat Duca  <nduca@chromium.org>

        Reviewed by David Levin.

        [chromium] Compositor thread infrastructure
        https://bugs.webkit.org/show_bug.cgi?id=56131

        Tests for chrome compositor thread and related infrastructure.

        * WebKit.gyp:
        * WebKit.gypi:
        * tests/CCThreadTaskTest.cpp: Added.
        (WebCore::TEST):
        * tests/CCThreadTest.cpp: Added.
        (WebCore::TEST):
        (WebCore::PingPongUsingCondition::ping):
        (WebCore::PingPongTestUsingTasks::ping):
        (WebCore::PingPongTestUsingTasks::pong):
        * tests/RunAllTests.cpp:
        (main):

2011-04-07  Andrew Scherkus  <scherkus@chromium.org>

        Revert ENABLE_TRACK patch due to compile failures.

        * features.gypi:

2011-04-07  Pavel Feldman  <pfeldman@google.com>

        Not reviewed: rolling chromium DEPS 80421:80767.

        * DEPS:

2011-04-07  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] Rename didReceiveData2 to didReceiveData as part of enabling transfer size support.
        https://bugs.webkit.org/show_bug.cgi?id=58036

        Renamed didReceiveData2 to didReceiveData.

        * public/WebURLLoaderClient.h:
        (WebKit::WebURLLoaderClient::didReceiveData):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):

2011-04-07  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] Migrate didReceiveData in upstream for plugins as part of enabling transfer size support.
        https://bugs.webkit.org/show_bug.cgi?id=58034

        Migrated didReceiveData to support new lengthReceived parameter.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):

2011-04-06  Asanka Herath  <asanka@chromium.org>

        Reviewed by Darin Fisher.

        Add new TargetType: TargetIsFavicon

        https://bugs.webkit.org/show_bug.cgi?id=57659

        * public/WebURLRequest.h:

2011-04-06  Alok Priyadarshi  <alokp@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] Add settings API to enable accelerated drawing
        https://bugs.webkit.org/show_bug.cgi?id=57863
        
        If accelerated drawing is enabled we try to render content and
        root layers using GPU. Please note that this setting is ignored if
        accelerated compositing is disabled.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setAcceleratedDrawingEnabled):
        * src/WebSettingsImpl.h:

2011-04-05  Zelidrag Hornung  <zelidrag@chromium.org>

        Reviewed by David Levin.

        Added MediaTypeFile enum value to WebContextMenuData::MediaType.
        https://bugs.webkit.org/show_bug.cgi?id=57566

        * public/WebContextMenuData.h:

2011-04-05  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r83007.
        http://trac.webkit.org/changeset/83007
        https://bugs.webkit.org/show_bug.cgi?id=57920

        Broke WebFrameTest.FrameForEnteredContext on Chromium-win and
        Chromium-mac (Requested by tkent on #webkit).

        * WebKit.gyp:
        * WebKit.gypi:
        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * tests/WebFrameTest.cpp:
        (WebKit::WebFrameTest::WebFrameTest):
        (WebKit::WebFrameTest::registerMockedURLLoad):
        (WebKit::WebFrameTest::serveRequests):
        (WebKit::TEST_F):

2011-04-05  James Kozianski  <koz@chromium.org>

        Unreviewed, rolling out r82976.
        http://trac.webkit.org/changeset/82976
        https://bugs.webkit.org/show_bug.cgi?id=57566

        Breaks chromium canary build

        * public/WebContextMenuData.h:

2011-04-05  Aaron Boodman  <aa@chromium.org>

        Reviewed by Adam Barth.

        Add ability to get frame from v8 context to chromium WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=57516

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrame::frameForV8Context):

2011-04-05  Nico Weber  <thakis@chromium.org>

        Reviewed by Dimitri Glazkov.

        [chromium] Don't have 'using namespace' declarations in header files
        https://bugs.webkit.org/show_bug.cgi?id=57882

        * src/EventListenerWrapper.cpp:
        * src/EventListenerWrapper.h:
        * src/VideoFrameChromiumImpl.h:
        * src/WebDOMEventListener.cpp:
        * src/WebDOMEventListenerPrivate.cpp:
        * src/WebDOMEventListenerPrivate.h:
        (WebKit::WebDOMEventListenerPrivate::ListenerInfo::ListenerInfo):

2011-04-05  Zelidrag Hornung  <zelidrag@chromium.org>

        Reviewed by David Levin.

        Added MediaTypeFile enum value to WebContextMenuData::MediaType.
        https://bugs.webkit.org/show_bug.cgi?id=57566

        * public/WebContextMenuData.h:

2011-04-04  MORITA Hajime  <morrita@google.com>

        Reviewed by Ryosuke Niwa.

        [Refactoring] SpellCheckingResult should be replaced with TextCheckingResult
        https://bugs.webkit.org/show_bug.cgi?id=56085

        Followed the signature change.
        
        * src/EditorClientImpl.h:
        * src/EditorClientImpl.cpp:
        * src/WebTextCheckingCompletionImpl.cpp

2011-04-05  Hans Wennborg  <hans@chromium.org>

        Reviewed by Adam Barth

        Clean up IndexedDB WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=57507

        Rename the backend proxy files that didn't have Backend in their name.
        Everything in WebKit should be in the WebKit namespace.
        Put everything behind the feature flag so we're consistient.
        Put the feature flag #if above includes.

        * WebKit.gyp:
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::create):
        (WebKit::IDBCallbacksProxy::IDBCallbacksProxy):
        (WebKit::IDBCallbacksProxy::onError):
        (WebKit::IDBCallbacksProxy::onSuccess):
        * src/IDBCallbacksProxy.h:
        * src/IDBCursorBackendProxy.cpp:
        (WebKit::IDBCursorBackendProxy::create):
        (WebKit::IDBCursorBackendProxy::IDBCursorBackendProxy):
        * src/IDBCursorBackendProxy.h:
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::create):
        (WebKit::IDBDatabaseBackendProxy::IDBDatabaseBackendProxy):
        (WebKit::IDBDatabaseBackendProxy::~IDBDatabaseBackendProxy):
        (WebKit::IDBDatabaseBackendProxy::name):
        (WebKit::IDBDatabaseBackendProxy::version):
        (WebKit::IDBDatabaseBackendProxy::objectStoreNames):
        (WebKit::IDBDatabaseBackendProxy::createObjectStore):
        (WebKit::IDBDatabaseBackendProxy::deleteObjectStore):
        (WebKit::IDBDatabaseBackendProxy::setVersion):
        (WebKit::IDBDatabaseBackendProxy::transaction):
        (WebKit::IDBDatabaseBackendProxy::close):
        (WebKit::IDBDatabaseBackendProxy::open):
        * src/IDBDatabaseCallbacksProxy.cpp:
        (WebKit::IDBDatabaseCallbacksProxy::create):
        (WebKit::IDBDatabaseCallbacksProxy::IDBDatabaseCallbacksProxy):
        * src/IDBDatabaseCallbacksProxy.h:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):
        (WebKit::IDBFactoryBackendProxy::open):
        * src/IDBFactoryBackendProxy.h:
        * src/IDBIndexBackendProxy.cpp:
        (WebKit::IDBIndexBackendProxy::create):
        (WebKit::IDBIndexBackendProxy::IDBIndexBackendProxy):
        * src/IDBIndexBackendProxy.h:
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::create):
        (WebKit::IDBObjectStoreBackendProxy::IDBObjectStoreBackendProxy):
        (WebKit::IDBObjectStoreBackendProxy::~IDBObjectStoreBackendProxy):
        (WebKit::IDBObjectStoreBackendProxy::name):
        (WebKit::IDBObjectStoreBackendProxy::keyPath):
        (WebKit::IDBObjectStoreBackendProxy::indexNames):
        (WebKit::IDBObjectStoreBackendProxy::get):
        (WebKit::IDBObjectStoreBackendProxy::put):
        (WebKit::IDBObjectStoreBackendProxy::deleteFunction):
        (WebKit::IDBObjectStoreBackendProxy::clear):
        (WebKit::IDBObjectStoreBackendProxy::createIndex):
        (WebKit::IDBObjectStoreBackendProxy::index):
        (WebKit::IDBObjectStoreBackendProxy::deleteIndex):
        (WebKit::IDBObjectStoreBackendProxy::openCursor):
        * src/IDBObjectStoreBackendProxy.h: Added.
        * src/IDBObjectStoreProxy.h: Removed.
        * src/IDBTransactionBackendProxy.cpp:
        (WebKit::IDBTransactionBackendProxy::create):
        (WebKit::IDBTransactionBackendProxy::IDBTransactionBackendProxy):
        (WebKit::IDBTransactionBackendProxy::objectStore):
        * src/IDBTransactionBackendProxy.h:
        (WebKit::IDBTransactionBackendProxy::getWebIDBTransaction):
        * src/IDBTransactionCallbacksProxy.cpp:
        (WebKit::IDBTransactionCallbacksProxy::create):
        (WebKit::IDBTransactionCallbacksProxy::IDBTransactionCallbacksProxy):
        * src/IDBTransactionCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onError):
        (WebKit::WebIDBCallbacksImpl::onSuccess):
        * src/WebIDBCallbacksImpl.h:
        * src/WebIDBCursorImpl.cpp:
        * src/WebIDBCursorImpl.h:
        * src/WebIDBDatabaseCallbacksImpl.cpp:
        (WebKit::WebIDBDatabaseCallbacksImpl::onVersionChange):
        * src/WebIDBDatabaseCallbacksImpl.h:
        * src/WebIDBDatabaseError.cpp:
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::WebIDBFactoryImpl):
        * src/WebIDBFactoryImpl.h:
        * src/WebIDBIndexImpl.cpp:
        * src/WebIDBIndexImpl.h:
        * src/WebIDBKey.cpp:
        (WebKit::WebIDBKey::createFromValueAndKeyPath):
        (WebKit::WebIDBKey::injectIDBKeyIntoSerializedValue):
        * src/WebIDBKeyPath.cpp:
        (WebKit::WebIDBKeyPath::operator const WTF::Vector<IDBKeyPathElement, 0>&):
        * src/WebIDBKeyRange.cpp:
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        * src/WebIDBTransactionCallbacksImpl.cpp:
        * src/WebIDBTransactionCallbacksImpl.h:
        * src/WebIDBTransactionImpl.cpp:
        * src/WebIDBTransactionImpl.h:

2011-04-05  Sailesh Agrawal  <sail@chromium.org>

        Reviewed by Darin Fisher.

        Don't clear existing files if the user cancels the file chooser dialog.
        https://bugs.webkit.org/show_bug.cgi?id=55200

        * src/WebFileChooserCompletionImpl.cpp:
        (WebKit::WebFileChooserCompletionImpl::didChooseFile):

2011-04-05  John Mellor  <johnme@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Minor cleanup: simplify WebFrameImpl by using contentsToWindow instead of convertToContainingWindow.
        https://bugs.webkit.org/show_bug.cgi?id=55681

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::find):
        (WebKit::WebFrameImpl::scopeStringMatches):

2011-04-05  Adam Barth  <abarth@webkit.org>

        Roll Chromium DEPS.

        * DEPS: Rolled!

2011-04-04  Chang Shu  <cshu@webkit.org>

        Reviewed by Ryosuke Niwa.

        setContentEditable with true/false/inherit string is not working properly
        https://bugs.webkit.org/show_bug.cgi?id=52058

        Move isContentEditable from HTMLElement to Node. WebKit should only access isContentEditable
        as rendererIsEditable is for WebCore internal use.

        * src/WebNode.cpp:
        (WebKit::WebNode::isContentEditable):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setFocus):
        (WebKit::WebViewImpl::setComposition):
        (WebKit::WebViewImpl::confirmComposition):

2011-04-04  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Dan Bernstein.

        REGRESSION (WebKit2): Caps-Lock indicator sometimes doesn't appear in WebKit2
        https://bugs.webkit.org/show_bug.cgi?id=51230
        <rdar://problem/8780989>

        * src/WebViewImpl.cpp: (WebKit::WebViewImpl::keyEvent): Moved Caps Lock handling from
        WebKits to WebCore, because WebKit shouldn't be smart.

2011-04-01  Adam Barth  <abarth@webkit.org>

        Attempt to fix the Chromium build using the great and powerful git.
        This patch should be the remaining part of reverting Jeremy's ill-fated
        refactoring.

        * src/IDBDatabaseProxy.cpp:
        (WebCore::IDBDatabaseProxy::create):
        (WebCore::IDBDatabaseProxy::IDBDatabaseProxy):
        (WebCore::IDBDatabaseProxy::~IDBDatabaseProxy):
        (WebCore::IDBDatabaseProxy::name):
        (WebCore::IDBDatabaseProxy::version):
        (WebCore::IDBDatabaseProxy::objectStoreNames):
        (WebCore::IDBDatabaseProxy::createObjectStore):
        (WebCore::IDBDatabaseProxy::deleteObjectStore):
        (WebCore::IDBDatabaseProxy::setVersion):
        (WebCore::IDBDatabaseProxy::transaction):
        (WebCore::IDBDatabaseProxy::close):
        (WebCore::IDBDatabaseProxy::open):
        * src/IDBDatabaseProxy.h:
        * src/IDBObjectStoreProxy.cpp:
        (WebCore::IDBObjectStoreProxy::create):
        (WebCore::IDBObjectStoreProxy::IDBObjectStoreProxy):
        (WebCore::IDBObjectStoreProxy::~IDBObjectStoreProxy):
        (WebCore::IDBObjectStoreProxy::name):
        (WebCore::IDBObjectStoreProxy::keyPath):
        (WebCore::IDBObjectStoreProxy::indexNames):
        (WebCore::IDBObjectStoreProxy::get):
        (WebCore::IDBObjectStoreProxy::put):
        (WebCore::IDBObjectStoreProxy::deleteFunction):
        (WebCore::IDBObjectStoreProxy::clear):
        (WebCore::IDBObjectStoreProxy::createIndex):
        (WebCore::IDBObjectStoreProxy::index):
        (WebCore::IDBObjectStoreProxy::deleteIndex):
        (WebCore::IDBObjectStoreProxy::openCursor):

2011-04-01  Adam Barth  <abarth@webkit.org>

        Move these files back to their old locations.  I'm not sure why the
        rollout didn't move them properly.

        * src/IDBDatabaseBackendProxy.cpp: Removed.
        * src/IDBDatabaseBackendProxy.h: Removed.
        * src/IDBDatabaseProxy.cpp: Copied from Source/WebKit/chromium/src/IDBDatabaseBackendProxy.cpp.
        * src/IDBDatabaseProxy.h: Copied from Source/WebKit/chromium/src/IDBDatabaseBackendProxy.h.
        * src/IDBObjectStoreBackendProxy.cpp: Removed.
        * src/IDBObjectStoreProxy.cpp: Copied from Source/WebKit/chromium/src/IDBObjectStoreBackendProxy.cpp.

2011-04-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r82738.
        http://trac.webkit.org/changeset/82738
        https://bugs.webkit.org/show_bug.cgi?id=57684

        Broke storage/indexeddb/objectstore-autoincrement.html and
        InjectIDBKey (Requested by abarth|gardening on #webkit).

        * WebKit.gyp:
        * src/IDBCallbacksProxy.cpp:
        (WebCore::IDBCallbacksProxy::create):
        (WebCore::IDBCallbacksProxy::IDBCallbacksProxy):
        (WebCore::IDBCallbacksProxy::onError):
        (WebCore::IDBCallbacksProxy::onSuccess):
        * src/IDBCallbacksProxy.h:
        * src/IDBCursorBackendProxy.cpp:
        (WebCore::IDBCursorBackendProxy::create):
        (WebCore::IDBCursorBackendProxy::IDBCursorBackendProxy):
        * src/IDBCursorBackendProxy.h:
        * src/IDBDatabaseCallbacksProxy.cpp:
        (WebCore::IDBDatabaseCallbacksProxy::create):
        (WebCore::IDBDatabaseCallbacksProxy::IDBDatabaseCallbacksProxy):
        * src/IDBDatabaseCallbacksProxy.h:
        * src/IDBDatabaseProxy.cpp: Renamed from Source/WebKit/chromium/src/IDBDatabaseBackendProxy.cpp.
        (WebCore::IDBDatabaseProxy::create):
        (WebCore::IDBDatabaseProxy::IDBDatabaseProxy):
        (WebCore::IDBDatabaseProxy::~IDBDatabaseProxy):
        (WebCore::IDBDatabaseProxy::name):
        (WebCore::IDBDatabaseProxy::version):
        (WebCore::IDBDatabaseProxy::objectStoreNames):
        (WebCore::IDBDatabaseProxy::createObjectStore):
        (WebCore::IDBDatabaseProxy::deleteObjectStore):
        (WebCore::IDBDatabaseProxy::setVersion):
        (WebCore::IDBDatabaseProxy::transaction):
        (WebCore::IDBDatabaseProxy::close):
        (WebCore::IDBDatabaseProxy::open):
        * src/IDBDatabaseProxy.h: Renamed from Source/WebKit/chromium/src/IDBDatabaseBackendProxy.h.
        * src/IDBFactoryBackendProxy.cpp:
        (WebCore::IDBFactoryBackendProxy::IDBFactoryBackendProxy):
        (WebCore::IDBFactoryBackendProxy::open):
        * src/IDBFactoryBackendProxy.h:
        * src/IDBIndexBackendProxy.cpp:
        (WebCore::IDBIndexBackendProxy::create):
        (WebCore::IDBIndexBackendProxy::IDBIndexBackendProxy):
        * src/IDBIndexBackendProxy.h:
        * src/IDBObjectStoreBackendProxy.h: Removed.
        * src/IDBObjectStoreProxy.cpp: Renamed from Source/WebKit/chromium/src/IDBObjectStoreBackendProxy.cpp.
        (WebCore::IDBObjectStoreProxy::create):
        (WebCore::IDBObjectStoreProxy::IDBObjectStoreProxy):
        (WebCore::IDBObjectStoreProxy::~IDBObjectStoreProxy):
        (WebCore::IDBObjectStoreProxy::name):
        (WebCore::IDBObjectStoreProxy::keyPath):
        (WebCore::IDBObjectStoreProxy::indexNames):
        (WebCore::IDBObjectStoreProxy::get):
        (WebCore::IDBObjectStoreProxy::put):
        (WebCore::IDBObjectStoreProxy::deleteFunction):
        (WebCore::IDBObjectStoreProxy::clear):
        (WebCore::IDBObjectStoreProxy::createIndex):
        (WebCore::IDBObjectStoreProxy::index):
        (WebCore::IDBObjectStoreProxy::deleteIndex):
        (WebCore::IDBObjectStoreProxy::openCursor):
        * src/IDBObjectStoreProxy.h: Added.
        * src/IDBTransactionBackendProxy.cpp:
        (WebCore::IDBTransactionBackendProxy::create):
        (WebCore::IDBTransactionBackendProxy::IDBTransactionBackendProxy):
        (WebCore::IDBTransactionBackendProxy::objectStore):
        * src/IDBTransactionBackendProxy.h:
        (WebCore::IDBTransactionBackendProxy::getWebIDBTransaction):
        * src/IDBTransactionCallbacksProxy.cpp:
        (WebCore::IDBTransactionCallbacksProxy::create):
        (WebCore::IDBTransactionCallbacksProxy::IDBTransactionCallbacksProxy):
        * src/IDBTransactionCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        (WebCore::WebIDBCallbacksImpl::onError):
        (WebCore::WebIDBCallbacksImpl::onSuccess):
        * src/WebIDBCallbacksImpl.h:
        * src/WebIDBCursorImpl.cpp:
        * src/WebIDBCursorImpl.h:
        * src/WebIDBDatabaseCallbacksImpl.cpp:
        (WebCore::WebIDBDatabaseCallbacksImpl::onVersionChange):
        * src/WebIDBDatabaseCallbacksImpl.h:
        * src/WebIDBDatabaseError.cpp:
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::WebIDBFactoryImpl):
        * src/WebIDBFactoryImpl.h:
        * src/WebIDBIndexImpl.cpp:
        * src/WebIDBIndexImpl.h:
        * src/WebIDBKey.cpp:
        (WebKit::WebIDBKey::createFromValueAndKeyPath):
        (WebKit::WebIDBKey::injectIDBKeyIntoSerializedValue):
        * src/WebIDBKeyPath.cpp:
        (WebKit::WebIDBKeyPath::operator const WTF::Vector<WebCore::IDBKeyPathElement, 0>&):
        * src/WebIDBKeyRange.cpp:
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        * src/WebIDBTransactionCallbacksImpl.cpp:
        * src/WebIDBTransactionCallbacksImpl.h:
        * src/WebIDBTransactionImpl.cpp:
        * src/WebIDBTransactionImpl.h:

2011-03-30  Jeremy Orlow  <jorlow@chromium.org>

        Reviewed by Nate Chapin.

        Clean up IndexedDB WebKit API
        https://bugs.webkit.org/show_bug.cgi?id=57507

        Rename the backend proxy files that didn't have Backend in their name.
        Everything in WebKit should be in the WebKit namespace.
        Put everything behind the feature flag so we're consistient.
        Put the feature flag #if above includes.

        * WebKit.gyp:
        * src/IDBCallbacksProxy.cpp:
        (WebKit::IDBCallbacksProxy::create):
        (WebKit::IDBCallbacksProxy::IDBCallbacksProxy):
        (WebKit::IDBCallbacksProxy::onError):
        (WebKit::IDBCallbacksProxy::onSuccess):
        * src/IDBCallbacksProxy.h:
        * src/IDBCursorBackendProxy.cpp:
        (WebKit::IDBCursorBackendProxy::create):
        (WebKit::IDBCursorBackendProxy::IDBCursorBackendProxy):
        * src/IDBCursorBackendProxy.h:
        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::create):
        (WebKit::IDBDatabaseBackendProxy::IDBDatabaseBackendProxy):
        (WebKit::IDBDatabaseBackendProxy::~IDBDatabaseBackendProxy):
        (WebKit::IDBDatabaseBackendProxy::name):
        (WebKit::IDBDatabaseBackendProxy::version):
        (WebKit::IDBDatabaseBackendProxy::objectStoreNames):
        (WebKit::IDBDatabaseBackendProxy::createObjectStore):
        (WebKit::IDBDatabaseBackendProxy::deleteObjectStore):
        (WebKit::IDBDatabaseBackendProxy::setVersion):
        (WebKit::IDBDatabaseBackendProxy::transaction):
        (WebKit::IDBDatabaseBackendProxy::close):
        (WebKit::IDBDatabaseBackendProxy::open):
        * src/IDBDatabaseCallbacksProxy.cpp:
        (WebKit::IDBDatabaseCallbacksProxy::create):
        (WebKit::IDBDatabaseCallbacksProxy::IDBDatabaseCallbacksProxy):
        * src/IDBDatabaseCallbacksProxy.h:
        * src/IDBFactoryBackendProxy.cpp:
        (WebKit::IDBFactoryBackendProxy::IDBFactoryBackendProxy):
        (WebKit::IDBFactoryBackendProxy::open):
        * src/IDBFactoryBackendProxy.h:
        * src/IDBIndexBackendProxy.cpp:
        (WebKit::IDBIndexBackendProxy::create):
        (WebKit::IDBIndexBackendProxy::IDBIndexBackendProxy):
        * src/IDBIndexBackendProxy.h:
        * src/IDBObjectStoreBackendProxy.cpp:
        (WebKit::IDBObjectStoreBackendProxy::create):
        (WebKit::IDBObjectStoreBackendProxy::IDBObjectStoreBackendProxy):
        (WebKit::IDBObjectStoreBackendProxy::~IDBObjectStoreBackendProxy):
        (WebKit::IDBObjectStoreBackendProxy::name):
        (WebKit::IDBObjectStoreBackendProxy::keyPath):
        (WebKit::IDBObjectStoreBackendProxy::indexNames):
        (WebKit::IDBObjectStoreBackendProxy::get):
        (WebKit::IDBObjectStoreBackendProxy::put):
        (WebKit::IDBObjectStoreBackendProxy::deleteFunction):
        (WebKit::IDBObjectStoreBackendProxy::clear):
        (WebKit::IDBObjectStoreBackendProxy::createIndex):
        (WebKit::IDBObjectStoreBackendProxy::index):
        (WebKit::IDBObjectStoreBackendProxy::deleteIndex):
        (WebKit::IDBObjectStoreBackendProxy::openCursor):
        * src/IDBObjectStoreBackendProxy.h: Added.
        * src/IDBObjectStoreProxy.h: Removed.
        * src/IDBTransactionBackendProxy.cpp:
        (WebKit::IDBTransactionBackendProxy::create):
        (WebKit::IDBTransactionBackendProxy::IDBTransactionBackendProxy):
        (WebKit::IDBTransactionBackendProxy::objectStore):
        * src/IDBTransactionBackendProxy.h:
        (WebKit::IDBTransactionBackendProxy::getWebIDBTransaction):
        * src/IDBTransactionCallbacksProxy.cpp:
        (WebKit::IDBTransactionCallbacksProxy::create):
        (WebKit::IDBTransactionCallbacksProxy::IDBTransactionCallbacksProxy):
        * src/IDBTransactionCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        (WebKit::WebIDBCallbacksImpl::onError):
        (WebKit::WebIDBCallbacksImpl::onSuccess):
        * src/WebIDBCallbacksImpl.h:
        * src/WebIDBCursorImpl.cpp:
        * src/WebIDBCursorImpl.h:
        * src/WebIDBDatabaseCallbacksImpl.cpp:
        (WebKit::WebIDBDatabaseCallbacksImpl::onVersionChange):
        * src/WebIDBDatabaseCallbacksImpl.h:
        * src/WebIDBDatabaseError.cpp:
        * src/WebIDBDatabaseImpl.cpp:
        * src/WebIDBDatabaseImpl.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::WebIDBFactoryImpl):
        * src/WebIDBFactoryImpl.h:
        * src/WebIDBIndexImpl.cpp:
        * src/WebIDBIndexImpl.h:
        * src/WebIDBKey.cpp:
        (WebKit::WebIDBKey::createFromValueAndKeyPath):
        (WebKit::WebIDBKey::injectIDBKeyIntoSerializedValue):
        * src/WebIDBKeyPath.cpp:
        (WebKit::WebIDBKeyPath::operator const WTF::Vector<IDBKeyPathElement, 0>&):
        * src/WebIDBKeyRange.cpp:
        * src/WebIDBObjectStoreImpl.cpp:
        * src/WebIDBObjectStoreImpl.h:
        * src/WebIDBTransactionCallbacksImpl.cpp:
        * src/WebIDBTransactionCallbacksImpl.h:
        * src/WebIDBTransactionImpl.cpp:
        * src/WebIDBTransactionImpl.h:

2011-03-30  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [chromium] script formatting doesn't work when all scripts are concatenated.
        https://bugs.webkit.org/show_bug.cgi?id=57446

        * WebKit.gyp:
        * scripts/inline_js_imports.py: Added.

2011-03-31  Victoria Kirst  <vrk@google.com>

        Reviewed by Eric Carlson.

        [chromium] Implement preload=none, setPreload hooks to media player
        https://bugs.webkit.org/show_bug.cgi?id=56983

        This patch implements preload=none in Chromium. It also replaces
        the now-deprecated setAutobuffer method with setPreload.

        * public/WebMediaPlayer.h:
        (WebKit::WebMediaPlayer::setPreload):
        * public/WebMediaPlayerClient.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::preload):
        (WebKit::WebMediaPlayerClientImpl::load):
        (WebKit::WebMediaPlayerClientImpl::loadInternal):
        (WebKit::WebMediaPlayerClientImpl::prepareToPlay):
        (WebKit::WebMediaPlayerClientImpl::setPreload):
        (WebKit::WebMediaPlayerClientImpl::startDelayedLoad):
        (WebKit::WebMediaPlayerClientImpl::WebMediaPlayerClientImpl):
        * src/WebMediaPlayerClientImpl.h:

2011-03-31  Evan Martin  <evan@chromium.org>

        Reviewed by Eric Seidel.

        <title> should support dir attribute
        https://bugs.webkit.org/show_bug.cgi?id=50961

        Update to new FrameLoaderClient interface.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDidReceiveTitle):
        (WebKit::FrameLoaderClientImpl::setTitle):
        * src/FrameLoaderClientImpl.h:
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::pageTitle):

2011-03-30  David Levin  <levin@chromium.org>

        Reviewed by Dmitry Titov.

        UnlockNonLocked condition reached in WorkerFileSystemsCallbackBridge::mayPostTaskToWorker
        https://bugs.webkit.org/show_bug.cgi?id=57382

        There were two issues to address:
        1. The use of a non-thread safe class (RefPtr) in a ThreadSafeRefCounted class.
           The problem was that this RefPtr could be changed on either thread.
        2. Keeping WorkerFileSystemCallbacksBridge alive for while it was being used
           including while its mutex was in use.

        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::runTaskOnMainThread):
        Changed to take a PassRefPtr and leak the ref count as opposed to relying on
        dispatchTaskToMainThread to store the pointer in m_selfRef.
        (WebKit::WorkerFileSystemCallbacksBridge::dispatchTaskToMainThread): Remove the
        m_selfRef and hand off a PassRefPtr instead.
        (WebKit::WorkerFileSystemCallbacksBridge::mayPostTaskToWorker): Balance out the leaked ref
        and ensure that WorkerFileSystemCallbacksBridge stays alive while the mutex is held.
        * src/WorkerFileSystemCallbacksBridge.h: Removed m_selfRef and derefIfWorkerIsStopped which
          was simply due to m_selfRef.

2011-03-29  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Tony Chang.

        [chromium]: Remove the code that called WebViewClient for spelling now that chromium is updated
        https://bugs.webkit.org/show_bug.cgi?id=57396

        * DEPS:
        * public/WebFrame.h:
        * public/WebView.h:
        * public/WebViewClient.h:
        (WebKit::WebViewClient::handleCurrentKeyboardEvent):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::checkSpellingOfString):
        (WebKit::EditorClientImpl::requestCheckingOfString):
        (WebKit::EditorClientImpl::getAutoCorrectSuggestionForMisspelledWord):
        (WebKit::EditorClientImpl::updateSpellingUIWithMisspelledWord):
        (WebKit::EditorClientImpl::showSpellingUI):
        (WebKit::EditorClientImpl::spellingUIIsShowing):
        * src/WebViewImpl.cpp:
        (WebKit::WebView::create):
        * src/WebViewImpl.h:
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::initializeLoader):
        * tests/PopupMenuTest.cpp:
        (WebKit::SelectPopupMenuTest::SetUp):
        * tests/WebFrameTest.cpp:
        (WebKit::TEST_F):
        * tests/WebPageSerializerTest.cpp:
        (WebKit::WebPageSerializerTest::SetUp):

2011-03-30  MORITA Hajime  <morrita@google.com>

        Reviewed by Dimitri Glazkov.

        [Chromium] Expose the shadow DOM to DumpRenderTree JS tests.
        https://bugs.webkit.org/show_bug.cgi?id=56573

        Added:
        - WebBindins::makeNode() to convert WebNode to a JS object, and
        - WebElement::shadowRoot().

        * public/WebBindings.h:
        * public/WebElement.h:
        * src/WebBindings.cpp:
        (WebKit::makeNodeImpl):
        (WebKit::WebBindings::makeNode):
        * src/WebElement.cpp:
        (WebKit::WebElement::shadowRoot):

2011-03-30  Mario Sanchez Prada  <msanchez@igalia.com>

        Reviewed by Chris Fleizach.

        AX: GTK: ARIA role is not respected on <p> <label> <div> and <form>
        https://bugs.webkit.org/show_bug.cgi?id=47636

        Duplicate new internal WebCore roles in the Chromium port.

        * public/WebAccessibilityRole.h: Update enumeration
        WebAccessibilityRole to reflect newly added roles in WebCore.
        * src/AssertMatchingEnums.cpp: Added new assertions.

2011-03-30  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: split debugger agent into Page and Worker-specific ones
        https://bugs.webkit.org/show_bug.cgi?id=57345

        ScriptDebugServer and InspectorDebuggerAgent contain only functionality common
        for Worker and Page debugger. All specifics is moved into Page/WorkerScriptDebugServer
        and Page/WorkerDebuggerAgent.

        * src/DebuggerAgentManager.cpp:
        (WebKit::DebuggerAgentManager::setExposeV8DebuggerProtocol):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::interruptAndDispatch):
        (WebKit::WebDevToolsAgent::processPendingMessages):

2011-03-30  Yury Semikhatsky  <yurys@chromium.org>

        Unreviewed. Rollout r82438 and r82436.

        * src/DebuggerAgentManager.cpp:
        (WebKit::DebuggerAgentManager::setExposeV8DebuggerProtocol):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::interruptAndDispatch):
        (WebKit::WebDevToolsAgent::processPendingMessages):

2011-03-30  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: split debugger agent into Page and Worker-specific ones
        https://bugs.webkit.org/show_bug.cgi?id=57345

        ScriptDebugServer and InspectorDebuggerAgent contain only functionality common
        for Worker and Page debugger. All specifics is moved into Page/WorkerScriptDebugServer
        and Page/WorkerDebuggerAgent.

        * src/DebuggerAgentManager.cpp:
        (WebKit::DebuggerAgentManager::setExposeV8DebuggerProtocol):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::interruptAndDispatch):
        (WebKit::WebDevToolsAgent::processPendingMessages):

2011-03-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r82293.
        http://trac.webkit.org/changeset/82293
        https://bugs.webkit.org/show_bug.cgi?id=57390

        Breaks RetrieveCSSResources (Requested by abarth|gardener on
        #webkit).

        * WebKit.gyp:
        * src/WebPageSerializer.cpp:
        (WebCore::getSubResourceURLFromElement):
        (WebCore::retrieveResourcesForElement):
        (WebCore::retrieveResourcesForFrame):
        (WebKit::WebPageSerializer::retrieveAllResources):
        * tests/WebPageSerializerTest.cpp:
        * tests/data/pageserialization/css_test_page.html: Removed.
        * tests/data/pageserialization/import_style_from_link.css: Removed.
        * tests/data/pageserialization/import_styles.css: Removed.
        * tests/data/pageserialization/link_styles.css: Removed.

2011-03-29  Tony Chang  <tony@chromium.org>

        Roll chromium version to r79710 to pick up libpng changes.

        * DEPS:

2011-03-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r82295 and r82300.
        http://trac.webkit.org/changeset/82295
        http://trac.webkit.org/changeset/82300
        https://bugs.webkit.org/show_bug.cgi?id=57380

        This patch breaks compile on Chromium (Requested by
        abarth|gardener on #webkit).

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2011-03-29  Mario Sanchez Prada  <msanchez@igalia.com>

        Reviewed by Adam Barth.

        REGRESSION(r82295): This patch does not compile on Chromium (Requested by abarth|gardener on #webkit).
        https://bugs.webkit.org/show_bug.cgi?id=57377

        Fix build errors on Chromium bots.

        * public/WebAccessibilityRole.h: Update to reflect newly added roles in WebCore.
        * src/AssertMatchingEnums.cpp: Ditto.

2011-03-29  Adam Barth  <abarth@webkit.org>

        Roll Chromium DEPS
        https://bugs.webkit.org/show_bug.cgi?id=57361

        * DEPS:

2011-03-29  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by David Levin.

        Adding retrieval off CSS resources to WebPageSerializer::retrieveAllResources.
        https://bugs.webkit.org/show_bug.cgi?id=56650

        * WebKit.gyp:
        * src/WebPageSerializer.cpp:
        (WebCore::getResourceAttributeForElement):
        (WebCore::retrieveStyleSheetForElement):
        (WebCore::retrieveResourcesForElement):
        (WebCore::retrieveResourcesForFrame):
        (WebCore::retrieveResourcesForCSSRule):
        (WebCore::retrieveResourcesForCSSStyleDeclaration):
        (WebCore::retrieveResourcesForCSSStyleSheet):
        (WebKit::WebPageSerializer::retrieveAllResources):
        * tests/WebPageSerializerTest.cpp:
        (WebKit::TestWebFrameClient::TestWebFrameClient):
        (WebKit::TestWebFrameClient::allowScript):
        (WebKit::WebPageSerializerTest::enableJS):
        (WebKit::WebPageSerializerTest::runOnLoad):
        (WebKit::TEST_F):
        * tests/data/pageserialization/css_test_page.html: Added.
        * tests/data/pageserialization/import_style_from_link.css: Added.
        (#divOrange):
        * tests/data/pageserialization/import_styles.css: Added.
        (#divYellow):
        * tests/data/pageserialization/link_styles.css: Added.
        (#divRed):

2011-03-29  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Inspector does not always shows transferred size correctly (e.g. gzipped/chunked content)
        https://bugs.webkit.org/show_bug.cgi?id=56602

        Added new methods to interface while keeping the old ones to keep
        chromium working until it is also patched.

        * public/WebURLLoaderClient.h:
        (WebKit::WebURLLoaderClient::didReceiveData2):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):
        (WebCore::ResourceHandleInternal::didReceiveData2):

2011-03-29  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: [Chromium] DevTools shows two resources for each plugin resource loaded
        https://bugs.webkit.org/show_bug.cgi?id=57101

        Remove DevToolsAgent network callbacks as this information is now available through ResourceLoader

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:

2011-03-29  Emil A Eklund  <eae@chromium.org>

        Reviewed by Dimitri Glazkov.

        Relative mouse coordinates recalculated for each target
        https://bugs.webkit.org/show_bug.cgi?id=57130

        * public/WebDOMMouseEvent.h:
        * src/WebDOMMouseEvent.cpp:
        (WebKit::WebDOMMouseEvent::layerX):
        (WebKit::WebDOMMouseEvent::layerY):
        (WebKit::WebDOMMouseEvent::offsetX):
        (WebKit::WebDOMMouseEvent::offsetY):

2011-03-29  Yuta Kitamura  <yutak@chromium.org>

        Unreviewed, rolling out r82195.
        http://trac.webkit.org/changeset/82195
        https://bugs.webkit.org/show_bug.cgi?id=56602

        Broke Chromium Clang builds.

        * public/WebDevToolsAgent.h:
        * public/WebURLLoaderClient.h:
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::didReceiveData):
        * src/WebDevToolsAgentImpl.h:

2011-03-29  Yuta Kitamura  <yutak@chromium.org>

        Unreviewed. Another build fix. The last fix was incorrect.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::supportsFullscreenForNode):
        (WebKit::ChromeClientImpl::supportsFullScreenForElement):
        * src/ChromeClientImpl.h:

2011-03-29  Yuta Kitamura  <yutak@chromium.org>

        Unreviewed. Build fix for Chromium Clang bot.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::supportsFullscreenForNode):
        * src/ChromeClientImpl.h:

2011-03-28  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Inspector does not always shows transferred size correctly (e.g. gzipped/chunked content)
        https://bugs.webkit.org/show_bug.cgi?id=56602

        Added new methods to interface while keeping the old ones to keep
        chromium working until it is also patched.

        * public/WebDevToolsAgent.h:
        * public/WebURLLoaderClient.h:
        (WebKit::WebURLLoaderClient::didReceiveData):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::didReceiveData):
        * src/WebDevToolsAgentImpl.h:

2011-03-28  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        [chromium] have DRT write the png checksum into a png comment
        https://bugs.webkit.org/show_bug.cgi?id=57255

        * DEPS: Pull in version of chromium with comment writing

2011-03-28  Adele Peterson  <adele@apple.com>

        Build fix.

        * src/WebFrameImpl.cpp: (WebKit::WebFrameImpl::selectionStartHasSpellingMarkerFor):
        Call new selectionStartHasMarkerFor method instead of selectionStartHasSpellingMarkerFor.

2011-03-28  Pavel Feldman  <pfeldman@chromium.org>

        Not reviewed: fixed chromium build.

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgent::shouldInterruptForMessage):

2011-03-25  Andy Estes  <aestes@apple.com>

        Reviewed by Adele Peterson.

        REGRESSION (r70748): latest nightly builds kills AC_QuickTime.js
        https://bugs.webkit.org/show_bug.cgi?id=49016

        Update objectContentType() implementation to handle the
        shouldPreferPlugInsForImages flag.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::objectContentType):
        * src/FrameLoaderClientImpl.h:

2011-03-25  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by David Levin.

        Data race between ~WorkerFileSystemCallbacksBridge and runTasksOnWorkerThread
        https://bugs.webkit.org/show_bug.cgi?id=56138
        Stopped passing the WorkerFileSystemCallbacksBridge's reference to
        MainThreadFileSystemCallbacks so that in most cases (in normal cases)
        its reference is only maintained by WorkerThread.

        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::MainThreadFileSystemCallbacks::createLeakedPtr):
        (WebKit::MainThreadFileSystemCallbacks::MainThreadFileSystemCallbacks):
        (WebKit::WorkerFileSystemCallbacksBridge::mayPostTaskToWorker):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-03-24  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Dimitri Glazkov.

        [chromium] Add setters for various client interfaces, and add WebSpellCheckClient
        https://bugs.webkit.org/show_bug.cgi?id=57070

        * public/WebSpellCheckClient.h: Added.
        (WebKit::WebSpellCheckClient::spellCheck):
        (WebKit::WebSpellCheckClient::requestCheckingOfText):
        (WebKit::WebSpellCheckClient::autoCorrectWord):
        (WebKit::WebSpellCheckClient::showSpellingUI):
        (WebKit::WebSpellCheckClient::isShowingSpellingUI):
        (WebKit::WebSpellCheckClient::updateSpellingUIWithMisspelledWord):
        (WebKit::WebSpellCheckClient::~WebSpellCheckClient):
        * public/WebView.h:
        * public/WebViewClient.h:
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::checkSpellingOfString):
        (WebKit::EditorClientImpl::requestCheckingOfString):
        (WebKit::EditorClientImpl::getAutoCorrectSuggestionForMisspelledWord):
        (WebKit::EditorClientImpl::updateSpellingUIWithMisspelledWord):
        (WebKit::EditorClientImpl::showSpellingUI):
        (WebKit::EditorClientImpl::spellingUIIsShowing):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setWebDevToolsAgentClient):
        (WebKit::WebViewImpl::setWebAutoFillClient):
        (WebKit::WebViewImpl::setWebSpellCheckClient):
        (WebKit::WebViewImpl::WebViewImpl):
        * src/WebViewImpl.h:
        (WebKit::WebViewImpl::spellCheckClient):

2011-03-25  Cary Clark  <caryclark@google.com>

        Reviewed by Dimitri Glazkov.

        Add CGBitmapContext.h include to WebViewImpl.cpp
        https://bugs.webkit.org/show_bug.cgi?id=57097
        
        No tests. Exposes no new functionality.

        * src/WebViewImpl.cpp:

2011-03-25  Adam Klein  <adamk@chromium.org>

        Reviewed by David Levin.

        [chromium] Remove deprecated overload of openFileSystem for workers
        https://bugs.webkit.org/show_bug.cgi?id=57062

        * public/WebCommonWorkerClient.h:

2011-03-25  Chang Shu  <cshu@webkit.org>

        Reviewed by Ryosuke Niwa.

        rename Node::isContentEditable and all call sites to rendererIsEditable
        https://bugs.webkit.org/show_bug.cgi?id=54290

        This is part of the effort to separate JS API HTMLElement isContentEditable from
        internal Node::rendererIsEditable.

        * src/WebNode.cpp:
        (WebKit::WebNode::isContentEditable):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setFocus):
        (WebKit::WebViewImpl::setComposition):
        (WebKit::WebViewImpl::confirmComposition):

2011-03-25  Mikhail Naganov  <mnaganov@chromium.org>

        Roll forward Chromium deps to r79379 to pick up V8 3.2.4.2.

        * DEPS:

2011-03-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81916 and r81917.
        http://trac.webkit.org/changeset/81916
        http://trac.webkit.org/changeset/81917
        https://bugs.webkit.org/show_bug.cgi?id=57071

        broke a test on platforms that do not have QuickTime installed
        (Requested by estes on #webkit).

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::objectContentType):
        * src/FrameLoaderClientImpl.h:

2011-03-24  Min Qin  <qinmin@google.com>

        Reviewed by James Robinson.

        Allow WebMediaPlayerClient to notify MediaPlayer that the playback state has changed

        https://bugs.webkit.org/show_bug.cgi?id=56837

        * public/WebMediaPlayerClient.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::playbackStateChanged):
        * src/WebMediaPlayerClientImpl.h:

2011-03-23  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Get rid of WEB_TEXT_CHECKING_RESULT_IS_A_STRUCT since it&apos;s not needed anymore
        https://bugs.webkit.org/show_bug.cgi?id=56955

        * DEPS:
        * public/WebTextCheckingResult.h:

2011-03-24  Bill Budge  <bbudge@chromium.org>

        Reviewed by Eric Seidel.

        Change a forward declaration of WebURLLoaderOptions to struct to prevent a build break in Chromium.
        https://bugs.webkit.org/show_bug.cgi?id=57064

        No tests. Exposes no new functionality.

        * public/WebFrame.h:

2011-03-24  Andy Estes  <aestes@apple.com>

        Fix the chromium build.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::objectContentType):

2011-03-24  Andy Estes  <aestes@apple.com>

        Reviewed by Darin Adler.

        REGRESSION (r70748): latest nightly builds kills AC_QuickTime.js
        https://bugs.webkit.org/show_bug.cgi?id=49016

        Update objectContentType() implementation to handle the
        shouldPreferPlugInsForImages flag.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::objectContentType):
        * src/FrameLoaderClientImpl.h:

2011-03-24  Bill Budge  <bbudge@chromium.org>

        Reviewed by Dmitry Titov.

        Add an overloaded WebFrame::createAssociatedURLLoader method that takes WebURLLoaderOptions, so clients can specify CORS options to allow cross-origin requests.
        https://bugs.webkit.org/show_bug.cgi?id=56885

        No new tests. Exposes no new functionality.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createAssociatedURLLoader):
        * src/WebFrameImpl.h:

2011-03-24  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Remove legacy version of findPlainText.
        https://bugs.webkit.org/show_bug.cgi?id=57056

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::scopeStringMatches):
        Replace use of legacy findPlainText with a version that
        takes an options parameter.

2011-03-24  Nat Duca  <nduca@chromium.org>

        Reviewed by Kenneth Russell.

        [chromium] Add traceEvents to compositor
        https://bugs.webkit.org/show_bug.cgi?id=56965

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):

2011-03-24  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add accessibilityObject accessor to WebDocument (needed for
        building an accessibility tree that includes iframes).
        https://bugs.webkit.org/show_bug.cgi?id=56984

        * public/WebDocument.h:
        * src/WebDocument.cpp:
        (WebKit::WebDocument::accessibilityObject):

2011-03-24  Ilya Sherman  <isherman@chromium.org>

        Reviewed by Dimitri Glazkov.

        Expose Node::isFocusable() in the Chromium WebKit API
        In service of https://code.google.com/p/chromium/issues/detail?id=72918
        https://bugs.webkit.org/show_bug.cgi?id=56809

        * public/WebNode.h:
        * src/WebNode.cpp:
        (WebKit::WebNode::isFocusable):

2011-03-24  Pavel Feldman  <pfeldman@chromium.org>

        Not reviewed: fix chromium compilation.

        * public/WebDevToolsAgent.h:

2011-03-24  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: brush up Network agent API.
        https://bugs.webkit.org/show_bug.cgi?id=57001

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::identifierForInitialRequest):
        (WebKit::WebDevToolsAgentImpl::willSendRequest):
        * src/WebDevToolsAgentImpl.h:

2011-03-24  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Ojan Vafai.

        [chromium] WebBindings::getRangeImpl() should NULL check its NPObject argument
        https://bugs.webkit.org/show_bug.cgi?id=56996

        * src/WebBindings.cpp:
        (WebKit::getRangeImpl):

2011-03-23  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Ojan Vafai.

        [chromium] WebBindings{.h,.cpp}: should use consistent argument naming
        https://bugs.webkit.org/show_bug.cgi?id=56898

        Address FIXME I noted/added in r81676.  Wanted to just copy/paste the checking
        code from elsewhere in the file, but inconsistent argument naming made it more
        difficult than it need be, so first step: use consistent naming.

        * public/WebBindings.h:
        * src/WebBindings.cpp:
        (WebKit::WebBindings::construct):
        (WebKit::WebBindings::enumerate):
        (WebKit::WebBindings::evaluate):
        (WebKit::WebBindings::evaluateHelper):
        (WebKit::WebBindings::getProperty):
        (WebKit::WebBindings::hasMethod):
        (WebKit::WebBindings::hasProperty):
        (WebKit::WebBindings::invoke):
        (WebKit::WebBindings::invokeDefault):
        (WebKit::WebBindings::releaseObject):
        (WebKit::WebBindings::removeProperty):
        (WebKit::WebBindings::retainObject):
        (WebKit::WebBindings::setException):
        (WebKit::WebBindings::setProperty):
        (WebKit::WebBindings::unregisterObject):
        (WebKit::WebBindings::extractIdentifierData):
        (WebKit::getRangeImpl):
        (WebKit::getElementImpl):
        (WebKit::makeIntArrayImpl):
        (WebKit::WebBindings::getRange):
        (WebKit::WebBindings::makeIntArray):

2011-03-23  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by David Levin.

        Relanding:
        Moving the method that is used to retrieve all the resources in
        a page from the Chromium code (dom_operations.cc) to WebKit.
        https://bugs.webkit.org/show_bug.cgi?id=55859

        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * public/WebURL.h:
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebVector.h:
        (WebKit::WebVector::contains):
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebPageSerializer.cpp:
        (WebCore::getSubResourceURLFromElement):
        (WebCore::retrieveResourcesForElement):
        (WebCore::retrieveResourcesForFrame):
        (WebKit::WebPageSerializer::retrieveAllResources):
        * tests/WebFrameTest.cpp:
        * tests/WebPageSerializerTest.cpp: Added.
        * tests/data/pageserialization/awesome.png: Added.
        * tests/data/pageserialization/embed_iframe.html: Added.
        * tests/data/pageserialization/object_iframe.html: Added.
        * tests/data/pageserialization/simple_iframe.html: Added.
        * tests/data/pageserialization/simple_page.html: Added.
        * tests/data/pageserialization/top_frame.html: Added.

2011-03-23  Kenneth Russell  <kbr@google.com>

        Rolled forward Chromium DEPS again to fix DumpRenderTree build
        failure caused by r81821.

        * DEPS:

2011-03-23  Kenneth Russell  <kbr@google.com>

        Rolled forward Chromium DEPS to fix build breakage after r81821.

        * DEPS:

2011-03-23  Kenneth Russell  <kbr@google.com>

        Reviewed by James Robinson.

        [chromium] WebGLRenderingContext and other DOMWindow properties should remain if WebGL is disabled
        https://bugs.webkit.org/show_bug.cgi?id=56947

        Removed the WebRuntimeFeatures setting for WebGL. WebGL support is
        now controlled exclusively through the page's Settings.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:

2011-03-23  Chris Rogers  <crogers@google.com>

        Reviewed by Kenneth Russell.

        Add API to retrieve the audio hardware sample-rate
        https://bugs.webkit.org/show_bug.cgi?id=56882

        * public/WebAudioDevice.h:
        * public/WebKitClient.h:
        (WebKit::WebKitClient::audioHardwareSampleRate):
        * src/AudioDestinationChromium.cpp:
        (WebCore::AudioDestination::hardwareSampleRate):

2011-03-23  Cris Neckar  <cdn@chromium.org>

        Reviewed by Eric Seidel.

        Add refptr for widget. Mutations can happen within the event handler.
        https://bugs.webkit.org/show_bug.cgi?id=56774

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::handleEvent):

2011-03-23  Viet-Trung Luu  <viettrungluu@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Add FormatPlainText to WebClipboard::Format enumeration.
        https://bugs.webkit.org/show_bug.cgi?id=56868

        Chromium's WebClipboard::isFormatAvailable() will be correspondingly
        extended.

        * public/WebClipboard.h:
        * src/AssertMatchingEnums.cpp:

2011-03-23  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: Remove DebuggerScript.js from Chromium resource bundle.
        https://bugs.webkit.org/show_bug.cgi?id=56916

        * DEPS: bump up Chromium dependency to the revision where no references to the DebuggerScript.js resource are left.
        * WebKit.grd:

2011-03-23  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: remove inspectNode method from WebDevToolsAgent
        https://bugs.webkit.org/show_bug.cgi?id=56926

        * public/WebDevToolsAgent.h:
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:

2011-03-23  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81686.
        http://trac.webkit.org/changeset/81686
        https://bugs.webkit.org/show_bug.cgi?id=56914

        Breaks webkit_tests in Chromium again. (Requested by pfeldman
        on #webkit).

        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * public/WebURL.h:
        * public/WebVector.h:
        (WebKit::WebVector::operator[]):
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebPageSerializer.cpp:
        * tests/WebFrameTest.cpp:
        * tests/WebPageSerializerTest.cpp: Removed.
        * tests/data/pageserialization/awesome.png: Removed.
        * tests/data/pageserialization/embed_iframe.html: Removed.
        * tests/data/pageserialization/object_iframe.html: Removed.
        * tests/data/pageserialization/simple_iframe.html: Removed.
        * tests/data/pageserialization/simple_page.html: Removed.
        * tests/data/pageserialization/top_frame.html: Removed.

2011-03-22  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [V8] Web Inspector: compile DebuggerScript.js into DebuggerScriptSource.h
        https://bugs.webkit.org/show_bug.cgi?id=56843

        * public/WebDevToolsAgentClient.h: the script source is now compiled along with the inspector code.
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::attach):

2011-03-22  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        [Chromium] Web Inspector: remove obsolete methods from WebDevToolsAgentClient.h
        https://bugs.webkit.org/show_bug.cgi?id=56897

        * public/WebDevToolsAgentClient.h:

2011-03-22  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Tony Chang.

        [chromium] Remove identity from dragTargetDragEnter() function signature
        https://bugs.webkit.org/show_bug.cgi?id=56875

        First part of 3-sided patch.  Add new function signature sans identity.

        * public/WebView.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::dragTargetDragEnter):
        * src/WebViewImpl.h:

2011-03-22  John Bauman  <jbauman@chromium.org>

        Reviewed by Kenneth Russell.

        Add support for preserveDrawingBuffer context creation attribute
        https://bugs.webkit.org/show_bug.cgi?id=56431

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::markContextChanged):
        (WebCore::GraphicsContext3DInternal::markLayerComposited):
        (WebCore::GraphicsContext3DInternal::layerComposited):
        (WebCore::GraphicsContext3D::layerComposited):
        * src/GraphicsContext3DInternal.h:

2011-03-22  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Make WebTextCheckingResult&apos;s members be public in preparation for converting it to a struct
        https://bugs.webkit.org/show_bug.cgi?id=56857

        * DEPS:
        * public/WebTextCheckingResult.h:

2011-03-22  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by David Levin.

        Relanding:
        Moving the method that is used to retrieve all the resources in
        a page from the Chromium code (dom_operations.cc) to WebKit.
        https://bugs.webkit.org/show_bug.cgi?id=55859


        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * public/WebURL.h:
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebVector.h:
        (WebKit::WebVector::contains):
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebPageSerializer.cpp:
        (WebCore::getSubResourceURLFromElement):
        (WebCore::retrieveResourcesForElement):
        (WebCore::retrieveResourcesForFrame):
        (WebKit::WebPageSerializer::retrieveAllResources):
        * tests/WebFrameTest.cpp:
        * tests/WebPageSerializerTest.cpp: Added.
        * tests/data/pageserialization/awesome.png: Added.
        * tests/data/pageserialization/embed_iframe.html: Added.
        * tests/data/pageserialization/object_iframe.html: Added.
        * tests/data/pageserialization/simple_iframe.html: Added.
        * tests/data/pageserialization/simple_page.html: Added.
        * tests/data/pageserialization/top_frame.html: Added.

2011-03-22  Noel Gordon  <noel.gordon@gmail.com>

        Reviewed by Tony Chang.

        [chromium] Remove Gears from Chromium WebKit
        https://bugs.webkit.org/show_bug.cgi?id=56808

        Gears has been removed from Chromium 12. Remove Gears drag drop support
        from WebKit. That work lead to http://webkit.org/b/25916, a proposal to
        add native file drag drop, and its subsequent standardization in HTML5.

        * public/WebBindings.h:
        * public/WebView.h:
        * src/WebBindings.cpp:
        (WebKit::getRangeImpl): FIXME note added.
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::dragTargetDragEnter):
        (WebKit::WebViewImpl::dragTargetDragLeave):
        (WebKit::WebViewImpl::dragTargetDrop):
        (WebKit::WebViewImpl::dragTargetDragEnterOrOver):
        * src/WebViewImpl.h:

2011-03-21  Adam Klein  <adamk@chromium.org>

        Reviewed by David Levin.

        [fileapi] Add URI resolution support to WorkerContext
        https://bugs.webkit.org/show_bug.cgi?id=55644

        Pass "create" bool through to allow opening
        a filesystem without allowing creation.

        * src/LocalFileSystemChromium.cpp:
        (WebCore::LocalFileSystem::readFileSystem):
        (WebCore::LocalFileSystem::requestFileSystem):
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::openFileSystemForWorker):
        * src/WebWorkerBase.h:
        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::postOpenFileSystemToMainThread):
        (WebKit::WorkerFileSystemCallbacksBridge::openFileSystemOnMainThread):
        * src/WorkerFileSystemCallbacksBridge.h:

2011-03-21  Ilya Sherman  <isherman@chromium.org>

        Reviewed by James Robinson.

        Remove WebInputElement::isEnabledFormControl() from Chromium WebKit API
        Clients should instead call into WebFormControlElement::isEnabled().
        https://bugs.webkit.org/show_bug.cgi?id=56364

        * public/WebInputElement.h: Removed isEnabledFormControl().
        * src/WebInputElement.cpp: Removed isEnabledFormControl().

2011-03-21  Robert Kroeger  <rjkroege@chromium.org>

        Reviewed by Antonio Gomes.

        Flag to enable a platform specific GestureReocognizer framework in Chromium.

        https://bugs.webkit.org/show_bug.cgi?id=49345

        * features.gypi:

2011-03-21  Tony Chang  <tony@chromium.org>

        Reviewed by Pavel Feldman.

        [chromium] remove devtools_html's dependency on WebKit.gypi
        https://bugs.webkit.org/show_bug.cgi?id=56661

        We want to depend on the values in the gypi file, not the gypi file
        itself.  Actually, if someone edits a gypi file, s/he should re-run
        gyp to pick up the new dependencies.

        It turns out that this doesn't matter much for this target anymore
        since we pull the .js dependencies from the inspector html file.

        * WebKit.gyp: cleanup dependencies
        * scripts/generate_devtools_html.py: remove unused param

2011-03-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81377.
        http://trac.webkit.org/changeset/81377
        https://bugs.webkit.org/show_bug.cgi?id=56765

        WebPageSerializerTest.MultipleFrames is broken (Requested by
        simonjam on #webkit).

        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * public/WebURL.h:
        * public/WebVector.h:
        (WebKit::WebVector::operator[]):
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebPageSerializer.cpp:
        * tests/WebFrameTest.cpp:
        * tests/WebPageSerializerTest.cpp: Removed.
        * tests/data/pageserialization/awesome.png: Removed.
        * tests/data/pageserialization/embed_iframe.html: Removed.
        * tests/data/pageserialization/object_iframe.html: Removed.
        * tests/data/pageserialization/simple_iframe.html: Removed.
        * tests/data/pageserialization/simple_page.html: Removed.
        * tests/data/pageserialization/top_frame.html: Removed.

2011-03-21  Daniel Sievers  <sievers@google.com>

        Reviewed by Simon Fraser.

        [Chromium] Make RenderAsTextBehavior and LayerTreeAsTextBehavior tweakable from the DumpRenderTree commandline
        https://bugs.webkit.org/show_bug.cgi?id=56139

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::renderTreeAsText):
        (WebKit::WebFrameImpl::layerTreeAsText):
        * src/WebFrameImpl.h:

2011-03-21  Eric Uhrhane <ericu@chromium.org>

        Reviewed by David Levin.

        [fileapi/chromium] Fetch platform path using GetMetadata before creating File from FileEntry*
        https://bugs.webkit.org/show_bug.cgi?id=56704

        * src/WebFileSystemCallbacksImpl.cpp:
        (WebFileSystemCallbacksImpl::didReadMetadata)
        Pass new platformPath member through.

        * src/WorkerFileSystemCallbacksBridge.cpp:
        (CrossThreadCopierBase)
        Copy new platformPath member.

        * public/WebFileInfo.h:
        (struct WebFileInfo)
        Add new platformPath member.

2011-03-21  Leandro Gracia Gil  <leandrogracia@chromium.org>

        Reviewed by Steve Block.

        Media Stream API patch 0: adding compilation guards.
        https://bugs.webkit.org/show_bug.cgi?id=56458

        Enabling the feature by default for chromium builds.

        * features.gypi:

2011-03-21  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: Inspector does not always show correct transfer size (for compressed/chunked data)
        https://bugs.webkit.org/show_bug.cgi?id=56691

        Added transfer size support in inspector for compressed data.

        * src/ResourceHandle.cpp:
        (WebCore::ResourceHandleInternal::didReceiveData):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::didReceiveData):

2011-03-20  Bill Budge  <bbudge@chromium.org>

        Reviewed by Adam Barth.

        Rename ThreadSafeShared to ThreadSafeRefCounted
        https://bugs.webkit.org/show_bug.cgi?id=56714

        No new tests. Exposes no new functionality.

        * src/PlatformMessagePortChannel.h:
        * src/WebWorkerBase.cpp:
        * src/WorkerFileSystemCallbacksBridge.h:
        * src/WorkerFileWriterCallbacksBridge.h:

2011-03-18  Tony Chang  <tony@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] make devtool concatenation targets conditional based on debug_devtools
        https://bugs.webkit.org/show_bug.cgi?id=56667

        We don't want to run these targets when debug_devtools=1 because it
        will overwrite the devtools.js and devtools.css files copied by
        inspector_resources.  On Linux, this triggers a warning because
        there are two commands that target the same output file when
        debug_devtools=1.

        I also removed the 'sources' lines since I don't think they do
        anything for actions.

        * WebKit.gyp:

2011-03-17  Alexey Marinichev  <amarinichev@chromium.org>

        Reviewed by Kenneth Russell.

        chromium: uninitialized field in WebViewImpl
        https://bugs.webkit.org/show_bug.cgi?id=56620

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):

2011-03-17  Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        [chromium] Turn off accelerated compositing for RTL style pages.
        https://bugs.webkit.org/show_bug.cgi?id=56585

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::layout):
        (WebKit::WebViewImpl::pageHasRTLStyle):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        * src/WebViewImpl.h:

2011-03-17  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by David Levin.

        Moving the method that is used to retrieve all the resources in
        a page from the Chromium code (dom_operations.cc) to WebKit.
        https://bugs.webkit.org/show_bug.cgi?id=55859

        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * public/WebURL.h:
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebVector.h:
        (WebKit::WebVector::contains):
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebPageSerializer.cpp:
        (WebCore::getSubResourceURLFromElement):
        (WebCore::retrieveResourcesForElement):
        (WebCore::retrieveResourcesForFrame):
        (WebKit::WebPageSerializer::retrieveAllResources):
        * tests/WebFrameTest.cpp:
        * tests/WebPageSerializerTest.cpp: Added.
        * tests/data/pageserialization: Added.
        * tests/data/pageserialization/awesome.png: Added.
        * tests/data/pageserialization/embed_iframe.html: Added.
        * tests/data/pageserialization/object_iframe.html: Added.
        * tests/data/pageserialization/simple_iframe.html: Added.
        * tests/data/pageserialization/simple_page.html: Added.
        * tests/data/pageserialization/top_frame.html: Added.

2011-03-17  Tony Chang  <tony@chromium.org>

        Reviewed by Pavel Feldman.

        [chromium] don't concatenate devtools files when debug_devtools=1
        https://bugs.webkit.org/show_bug.cgi?id=56572

        * WebKit.gyp:

2011-03-17  Tony Chang  <tony@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] minor cleanup of devtools_files variable in WebKit.gyp
        https://bugs.webkit.org/show_bug.cgi?id=56503

        * WebKit.gyp: Moving duplicate variables out of a condition.

2011-03-16  Adam Barth  <abarth@webkit.org>

        Reviewed by James Robinson.

        Remove USE(BUILTIN_UTF8_CODEC)
        https://bugs.webkit.org/show_bug.cgi?id=56508

        * features.gypi:

2011-03-16  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        [chromium] include inspector gif files in the list of resources
        https://bugs.webkit.org/show_bug.cgi?id=56504

        * scripts/generate_devtools_grd.py:

2011-03-16  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No new tests. Exposes no new functionality.

        * public/WebURLLoader.h:
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::isDocumentThreadableLoaderClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:

2011-03-16  Adam Barth  <abarth@webkit.org>

        Roll Chromium DEPS.

        * DEPS:

2011-03-16  Daniel Sievers  <sievers@google.com>

        Reviewed by James Robinson.

        Add setting to always force compositing mode
        https://bugs.webkit.org/show_bug.cgi?id=56156

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setForceCompositingMode):
        * src/WebSettingsImpl.h:

2011-03-16  Sreeram Ramachandran  <sreeram@google.com>

        Reviewed by Dimitri Glazkov.

        Revert of r80451. Decided to do this in WebCore instead.
        https://bugs.webkit.org/show_bug.cgi?id=55844

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-03-15  Ilya Sherman  <isherman@chromium.org>

        Reviewed by Darin Fisher.

        Move isReadOnly() from WebInputElement to WebFormControlElement
        https://bugs.webkit.org/show_bug.cgi?id=55760

        * public/WebFormControlElement.h:
        * public/WebInputElement.h:
        * src/WebFormControlElement.cpp:
        (WebKit::WebFormControlElement::isReadOnly):
        * src/WebInputElement.cpp:

2011-03-15  John Bauman  <jbauman@chromium.org>

        Reviewed by Kenneth Russell.

        Non-premultiplied-alpha canvas attribute is ignore for toDataURL, drawImage, texImage2D
        https://bugs.webkit.org/show_bug.cgi?id=56238

        Add support for reading a webgl context into an ImageData.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToImageData):
        * src/GraphicsContext3DInternal.h:

2011-03-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81144.
        http://trac.webkit.org/changeset/81144
        https://bugs.webkit.org/show_bug.cgi?id=56432

        It broke the ui test
        NPAPITesterBase.GetURLRedirectNotification. (Requested by
        dave_levin on #webkit).

        * public/WebURLLoader.h:
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        (WebKit::AssociatedURLLoader::prepareRequest):
        (WebKit::AssociatedURLLoader::willSendRequest):
        (WebKit::AssociatedURLLoader::didSendData):
        (WebKit::AssociatedURLLoader::didReceiveResponse):
        (WebKit::AssociatedURLLoader::didDownloadData):
        (WebKit::AssociatedURLLoader::didReceiveData):
        (WebKit::AssociatedURLLoader::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::didFinishLoading):
        (WebKit::AssociatedURLLoader::didFail):
        * src/AssociatedURLLoader.h:

2011-03-15  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        pngcrush images used by inspector
        https://bugs.webkit.org/show_bug.cgi?id=56426

        This saves 120k in WebCore and 8k in WebKit/chromium.  I ran
        pngcrush -brute, so none of the meta data (ancillary chunks)
        are modified.

        * src/js/Images/segmentChromium.png:
        * src/js/Images/segmentHoverChromium.png:
        * src/js/Images/segmentHoverEndChromium.png:
        * src/js/Images/segmentSelectedChromium.png:
        * src/js/Images/segmentSelectedEndChromium.png:
        * src/js/Images/statusbarBackgroundChromium.png:
        * src/js/Images/statusbarBottomBackgroundChromium.png:
        * src/js/Images/statusbarMenuButtonChromium.png:
        * src/js/Images/statusbarMenuButtonSelectedChromium.png:

2011-03-15  Michael Nordman  <michaeln@google.com>

        Reviewed by Alexey Proskuryakov.

        When initiating a main resource load, let the application cache
        know which frame the load is being conducted for. This patch doesn't
        resolve the following bug, but the additional WebFrame parameter
        should provide the chromium port with enough info to pick the
        "most appropiate" cached resource.
        https://bugs.webkit.org/show_bug.cgi?id=55505

        Also fixup a stale comment in stopLoadingInFrame.

        * public/WebApplicationCacheHost.h:
        (WebKit::WebApplicationCacheHost::willStartMainResourceRequest):
        * src/ApplicationCacheHost.cpp:
        (WebCore::ApplicationCacheHost::maybeLoadMainResource):
        (WebCore::ApplicationCacheHost::stopLoadingInFrame):

2011-03-15  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        [chromium] add a build target to create a grd file with devtool resources
        https://bugs.webkit.org/show_bug.cgi?id=56335

        Reland with a fix to avoid really long command lines on Windows.

        * WebKit.gyp:
        * scripts/generate_devtools_grd.py: Added.

2011-03-15  Alok priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Valgrind error due to uninitialized PluginLayerChromium::m_textureId
        https://bugs.webkit.org/show_bug.cgi?id=56390

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setBackingTextureId):
        (WebKit::WebPluginContainerImpl::platformLayer):

2011-03-15  Brett Wilson  <brettw@chromium.org>

        Reviewed by Adam Barth.

        Make WebConsoleMessage properly respect the log level.
        https://bugs.webkit.org/show_bug.cgi?id=56386

        * public/WebConsoleMessage.h:
        (WebKit::WebConsoleMessage::WebConsoleMessage):

2011-03-15  Tony Chang  <tony@chromium.org>

        Revert r81147 and r81149, broke the chromium win build.

        * WebKit.gyp:
        * scripts/generate_devtools_grd.py: Removed.

2011-03-15  Tony Chang  <tony@chromium.org>

        Fix chromium build using python 2.5 (with statement).

        * scripts/generate_devtools_grd.py:

2011-03-15  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        [chromium] add a build target to create a grd file with devtool resources
        https://bugs.webkit.org/show_bug.cgi?id=56335

        This is the webkit side of the fix for
        http://code.google.com/p/chromium/issues/detail?id=35793

        * WebKit.gyp:
        * scripts/generate_devtools_grd.py: Added.

2011-03-15  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No new tests. No new functionality exposed.

        * public/WebURLLoader.h:
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:

2011-03-15  Alok priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Remove unnecessary function WebPlugin::getBackingTextureId
        https://bugs.webkit.org/show_bug.cgi?id=56122

        It will be tested by Pepper2D and Pepper3D layout/smoke tests
        on the Chromium side.

        * public/WebPlugin.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::platformLayer):

2011-03-15  Mikhail Naganov  <mnaganov@chromium.org>

        Unreviewed. Update chromium deps to pick up the latest V8.

        * DEPS:

2011-03-14  Alexey Marinichev  <amarinichev@chromium.org>

        Reviewed by Kenneth Russell.

        Graphics Context is not properly recovered if the GPU process dies.
        https://bugs.webkit.org/show_bug.cgi?id=56148

        Split context recreation into two steps.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::reallocateRenderer):
        * src/WebViewImpl.h:

2011-03-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81094.
        http://trac.webkit.org/changeset/81094
        https://bugs.webkit.org/show_bug.cgi?id=56355

        Broke the chromium DRT related build. (Requested by dave_levin
        on #webkit).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::renderTreeAsText):
        (WebKit::WebFrameImpl::layerTreeAsText):
        * src/WebFrameImpl.h:

2011-03-14  Daniel Sievers  <sievers@google.com>

        Reviewed by Simon Fraser.

        [Chromium] Make RenderAsTextBehavior and LayerTreeAsTextBehavior tweakable from the DumpRenderTree commandline
        https://bugs.webkit.org/show_bug.cgi?id=56139

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::renderTreeAsText):
        (WebKit::WebFrameImpl::layerTreeAsText):
        * src/WebFrameImpl.h:

2011-03-14  John Knottenbelt  <jknotten@chromium.org>

        Reviewed by Steve Block.

        Detach Geolocation from Frame when Page destroyed.
        https://bugs.webkit.org/show_bug.cgi?id=52877

        Add accessors to the WebGeolocationClientMock to allow the number of
        pending geolocation permission requests to be queried.

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:
        (WebKit::WebGeolocationClientMock::numberOfPendingPermissionRequests):

2011-03-11  David Levin  <levin@chromium.org>

        Rollout the chromium deps roll as it adds a dependency on a header
        that the bots building for WebKit don't seem to have.

        Specifically gfx\gl\gl_context_egl.cc depends on d3dcompiler.h

        * DEPS:

2011-03-11  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Correct return type of WebClipboard::readImage.
        https://bugs.webkit.org/show_bug.cgi?id=56234

        Update the return type to reflect that we are returning a blob of PNG
        data, not a bitmap.

        * public/WebClipboard.h:
        (WebKit::WebClipboard::readImage):

2011-03-11  David Levin  <levin@chromium.org>

        Update chromium deps to pick up the skia roll.

        * DEPS:

2011-03-11  Adrienne Walker  <enne@google.com>

        Reviewed by Kenneth Russell.

        Add missing unit tests to TilingData.
        https://bugs.webkit.org/show_bug.cgi?id=54143

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-03-11  Anton D'Auria  <adauria@apple.com>

        Reviewed and landed by Brady Eidson.

        Add WebKit1 API to view and delete local storage
        https://bugs.webkit.org/show_bug.cgi?id=51878

        * src/StorageNamespaceProxy.cpp:
        (WebCore::StorageNamespaceProxy::clearOriginForDeletion):
        (WebCore::StorageNamespaceProxy::clearAllOriginsForDeletion):
        (WebCore::StorageNamespaceProxy::sync):
        * src/StorageNamespaceProxy.h:

2011-03-11  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add an accessibilityIsIgnored method to WebAccessibilityObject.
        https://bugs.webkit.org/show_bug.cgi?id=50969

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::accessibilityIsIgnored):

2011-03-11  Avi Drissman  <avi@google.com>

        Reviewed by Tony Chang.

        Fix missing initialization of new member variables.
        https://bugs.webkit.org/show_bug.cgi?id=50969

        * public/WebMenuItemInfo.h:
        (WebKit::WebMenuItemInfo::WebMenuItemInfo):

2011-03-11  Roland Steiner  <rolandsteiner@chromium.org>

        Reviewed by Ryosuke Niwa.

        Bug 55570 - Remove dependency of dom/InputElement.cpp on html/ and wml/
        https://bugs.webkit.org/show_bug.cgi?id=55570

        Add a virtual function toInputElement() to Node that has a default
        implementation of returning 0.
        For HTMLInputElement and WMLInputElement (which derive from InputElement)
        override this to return the object.
        Change all calling sites of the old toInputElement to use the new member
        function. This also allows us to save some casts.

        No new tests (refactoring).

        * src/WebInputElement.cpp:
        (WebKit::toWebInputElement):

2011-03-10  Takayoshi Kochi  <kochi@chromium.org>

        Reviewed by Tony Chang.

        Remove default parameter declaration for familiForChars(), which is no longer necessary.

        * public/gtk/WebFontInfo.h:

2011-03-10  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make updateAndDrawLayers argumentless.
        https://bugs.webkit.org/show_bug.cgi?id=55985

        Made the TilePainters and viewport parameters for
        LayerRendererChromium member variables instead of arguments on
        updateAndDrawLayers. In a future change, this will allows us to
        draw the layer tree without the WebView's assistance.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::scrollRootLayerRect):
        (WebKit::WebViewImpl::invalidateRootLayerRect):
        (WebKit::WebViewImplContentPainter::create):
        (WebKit::WebViewImplContentPainter::paint):
        (WebKit::WebViewImplContentPainter::WebViewImplContentPainter):
        (WebKit::WebViewImplScrollbarPainter::create):
        (WebKit::WebViewImplScrollbarPainter::paint):
        (WebKit::WebViewImplScrollbarPainter::WebViewImplScrollbarPainter):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::reallocateRenderer):
        (WebKit::WebViewImpl::updateLayerRendererViewport):
        * src/WebViewImpl.h:

2011-03-10  Tony Chang  <tony@chromium.org>

        Unreviewed, roll chromium version to r77259 to pick up
        webfontinfo api change.

        * DEPS:

2011-03-10  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80701.
        http://trac.webkit.org/changeset/80701
        https://bugs.webkit.org/show_bug.cgi?id=56126

        fast/dom/Geolocation/window-close-crash.html fails on Snow
        Leopard release builds (Requested by mihaip on #webkit).

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:

2011-03-10  Andrey Kosyakov  <caseq@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: better names for HAR export commands
        https://bugs.webkit.org/show_bug.cgi?id=56097

        Rename Export to HAR to Copy entry/network log as HAR
        Expose Copy as HAR unconditionally, remove related settings entry.

        * src/js/DevTools.js: removed override for resourceExportEnabled

2011-01-26  John Knottenbelt  <jknotten@chromium.org>

        Reviewed by Dmitry Titov.

        Detach Geolocation from Frame when Page destroyed.
        https://bugs.webkit.org/show_bug.cgi?id=52877

        Add accessors to the WebGeolocationClientMock to allow the number of
        pending geolocation permission requests to be queried.

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:
        (WebKit::WebGeolocationClientMock::numberOfPendingPermissionRequests):

2011-03-08  Hans Wennborg  <hans@chromium.org>

        Reviewed by Jeremy Orlow.

        IndexedDB: Add BackingStoreType parameter to IDBFactoryBackendInterface::open
        https://bugs.webkit.org/show_bug.cgi?id=55948

        Add a parameter that allows for selection of alternative backing store
        implementations.

        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::open):
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        (WebCore::IDBFactoryBackendProxy::open):
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):
        * src/WebIDBFactoryImpl.h:

2011-03-08  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by David Levin.

        Destroying WorkerFileSystemCallbacksBridge on main thread results in ASSERT in WorkerContext::Observer::~Observer
        https://bugs.webkit.org/show_bug.cgi?id=55895

        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::runTaskOnWorkerThread):
        Added stopObserving() so that releasing the bridge on the main thread
        (this could happen before or after the runTaskOnWorkerThread) does
        not cause the assertion error.

2011-03-08  Alok priyadarshi  <alokp@chromium.org>

        Reviewed by Dimitri Glazkov.

        Plugins needs a way to trigger style recalc
        https://bugs.webkit.org/show_bug.cgi?id=55242

        It will be tested by Pepper2D and Pepper3D layout/smoke tests
        on the Chromium side.
        
        * public/WebPluginContainer.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setBackingTextureId):
        * src/WebPluginContainerImpl.h:

2011-03-08  Andrei Popescu  <andreip@google.com>

        Reviewed by Steve Block.

        IDBCallbacks::onsuccess(IDBIndex*) is unused and should be removed.
        https://bugs.webkit.org/show_bug.cgi?id=55938

        * public/WebIDBCallbacks.h:
        * src/IDBCallbacksProxy.cpp:
        * src/IDBCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBCallbacksImpl.h:
        * src/WebIDBObjectStoreImpl.cpp:

2011-03-07  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Add support for DataTransferItems
        https://bugs.webkit.org/show_bug.cgi?id=55115

        Add new runtime enabled flag for data transfer items feature.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableDataTransferItems):
        (WebKit::WebRuntimeFeatures::isDataTransferItemsEnabled):

2011-03-07  Ryosuke Niwa  <rniwa@webkit.org>

        Chromium build fix.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):

2011-03-07  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Darin Adler.

        selectionHasStyle and selectionStartHasStyle should use EditingStyle
        https://bugs.webkit.org/show_bug.cgi?id=55902

        selectionHasStyle now takes a property id and a value instead of a CSSMutableStyleDeclaration.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): Calls selectionHasStyle.

2011-03-07  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Tony Chang.

        Add plumbing for paste support to ChromiumDataObject::types()
        https://bugs.webkit.org/show_bug.cgi?id=55792

        This requires a DEPS roll for a Chromium-side change to support DRT testing of
        event.dataTransfer.types.

        * DEPS:

2011-03-07  Takayoshi Kochi  <kochi@chromium.org>

        Reviewed by Tony Chang.

        Use preferred locale information when choosing fallback font using
        fontconfig on Linux platform.
        https://bugs.webkit.org/show_bug.cgi?id=55453

        Tests will be covered by Chromium side.

        * public/gtk/WebFontInfo.h:
        (WebKit::WebFontInfo::familyForChars): added 3rd parameter |preferredLocale|
        * public/linux/WebSandboxSupport.h:
        (WebKit::WebSandboxSupport::getFontFamilyForCharacters): added 3rd parameter |preferredLocale|
        * src/PlatformBridge.cpp:
        * src/gtk/WebFontInfo.cpp:

2011-03-07  James Robinson  <jamesr@chromium.org>

        Reviewed by Kenneth Russell.

        [chromium] Separate the &quot;update&quot; and &quot;draw&quot; portions of LayerRendererChromium&apos;s drawLayers function
        https://bugs.webkit.org/show_bug.cgi?id=54047

        Call updated LayerRendererChromium APIs.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::doComposite):

2011-03-07  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Replace WebKit2's decidePolicyForMIMEType with decidePolicyForResponse
        https://bugs.webkit.org/show_bug.cgi?id=55827

        Renamed FrameLoaderClient::dispatchDecidePolicyForMIMEType to dispatchDecidePolicyForResponse
        and pass the entire response, instead of just the MIMEType.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDecidePolicyForResponse):
        * src/FrameLoaderClientImpl.h:

2011-03-07  Marcus Bulach  <bulach@chromium.org>

        Reviewed by Dan Bernstein.

        WebViewImpl::focusedWebCoreFrame() should be const.
        https://bugs.webkit.org/show_bug.cgi?id=55870

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::focusedWebCoreFrame):
        * src/WebViewImpl.h:

2011-03-07  Eric Carlson  <eric.carlson@apple.com>

        Reviewed by Darin Adler.

        Add API to enumerate/delete files downloaded for <audio> and <video>
        https://bugs.webkit.org/show_bug.cgi?id=55267

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::registerSelf): Update for MediaEngineRegistrar change.

2011-03-07  Andrei Popescu  <andreip@google.com>

        Reviewed by Steve Block.

        IDBRequest::onSuccess(IDBObjectStore*) should be removed as it is unused.
        https://bugs.webkit.org/show_bug.cgi?id=55777

        * src/IDBCallbacksProxy.cpp:
        * src/IDBCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBCallbacksImpl.h:

2011-03-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80458.
        http://trac.webkit.org/changeset/80458
        https://bugs.webkit.org/show_bug.cgi?id=55863

        caused tests to crash on several chromium bots (Requested by
        ukai on #webkit).

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        (WebKit::AssociatedURLLoader::prepareRequest):
        (WebKit::AssociatedURLLoader::willSendRequest):
        (WebKit::AssociatedURLLoader::didSendData):
        (WebKit::AssociatedURLLoader::didReceiveResponse):
        (WebKit::AssociatedURLLoader::didDownloadData):
        (WebKit::AssociatedURLLoader::didReceiveData):
        (WebKit::AssociatedURLLoader::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::didFinishLoading):
        (WebKit::AssociatedURLLoader::didFail):
        * src/AssociatedURLLoader.h:

2011-03-07  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No tests needed. Exposes no new functionality.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:
        (WebKit::AssociatedURLLoaderOptions::AssociatedURLLoaderOptions):

2011-03-06  Sreeram Ramachandran  <sreeram@google.com>

        Reviewed by Dimitri Glazkov.

        Expose page dismissal event status through the WebKit API for chromium.
        https://bugs.webkit.org/show_bug.cgi?id=55844

        Chromium will find it useful to know the page dismissal status (i.e.,
        whether a frame is in the midst of executing a beforeunload or unload
        handler), so expose that information through the chromium port in the
        WebKit API.
     
        This is my second attempt at this patch. The previous one broke
        downstream Chromium builds of some unit tests which had classes derived
        from WebFrame (and thus became uninstantiable because of this new pure
        virtual method). Those have now been fixed (http://crrev.com/77101).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::pageDismissalEventBeingDispatched):
        * src/WebFrameImpl.h:

2011-03-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80436.
        http://trac.webkit.org/changeset/80436
        https://bugs.webkit.org/show_bug.cgi?id=55849

        Broke Chromium compile across the board (Requested by dglazkov
        on #webkit).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-03-06  Sreeram Ramachandran  <sreeram@google.com>

        Reviewed by Dimitri Glazkov.

        Expose page dismissal event status through the WebKit API for chromium
        https://bugs.webkit.org/show_bug.cgi?id=55844

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::pageDismissalEventBeingDispatched):
        * src/WebFrameImpl.h:

2011-03-05  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Dmitry Titov.

        [chromium] Add method to WebClipboard to read images from the clipboard.
        https://bugs.webkit.org/show_bug.cgi?id=55814

        * public/WebClipboard.h:
        (WebKit::WebClipboard::readImage):

2011-03-04  Adam Barth  <abarth@webkit.org>

        Reviewed by Dimitri Glazkov.

        Remove unneeded round-trips through ../Source in the Chromium GYP build
        https://bugs.webkit.org/show_bug.cgi?id=55795

        * WebKit.gyp:

2011-03-03  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Dimitri Glazkov.

        [chromium] Get rid of IsContentFiltered flags since they&apos;re not used anymore
        https://bugs.webkit.org/show_bug.cgi?id=55748

        * DEPS:
        * public/WebURLResponse.h:
        * src/WebURLResponse.cpp:

2011-03-04  James Su <suzhe@chromium.org>

        Reviewed by Dimitri Glazkov.

        [Chromium] keycode is always 0 when using non-Latin keyboard layout.
        https://bugs.webkit.org/show_bug.cgi?id=54939

        No intended functionality change.

        * src/mac/WebInputEventFactory.mm:
        (WebKit::windowsKeyCodeForKeyEvent): Use the same implementation
        provided in WebCore/platform/mac/KeyEventMac.mm.

2011-03-04  Zelidrag Hornung  <zelidrag@chromium.org>

        Reviewed by David Levin

        Expose ability to create instance of DOMFileSystem from Chromium side.
        https://bugs.webkit.org/show_bug.cgi?id=55618

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFileSystem):
        * src/WebFrameImpl.h:

2011-03-03  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Create a LayerChromium layerTreeAsText. Add HUD to
        LayerRendererChromium that draws compositor FPS and, optionally,
        the layer tree.
        https://bugs.webkit.org/show_bug.cgi?id=54710

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setShowFPSCounter):
        (WebKit::WebSettingsImpl::setShowPlatformLayerTree):
        * src/WebSettingsImpl.h:
        (WebKit::WebSettingsImpl::showFPSCounter):
        (WebKit::WebSettingsImpl::showPlatformLayerTree):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doComposite):

2011-03-03  Alexey Proskuryakov  <ap@apple.com>

        Removing an include of WebCoreKeyboardUIMode.h that Ive just added. It's already included
        via ChromeClient.h

        * src/ChromeClientImpl.h:

2011-03-02  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Darin Adler.

        REGRESSION (WebKit2): Tab keys no longer observe Full Keyboard Access
        https://bugs.webkit.org/show_bug.cgi?id=55633
        <rdar://problem/8963023>

        * src/ChromeClientImpl.cpp: (WebKit::ChromeClientImpl::keyboardUIMode):
        * src/ChromeClientImpl.h:
        Implement keyboardUIMode() instead of tabsToLinks(). No change in functionality, since
        this platform doesn't observe or have full keyboard access state.

2011-03-03  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80219.
        http://trac.webkit.org/changeset/80219
        https://bugs.webkit.org/show_bug.cgi?id=55680

        "Causes several media test crashes" (Requested by tonyg-cr on
        #webkit).

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        (WebKit::AssociatedURLLoader::prepareRequest):
        (WebKit::AssociatedURLLoader::willSendRequest):
        (WebKit::AssociatedURLLoader::didSendData):
        (WebKit::AssociatedURLLoader::didReceiveResponse):
        (WebKit::AssociatedURLLoader::didDownloadData):
        (WebKit::AssociatedURLLoader::didReceiveData):
        (WebKit::AssociatedURLLoader::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::didFinishLoading):
        (WebKit::AssociatedURLLoader::didFail):
        * src/AssociatedURLLoader.h:

2011-03-03  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add an equals() method to WebAccessibilityObject.
        https://bugs.webkit.org/show_bug.cgi?id=55631

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::equals):

2011-03-03  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: make selected call frame debugger presentation model property.
        https://bugs.webkit.org/show_bug.cgi?id=55582

        * src/js/Tests.js:

2011-03-03  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No tests needed. Exposes no new functionality.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:
        (WebKit::AssociatedURLLoaderOptions::AssociatedURLLoaderOptions):

2011-03-03  Steve Lacey  <sjl@chromium.org>

        Reviewed by Darin Fisher.

        Wire up webkit metrics changes to chromium changes.
        https://bugs.webkit.org/show_bug.cgi?id=54580

        * features.gypi:
        * public/WebMediaPlayer.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::decodedFrameCount):
        (WebKit::WebMediaPlayerClientImpl::droppedFrameCount):
        (WebKit::WebMediaPlayerClientImpl::audioDecodedByteCount):
        (WebKit::WebMediaPlayerClientImpl::videoDecodedByteCount):
        * src/WebMediaPlayerClientImpl.h:

2011-03-02  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Manually revert ChromiumDataObject changes.
        https://bugs.webkit.org/show_bug.cgi?id=55627

        * public/WebView.h:
        * src/WebDragData.cpp:
        (WebKit::WebDragData::initialize):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::dragTargetDragEnter):
        * src/WebViewImpl.h:

2011-03-02  David Grogan  <dgrogan@chromium.org>

        Reviewed by Jeremy Orlow.

        IndexedDB: fire versionchange events when calling setVersion
        https://bugs.webkit.org/show_bug.cgi?id=55095

        * WebKit.gyp:
        * src/IDBDatabaseCallbacksProxy.cpp: Copied from Source/WebCore/storage/IDBVersionChangeEvent.h.
        (WebCore::IDBDatabaseCallbacksProxy::create):
        (WebCore::IDBDatabaseCallbacksProxy::IDBDatabaseCallbacksProxy):
        (WebCore::IDBDatabaseCallbacksProxy::~IDBDatabaseCallbacksProxy):
        (WebCore::IDBDatabaseCallbacksProxy::onVersionChange):
        * src/IDBDatabaseCallbacksProxy.h: Copied from Source/WebCore/storage/IDBVersionChangeEvent.h.
        * src/IDBDatabaseProxy.cpp:
        (WebCore::IDBDatabaseProxy::setVersion):
        (WebCore::IDBDatabaseProxy::close):
        (WebCore::IDBDatabaseProxy::open):
        * src/IDBDatabaseProxy.h:
        * src/WebIDBDatabaseCallbacksImpl.cpp: Copied from Source/WebCore/storage/IDBVersionChangeEvent.cpp.
        (WebCore::WebIDBDatabaseCallbacksImpl::WebIDBDatabaseCallbacksImpl):
        (WebCore::WebIDBDatabaseCallbacksImpl::~WebIDBDatabaseCallbacksImpl):
        (WebCore::WebIDBDatabaseCallbacksImpl::onVersionChange):
        * src/WebIDBDatabaseCallbacksImpl.h: Copied from Source/WebCore/storage/IDBVersionChangeEvent.h.
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::setVersion):
        (WebKit::WebIDBDatabaseImpl::close):
        (WebKit::WebIDBDatabaseImpl::open):
        * src/WebIDBDatabaseImpl.h:

2011-03-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80139.
        http://trac.webkit.org/changeset/80139
        https://bugs.webkit.org/show_bug.cgi?id=55620

        failing and crashing tests on Snow Leopard bot (Requested by
        mihaip1 on #webkit).

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:

2011-03-02  Daniel Cheng  <dcheng@chromium.org>

        Revert frame-specific WebClipboard changes
        https://bugs.webkit.org/show_bug.cgi?id=55617

        This code is no longer needed since we've decided to use the original
        approach to copy/paste drag/drop handling in ClipboardChromium.

        * public/WebFrameClient.h:
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::clipboardReadAvailableTypes):
        (WebCore::PlatformBridge::clipboardReadData):
        (WebCore::PlatformBridge::clipboardReadFilenames):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::fromFrame):
        * src/WebFrameImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::dragTargetDragEnterNew):

2011-03-02  Tony Chang  <tony@chromium.org>

        Unreviewed, rolling chromium DEPS to r76362.

        https://bugs.webkit.org/show_bug.cgi?id=55564

        * DEPS:

2011-02-28  Jeremy Orlow  <jorlow@chromium.org>

        Reviewed by James Robinson.

        Split IDBCursor.value into IDBCursor.primaryKey and IDBCursor.value
        https://bugs.webkit.org/show_bug.cgi?id=55443

        * public/WebIDBCursor.h:
        (WebKit::WebIDBCursor::primaryKey):
        (WebKit::WebIDBCursor::value):
        * src/IDBCursorBackendProxy.cpp:
        (WebCore::IDBCursorBackendProxy::primaryKey):
        (WebCore::IDBCursorBackendProxy::value):
        * src/IDBCursorBackendProxy.h:
        * src/WebIDBCursorImpl.cpp:
        (WebKit::WebIDBCursorImpl::key):
        (WebKit::WebIDBCursorImpl::primaryKey):
        (WebKit::WebIDBCursorImpl::value):
        * src/WebIDBCursorImpl.h:

2011-03-02  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Add feature define for data transfer items
        https://bugs.webkit.org/show_bug.cgi?id=55510

        * features.gypi:

2011-01-26  John Knottenbelt  <jknotten@chromium.org>

        Detach Geolocation from Frame when Page destroyed.
        https://bugs.webkit.org/show_bug.cgi?id=52877

        Add accessors to the WebGeolocationClientMock to allow the number of
        pending geolocation permission requests to be queried.

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:
        (WebKit::WebGeolocationClientMock::numberOfPendingPermissionRequests):

2011-03-01  David Grogan  <dgrogan@chromium.org>

        Reviewed by Jeremy Orlow.

        IndexedDB: public webkit interfaces for firing versionchange events to IDBDatabase objects
        https://bugs.webkit.org/show_bug.cgi?id=55548

        * WebKit.gyp:
        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::createObjectStore):
        (WebKit::WebIDBDatabase::open):
        * public/WebIDBDatabaseCallbacks.h: Added.
        (WebKit::WebIDBDatabaseCallbacks::~WebIDBDatabaseCallbacks):
        (WebKit::WebIDBDatabaseCallbacks::onVersionChange):

2011-03-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80079.
        http://trac.webkit.org/changeset/80079
        https://bugs.webkit.org/show_bug.cgi?id=55547

        "Broke the Win debug build?" (Requested by dcheng on #webkit).

        * features.gypi:

2011-03-01  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Add feature define for data transfer items
        https://bugs.webkit.org/show_bug.cgi?id=55510

        * features.gypi:

2011-03-01  Jeremy Orlow  <jorlow@chromium.org>

        Reviewed by James Robinson.

        Add a primaryKey method to IDBCursor
        https://bugs.webkit.org/show_bug.cgi?id=55518

        In prep for https://bugs.webkit.org/show_bug.cgi?id=55443

        * public/WebIDBCursor.h:
        (WebKit::WebIDBCursor::primaryKey):

2011-02-28  Chang Shu  <cshu@webkit.org>

        Reviewed by Ryosuke Niwa.

        Remove the support of Frame::isContentEditable and its dependencies.
        https://bugs.webkit.org/show_bug.cgi?id=54292

        Remove the WebKit side implementation.

        * src/EditorClientImpl.cpp:
        * src/EditorClientImpl.h:

2011-02-28  Avi Drissman  <avi@google.com>

        Reviewed by James Robinson.

        WebCursorInfo needs to match enums in platform/Cursor.h
        https://bugs.webkit.org/show_bug.cgi?id=55094

        * public/WebCursorInfo.h:
        * src/AssertMatchingEnums.cpp:

2011-02-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r78789.
        http://trac.webkit.org/changeset/78789
        https://bugs.webkit.org/show_bug.cgi?id=55409

        Incorrect canvas fallback implementation (Requested by
        inferno-sec on #webkit).

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2011-02-28  Adam Klein  <adamk@chromium.org>

        Reviewed by Adam Barth.

        [fileapi] Implement LocalFileSystem.resolveLocalFileSystemURI
        https://bugs.webkit.org/show_bug.cgi?id=54774

        * src/LocalFileSystemChromium.cpp:
        (WebCore::LocalFileSystem::readFileSystem):
        Removed size argument to readFileSystem()

2011-02-27  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Darin Fisher.

        Pass frame history state in the context menu parameters.
        https://bugs.webkit.org/show_bug.cgi?id=55232

        * public/WebContextMenuData.h:
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):

2011-02-26  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to WebFrame.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::clearOpener):
        * src/WebFrameImpl.h:

2011-02-26  Pavel Feldman  <pfeldman@chromium.org>

        Not reviewed: rolling chromium DEPS.

        * DEPS:

2011-02-26  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        WebURLRequest, WebURLResponse properties should be passed to WebCore Layer
        https://bugs.webkit.org/show_bug.cgi?id=54489

        No tests needed. This is already tested by ui_tests, nacl_ui_tests, and nacl_sandbox_tests

        * src/WebURLRequest.cpp:
        (WebKit::WebURLRequestPrivateImpl::WebURLRequestPrivateImpl):
        (WebKit::WebURLRequest::downloadToFile):
        (WebKit::WebURLRequest::setDownloadToFile):
        * src/WebURLRequestPrivate.h:
        (WebKit::WebURLRequestPrivate::WebURLRequestPrivate):
        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponsePrivateImpl::WebURLResponsePrivateImpl):
        (WebKit::WebURLResponse::downloadFilePath):
        (WebKit::WebURLResponse::setDownloadFilePath):
        * src/WebURLResponsePrivate.h:

2011-02-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r79764.
        http://trac.webkit.org/changeset/79764
        https://bugs.webkit.org/show_bug.cgi?id=55295

        "broke Chromium builds" (Requested by rniwa on #webkit).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-02-26  David Dorwin  <ddorwin@chromium.org>

        Reviewed by Darin Fisher.

        Enable WebKit Full Screen API in Chromium. The element becomes the full size of the window, but the window is not yet full screen. Support is disabled by default.

        fullscreen javascript bindings not implemented for v8
        https://bugs.webkit.org/show_bug.cgi?id=44797

        * features.gypi:
        * public/WebSettings.h:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::supportsFullScreenForElement):
        (WebKit::ChromeClientImpl::enterFullScreenForElement):
        (WebKit::ChromeClientImpl::exitFullScreenForElement):
        (WebKit::ChromeClientImpl::fullScreenRendererChanged):
        * src/ChromeClientImpl.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFullScreenEnabled):
        * src/WebSettingsImpl.h:

2011-02-26  John Mellor  <johnme@chromium.org>

        Reviewed by Antonio Gomes.

        [chromium] WebFrameImpl::m_totalMatchCount should be an int
        https://bugs.webkit.org/show_bug.cgi?id=55134

        WebFrameImpl::m_totalMatchCount should be an int instead of a size_t since it can be -1.

        * src/WebFrameImpl.h:

2011-02-26  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to WebFrame.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::clearOpener):
        * src/WebFrameImpl.h:

2011-02-25  Tony Chang  <tony@chromium.org>

        Roll chromium deps to include RBGToHSL fix and ICU update.

        * DEPS:

2011-02-15  Brett Wilson  <brettw@chromium.org>

        Reviewed by Darin Fisher.

        Recover the mouse capture state when we recieve a mouse event where there is no longer a button down.
        https://bugs.webkit.org/show_bug.cgi?id=54503

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):

2011-02-24  James Robinson  <jamesr@chromium.org>

        Reviewed by Darin Fisher.

        Add a USE() macro to control use of the built-in UTF8 codec
        https://bugs.webkit.org/show_bug.cgi?id=55189

        Defaults USE(BUILTIN_UTF8_CODEC) to true for the Chromium port.

        * features.gypi:

2011-02-24  James Kozianski  <koz@chromium.org>

        Reviewed by Ojan Vafai.

        Add missing plumbing for registerProtocolHandler in ChromeClientImpl.
        https://bugs.webkit.org/show_bug.cgi?id=55112

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::registerProtocolHandler):

2011-02-24  James Robinson  <jamesr@chromium.org>

        Unreviewed, rolling out r79584.
        http://trac.webkit.org/changeset/79584
        https://bugs.webkit.org/show_bug.cgi?id=44797

        [chromium] Patch does not compile if ENABLE_FULLSCREEN_API is
        not set

        * features.gypi:
        * public/WebSettings.h:
        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:

2011-02-24  Andrew Wilson  <atwilson@chromium.org>

        Unreviewed, rolling out r79570.
        http://trac.webkit.org/changeset/79570
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Breaks chromium build because glue/mocks/mock_web_frame.h/cc
        was not updated

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-02-24  David Dorwin  <ddorwin@chromium.org>

        Reviewed by Eric Seidel.

        Enable WebKit Full Screen API in Chromium. The element becomes the full size of the window, but the window is not yet full screen. Support is disabled by default.

        fullscreen javascript bindings not implemented for v8
        https://bugs.webkit.org/show_bug.cgi?id=44797

        * features.gypi:
        * public/WebSettings.h:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::supportsFullScreenForElement):
        (WebKit::ChromeClientImpl::enterFullScreenForElement):
        (WebKit::ChromeClientImpl::exitFullScreenForElement):
        (WebKit::ChromeClientImpl::fullScreenRendererChanged):
        * src/ChromeClientImpl.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFullScreenEnabled):
        * src/WebSettingsImpl.h:

2011-02-24  Patrick Gansterer  <paroga@webkit.org>

        Reviewed by Eric Seidel.

        Rename PLATFORM(SKIA) to USE(SKIA)
        https://bugs.webkit.org/show_bug.cgi?id=55090

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):
        * src/GraphicsContext3DInternal.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):

2011-02-24  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Alexey Proskuryakov.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to WebFrame.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::clearOpener):
        * src/WebFrameImpl.h:

2011-02-24  Adam Klein  <adamk@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Add code to WebKit Chromium to allow access to NetworkStateNotifier
        https://bugs.webkit.org/show_bug.cgi?id=54516

        Add a new WebNetworkStateNotifier class with a single static method,
        setOnLine(), which dispatches to WebCore's singleton NetworkStateNotifier.

        * WebKit.gyp:
        * public/WebNetworkStateNotifier.h: Added.
        * src/WebNetworkStateNotifier.cpp: Added.
        (WebKit::WebNetworkStateNotifier::setOnLine):

2011-02-24  Robert Kroeger <rjkroege@chromium.org>

        Reviewed by Darin Fisher.

        Added timestamps to PlatformTouchEvent etc.

        PlatformTouchEvent doesn't have a timestamp and so
        eventSender.leapForward cannot be used for touchevent based tests.
        This change constructs PlatformTouchEvents with timestamps
        provided from a WebTouchEvent on chromium. It also adds an enum
        to make code referring to specific WebTouchPoints easier to read.

        [chromium] [WebCore] [android] Touch events are missing time stamps
        https://bugs.webkit.org/show_bug.cgi?id=53510

        * public/WebTouchPoint.h:
        (WebKit::WebTouchPoint::WebTouchPoint):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformTouchEventBuilder::PlatformTouchEventBuilder):

2011-02-23  Adam Barth  <abarth@webkit.org>

        Reviewed by James Robinson.

        [Chromium] Use WebKitClient for OSRandomSource instead of trying to talk to the file system in the sandbox
        https://bugs.webkit.org/show_bug.cgi?id=55093

        We need to get OS randomness from the WebKit client rather than try to
        get it from /dev/urandom directly because WebKit doesn't have access to
        the file system when running inside the Chromium sandbox.

        * WebKit.gyp:
        * src/ChromiumOSRandomSource.cpp: Added.

2011-02-23  Adam Barth  <abarth@webkit.org>

        Reviewed by James Robinson.

        Roll Chromium DEPS
        https://bugs.webkit.org/show_bug.cgi?id=55096

        Rolling to the future, like a truck.

        * DEPS:

2011-02-23  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Fisher.

        [Chromium] Add WebKitClient::cryptographicallyRandomValues
        https://bugs.webkit.org/show_bug.cgi?id=55073

        This patch adds a WebKit client API to get cryptographic randomness.
        We'll use this API to gather seed randomness while inside the sandbox.

        * public/WebKitClient.h:
        (WebKit::WebKitClient::cryptographicallyRandomValues):

2011-02-23  Kenneth Russell  <kbr@google.com>

        Unreviewed, rolling out r79387.
        https://bugs.webkit.org/show_bug.cgi?id=54885

        Reapply the code changes from r79038 since they weren't the root
        cause of the test timeouts.

        * src/WebKit.cpp:
        (WebKit::initialize):

2011-02-23  Takashi Toyoshima  <toyoshim@chromium.org>

        Reviewed by Shinichiro Hamaji.

        [chromium] Control-Up/Down should be PageUp/Down on Mac.
        https://bugs.webkit.org/show_bug.cgi?id=54606

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollViewWithKeyboard):

2011-02-22  Kenneth Russell  <kbr@google.com>

        Reviewed by James Robinson.

        Many tests started timing out on the chrome mac canaries around r79035
        https://bugs.webkit.org/show_bug.cgi?id=54885

        Revert the code changes, but not the Chromium DEPS roll, from
        r79038 to see whether this clears up the timing-out tests. Was not
        able to reproduce the timeouts locally with a Release mode build
        of DRT (on Snow Leopard).

        * src/WebKit.cpp:
        (WebKit::initialize):

2011-02-21  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] WebWorkerBase::openFileSystem confuses clang's -Woverloaded-virtual
        https://bugs.webkit.org/show_bug.cgi?id=54920

        Rename WebWorkerBase::openFileSystem() to openFileSystemForWorker() to
        make it obvious it's not an override of
        WebFrameClient::openFileSystem().

        Remove a failed attempt to override it in WebWorkerClientImpl (the
        override didn't change the behavior).

        No intended functionality change.

        * src/LocalFileSystemChromium.cpp:
        (WebCore::LocalFileSystem::requestFileSystem):
        Call new name.
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::openFileSystemForWorker):
        Rename openFileSystem() to openFileSystemForWorker().
        * src/WebWorkerBase.h:
        Rename openFileSystem() to openFileSystemForWorker().
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::allowDatabase):
        Remove unsuccessful (and pointless) override.

2011-02-22  Ilya Tikhonovsky  <loislo@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: flakyness of inspector tests.
        https://bugs.webkit.org/show_bug.cgi?id=54729

        As far as we have the protocol with sequence numbers we can simplify test harness support
        and drop out chomium specific methods.

        * src/js/DevTools.js:

2011-02-21  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: move source mapping from SourceFrame to ScriptsPanel.
        https://bugs.webkit.org/show_bug.cgi?id=54645

        * src/js/Tests.js:
        (.TestSuite.prototype._checkExecutionLine):

2011-02-21  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] PopupContainer::show() confuses clang's -Woverloaded-virtual
        https://bugs.webkit.org/show_bug.cgi?id=54923

        Rename PopupContainer::show() to showInRect(), to make it obvious it's
        not an override of ScrollView::show().

        No intended functionality change.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::applyAutoFillSuggestions):

2011-02-21  Nico Weber  <thakis@chromium.org>

        Reviewed by Kent Tamura.

        [chromium] ChromePluginPrintContext::begin() fails to override superclass method
        https://bugs.webkit.org/show_bug.cgi?id=54914

        Update subclass method signature to match superclass again. This
        regressed in http://trac.webkit.org/changeset/71964

        * src/WebFrameImpl.cpp:
        (WebKit::ChromePluginPrintContext::begin):

2011-02-17  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Kent Tamura.

        Rename Position::node() to Position::deprecatedNode()
        https://bugs.webkit.org/show_bug.cgi?id=54622

        Done the rename. All calls to node() are replaced by calls to deprecatedNode().

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setComposition): Check the nullity of startContainer() instead of startPosition()->node().
        (WebKit::WebViewImpl::confirmComposition): Ditto.
        (WebKit::WebViewImpl::textInputType):
        (WebKit::WebViewImpl::caretOrSelectionBounds):

2011-02-19  Brian Ryner  <bryner@chromium.org>

        Reviewed by Adam Barth.

        Add missing #includes of DocumentLoader.h, needed since the transitive
        include through Document.h is removed.
        https://bugs.webkit.org/show_bug.cgi?id=50489

        * src/WebPageSerializerImpl.cpp:
        * src/WebSearchableFormData.cpp:

2011-02-19  Charlie Reis  <creis@chromium.org>

        Reviewed by Mihai Parparita.

        Ensure loading has stopped in HistoryController::goToItem
        https://bugs.webkit.org/show_bug.cgi?id=54517

        Call Page::goToItem instead of HistoryController::goToItem, so that
        FrameLoader::stopAllLoaders is called first.  Also adds a callback in
        FrameLoaderClient for checking for pseudo-back-forward URLs.

        Test: http/tests/navigation/forward-to-fragment-fires-onload.html

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::shouldStopLoadingForHistoryItem): Added.
        * src/FrameLoaderClientImpl.h:
        * src/WebFrameImpl.cpp:

2011-02-18  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Marks any actions triggered by performDefaultAction as a user
        gesture, so that a user with a screen reader isn't prevented from
        performing operations that must be triggered by a user gesture.
        https://bugs.webkit.org/show_bug.cgi?id=54759

        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::performDefaultAction):

2011-02-18  Kenneth Russell  <kbr@google.com>

        Reviewed by James Robinson.

        [chromium] Clean up initialization of minimum timer interval
        https://bugs.webkit.org/show_bug.cgi?id=54772

        Rolled forward Chromium DEPS to pick up new webkit_support entry
        point. Removed setting of default minimum timer interval, as this
        is now done every time WebPreferences are applied.

        Tested with Chromium DRT port built from WebKit workspace; ran
        fast/dom/ layout tests.

        * DEPS:
        * src/WebKit.cpp:
        (WebKit::initialize):

2011-02-18  Ben Vanik  <benvanik@google.com>

        Reviewed by Kenneth Russell.

        Bug 53940: Implement the OES_vertex_array_object WebGL extension
        https://bugs.webkit.org/show_bug.cgi?id=53940

        Stubbed out methods for the new OES_vertex_array_object methods.

        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::createVertexArrayOES):
        (WebCore::Extensions3DChromium::deleteVertexArrayOES):
        (WebCore::Extensions3DChromium::isVertexArrayOES):
        (WebCore::Extensions3DChromium::bindVertexArrayOES):

2011-02-17  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Shinichiro Hamaji.

        Retry landing after fixing Chromium side.
        Fix for Bug 54632 - [chromium] Printing causes view to scroll
        https://bugs.webkit.org/show_bug.cgi?id=54632

        Expose setScrollOffset such that Chromium can restore the scroll offset
        after printing the document. The bug will be fixed when the counterpart
        patch http://codereview.chromium.org/6539011/ is landed for Chromium.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setScrollOffset):
        * src/WebFrameImpl.h:

2011-02-17  Andrew Wilson  <atwilson@chromium.org>

        Unreviewed, rolling out r78936.
        http://trac.webkit.org/changeset/78936
        https://bugs.webkit.org/show_bug.cgi?id=54632

        Breaks chromium build

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-02-17  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Shinichiro Hamaji.

        Fix for Bug 54632 - [chromium] Printing causes view to scroll
        https://bugs.webkit.org/show_bug.cgi?id=54632

        Expose setScrollOffset such that Chromium can restore the scroll offset
        after printing the document. The bug will be fixed when the counterpart
        patch http://codereview.chromium.org/6539011/ is landed for Chromium.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setScrollOffset):
        * src/WebFrameImpl.h:

2011-02-17  W. James MacLean  <wjmaclean@chromium.org>

        Reviewed by James Robinson.

        [chromium] Add command-line flag to enable composite to offscreen texture.
        https://bugs.webkit.org/show_bug.cgi?id=52311

        Add plumbing to allow command-line switch to enable offscreen compositing. Function
        LayerRendererChromium::copyOffscreenTextureToDisplay used for now to mimic
        normal renderer operation.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setCompositeToTextureEnabled):
        * src/WebSettingsImpl.h:
        (WebKit::WebSettingsImpl::compositeToTextureEnabled):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doComposite):

2011-02-10  Luiz Agostini  <luiz.agostini@openbossa.org>

        Reviewed by Adam Roben.

        HTML5 <details> and <summary>: localized text
        https://bugs.webkit.org/show_bug.cgi?id=54260

        The method defaultDetailsSummaryText was added to LocalizedStrings. It is used to provide
        the default label to be used by a <details> tag that has no <summary> child.

        * src/LocalizedStrings.cpp:
        (WebCore::defaultDetailsSummaryText):

2011-02-17  Steve Lacey  <sjl@chromium.org>

        Reviewed by Darin Fisher.

        Roll chromium deps to 75190. Includes new dependency
        on libjingle.

        https://bugs.webkit.org/show_bug.cgi?id=54588

        * DEPS:

2011-02-17  Pavel Podivilov  <podivilov@chromium.org>

        Unreviewed, interactive ui test fix for r78808.

        * src/js/Tests.js:
        (.TestSuite.prototype._waitUntilScriptsAreParsed.waitForAllScripts):
        (.TestSuite.prototype._waitUntilScriptsAreParsed):

2011-02-16  Brian Ryner  <bryner@chromium.org>

        Reviewed by Darin Fisher.

        Split the socket address field into separate IP address and port fields.
        This will make the field less error-prone to parse, for example when
        dealing with IPv6 literals.
        https://bugs.webkit.org/show_bug.cgi?id=54607

        * public/WebURLResponse.h:
        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponse::remoteIPAddress):
        (WebKit::WebURLResponse::setRemoteIPAddress):
        (WebKit::WebURLResponse::remotePort):
        (WebKit::WebURLResponse::setRemotePort):

2011-02-16  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Chris Fleizach.

        Add new role for canvas elements.

        https://bugs.webkit.org/show_bug.cgi?id=50126

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2011-02-16  Victoria Kirst  <vrk@google.com>

        Reviewed by Kenneth Russell.

        [chromium] Fix green pixels at edge of certain GPU-accelerated videos
        https://bugs.webkit.org/show_bug.cgi?id=54559

        * src/VideoFrameChromiumImpl.cpp:
        (WebKit::VideoFrameChromiumImpl::width):
        (WebKit::VideoFrameChromiumImpl::height):
        (WebKit::VideoFrameChromiumImpl::requiredTextureSize):
        (WebKit::VideoFrameChromiumImpl::hasPaddingBytes):
        * src/VideoFrameChromiumImpl.h:

2011-02-16  Jeremy Orlow  <jorlow@chromium.org>

        Back out IndexedDB change thats no longer necessary
        https://bugs.webkit.org/show_bug.cgi?id=54603

        Backing out 78645 as it turns out that it's not necessary.

        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::open):
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):
        * src/WebIDBFactoryImpl.h:

2011-02-16  David Grogan  <dgrogan@chromium.org>

        Reviewed by Jeremy Orlow.

        indexeddb: make setVersion fire blocked event if other connections are open
        https://bugs.webkit.org/show_bug.cgi?id=53728

        * src/IDBCallbacksProxy.cpp:
        (WebCore::IDBCallbacksProxy::onBlocked):
        * src/IDBCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        (WebCore::WebIDBCallbacksImpl::onBlocked):
        * src/WebIDBCallbacksImpl.h:

== Rolled over to ChangeLog-2011-02-16 ==
