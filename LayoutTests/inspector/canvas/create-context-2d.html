<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="resources/create-context-utilities.css">
<script src="../../http/tests/inspector/resources/inspector-test.js"></script>
<script src="resources/create-context-utilities.js"></script>
<script>
window.worker = new Worker("resources/worker.js");

function test() {
    let suite = InspectorTest.CreateContextUtilities.initializeTestSuite("Canvas.CreateContext2D");

    InspectorTest.CreateContextUtilities.addSimpleTestCase({
        name: "Attached",
        expression: `createAttachedCanvas("2d")`,
        contextType: WI.Canvas.ContextType.Canvas2D,
    });

    InspectorTest.CreateContextUtilities.addSimpleTestCase({
        name: "Detached",
        expression: `createDetachedCanvas("2d")`,
        contextType: WI.Canvas.ContextType.Canvas2D,
    });

    InspectorTest.CreateContextUtilities.addSimpleTestCase({
        name: "Offscreen",
        expression: `createOffscreenCanvas("2d")`,
        contextType: WI.Canvas.ContextType.OffscreenCanvas2D,
    });

    InspectorTest.CreateContextUtilities.addSimpleTestCase({
        name: "Worker",
        expression: `worker.postMessage({name: "createContext", args: ["2d"]})`,
        contextType: WI.Canvas.ContextType.OffscreenCanvas2D,
        skipDestroy: true,
    });

    InspectorTest.CreateContextUtilities.addCSSCanvasTestCase(WI.Canvas.ContextType.Canvas2D);

    suite.runTestCasesAndFinish();
}
</script>
</head>
<body onload="runTest()">
    <p>Test that CanvasManager tracks creation and destruction of 2D canvases.</p>
</body>
</html>
