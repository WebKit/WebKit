Test error handling for JWK import.

On success, you will see a series of "PASS" messages, followed by "TEST COMPLETE".


PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer(''), null) threw exception TypeError: Invalid JWK serialization.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{'), null) threw exception TypeError: Invalid JWK serialization.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('null'), null) threw exception TypeError: Invalid JWK serialization.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('undefined'), null) threw exception TypeError: Invalid JWK serialization.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{}'), null) threw exception TypeError: Neither key nor function argument has crypto algorithm specified.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{}'), "aes-cbc") threw exception TypeError: Required JWK "kty" member is missing.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "foobar", "alg": "HS256", "use": "sig", "k": "ahjkn23387fgnsibf23qsvahjkn37387fgnsibf23qs" }'), null) threw exception TypeError: Unsupported JWK key type foobar.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "foobar", "use": "sig", "k": "ahjkn23387fgnsibf23qsvahjkn37387fgnsibf23qs" }'), null) threw exception TypeError: Unsupported JWK algorithm foobar.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "HS256", "use": "sig", "extractable": false, "k": "ahjkn23387fgnsibf23qsvahjkn37387fgnsibf23qs" }'), "aes-cbc") threw exception TypeError: Algorithm specified in key is not compatible with one passed to importKey as argument.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "HS256", "use": "sig", "extractable": false, "k": "ahjkn23387fgnsibf23qsvahjkn37387fgnsibf23qs" }'), { name: "hmac", hash: "sha-1" }) threw exception TypeError: Algorithm specified in key is not compatible with one passed to importKey as argument.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "HS256" }'), null) threw exception TypeError: Secret key data is not present is JWK.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "A128CBC" }'), null) threw exception TypeError: Secret key data is not present is JWK.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "HS256", "use": "sig", "extractable": false, "k": "1234" }'), null) threw exception TypeError: Key size is not valid for HS256.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "A128CBC", "use": "sig", "extractable": false, "k": "1234" }'), null) threw exception TypeError: Key size is not valid for A128CBC.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "A128CBC", "use": "sig", "extractable": false, "k": "ahjkn23387fgnsibf23qsvahjkn37387fgnsibf23qs" }'), null) threw exception TypeError: Key size is not valid for A128CBC.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "HS256", "use": "sig", "extractable": false, "k": "ahjkn23387f+nsibf23qsvahjkn37387fgnsibf23qs" }'), null) threw exception TypeError: Cannot decode base64url key data in JWK.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": 1, "alg": "HS256", "use": "sig", "extractable": false, "k": "ahjkn23387fgnsibf23qsvahjkn37387fgnsibf23qs" }'), null) threw exception TypeError: Expected a string value for "kty" JSON key.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": 1, "use": "sig", "extractable": false, "k": "ahjkn23387fgnsibf23qsvahjkn37387fgnsibf23qs" }'), null) threw exception TypeError: Expected a string value for "alg" JSON key.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "HS256", "use": 1, "extractable": false, "k": "ahjkn23387fgnsibf23qsvahjkn37387fgnsibf23qs" }'), null) threw exception TypeError: Expected a string value for "use" JSON key.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "HS256", "use": "sig", "extractable": "false", "k": "ahjkn23387fgnsibf23qsvahjkn37387fgnsibf23qs" }'), null) threw exception TypeError: Expected a boolean value for "extractable" JSON key.
PASS crypto.subtle.importKey("jwk", asciiToArrayBuffer('{ "kty": "oct", "alg": "HS256", "use": "sig", "extractable": false, "k": 1 }'), null) threw exception TypeError: Expected a string value for "k" JSON key.
PASS successfullyParsed is true

TEST COMPLETE

