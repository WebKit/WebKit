# These are the layout test expectations for the glib-based ports: WebKitGTK and WPE.
#
# This file is used to track common expectations to both ports.
#
# The bots of WebKitGTK+/WPE running layout tests (GTK Release Test, GTK Debug Test,
# GTK Release Wayland Test, WPE Release Test, and WPE Debug Test)
# are currently running on Debian 10 (Buster) x86_64.
#
# See http://trac.webkit.org/wiki/TestExpectations for more information on this file.
#
# Never add any tests to this file without opening a bug on bugzilla.webkit.org.
#
# Currently the following sections are used, but this is not a fixed list. Some sections
# (like WebAnimation, PageOverlay, WebGL) will mirror their top-level LayoutTests/
# folders, but others like CSS and GStreamer may have entries from multiple folders.
#
# * Accessibilty
# * CSS
# * GStreamer
# * Perf
# * SVG
# * WebAnimations
# * WebGL
# * WebRTC
# * WebSocket
# * WPT
# * PASSING tests
#   * Usually to override tests skipped/failing by Mac ports.
# * UNSUPPORTED tests
#   * Things we do not test. (i.e. Skipped)
# * NEEDS TRIAGING
#   * If you are not sure where an expectation should go, put it here and ask for proper
#     triaging in the associated bug.
#
# Important rules when creating new sections:
#
# * Keep them alphabetically sorted - except for the PASSING/NEEDS TRIAGING sections.
# * Only PASSING/UNSUPPORTED should have expectations without bug entries.


#////////////////////////////////////////////////////////////////////////////////////////
# Accessibility-related bugs
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/212805 accessibility/svg-text.html [ Failure ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of Accessibility-related bugs
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# CSS-related bugs
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/206589 fast/box-shadow/inset-box-shadow-fractional-radius.html [ ImageOnlyFailure ]

webkit.org/b/212300 fast/text/font-collection-2.html [ ImageOnlyFailure ]

webkit.org/b/213114 fast/flexbox/line-clamp-with-anchor-content-only.html [ ImageOnlyFailure ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of CSS-related bugs
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# GStreamer-related bugs
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/211995 fast/images/animated-image-mp4.html [ Failure ]

webkit.org/b/210385 fast/mediastream/stream-switch.html [ Crash Timeout ]

webkit.org/b/213011 fast/mediastream/media-stream-track-interrupted.html [ Failure ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of GStreamer-related bugs
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# PageOverlay-related bugs
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/152908 pageoverlay/overlay-installation.html [ Failure ]
webkit.org/b/152908 pageoverlay/overlay-large-document-scrolled.html [ Failure ]
webkit.org/b/152908 pageoverlay/overlay-large-document.html [ Failure ]
webkit.org/b/152908 pageoverlay/overlay-small-frame-paints.html [ Pass Failure ]
webkit.org/b/168501 pageoverlay/overlay-remove-reinsert-view.html [ Failure ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of PageOverlay-related bugs
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# Perf-related bugs
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/211837 perf/rel-list-remove.html [ Failure Pass ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of Perf-related bugs
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# SVG-related bugs
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/213113 svg/filters/feConvolveMatrix-clipped.svg [ ImageOnlyFailure ]
webkit.org/b/213113 svg/filters/feGaussianBlur-clipped.svg [ ImageOnlyFailure ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of SVG-related bugs
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# WebAnimations-related bugs
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/211948 webanimations/accelerated-animation-playback-rate.html [ ImageOnlyFailure Timeout Pass ]
webkit.org/b/212020 webanimations/accelerated-animation-single-keyframe.html [ Skip ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of WebAnimations-related bugs
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# WebGL-related bugs
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/211942 webgl/1.0.3/conformance/more/functions/copyTexImage2DBadArgs.html [ Crash ]

webkit.org/b/169917 fast/canvas/webgl/unprefixed-anisotropic-extension.html [ Failure ]
webkit.org/b/169917 webgl/1.0.3/conformance/extensions/webgl-compressed-texture-size-limit.html [ Failure ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of WebGL-related bugs
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# WebRTC-related bugs
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/212925 webrtc/multi-audio.html [ Failure ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of WebRTC-related bugs
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# WebSocket-related bugs
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/212818 http/tests/websocket/tests/hybi/send-object-tostring-check.html [ Failure Timeout Pass ]
webkit.org/b/68278 http/tests/history/back-with-fragment-change.php [ Pass Failure ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of WebSocket-related bugs
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# WPT-related bugs
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/177226 imported/w3c/web-platform-tests/WebCryptoAPI/wrapKey_unwrapKey/wrapKey_unwrapKey.https.worker.html [ Pass Failure ]

webkit.org/b/183608 imported/w3c/web-platform-tests/WebCryptoAPI/wrapKey_unwrapKey/test_wrapKey_unwrapKey.https.html [ Failure Pass ]

webkit.org/b/186638 imported/w3c/web-platform-tests/html/webappapis/timers/negative-settimeout.html [ Failure Pass ]
webkit.org/b/186638 imported/w3c/web-platform-tests/xhr/send-timeout-events.htm [ Failure Pass ]

webkit.org/b/187603 fast/mediastream/media-stream-track-source-failure.html [ Timeout Failure Pass ]

webkit.org/b/203675 imported/w3c/web-platform-tests/css/css-shapes/spec-examples/shape-outside-010.html [ Failure ]
webkit.org/b/203675 imported/w3c/web-platform-tests/css/css-shapes/spec-examples/shape-outside-011.html [ Failure ]
webkit.org/b/203675 imported/w3c/web-platform-tests/css/css-shapes/spec-examples/shape-outside-012.html [ Failure Pass ]
webkit.org/b/203675 imported/w3c/web-platform-tests/css/css-shapes/spec-examples/shape-outside-013.html [ Failure ]
webkit.org/b/203675 imported/w3c/web-platform-tests/css/css-shapes/spec-examples/shape-outside-014.html [ Failure ]
webkit.org/b/203675 imported/w3c/web-platform-tests/css/css-shapes/spec-examples/shape-outside-015.html [ Failure ]
webkit.org/b/203675 imported/w3c/web-platform-tests/css/css-shapes/spec-examples/shape-outside-016.html [ Failure ]
webkit.org/b/203675 imported/w3c/web-platform-tests/css/css-shapes/spec-examples/shape-outside-017.html [ Failure ]

# Failing since deferred async loading enabled until document is loaded enabled.
webkit.org/b/208104 imported/w3c/web-platform-tests/content-security-policy/script-src/scripthash-changed-1.html [ Failure Pass ]
webkit.org/b/208104 imported/w3c/web-platform-tests/content-security-policy/script-src/scripthash-changed-2.html [ Failure ]
webkit.org/b/208104 imported/w3c/web-platform-tests/content-security-policy/script-src/scriptnonce-changed-2.html [ Failure ]
webkit.org/b/208104 imported/w3c/web-platform-tests/html/semantics/scripting-1/the-script-element/execution-timing/085.html [ Failure Pass ]

webkit.org/b/210226 imported/w3c/web-platform-tests/IndexedDB/interleaved-cursors-large.html [ Failure ]

webkit.org/b/211692 imported/w3c/web-platform-tests/xhr/event-timeout-order.any.worker.html [ Failure Pass ]
webkit.org/b/212217 imported/w3c/web-platform-tests/fetch/api/redirect/redirect-location-escape.tentative.any.html [ Failure ]
webkit.org/b/212217 imported/w3c/web-platform-tests/fetch/api/redirect/redirect-location-escape.tentative.any.worker.html [ Failure ]
webkit.org/b/212806 imported/w3c/web-platform-tests/fetch/h1-parsing/resources-with-0x00-in-header.window.html [ Failure ]
webkit.org/b/212807 imported/w3c/web-platform-tests/fetch/api/basic/header-value-null-byte.any.html [ Failure ]
webkit.org/b/212807 imported/w3c/web-platform-tests/fetch/api/basic/header-value-null-byte.any.worker.html [ Failure ]
webkit.org/b/212807 imported/w3c/web-platform-tests/xhr/headers-normalize-response.htm [ Failure ]

webkit.org/b/212741 imported/w3c/web-platform-tests/content-security-policy/navigation/javascript-url-navigation-inherits-csp.html [ Failure ]

webkit.org/b/212812 imported/w3c/web-platform-tests/html/canvas/element/fill-and-stroke-styles/2d.pattern.animated.gif.html [ Failure Pass ]

webkit.org/b/212963 imported/w3c/web-platform-tests/css/css-animations/animation-delay-010.html [ ImageOnlyFailure Pass ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of WPT-related bugs
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# EME feature
#////////////////////////////////////////////////////////////////////////////////////////

# LEGACY_ENCRYPTED_MEDIA is deprecated
webkit.org/b/189345 http/tests/media/clearkey/collect-webkit-media-session.html [ Skip ]
fast/events/webkit-media-key-events-constructor.html [ Skip ]

media/encrypted-media [ Pass ]
media/encrypted-media/clearKey/clearKey-cenc-video-playback-mse-multikey.html [ Skip ]
webkit.org/b/205857 media/encrypted-media/mock-MediaKeySession-generateRequest.html [ Skip ]
webkit.org/b/205857 media/encrypted-media/mock-navigator-requestMediaKeySystemAccess.html [ Skip ]
webkit.org/b/205860 media/encrypted-media/mock-MediaKeySession-remove.html [ Skip ]
webkit.org/b/190578 media/encrypted-media/mock-MediaKeySystemAccess.html [ Skip ]

webkit.org/b/210390 media/encrypted-media/clearKey/clearKey-webm-video-playback-mse.html [ Pass Crash ]
webkit.org/b/190991 media/encrypted-media/encrypted-media-constants.html [ Failure ]
webkit.org/b/190991 media/encrypted-media/encrypted-media-is-type-supported.html [ Failure ]
webkit.org/b/190991 media/encrypted-media/encrypted-media-session-lifetime.html [ Timeout ]
# Encrypted WebM is not supported yet.
webkit.org/b/189196 media/encrypted-media/clearKey/clearKey-encrypted-webm-event-mse.html [ Skip ]

# Web platform tests
# Disable and selectively pass, since half the tests require a real DRM system.
webkit.org/b/190991 imported/w3c/web-platform-tests/encrypted-media/ [ Skip ]
webkit.org/b/211840 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-retrieve-persistent-license.https.html [ Crash Pass Failure ]
webkit.org/b/211840 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-destroy-persistent-license.https.html [ Failure ]
webkit.org/b/190991 imported/w3c/web-platform-tests/encrypted-media/clearkey-check-status-for-hdcp.https.html [ Failure ]
webkit.org/b/211375 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-clear-encrypted-segmented.https.html [ Skip ]
webkit.org/b/210113 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-reset-src-after-setmediakeys.https.html [ Failure Pass ]
webkit.org/b/210390 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-again-after-resetting-src.https.html [ Crash Pass ]
webkit.org/b/210264 imported/w3c/web-platform-tests/encrypted-media/clearkey-events-session-closed-event.https.html [ Failure Pass ]
webkit.org/b/210965 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multikey-sequential-readyState.https.html [ Failure ]
webkit.org/b/210966 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-again-after-playback.https.html [ Crash Pass ]
webkit.org/b/178707 imported/w3c/web-platform-tests/encrypted-media/encrypted-media-default-feature-policy.https.sub.html [ Skip ]

imported/w3c/web-platform-tests/encrypted-media/clearkey-check-encryption-scheme.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-check-initdata-type.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-events.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-generate-request-disallowed-input.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-invalid-license.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-keystatuses.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-keystatuses-multiple-sessions.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-clear-encrypted.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-encrypted-clear.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-encrypted-clear-sources.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-events.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multikey.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multikey-sequential.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multisession.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-after-src.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-after-update.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-immediately.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-onencrypted.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-two-videos.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-waitingforkey.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-requestmediakeysystemaccess.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-at-same-time.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-multiple-times-with-different-mediakeys.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-multiple-times-with-the-same-mediakeys.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-to-multiple-video-elements.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-syntax-mediakeysession.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-syntax-mediakeys.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-syntax-mediakeysystemaccess.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-unique-origin.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-update-disallowed-input.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-waiting-for-a-key.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-not-callable-after-createsession.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-update-non-ascii-input.https.html [ Pass ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of EME feature
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# TESTS PASSING
#////////////////////////////////////////////////////////////////////////////////////////

fast/text/emoji-gender-2-3.html [ Pass ]
fast/text/emoji-gender-2-4.html [ Pass ]
fast/text/emoji-gender-2-5.html [ Pass ]
fast/text/emoji-gender-2-6.html [ Pass ]
fast/text/emoji-gender-2-7.html [ Pass ]
fast/text/emoji-gender-2-8.html [ Pass ]
fast/text/emoji-gender-2-9.html [ Pass ]
fast/text/emoji-gender-3.html [ Pass ]
fast/text/emoji-gender-4.html [ Pass ]
fast/text/emoji-gender-5.html [ Pass ]
fast/text/emoji-gender-6.html [ Pass ]
fast/text/emoji-gender-8.html [ Pass ]
fast/text/emoji-gender-9.html [ Pass ]
fast/text/emoji-gender-fe0f-3.html [ Pass ]
fast/text/emoji-gender-fe0f-4.html [ Pass ]
fast/text/emoji-gender-fe0f-5.html [ Pass ]
fast/text/emoji-gender-fe0f-6.html [ Pass ]
fast/text/emoji-gender-fe0f-7.html [ Pass ]
fast/text/emoji-gender-fe0f-8.html [ Pass ]
fast/text/emoji-gender-fe0f-9.html [ Pass ]
fast/text/emoji-gender.html [ Pass ]

# Some Apple ports don't support RTL scrollbars.
fast/scrolling/rtl-scrollbars-elementFromPoint-static.html [ Pass ]
fast/scrolling/rtl-scrollbars-iframe-offset.html [ Pass ]
fast/scrolling/rtl-scrollbars-listbox-select-left.html [ Pass ]
fast/scrolling/rtl-scrollbars-listbox-select-right.html [ Pass ]
fast/scrolling/rtl-scrollbars-listbox-simple.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow-dir-rtl.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow-elementFromPoint.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow-padding.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow-position-absolute.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow-simple.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow.html [ Pass ]
fast/scrolling/rtl-scrollbars-positioned-intersect-scrollbars.html [ Pass ]
fast/scrolling/rtl-scrollbars-positioning.html [ Pass ]
fast/scrolling/rtl-scrollbars-simple.html [ Pass ]
fast/scrolling/rtl-scrollbars.html [ Pass ]

webkit.org/b/172056 fast/text/multiglyph-characters.html [ Pass ]

imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property.html [ DumpJSConsoleLogInStdErr ]

imported/w3c/web-platform-tests/css/css-text/hyphens/hyphens-auto-001.html [ Pass ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of PASSING tests.
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# UNSUPPORTED tests. Things we must skip.
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# End of UNSUPPORTED tests.
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# NEEDS TRIAGING. If unsure, put it in this section.
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# End of NEEDS TRIAGING. Don't put expectations below this section.
#////////////////////////////////////////////////////////////////////////////////////////

