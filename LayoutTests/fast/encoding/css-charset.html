<html>
<head>
    <meta content="text/html; charset=windows-1251" http-equiv="Content-Type"/>
    <link rel="stylesheet" type="text/css" href="css-charset.css" charset="windows-1251">
    <!-- The document charset and link charset have lower priority than 
         @charset, so they shouldn't affect anything. -->
</head>
<body onload="test()">
<p>Test for <a href="https://bugs.webkit.org/show_bug.cgi?id=10155">bug 10155</a>:
CSS2: @charset is not supported</p>
<p>Test that <code>@charset</code> works and that indexed rule access via 
an IE-specific <code>rules</code> property does not take it into account.</p>

<p id="result"></p>

<script>
if (window.testRunner)
    testRunner.dumpAsText();

function test() {
  try {
    text = document.styleSheets[0].rules[0].style.cssText;
    if (text.match('.*SUÑÑÅSS.*'))
      result.innerHTML = "SUCCESS";
    else
      result.innerHTML = "FAILURE: " + text;
  } catch (ex) {
    result.innerHTML = "FAILURE: " + ex;
  }
}
</script>

</body>
</html>
