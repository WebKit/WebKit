<!DOCTYPE html>
<html>
<head>
<title>This tests that semi-transparent layers with compositing parent on subpixel position get clipped properly. Non-retina test only.</title>
<style>
  div {
    position:fixed;
    width: 10px;
    height: 10px;
  }

  img {
    opacity: 0.9;
    position: absolute;
    left: 1px;
    top: 1px;
    width: 5px;
    height: 5px;
  }
</style>
</head>
<body>
<p id="container"></p>
<script>
  var container = document.getElementById("container");
  var adjustment = 0;
  for (i = 0; i < 20; ++i) {
    for (j = 0; j < 20; ++j) {
      var d = document.createElement("div");
      d.style.top = (20 * i) + adjustment + "px";
      d.style.left = (20 * j) + adjustment + "px";
      
      var e = document.createElement("img");
      e.src = "broken.jpg";
      d.appendChild(e);

      container.appendChild(d);
      
      adjustment += 0.1;
    }
  }
</script>
</body>
</html>
