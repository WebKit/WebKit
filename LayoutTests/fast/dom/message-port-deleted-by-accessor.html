<html>
<head>
<script>
if (window.testRunner)
    testRunner.dumpAsText();

window.onload = function()
{
    channel = new MessageChannel;
    event = document.createEvent("MessageEvent");

    event.initMessageEvent(0, 0, 0, 0, 0, 0, null, [channel.port1, channel.port2]);

    Array.prototype.__defineSetter__(0, function() {
        event.initMessageEvent(0, 0, 0, 0, 0, 0, null, [ ]);
    });

    event.ports;
}
</script>
</head>
<body>
This test passes if it doesn't crash.
</body>
</html>
