<!DOCTYPE html>
<script text="text/javascript">
function runtest() 
{
var nick=document.getElementById('nick');
var row=document.getElementById('the_table').insertRow(-1);
var result=row.insertCell(0);
if (nick.naturalWidth == 320 && nick.naturalHeight == 240)
    result.innerHTML = "SUCCESS.";
else
    result.innerHTML = "FAILURE!";
if (window.testRunner)
    testRunner.dumpAsText();
}
</script>
<body onload="runtest()">
<p>This test verifies that at the time a body onload function is
called that the subresources of this page (in particular the image)
are already loaded.  The page verifies that the image has the expected
dimensions at the time of the onload event, and prints its result
based on that.  This is a regression test for a bug introduced by the
patch for bug 3652.</p>
<img id=nick src="resources/nick.jpg">
<table id="the_table" border="1">
<tr><td></td></tr>
</table>
</body>
