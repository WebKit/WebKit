<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<style></style>
<script>
<![CDATA[

window.onload = function () {
    document.execCommand("SelectAll", false);

    var range = null;

    document.addEventListener("DOMNodeRemovedFromDocument", function () {
        range = getSelection().getRangeAt(0);
    },true);

    getSelection().getRangeAt(0).extractContents();
    range.getBoundingClientRect();

    if (window.testRunner)
        testRunner.dumpAsText();

    alert("This test calls getBoundingClientRect on a range obtained inside a mutation event listener.\n"
    + "The test passes if WebKit doesn't crash.\n\n"
    + "PASS.");
}

]]>
</script>
<input/>
</html>

