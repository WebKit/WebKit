<!DOCTYPE html>
<html>
<body onload="test()">
<script src="../resources/common.js"></script>
<form method="post" action="mailto:">
Field 1: <input type="text" size="10" maxlength="40" name="to" value="one@example.org">
Field 2: <textarea name="body">Line 1
Line 2
@&amp;=,;?+</textarea>
<input type="submit" id="submit" formenctype="text/plain">
</form>
<script>
function test() {
    if (window.testRunner) {
        testRunner.dumpAsText();
        testRunner.waitForPolicyDelegate();
    }
    clickElement(document.getElementById("submit"));
    // The resultant URL should be
    //     mailto:?body=to%3Done%40example.org%0D%0Abody...
    // not mailto:?body=to%3Done%2540example.org%26body...
}
</script>
</body>
</html>
