<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<script src="../../../resources/js-test-pre.js"></script>
<script src="../resources/common.js"></script>
<script src="../resources/label-test-util.js"></script>
</head>
<body>
<p id="description"></p>
<div id="console"></div>
<script>
description('Test that the labels list of a form control is dynamically updated when removing the htmlFor attribute that pointed to that form control.');

var tester = setupLabelsTest(withSiblingLabel);
for (var name in tester.dataSet) {
    var data = tester.getLabelableElementData(name);
    if (data == null)
        continue;

    debug('Check ' + data.name);
    var element = data.element;
    shouldBe('element.labels.length', '1');

    var label = document.getElementById(data.labelId);
    label.htmlFor = "";
    shouldBe('element.labels.length', '0');
}
</script>
<script src="../../../resources/js-test-post.js"></script>
</body>
</html>
