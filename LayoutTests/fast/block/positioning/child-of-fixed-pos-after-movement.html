<!DOCTYPE HTML>
<html>
<head>
    <style>
    #abs {
        position: absolute;
    }
    #fixed {
        position: fixed;
        background: blue;
        width: 80%;
    }
    #inner {
        background: lime;
    }
    </style>
    <script src="../../../resources/check-layout.js"></script>
</head>

<body id="body" style="width:800px;">
    <p>webkit.org/b/115379: Ensure children of fixed pos objects get a layout when the fixed pos 
       object detects that it has to move with an absolute positioned ancestor.</p>
    <div id="abs">
        <div id="fixed">
            fixed div
            <div id="inner" data-expected-width=800>inner div</div>
        </div>
    </div>
    <script>
    document.getElementById('inner').offsetLeft;
    document.getElementById('fixed').style.width='100%';
    checkLayout('#fixed');
    </script>
</body>
</html>
