<!DOCTYPE html>
<html>
<body style='-webkit-columns: 1'>
A
<style>
.class1 { -webkit-column-span: all; }
</style><script>
if (window.testRunner)
    testRunner.dumpAsText();
function crash() {
test1 = document.createElementNS("http://www.w3.org/1999/xhtml", "article");
document.body.appendChild(test1);
test1.appendChild(document.createTextNode('A'));
test1.setAttribute("class", "class1");
test2 = document.createElementNS("http://www.w3.org/1999/xhtml", "article");
document.body.appendChild(test2);
test2.appendChild(document.createTextNode('A'));
test2.setAttribute("class", "class1");
document.body.offsetTop;
document.designMode = "on";
document.execCommand("InsertHTML", false, "No crash!")
document.execCommand("SelectAll", false)
document.execCommand("InsertHTML", false, "There should be an empty line between these two paragraphs.<span><div></div></span><div>This paragraph and the empty line should have be in their own divs with a red border.")
document.execCommand("SelectAll", false)
document.execCommand("InsertHTML", false, "There should be an empty line between these two paragraphs.<span><div></div></span><div>This paragraph and the empty line should have be in their own divs with a red border.")
document.body.offsetTop;
document.body.innerHTML = "PASS. WebKit didn't crash.";
}
document.addEventListener("DOMContentLoaded", crash, false);
</script>
</body>
</html>
