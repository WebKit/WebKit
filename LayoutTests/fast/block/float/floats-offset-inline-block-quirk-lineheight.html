<html>
<head>
    <style>
        body { width: 400px;}
        .container { color: red; width: 100px; height: 150px; position: relative;}
        .container:first-line { font-size: 30px;}
        div { background: white; }
        span { display: inline-block; background: red; width: 20px; height: 20px; }
        .narrowfloat { float: left; width: 10px; height: 25px;}
        .widefloat { float: left; clear: left; width: 40px; height: 5px;}
        .reference { position: absolute; width: 20px; height: 20px; background: black; } 
        .first { left: 10px; } 
        .second { left: 40px; top: 20px; } 
    </style>
</head>
<body>
<!-- In quirks mode, inline blocks have their descent removed across line breaks.
     Ensure they find the correct offset for their line when avoiding floats and line-height is set. -->
There should be no red visible below.
<div class="container">
    <div class="narrowfloat"></div>
    <div class="widefloat"></div>
    <!-- This should cover the inline block. -->
    <div class="reference first"></div>
    <div class="reference second"></div>
    <span></span><br><span></span>
</div>
</body></html>
