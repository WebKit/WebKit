<html>

<script>
if (window.testRunner)
  testRunner.dumpAsText();

function run_test() {
  var oldEvent = window.event;
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function() {}
  xhr.open("GET", "test.html");
  xhr.send();
  // window.event should exist, and same as oldEvent.
  document.getElementById('console').innerHTML = oldEvent == window.event ? 'PASS' : 'FAIL';
}
</script>
<body onload="run_test()">
This tests window.event was kept the same when nested event
handling was called. You should see 'PASS' if the test passes.
<br>
<div id='console'></div>
</body>
</html>
