<!DOCTYPE html>
<html>
<head>
<title>This tests that when inline content gets changed (width changes), the out of flow positioned element on the same line does not move.</title>
<style>
  h2 {
    display: inline; 
    line-height: 300px;
  }

  img {
    position: absolute;
    top: 100px;
    left: 100px;
    width: 100px;
    height: 100px;
  }
</style>
</head>
<body>
  <h2>
    <a><img src="foo.png">foobar</a>
  </h2>
  <button id=changethis>button</button>
  <script>
    if (window.testRunner)
      testRunner.waitUntilDone();
    setTimeout(function() { 
      document.getElementById("changethis").style.width = "100px";
      if (window.testRunner)
        testRunner.notifyDone();
     }, 10);
  </script>
</body>
</html>
