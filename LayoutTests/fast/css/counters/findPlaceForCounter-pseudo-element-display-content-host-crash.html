<style>
html, body {
  counter-reset: counter;
}

#outer {
  display: contents;
}

#outer::before {
  content: "text";
}
</style><span id=outer><span id=inner>Tests CSS counter of a pseudo element that has display: contents host. The test passes if WebKit doesn't crash or hit an assertion.</span></span><script>
    if (window.testRunner)
        testRunner.dumpAsText();
    document.body.offsetHeight;
    inner.style.counterIncrement = "counter";
</script>
