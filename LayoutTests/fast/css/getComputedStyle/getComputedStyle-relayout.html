<html>
<head>
    <script>
    function runTest() {
        if (window.testRunner)
            testRunner.dumpAsText();
            
        var d = document.getElementById('theDiv');
        d.style.display = 'block';
        var style = document.defaultView.getComputedStyle(d, '');
        
        if (style && style.display == 'block')
            document.getElementById('result').innerHTML = 'SUCCESS';            
    }
    </script>
</head>
<body onload="runTest()">
<div id="theDiv" style="display:none;"></div>
<div>This tests that getComputedStyle does a relayout before returning the computed style.</div>
<div id="result">FAILURE</div>
</body>
</html>
