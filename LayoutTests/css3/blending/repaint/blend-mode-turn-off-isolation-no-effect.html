<!DOCTYPE HTML>
<html>
    <head>
        <style>
            div {
                width: 100px;
                height: 100px;
            }

            .stacking-context {
                position: relative;
                z-index: 1;
            }
            .isolating {
                -webkit-isolation: isolate;
                isolation: isolate;
            }
            .blending {
                -webkit-mix-blend-mode: difference;
                mix-blend-mode: difference;
            }

        </style>
        <script src="../../../fast/repaint/resources/text-based-repaint.js" type="text/javascript"></script>
    </head>
    <body>
        <p>This test checks that removing isolation from an element being stacking context for other reasons will not trigger any repaint.</p>
        <div id="target" class="stacking-context isolating" style="background-color: #00ff00;">
            <div class="blending" style="background-color: #ff00ff; margin-left: 50px;"></div>
        </div>
        <script type="text/javascript">
        function repaintTest() {
            var target = document.getElementById("target");
            target.className = "stacking-context";
        }
        window.onload = function() {
            if (window.testRunner)
                window.testRunner.dumpAsText(true);
            runRepaintTest();
        }
        </script>
    </body>
</html>
