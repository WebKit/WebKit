<!DOCTYPE html>
<html>
<body>
    <script src=/resources/testharness.js></script>
    <script src=/resources/testharnessreport.js></script>
    <script src="resources/webxr_util.js"></script>
    <script src="resources/webxr_test_constants_single_view.js"></script>
    <script>
        async function testMakeXRCompatible(t, gl) {
          await navigator.xr.test.simulateDeviceConnection(TRACKED_IMMERSIVE_DEVICE);
          await gl.makeXRCompatible();
          top.postMessage({'makeXRCompatible': gl.getContextAttributes().xrCompatible}, '*');
        }

        xr_promise_test(
          "Tests makeXRCompatible with immersive device connected",
          testMakeXRCompatible,
          null,
          'webgl'
        );
    </script>
</body>
</html>
