{"version":3,"sources":["../../../src/common/util/navigator_gpu.ts"],"names":["assert","defaultGPUProvider","navigator","gpu","undefined","gpuProvider","setGPUProvider","provider","impl","getGPU"],"mappings":";AAAA;AACA,G,CADA;AAEA,SAASA,MAAT,QAAuB,WAAvB;AAEA;AACA;AACA;AACA;AACA,SAASC,kBAAT,GAAmC;AACjCD,EAAAA,MAAM;AACJ,SAAOE,SAAP,KAAqB,WAArB,IAAoCA,SAAS,CAACC,GAAV,KAAkBC,SADlD;AAEJ,kCAFI,CAAN;;AAIA,SAAOF,SAAS,CAACC,GAAjB;AACD;;AAED;AACA;AACA;AACA;;;AAGA,IAAIE,WAAwB,GAAGJ,kBAA/B;;AAEA;AACA;AACA;AACA,OAAO,SAASK,cAAT,CAAwBC,QAAxB,EAA+C;AACpDP,EAAAA,MAAM,CAACQ,IAAI,KAAKJ,SAAV,EAAqB,+CAArB,CAAN;AACAC,EAAAA,WAAW,GAAGE,QAAd;AACD;;AAED,IAAIC,IAAqB,GAAGJ,SAA5B;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASK,MAAT,GAAuB;AAC5B,MAAID,IAAJ,EAAU;AACR,WAAOA,IAAP;AACD;;AAEDA,EAAAA,IAAI,GAAGH,WAAW,EAAlB;;AAEA,SAAOG,IAAP;AACD","sourcesContent":["/// <reference types=\"@webgpu/types\" />\n\nimport { assert } from './util.js';\n\n/**\n * Finds and returns the `navigator.gpu` object (or equivalent, for non-browser implementations).\n * Throws an exception if not found.\n */\nfunction defaultGPUProvider(): GPU {\n  assert(\n    typeof navigator !== 'undefined' && navigator.gpu !== undefined,\n    'No WebGPU implementation found'\n  );\n  return navigator.gpu;\n}\n\n/**\n * GPUProvider is a function that creates and returns a new GPU instance.\n * May throw an exception if a GPU cannot be created.\n */\nexport type GPUProvider = () => GPU;\n\nlet gpuProvider: GPUProvider = defaultGPUProvider;\n\n/**\n * Sets the function to create and return a new GPU instance.\n */\nexport function setGPUProvider(provider: GPUProvider) {\n  assert(impl === undefined, 'setGPUProvider() should not be after getGPU()');\n  gpuProvider = provider;\n}\n\nlet impl: GPU | undefined = undefined;\n\n/**\n * Finds and returns the `navigator.gpu` object (or equivalent, for non-browser implementations).\n * Throws an exception if not found.\n */\nexport function getGPU(): GPU {\n  if (impl) {\n    return impl;\n  }\n\n  impl = gpuProvider();\n\n  return impl;\n}\n"],"file":"navigator_gpu.js"}