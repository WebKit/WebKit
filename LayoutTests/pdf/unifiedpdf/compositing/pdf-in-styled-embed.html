<!DOCTYPE html> <!-- webkit-test-runner [ UnifiedPDFEnabled=true PDFPluginHUDEnabled=false ] -->
<html>
<head>
    <style>
        embed {
            margin: 200px;
            width: 300px;
            height: 300px;
            border: 20px solid silver;
            padding: 20px;
            box-shadow: 0 0 20px black;
        }
    </style>
    <script src="../../../resources/ui-helper.js"></script>
    
</head>
<body>
<embed id="pdf" src="../../../fast/images/resources/green_rectangle.pdf">
<pre id="layers"></pre>
<script>

    if (window.testRunner) {
        testRunner.waitUntilDone();
        testRunner.dumpAsText();

        let pdf = document.getElementById("pdf");

        window.internals.registerPDFTest(async () => {
            await UIHelper.renderingUpdate();
            
            const layers = document.getElementById('layers');
            layers.textContent = internals.layerTreeAsText(document);
            
            testRunner.notifyDone();
        }, pdf);
    }
</script>
</body>
</html>
