<!DOCTYPE html> <!-- webkit-test-runner [ UnifiedPDFEnabled=true ] -->
<html>
<head>
    <style>
        embed {
            width: 300px;
            height: 300px;
        }
    </style>
    <script src="../../../resources/ui-helper.js"></script>
</head>
<body>
<embed id="pdf" src="../../../fast/images/resources/green_rectangle.pdf">
<pre id="layers"></pre>
</body>
<script>
    if (window.testRunner) {
        testRunner.waitUntilDone();
        testRunner.dumpAsText();

        let pdf = document.getElementById("pdf");
        window.internals.registerPDFTest(async () => {
            await UIHelper.renderingUpdate();
        
            const layers = document.getElementById('layers');
            layers.textContent = internals.layerTreeAsText(document);
        
            testRunner.notifyDone();
        }, pdf);

    }
</script>
</html>
