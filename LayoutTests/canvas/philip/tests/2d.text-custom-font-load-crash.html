<!DOCTYPE html>
<div>Test passes if it does not crash.</div>
<script src="../tests.js"></script>
<style>
@font-face {
font-family: CanvasTest; 
  src: url("does_not_exist.ttf");
}
</style>
<applet>
<canvas id="c">
</applet>
<ul id="d"></ul>
<script>
if (window.layoutTestController)
    layoutTestController.dumpAsText();

_addTest(function(canvas, ctx) {

ctx.fillRect(0, 0, 100, 50);
ctx.font = '1px CanvasTest';
ctx.fillText('AA', 0, 50);
deferTest();

setTimeout(wrapFunction(function () {
    ctx.fillText('AA', 0, 50);

    if (window.layoutTestController)
        layoutTestController.notifyDone();
}), 500);

});
</script>
