<body contenteditable=true>
<p contenteditable=false>Test for <a href="https://bugs.webkit.org/show_bug.cgi?id=39946">https://bugs.webkit.org/show_bug.cgi?id=39946</a>
another case of infinite recursion in Position::getInlineBoxAndOffset().  This test passes if it does not crash.</p>
<div id="start">start dragging here and drag right<div>
<div style="-webkit-user-modify: read-only; display:inline-block;">
  <div style="display:none;">some text</div>
  <div style="width: 550px;">
    spacer text
  </div>
</div>
<script>
    if (window.testRunner)
        testRunner.dumpAsText();

    var selection = getSelection();
    var start = document.getElementById("start");
    selection.setBaseAndExtent(start, 1, start, 1);
    selection.modify("move", "forward", "line");
    selection.modify("move", "backward", "character");
</script>
</body>
