<span>This test passes if the caret is at the start of the second line.</span>

<div id="edit" contentEditable="true" style="width: 350px; height: 100px; border: 1px solid blue;">a&nbsp;</div>
<script>
var edit = document.getElementById("edit");
edit.appendChild(document.createTextNode("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"));
window.getSelection().setPosition(edit.firstChild, 2);
</script>
