<!DOCTYPE html><!-- webkit-test-runner [ LiveRangeSelectionEnabled=true ] -->
<html>
<body>
<div id="div" contenteditable="true"><div>This should not be underlined.</div><span style="text-decoration: underline; color: blue;"><span style="color:red;">This should be underlined.</span></span></div>
<script src="../../resources/dump-as-markup.js"></script>
<script>
Markup.description("This test for a bug moving a paragraph of underlined text.  The text should look the same before and after the deletion.");

var div = document.getElementById("div");
var sel = window.getSelection();

Markup.dump('div', 'Before');

sel.setPosition(div, 0);
sel.modify("move", "forward", "paragraphBoundary");
sel.modify("move", "forward", "character");
document.execCommand("Delete");

Markup.dump('div', 'After');
</script>
</body>
</html>
