<div id="description">This tests for a crash when removing format from two paragraphs that are inside blocks with different block properties than the blocks surrounding them. You should see two left aligned paragraphs below. <b>It demonstrates a bug: <a href="rdar://problem/5794382">RemoveFormat doesn't always reset text alignment</a></b></div>
<div contentEditable="true" id="edit">
<div style="text-align: right;">
<div style="text-align: left;">foo<br>bar</div>
</div>
</div>

<script>
description = document.getElementById("description");
edit = document.getElementById("edit");
edit.focus();
document.execCommand("SelectAll");
document.execCommand("RemoveFormat");
if (window.testRunner) {
    window.testRunner.dumpAsText();
    document.body.innerText = description.innerText + "\n\n" + edit.innerHTML;
}
</script>
