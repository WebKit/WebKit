<html>
<head>
<meta charset="utf-8">
</head>
<body>
<div id="test" contenteditable></div>
<script type="text/javascript">

    document.getElementById("test").focus();

    if (window.testRunner) {
        
        try {
        
            textInputController.insertText("क");
            textInputController.setMarkedText("्", 1, 0);
            textInputController.setMarkedText("", 0, 0);
            textInputController.insertText("्ष");

        } catch (ex) {
            document.write("Exception: " + ex.description);
        }
    } else {
        document.write("To reproduce manually:<br>");
        document.write("1. Enable Devanagari keyboard layout.<br>");
        document.write("2. Type a key sequence K D Shift-comma.<br>");
        document.write("The result should be a single character.");
    }
</script>
</body>
</html>
