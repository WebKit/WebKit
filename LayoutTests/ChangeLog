2018-11-29  Simon Fraser  <simon.fraser@apple.com>

        Overflow scrolling layers need to be self-painting
        https://bugs.webkit.org/show_bug.cgi?id=192201

        Reviewed by Dean Jackson.

        * compositing/scrolling/overflow-scrolling-layers-are-self-painting-expected.txt: Added.
        * compositing/scrolling/overflow-scrolling-layers-are-self-painting.html: Added.

2018-11-29  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] DeviceIdHashSaltStorage should use iframe and top level documents
        https://bugs.webkit.org/show_bug.cgi?id=192182

        Reviewed by Youenn Fablet.

        * http/tests/media/media-stream/enumerate-devices-source-id-expected.txt:
        * http/tests/media/media-stream/enumerate-devices-source-id.html:
        * http/tests/media/media-stream/resources/enumerate-devices-source-id-frame.html:

2018-11-29  Christopher Reid  <chris.reid@sony.com>

        [Win] listDirectory in FileSystemWin.cpp should not skip all directories
        https://bugs.webkit.org/show_bug.cgi?id=192042

        Reviewed by Fujii Hironori.

        Enable storage tests on WinCairo and adding initial test expectations.

        * platform/wincairo/TestExpectations:

2018-11-29  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r238680.

        Caused existing webrtc layout tests to fail an assertion.

        Reverted changeset:

        "A sender created through addTransceiver and populated using
        addTrack should have its source set"
        https://bugs.webkit.org/show_bug.cgi?id=192136
        https://trac.webkit.org/changeset/238680

2018-11-29  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r238090): [ MacOS WK1 ] Layout Test imported/blink/compositing/squashing/squashing-into-ancestor-painted-layer.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=191639

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as flaky.

2018-11-29  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC][Quirk] Body and html height stretching.
        https://bugs.webkit.org/show_bug.cgi?id=192154

        Reviewed by Antti Koivisto.

        * fast/block/block-only/body-height-with-auto-html-height-quirk-expected.txt: Added.
        * fast/block/block-only/body-height-with-auto-html-height-quirk.html: Added.
        * fast/block/block-only/body-height-with-auto-html-height-quirk2-expected.txt: Added.
        * fast/block/block-only/body-height-with-auto-html-height-quirk2.html: Added.
        * fast/block/block-only/body-height-with-non-auto-html-height-quirk-expected.txt: Added.
        * fast/block/block-only/body-height-with-non-auto-html-height-quirk.html: Added.
        * fast/block/block-only/body-height-with-non-auto-html-height-quirk2-expected.txt: Added.
        * fast/block/block-only/body-height-with-non-auto-html-height-quirk2.html: Added.

2018-11-29  Youenn Fablet  <youenn@apple.com>

        CSS subresource loads should not be observable from resource timing if the stylesheet is opaque
        https://bugs.webkit.org/show_bug.cgi?id=192132

        Reviewed by Ryosuke Niwa.

        * http/tests/security/clean-origin-css-exposed-resource-timing-expected.txt: Added.
        * http/tests/security/clean-origin-css-exposed-resource-timinge-timing.html: Added.
        * http/tests/security/cross-origin-css-resource-timing-expected.txt: Added.
        * http/tests/security/cross-origin-css-resource-timing.html: Added.
        * http/tests/security/resources/loading-subresources.css: Added.
        * http/tests/security/resources/imported-loading-subresources.css: Added.

2018-11-29  Ryosuke Niwa  <rniwa@webkit.org>

        Executing "insertunorderedlist" while selecting a contenteditable element inside a shadow dom hangs the browser
        https://bugs.webkit.org/show_bug.cgi?id=184049
        <rdar://problem/38931033>

        Reviewed by Antti Koivisto.

        Added a regression test for executing InsertUnorderedList inside a shadow tree.

        * editing/execCommand/insert-ordered-list-in-shadow-tree-expected.txt: Added.
        * editing/execCommand/insert-ordered-list-in-shadow-tree.html: Added.

2018-11-29  Justin Fan  <justin_fan@apple.com>

        [WebGPU] WebGPURenderPassEncoder::setPipeline, draw, and endPass prototypes
        https://bugs.webkit.org/show_bug.cgi?id=192134

        Reviewed by Dean Jackson.

        Updating the basic rendering test with more commands, and a prototype WPT-based test for WebGPURenderCommandEncoder's
        new functionality.

        * webgpu/js/basic-webgpu-functions.js:
        (render):
        * webgpu/render-command-encoding-expected.txt: Added.
        * webgpu/render-command-encoding.html: Added.
        * webgpu/render-passes.html:

2018-11-29  Justin Michaud  <justin_michaud@apple.com>

        CSS Painting API should pass 'this' correctly to paint callback, and repaint when properties change.
        https://bugs.webkit.org/show_bug.cgi?id=191443

        Reviewed by Dean Jackson.

        * fast/css-custom-paint/animate-expected.html: Added.
        * fast/css-custom-paint/animate-repaint-expected.txt: Added.
        * fast/css-custom-paint/animate-repaint.html: Added.
        * fast/css-custom-paint/animate.html: Added.
        * fast/css-custom-paint/constructor-expected.html: Added.
        * fast/css-custom-paint/constructor.html: Added.
        * fast/css-custom-paint/leaks-expected.txt: Added.
        * fast/css-custom-paint/leaks.html: Added.
        * fast/css-custom-paint/properties.html:
        * fast/css-custom-paint/resources/leaks-frame.html: Added.
        * platform/mac/fast/css-custom-paint/raf-leak-expected.txt: Added.

2018-11-29  Youenn Fablet  <youenn@apple.com>

        A sender created through addTransceiver and populated using addTrack should have its source set
        https://bugs.webkit.org/show_bug.cgi?id=192136

        Reviewed by Eric Carlson.

        * webrtc/video-replace-track-expected.txt:
        * webrtc/video-replace-track.html:

2018-11-29  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening, skip three datalist tests that are marked as flaky crashes.

        * TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:

2018-11-29  Sihui Liu  <sihui_liu@apple.com>

        IndexedDB: breaks if binary data (Uint8Array) and autoIncrement key in store
        https://bugs.webkit.org/show_bug.cgi?id=185869
        <rdar://problem/40453623>

        Reviewed by Geoffrey Garen.

        * storage/indexeddb/objectstore-autoincrement-expected.txt:
        * storage/indexeddb/objectstore-autoincrement-private-expected.txt:
        * storage/indexeddb/resources/objectstore-autoincrement.js:
        (getLincolnAfterInjectedKeySuccess):
        (putBobSuccess):
        (getBobSuccess):
        (addLincolnWithExplicitKeySuccess):
        (putAbrahamSuccess):

2018-11-29  Sihui Liu  <sihui_liu@apple.com>

        Unexpected constructor / instanceof  behavior when retrieving indexedDB data in an iframe
        https://bugs.webkit.org/show_bug.cgi?id=185906
        <rdar://problem/40583100>

        Reviewed by Geoffrey Garen.

        * storage/indexeddb/instanceof-iframe-expected.txt: Added.
        * storage/indexeddb/instanceof-iframe.html: Added.
        * storage/indexeddb/resources/instanceof-iframe.js: Added.
        (test.else.shouldBe):
        (test.else.shouldBeTrue):
        (test.else.shouldBeFalse):
        (test.else.evalAndLog):
        (test):
        (callback):

2018-11-28  Dean Jackson  <dino@apple.com>

        [ES Modules] Allow .mjs content when loaded from file://
        https://bugs.webkit.org/show_bug.cgi?id=192100
        <rdar://problem/46320065>

        Reviewed by Sam Weinig.

        Test for both import() function and the import statement loading
        from .mjs files.

        * js/dom/modules/import-mjs-module-expected.txt: Added.
        * js/dom/modules/import-mjs-module.html: Added.
        * js/dom/modules/resources/module-simple-A.mjs: Added.
        * js/dom/modules/resources/module-simple-B.mjs: Added.
        * platform/win/TestExpectations: Skip this on Windows. Just wait for Windows
          to recognise the extension.

2018-11-29  Guillaume Emont  <guijemont@igalia.com>

        Gardening: skip test that newly times out on Armv7

        Unreviewed Test Gardening.

        * js/slow-stress/script-tests/marsaglia.js: skip on arm/linux

2018-11-29  Miguel Gomez  <magomez@igalia.com>

        Unreviewed GTK+ gardening after r238665.

        * platform/gtk/TestExpectations:

2018-11-28  Said Abou-Hallawa  <sabouhallawa@apple.com>

        Updating href on linearGradient and radialGradient doesn't update its rendering
        https://bugs.webkit.org/show_bug.cgi?id=191934

        Reviewed by Ryosuke Niwa.

        * fast/shadow-dom/svg-linear-gradient-dynamic-update-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-linear-gradient-dynamic-update-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-radial-gradient-dynamic-update-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-radial-gradient-dynamic-update-href-in-shadow-tree.html: Added.
        * svg/dynamic-updates/SVGLinearGradientElement-svgdom-href-prop-expected.html: Added.
        * svg/dynamic-updates/SVGLinearGradientElement-svgdom-href-prop.html: Added.
        * svg/dynamic-updates/SVGRadialGradientElement-svgdom-href-prop-expected.html: Added.
        * svg/dynamic-updates/SVGRadialGradientElement-svgdom-href-prop.html: Added.

2018-11-28  Truitt Savell  <tsavell@apple.com>

        [ Mojave WK1 ] Layout Test fast/images/animated-image-different-dest-size.html fast/images/animated-image-loop-count.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190383

        Unreviewed Test Gardening.

        * platform/mac-wk1/TestExpectations:

2018-11-28  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Begin implementation of WebGPURenderPassEncoder and barebones WebGPURenderPassDescriptor
        https://bugs.webkit.org/show_bug.cgi?id=191990

        Reviewed by Dean Jackson.

        Add tests to ensure proper WebGPURenderPassEncoder creation. To be updated as WebGPURenderPassDescriptor is updated.

        * webgpu/js/basic-webgpu-functions.js:
        (render):
        * webgpu/render-passes-expected.txt: Added.
        * webgpu/render-passes.html: Added.

2018-11-28  Rob Buis  <rbuis@igalia.com>

        [XHR] Document.lastModified doesn't work for non-rendered documents
        https://bugs.webkit.org/show_bug.cgi?id=179375

        Reviewed by Alexey Proskuryakov.

        Unskip responsexml-document-properties.htm since the dynamic message is gone.

        * TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-28  Frederic Wang  <fwang@igalia.com>

        [iOS Simulator Release WK2] media/no-fullscreen-when-hidden.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=192088

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations: Mark media/no-fullscreen-when-hidden.html as flaky.

2018-11-28  Yongjun Zhang  <yongjun_zhang@apple.com>

        Allow WebKit clients to specify a minimum effective width for layout.
        https://bugs.webkit.org/show_bug.cgi?id=191499
        <rdar://problem/45362678>

        Reviewed by Wenson Hsieh.

        Add two new tests. The first test verifies if we ignore meta viewport, setting a different effective width value
        will change the layout width of the page. The second test verifies if we don't ignore meta viewport, we will always
        respect that (980pt) and setting a different effective width value won't change the layout width. 


        * fast/viewport/ios/ipad/viewport-overriden-by-minimum-effective-width-if-ignore-meta-viewport-expected.txt: Added.
        * fast/viewport/ios/ipad/viewport-overriden-by-minimum-effective-width-if-ignore-meta-viewport.html: Added.
        * fast/viewport/ios/ipad/viewport-unchanged-by-minimum-effective-width-if-not-ignore-meta-viewport-expected.txt: Added.
        * fast/viewport/ios/ipad/viewport-unchanged-by-minimum-effective-width-if-not-ignore-meta-viewport.html: Added.
        * resources/ui-helper.js:
        (window.UIHelper.setMinimumEffectiveWidth): Add a helper method to set the minimum effective width from a test.
        (window.UIHelper):

2018-11-27  Jiewen Tan  <jiewen_tan@apple.com>

        Unreviewed, test gardening

        Add a time out parameter to the following test cases such that WebAuthN requests will timeout
        themselves instead of letting the wpt wrapper or test runner kill them.

        * http/wpt/webauthn/public-key-credential-create-success-hid.https.html:
        * http/wpt/webauthn/public-key-credential-get-success-hid.https.html:
        * platform/mac-wk2/TestExpectations:

2018-11-27  Chris Dumez  <cdumez@apple.com>

        Resync service-workers web platform tests from upstream
        https://bugs.webkit.org/show_bug.cgi?id=192035

        Reviewed by Youenn Fablet.

        * TestExpectations:
        * tests-options.json:

2018-11-27  Simon Fraser  <simon.fraser@apple.com>

        Momentum scrolling ends at the wrong place when a scrolling overflow element has a non-zero border
        https://bugs.webkit.org/show_bug.cgi?id=191322

        Reviewed by Dean Jackson.

        * fast/scrolling/momentum-scroll-with-borders-expected.txt: Added.
        * fast/scrolling/momentum-scroll-with-borders.html: Added.
        * platform/ios/TestExpectations:

2018-11-27  Simon Fraser  <simon.fraser@apple.com>

        Composited and tiled layers fail to update on scrolling in WebView
        https://bugs.webkit.org/show_bug.cgi?id=191821
        rdar://problem/46009272

        Reviewed by Zalan Bujtas.
        
        Tests for backing store attachment, and tile coverage before and after scrolling.

        * compositing/backing/backing-store-attachment-scroll-expected.txt: Added.
        * compositing/backing/backing-store-attachment-scroll.html: Added.
        * compositing/tiling/tile-coverage-on-scroll-expected.txt: Added.
        * compositing/tiling/tile-coverage-on-scroll.html: Added.
        * platform/mac-wk1/compositing/tiling/tile-coverage-on-scroll-expected.txt: Added. Root isn't tiled on WK1, so different result.

2018-11-27  Daniel Bates  <dabates@apple.com>

        Fix test timeout following  <https://trac.webkit.org/changeset/238545>
        (https://bugs.webkit.org/show_bug.cgi?id=191969)

        Actually call HTMLInputElement.setSelectionRange().

        * fast/forms/auto-fill-button/caps-lock-indicator-should-be-visible-after-hiding-auto-fill-strong-password-button-expected.html:

2018-11-27  Timothy Hatcher  <timothy@apple.com>

        Web Inspector: Add support for forcing color scheme appearance in DOM tree.
        https://bugs.webkit.org/show_bug.cgi?id=191820
        rdar://problem/46153172

        Reviewed by Devin Rousso.

        * TestExpectations: Skip dark mode tests on other platforms.
        * inspector/css/force-page-appearance-expected.txt: Added.
        * inspector/css/force-page-appearance.html: Added.
        * platform/mac/TestExpectations: Expect dark mode tests to pass on Mojave and later.

2018-11-27  Tim Horton  <timothy_horton@apple.com>

        Serialize and deserialize editable image strokes
        https://bugs.webkit.org/show_bug.cgi?id=192002
        <rdar://problem/30900149>

        Reviewed by Dean Jackson.

        * editing/images/paste-editable-image-expected.txt: Added.
        * editing/images/paste-editable-image.html: Added.
        Add a test that we can copy and paste and editable image and
        continue to edit it, and are affecting a different attachment than the original.

2018-11-16  Jiewen Tan  <jiewen_tan@apple.com>

        Disallow loading webarchives as iframes
        https://bugs.webkit.org/show_bug.cgi?id=191728
        <rdar://problem/45524528>

        Reviewed by Youenn Fablet.

        * platform/mac-wk1/webarchive/loading/test-loading-archive-subresource-expected.txt: Added.
        * platform/mac/fast/loader/webarchive-encoding-respected.html:
        * webarchive/loading/cache-expired-subresource.html:
        * webarchive/loading/mainresource-null-mimetype-crash.html:
        * webarchive/loading/missing-data.html:
        * webarchive/loading/resources/test-loading-archive-main.webarchive: Copied from LayoutTests/webarchive/loading/test-loading-archive.html.
        * webarchive/loading/test-loading-archive-subresource-expected.txt: Added.
        * webarchive/loading/test-loading-archive-subresource-null-mimetype.html:
        * webarchive/loading/test-loading-archive-subresource.html: Copied from LayoutTests/webarchive/loading/test-loading-archive.html.
        * webarchive/loading/test-loading-archive.html:
        * webarchive/loading/test-loading-top-archive-expected.txt: Added.
        * webarchive/loading/test-loading-top-archive.html: Added.

2018-11-27  Per Arne Vollan  <pvollan@apple.com>

        Layout Test svg/text/monospace-text-size-in-img.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=192011

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-27  Per Arne Vollan  <pvollan@apple.com>

        Layout Test fast/inline/simple-inline-with-out-of-flow-descendant.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=192010

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-26  Daniel Bates  <dabates@apple.com>

        REGRESSION (r238078): Do not draw caps lock indicator when Strong Password button is shown
        https://bugs.webkit.org/show_bug.cgi?id=191969
        <rdar://problem/46247569>

        Reviewed by Dean Jackson.

        Add tests to ensure that we show or hide the caps lock indicator depending on whether the
        Strong Password button is visible.

        * TestExpectations: Skip the tests below on all platforms. We will selectively enable them on Mac.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-be-visible-after-hiding-auto-fill-strong-password-button-expected.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-be-visible-after-hiding-auto-fill-strong-password-button.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-not-be-visible-when-auto-fill-strong-password-button-is-visible-expected.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-not-be-visible-when-auto-fill-strong-password-button-is-visible.html: Added.
        * platform/mac-wk2/TestExpectations: Mark the tests above as PASS so that we run them.

2018-11-26  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r238357.

        One of the layout tests added with this change is failing on Mojave.

        Reverted changeset:
        "REGRESSION (r238078): Do not draw caps lock indicator when Strong Password button is shown"
        https://bugs.webkit.org/show_bug.cgi?id=191969
        https://trac.webkit.org/changeset/238513

2018-11-26  Tim Horton  <timothy_horton@apple.com>

        Insert <attachment> elements under editable images to make their backing data accessible
        https://bugs.webkit.org/show_bug.cgi?id=191844
        <rdar://problem/30900149>

        Reviewed by Simon Fraser.

        * editing/images/editable-image-creates-attachment-expected.txt: Added.
        * editing/images/editable-image-creates-attachment.html: Added.
        * resources/ui-helper.js:
        (window.UIHelper.attachmentInfo):
        (window.UIHelper):

2018-11-26  Daniel Bates  <dabates@apple.com>

        REGRESSION (r237738): Command Down Arrow doesn't scroll to the end of a page anymore
        https://bugs.webkit.org/show_bug.cgi?id=191967
        <rdar://problem/45976390>

        Reviewed by Tim Horton.

        Add tests to ensure that Command + Down Arrow and Command + Up Arrow scroll to the end of
        the page and the top of the page, respectively.

        * fast/scrolling/ios/key-command-scroll-to-bottom-expected.html: Added.
        * fast/scrolling/ios/key-command-scroll-to-bottom.html: Added.
        * fast/scrolling/ios/key-command-scroll-to-top-expected.html: Added.
        * fast/scrolling/ios/key-command-scroll-to-top.html: Added.
        * resources/ui-helper.js:
        (window.UIHelper.keyDown): Pass the modifiers array to EventSender.keyDown() to make
        this function work on Mac.

2018-11-24  Ryosuke Niwa  <rniwa@webkit.org>

        SVG use element inside a shadow tree cannot reference an element in the same tree
        https://bugs.webkit.org/show_bug.cgi?id=174977
        <rdar://problem/33665636>

        Reviewed by Zalan Bujtas.

        Added tests for specifying a fragment URL to refer to other elements within shadow trees.

        This patch doesn't add a test for updating a fragment URL of linearGradient and radialGradient
        since it doesn't work at all even outside shadow trees. See webkit.org/b/191934.

        * fast/shadow-dom/svg-animate-href-change-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-animate-href-change-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-animate-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-animate-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-feimage-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-feimage-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-linear-gradient-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-linear-gradient-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-mpath-href-change-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-mpath-href-change-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-mpath-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-mpath-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-radial-gradient-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-radial-gradient-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-text-path-href-change-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-text-path-href-change-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-text-path-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-text-path-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-thref-href-change-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-thref-href-change-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-thref-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-thref-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-use-href-change-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-use-href-change-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-use-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-use-href-in-shadow-tree.html: Added.

2018-11-26  Daniel Bates  <dabates@apple.com>

        Caret disappears at end of password field when caps lock indicator is shown; password field
        not scrolled when caps lock indicator is shown
        https://bugs.webkit.org/show_bug.cgi?id=191164
        <rdar://problem/45738179>

        Reviewed by Dean Jackson.

        Add a test to ensure that we scroll the password field when caps lock is toggled.

        * TestExpectations: Skip the test on all platforms as we only support toggling Caps Lock in
        WebKit2 on Mac at the moment.
        * fast/forms/password-scrolled-after-caps-lock-toggled-expected.txt: Added.
        * fast/forms/password-scrolled-after-caps-lock-toggled.html: Added.
        * platform/mac-wk2/TestExpectations: Mark the test as PASS so that we run it.

2018-11-26  Daniel Bates  <dabates@apple.com>

        Placeholder text is not repainted after caps lock indicator is hidden
        https://bugs.webkit.org/show_bug.cgi?id=191968
        <rdar://problem/46247234>

        Substitute UIHelper.toggleCapsLock() for testRunner.toggleCapsLock() as the former replaces
        the latter following r238512.

        * fast/repaint/placeholder-after-caps-lock-hidden.html:

2018-11-26  Daniel Bates  <dabates@apple.com>

        Placeholder text is not repainted after caps lock indicator is hidden
        https://bugs.webkit.org/show_bug.cgi?id=191968
        <rdar://problem/46247234>

        Reviewed by Zalan Bujtas.

        Add a test to ensure to that the placeholder text is repainted when the caps lock indicator is hidden.

        * TestExpectations: Skip the test on all platforms as we only support toggling Caps Lock in
        WebKit2 on Mac at the moment.
        * fast/repaint/placeholder-after-caps-lock-hidden.html: Added.
        * platform/mac-wk2/TestExpectations: Mark the test as PASS so that we run it.

2018-11-26  Daniel Bates  <dabates@apple.com>

        REGRESSION (r238078): Do not draw caps lock indicator when Strong Password button is shown
        https://bugs.webkit.org/show_bug.cgi?id=191969
        <rdar://problem/46247569>

        Reviewed by Dean Jackson.

        Add tests to ensure that we show or hide the caps lock indicator depending on whether the
        Strong Password button is visible.

        * TestExpectations: Skip the tests below on all platforms. We will selectively enable them on Mac.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-be-visible-when-after-hiding-auto-fill-strong-password-button-expected.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-be-visible-when-after-hiding-auto-fill-strong-password-button.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-not-be-visible-when-auto-fill-strong-password-button-is-visible-expected.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-not-be-visible-when-auto-fill-strong-password-button-is-visible.html: Added.
        * platform/mac-wk2/TestExpectations: Mark the tests above as PASS so that we run them.

2018-11-26  Daniel Bates  <dabates@apple.com>

        Move testRunner.toggleCapsLock() to uiController
        https://bugs.webkit.org/show_bug.cgi?id=191972

        Reviewed by Tim Horton.

        Updated existing test to use UIHelper.toggleCapsLock(), which calls uiController.toggleCapsLock(),
        now that testRunner.toggleCapsLock() was removed.

        * fast/events/detect-caps-lock.html:
        * resources/ui-helper.js:
        (window.UIHelper.toggleCapsLock): Added. Convenience function to call uiController.toggleCapsLock()
        and return a Promise that is resolved once the UIProcess has dispatched the NSEvent to simulate
        pressing the caps lock key.

2018-11-26  Zalan Bujtas  <zalan@apple.com>

        Unreviewed rebaseline after r238493.

        * platform/ios/fast/inline/inline-content-with-float-and-margin-expected.txt: Added.

2018-11-26  Zalan Bujtas  <zalan@apple.com>

        Unreviewed test gardening after r238280.

        * fast/content-observation/click-event-suppression-on-content-change.html:

2018-11-26  Zalan Bujtas  <zalan@apple.com>

        Unreviewed rebaseline after r238460.

        * platform/ios/fast/inline/inline-content-with-image-simple-expected.txt: Added.

2018-11-25  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Use float box's margin box to adjust the line constraints.
        https://bugs.webkit.org/show_bug.cgi?id=191961

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-with-float-and-margin-expected.txt: Added.
        * fast/inline/inline-content-with-float-and-margin.html: Added.

2018-11-26  Manuel Rego Casasnovas  <rego@igalia.com>

        [css-grid] Fix grid container sizing under min-content height
        https://bugs.webkit.org/show_bug.cgi?id=191889

        Reviewed by Javier Fernandez.

        Update tests results to the new behavior.
        Also modified a little bit the test to keep them in sync with Blink versions.

        * fast/css-grid-layout/grid-track-sizing-with-orthogonal-flows-expected.txt:
        * fast/css-grid-layout/grid-track-sizing-with-orthogonal-flows.html:
        * fast/css-grid-layout/maximize-tracks-definite-indefinite-height.html:

2018-11-25  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening, rebaseline webgpu/queue-creation.html.

        * webgpu/queue-creation-expected.txt:

2018-11-25  Tim Horton  <timothy_horton@apple.com>

        Make it possible to insert editable images with a gesture
        https://bugs.webkit.org/show_bug.cgi?id=191937

        Reviewed by Wenson Hsieh.

        * editing/images/basic-editable-image-from-execCommand-expected.txt: Added.
        * editing/images/basic-editable-image-from-execCommand.html: Added.
        Add a test that ensures that editable images also work when
        inserted via the editor command.

        * editing/images/redo-insert-editable-image-maintains-strokes-expected.txt: Added.
        * editing/images/redo-insert-editable-image-maintains-strokes.html: Added.
        Add a test that ensures that strokes are maintained when re-doing an
        un-done editable image insertion.

        * editing/images/undo-insert-editable-image-expected.txt: Added.
        * editing/images/undo-insert-editable-image.html: Added.
        Add a test that ensures that the selection stays in a sensible place
        when undoing and redoing editable image insertion.

2018-11-23  Ryosuke Niwa  <rniwa@webkit.org>

        REGRESSION (r236785): Nullptr crash in StyledMarkupAccumulator::traverseNodesForSerialization
        https://bugs.webkit.org/show_bug.cgi?id=191921

        Reviewed by Dean Jackson.

        Added a regression test.

        * editing/pasteboard/copy-paste-across-shadow-boundaries-5-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-5.html: Added.
        * platform/ios/editing/pasteboard/copy-paste-across-shadow-boundaries-5-expected.txt: Added.

2018-11-22  Ryosuke Niwa  <rniwa@webkit.org>

        Updating href on textPath doesn't update its rendering
        https://bugs.webkit.org/show_bug.cgi?id=191920

        Reviewed by Dean Jackson.

        Added a ref test.

        * svg/text/textpath-reference-update-expected.html: Added.
        * svg/text/textpath-reference-update.html: Added.

2018-11-23  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for variable height runs.
        https://bugs.webkit.org/show_bug.cgi?id=191925

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-with-image-simple-expected.txt: Added.
        * fast/inline/inline-content-with-image-simple.html: Added.

2018-11-23  Javier Fernandez  <jfernandez@igalia.com>

        [css-grid] Implement Baseline Alignment for grid items
        https://bugs.webkit.org/show_bug.cgi?id=145566

        Reviewed by Manuel Rego Casasnovas.

        Most of the baseline realated tests pass now; just a few still fail because of unrelated bugs.

        * TestExpectations: Removed several entries, related to the baseline tests that are now passing.
        * fast/css-grid-layout/grid-align-baseline-expected.txt:
        * fast/css-grid-layout/grid-align-baseline-vertical-expected.txt:
        * fast/css-grid-layout/grid-baseline-expected.html:
        * fast/css-grid-layout/grid-baseline-margins-expected.html:
        * fast/css-grid-layout/grid-baseline-margins.html:
        * fast/css-grid-layout/grid-baseline-must-respect-grid-order-expected.txt:
        * fast/css-grid-layout/grid-baseline-must-respect-grid-order.html:
        * fast/css-grid-layout/grid-baseline.html:
        * fast/css-grid-layout/grid-self-baseline-and-flex-tracks-with-indefinite-container-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-and-flex-tracks-with-indefinite-container-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-and-flexible-tracks-should-not-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-and-flexible-tracks-should-not-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-and-item-relayout-should-not-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-and-item-relayout-should-not-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-and-relative-sized-items-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-and-relative-sized-items-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-and-relative-sized-tracks-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-and-relative-sized-tracks-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-followed-by-item-style-change-should-not-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-followed-by-item-style-change-should-not-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-two-dimensional-expected.txt:
        * fast/css-grid-layout/grid-self-baseline-two-dimensional.html:

2018-11-22  Dean Jackson  <dino@apple.com>

        Implement WebGPUQueue and device.getQueue()
        https://bugs.webkit.org/show_bug.cgi?id=191911
        <rdar://problem/46214871>

        Reviewed by Antoine Quint.

        WPT-style test for queue creation.

        * webgpu/queue-creation-expected.txt: Added.
        * webgpu/queue-creation.html: Added.

2018-11-22  Frederic Wang  <fwang@igalia.com>

        Improve fast/scrolling/scrolling-tree-includes-frame.html
        https://bugs.webkit.org/show_bug.cgi?id=191912

        These are small improvements to scrolling-tree-includes-frame.html:
        - Run doTest() after the iframe is loaded and use waitUntilDone/notifyDone for more reliable timing.
        - Use iframe@srcdoc instead of iframe@src and put the content of the iframe document in its own line.
        - Move the iframe style in a separate <style> tag and ensure the iframe is really positioned at (0,0)
        with no extra margin/padding/border.
        - Remove unnecessary id="frame"
        The test expectation is not changed.

        Reviewed by Antonio Gomes.

        * fast/scrolling/scrolling-tree-includes-frame.html:

2018-11-22  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Offset formatting context root runs with horizontal margins.
        https://bugs.webkit.org/show_bug.cgi?id=191900

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-and-nested-formatting-root-with-margin-left-right-expected.txt: Added.
        * fast/inline/inline-content-and-nested-formatting-root-with-margin-left-right.html: Added.

2018-11-22  Simon Fraser  <simon.fraser@apple.com>

        Extremely small monospace text size when SVG is included as an img
        https://bugs.webkit.org/show_bug.cgi?id=191834

        Reviewed by Myles C. Maxfield.
        
        The test has an x offset in the text transform to work around a different bug
        with text position (webkit.org/b/191871).

        * svg/text/monospace-text-size-in-img-expected.html: Added.
        * svg/text/monospace-text-size-in-img.html: Added.

2018-11-22  Javier Fernandez  <jfernandez@igalia.com>

        Tables with vertical-lr writing-mode doesn't apply correctly vertical-align: baseline
        https://bugs.webkit.org/show_bug.cgi?id=191881

        Reviewed by Manuel Rego Casasnovas.

        Tests to verify that columns of a vertical-lr table vertically aligned by baseline work like
        in the case of horizontal tables.
        Also added tests to verify flexbox baseline alignment works as expected in vertical-lr mode.

        The vertical-align-table-baseline.html test has been rebaselined due to the new behavior.

        * fast/writing-mode/vertical-align-table-baseline-latin-expected.html: Added.
        * fast/writing-mode/vertical-align-table-baseline-latin.html: Added.
        * fast/writing-mode/vertical-align-flex-baseline-expected.html: Added.
        * fast/writing-mode/vertical-align-flex-baseline-html: Added.
        * platform/gtk/fast/writing-mode/vertical-align-table-baseline-expected.txt: Rebaseline.
        * platform/gtk/fast/writing-mode/vertical-align-table-baseline-expected.png: Rebaseline.
        * platform/win/fast/writing-mode/vertical-align-table-baseline-expected.txt: Rebaseline.
        * platform/win/fast/writing-mode/vertical-align-table-baseline-expected.png: Rebaseline.

2018-11-21  Wenson Hsieh  <wenson_hsieh@apple.com>

        [Cocoa] [WebKit2] Add support for replacing find-in-page text matches
        https://bugs.webkit.org/show_bug.cgi?id=191786
        <rdar://problem/45813871>

        Reviewed by Ryosuke Niwa.

        Introduce a `LayoutTests/editing/find` directory to contain tests around `FindController`, and add 7 new layout
        tests. These are currently enabled only for WebKit2 on macOS and iOS.

        * TestExpectations:
        * editing/find/find-and-replace-adjacent-words-expected.txt: Added.
        * editing/find/find-and-replace-adjacent-words.html: Added.

        Test find-and-replace with adjacent words.

        * editing/find/find-and-replace-at-editing-boundary-expected.txt: Added.
        * editing/find/find-and-replace-at-editing-boundary.html: Added.

        Test find-and-replace when one of the find matches straddles an editing boundary. In this case, we verify that
        the replacement does not occur, since only part of the word would be replaced.

        * editing/find/find-and-replace-basic-expected.txt: Added.
        * editing/find/find-and-replace-basic.html: Added.

        Add a basic test that exercises a single text replacement, and "replace all".

        * editing/find/find-and-replace-in-subframes-expected.txt: Added.
        * editing/find/find-and-replace-in-subframes.html: Added.

        Test find-and-replace when some of the matches are in editable content in subframes. This test additionally
        contains matches in shadow content (in this case, text fields) within both the main document and the subframe,
        and verifies that text replacement reaches these elements as well.

        * editing/find/find-and-replace-no-matches-expected.txt: Added.
        * editing/find/find-and-replace-no-matches.html: Added.

        Test find-and-replace when no replacement matches are specified. In this case, we fall back to inserting the
        replacement text at the current selection.

        * editing/find/find-and-replace-noneditable-matches-expected.txt: Added.
        * editing/find/find-and-replace-noneditable-matches.html: Added.

        Test find-and-replace when some of the matches to replace are noneditable, others are editable, and others are
        editable but are nested within noneditable elements (i.e. `contenteditable=false`). In this case, "replace all"
        should still replace all fully editable matches.

        * editing/find/find-and-replace-replacement-text-input-events-expected.txt: Added.
        * editing/find/find-and-replace-replacement-text-input-events.html: Added.

        Tests that find-and-replace emits input events of `inputType` "insertReplacementText", except when inserting
        replacement text at a caret selection.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-11-21  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Horizontal margins should be considered as non-breakable space
        https://bugs.webkit.org/show_bug.cgi?id=191894

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-with-margin-left-right-expected.txt: Added.
        * fast/inline/inline-content-with-margin-left-right.html: Added.

2018-11-21  Ryosuke Niwa  <rniwa@webkit.org>

        Mutation observers doesn't get notified of character data mutation made by the parser
        https://bugs.webkit.org/show_bug.cgi?id=191874

        Reviewed by Antti Koivisto.

        Added a regression test.

        * fast/dom/MutationObserver/observe-parser-character-data-change-expected.txt: Added.
        * fast/dom/MutationObserver/observe-parser-character-data-change.html: Added.

2018-11-21  Zalan Bujtas <zalan@apple.com>

        [LFC][IFC] Border should be considered as non-breakable space
        https://bugs.webkit.org/show_bug.cgi?id=191891

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-with-border-left-right-expected.txt: Added.
        * fast/inline/inline-content-with-border-left-right.html: Added.

2018-11-21  Alicia Boya Garc√≠a  <aboya@igalia.com>

        [GTK] Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=191887

        * platform/gtk/TestExpectations:

2018-11-21  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Take nonBreakableStart/End into use.
        https://bugs.webkit.org/show_bug.cgi?id=191873

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-with-padding-left-right-expected.txt: Added.
        * fast/inline/inline-content-with-padding-left-right.html: Added.

2018-11-20  Ryosuke Niwa  <rniwa@webkit.org>

        Input element gains focus when a selectstart event listener on document prevents the default action
        https://bugs.webkit.org/show_bug.cgi?id=191714
        <rdar://problem/46174389>

        Reviewed by Antti Koivisto.

        Added a regression test.

        * fast/events/selectstart-prevent-default-should-not-focus-input-expected.txt: Added.
        * fast/events/selectstart-prevent-default-should-not-focus-input.html: Added.
        * platform/ios/TestExpectations:

2018-11-19  Ryosuke Niwa  <rniwa@webkit.org>

        Click on node assigned to slot in button's shadow cause loss of button focus
        https://bugs.webkit.org/show_bug.cgi?id=191694
        <rdar://problem/46107920>

        Reviewed by Wenson Hsieh.

        Added a regression test.

        * fast/shadow-dom/focus-slot-parent-expected.txt: Added.
        * fast/shadow-dom/focus-slot-parent.html: Added.

2018-11-19  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Begin implementing WebGPUTexture, WebGPUTextureView, and WebGPUTextureFormatEnum, and WebGPUSwapChain::configure upgrades
        https://bugs.webkit.org/show_bug.cgi?id=191794

        Reviewed by Dean Jackson.

        Did some refactoring to better share code among tests, and added basic functionality test for 
        WebGPUTextures and WebGPUTextureView, to be fleshed out when their descriptor objects are implemented. 

        * webgpu/command-buffers.html: Refactored to use basic-webgpu-functions.js.
        * webgpu/js/basic-webgpu-functions.js: Added.
        (vertex.Vertex.vertex_main): The basic MSL code has been moved into this file.
        (fragment.float4.fragment_main):
        (runWebGPUTests): Creates a WebGPURenderingContext on a default canvas and runs its provided functions.
        (async.runWebGPUTestsOnCanvas): 
        (async.setUpContexts): Tests proper creation of a basic WebGPURenderingContext.
        (setUpModule): Creates a basic WebGPUShaderModule.
        (setUpPipelineDescriptor): Creates a basic WebGPURenderPipelineDescriptor.
        (setUpPipeline): Creates a basic WebGPURenderPipeline.
        (render):
        * webgpu/js/set-up-webgpu-contexts.js: Moved into basic-webgpu-functions.js.
        * webgpu/render-pipelines-expected.txt:
        * webgpu/render-pipelines.html: Refactored to use basic-webgpu-functions.js.
        * webgpu/shader-modules.html: Refactored to use basic-webgpu-functions.js.
        * webgpu/textures-textureviews-expected.txt: Added.
        * webgpu/textures-textureviews.html: Added.
        * webgpu/webgpu-basics.html: Refactored to use basic-webgpu-functions.js.

2018-11-19  Wenson Hsieh  <wenson_hsieh@apple.com>

        Dragging image with a border-image larger than the image element crashes
        https://bugs.webkit.org/show_bug.cgi?id=191817
        <rdar://problem/46159222>

        Reviewed by Ryosuke Niwa.

        Verifies that an image that meets the pathological criteria described in Source/WebCore/ChangeLog can still be
        dragged and dropped into an editable area.

        * fast/events/drag-image-with-border-image.html: Added.
        * platform/gtk/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        * platform/wpe/TestExpectations:

        Enable this test only in WebKit1.

2018-11-18  Yusuke Suzuki  <yusukesuzuki@slowstart.org>

        Unreviewed, rolling in the rest of r237254
        https://bugs.webkit.org/show_bug.cgi?id=190340

        * fast/dom/attribute-event-listener-errors-expected.txt:
        * fast/events/attribute-listener-deletion-crash-expected.txt:
        * fast/events/window-onerror-syntax-error-in-attr-expected.txt:
        * js/dom/invalid-syntax-for-function-expected.txt:
        * js/dom/script-start-end-locations-expected.txt:

2018-11-17  Devin Rousso  <drousso@apple.com>

        Web Inspector: Network: add button to show system certificate dialog
        https://bugs.webkit.org/show_bug.cgi?id=191458
        <rdar://problem/45977019>

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/network/getSerializedCertificate-expected.txt: Added.
        * http/tests/inspector/network/getSerializedCertificate.html: Added.

        * platform/gtk/TestExpectations:
        * platform/wincairo/TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-17  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] InlineFormattingState::addDetachingRule should accumulate rules.
        https://bugs.webkit.org/show_bug.cgi?id=191801

        Reviewed by Antti Koivisto.

        * fast/inline/simple-inline-with-out-of-flow-descendant2-expected.txt: Added.
        * fast/inline/simple-inline-with-out-of-flow-descendant2.html: Added.

2018-11-17  Jonathan Hammer  <jonathan@e3software.com>

        Caret stops blinking after context menu shown
        https://bugs.webkit.org/show_bug.cgi?id=191715

        Reviewed by Ryosuke Niwa.

        * fast/events/contextmenu-dismiss-blink-caret-expected.txt: Added.
        * fast/events/contextmenu-dismiss-blink-caret.html: Added.

2018-11-16  Antoine Quint  <graouts@apple.com>

        [Pointer Events] event.isPrimary doesn't always represent the oldest active touch
        https://bugs.webkit.org/show_bug.cgi?id=191752
        <rdar://problem/46129270>

        Reviewed by Dean Jackson.

        Add a new test that checks that adding a touch after another existing touch does not make it be
        the primary touch, but that removing the first touch makes the second touch become the primary touch.

        To do this we add a new ui.sequence() method that allows a series of touch actions to be performed
        in a linear sequence. The test author can create a finger and call various actions on it, currently
        begin(), move() and end().

        When these actions are processed, we compute all "stationary" actions for each part of the sequence
        so that we can provide this to the uiController.sendEventStream() function.

        Finally, we add a way to track events received by the target and assert that the events that were
        received match those that were expected.

        * pointerevents/ios/pointer-events-is-primary-expected.txt: Added.
        * pointerevents/ios/pointer-events-is-primary.html: Added.
        * pointerevents/utils.js:
        (prototype.handleEvent):
        (prototype.assertMatchesEvents):
        (const.ui.new.UIController):
        (const.ui.new.UIController.prototype.finger):
        (const.ui.new.UIController.prototype.pinchOut):
        (const.ui.new.UIController.prototype.sequence):
        (const.ui.new.UIController.prototype._runEvents):
        (prototype.begin):
        (prototype.move):
        (prototype.end):
        (prototype.stationary):
        (prototype._action):

2018-11-16  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: minor style improvements
        https://bugs.webkit.org/show_bug.cgi?id=191727

        Reviewed by Joseph Pecoraro.

        * inspector/audit/resources/audit-utilities.js:

2018-11-16  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Keep Web Inspector window alive across process swaps (PSON) (Local Inspector)
        https://bugs.webkit.org/show_bug.cgi?id=191740
        <rdar://problem/45470897>

        Reviewed by Timothy Hatcher.

        * inspector/unit-tests/target-manager-expected.txt:
        * inspector/unit-tests/target-manager.html:
        Update test to pass in both a MultiplexingBackendTarget and DirectBackendTarget world.

2018-11-16  Jeremy Jones  <jeremyj@apple.com>

        Include AirPlay destination name in AirPlay placard.
        https://bugs.webkit.org/show_bug.cgi?id=191574
        rdar://problem/45536144

        Reviewed by Eric Carlson.

        Updated tests for string changes.

        * media/modern-media-controls/airplay-placard/airplay-placard-expected.txt:
        * media/modern-media-controls/airplay-placard/airplay-placard.html:

2018-11-16  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r232376): Layout Test inspector/console/webcore-logging.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=186425

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations: Remove flaky expectation.

2018-11-16  Sihui Liu  <sihui_liu@apple.com>

        Storing blobs in IDB on iOS: "Error preparing blob/file"
        https://bugs.webkit.org/show_bug.cgi?id=188438
        <rdar://problem/43097279>

        Reviewed by Alex Christensen.

        Three IDB blob tests are passing on iOS device now.

        * platform/ios-device/TestExpectations:

2018-11-16  Zalan Bujtas  <zalan@apple.com>

        [iOS] 2 subsequent taps are required to trigger certain tasks on the desktop version of YouTube.com
        https://bugs.webkit.org/show_bug.cgi?id=191712
        <rdar://problem/45612900>

        Reviewed by Simon Fraser.

        * fast/events/touch/ios/click-instead-of-hover-simple-expected.txt: Added.
        * fast/events/touch/ios/click-instead-of-hover-simple.html: Added.

2018-11-16  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for out-of-flow positioned boxes
        https://bugs.webkit.org/show_bug.cgi?id=191726

        Reviewed by Antti Koivisto.

        * fast/inline/simple-inline-with-out-of-flow-descendant-expected.txt: Added.
        * fast/inline/simple-inline-with-out-of-flow-descendant.html: Added.
        * platform/ios/TestExpectations:

2018-11-16  Thibault Saunier  <tsaunier@igalia.com>

        [GStreamer][MediaStream] Handle track addition and removal
        https://bugs.webkit.org/show_bug.cgi?id=191599

        Reviewed by Xabier Rodriguez-Calvar.

        * fast/mediastream/MediaStream-video-element-remove-track-expected.txt: Added.
        * fast/mediastream/MediaStream-video-element-remove-track.html: Added.

2018-11-16  Antoine Quint  <graouts@apple.com>

        PointerEvents should not require touch event listeners to be registered
        https://bugs.webkit.org/show_bug.cgi?id=191333
        <rdar://problem/45857523>

        Reviewed by Dean Jackson.

        Add two iOS tests that check that we dispatch pointer events when only those events are registered
        and that we correctly account for calls to preventDefault(). To support pointer events test, we add
        a new utility where we will be adding user interaction functions that should allow these tests to be
        submitted to the WPT repository provided browsers implement their own versions of the UIController.

        * TestExpectations:
        * pointerevents/ios/pointer-events-dispatch-on-touch-expected.txt: Added.
        * pointerevents/ios/pointer-events-dispatch-on-touch.html: Added.
        * pointerevents/ios/pointer-events-prevent-default-expected.txt: Added.
        * pointerevents/ios/pointer-events-prevent-default.html: Added.
        * pointerevents/utils.js: Added.

2018-11-15  Zalan Bujtas  <zalan@apple.com>

        [iOS] Do not get stuck in indeterminate content observation state.
        https://bugs.webkit.org/show_bug.cgi?id=191719

        Reviewed by Simon Fraser.

        * fast/events/touch/ios/stuck-with-hover-state-expected.txt: Added.
        * fast/events/touch/ios/stuck-with-hover-state.html: Added.

2018-11-15  Simon Fraser  <simon.fraser@apple.com>

        Add layout test for iframe contents disappearing on view unparent/reparent
        https://bugs.webkit.org/show_bug.cgi?id=191725

        Reviewed by Alex Christensen.
        
        This test tests the changes made in r238229.

        * compositing/iframes/remove-reinsert-webview-with-iframe-expected.txt: Added.
        * compositing/iframes/remove-reinsert-webview-with-iframe.html: Added.
        * platform/ios/compositing/iframes/remove-reinsert-webview-with-iframe-expected.txt: Added.
        * platform/mac-wk1/compositing/iframes/remove-reinsert-webview-with-iframe-expected.txt: Added.

2018-11-15  Simon Fraser  <simon.fraser@apple.com>

        REGRESSION (r238090) Composited iframes that resize from zero don't show
        https://bugs.webkit.org/show_bug.cgi?id=191733
        rdar://problem/46107764

        Reviewed by Zalan Bujtas.

        * compositing/iframes/resize-from-zero-size-expected.txt: Added.
        * compositing/iframes/resize-from-zero-size.html: Added.

2018-11-15  Simon Fraser  <simon.fraser@apple.com>

        Overlay with -webkit-overflow-scrolling:touch doesn't become scrollable after added text makes it taller
        https://bugs.webkit.org/show_bug.cgi?id=158342
        rdar://problem/26652811

        Reviewed by Zalan Bujtas.

        Patch partly by Fr√©d√©ric Wang.

        Add a test to check that scrollability of composited/non-composited overflow divs is properly
        updated. This test used to fail and assert before #238090. A second test with nested divs
        stills exhibit the issue and is fixed by the present commit.

        * fast/scrolling/ios/change-scrollability-on-content-resize-expected.txt: Added.
        * fast/scrolling/ios/change-scrollability-on-content-resize-nested-expected.txt: Added.
        * fast/scrolling/ios/change-scrollability-on-content-resize-nested.html: Added.
        * fast/scrolling/ios/change-scrollability-on-content-resize.html: Added.

2018-11-15  Truitt Savell  <tsavell@apple.com>

        Unreviewed, rolling out r238244.

        Caused High Sierra test runs to fail early with 50 crashes and
        casued 25 API failures.

        Reverted changeset:

        "[css-logical] Implement flow-relative margin, padding and
        border shorthands"
        https://bugs.webkit.org/show_bug.cgi?id=188697
        https://trac.webkit.org/changeset/238244

2018-11-15  Ryan Haddad  <ryanhaddad@apple.com>

        imported/w3c/web-platform-tests/encoding tests take > 30 minutes to run on debug bots
        https://bugs.webkit.org/show_bug.cgi?id=191720

        Unreviewed test gardening.

        * TestExpectations: Skip the directory on debug.

2018-11-15  Chris Dumez  <cdumez@apple.com>

        REGRESSION (r238038): [iOS] Layout test fast/forms/ios/validation-bubble-dismiss-on-tap.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=191710
        <rdar://problem/46104093>

        Reviewed by Simon Fraser.

        There is a small amount of time after we ask to show the popover before the popover is actually shown on screen.
        During this period, clicks are eaten and not reported to the view. For this reason, we keep tapping until the
        popup is dismissed.

        * fast/forms/ios/validation-bubble-dismiss-on-tap-expected.txt:
        * fast/forms/ios/validation-bubble-dismiss-on-tap.html:

2018-11-15  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Use a real nonce for CTAPHID_INIT
        https://bugs.webkit.org/show_bug.cgi?id=191533
        <rdar://problem/46103502>

        Reviewed by Brent Fulgham.

        * http/wpt/webauthn/ctap-hid-failure.https-expected.txt:
        * http/wpt/webauthn/ctap-hid-failure.https.html:
        * http/wpt/webauthn/ctap-hid-success.https-expected.txt:
        * http/wpt/webauthn/ctap-hid-success.https.html:

2018-11-15  Justin Fan  <justin_fan@apple.com>

        [WebGPU] WebGPUCommandBuffer prototype
        https://bugs.webkit.org/show_bug.cgi?id=191663

        Reviewed by Dean Jackson.

        Begin implementation of WebGPUCommandBuffers as well as GPUQueues (MTLCommandBuffer, MTLCommandQueue).

        New testing for WebGPUCommandBuffers, to be fleshed out when WebGPUCommandBufferDescriptors
        are added to the specification.

        * webgpu/command-buffers-expected.txt: Added.
        * webgpu/command-buffers.html: Basic functionality, with more stress tests to be added when the spec is updated.
        * webgpu/webgpu-basics.html: Updated to create the command buffer used by later rendering operations.

2018-11-15  Oriol Brufau  <obrufau@igalia.com>

        [css-logical] Implement flow-relative margin, padding and border shorthands
        https://bugs.webkit.org/show_bug.cgi?id=188697

        Reviewed by Simon Fraser and Antti Koivisto.

        Add tests checking that CSS properties disabled behind runtime flags
        are not exposed.

        * platform/ios/webexposed/css-properties-as-js-properties-expected.txt: Added.
        * platform/ios/webexposed/css-property-listing-expected.txt: Added.
        * platform/mac/webexposed/css-properties-as-js-properties-expected.txt: Added.
        * platform/mac/webexposed/css-property-listing-expected.txt: Added.
        * platform/win/webexposed/css-properties-as-js-properties-expected.txt: Added.
        * platform/win/webexposed/css-property-listing-expected.txt: Added.
        * webexposed/css-properties-as-js-properties-expected.txt: Added.
        * webexposed/css-properties-as-js-properties.html: Added.
        * webexposed/css-properties-behind-flags-expected.txt: Added.
        * webexposed/css-properties-behind-flags.html: Added.
        * webexposed/css-property-listing-expected.txt: Added.
        * webexposed/css-property-listing.html: Added.

2018-11-15  Jiewen Tan  <jiewen_tan@apple.com>

        Unreviewed, test gardening.

        * platform/mac-wk2/TestExpectations:

2018-11-15  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] UserHandle can be null
        https://bugs.webkit.org/show_bug.cgi?id=191521

        Reviewed by Alex Christensen.

        * http/wpt/webauthn/public-key-credential-get-success-hid.https.html:

2018-11-15  Daniel Bates  <dabates@apple.com>

        [iOS] Shift + Tab does not focus previous field
        https://bugs.webkit.org/show_bug.cgi?id=191596
        <rdar://problem/45892053>

        Reviewed by Wenson Hsieh.

        Add tests to ensure that we do not regress the tab and shift + tab key commands.

        * fast/events/ios/focus-tab-next-field-expected.txt: Added.
        * fast/events/ios/focus-tab-next-field.html: Added.
        * fast/events/ios/focus-tab-previous-field-expected.txt: Added.
        * fast/events/ios/focus-tab-previous-field.html: Added.
        * platform/ios-wk1/TestExpectations: Skip test focus-tab-previous-field.html in Legacy WebKit as
        we do not support testing key commands with modifier keys.
        * resources/ui-helper.js:
        (window.UIHelper.keyDown): Updated to support taking an optional array of modifiers (defaults: [])
        and use the new infrastructure to generate a key down event for the specified character.

2018-11-15  Youenn Fablet  <youenn@apple.com>

        Update RTCPeerConnection JS built-ins to be closer to specWe
        https://bugs.webkit.org/show_bug.cgi?id=191665

        Reviewed by Eric Carlson.

        * TestExpectations:

2018-11-15  Miguel Gomez  <magomez@igalia.com>

        Unreviewed GTK+ gardening after r238220.

        * platform/gtk/TestExpectations:

2018-11-14  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for in-flow positioned inline boxes.
        https://bugs.webkit.org/show_bug.cgi?id=191672

        Reviewed by Antti Koivisto.

        * fast/inline/simple-inline-inflow-positioned-expected.txt: Added.
        * fast/inline/simple-inline-inflow-positioned.html: Added.
        * platform/ios/TestExpectations:

2018-11-15  Antti Koivisto  <antti@apple.com>

        REGRESSION(r238178): fast/forms/access-key-mutated.html and fast/forms/access-key-case-insensitive.html are timing out
        https://bugs.webkit.org/show_bug.cgi?id=191642

        Reviewed by Zalan Bujtas.

        * TestExpectations: Unskip
        * platform/mac-wk2/TestExpectations: Unskip
        * platform/mac-wk2/accessibility/mac/selection-notification-focus-change-expected.txt:

        Rebase. Focus timings depends on layout timings.

2018-11-15  Antti Koivisto  <antti@apple.com>

        Remove fonts from CSSFontFaceSet safely
        https://bugs.webkit.org/show_bug.cgi?id=191676

        Reviewed by Zalan Bujtas.

        * fast/text/font-face-set-remove-safely-expected.txt: Added.
        * fast/text/font-face-set-remove-safely.html: Added.

2018-11-14  Timothy Hatcher  <timothy@apple.com>

        Default the view background color and text color to different values when in dark mode.
        https://bugs.webkit.org/show_bug.cgi?id=191607
        rdar://problem/46045854

        Reviewed by Dean Jackson.

        * css-dark-mode/default-colors-expected.txt: Added.
        * css-dark-mode/default-colors.html: Added.
        * inspector/css/shadow-scoped-style-expected.txt: Rebaseline.
        * platform/mac/printing/width-overflow-expected.txt: Rebaseline.

2018-11-14  Ryan Haddad  <ryanhaddad@apple.com>

        Layout test fast/layers/no-clipping-overflow-hidden-added-after-transform.html is a flaky failure on EWS bots
        https://bugs.webkit.org/show_bug.cgi?id=191658

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations: Mark this test as flaky on Sierra Release WK2 to reduce the number of retries on mac-wk2-ews.

2018-11-14  Timothy Hatcher  <timothy@apple.com>

        Update prefers-color-scheme media query matching based on GitHub issue #3278.
        https://bugs.webkit.org/show_bug.cgi?id=191654
        rdar://problem/46074307

        Reviewed by Simon Fraser.

        * css-dark-mode/prefers-color-scheme-expected.txt: Rebaseline.
        * css-dark-mode/prefers-color-scheme.html: Updates to better match the spec.

2018-11-14  Devin Rousso  <drousso@apple.com>

        Web Inspector: Canvas: send a call stack with each action instead of an array of call frames
        https://bugs.webkit.org/show_bug.cgi?id=191628

        Reviewed by Dean Jackson.

        * inspector/model/recording.html:

2018-11-14  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening, move a skip expectation to a more specific file.

        * TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-11-14  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Keep Web Inspector window alive across process swaps (PSON) (Remote Inspector)
        https://bugs.webkit.org/show_bug.cgi?id=191494
        <rdar://problem/45469854>

        Reviewed by Devin Rousso.

        * inspector/unit-tests/target-manager.html:
        WI.targets has switched to being an array instead of a set.

2018-11-14  Truitt Savell  <tsavell@apple.com>

        [ Sierra Release WK2 ] Layout Test fast/workers/worker-cloneport.html is flaky.
        https://bugs.webkit.org/show_bug.cgi?id=191644.

        Unreviewed test Gardening.

        * platform/mac-wk2/TestExpectations:

2018-11-14  Antti Koivisto  <antti@apple.com>

        REGRESSION(r238178): fast/forms/access-key-mutated.html and fast/forms/access-key-case-insensitive.html are timing out
        https://bugs.webkit.org/show_bug.cgi?id=191642

        * TestExpectations: Additionally skip accessibility/mac/selection-notification-focus-change.html

2018-11-14  Antti Koivisto  <antti@apple.com>

        REGRESSION(r238178): fast/forms/access-key-mutated.html and fast/forms/access-key-case-insensitive.html are timing out
        https://bugs.webkit.org/show_bug.cgi?id=191642

        * TestExpectations: Skipping for now.

2018-11-14  Per Arne Vollan  <pvollan@apple.com>

        REGRESSION (WEBPROCESS_WINDOWSERVER_BLOCKING): requestAnimationFrame Stops Completing
        https://bugs.webkit.org/show_bug.cgi?id=190884

        Reviewed by Dean Jackson.

        * TestExpectations:
        * fast/animation/request-animation-frame-in-two-pages-expected.txt: Added.
        * fast/animation/request-animation-frame-in-two-pages.html: Added.
        * platform/mac-wk2/TestExpectations:

2018-11-14  Youenn Fablet  <youenn@apple.com>

        Calling removeTrack on different RTCPeerConnection should throw InvalidAccessError
        https://bugs.webkit.org/show_bug.cgi?id=191603

        Reviewed by Chris Dumez.

        Removed obsolete test.

        * fast/mediastream/RTCPeerConnection-add-removeTrack-expected.txt:
        * fast/mediastream/RTCPeerConnection-add-removeTrack.html:

2018-11-14  Youenn Fablet  <youenn@apple.com>

        Add support for transport and peerConnection stats
        https://bugs.webkit.org/show_bug.cgi?id=191592

        Reviewed by Alex Christensen.

        * webrtc/video-stats.html:

2018-11-14  Ali Juma  <ajuma@chromium.org>

        Transform of composited layer not updated when layer also needs repaint
        https://bugs.webkit.org/show_bug.cgi?id=191598

        Reviewed by Simon Fraser.

        * compositing/geometry/transform-and-repaint-updates-geometry-expected.html: Added.
        * compositing/geometry/transform-and-repaint-updates-geometry.html: Added.

2018-11-13  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Support CTAP HID authenticators on macOS
        https://bugs.webkit.org/show_bug.cgi?id=188623
        <rdar://problem/43353777>

        Reviewed by Brent Fulgham and Chris Dumez.

        * http/wpt/webauthn/ctap-hid-failure.https-expected.txt: Added.
        * http/wpt/webauthn/ctap-hid-failure.https.html: Added.
        * http/wpt/webauthn/ctap-hid-success.https-expected.txt: Added.
        * http/wpt/webauthn/ctap-hid-success.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-hid-silent.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-hid-silent.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-hid.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-hid.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-success-hid.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-success-hid.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-hid-silent.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-hid-silent.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-hid.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-hid.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-success-hid.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-success-hid.https.html: Added.
        * http/wpt/webauthn/resources/util.js:
        * platform/ios-wk2/TestExpectations:

2018-11-13  Timothy Hatcher  <timothy@apple.com>

        Use a light scrollbar for transparent web views in dark mode.
        https://bugs.webkit.org/show_bug.cgi?id=191559
        rdar://problem/46000489

        Reviewed by Dean Jackson.

        * css-dark-mode/supported-color-schemes-scrollbar-expected.txt: Added.
        * css-dark-mode/supported-color-schemes-scrollbar.html: Added.

2018-11-13  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed layout test gardening.

        * platform/wincairo/TestExpectations:

2018-11-13  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Do not show selection UI for editable elements with opacity near zero
        https://bugs.webkit.org/show_bug.cgi?id=191442
        <rdar://problem/45958625>

        Reviewed by Simon Fraser.

        Add 5 new layout tests. See below for more details.

        * editing/selection/character-granularity-rect.html:

        Adjust for a renamed UIScriptController function.

        * editing/selection/ios/do-not-zoom-to-focused-hidden-contenteditable-expected.txt: Added.
        * editing/selection/ios/do-not-zoom-to-focused-hidden-contenteditable.html: Added.

        Add a test to verify that we don't zoom to fit the focused element, if the focused element is completely
        transparent.

        * editing/selection/ios/hide-selection-after-hiding-contenteditable-expected.txt: Added.
        * editing/selection/ios/hide-selection-after-hiding-contenteditable.html: Added.

        Add a test to verify that selection UI is hidden after making an editable root transparent, and shown again when
        the editable root becomes opaque.

        * editing/selection/ios/hide-selection-in-contenteditable-nested-transparency-expected.txt: Added.
        * editing/selection/ios/hide-selection-in-contenteditable-nested-transparency.html: Added.

        Add a test to verify that transparency applied on an editable root via nested transparent containers causes
        selection UI to be suppressed.

        * editing/selection/ios/hide-selection-in-hidden-contenteditable-expected.txt: Added.
        * editing/selection/ios/hide-selection-in-hidden-contenteditable-frame-expected.txt: Added.
        * editing/selection/ios/hide-selection-in-hidden-contenteditable-frame.html: Added.

        Add a test to verify that selection UI is suppressed when an editable element inside a subframe is focused. This
        test checks that the caret, selection rects and selection handle views are not shown, and additionally verifies
        that the selection in a hidden contenteditable area cannot be changed via tap gesture.

        * editing/selection/ios/hide-selection-in-hidden-contenteditable.html: Added.

        Same test as above, but in a regular editable element in the main document instead of a subframe.

        * resources/ui-helper.js:
        (window.UIHelper.getUISelectionRects.return.new.Promise.):
        (window.UIHelper.getUISelectionRects.return.new.Promise):
        (window.UIHelper.getUISelectionRects):
        (window.UIHelper.getUICaretViewRect.return.new.Promise.):
        (window.UIHelper.getUICaretViewRect.return.new.Promise):
        (window.UIHelper.getUICaretViewRect):

        Add new UIHelper wrapper methods. See Tools/ChangeLog for more detail.

2018-11-13  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Table should support select all (Cmd-A)
        https://bugs.webkit.org/show_bug.cgi?id=190299
        <rdar://problem/45029170>

        Reviewed by Devin Rousso.

        * inspector/table/table-selection-expected.txt:
        * inspector/table/table-selection.html:
        Add tests that `selectAll` works when multiple selection is enabled,
        and does nothing when multiple selection is disabled.

2018-11-13  Timothy Hatcher  <timothy@apple.com>

        Treat supported-color-schemes as the second highest priority property.
        https://bugs.webkit.org/show_bug.cgi?id=191556
        rdar://problem/46000076

        Reviewed by Dean Jackson.

        * css-dark-mode/supported-color-schemes-priority-expected.txt: Added.
        * css-dark-mode/supported-color-schemes-priority.html: Added.

2018-11-13  Youenn Fablet  <youenn@apple.com>

        Refresh WPT webrtc tests to ToT
        https://bugs.webkit.org/show_bug.cgi?id=191564

        Reviewed by Eric Carlson.

        Refresh webrtc tests

        * tests-options.json:

2018-11-12  Antoine Quint  <graouts@apple.com>

        [Web Animations] Don't schedule animation frames or update style while an accelerated animation is running
        https://bugs.webkit.org/show_bug.cgi?id=191542
        <rdar://problem/45356027>

        Reviewed by Simon Fraser.

        Add a test that checks that we make only minimal style updates and still dispatch events while an accelerated animation is running.

        * animations/no-style-recalc-during-accelerated-animation-expected.txt: Added.
        * animations/no-style-recalc-during-accelerated-animation.html: Added.
        * fast/layers/no-clipping-overflow-hidden-added-after-transform-expected.html:
        * fast/layers/no-clipping-overflow-hidden-added-after-transform.html: Change the colors to avoid a tiny ImageOnlyFailure.
        * platform/win/TestExpectations: Mark some regressions tracked by webkit.org/b/191584.

2018-11-12  Darshan Kadu  <darsh7807@gmail.com>

        Implement Cache API support for WPE/GTK
        https://bugs.webkit.org/show_bug.cgi?id=178316

        Reviewed by Michael Catanzaro.

        Removed the http/wpt/cache-storage/cache-quota.any.html from the TestExpectations which 
        were marked faliure.

        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-12  Devin Rousso  <drousso@apple.com>

        Web Inspector: Network: show secure certificate details per-request
        https://bugs.webkit.org/show_bug.cgi?id=191447
        <rdar://problem/30019476>

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/network/resource-response-security-expected.txt: Added.
        * http/tests/inspector/network/resource-response-security.html: Added.

        * platform/gtk/TestExpectations:
        * platform/wincairo/TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-12  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Table should support shift-extending the row selection
        https://bugs.webkit.org/show_bug.cgi?id=189718
        <rdar://problem/44577942>

        Reviewed by Devin Rousso.

        * inspector/unit-tests/index-set-expected.txt:
        * inspector/unit-tests/index-set.html:
        Add tests for new IndexSet methods `addRange`, `deleteRange`, `equals`, and `difference`.

2018-11-12  Zalan Bujtas  <zalan@apple.com>

        Do not collapse the soon-to-be-parent anon block when we shuffle around the marker item renderer.
        https://bugs.webkit.org/show_bug.cgi?id=191554
        <rdar://problem/45825265>

        Reviewed by Antti Koivisto.

        * fast/inline/marker-list-item-move-should-not-crash-expected.txt: Added.
        * fast/inline/marker-list-item-move-should-not-crash.html: Added.

2018-11-12  Sihui Liu  <sihui_liu@apple.com>

        imported/w3c/web-platform-tests/IndexedDB/keygenerator-explicit.html crashing on iOS device
        https://bugs.webkit.org/show_bug.cgi?id=191500

        Reviewed by Dean Jackson.

        The test should not crash now.

        * platform/ios-device/TestExpectations:

2018-11-12  Tim Horton  <timothy_horton@apple.com>

        Make it possible to edit images inline
        https://bugs.webkit.org/show_bug.cgi?id=191352
        <rdar://problem/30107985>

        Reviewed by Dean Jackson.

        * TestExpectations:
        * editing/images/basic-editable-image-expected.txt: Added.
        * editing/images/basic-editable-image.html: Added.
        * editing/images/reparent-editable-image-maintains-strokes-expected.txt: Added.
        * editing/images/reparent-editable-image-maintains-strokes.html: Added.
        * platform/ios-wk2/TestExpectations:
        * resources/ui-helper.js:
        (window.UIHelper.drawSquareInEditableImage):
        (window.UIHelper.numberOfStrokesInEditableImage):
        (window.UIHelper):
        Add tests that we can find and draw in editable images, and that if
        the element is moved around in the DOM, it persists its strokes.

2018-11-12  Javier Fernandez  <jfernandez@igalia.com>

        [css-grid] Import additional grid layout tests and update TestExpectations
        https://bugs.webkit.org/show_bug.cgi?id=191515

        Reviewed by Dean Jackson.

        Imported several tests from Blink and update TextExpectaions.

        * TestExpectations: Adding specific bugs for the expected failures.
        * fast/css-grid-layout/changing-content-property-on-nested-grid-should-not-crash-expected.txt: Added.
        * fast/css-grid-layout/changing-content-property-on-nested-grid-should-not-crash.html: Added.
        * fast/css-grid-layout/column-property-should-not-apply-on-grid-container-expected.html: Added.
        * fast/css-grid-layout/column-property-should-not-apply-on-grid-container.html: Added.
        * fast/css-grid-layout/crash-large-positions-expected.txt: Added.
        * fast/css-grid-layout/crash-large-positions.html: Added.
        * fast/css-grid-layout/fixed-width-intrinsic-width-should-exclude-scrollbar-width-in-grid-expected.txt: Added.
        * fast/css-grid-layout/fixed-width-intrinsic-width-should-exclude-scrollbar-width-in-grid.html: Added.
        * fast/css-grid-layout/floating-not-effect-on-grid-items-expected.txt: Added.
        * fast/css-grid-layout/floating-not-effect-on-grid-items.html: Added.
        * fast/css-grid-layout/grid-align-baseline-expected.txt: Added.
        * fast/css-grid-layout/grid-align-baseline-vertical-expected.txt: Added.
        * fast/css-grid-layout/grid-align-baseline-vertical.html: Added.
        * fast/css-grid-layout/grid-align-baseline.html: Added.
        * fast/css-grid-layout/grid-auto-repeat-inherit-initial-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-auto-repeat-inherit-initial-crash.html: Added.
        * fast/css-grid-layout/grid-auto-repeat-positioned-container-expected.html: Added.
        * fast/css-grid-layout/grid-auto-repeat-positioned-container.html: Added.
        * fast/css-grid-layout/grid-automatic-minimum-intrinsic-aspect-ratio-expected.txt: Added.
        * fast/css-grid-layout/grid-automatic-minimum-intrinsic-aspect-ratio.html: Added.
        * fast/css-grid-layout/grid-container-percentage-columns-expected.txt:
        * fast/css-grid-layout/grid-container-percentage-columns.html:
        * fast/css-grid-layout/grid-container-percentage-rows-expected.txt: Added.
        * fast/css-grid-layout/grid-container-percentage-rows.html: Added.
        * fast/css-grid-layout/grid-container-scroll-accounts-for-auto-margin-expected.html: Added.
        * fast/css-grid-layout/grid-container-scroll-accounts-for-auto-margin.html: Added.
        * fast/css-grid-layout/grid-container-scroll-accounts-for-sizing-expected.html:
        * fast/css-grid-layout/grid-container-scroll-accounts-for-sizing.html:
        * fast/css-grid-layout/grid-container-width-should-include-scroll-bar-width-expected.txt: Added.
        * fast/css-grid-layout/grid-container-width-should-include-scroll-bar-width.html: Added.
        * fast/css-grid-layout/grid-crash-huge-margins-and-min-height-max-content-expected.txt: Added.
        * fast/css-grid-layout/grid-crash-huge-margins-and-min-height-max-content.html: Added.
        * fast/css-grid-layout/grid-crash-out-of-flow-positioned-element-expected.txt: Added.
        * fast/css-grid-layout/grid-crash-out-of-flow-positioned-element.html: Added.
        * fast/css-grid-layout/grid-crash-remove-positioned-item-expected.txt:
        * fast/css-grid-layout/grid-crash-remove-positioned-item.html:
        * fast/css-grid-layout/grid-item-before-anonymous-child-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-item-before-anonymous-child-crash.html: Added.
        * fast/css-grid-layout/grid-item-border-overflow-paint-expected.html: Added.
        * fast/css-grid-layout/grid-item-border-overflow-paint.html: Added.
        * fast/css-grid-layout/grid-item-change-alignment-from-stretch-expected.txt: Added.
        * fast/css-grid-layout/grid-item-change-alignment-from-stretch.html: Added.
        * fast/css-grid-layout/grid-item-grid-container-percentage-rows-expected.html: Added.
        * fast/css-grid-layout/grid-item-grid-container-percentage-rows.html: Added.
        * fast/css-grid-layout/grid-item-overflow-expected.html: Added.
        * fast/css-grid-layout/grid-item-overflow-paint-expected.html: Added.
        * fast/css-grid-layout/grid-item-overflow-paint.html: Added.
        * fast/css-grid-layout/grid-item-overflow.html: Added.
        * fast/css-grid-layout/grid-item-paddings-and-writing-modes-expected.html: Added.
        * fast/css-grid-layout/grid-item-paddings-and-writing-modes.html: Added.
        * fast/css-grid-layout/grid-item-scroll-position-expected.txt: Added.
        * fast/css-grid-layout/grid-item-scroll-position.html: Added.
        * fast/css-grid-layout/grid-margins-not-collapse-expected.html: Added.
        * fast/css-grid-layout/grid-margins-not-collapse.html: Added.
        * fast/css-grid-layout/grid-painting-item-overflow-expected.html: Added.
        * fast/css-grid-layout/grid-painting-item-overflow.html: Added.
        * fast/css-grid-layout/grid-painting-items-only-once-expected.html: Added.
        * fast/css-grid-layout/grid-painting-items-only-once.html: Added.
        * fast/css-grid-layout/grid-painting-respect-dom-order-expected.html: Added.
        * fast/css-grid-layout/grid-painting-respect-dom-order.html: Added.
        * fast/css-grid-layout/grid-painting-rtl-expected.html: Added.
        * fast/css-grid-layout/grid-painting-rtl.html: Added.
        * fast/css-grid-layout/grid-self-baseline-01-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-01.html: Added.
        * fast/css-grid-layout/grid-self-baseline-02-b-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-02-b.html: Added.
        * fast/css-grid-layout/grid-self-baseline-02-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-02.html: Added.
        * fast/css-grid-layout/grid-self-baseline-03-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-03.html: Added.
        * fast/css-grid-layout/grid-self-baseline-04-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-04.html: Added.
        * fast/css-grid-layout/grid-self-baseline-05-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-05.html: Added.
        * fast/css-grid-layout/grid-self-baseline-06-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-06.html: Added.
        * fast/css-grid-layout/grid-self-baseline-07-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-07.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-01-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-01.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-02-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-02.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-03-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-03.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-04-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-04.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-05-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-05.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-06-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-06.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-07-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-07.html: Added.
        * fast/css-grid-layout/grid-self-baseline-two-dimensional-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-two-dimensional.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-01-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-01.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-02-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-02.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-03-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-03.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-04-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-04.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-05-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-05.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-06-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-06.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-07-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-07.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-01-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-01.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-02-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-02.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-03-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-03.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-04-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-04.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-05-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-05.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-06-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-06.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-07-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-07.html: Added.
        * fast/css-grid-layout/grid-shorthands-style-format-expected.txt: Added.
        * fast/css-grid-layout/grid-shorthands-style-format.html: Added.
        * fast/css-grid-layout/grid-strict-ordering-crash-2-expected.txt: Added.
        * fast/css-grid-layout/grid-strict-ordering-crash-2.html: Added.
        * fast/css-grid-layout/named-grid-areas-dynamic-with-media-query-expected.html: Added.
        * fast/css-grid-layout/named-grid-areas-dynamic-with-media-query.html: Added.
        * fast/css-grid-layout/negative-growth-share-as-infinity-crash-expected.txt: Added.
        * fast/css-grid-layout/negative-growth-share-as-infinity-crash.html: Added.
        * fast/css-grid-layout/painting-item-marginbox-overflowing-grid-area-expected.html: Added.
        * fast/css-grid-layout/painting-item-marginbox-overflowing-grid-area.html: Added.
        * fast/css-grid-layout/positioned-grid-container-item-percentage-size-expected.html: Added.
        * fast/css-grid-layout/positioned-grid-container-item-percentage-size.html: Added.
        * fast/css-grid-layout/positioned-grid-container-percentage-tracks-expected.txt: Added.
        * fast/css-grid-layout/positioned-grid-container-percentage-tracks.html: Added.
        * fast/css-grid-layout/preferred-width-computed-after-layout-expected.txt: Added.
        * fast/css-grid-layout/preferred-width-computed-after-layout.html: Added.
        * fast/css-grid-layout/quirks-mode-percent-resolution-grid-item-expected.txt: Added.
        * fast/css-grid-layout/quirks-mode-percent-resolution-grid-item.html: Added.
        * fast/css-grid-layout/resources/blue-100x50.png: Added.
        * fast/css-grid-layout/resources/grid-definitions-parsing-utils.js:
        (testGridPositionDefinitionsValues):
        * fast/css-grid-layout/scrolled-grid-painting-expected.html: Added.
        * fast/css-grid-layout/scrolled-grid-painting-overflow-expected.html: Added.
        * fast/css-grid-layout/scrolled-grid-painting-overflow.html: Added.
        * fast/css-grid-layout/scrolled-grid-painting.html: Added.
        * fast/css-grid-layout/setting-node-properties-to-null-during-layout-should-not-crash-expected.txt: Added.
        * fast/css-grid-layout/setting-node-properties-to-null-during-layout-should-not-crash.html: Added.
        * fast/css-grid-layout/stale-grid-layout-2-expected.txt: Added.
        * fast/css-grid-layout/stale-grid-layout-expected.txt: Added.
        * fast/css-grid-layout/vertical-align-do-not-effect-grid-items-expected.html: Added.
        * fast/css-grid-layout/vertical-align-do-not-effect-grid-items.html: Added.

2018-11-12  Youenn Fablet  <youenn@apple.com>

        RealtimeOutgoing A/V sources should observe their sources only if having a sink
        https://bugs.webkit.org/show_bug.cgi?id=191490

        Reviewed by Eric Carlson.

        * webrtc/remove-track-expected.txt:
        * webrtc/remove-track.html:
        Add tests and fixed some flakiness issues on existing tests in the file.

2018-11-12  Youenn Fablet  <youenn@apple.com>

        Support setting stream ids when adding a transceiver
        https://bugs.webkit.org/show_bug.cgi?id=191307

        Reviewed by Eric Carlson.

        * TestExpectations:

2018-11-12  Antti Koivisto  <antti@apple.com>

        Support dynamic pseudo-classes on elements with display: contents
        https://bugs.webkit.org/show_bug.cgi?id=181640
        <rdar://problem/36605415>

        Reviewed by Dean Jackson.

        * fast/css/display-contents-hover-active-expected.txt: Added.
        * fast/css/display-contents-hover-active.html: Added.

2018-11-12  Simon Fraser  <simon.fraser@apple.com>

        feFlood with alpha color doesn't work correctly
        https://bugs.webkit.org/show_bug.cgi?id=163666

        Reviewed by Zalan Bujtas.

        * svg/filters/feFlood-with-alpha-color-expected.html: Added.
        * svg/filters/feFlood-with-alpha-color.html: Added.

2018-11-12  Eric Carlson  <eric.carlson@apple.com>

        Require <iframe allow="display"> for an iframe to use getDisplayMedia
        https://bugs.webkit.org/show_bug.cgi?id=191505
        <rdar://problem/45968811>

        Reviewed by Jer Noble.

        * http/tests/media/media-stream/enumerate-devices-iframe-allow-attribute-expected.txt:
        * http/tests/media/media-stream/get-display-media-iframe-allow-attribute-expected.txt: Added.
        * http/tests/media/media-stream/get-display-media-iframe-allow-attribute.html: Added.
        * http/tests/media/media-stream/resources/get-display-media-devices-iframe.html: Added.
        * http/tests/ssl/media-stream/get-user-media-different-host-expected.txt:
        * http/tests/ssl/media-stream/get-user-media-nested-expected.txt:

2018-11-12  Simon Fraser  <simon.fraser@apple.com>

        Make compositing updates incremental
        https://bugs.webkit.org/show_bug.cgi?id=90342

        Reviewed by Antti Koivisto.

        Add some new tests for issues discovered during development.
        
        Filter tests get new results because composited layer bounds are no longer affected
        by pixel-moving filters. 

        * compositing/filters/sw-layer-overlaps-hw-shadow-expected.txt:
        * compositing/filters/sw-nested-shadow-overlaps-hw-nested-shadow-expected.txt:
        * compositing/filters/sw-shadow-overlaps-hw-layer-expected.txt:
        * compositing/filters/sw-shadow-overlaps-hw-shadow-expected.txt:
        * compositing/geometry/stacking-context-change-layer-reparent-expected.html: Added.
        * compositing/geometry/stacking-context-change-layer-reparent.html: Added.
        * compositing/layer-creation/change-to-overlap-expected.txt: Added.
        * compositing/layer-creation/change-to-overlap.html: Added.
        * compositing/updates/no-updates-in-non-composited-iframe-expected.txt: Added.
        * compositing/updates/no-updates-in-non-composited-iframe.html: Added.
        * compositing/updates/resources/non-composited.html: Added.
        * compositing/video/video-clip-change-src.html: This test was timing-sensitive; the behavior differed bases on whether we
        happened to do a compositing flush between the first and second video load.
        * platform/mac-wk1/TestExpectations: Mark compositing/layer-creation/fixed-overlap-extent.html as flakey; it depends on the
        timing of various AppKit-related things that aren't consistent.

2018-11-12  Jer Noble  <jer.noble@apple.com>

        [MSE] Frame re-ordering can cause iframes to never be enqueued
        https://bugs.webkit.org/show_bug.cgi?id=191485

        Reviewed by Eric Carlson.

        * media/media-source/media-source-dropped-iframe-expected.txt: Added.
        * media/media-source/media-source-dropped-iframe.html: Added.

2018-11-11  Wenson Hsieh  <wenson_hsieh@apple.com>

        Implement a new edit command to change the enclosing list type
        https://bugs.webkit.org/show_bug.cgi?id=191487
        <rdar://problem/45955922>

        Reviewed by Ryosuke Niwa.

        Add a new layout test to verify that the list change type editing command can be used to swap between enclosing
        ordered and unordered lists. Also exercises undo, redo, changing list types under `pre` and `table` elements,
        and handling selection within nested list elements.

        * editing/execCommand/change-list-type-expected.txt: Added.
        * editing/execCommand/change-list-type.html: Added.

2018-11-11  Javier Fernandez  <jfernandez@igalia.com>

        [css-grid] Import additional grid layout test from the WPT suite
        https://bugs.webkit.org/show_bug.cgi?id=191369

        Reviewed by Manuel Rego Casasnovas.

        New Grid Layout tests from the WPT suite.

        * TestExpectations: Added bugs and ImageOnlyFailure for 3 tests that are failing.

2018-11-11  Daniel Bates  <dabates@apple.com>

        [iOS] Draw caps lock indicator in password fields
        https://bugs.webkit.org/show_bug.cgi?id=190565
        <rdar://problem/45262343>

        Unreviewed.

        Update expected results now that iOS supports showing the caps lock indictor.

        * platform/ios/fast/css/text-overflow-input-expected.txt:
        * platform/ios/fast/forms/basic-inputs-expected.txt:
        * platform/ios/fast/forms/input-appearance-height-expected.txt:
        * platform/ios/fast/forms/input-value-expected.txt:
        * platform/ios/fast/forms/placeholder-pseudo-style-expected.txt:
        * platform/ios/tables/mozilla_expected_failures/bugs/bug92647-1-expected.txt:

2018-11-11  Myles C. Maxfield  <mmaxfield@apple.com>

        Address post-review comments after r237955
        https://bugs.webkit.org/show_bug.cgi?id=191496

        Reviewed by Darin Adler.

        * fast/css3-text/css3-text-decoration/text-underline-negative-expected.html:

2018-11-10  Simon Fraser  <simon.fraser@apple.com>

        Remove support for -webkit-svg-shadow
        https://bugs.webkit.org/show_bug.cgi?id=187429

        Reviewed by Dean Jackson.

        -webkit-svg-shadow was a non-standard hack for online iWork, and they no longer use it,
        so remove it. No other browser supports it, and chromestatus say it's used on less than
        0.000001% of pages.

        * css3/blending/svg-blend-layer-shadow.html: Removed.
        * fast/css/getComputedStyle/computed-style-expected.txt:
        * fast/css/getComputedStyle/computed-style-without-renderer-expected.txt:
        * fast/css/getComputedStyle/resources/property-names.js:
        * fast/repaint/moving-shadow-on-container-expected.png: Removed.
        * fast/repaint/moving-shadow-on-container.html: Removed.
        * fast/repaint/moving-shadow-on-path-expected.txt: Removed.
        * fast/repaint/moving-shadow-on-path.html: Removed.
        * legacy-animation-engine/fast/css/getComputedStyle/resources/property-names.js:
        * platform/gtk/TestExpectations:
        * platform/gtk/css3/blending/svg-blend-layer-shadow-expected.png: Removed.
        * platform/gtk/css3/blending/svg-blend-layer-shadow-expected.txt: Removed.
        * platform/gtk/fast/repaint/moving-shadow-on-container-expected.txt: Removed.
        * platform/gtk/fast/repaint/moving-shadow-on-path-expected.png: Removed.
        * platform/gtk/svg/css/arrow-with-shadow-expected.png: Removed.
        * platform/gtk/svg/css/composite-shadow-example-expected.png: Removed.
        * platform/gtk/svg/css/composite-shadow-example-expected.txt: Removed.
        * platform/gtk/svg/css/composite-shadow-text-expected.png: Removed.
        * platform/gtk/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/gtk/svg/css/composite-shadow-with-opacity-expected.png: Removed.
        * platform/gtk/svg/css/composite-shadow-with-opacity-expected.txt: Removed.
        * platform/gtk/svg/css/group-with-shadow-expected.png: Removed.
        * platform/gtk/svg/css/shadow-changes-expected.png: Removed.
        * platform/gtk/svg/css/shadow-changes-expected.txt: Removed.
        * platform/gtk/svg/css/stars-with-shadow-expected.png: Removed.
        * platform/gtk/svg/custom/simple-text-double-shadow-expected.txt: Removed.
        * platform/gtk/svg/custom/transform-with-shadow-and-gradient-expected.png: Removed.
        * platform/gtk/svg/custom/transform-with-shadow-and-gradient-expected.txt: Removed.
        * platform/gtk/svg/filters/shadow-on-filter-expected.png: Removed.
        * platform/gtk/svg/filters/shadow-on-rect-with-filter-expected.png: Removed.
        * platform/gtk/svg/repaint/repaint-webkit-svg-shadow-expected.png: Removed.
        * platform/ios/TestExpectations:
        * platform/ios/css3/blending/svg-blend-layer-shadow-expected.txt: Removed.
        * platform/ios/fast/css/getComputedStyle/computed-style-expected.txt:
        * platform/ios/fast/css/getComputedStyle/computed-style-without-renderer-expected.txt:
        * platform/ios/svg/css/composite-shadow-example-expected.txt: Removed.
        * platform/ios/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/ios/svg/css/composite-shadow-with-opacity-expected.txt: Removed.
        * platform/ios/svg/css/getComputedStyle-basic-expected.txt:
        * platform/ios/svg/css/group-with-shadow-expected.txt: Removed.
        * platform/ios/svg/css/shadow-changes-expected.txt: Removed.
        * platform/ios/svg/css/stars-with-shadow-expected.txt: Removed.
        * platform/ios/svg/custom/transform-with-shadow-and-gradient-expected.txt: Removed.
        * platform/mac-sierra/fast/css/getComputedStyle/computed-style-expected.txt:
        * platform/mac-sierra/fast/css/getComputedStyle/computed-style-without-renderer-expected.txt:
        * platform/mac-sierra/svg/css/getComputedStyle-basic-expected.txt:
        * platform/mac/TestExpectations:
        * platform/mac/css3/blending/svg-blend-layer-shadow-expected.png: Removed.
        * platform/mac/css3/blending/svg-blend-layer-shadow-expected.txt: Removed.
        * platform/mac/fast/css/getComputedStyle/computed-style-expected.txt:
        * platform/mac/fast/css/getComputedStyle/computed-style-without-renderer-expected.txt:
        * platform/mac/fast/repaint/moving-shadow-on-container-expected.txt: Removed.
        * platform/mac/fast/repaint/moving-shadow-on-path-expected.png: Removed.
        * platform/mac/fast/repaint/moving-shadow-on-path-expected.txt: Removed.
        * platform/mac/svg/css/arrow-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/circle-in-mask-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/clippath-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/composite-shadow-example-expected.png: Removed.
        * platform/mac/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/mac/svg/css/composite-shadow-with-opacity-expected.png: Removed.
        * platform/mac/svg/css/getComputedStyle-basic-expected.txt:
        * platform/mac/svg/css/group-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/group-with-shadow-expected.txt: Removed.
        * platform/mac/svg/css/mask-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/path-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/shadow-and-opacity-expected.png: Removed.
        * platform/mac/svg/css/shadow-changes-expected.png: Removed.
        * platform/mac/svg/css/shadow-changes-expected.txt: Removed.
        * platform/mac/svg/css/shadow-with-large-radius-expected.png: Removed.
        * platform/mac/svg/css/shadow-with-negative-offset-expected.png: Removed.
        * platform/mac/svg/css/stars-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/stars-with-shadow-expected.txt: Removed.
        * platform/mac/svg/custom/simple-text-double-shadow-expected.png: Removed.
        * platform/mac/svg/custom/simple-text-double-shadow-expected.txt: Removed.
        * platform/mac/svg/custom/transform-with-shadow-and-gradient-expected.png: Removed.
        * platform/mac/svg/custom/transform-with-shadow-and-gradient-expected.txt: Removed.
        * platform/mac/svg/filters/shadow-on-filter-expected.png: Removed.
        * platform/mac/svg/filters/shadow-on-rect-with-filter-expected.png: Removed.
        * platform/mac/svg/repaint/repaint-webkit-svg-shadow-expected.png: Removed.
        * platform/win/TestExpectations:
        * platform/win/css3/blending/svg-blend-layer-shadow-expected.txt: Removed.
        * platform/win/fast/repaint/moving-shadow-on-container-expected.txt: Removed.
        * platform/win/fast/repaint/moving-shadow-on-path-expected.txt: Removed.
        * platform/win/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/win/svg/css/group-with-shadow-expected.txt: Removed.
        * platform/win/svg/css/shadow-changes-expected.txt: Removed.
        * platform/win/svg/custom/simple-text-double-shadow-expected.txt: Removed.
        * platform/wincairo/fast/repaint/moving-shadow-on-container-expected.txt: Removed.
        * platform/wincairo/fast/repaint/moving-shadow-on-path-expected.png: Removed.
        * platform/wincairo/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/wincairo/svg/css/shadow-changes-expected.txt: Removed.
        * platform/wincairo/svg/custom/transform-with-shadow-and-gradient-expected.txt: Removed.
        * platform/wpe/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/wpe/svg/css/shadow-changes-expected.txt: Removed.
        * platform/wpe/svg/css/stars-with-shadow-expected.txt: Removed.
        * platform/wpe/svg/custom/simple-text-double-shadow-expected.txt: Removed.
        * platform/wpe/svg/custom/transform-with-shadow-and-gradient-expected.txt: Removed.
        * svg/css/arrow-with-shadow-expected.txt: Removed.
        * svg/css/arrow-with-shadow.svg: Removed.
        * svg/css/circle-in-mask-with-shadow-expected.png: Removed.
        * svg/css/circle-in-mask-with-shadow-expected.txt: Removed.
        * svg/css/circle-in-mask-with-shadow.svg: Removed.
        * svg/css/clippath-with-shadow-expected.png: Removed.
        * svg/css/clippath-with-shadow-expected.txt: Removed.
        * svg/css/clippath-with-shadow.svg: Removed.
        * svg/css/composite-shadow-example-expected.txt: Removed.
        * svg/css/composite-shadow-example.html: Removed.
        * svg/css/composite-shadow-text-expected.png: Removed.
        * svg/css/composite-shadow-text.svg: Removed.
        * svg/css/composite-shadow-with-opacity-expected.txt: Removed.
        * svg/css/composite-shadow-with-opacity.html: Removed.
        * svg/css/getComputedStyle-basic-expected.txt:
        * svg/css/group-with-shadow-expected.txt: Removed.
        * svg/css/group-with-shadow.svg: Removed.
        * svg/css/mask-with-shadow-expected.txt: Removed.
        * svg/css/mask-with-shadow.svg: Removed.
        * svg/css/parent-shadow-offscreen-expected.svg: Removed.
        * svg/css/parent-shadow-offscreen.svg: Removed.
        * svg/css/path-with-shadow-expected.png: Removed.
        * svg/css/path-with-shadow-expected.txt: Removed.
        * svg/css/path-with-shadow.svg: Removed.
        * svg/css/root-shadow-offscreen-expected.svg: Removed.
        * svg/css/root-shadow-offscreen.svg: Removed.
        * svg/css/shadow-and-opacity-expected.txt: Removed.
        * svg/css/shadow-and-opacity.svg: Removed.
        * svg/css/shadow-changes.svg: Removed.
        * svg/css/shadow-with-large-radius-expected.png: Removed.
        * svg/css/shadow-with-large-radius-expected.txt: Removed.
        * svg/css/shadow-with-large-radius.svg: Removed.
        * svg/css/shadow-with-negative-offset-expected.png: Removed.
        * svg/css/shadow-with-negative-offset-expected.txt: Removed.
        * svg/css/shadow-with-negative-offset.svg: Removed.
        * svg/css/stars-with-shadow-expected.txt: Removed.
        * svg/css/stars-with-shadow.html: Removed.
        * svg/custom/simple-text-double-shadow-expected.png: Removed.
        * svg/custom/simple-text-double-shadow-expected.txt: Removed.
        * svg/custom/simple-text-double-shadow.svg: Removed.
        * svg/custom/transform-with-shadow-and-gradient.svg: Removed.
        * svg/filters/shadow-on-filter-expected.txt: Removed.
        * svg/filters/shadow-on-filter.svg: Removed.
        * svg/filters/shadow-on-rect-with-filter-expected.txt: Removed.
        * svg/filters/shadow-on-rect-with-filter.svg: Removed.
        * svg/repaint/repaint-webkit-svg-shadow-container-expected.txt: Removed.
        * svg/repaint/repaint-webkit-svg-shadow-container.html: Removed.
        * svg/repaint/repaint-webkit-svg-shadow-expected.txt: Removed.
        * svg/repaint/repaint-webkit-svg-shadow.svg: Removed.

2018-11-10  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r238065.

        Breaks internal builds.

        Reverted changeset:

        "Make it possible to edit images inline"
        https://bugs.webkit.org/show_bug.cgi?id=191352
        https://trac.webkit.org/changeset/238065

2018-11-10  Chris Dumez  <cdumez@apple.com>

        Unreviewed, fix typo in r238066.

        * accessibility/ios-simulator/form-control-validation-message.html:

2018-11-10  Chris Dumez  <cdumez@apple.com>

        Unreviewed attempt to deflake accessibility/ios-simulator/form-control-validation-message.html

        * accessibility/ios-simulator/form-control-validation-message.html:

2018-11-10  Tim Horton  <timothy_horton@apple.com>

        Make it possible to edit images inline
        https://bugs.webkit.org/show_bug.cgi?id=191352
        <rdar://problem/30107985>

        Reviewed by Dean Jackson.

        * TestExpectations:
        * editing/images/basic-editable-image-expected.txt: Added.
        * editing/images/basic-editable-image.html: Added.
        * editing/images/reparent-editable-image-maintains-strokes-expected.txt: Added.
        * editing/images/reparent-editable-image-maintains-strokes.html: Added.
        * platform/ios-wk2/TestExpectations:
        * resources/ui-helper.js:
        (window.UIHelper.drawSquareInEditableImage):
        (window.UIHelper.numberOfStrokesInEditableImage):
        (window.UIHelper):
        Add tests that we can find and draw in editable images, and that if
        the element is moved around in the DOM, it persists its strokes.

2018-11-09  Megan Gardner  <megan_gardner@apple.com>

        Fix Test Expectations for Reveal Test
        https://bugs.webkit.org/show_bug.cgi?id=191476

        Unreviewed test gardening.

        Put the test expectation in the correct location to deal with
        the different behaviour old platforms.

        * platform/mac/editing/mac/selection/context-menu-select-editability-expected.txt: Renamed from LayoutTests/platform/mac-highsierra/editing/mac/selection/context-menu-select-editability-expected.txt.

2018-11-09  Tim Horton  <timothy_horton@apple.com>

        Normal-flow-only flex items don't correctly respect z-index
        https://bugs.webkit.org/show_bug.cgi?id=191486

        Reviewed by Simon Fraser.

        * css3/flexbox/z-index-with-normal-flow-only-expected.html: Added.
        * css3/flexbox/z-index-with-normal-flow-only.html: Added.
        Add a test that a <canvas> with z-index 50 correctly stacks below
        a <canvas> that is a flex-item with z-index 100.

2018-11-09  Jer Noble  <jer.noble@apple.com>

        SourceBuffer throws an error when appending a second init segment after changeType().
        https://bugs.webkit.org/show_bug.cgi?id=191474

        Reviewed by Eric Carlson.

        * media/media-source/media-source-changetype-second-init-expected.txt: Added.
        * media/media-source/media-source-changetype-second-init.html: Added.

2018-11-09  Andy Estes  <aestes@apple.com>

        [Payment Request] canMakePayment() should not consider serialized payment method data
        https://bugs.webkit.org/show_bug.cgi?id=191432

        Reviewed by Dean Jackson.

        * http/tests/paymentrequest/payment-request-canmakepayment-method.https-expected.txt:
        * http/tests/paymentrequest/payment-request-canmakepayment-method.https.html: Updated with
        changes from imported/w3c/web-platform-tests/payment-request/. Modified two tests to use
        user_activation_test() rather than test_driver.bless().
        * http/tests/paymentrequest/payment-request-show-method.https-expected.txt:
        * http/tests/paymentrequest/payment-request-show-method.https.html: Now that canMakePayment
        does not convert payment method data, added a test that ensures show() rejects with a
        TypeError when Apple Pay's payment method data is invalid.
        * platform/ios-wk2/TestExpectations: Un-skipped payment-request-canmakepayment-method.https.html.
        * platform/mac-wk2/TestExpectations: Ditto.

2018-11-09  Andy Estes  <aestes@apple.com>

        [Payment Request] PaymentResponse.details should be updated when the user accepts a rpayment retry
        https://bugs.webkit.org/show_bug.cgi?id=191440

        Reviewed by Dean Jackson.

        * http/tests/paymentrequest/payment-response-retry-method.https-expected.txt:
        * http/tests/paymentrequest/payment-response-retry-method.https.html:

2018-11-09  Chris Dumez  <cdumez@apple.com>

        HTML form validation bubble disappears
        https://bugs.webkit.org/show_bug.cgi?id=191418

        Reviewed by Simon Fraser.

        Add API test coverage and update existing tests to use form-validation.js and
        avoid code duplication.

        * fast/forms/form-validation.js: Added.
        (getValidationBubbleContents):
        (getValidationBubble.return.new.Promise.):
        (getValidationBubble):
        * fast/forms/ios/validation-bubble-dismiss-on-tap-expected.txt:
        * fast/forms/ios/validation-bubble-dismiss-on-tap.html:
        * fast/forms/navigation-dismisses-validation-bubbles-expected.txt: Renamed from LayoutTests/http/tests/navigation/navigation-dismisses-validation-bubbles-expected.txt.
        * fast/forms/navigation-dismisses-validation-bubbles.html: Renamed from LayoutTests/http/tests/navigation/navigation-dismisses-validation-bubbles.html.
        * fast/forms/resources/check-validation-bubble-not-visible.html: Renamed from LayoutTests/http/tests/navigation/resources/check-validation-bubble-not-visible.html.
        * fast/forms/scroll-into-view-and-show-validation-message-expected.txt: Added.
        * fast/forms/scroll-into-view-and-show-validation-message.html: Added.
        * fast/forms/validation-bubble-disappears-when-input-detached-expected.txt:
        * fast/forms/validation-bubble-disappears-when-input-detached.html:
        * fast/forms/validation-bubble-disappears-when-input-moved-expected.txt:
        * fast/forms/validation-bubble-disappears-when-input-moved.html:
        * fast/forms/validation-bubble-disappears-when-input-no-longer-visible-expected.txt:
        * fast/forms/validation-bubble-disappears-when-input-no-longer-visible.html:
        * fast/forms/validation-bubble-escape-key-dismiss-expected.txt:
        * fast/forms/validation-bubble-escape-key-dismiss.html:
        * fast/forms/validation-custom-message-expected.txt:
        * fast/forms/validation-custom-message.html:
        * fast/forms/validation-message-detached-iframe-expected.txt:
        * fast/forms/validation-message-detached-iframe.html:
        * fast/forms/validation-message-detached-iframe2-expected.txt:
        * fast/forms/validation-message-detached-iframe2.html:
        * fast/forms/validation-message-minimum-font-size-expected.txt:
        * fast/forms/validation-message-minimum-font-size.html:
        * fast/forms/validation-messages-expected.txt:
        * fast/forms/validation-messages.html:
        * platform/gtk/TestExpectations:
        * platform/ios-wk1/TestExpectations:
        * platform/win/TestExpectations:

2018-11-09  Jer Noble  <jer.noble@apple.com>

        [Cocoa] Fix failing imported/w3c/web-platform-tests/media-source/mediasource-changetype-play.html test
        https://bugs.webkit.org/show_bug.cgi?id=191396

        Reviewed by Eric Carlson.

        * platform/mac/imported/w3c/web-platform-tests/media-source/mediasource-changetype-play-expected.txt:
        * platform/mac-sierra/imported/w3c/web-platform-tests/media-source/mediasource-changetype-play-expected.txt:

2018-11-09  Ryan Haddad  <ryanhaddad@apple.com>

        Clean up test expectations after r237942
        https://bugs.webkit.org/show_bug.cgi?id=191448

        Unreviewed test gardening.

        Add test expectation files for Sierra WK1.

        * platform/mac-sierra-wk1/compositing/repaint/iframes/compositing-iframe-scroll-repaint-expected.txt: Added.
        * platform/mac-sierra-wk1/compositing/repaint/iframes/compositing-iframe-with-fixed-background-doc-repaint-expected.txt: Added.

2018-11-09  Daniel Bates  <dabates@apple.com>

        [iOS] Pressing forward delete key in text field does nothing and we should not invoke an editor
        action when forward delete is pressed outside a text field
        https://bugs.webkit.org/show_bug.cgi?id=190566
        <rdar://problem/45262367>

        Reviewed by Wenson Hsieh.

        Add a test to ensure that pressing the forward delete key deletes the next character.

        * fast/events/ios/forward-delete-in-editable-expected.txt: Added.
        * fast/events/ios/forward-delete-in-editable.html: Added.

2018-11-09  Carlos Garcia Campos  <cgarcia@igalia.com>

        REGRESSION(r236365): [GTK] Many form-related tests are failing
        https://bugs.webkit.org/show_bug.cgi?id=189993

        Reviewed by Michael Catanzaro.

        Remove expectations for tests that are passing now.

        * platform/gtk/TestExpectations:

2018-11-08  Megan Gardner  <megan_gardner@apple.com>

        Adopt Reveal Framework to replace Lookup
        https://bugs.webkit.org/show_bug.cgi?id=191097

        Reviewed by Tim Horton.

        Reveal selects spaces instead of adjacent words, no matter how interesting they are. 
        Update the tests to show this, and change the expections for previous platforms.

        * editing/mac/selection/context-menu-select-editability-expected.txt:
        * editing/mac/selection/context-menu-select-editability.html:
        * platform/mac-highsierra/editing/mac/selection/context-menu-select-editability-expected.txt: Copied from LayoutTests/editing/mac/selection/context-menu-select-editability-expected.txt.

2018-11-08  Ryan Haddad  <ryanhaddad@apple.com>

        Clean up test expectations after r237942
        https://bugs.webkit.org/show_bug.cgi?id=191448

        Unreviewed test gardening.

        Add High Sierra specific expectation files for three tests, rebaseline one for Mojave, and remove failure expectations.

        * platform/mac-highsierra-wk1/compositing/repaint/iframes/composited-iframe-with-fixed-background-doc-repaint-expected.txt: Copied from LayoutTests/platform/mac-wk1/compositing/repaint/iframes/composited-iframe-with-fixed-background-doc-repaint-expected.txt.
        * platform/mac-highsierra-wk1/compositing/repaint/iframes/compositing-iframe-scroll-repaint-expected.txt: Added.
        * platform/mac-highsierra-wk1/compositing/repaint/iframes/compositing-iframe-with-fixed-background-doc-repaint-expected.txt: Added.
        * platform/mac-wk1/TestExpectations:
        * platform/mac-wk1/compositing/repaint/iframes/composited-iframe-with-fixed-background-doc-repaint-expected.txt:

2018-11-08  Ryan Haddad  <ryanhaddad@apple.com>

        [Mojave WK1] Layout test fast/events/detect-caps-lock.html is timing out
        https://bugs.webkit.org/show_bug.cgi?id=191424

        Unreviewed test gardening.

        Update expectations since this test is only expected to run on WK2.

        * platform/mac-wk2/TestExpectations:
        * platform/mac/TestExpectations:

2018-11-08  Ross Kirsling  <ross.kirsling@sony.com>

        U+180E is no longer a whitespace character
        https://bugs.webkit.org/show_bug.cgi?id=191415

        Reviewed by Saam Barati.

        * js/ToNumber-expected.txt:
        * js/parseFloat-expected.txt:
        * js/script-tests/ToNumber.js:
        * js/script-tests/parseFloat.js:
        Update tests and expectations.

        * sputnik/Conformance/09_Type_Conversion/9.3_ToNumber/9.3.1_ToNumber_from_String/S9.3.1_A2-expected.txt:
        * sputnik/Conformance/09_Type_Conversion/9.3_ToNumber/9.3.1_ToNumber_from_String/S9.3.1_A3_T1-expected.txt:
        * sputnik/Conformance/09_Type_Conversion/9.3_ToNumber/9.3.1_ToNumber_from_String/S9.3.1_A3_T2-expected.txt:
        * sputnik/Conformance/15_Native_Objects/15.10_RegExp/15.10.2/15.10.2.12_CharacterClassEscape/S15.10.2.12_A1_T1-expected.txt:
        * sputnik/Conformance/15_Native_Objects/15.10_RegExp/15.10.2/15.10.2.12_CharacterClassEscape/S15.10.2.12_A2_T1-expected.txt:
        * sputnik/Conformance/15_Native_Objects/15.1_The_Global_Object/15.1.2/15.1.2.2_parseInt/S15.1.2.2_A2_T10-expected.txt:
        * sputnik/Conformance/15_Native_Objects/15.1_The_Global_Object/15.1.2/15.1.2.3_parseFloat/S15.1.2.3_A2_T10-expected.txt:
        * sputnik/Unicode/Unicode_410/S15.10.2.12_A1_T6-expected.txt:
        * sputnik/Unicode/Unicode_410/S15.10.2.12_A2_T6-expected.txt:
        * sputnik/Unicode/Unicode_410/S7.2_A1.6_T1-expected.txt:
        * sputnik/Unicode/Unicode_500/S15.10.2.12_A1_T6-expected.txt:
        * sputnik/Unicode/Unicode_500/S15.10.2.12_A2_T6-expected.txt:
        * sputnik/Unicode/Unicode_500/S7.2_A1.6_T1-expected.txt:
        * sputnik/Unicode/Unicode_510/S15.10.2.12_A1_T6-expected.txt:
        * sputnik/Unicode/Unicode_510/S15.10.2.12_A2_T6-expected.txt:
        * sputnik/Unicode/Unicode_510/S7.2_A1.6_T1-expected.txt:
        Let outdated sputnik checks fail.

2018-11-07  Myles C. Maxfield  <mmaxfield@apple.com>

        Unprefix text-decoration CSS3 properties
        https://bugs.webkit.org/show_bug.cgi?id=127193

        Reviewed by Dean Jackson.

        * fast/css3-text/css3-text-decoration/unprefix-expected.html: Added.
        * fast/css3-text/css3-text-decoration/unprefix.html: Added.

2018-11-08  Timothy Hatcher  <timothy@apple.com>

        Add experimental support for a `supported-color-schemes` CSS property.
        https://bugs.webkit.org/show_bug.cgi?id=191319
        rdar://problem/45852261

        Reviewed by Dean Jackson.

        * css-dark-mode/parse-supported-color-schemes-expected.txt: Added.
        * css-dark-mode/parse-supported-color-schemes.html: Added.
        * css-dark-mode/supported-color-schemes-css-expected.txt: Added.
        * css-dark-mode/supported-color-schemes-css.html: Added.

2018-11-08  Per Arne Vollan  <pvollan@apple.com>

        [Sierra Release WK2] Layout Test media/track/track-cue-css.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=191200

        Unreviewed, speculative fix for test flakiness.

        * media/track/track-cue-css-expected.html:
        * media/track/track-cue-css.html:

2018-11-08  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Use DeviceIdHashSaltStorage to generate device ID hash salt
        https://bugs.webkit.org/show_bug.cgi?id=190825
        <rdar://problem/45486085>

        Update enumerate-devices-source-id to expect the same device to have the same ID in all
        iframes, remove enumerate-devices-source-id-persistent because the logic was faulty.

        Reviewed by Youenn Fablet.

        * TestExpectations: Unskip http/tests/media/media-stream/enumerate-devices-source-id.html
        * http/tests/media/media-stream/enumerate-devices-source-id-expected.txt:
        * http/tests/media/media-stream/enumerate-devices-source-id-persistent-expected.txt: Removed.
        * http/tests/media/media-stream/enumerate-devices-source-id-persistent.html: Removed.
        * http/tests/media/media-stream/enumerate-devices-source-id.html:

2018-11-08  Jonathan Hammer  <jonathan@e3software.com>

        Plain text drag in contenteditable is always DragOperationCopy, never DragOperationMove
        https://bugs.webkit.org/show_bug.cgi?id=191228
        <rdar://problem/45786830>

        Reviewed by Wenson Hsieh.

        A test that checks that dragging plain text in a contenteditable element results
        in the text being moved and not copied. Only applies to WK1. Test skipped on
        WK2 because WK2 EventSender does not support drag events. Test also skipped on 
        AppleWin because drag and drop doesn't work correctly in DRT (according to the 
        TestExpectations file).

        * fast/events/drag-and-drop-move-not-copy-expected.txt: Added.
        * fast/events/drag-and-drop-move-not-copy.html: Added.
        * platform/win/TestExpectations:
        * platform/wk2/TestExpectations:

2018-11-08  Alicia Boya Garc√≠a  <aboya@igalia.com>

        [GTK] Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=191404

        * platform/gtk/TestExpectations:
        * platform/gtk/fast/block/basic/height-percentage-simple-expected.txt: Added.
        * platform/gtk/fast/inline/simple-inline-block-expected.txt: Added.
        * platform/gtk/fast/inline/simple-intruding-float1-expected.txt: Added.
        * platform/gtk/fast/inline/simple-intruding-floats2-expected.txt: Added.
        * platform/gtk/fast/inline/simple-shrink-to-fit-inline-block-expected.txt: Added.

2018-11-07  Justin Michaud  <justin_michaud@apple.com>

        CSS Painting API should pass size, arguments and input properties to paint callback
        https://bugs.webkit.org/show_bug.cgi?id=191309

        Reviewed by Chris Dumez.

        * fast/css-custom-paint/properties-expected.html: Added.
        * fast/css-custom-paint/properties.html: Added.
        * fast/css-custom-paint/worklet.html:

2018-11-07  Zalan Bujtas  <zalan@apple.com>

        Click and touch event listeners on the body don't work
        https://bugs.webkit.org/show_bug.cgi?id=191392
        <rdar://problem/5844416>

        Reviewed by Simon Fraser.

        * fast/events/click-handler-on-body-simple-expected.txt: Added.
        * fast/events/click-handler-on-body-simple.html: Added.
        * fast/events/touch/touch-handler-on-body-simple-expected.txt: Added.
        * fast/events/touch/touch-handler-on-body-simple.html: Added.

2018-11-07  Wenson Hsieh  <wenson_hsieh@apple.com>

        Add an editing command for creating and inserting child lists
        https://bugs.webkit.org/show_bug.cgi?id=191335
        <rdar://problem/45814050>

        Reviewed by Ryosuke Niwa.

        Add a new layout tests that exercise the "InsertNested(Un)orderedList" editing commands in several scenarios
        including undo, redo, executing the edit command with a ranged selection, outdenting to decrease list level,
        inserting lists in and around tables and table cells, and inserting lists in and around pre elements.

        * editing/execCommand/insert-nested-lists-expected.txt: Added.
        * editing/execCommand/insert-nested-lists-in-table-expected.txt: Added.
        * editing/execCommand/insert-nested-lists-in-table.html: Added.
        * editing/execCommand/insert-nested-lists-with-pre-expected.txt: Added.
        * editing/execCommand/insert-nested-lists-with-pre.html: Added.
        * editing/execCommand/insert-nested-lists.html: Added.

2018-11-07  Chris Dumez  <cdumez@apple.com>

        ASSERT(renderer()) under HTMLTextAreaElement::updateValue()
        https://bugs.webkit.org/show_bug.cgi?id=191391
        <rdar://problem/34219633>

        Reviewed by Geoffrey Garen.

        Add layout test coverage. I have verified that this test passes in Firefox and Chrome.
        It used to crash before this change in debug.

        * editing/inserting/inset-html-textarea-without-renderer-expected.txt: Added.
        * editing/inserting/inset-html-textarea-without-renderer.html: Added.

2018-11-07  Myles C. Maxfield  <mmaxfield@apple.com>

        Positioned text underline can look like a strike-through
        https://bugs.webkit.org/show_bug.cgi?id=191341

        Reviewed by Simon Fraser.

        * fast/css3-text/css3-text-decoration/text-underline-negative-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-underline-negative.html: Added.

2018-11-07  Myles C. Maxfield  <mmaxfield@apple.com>

        Dotted underlines that skip descenders are invisible
        https://bugs.webkit.org/show_bug.cgi?id=191403

        Reviewed by Simon Fraser.

        * fast/css3-text/css3-text-decoration/text-underline-style-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-underline-style.html: Added.

2018-11-07  Andy Estes  <aestes@apple.com>

        Crash in WebCore::PaymentRequest::canMakePayment when Apple Pay payment method data is missing
        https://bugs.webkit.org/show_bug.cgi?id=191331

        Reviewed by Alexey Proskuryakov.

        * http/tests/paymentrequest/payment-request-canmakepayment-method.https.html:

2018-11-07  Simon Fraser  <simon.fraser@apple.com>

        Revert 237849: it breaks MotionMark
        https://bugs.webkit.org/show_bug.cgi?id=191398

        Reviewed by Simon Fraser.

        * fast/scrolling/ios/update-scroll-coordinated-status-expected.txt: Removed.
        * fast/scrolling/ios/update-scroll-coordinated-status.html: Removed.

2018-11-07  Simon Fraser  <simon.fraser@apple.com>

        Some WK1 repaint tests are flakey
        https://bugs.webkit.org/show_bug.cgi?id=190627

        Reviewed by Zalan Bujtas.
        
        New baseline.

        * compositing/masks/compositing-clip-path-change-no-repaint-expected.txt:

2018-11-07  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed layout test gardening.

        * platform/wincairo/TestExpectations:

2018-11-07  Dean Jackson  <dino@apple.com>

        [iOS] WebGL leaks exact GPU type
        https://bugs.webkit.org/show_bug.cgi?id=191393
        <rdar://problem/45788297>

        Reviewed by Tim Horton.

        A test that checks that when the GPU vendor is Apple we're
        returning a generic renderer name.

        * fast/canvas/webgl/hide-some-renderer-info-expected.txt: Added.
        * fast/canvas/webgl/hide-some-renderer-info.html: Added.

2018-11-07  Ali Juma  <ajuma@chromium.org>

        IntersectionObserver GC-dependent tests are flaky
        https://bugs.webkit.org/show_bug.cgi?id=191387

        Reviewed by Chris Dumez.

        Make these tests more robust by triggering GC repeatedly inside a setInterval(). Having only a single call to
        GC is potentially flaky, since that call will early-out and return immediately if a GC is already underway.

        * intersection-observer/root-element-deleted.html:
        * intersection-observer/target-deleted.html:

2018-11-07  Dan Bernstein  <mitz@apple.com>

        Add a pseudoclass that matches img elements that are backed by an attachment
        https://bugs.webkit.org/show_bug.cgi?id=191286
        <rdar://problem/45823554>

        Reviewed by Dean Jackson.

        * fast/css/has-attachment-expected.txt: Added.
        * fast/css/has-attachment.html: Added.
        * platform/win/TestExpectations:

2018-11-07  Ali Juma  <ajuma@chromium.org>

        IntersectionObserverEntry doesn't keep JS wrappers of rects alive
        https://bugs.webkit.org/show_bug.cgi?id=191330

        Reviewed by Chris Dumez.

        Add test coverage.

        * intersection-observer/intersection-observer-entry-keeps-js-wrappers-of-rects-alive-expected.txt: Added.
        * intersection-observer/intersection-observer-entry-keeps-js-wrappers-of-rects-alive.html: Added.

2018-11-07  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, update test expectations for fast/events/pointer.

        * TestExpectations: Skip this directory.
        * platform/ios/TestExpectations: Remove skip since it is now skipped globally.

2018-11-07  Per Arne Vollan  <pvollan@apple.com>

        Layout Test fast/text/international/khmer-selection.html is crashing
        https://bugs.webkit.org/show_bug.cgi?id=191368

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-07  Per Arne Vollan  <pvollan@apple.com>

        Layout Test fast/block/basic/quirk-mode-percent-height.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=191366

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-07  Zamiul Haque  <zhaque@apple.com>

        Created a layout test to ensure that date controls marked as credit card expiry
        fields present a Gregorian calendar regardless of default system settings. 
        https://bugs.webkit.org/show_bug.cgi?id=191096
        rdar://problem/42640256

        Reviewed by Tim Horton.

        Added two new methods to UIHelper, helping to facilitate this. calendarType
        returns the calendar identifier of the NSCalendar instance used by the presented
        date picker and setDefaultCalendarType accepts a calendar identifier as an
        argument for changing the default system settings.

        * fast/forms/ios/force-gregorian-calendar-for-credit-card-expiry.html:
        * platform/win/TestExpectations:
        * resources/ui-helper.js:
        (window.UIHelper.calendarType):
        (window.UIHelper.setDefaultCalendarType):

2018-11-07  Tadeu Zagallo  <tzagallo@apple.com>

        REGRESSION(r237547): Test failures on 32-bit JSC since the JIT was disabled
        https://bugs.webkit.org/show_bug.cgi?id=191184

        Reviewed by Saam Barati.

        Skip test when the JIT is disabled since it's too slow to run on CLoop.

        * js/script-tests/regress-139548.js:

2018-11-06  Youenn Fablet  <youenn@apple.com>

        Reenable imported/w3c/web-platform-tests/webrtc/RTCPeerConnection-ontrack.https.html
        https://bugs.webkit.org/show_bug.cgi?id=191343

        Unreviewed.

        * TestExpectations: Unskipping test.
        * platform/ios-wk2/imported/w3c/web-platform-tests/webrtc/RTCPeerConnection-ontrack.https-expected.txt: Removed.

2018-11-06  Youenn Fablet  <youenn@apple.com>

        sender.replaceTrack() fails with InvalidStateError if the transceiver.direction is "inactive"
        https://bugs.webkit.org/show_bug.cgi?id=191202

        Reviewed by Eric Carlson.

        * TestExpectations: skipping a timing out related test.
        It is already timing out but is also flaky.

2018-11-06  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Experimental prototype for WebGPURenderPipeline and WebGPUSwapChain
        https://bugs.webkit.org/show_bug.cgi?id=191291

        Reviewed by Myles Maxfield.

        * webgpu/js/set-up-webgpu-contexts.js: Added helper script for running different webgpu tests.
        (runWebGPUTests):
        (async.runWebGPUTestsOnCanvas):
        (async.setUpContexts):
        * webgpu/render-pipelines-expected.txt: Added.
        * webgpu/render-pipelines.html: Added.
        * webgpu/shader-modules-expected.txt:
        * webgpu/shader-modules.html: Updated to use functions in set-up-webgpu-contexts.js.
        * webgpu/webgpu-basics-expected.txt:
        * webgpu/webgpu-basics.html: Updated through creating a WebGPURenderPipeline.

2018-11-06  Youenn Fablet  <youenn@apple.com>

        Calling sender.replaceTrack() twice produces a new transceiver and its corresponding m= section
        https://bugs.webkit.org/show_bug.cgi?id=191261

        Reviewed by Eric Carlson.

        * webrtc/video-addTransceiver-expected.txt:
        * webrtc/video-addTransceiver.html:

2018-11-06  Youenn Fablet  <youenn@apple.com>

        Make mDNS ICE Candidate an experimental flag again
        https://bugs.webkit.org/show_bug.cgi?id=191262

        Reviewed by Dean Jackson.

        * webrtc/datachannel/mdns-ice-candidates.html:

2018-11-06  Myles C. Maxfield  <mmaxfield@apple.com>

        Implement text-underline-offset and text-decoration-thickness
        https://bugs.webkit.org/show_bug.cgi?id=190774

        Reviewed by Dean Jackson.

        * animations/text-decoration-thickness-expected.txt: Added.
        * animations/text-decoration-thickness.html: Added.
        * animations/text-underline-offset-expected.txt: Added.
        * animations/text-underline-offset.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-2-expected-mismatch.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-2.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-3-expected-mismatch.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-3.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-auto-length-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-auto-length.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-baseline-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-baseline.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-expected-mismatch.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-from-font-auto-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-from-font-auto.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-from-font-length-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-from-font-length.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-repaint-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-repaint.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-under-auto-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-under-auto.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-under-length-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-under-length.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-length-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-length.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-repaint-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-repaint.html: Added.

2018-11-06  Dean Jackson  <dino@apple.com>

        Add some basic pointer events tests
        https://bugs.webkit.org/show_bug.cgi?id=191336
        <rdar://problem/45858574>

        Reviewed by Wenson Hsieh.

        Generate some fake touches for pointer events testing.

        * fast/events/pointer/ios/drag-gives-pointerdown-pointermove-pointerup-expected.txt: Added.
        * fast/events/pointer/ios/drag-gives-pointerdown-pointermove-pointerup.html: Added.
        * fast/events/pointer/ios/tap-gives-pointerdown-pointerup-expected.txt: Added.
        * fast/events/pointer/ios/tap-gives-pointerdown-pointerup.html: Added.
        * platform/ios/TestExpectations:

2018-11-06  Timothy Hatcher  <timothy@apple.com>

        Skip css-dark-mode tests on older macOS platforms
        https://bugs.webkit.org/show_bug.cgi?id=191334

        Reviewed by Brian Burg.

        * platform/mac-highsierra/css-dark-mode/prefers-color-scheme-expected.txt: Removed.
        * platform/mac-highsierra/css-dark-mode/supported-color-schemes-expected.txt: Removed.
        * platform/mac-sierra/css-dark-mode/prefers-color-scheme-expected.txt: Removed.
        * platform/mac-sierra/css-dark-mode/supported-color-schemes-expected.txt: Removed.
        * platform/mac/TestExpectations: Skip css-dark-mode for Sierra and HighSierra.

2018-11-06  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Remove cap on partitioned cache max age if it matches a network reload (redirect-only)
        https://bugs.webkit.org/show_bug.cgi?id=189760
        <rdar://problem/44612242>

        Reviewed by Youenn Fablet and Antti Koivisto.

        * http/tests/resourceLoadStatistics/cap-cache-max-age-for-prevalent-resource-expected.txt:
        * http/tests/resourceLoadStatistics/cap-cache-max-age-for-prevalent-resource.html:
            The test now performs:
            - an initial Fetch request with a permanent redirect to ID 1234. Capped max age.
            - a second Fetch request with a permanent redirect to ID 4321. Capped max age.
            - a third Fetch request with a permanent redirect to and empty ID. Capped max age.
            - a fourth Fetch request with a permanent redirect to and empty ID. Max age cap removed.
            - a fifth Fetch request with a permanent redirect to and empty ID. Regular cache hit.
        * http/tests/resourceLoadStatistics/resources/cached-permanent-redirect.php:
            Now returns an HTTP 500 if the request contains validation headers.

2018-11-06  Myles C. Maxfield  <mmaxfield@apple.com>

        Spelling dots are drawn in the wrong place
        https://bugs.webkit.org/show_bug.cgi?id=190764

        Reviewed by Dean Jackson.

        * editing/spelling/resources/VerySmallDescentAhem.ttf: Added. In order to test repaint rects,
              this is a version of Ahem with a very small descent, so that the dots don't intersect
              with the text itself.
        * editing/spelling/spelling-dots-position-2-expected-mismatch.html: Added.
        * editing/spelling/spelling-dots-position-2.html: Added. Make sure dots are painted in the
              correct vertical place.
        * editing/spelling/spelling-dots-position-3-expected-mismatch.html: Added.
        * editing/spelling/spelling-dots-position-3.html: Added. Make sure dots are painted in the
              correct vertical place.
        * editing/spelling/spelling-dots-position-expected.html: Added.
        * editing/spelling/spelling-dots-position.html: Added. Make sure dots are not painted in
              the wrong place.
        * editing/spelling/spelling-dots-repaint-expected.html: Added.
        * editing/spelling/spelling-dots-repaint.html: Added. Test repaint by drawing an element
              with spelling dots, and then deleting the element from the document. The spelling
              dots should be removed too.
        * fast/writing-mode/english-bt-text-with-spelling-marker-expected.html:
        * fast/writing-mode/english-bt-text-with-spelling-marker.html: Update the test to compensate
              for new spelling dot positions.

2018-11-06  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed layout test gardening.

        * platform/wincairo/TestExpectations:

2018-11-06  Per Arne Vollan  <pvollan@apple.com>

        REGRESSION (r230523): Caps lock indicator not shown in password field
        https://bugs.webkit.org/show_bug.cgi?id=190056

        Reviewed by Ryosuke Niwa.

        * TestExpectations:
        * fast/events/detect-caps-lock-expected.txt: Added.
        * fast/events/detect-caps-lock.html: Added.
        * platform/mac/TestExpectations:

2018-11-06  Ali Juma  <ajuma@chromium.org>

        IntersectionObserver doesn't keep target's JS wrapper alive
        https://bugs.webkit.org/show_bug.cgi?id=190235

        Reviewed by Ryosuke Niwa.

        Add test coverage.

        Update test that depends on a target getting GC'd to call takeRecords() since
        targets with pending entries are no logner GC'd.

        * intersection-observer/intersection-observer-entry-keeps-js-wrapper-of-target-alive-expected.txt: Added.
        * intersection-observer/intersection-observer-entry-keeps-js-wrapper-of-target-alive.html: Added.
        * intersection-observer/intersection-observer-keeps-js-wrapper-of-target-alive-expected.txt: Added.
        * intersection-observer/intersection-observer-keeps-js-wrapper-of-target-alive.html: Added.
        * intersection-observer/root-element-deleted.html:
        * intersection-observer/target-deleted-expected.txt: Added.
        * intersection-observer/target-deleted.html: Added.

2018-11-06  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] User should not be prompted again after denying getDisplayMedia request
        https://bugs.webkit.org/show_bug.cgi?id=191227
        <rdar://problem/45784512>

        Reviewed by Youenn Fablet.

        * TestWebKitAPI/Tests/WebKitCocoa/GetDisplayMedia.mm:
        (-[GetDisplayMediaUIDelegate _webView:requestUserMediaAuthorizationForDevices:url:mainFrameURL:decisionHandler:]):
        (TestWebKitAPI::GetDisplayMediaTest::promptForCapture):
        (TestWebKitAPI::TEST_F):

2018-11-06  Timothy Hatcher  <timothy@apple.com>

        <picture> container doesn't update when prefers-color-scheme media query changes
        https://bugs.webkit.org/show_bug.cgi?id=190913
        rdar://problem/45608456

        Reviewed by Dean Jackson.

        * css-dark-mode/prefers-color-scheme-picture-element-expected.txt: Added.
        * css-dark-mode/prefers-color-scheme-picture-element.html: Added.
        * platform/mac-highsierra/css-dark-mode/prefers-color-scheme-picture-element-expected.txt: Added.
        * platform/mac-sierra/css-dark-mode/prefers-color-scheme-picture-element-expected.txt: Added.

2018-11-06  Alex Christensen  <achristensen@webkit.org>

        Fix tests after r237863
        https://bugs.webkit.org/show_bug.cgi?id=191315

        Reviewed by Chris Dumez.

        * platform/mac-wk2/http/tests/navigation: Added.
        * platform/mac-wk2/http/tests/navigation/keyboard-events-during-provisional-navigation-expected.txt: Copied from LayoutTests/http/tests/navigation/keyboard-events-during-provisional-navigation-expected.txt.
        This test is timing related, and I need to update its WK2 expectations every time I enable or disable safe browsing checks during navigation.
        See r237149.

2018-11-06  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r237834.

        Tests for this change crash on iOS Simulator

        Reverted changeset:

        "Spelling dots are drawn in the wrong place"
        https://bugs.webkit.org/show_bug.cgi?id=190764
        https://trac.webkit.org/changeset/237834

2018-11-06  Youenn Fablet  <youenn@apple.com>

        Make sure RTCIceCandidateStats address is undefined for host and peer reflexive case
        https://bugs.webkit.org/show_bug.cgi?id=191263

        Reviewed by Eric Carlson.

        * webrtc/datachannel/getStats-no-prflx-remote-candidate-expected.txt: Added.
        * webrtc/datachannel/getStats-no-prflx-remote-candidate.html: Added.

2018-11-06  Youenn Fablet  <youenn@apple.com>

        Layout Test imported/w3c/web-platform-tests/webrtc/RTCPeerConnection-setRemoteDescription-tracks.https.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=191278

        Reviewed by Eric Carlson.

        * TestExpectations:

2018-11-06  Thibault Saunier  <tsaunier@igalia.com>

        [GStreamer][WebRTC] Implement black frame generation
        https://bugs.webkit.org/show_bug.cgi?id=190684

        Reviewed by Xabier Rodriguez-Calvar.

        Avoiding webrtc/video-mute-vp8.html to crash but it still fails because
        we are missing the canvas bridging code.

        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-06  Antoine Quint  <graouts@apple.com>

        [Web Animations] Update all tests to match the latest API changes
        https://bugs.webkit.org/show_bug.cgi?id=191302
        <rdar://problem/41000438>

        Reviewed by Dean Jackson.

        * TestExpectations:
        * platform/ios/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-expected.txt:
        * platform/mac-sierra/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-expected.txt:
        * platform/mac-sierra/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-expected.txt:
        * platform/mac-sierra/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-expected.txt:
        * webanimations/css-animations.html:
        * webanimations/left-and-opacity-animation-yields-no-compositing.html:
        * webanimations/opacity-animation-no-longer-composited-upon-completion.html:
        * webanimations/width-and-opacity-separate-animation-yields-no-compositing.html:

2018-11-06  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed WPE gardening. Handle a bunch of test failures under the
        directories containing imported W3C wpt tests. A few test expectations
        are added, but mostly the corresponding baselines are provided.

        * platform/wpe/TestExpectations:
        * platform/wpe/http/tests/dom: Added.
        * platform/wpe/http/tests/dom/same-origin-detached-window-properties-expected.txt: Added.
        * platform/wpe/http/wpt: Added.
        * platform/wpe/http/wpt/mediarecorder: Added.
        * platform/wpe/http/wpt/mediarecorder/MediaRecorder-dataavailable-expected.txt: Added.
        * platform/wpe/http/wpt/mediarecorder/MediaRecorder-mock-dataavailable-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-generate-request-disallowed-input.https-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-encrypted-clear.https-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-reset-src-after-setmediakeys.https-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/idlharness.https-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element: Added.
        * platform/wpe/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/hidden-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/text-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/mimesniff: Added.
        * platform/wpe/imported/w3c/web-platform-tests/mimesniff/mime-types: Added.
        * platform/wpe/imported/w3c/web-platform-tests/mimesniff/mime-types/charset-parameter.window-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents: Added.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents/extension: Added.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents/extension/pointerevent_touch-action-verification-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents/pointerevent_touch-action-illegal-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents/pointerevent_touch-action-verification-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/service-workers: Added.
        * platform/wpe/imported/w3c/web-platform-tests/service-workers/service-worker: Added.
        * platform/wpe/imported/w3c/web-platform-tests/service-workers/service-worker/fetch-event-within-sw-manual.https-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/service-workers/service-worker/fetch-frame-resource.https-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/shadow-dom: Added.
        * platform/wpe/imported/w3c/web-platform-tests/shadow-dom/input-element-list-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/formdata-blob-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/formdata-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/getallresponseheaders-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/getresponseheader.any-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/getresponseheader.any.worker-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/setrequestheader-content-type-expected.txt:

2018-11-06  Frederic Wang  <fwang@igalia.com>

        Overlay with -webkit-overflow-scrolling:touch doesn't become scrollable after added text makes it taller
        https://bugs.webkit.org/show_bug.cgi?id=158342

        Reviewed by Simon Fraser.

        Add a test to ensure the change of scrolling status is reflected in the layer and scrolling
        trees. This test should also ASSERT in debug mode without the associated code change.

        * fast/scrolling/ios/update-scroll-coordinated-status-expected.txt: Added.
        * fast/scrolling/ios/update-scroll-coordinated-status.html: Added.

2018-11-05  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Swatch appears squished and off-center in inputs of type color
        https://bugs.webkit.org/show_bug.cgi?id=191279
        <rdar://problem/45816319>

        Reviewed by Tim Horton.

        * fast/forms/color/color-input-uses-color-well-appearance-expected-mismatch.html: Added.
        * fast/forms/color/color-input-uses-color-well-appearance.html: Added.

        Add a test to verify that setting `-webkit-appearance: textfield;` on a color input causes the color input to
        render differently from a color input with a default appearance.

        * platform/ios-wk1/TestExpectations:
        * platform/ios/TestExpectations:

        In the WebKit2 port of iOS, enable a handful of color input tests that are currently disabled.

        * platform/ios/fast/forms/color/input-appearance-color-expected.txt:

        Rebaseline an existing test on iOS.

2018-11-05  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] An audio track should be muted when capture is interrupted by the OS.
        https://bugs.webkit.org/show_bug.cgi?id=191283
         <rdar://problem/45773103>

        Reviewed by Jon Lee.

        * fast/mediastream/media-stream-track-interrupted-expected.txt: Added.
        * fast/mediastream/media-stream-track-interrupted.html: Added.

2018-11-05  Myles C. Maxfield  <mmaxfield@apple.com>

        Parsing support for text-underline-offset and text-decoration-thickness
        https://bugs.webkit.org/show_bug.cgi?id=191242

        Reviewed by Simon Fraser.

        * fast/css3-text/css3-text-decoration/getComputedStyle/getComputedStyle-text-underline-position-expected.txt:
        * fast/css3-text/css3-text-decoration/getComputedStyle/getComputedStyle-text-underline-position.html: Update the
        test for the new grammar of text-underline-position
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-parse-expected.txt: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-parse.html: Added.
        * fast/css3-text/css3-text-decoration/text-underline-offset-parse-expected.txt: Added.
        * fast/css3-text/css3-text-decoration/text-underline-offset-parse.html: Added.

2018-11-05  Myles C. Maxfield  <mmaxfield@apple.com>

        Spelling dots are drawn in the wrong place
        https://bugs.webkit.org/show_bug.cgi?id=190764

        Reviewed by Dean Jackson.

        * editing/spelling/resources/VerySmallDescentAhem.ttf: Added. In order to test repaint rects,
              this is a version of Ahem with a very small descent, so that the dots don't intersect
              with the text itself.
        * editing/spelling/spelling-dots-position-2-expected-mismatch.html: Added.
        * editing/spelling/spelling-dots-position-2.html: Added. Make sure dots are painted in the
              correct vertical place.
        * editing/spelling/spelling-dots-position-3-expected-mismatch.html: Added.
        * editing/spelling/spelling-dots-position-3.html: Added. Make sure dots are painted in the
              correct vertical place.
        * editing/spelling/spelling-dots-position-expected.html: Added.
        * editing/spelling/spelling-dots-position.html: Added. Make sure dots are not painted in
              the wrong place.
        * editing/spelling/spelling-dots-repaint-expected.html: Added.
        * editing/spelling/spelling-dots-repaint.html: Added. Test repaint by drawing an element
              with spelling dots, and then deleting the element from the document. The spelling
              dots should be removed too.
        * fast/writing-mode/english-bt-text-with-spelling-marker-expected.html:
        * fast/writing-mode/english-bt-text-with-spelling-marker.html: Update the test to compensate
              for new spelling dot positions.

2018-11-05  Ryan Haddad  <ryanhaddad@apple.com>

        Layout Test imported/w3c/web-platform-tests/webrtc/RTCPeerConnection-setRemoteDescription-tracks.https.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=191278

        Unreviewed test gardening.

        * TestExpectations: Mark test as flaky.

2018-11-05  Chris Dumez  <cdumez@apple.com>

        Crash under DOMWindow::postMessageTimerFired()
        https://bugs.webkit.org/show_bug.cgi?id=191217
        <rdar://problem/40888466>

        Reviewed by Geoffrey Garen.

        Add layout test coverage.

        * fast/dom/Window/remove-frame-in-message-event-handler-expected.txt: Added.
        * fast/dom/Window/remove-frame-in-message-event-handler.html: Added.

2018-11-05  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Changing view scale sometimes does not zoom the page to the new initial scale when the page is zoomed in when ignoring meta viewport
        https://bugs.webkit.org/show_bug.cgi?id=191226
        <rdar://problem/45781765>

        Reviewed by Tim Horton.

        Add a new layout test that sets the view scale to several values greater than or equal to 1 and verifies that
        the minimum scale and resulting scroll view scale are exactly the same as the view scale, when (1) the "ignores
        meta viewport" preference is enabled, and (2) the viewport is forced to be always scalable.

        * fast/viewport/ios/minimum-scale-after-changing-view-scale-expected.txt: Added.
        * fast/viewport/ios/minimum-scale-after-changing-view-scale.html: Added.

2018-11-05  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Table selection should not require that rows be in the cache
        https://bugs.webkit.org/show_bug.cgi?id=190993
        <rdar://problem/45613812>

        Reviewed by Devin Rousso.

        Add a test that a table row that is not in the cache can be selected/deselected.

        * inspector/table/table-selection-expected.txt:
        * inspector/table/table-selection.html:

2018-11-05  Devin Rousso  <drousso@apple.com>

        Web Inspector: show save/restore stack for recorded 2D Canvases
        https://bugs.webkit.org/show_bug.cgi?id=175283
        <rdar://problem/34040756>

        Reviewed by Matt Baker.

        * inspector/canvas/recording-2d.html:
        * inspector/canvas/resources/recording-utilities.js:
        (TestPage.registerInitializer.log):
        (TestPage.registerInitializer.async logRecording):

2018-11-05  Thibault Saunier  <tsaunier@igalia.com>

        [GStreamer][WebRTC] Error out when simulcast is activated
        https://bugs.webkit.org/show_bug.cgi?id=190678

        Reviewed by Philippe Normand.

        Implementing it is not for now yet.
        Tests for simulcast have been disabled as they now fail (instead of crashing).

        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-05  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed WPE gardening. Updating or adding various baselines. Also
        adding new failure expectations for tests that need a closer look.

        * platform/wpe/TestExpectations:
        * platform/wpe/fast/block/basic/child-block-level-box-with-height-percent-expected.txt: Added.
        * platform/wpe/fast/block/basic/height-percentage-simple-expected.txt: Added.
        * platform/wpe/fast/block/basic/inline-content-with-floating-image-expected.txt: Added.
        * platform/wpe/fast/block/basic/inline-content-with-floating-images2-expected.txt: Added.
        * platform/wpe/fast/block/basic/quirk-mode-percent-height-expected.txt: Added.
        * platform/wpe/fast/history: Added.
        * platform/wpe/fast/history/page-cache-webdatabase-pending-transaction-expected.txt: Added.
        * platform/wpe/fast/inline-block/14498-positionForCoordinates-expected.txt:
        * platform/wpe/fast/inline/simple-inline-block-expected.txt: Added.
        * platform/wpe/fast/inline/simple-intruding-float1-expected.txt: Added.
        * platform/wpe/fast/inline/simple-intruding-floats2-expected.txt: Added.
        * platform/wpe/fast/inline/simple-intruding-floats3-expected.txt: Added.
        * platform/wpe/fast/inline/simple-shrink-to-fit-inline-block-expected.txt: Added.
        * platform/wpe/webgl/2.0.0/conformance/canvas/drawingbuffer-test-expected.txt: Added.
        * platform/wpe/webgl/2.0.0/conformance/context/context-attributes-alpha-depth-stencil-antialias-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance/context/context-hidden-alpha-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance/extensions/get-extension-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance/extensions/oes-texture-half-float-with-image-data-expected.txt: Added.
        * platform/wpe/webgl/2.0.0/conformance/glsl/misc/shaders-with-invariance-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance/rendering/multisample-corruption-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance2/buffers/bound-buffer-size-change-test-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance2/extensions/promoted-extensions-in-shaders-expected.txt:

2018-11-04  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC] Add support for percentage height in quirks mode.
        https://bugs.webkit.org/show_bug.cgi?id=191232

        Reviewed by Antti Koivisto.

        * fast/block/basic/quirk-mode-percent-height-expected.txt: Added.
        * fast/block/basic/quirk-mode-percent-height.html: Added.
        * platform/ios/TestExpectations:

2018-11-04  Zalan Bujtas  <zalan@apple.com>

        [LFC][BCF] Add support for block level non-replaced inflow height percentage
        https://bugs.webkit.org/show_bug.cgi?id=191229

        Reviewed by Antti Koivisto.

        * fast/block/basic/child-block-level-box-with-height-percent-expected.txt: Added.
        * fast/block/basic/child-block-level-box-with-height-percent.html: Added.
        * platform/ios/TestExpectations:

2018-11-03  Devin Rousso  <drousso@apple.com>

        Web Inspector: Canvas: capture changes to <canvas> that would affect the recorded context
        https://bugs.webkit.org/show_bug.cgi?id=190854

        Reviewed by Matt Baker.

        * inspector/canvas/recording-2d-expected.txt:
        * inspector/canvas/recording-2d.html:
        * inspector/canvas/recording-bitmaprenderer-expected.txt:
        * inspector/canvas/recording-bitmaprenderer.html:
        * inspector/canvas/recording-webgl-expected.txt:
        * inspector/canvas/recording-webgl.html:

2018-11-03  Andy Estes  <aestes@apple.com>

        [Payment Request] PaymentResponse.retry()'s errorFields should be optional
        https://bugs.webkit.org/show_bug.cgi?id=191212

        Reviewed by Youenn Fablet.

        * http/tests/paymentrequest/payment-response-retry-method.https-expected.txt:
        * http/tests/paymentrequest/payment-response-retry-method.https.html:

2018-11-02  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC] Resolve percentage height values.
        https://bugs.webkit.org/show_bug.cgi?id=191224

        Reviewed by Antti Koivisto.

        * fast/block/basic/height-percentage-simple-expected.txt: Added.
        * fast/block/basic/height-percentage-simple.html: Added.
        * platform/ios/TestExpectations:

2018-11-03  Youenn Fablet  <youenn@apple.com>

        Refresh WPT webrtc tests
        https://bugs.webkit.org/show_bug.cgi?id=191133

        Reviewed by Eric Carlson.

        * TestExpectations:

2018-11-03  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] enumerateDevices should not expose devices that are not available to getUserMedia
        https://bugs.webkit.org/show_bug.cgi?id=191177
        <rdar://problem/45747873>

        Reviewed by Jer Noble.

        * http/tests/media/media-stream/enumerate-devices-iframe-allow-attribute-expected.txt: Added.
        * http/tests/media/media-stream/enumerate-devices-iframe-allow-attribute.html: Added.
        * http/tests/media/media-stream/resources/enumerate-devices-iframe.html: Added.
        * http/tests/ssl/media-stream/get-user-media-different-host-expected.txt: Rebased for updated logging.
        * http/tests/ssl/media-stream/get-user-media-nested-expected.txt: Ditto.

2018-11-02  Justin Michaud  <justin_michaud@apple.com>

        Add new global object and preliminary Worklets support for CSS painting api
        https://bugs.webkit.org/show_bug.cgi?id=190979

        Reviewed by Chris Dumez.

        Add a new test harness for worklet tests, since they do not have access to the dom.

        * fast/css-custom-paint/basic-expected.txt:
        * fast/css-custom-paint/basic.html:
        * fast/css-custom-paint/registerPaintBindings-expected.html: Added.
        * fast/css-custom-paint/registerPaintBindings-expected.txt: Removed.
        * fast/css-custom-paint/registerPaintBindings.html:
        * fast/css-custom-paint/resources/testharness-worklet.js: Added.
        (format_value):
        * fast/css-custom-paint/resources/testharness.js: Added.
        (async.importWorklet):
        * fast/css-custom-paint/worklet-expected.html: Added.
        * fast/css-custom-paint/worklet.html: Added.

2018-11-02  Chris Dumez  <cdumez@apple.com>

        REGRESSION (r237699): Layout Test http/tests/security/anchor-download-block-crossorigin.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=191199

        Reviewed by Dewei Zhu.

        Navigate the subframe instead of the main frame, to make sure that the console message is consistently logged.

        * http/tests/security/anchor-download-block-crossorigin-expected.txt:
        * http/tests/security/anchor-download-block-crossorigin.html:

2018-11-02  Per Arne Vollan  <pvollan@apple.com>

        [Win] Layout Test fast/block/basic/inline-content-with-floating-image.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=191194

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-02  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Changing view scale sometimes does not zoom the page to the new initial scale, when the page is at initial scale
        https://bugs.webkit.org/show_bug.cgi?id=191180
        <rdar://problem/45744786>

        Reviewed by Simon Fraser.

        Add a layout test, and make some adjustments to UIHelper.

        * fast/viewport/ios/constant-width-viewport-after-changing-view-scale.html:
        * fast/viewport/ios/device-width-viewport-after-changing-view-scale.html:
        * fast/viewport/ios/viewport-minimum-and-initial-scale-expected.txt: Added.
        * fast/viewport/ios/viewport-minimum-and-initial-scale.html: Added.

        Add a new layout test that contains a viewport meta tag with minimum and initial scales set to 0.94, and checks
        that the resulting minimum and initial scales are 0.94 instead of 0.94158.

        * fast/viewport/watchos/viewport-disable-extra-zoom-adaptations.html:
        * resources/ui-helper.js:

        Make UIHelper.zoomScale return a number rather than a string, and adjust a few call sites.

        (window.UIHelper.zoomScale):
        (window.UIHelper.minimumZoomScale):
        (window.UIHelper):

2018-11-02  Daniel Bates  <dabates@apple.com>

        [iOS] WebKit should dispatch DOM events when a modifier key is pressed
        https://bugs.webkit.org/show_bug.cgi?id=190487

        Reviewed by Tim Horton.

        Update expected results of an existing test now that we identify modifier keys.

        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element-expected.txt:

2018-11-02  Ali Juma  <ajuma@chromium.org>

        Allow cross-document intersection observing
        https://bugs.webkit.org/show_bug.cgi?id=165746

        Reviewed by Simon Fraser.

        Add a test that cross-document intersection observations are triggered when an intermediate frame
        scrolls. Skip the test on WK1 platforms where IntersectionObserver is not supported.

        Add platform-specific baselines for tests involving iframe scrolling, which isn't supported on iOS.

        * http/tests/intersection-observer/intermediate-frame-changes-expected.txt: Added.
        * http/tests/intersection-observer/intermediate-frame-changes.html: Added.
        * http/tests/intersection-observer/resources/intermediate-frame.html: Added.
        * http/tests/intersection-observer/resources/nested-frame.html: Added.
        * platform/ios/imported/w3c/web-platform-tests/intersection-observer/cross-origin-iframe-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/intersection-observer/cross-origin-iframe-expected.txt.
        * platform/ios/imported/w3c/web-platform-tests/intersection-observer/iframe-no-root-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/intersection-observer/iframe-no-root-expected.txt.
        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:
        * platform/wincairo/TestExpectations:

2018-11-02  Per Arne Vollan  <pvollan@apple.com>

        [Win] Layout Test fast/block/basic/inline-content-with-floating-image.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=191194

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-02  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for intrinsic width calculation
        https://bugs.webkit.org/show_bug.cgi?id=191144

        Reviewed by Antti Koivisto.

        * fast/inline/simple-shrink-to-fit-inline-block-expected.txt: Added.
        * fast/inline/simple-shrink-to-fit-inline-block.html: Added.
        * platform/ios/TestExpectations:

2018-11-01  Philippe Normand  <pnormand@igalia.com>

        [Apache] Self-signed SSL certificate RSA key is considered too weak
        https://bugs.webkit.org/show_bug.cgi?id=191156

        Reviewed by Michael Catanzaro.

        Regenerate the self-signed SSL certificate with a 2048 bits RSA key.

        * http/conf/webkit-httpd.pem:

2018-11-01  Antoine Quint  <graouts@apple.com>

        [Web Animations] Make document.getAnimations() return declarative animations in the correct order
        https://bugs.webkit.org/show_bug.cgi?id=191153

        Reviewed by Dean Jackson.

        Mark that the two document.getAnimations() tests for declarative animations are no longer flaky.

        * TestExpectations:

2018-11-02  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Experimental prototype for MSL shaders
        https://bugs.webkit.org/show_bug.cgi?id=191084

        Reviewed by Dean Jackson.

        * webgpu/shader-modules.html: Added.
        * webgpu/shader-modules-expected.html: Added.
        * webgpu/webgpu-basics.html: Added.
        * webgpu/webgpu-basics-expected.html: Added.

2018-11-01  Devin Rousso  <drousso@apple.com>

        Web Inspector: View: introduce a didLayoutSubtree
        https://bugs.webkit.org/show_bug.cgi?id=191176

        Reviewed by Matt Baker.

        * inspector/view/resources/test-view.js:
        (TestPage.registerInitializer.WI.TestView.prototype.layout):
        (TestPage.registerInitializer.WI.TestView.prototype.didLayoutSubtree): Added.

2018-11-01  Chris Dumez  <cdumez@apple.com>

        Location object sans browsing context
        https://bugs.webkit.org/show_bug.cgi?id=191060

        Reviewed by Geoffrey Garen.

        Update existing tests to reflect behavior change.

        * http/tests/dom/same-origin-detached-window-properties-expected.txt:
        * http/tests/dom/same-origin-detached-window-properties.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2-pson.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window3.html:

2018-11-01  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed layout test gardening.

        (Also remove one outdated global test failure.)

        * TestExpectations:
        * platform/wincairo/TestExpectations:

2018-11-01  Sihui Liu  <sihui_liu@apple.com>

        Add a storage limit for IndexedDB
        https://bugs.webkit.org/show_bug.cgi?id=190598
        <rdar://problem/44654715>

        Reviewed by Chris Dumez.

        Some tests will fail after adding storage limit to IndexedDB, so we need to reduce their 
        size and rebase their expectations.

        * storage/indexeddb/key-type-array-expected.txt:
        * storage/indexeddb/key-type-array-private-expected.txt:
        * storage/indexeddb/modern/idbkey-array-equality-expected.txt:
        * storage/indexeddb/modern/idbkey-array-equality-private-expected.txt:
        * storage/indexeddb/modern/resources/idbkey-array-equality.js:
        (request.onsuccess):
        (request.onerror):
        (doAdd):
        * storage/indexeddb/prefetch-invalidation-expected.txt:
        * storage/indexeddb/prefetch-invalidation-private-expected.txt:
        * storage/indexeddb/resources/key-type-array.js:
        (testValidArrayKeys.getreq.onsuccess):
        (testValidArrayKeys.putreq.onsuccess):
        (testValidArrayKeys.testArrayPutGet):
        * storage/indexeddb/resources/prefetch-invalidation.js:
        (cursorRequest.onsuccess):
        (continue50Times):
        (continue100Times): Deleted.
        * storage/indexeddb/resources/storage-limit.js: Added.
        (prepareDatabase):
        (onOpenSuccess.request.onerror):
        (onOpenSuccess.request.onsuccess):
        (onOpenSuccess):
        * storage/indexeddb/storage-limit-expected.txt: Added.
        * storage/indexeddb/storage-limit.html: Added.

2018-11-01  Chris Dumez  <cdumez@apple.com>

        Unreviewed, mark a couple of newly imported WPT tests as flaky on Mac WK1.

        * platform/mac-wk1/TestExpectations:

2018-11-01  Justin Michaud  <justin_michaud@apple.com>

        CSS Custom Properties API Should Support syntax="*" and "<length>", and handle cycles properly
        https://bugs.webkit.org/show_bug.cgi?id=191042

        Reviewed by Antti Koivisto.

        * css-custom-properties-api/crash-expected.txt: Added.
        * css-custom-properties-api/crash.html: Added.
        * css-custom-properties-api/cycles-expected.txt: Added.
        * css-custom-properties-api/cycles.html: Added.
        * css-custom-properties-api/inline-expected.txt: Added.
        * css-custom-properties-api/inline.html: Added.

2018-11-01  Guillaume Emont  <guijemont@igalia.com>

        Skip tests on arm/mips that time out now we're running on CLoop

        Unreviewed gardening.

        Since the JIT is temporarily disabled on 32-bit platforms, these tests
        time out on the bots and need to be disabled. There's more tests
        disabled on arm because the timeout is longer on the mips bot (as the
        device is slower to start with), so many of the tests don't time out
        there.

        * js/script-tests/regress-139548.js: disable on arm and mips.

2018-11-01  Devin Rousso  <drousso@apple.com>

        Web Inspector: fix debug WK1 test failures for WI.ObjectStore
        https://bugs.webkit.org/show_bug.cgi?id=191158

        Reviewed by Joseph Pecoraro.

        * inspector/unit-tests/objectStore/delete.html:
        * inspector/unit-tests/objectStore/deleteObject.html:
        * inspector/unit-tests/objectStore/resources/objectStore-utilities.js:
        (TestPage.registerInitializer):

2018-11-01  Said Abou-Hallawa  <sabouhallawa@apple.com>

        [CG] Adopt CG SPI for non-even cornered rounded rects
        https://bugs.webkit.org/show_bug.cgi?id=190155

        Reviewed by Simon Fraser.

        This test fails on iOS simulator because of just one pixel difference
        between drawing a shadow of the element and drawing a copy of the element.
        This failure happens on iOS and does not happen on macOS because we don't 
        use accelerated drawing for macOS testing but we use it for iOS testing.

        * platform/ios/TestExpectations:

2018-11-01  Chris Dumez  <cdumez@apple.com>

        [PSON] Unable to submit a file in FormData cross-site
        https://bugs.webkit.org/show_bug.cgi?id=191138

        Reviewed by Alex Christensen.

        Add layout test coverage.

        * http/tests/misc/form-submit-file-cross-site-expected.txt:
        * http/tests/misc/form-submit-file-cross-site.html:

2018-11-01  Devin Rousso  <drousso@apple.com>

        Unreviewed test fix after r237670.

        * inspector/canvas/setRecordingAutoCaptureFrameCount-expected.txt:
        * inspector/canvas/setRecordingAutoCaptureFrameCount.html:
        Make the `CanvasAdded` event listener synchronous, so it won't miss the `RecordingStarted`
        or `RecordingStopped` events, since `awaitEvent` evaluates on the next tick.

2018-10-31  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for inline-block elements.
        https://bugs.webkit.org/show_bug.cgi?id=191143

        Reviewed by Antti Koivisto.

        * fast/inline/simple-inline-block-expected.txt: Added.
        * fast/inline/simple-inline-block.html: Added.
        * platform/ios/TestExpectations:

2018-11-01  YUHAN WU  <yuhan_wu@apple.com>

        MediaRecorder should fire dataavailable event when all tracks are ended and stop() is called
        https://bugs.webkit.org/show_bug.cgi?id=190778
        <rdar://problem/45703574>

        Reviewed by Youenn Fablet.

        Remove share FileReader object between three asynchronous tests which might cause flaky failure.
        We will need to fix all the falky failures in this test after we implement timeslice.

        * http/wpt/mediarecorder/MediaRecorder-mock-dataavailable.html:

2018-10-31  Devin Rousso  <drousso@apple.com>

        Web Inspector: Canvas: create a setting for auto-recording newly created contexts
        https://bugs.webkit.org/show_bug.cgi?id=190856

        Reviewed by Brian Burg.

        * inspector/canvas/resources/recording-utilities.js:
        (TestPage.registerInitializer.window.startRecording):
        (TestPage.registerInitializer.handleRecordingProgress):
        * inspector/canvas/recording-2d.html:
        * inspector/canvas/recording-bitmaprenderer.html:
        * inspector/canvas/recording-webgl-snapshots.html:
        * inspector/canvas/recording-webgl.html:

        * inspector/canvas/setRecordingAutoCaptureFrameCount-expected.txt: Added.
        * inspector/canvas/setRecordingAutoCaptureFrameCount.html: Added.

2018-10-31  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: save imported audits across WebInspector sessions
        https://bugs.webkit.org/show_bug.cgi?id=190858
        <rdar://problem/45527625>

        Reviewed by Brian Burg.

        * inspector/unit-tests/objectStore/add-expected.txt: Added.
        * inspector/unit-tests/objectStore/add.html: Added.
        * inspector/unit-tests/objectStore/addObject-expected.txt: Added.
        * inspector/unit-tests/objectStore/addObject.html: Added.
        * inspector/unit-tests/objectStore/basic-expected.txt: Added.
        * inspector/unit-tests/objectStore/basic.html: Added.
        * inspector/unit-tests/objectStore/delete-expected.txt: Added.
        * inspector/unit-tests/objectStore/delete.html: Added.
        * inspector/unit-tests/objectStore/deleteObject-expected.txt: Added.
        * inspector/unit-tests/objectStore/deleteObject.html: Added.
        * inspector/unit-tests/objectStore/resources/objectStore-utilities.js: Added.
        (TestPage.registerInitializer.InspectorTest.ObjectStore.TestObject):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.TestObject.prototype.toJSON):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.createSuite):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.createObjectStore):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.add):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.addObject):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.delete):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.deleteObject):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.logValues):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.wrapTest):

2018-10-31  Alicia Boya Garc√≠a  <aboya@igalia.com>

        [MSE] Use tolerance when growing the coded frame group
        https://bugs.webkit.org/show_bug.cgi?id=190085

        Reviewed by Jer Noble.

        A test simulating unordered appends with imprecise timestamps,
        overlapping <1ms (replicating a typical WebM 30fps video file) is
        added.

        * media/media-source/media-source-append-acb-tolerance.html: Added.

2018-10-31  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: attempt to re-link DOM nodes for imported results
        https://bugs.webkit.org/show_bug.cgi?id=191044
        <rdar://problem/45687364>

        Reviewed by Brian Burg.

        * inspector/model/auditTestCase.html:
        * inspector/model/auditTestCaseResult.html:
        * inspector/model/auditTestGroup.html:
        * inspector/model/auditTestGroupResult.html:

2018-10-31  Jer Noble  <jer.noble@apple.com>

        MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L60.B0') is inproperly rejected
        https://bugs.webkit.org/show_bug.cgi?id=191129

        Reviewed by Eric Carlson.

        * media/media-source/media-source-istypesupported-case-sensitive-expected.txt: Added.
        * media/media-source/media-source-istypesupported-case-sensitive.html: Added.

2018-10-31  Alicia Boya Garc√≠a  <aboya@igalia.com>

        [MSE] WebKit tests: Use fixed point in makeASample()
        https://bugs.webkit.org/show_bug.cgi?id=191128

        Reviewed by Jer Noble.

        This patch modifies the utility function makeASample() so as to accept
        time values in arbitrary time scales.

        Previously makeASample() accepted optionally a time scale, but still
        required to receive all time values as seconds, therefore requiring a
        division at call time in order to use the function, which could cause
        rounding errors (see https://bugs.webkit.org/show_bug.cgi?id=190085#c20).

        * media/media-source/media-source-append-acb-no-frame-lost-expected.txt:
        * media/media-source/media-source-append-acb-no-frame-lost.html:
        * media/media-source/media-source-append-buffer-with-append-window.html:
        * media/media-source/media-source-append-media-segment-without-init.html:
        * media/media-source/media-source-append-nonsync-sample-after-abort.html:
        * media/media-source/media-source-append-out-of-order.html:
        * media/media-source/media-source-append-overlapping-dts-expected.txt:
        * media/media-source/media-source-append-overlapping-dts.html:
        * media/media-source/media-source-canplaythrough.html:
        * media/media-source/media-source-duplicate-seeked.html:
        * media/media-source/media-source-duration-after-append.html:
        * media/media-source/media-source-end-of-stream-buffered.html:
        * media/media-source/media-source-end-of-stream-readyState.html:
        * media/media-source/media-source-fastseek.html:
        * media/media-source/media-source-fudge-factor.html:
        * media/media-source/media-source-monitor-source-buffers.html:
        * media/media-source/media-source-overlapping-append-buffered.html:
        * media/media-source/media-source-overlapping-append-expected.txt:
        * media/media-source/media-source-overlapping-append.html:
        * media/media-source/media-source-overlapping-decodetime-expected.txt:
        * media/media-source/media-source-overlapping-decodetime.html:
        * media/media-source/media-source-play.html:
        * media/media-source/media-source-range-end-frame-not-removed-expected.txt:
        * media/media-source/media-source-range-end-frame-not-removed.html:
        * media/media-source/media-source-range-start-frame-replaced-expected.txt:
        * media/media-source/media-source-range-start-frame-replaced.html:
        * media/media-source/media-source-remove-decodeorder-crash.html:
        * media/media-source/media-source-remove-too-much.html:
        * media/media-source/media-source-remove.html:
        * media/media-source/media-source-restrictions.html:
        * media/media-source/media-source-sample-wrong-track-id.html:
        * media/media-source/media-source-seek-back-expected.txt:
        * media/media-source/media-source-seek-back.html:
        * media/media-source/media-source-seek-complete.html:
        * media/media-source/media-source-sequence-timestamps-expected.txt:
        * media/media-source/media-source-sequence-timestamps.html:
        * media/media-source/media-source-small-gap.html:
        * media/media-source/media-source-timeoffset-expected.txt:
        * media/media-source/media-source-timeoffset.html:
        * media/media-source/media-source-timestampoffset-rounding-error.html:
        * media/media-source/media-source-timestampoffset-then-zero-expected.txt:
        * media/media-source/media-source-timestampoffset-then-zero.html:
        * media/media-source/media-source-video-playback-quality.html:
        * media/media-source/mock-media-source.js:
        (makeASample):

2018-10-31  YUHAN WU  <yuhan_wu@apple.com>

        MediaRecorder should fire dataavailable event when all tracks are ended and stop() is called
        https://bugs.webkit.org/show_bug.cgi?id=190778
        <rdar://problem/45703574>

        Reviewed by Youenn Fablet.

        Increase the timer of recording to 2 seconds until we support timeslice in order to reduce flakiness.

        * http/wpt/mediarecorder/MediaRecorder-dataavailable.html:
        * http/wpt/mediarecorder/MediaRecorder-mock-dataavailable.html:

2018-10-31  Zach Li  <zacharyli323@gmail.com>

        Add credit card autofill button
        https://bugs.webkit.org/show_bug.cgi?id=191051
        <rdar://problem/45657011>

        Reviewed by Wenson Hsieh.

        * fast/forms/auto-fill-button/input-credit-card-auto-fill-button-expected.txt: Added.
        * fast/forms/auto-fill-button/input-credit-card-auto-fill-button.html: Added.
        * fast/forms/auto-fill-button/last-auto-fill-button-type-expected.txt:
        * fast/forms/auto-fill-button/last-auto-fill-button-type.html:
        * platform/ios-simulator/fast/forms/auto-fill-button/input-credit-card-auto-fill-button-expected.txt: Added.
        * platform/mac/fast/forms/auto-fill-button/input-credit-card-auto-fill-button-expected.png: Added.
        * platform/win/fast/forms/auto-fill-button/input-credit-card-auto-fill-button-expected.txt: Added.

2018-10-31  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: show metadata for results
        https://bugs.webkit.org/show_bug.cgi?id=190853
        <rdar://problem/45527623>

        Reviewed by Brian Burg.

        * inspector/model/auditTestCaseResult-expected.txt:
        * inspector/model/auditTestCaseResult.html:
        * inspector/model/auditTestGroupResult-expected.txt:
        * inspector/model/auditTestGroupResult.html:
        * inspector/unit-tests/string-utilities-expected.txt:
        * inspector/unit-tests/string-utilities.html:

2018-10-31  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Don't reveal device IDs until the user has granted permission to capture
        https://bugs.webkit.org/show_bug.cgi?id=191112
        <rdar://problem/45699932>

        Reviewed by Youenn Fablet.

        * TestExpectations: Skip http/tests/media/media-stream/enumerate-devices-source-id-persistent.html
        and http/tests/media/media-stream/enumerate-devices-source-id.html for now, they don't make sense
        with these changes and will be updated to pass in a future patch.
        * fast/mediastream/MediaStreamTrack-getCapabilities.html:
        * fast/mediastream/get-user-media-device-id-expected.txt:
        * fast/mediastream/get-user-media-device-id.html:

2018-10-31  YUHAN WU  <yuhan_wu@apple.com>

        MediaRecorder should fire dataavailable event when all tracks are ended and stop() is called
        https://bugs.webkit.org/show_bug.cgi?id=190778

        Reviewed by Youenn Fablet.

        These tests are used to check if MediaRecorder can generate both video and audio buffers through mock source.

        * http/wpt/mediarecorder/MediaRecorder-dataavailable-expected.txt: Added.
        * http/wpt/mediarecorder/MediaRecorder-dataavailable.html: Added.
        * http/wpt/mediarecorder/MediaRecorder-mock-dataavailable-expected.txt: Added.
        * http/wpt/mediarecorder/MediaRecorder-mock-dataavailable.html: Added.
        * platform/win/TestExpectations:

2018-10-31  Chris Dumez  <cdumez@apple.com>

        [PSON] When process-swapping for a POST request the HTTP body gets dropped
        https://bugs.webkit.org/show_bug.cgi?id=191046
        <rdar://problem/45229732>

        Reviewed by Alex Christensen.

        Add layout test coverage.

        * http/tests/misc/form-post-textplain-cross-site-expected.txt: Added.
        * http/tests/misc/form-post-textplain-cross-site.html: Added.

2018-10-30  David Kilzer  <ddkilzer@apple.com>

        XSLTProcessor should limit max transform depth
        <https://webkit.org/b/191075>
        <rdar://problem/45531453>

        Reviewed by Alex Christensen.

        * fast/xsl/xslt-max-depth-expected.txt: Added.
        * fast/xsl/xslt-max-depth.html: Added.

2018-10-30  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: create Audit Tab
        https://bugs.webkit.org/show_bug.cgi?id=190754

        Reviewed by Matt Baker.

        * inspector/audit/resources/audit-utilities.js: Added.
        * inspector/audit/basic-expected.txt: Added.
        * inspector/audit/basic.html: Added.
        * inspector/audit/data-domAttributes-expected.txt: Added.
        * inspector/audit/data-domAttributes.html: Added.
        * inspector/audit/data-domNodes-expected.txt: Added.
        * inspector/audit/data-domNodes.html: Added.
        * inspector/audit/data-errors-expected.txt: Added.
        * inspector/audit/data-errors.html: Added.
        * inspector/model/auditTestCase-expected.txt: Added.
        * inspector/model/auditTestCase.html: Added.
        * inspector/model/auditTestCaseResult-expected.txt: Added.
        * inspector/model/auditTestCaseResult.html: Added.
        * inspector/model/auditTestGroup-expected.txt: Added.
        * inspector/model/auditTestGroup.html: Added.
        * inspector/model/auditTestGroupResult-expected.txt: Added.
        * inspector/model/auditTestGroupResult.html: Added.
        * inspector/unit-tests/promise-utilities-expected.txt: Added.
        * inspector/unit-tests/promise-utilities.html: Added.

        * inspector/audit/audit-manager-expected.txt: Removed.
        * inspector/audit/audit-manager.html: Removed.
        * inspector/audit/audit-report-expected.txt: Removed.
        * inspector/audit/audit-report.html: Removed.
        * inspector/audit/audit-test-case-expected.txt: Removed.
        * inspector/audit/audit-test-case.html: Removed.
        * inspector/audit/audit-test-suite-expected.txt: Removed.
        * inspector/audit/audit-test-suite.html: Removed.
        * inspector/audit/resources/audit-test-fixtures.js: Removed.

2018-10-30  Dawei Fenton  <realdawei@apple.com>

        WebGL conformance: Failures and Timeouts in suite 2.0.0/conformance
        https://bugs.webkit.org/show_bug.cgi?id=189641

        Unreviewed.

        * platform/ios-wk2/TestExpectations: Mark test as [ Slow ]

2018-10-30  Devin Rousso  <drousso@apple.com>

        Web Inspector: provide options to WI.cssPath for more verbosity
        https://bugs.webkit.org/show_bug.cgi?id=190987

        Reviewed by Brian Burg.

        * inspector/dom/domutilities-csspath.html:

2018-10-30  Ali Juma  <ajuma@chromium.org>

        Calling window.open("", "_self") allows working around restrictions on window.close()
        https://bugs.webkit.org/show_bug.cgi?id=191073

        Reviewed by Chris Dumez.

        * fast/dom/Window/window-open-self-disallow-close-expected.txt: Added.
        * fast/dom/Window/window-open-self-disallow-close.html: Added.

2018-10-30  Andy Estes  <aestes@apple.com>

        [Payment Request] Implement PaymentResponse.retry()
        https://bugs.webkit.org/show_bug.cgi?id=190985

        Reviewed by Daniel Bates

        * http/tests/paymentrequest/payment-address-attributes-and-toJSON-method.https.html:
        * http/tests/paymentrequest/payment-response-complete-method.https.html:
        * http/tests/paymentrequest/payment-response-methodName-attribute.https.html:
        * http/tests/paymentrequest/payment-response-payerEmail-attribute.https.html:
        * http/tests/paymentrequest/payment-response-payerName-attribute.https.html:
        * http/tests/paymentrequest/payment-response-payerPhone-attribute.https.html:
        * http/tests/paymentrequest/payment-response-rejects-if-not-active.https-expected.txt: Added.
        * http/tests/paymentrequest/payment-response-rejects-if-not-active.https.html: Copied from
        imported/w3c/web-platform-tests/payment-request/payment-response/rejects_if_not_active-manual.https.html
        and automated using internals.mockPaymentCoordinator.
        * http/tests/paymentrequest/payment-response-retry-method.https-expected.txt: Added.
        * http/tests/paymentrequest/payment-response-retry-method.https.html: Copied from
        imported/w3c/web-platform-tests/payment-request/payment-response/retry-method-manual.https.html
        and automated using internals.mockPaymentCoordinator.
        * http/tests/paymentrequest/resources/helpers.js:
        (setUpAndSmokeTest):

2018-10-30  Andy Estes  <aestes@apple.com>

        [Apple Pay] PaymentRequest.canMakePayment() should resolve to true whenever Apple Pay is available
        https://bugs.webkit.org/show_bug.cgi?id=191039

        Reviewed by Megan Gardner.

        * http/tests/paymentrequest/payment-request-canmakepayment-method.https-expected.txt:
        * http/tests/paymentrequest/payment-request-canmakepayment-method.https.html:

2018-10-30  Dawei Fenton  <realdawei@apple.com>

        [ Mojave Debug ] Layout Test http/tests/workers/service/self_registration.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=190828

        Unreviewed.

        * platform/mac-wk2/TestExpectations: Mark test as flay.

2018-10-30  Sihui Liu  <sihui_liu@apple.com>

        Add a deprecation warning to console for Web SQL
        https://bugs.webkit.org/show_bug.cgi?id=190936

        Reviewed by Ryosuke Niwa.

        Rebaseline the tests that are affected by the added console message.

        * fast/dom/MutationObserver/database-callback-delivery-expected.txt:
        * fast/frames/sandboxed-iframe-storage-expected.txt:
        * fast/history/page-cache-webdatabase-no-transaction-db-expected.txt:
        * http/tests/security/cross-origin-websql-allowed-expected.txt:
        * http/tests/security/cross-origin-websql-expected.txt:
        * http/tests/security/same-origin-websql-blocked-expected.txt:
        * http/tests/security/storage-blocking-loosened-websql-expected.txt:
        * http/tests/security/storage-blocking-strengthened-websql-expected.txt:
        * http/tests/storage/callbacks-are-called-in-correct-context-expected.txt:
        * inspector/runtime/CommandLineAPI-inspect-expected.txt:
        * js/dom/callback-function-with-handle-event-expected.txt:
        * js/dom/exceptions-thrown-in-callbacks-expected.txt:
        * storage/websql/alter-to-info-table-expected.txt:
        * storage/websql/change-version-expected.txt:
        * storage/websql/change-version-handle-reuse-expected.txt:
        * storage/websql/change-version-no-crash-on-preflight-failure-expected.txt:
        * storage/websql/close-during-stress-test-expected.txt:
        * storage/websql/database-lock-after-reload-expected.txt:
        * storage/websql/empty-statement-expected.txt:
        * storage/websql/execute-sql-args-expected.txt:
        * storage/websql/execute-sql-rowsAffected-expected.txt:
        * storage/websql/executesql-accepts-only-one-statement-expected.txt:
        * storage/websql/hash-change-with-xhr-expected.txt:
        * storage/websql/multiple-databases-garbage-collection-expected.txt:
        * storage/websql/multiple-transactions-expected.txt:
        * storage/websql/multiple-transactions-on-different-handles-expected.txt:
        * storage/websql/null-callbacks-expected.txt:
        * storage/websql/open-database-creation-callback-expected.txt:
        * storage/websql/open-database-creation-callback-isolated-world-expected.txt:
        * storage/websql/open-database-empty-version-expected.txt:
        * storage/websql/open-database-expand-quota-expected.txt:
        * storage/websql/open-database-over-quota-expected.txt:
        * storage/websql/open-database-set-empty-version-expected.txt:
        * storage/websql/open-database-while-transaction-in-progress-expected.txt:
        * storage/websql/private-browsing-noread-nowrite-expected.txt:
        * storage/websql/read-and-write-transactions-dont-run-together-expected.txt:
        * storage/websql/read-transactions-running-concurrently-expected.txt:
        * storage/websql/sql-data-types-expected.txt:
        * storage/websql/statement-error-callback-expected.txt:
        * storage/websql/statement-error-callback-isolated-world-expected.txt:
        * storage/websql/statement-success-callback-isolated-world-expected.txt:
        * storage/websql/success-callback-expected.txt:
        * storage/websql/success-callback-when-page-defers-loading-expected.txt:
        * storage/websql/test-authorizer-expected.txt:
        * storage/websql/transaction-callback-exception-crash-expected.txt:
        * storage/websql/transaction-callback-isolated-world-expected.txt:
        * storage/websql/transaction-database-expand-quota-expected.txt:
        * storage/websql/transaction-error-callback-expected.txt:
        * storage/websql/transaction-error-callback-isolated-world-expected.txt:
        * storage/websql/transaction-prototype-expected.txt:
        * storage/websql/transaction-success-callback-isolated-world-expected.txt:

2018-10-30  Sihui Liu  <sihui_liu@apple.com>

        IndexedDB: iteration of cursors skip records if updated or deleted
        https://bugs.webkit.org/show_bug.cgi?id=190917
        <rdar://problem/35250410>

        Reviewed by Chris Dumez.

        * storage/indexeddb/cursor-update-while-iterating-expected.txt: Added.
        * storage/indexeddb/cursor-update-while-iterating.html: Added.
        * storage/indexeddb/resources/cursor-update-while-iterating.js: Added.
        (prepareDatabase):
        (onOpenSuccess.request.onsuccess):
        (onOpenSuccess):

2018-10-28  Antoine Quint  <graouts@apple.com>

        [Web Animations] Implement the update animations and send events procedure
        https://bugs.webkit.org/show_bug.cgi?id=191013
        <rdar://problem/45620495>

        Reviewed by Dean Jackson.

        Several tests that broke when turning Web Animations CSS Integration on by default are now passing. In the case of one test, we had to ensure
        that the final animation frame had been committed before terminating the test or there would be a tiny image reference issue.

        * TestExpectations:
        * fast/layers/no-clipping-overflow-hidden-added-after-transform.html:

2018-10-30  Youenn Fablet  <youenn@apple.com>

        LibWebRTCRtpReceiverBackend::getSynchronizationSources should use Vector::append
        https://bugs.webkit.org/show_bug.cgi?id=191026

        Reviewed by Eric Carlson.

        * webrtc/video-addTransceiver-expected.txt:
        * webrtc/video-addTransceiver.html:

2018-10-29  Devin Rousso  <drousso@apple.com>

        Web Inspector: refactor code for getting properties via WI.RemoteObject
        https://bugs.webkit.org/show_bug.cgi?id=190989

        Reviewed by Matt Baker.

        * http/tests/inspector/paymentrequest/payment-request-internal-properties.https.html:
        * inspector/debugger/breakpoint-scope.html:
        * inspector/debugger/paused-scopes.html:
        * inspector/debugger/tail-deleted-frames-from-vm-entry.html:
        * inspector/debugger/tail-deleted-frames.html:
        * inspector/debugger/tail-recursion.html:
        * inspector/model/remote-object-fake-object.html:
        * inspector/model/remote-object-get-properties.html:

2018-10-29  Justin Michaud  <justin_michaud@apple.com>

        Revert r237347 registered custom properties... https://bugs.webkit.org/show_bug.cgi?id=190039
        https://bugs.webkit.org/show_bug.cgi?id=190919

        Reviewed by Michael Saboff.

        * css-custom-properties-api/crash-expected.txt: Removed.
        * css-custom-properties-api/crash.html: Removed.
        * css-custom-properties-api/cycles-expected.txt: Removed.
        * css-custom-properties-api/cycles.html: Removed.
        * css-custom-properties-api/inline-expected.txt: Removed.
        * css-custom-properties-api/inline.html: Removed.

2018-10-29  Matt Lewis  <jlewis3@apple.com>

        Marked http/tests/misc/large-js-program.php as a flaky timeout.
        https://bugs.webkit.org/show_bug.cgi?id=190724

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2018-10-29  Youenn Fablet  <youenn@apple.com>

        Handle MDNS resolution of candidates through libwebrtc directly
        https://bugs.webkit.org/show_bug.cgi?id=190681

        Reviewed by Eric Carlson.

        * TestExpectations:
        Test should no longer be flaky as we no longer enforce a timer for resolving MDNS candidates.

2018-10-29  Tim Horton  <timothy_horton@apple.com>

        Modernize WebKit nibs and lprojs for localization's sake
        https://bugs.webkit.org/show_bug.cgi?id=190911
        <rdar://problem/45349466>

        Reviewed by Dan Bernstein.

        * media/modern-media-controls/localized-strings/replaced-string.html:
        English->en

2018-10-29  Youenn Fablet  <youenn@apple.com>

        Invalid ssrc value in the stats of type 'inbound-rtp'
        https://bugs.webkit.org/show_bug.cgi?id=190826
        <rdar://problem/45487435>

        Reviewed by Eric Carlson.

        * webrtc/video-mediastreamtrack-stats.html:
        * webrtc/video-stats-expected.txt:
        * webrtc/video-stats.html:

2018-10-29  Ali Juma  <ajuma@chromium.org>

        Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=191002

        Make expectations for IntersectionObserver WPTs more specific.

        * TestExpectations:
        * platform/gtk/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-10-29  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Compute estimated margin top for inline formatting root's ancestors
        https://bugs.webkit.org/show_bug.cgi?id=191018

        Reviewed by Antti Koivisto.

        * fast/inline/simple-intruding-floats3-expected.txt: Added.
        * fast/inline/simple-intruding-floats3.html: Added.
        * platform/ios/TestExpectations:

2018-10-29  Zalan Bujtas  <zalan@apple.com>

        [LFC] Add support for inflow non replaced content height when the box is an inline formatting root.
        https://bugs.webkit.org/show_bug.cgi?id=191011

        Reviewed by Antti Koivisto.

        * fast/inline/simple-intruding-floats2-expected.txt: Added.
        * fast/inline/simple-intruding-floats2.html: Added.
        * platform/ios/TestExpectations:

2018-10-29  Zalan Bujtas  <zalan@apple.com>

        Missing from r237549

        Reviewed by Antti Koivisto.

        * platform/ios/TestExpectations:

2018-10-29  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for simple intruding floats.
        https://bugs.webkit.org/show_bug.cgi?id=190998

        Reviewed by Antti Koivisto.

        * fast/inline/simple-intruding-float1-expected.txt: Added.
        * fast/inline/simple-intruding-float1.html: Added.
        * platform/ios/TestExpectations:

2018-10-29  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Inline layout produces separate runs when float is present.
        https://bugs.webkit.org/show_bug.cgi?id=190980

        Reviewed by Antti Koivisto.

        * fast/block/basic/inline-content-with-floating-images2-expected.txt: Added.
        * fast/block/basic/inline-content-with-floating-images2.html: Added.
        * platform/ios/TestExpectations:

2018-10-29  Tadeu Zagallo  <tzagallo@apple.com>

        New bytecode format for JSC
        https://bugs.webkit.org/show_bug.cgi?id=187373
        <rdar://problem/44186758>

        Reviewed by Filip Pizlo.

        Don't use recursion on `equal` to avoid premature stack overflows when testing deep arrays.

        * fast/dom/Window/resources/postmessage-test.js:

2018-10-28  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed, one more GTK expectations fix

        * platform/gtk/inspector/canvas/recording-bitmaprenderer-expected.txt:

2018-10-28  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed, fix a few more expectations from yesterday

        These should be timeouts!

        * platform/gtk/TestExpectations:

2018-10-28  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed, attempt to fix missing trailing whitespace in new expectations

        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt:
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt:
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt:

2018-10-27  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed, fix content added by a stray Ctrl+V

        * platform/gtk/TestExpectations:

2018-10-27  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed GTK test gardening

        * TestExpectations:
        * platform/gtk/TestExpectations:
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt: Added.
        * platform/gtk/inspector/canvas/recording-bitmaprenderer-expected.txt: Added.

2018-10-27  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Table should support deleting rows
        https://bugs.webkit.org/show_bug.cgi?id=189803
        <rdar://problem/44655709>

        Reviewed by Devin Rousso.

        * inspector/table/resources/table-utilities.js:
        (TestPage.registerInitializer.InspectorTest.TableDelegate.prototype.tableDidRemoveRows):
        (TestPage.registerInitializer.createDataSource):
        (TestPage.registerInitializer.InspectorTest.createTable):
        (TestPage.registerInitializer.InspectorTest.createTableWithDelegate):
        (TestPage.registerInitializer):
        Update table test utilities to keep TableDataSource backing array in
        sync when rows are removed. Also allow the number of table rows to be
        specified when creating a table for testing.

        * inspector/table/table-remove-rows-expected.txt: Added.
        * inspector/table/table-remove-rows.html: Added.
        Add tests for new Table methods `removeRow(rowIndex)` and `removeSelectedRows()`.

        * inspector/unit-tests/index-set-expected.txt:
        * inspector/unit-tests/index-set.html:
        Add tests for new IndexSet method `copy()`.

2018-10-26  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r237479 and r237484.
        https://bugs.webkit.org/show_bug.cgi?id=190978

        broke JSC on iOS (Requested by tadeuzagallo on #webkit).

        Reverted changesets:

        "New bytecode format for JSC"
        https://bugs.webkit.org/show_bug.cgi?id=187373
        https://trac.webkit.org/changeset/237479

        "Gardening: Build fix after r237479."
        https://bugs.webkit.org/show_bug.cgi?id=187373
        https://trac.webkit.org/changeset/237484

2018-10-26  Tadeu Zagallo  <tzagallo@apple.com>

        New bytecode format for JSC
        https://bugs.webkit.org/show_bug.cgi?id=187373
        <rdar://problem/44186758>

        Reviewed by Filip Pizlo.

        Don't use recursion on `equal` to avoid premature stack overflows when testing deep arrays.

        * fast/dom/Window/resources/postmessage-test.js:

2018-10-26  Antoine Quint  <graouts@apple.com>

        [Web Animations] Remove useless internals methods
        https://bugs.webkit.org/show_bug.cgi?id=190968

        Reviewed by Dean Jackson.

        Remove a test that is no longer useful.

        * webanimations/animation-creation-addition-expected.txt: Removed.
        * webanimations/animation-creation-addition.html: Removed.

2018-10-26  Per Arne Vollan  <pvollan@apple.com>

        [High Sierra/Sierra Release] Layout Test media/track/track-cue-css.html is a flaky image failure
        https://bugs.webkit.org/show_bug.cgi?id=190876

        Unreviewed test fix.

        This is a speculative flakiness fix.

        * media/track/track-cue-css-expected.html:
        * media/track/track-cue-css.html:

2018-10-26  Zalan Bujtas  <zalan@apple.com>

        [iOS] Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-10-26  Ali Juma  <ajuma@chromium.org>

        [GTK] Unreviewed test gardening.
        https://bugs.webkit.org/show_bug.cgi?id=190962

        Add a baseline for the test added in r237449.

        * platform/gtk/fast/repaint/text-selection-overflow-hidden-expected.txt: Added.

2018-10-26  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Layout floats as part of the inline content
        https://bugs.webkit.org/show_bug.cgi?id=190942

        Reviewed by Antti Koivisto.

        * fast/block/basic/inline-content-with-floating-image-expected.txt: Added.
        * fast/block/basic/inline-content-with-floating-image.html: Added.

2018-10-26  Alicia Boya Garc√≠a  <aboya@igalia.com>

        [MSE][WTF][Media] Invalid MediaTime should be falsy
        https://bugs.webkit.org/show_bug.cgi?id=190893

        Reviewed by Jer Noble.

        A test is added that replicates a bug fixed by this patch.

        * media/media-source/media-source-timestampoffset-then-zero-expected.txt: Added.
        * media/media-source/media-source-timestampoffset-then-zero.html: Added.

2018-10-26  Ali Juma  <ajuma@chromium.org>

        REGRESSION (r237255): Text selection is broken in form fields
        https://bugs.webkit.org/show_bug.cgi?id=190899

        Reviewed by Ryosuke Niwa.

        Add layout test coverage.

        * fast/repaint/text-selection-overflow-hidden-expected.txt: Added.
        * fast/repaint/text-selection-overflow-hidden.html: Added.
        * platform/win/fast/repaint/text-selection-overflow-hidden-expected.txt: Added.

2018-10-25  Ryan Haddad  <ryanhaddad@apple.com>

        Layout Test http/tests/websocket/tests/hybi/handshake-ok-with-legacy-sec-websocket-response-headers.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=173041

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.

2018-10-25  Devin Rousso  <drousso@apple.com>

        Web Inspector: Canvas Recording loading goes significantly slower when "Frame" tree element is expanded
        https://bugs.webkit.org/show_bug.cgi?id=190497

        Reviewed by Joseph Pecoraro.

        * inspector/unit-tests/set-utilities-expected.txt: Added.
        * inspector/unit-tests/set-utilities.html: Added.

2018-10-25  Dawei Fenton  <realdawei@apple.com>

        Layout Test compositing/iframes/display-none-subframe.html is a flaky failure.
        https://bugs.webkit.org/show_bug.cgi?id=186406

        Unreviewed.

        * platform/mac-wk1/TestExpectations: Mark test flaky.

2018-10-25  Devin Rousso  <drousso@apple.com>

        Web Inspector: display fullscreen enter/exit events in Timelines and Network node waterfalls
        https://bugs.webkit.org/show_bug.cgi?id=189874
        <rdar://problem/44700000>

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/dom/didFireEvent-expected.txt:
        * http/tests/inspector/dom/didFireEvent.html:

2018-10-25  Alexey Proskuryakov  <ap@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=175597
        XMLHttpRequest should not sniff content encoding

        Actually, the discussion in Bugzilla claims that it should always have worked on
        iOS. Not sure why the test was not enabled from the start.

        * platform/ios/TestExpectations:

2018-10-25  Alexey Proskuryakov  <ap@apple.com>

        Update test results for https://bugs.webkit.org/show_bug.cgi?id=175597
        XMLHttpRequest should not sniff content encoding

        This code doesn't work like planned on macOS High Sierra, and I'm not sure what's
        up with iOS and other platforms. But I can to re-enable the test for Mojave.

        * platform/mac/TestExpectations: As expected, this test is passing on macOS Mojave.

2018-10-25  Per Arne Vollan  <pvollan@apple.com>

        [High Sierra/Sierra Release] Layout Test media/track/track-cue-css.html is a flaky image failure
        https://bugs.webkit.org/show_bug.cgi?id=190876

        Reviewed by Alexey Proskuryakov.

        This is a speculative fix; avoid an unnecessary video seek step in test.

        * media/track/track-cue-css-expected.html:
        * media/track/track-cue-css.html:

2018-10-25  Chris Dumez  <cdumez@apple.com>

        REGRESSION (236779) scandinaviandesigns.com product pages auto redirect to product image
        https://bugs.webkit.org/show_bug.cgi?id=190891
        <rdar://problem/45296796>

        Reviewed by Antti Koivisto.

        Add layout test coverage.

        * fast/dom/HTMLInputElement/radio-element-fires-change-event-only-when-checked-state-changes-expected.txt: Added.
        * fast/dom/HTMLInputElement/radio-element-fires-change-event-only-when-checked-state-changes.html: Added.

2018-10-25  Frederic Wang  <fwang@igalia.com>

        Unreviewed test gardening.

        * platform/ios-wk1/TestExpectations: Add failures for tests requiring findString.
        * platform/ios-wk1/fast/scrolling/adjust-scroll-offset-on-zoom-expected.txt: Added. Adjust
        expectation to handle whitespace difference.
        * platform/ios-wk1/fast/scrolling/scrolling-tree-includes-frame-expected.txt: Added. The
        scrolling tree is not displayed on WK1.

2018-10-25  Frederic Wang  <fwang@igalia.com>

        Add more tests for the Find UI
        https://bugs.webkit.org/show_bug.cgi?id=190823

        Reviewed by Antonio Gomes.

        We add more tests for iOS's find UI to cover cases fixed by r224284. Equivalent tests for
        subframes currently fails when frame flattening is disabled, they will be handled in bug
        184297.

        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position-expected.png: Added.
        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position-expected.txt: Added.
        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position-limit-expected.png: Added.
        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position-limit-expected.txt: Added.
        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position-limit.html: Added.
        Test with a match at the limit of the scrolling element.
        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position.html: Added. Test
        with a match at the middle of the scrolling element.
        * platform/ios/fast/scrolling/find-text-in-overflow-node.html: Use names for parameters to
        make it more explicit.
        * platform/ios/fast/scrolling/find-text-in-subframe-expected.txt: Added.
        * platform/ios/fast/scrolling/find-text-in-subframe.html: Added. Test with a subframe instead
        of an overflow node.

2018-10-25  Jiewen Tan  <jiewen_tan@apple.com>

        [WPT] Update resource-timing WPT tests to use the right cross origin
        https://bugs.webkit.org/show_bug.cgi?id=190554

        Reviewed by Youenn Fablet.

        * TestExpectations:

2018-10-24  Tim Horton  <timothy_horton@apple.com>

        Attachment filenames with RTL characters should format similar to Finder
        https://bugs.webkit.org/show_bug.cgi?id=190736
        <rdar://problem/44735946>

        Reviewed by Dan Bernstein.

        * fast/attachment/attachment-title-with-rtl-expected.html: Added.
        * fast/attachment/attachment-title-with-rtl.html: Added.
        Add a test that directionality marks in the attachment's title are
        isolated from the file extension.

2018-10-24  Megan Gardner  <megan_gardner@apple.com>

        Turn on Conic Gradients
        https://bugs.webkit.org/show_bug.cgi?id=190810

        Reviewed by Tim Horton.

        No longer necessary to manually turn on conic gradients for testing.

        * http/wpt/css/css-images-4/conic-gradient-parsing.html:

2018-10-11  Jiewen Tan  <jiewen_tan@apple.com>

        Only report resource timing to parent frame for the first iframe load
        https://bugs.webkit.org/show_bug.cgi?id=190498
        <rdar://problem/44347398>

        Reviewed by Youenn Fablet.

        The layout test is from Chromium change:
        https://chromium-review.googlesource.com/c/chromium/src/+/1186215.

        * http/tests/misc/resource-timing-navigation-in-restored-iframe-expected.txt: Added.
        * http/tests/misc/resource-timing-navigation-in-restored-iframe.html: Added.
        * http/tests/misc/resources/alert-then-back.html: Added.
        * http/tests/misc/resources/navigate-on-message.html: Added.
        * http/tests/misc/resources/post-message-to-parent.html: Added.

2018-10-24  Ryan Haddad  <ryanhaddad@apple.com>

        [macOS] Layout Test legacy-animation-engine/animations/suspend-resume-animation.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=190883

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark test as flaky.

2018-10-24  Matt Lewis  <jlewis3@apple.com>

        Marked webgl/1.0.2/conformance/glsl/misc/shader-with-reserved-words.html as a flaky timout.
        https://bugs.webkit.org/show_bug.cgi?id=170877

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2018-10-24  Truitt Savell  <tsavell@apple.com>

        Marking Multiple tests as flakey at once
        https://bugs.webkit.org/show_bug.cgi?id=190847

        Unreviewed Test Gardening

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-10-24  Andy Estes  <aestes@apple.com>

        [macOS Debug WK2] Layout Test http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrorsV3.https.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=190650
        <rdar://problem/45341914>

        Reviewed by Alex Christensen.

        * http/tests/resources/payment-request.js:
        (updateDetailsOnShippingAddressChange):

2018-10-23  Jer Noble  <jer.noble@apple.com>

        TextTrack cues should be updated more often than every 250ms.
        https://bugs.webkit.org/show_bug.cgi?id=190827

        Reviewed by Eric Carlson.

        Add a LayoutTest which plays back 6s of captions, each 50 ms in duration, and uses
        when the "enter" and "exit" were fired (in media time) to check whether they were missed
        or not. The test succeeds if fewer than 50 of the 120 cues were missed.

        * media/track/track-cue-missing-expected.txt: Added.
        * media/track/track-cue-missing.html: Added.

2018-10-23  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r237261.

        The layout test for this change crashes under GuardMalloc.

        Reverted changeset:

        "Handle MDNS resolution of candidates through libwebrtc
        directly"
        https://bugs.webkit.org/show_bug.cgi?id=190681
        https://trac.webkit.org/changeset/237261

2018-10-23  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Remove unused css-rules pretty printing test expectation
        https://bugs.webkit.org/show_bug.cgi?id=190834

        Reviewed by Matt Baker.

        * inspector/codemirror/prettyprinting-css-rules-expected.txt: Removed.

2018-10-23  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r237280.

        Causes fast/box-shadow/box-shadow-with-zero-radius.html to
        fail on iOS Simulator.

        Reverted changeset:

        "[CG] Adopt CG SPI for non-even cornered rounded rects"
        https://bugs.webkit.org/show_bug.cgi?id=190155
        https://trac.webkit.org/changeset/237280

2018-10-23  Ryan Haddad  <ryanhaddad@apple.com>

        [macOS Debug WK1] Layout Test inspector/codemirror/prettyprinting-css.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=190833

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as slow.

2018-10-23  Truitt Savell  <tsavell@apple.com>

        [ MacOS Debug WK1 ] Layout Test fast/forms/state-restore-to-non-edited-controls.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=190832

        Unreviewed Test Gardening.

        * platform/mac-wk1/TestExpectations:

2018-10-23  Ryan Haddad  <ryanhaddad@apple.com>

        Layout Test imported/w3c/web-platform-tests/html/semantics/embedded-content/media-elements/ready-states/autoplay-with-slow-text-tracks.html is flaky.
        https://bugs.webkit.org/show_bug.cgi?id=176929

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark test as flaky.

2018-10-23  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r236501?): Layout Test compositing/geometry/limit-layer-bounds-opacity-transition.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=190210

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark test as flaky.

2018-10-22  Justin Michaud  <justin_michaud@apple.com>

        Registered custom properties should support syntax parameter for <length> and *
        https://bugs.webkit.org/show_bug.cgi?id=190039

        Reviewed by Antti Koivisto.

        Add tests for inline styles, font-size cycles with custom properties, and a crash that was reported.

        * css-custom-properties-api/crash-expected.txt: Added.
        * css-custom-properties-api/crash.html: Added.
        * css-custom-properties-api/cycles-expected.txt: Added.
        * css-custom-properties-api/cycles.html: Added.
        * css-custom-properties-api/inline-expected.txt: Added.
        * css-custom-properties-api/inline.html: Added.

2018-10-22  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION: [iOS] Layout Test media/media-fullscreen-pause-inline.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=187618

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.

2018-10-22  Justin Michaud  <justin_michaud@apple.com>

        CSS Paint API should give a 2d rendering context
        https://bugs.webkit.org/show_bug.cgi?id=190762

        Reviewed by Dean Jackson.

        * fast/css-custom-paint/basic.html:

2018-10-22  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, update TestExpectations for imported/w3c/web-platform-tests/fetch/nosniff/importscripts.html.
        https://bugs.webkit.org/show_bug.cgi?id=157068

        * TestExpectations: Mark test as a flaky failure for release builds.
        * platform/mac-wk1/TestExpectations: Remove duplicate expectation.

2018-10-22  Dawei Fenton  <realdawei@apple.com>

        REGRESSION (r234330): [mac-wk1] Layout Test fast/repaint/animation-after-layer-scroll.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=188421

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as flaky.

2018-10-22  Ryan Haddad  <ryanhaddad@apple.com>

        [ Mojave WK1 ] Layout Test storage/indexeddb/database-odd-names.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190350

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as failing.

2018-10-22  Ryan Haddad  <ryanhaddad@apple.com>

        [macOS WK1] Layout Test http/tests/security/cross-origin-xsl-redirect-BLOCKED.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189723

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as flaky.

2018-10-22  Ali Juma  <ajuma@chromium.org>

        Layout Test imported/w3c/web-platform-tests/intersection-observer/containing-block.html is a flaky failure on Debug builds
        https://bugs.webkit.org/show_bug.cgi?id=190808

        Unreviewed test gardening.

        * TestExpectations:

2018-10-22  Dawei Fenton  <realdawei@apple.com>

        Some WK1 repaint tests are flaky on Mojave
        https://bugs.webkit.org/show_bug.cgi?id=190627

        Unreviewed, marked tests as flaky.

        * platform/mac-wk1/TestExpectations:

2018-10-22  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] [Datalist] fast/forms/datalist/datalist-show-hide.html fails
        https://bugs.webkit.org/show_bug.cgi?id=190777

        Reviewed by Tim Horton.

        Refactor this test such that it passes on both iOS and macOS. This test verifies that datalist suggestions menu
        UI can be shown and hidden. On macOS, we focus and then blur the input field; on iOS, we tap in the datalist
        button to show the suggestions UI, and then tap in the text field to bring back the regular keyboard.

        * fast/forms/datalist/datalist-show-hide-expected.txt:
        * fast/forms/datalist/datalist-show-hide.html:
        * platform/ios/TestExpectations:

        Unskip the layout test on iOS.

        * resources/ui-helper.js:
        (window.UIHelper.isShowingDataListSuggestions):

        Tweak this helper function to resolve with either true or false (Boolean types), instead of the strings "true"
        and "false".

2018-10-22  Truitt Savell  <tsavell@apple.com>

        [ MacOS WK1 ] Layout Test platform/mac/media/audio-session-category-video-paused.html is flaky Timeout 
        https://bugs.webkit.org/show_bug.cgi?id=189680

        Unreviewed Test Gardening

        * platform/mac-wk1/TestExpectations:

2018-10-20  Daniel Bates  <dabates@apple.com>

        Unskip test fast/writing-mode/english-rl-text-with-spelling-marker.html in iOS WebKit2

        Following r235149 we mark spelling errors in iOS WebKit2.

        * platform/ios-wk1/TestExpectations: Skip in legacy WebKit until we fix <https://webkit.org/b/188762>.
        * platform/ios/TestExpectations: Unskip test.

2018-10-19  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Add stubs for WebGPUSwapChain and WebGPURenderingContext
        https://bugs.webkit.org/show_bug.cgi?id=190742

        Reviewed by Dean Jackson.

        Updated basic webgpu feature detection test to check for WebGPURenderingContext.

        * webgpu/webgpu-enabled-expected.txt: 
        * webgpu/webgpu-enabled.html:

2018-10-19  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] [Datalist] Can't pick datalist suggestions in a stock WKWebView
        https://bugs.webkit.org/show_bug.cgi?id=190621
        <rdar://problem/45310649>

        Reviewed by Tim Horton.

        Refactor an existing layout test to run on both iOS and macOS. On both platforms, it checks that the top
        suggestion respects option element order in the document, as well as the current contents of the text field.
        On macOS, we use arrow keys and hit return to select a suggestion; on iOS, we tap the suggestions button and
        simulate hitting the done button on the input view to dismiss the keyboard.

        * fast/forms/datalist/datalist-textinput-suggestions-order-expected.txt:
        * fast/forms/datalist/datalist-textinput-suggestions-order.html:
        * platform/ios/TestExpectations:

        Enable this test on iOS.

        * resources/ui-helper.js:
        (window.UIHelper.resignFirstResponder):
        (window.UIHelper):

2018-10-19  John Wilander  <wilander@apple.com>

        Only cap lifetime of persistent cookies created client-side through document.cookie when resource load statistics is enabled
        https://bugs.webkit.org/show_bug.cgi?id=190687
        <rdar://problem/45349024>

        Reviewed by Alex Christensen.

        The test case now makes use of internals.setResourceLoadStatisticsEnabled()
        and was thus moved to http/tests/resourceLoadStatistics/.

        * TestExpectations:
            Removed skip of previous test location.
        * http/tests/resourceLoadStatistics/capped-lifetime-for-cookie-set-in-js-expected.txt: Renamed from LayoutTests/http/tests/cookies/capped-lifetime-for-cookie-set-in-js-expected.txt.
        * http/tests/resourceLoadStatistics/capped-lifetime-for-cookie-set-in-js.html: Renamed from LayoutTests/http/tests/cookies/capped-lifetime-for-cookie-set-in-js.html.
        * http/tests/webAPIStatistics/canvas-read-and-write-data-collection-expected.txt:
            Removed line containing "isMarkedForCookieBlocking: No."
        * http/tests/webAPIStatistics/font-load-data-collection-expected.txt:
            Removed line containing "isMarkedForCookieBlocking: No."
        * http/tests/webAPIStatistics/navigator-functions-accessed-data-collection-expected.txt:
            Removed line containing "isMarkedForCookieBlocking: No."
        * http/tests/webAPIStatistics/screen-functions-accessed-data-collection-expected.txt:
            Removed line containing "isMarkedForCookieBlocking: No."
        * platform/ios/TestExpectations:
            Removed pass of previous test location. The whole http/tests/resourceLoadStatistics/ is marked pass for relevant platforms.
        * platform/mac-wk2/TestExpectations:
            Removed pass of previous test location. The whole http/tests/resourceLoadStatistics/ is marked pass for relevant platforms.

2018-10-19  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r237254.
        https://bugs.webkit.org/show_bug.cgi?id=190760

        "It regresses JetStream 2 by 5% on some iOS devices"
        (Requested by saamyjoon on #webkit).

        Reverted changeset:

        "[JSC] JSC should have "parseFunction" to optimize Function
        constructor"
        https://bugs.webkit.org/show_bug.cgi?id=190340
        https://trac.webkit.org/changeset/237254

2018-10-19  Charlie Turner  <cturner@igalia.com>

        [EME] Fix crash during tracing in  gst_qtdemux_request_protection_context
        https://bugs.webkit.org/show_bug.cgi?id=190738

        Reviewed by Xabier Rodriguez-Calvar.

        Add failing test expectations for the GTK port. These tests are
        not mirrored in the top-level TestExpectations file, since there
        are no passing baselines for these tests there. The testing
        infrastructure will report them as unexpected passing when they
        are marked as [ Failure ] there, since their output matches the
        failing output in this directory, and if you don't have an
        expected test, then they fail as [ Missing ], and putting failing
        baselines in the top-level cross-platform directory also seem
        wrong...

        The following two tests produce a dumpRenderTree output for
        unknown reasons, and so they have been marked as Missing for now.

        platform/gtk/imported/w3c/web-platform-tests/encrypted-media/resources/clearkey-retrieve-destroy-persistent-license.html
        platform/gtk/imported/w3c/web-platform-tests/encrypted-media/resources/clearkey-retrieve-persistent-license.html

        * platform/gtk/TestExpectations: Update expectations.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearKey-encrypted-webm-event-mse-actual.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-persistent-license-events.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-persistent-usage-record-events.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-persistent-usage-record.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-retrieve-persistent-usage-record.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-encrypted-clear.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-events.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multikey-sequential-readyState.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multikey-sequential.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-after-src.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-requestmediakeysystemaccess.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-reset-src-after-setmediakeys.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-syntax-mediakeys.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-unique-origin.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-update-disallowed-input.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-waiting-for-a-key.https-expected.txt: Added.

2018-10-18  Said Abou-Hallawa  <sabouhallawa@apple.com>

        [CG] Adopt CG SPI for non-even cornered rounded rects
        https://bugs.webkit.org/show_bug.cgi?id=190155

        Reviewed by Simon Fraser.

        This test fails on iOS simulator because of just one pixel difference.
        I think it happens because of anti aliasing the color at the border of
        the black shadow. Since this test is testing the radius attribute of the
        CSS box-shadow and this should not be affected by whether the shadow has
        non-even rounded corners or not, I am going to change it to have even 
        rounded corners.

        * fast/box-shadow/box-shadow-with-zero-radius-expected.html:
        * fast/box-shadow/box-shadow-with-zero-radius.html:

2018-10-18  Justin Fan  <justin_fan@apple.com>

        Add test expectations for webgpu-enabled.html
        https://bugs.webkit.org/show_bug.cgi?id=190739

        Unreviewed test gardening.

        Added forgotten expectations for webgpu-enabled, and updated some expectations 
        to match the WebGPU -> WebMetal naming and new WebGPU tests.

        * platform/ios/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:
        * platform/wincairo/TestExpectations:
        * platform/wpe/TestExpectations:
        * webgpu/webgpu-enabled-expected.txt: Added.

2018-10-18  Justin Michaud  <justin_michaud@apple.com>

        Add new image type for CSS painting API
        https://bugs.webkit.org/show_bug.cgi?id=190697

        Reviewed by Dean Jackson.

        * fast/css-custom-paint/basic-expected.txt:
        * fast/css-custom-paint/basic.html:

2018-10-18  Jer Noble  <jer.noble@apple.com>

        [MSE] timestampOffset can introduce floating-point rounding errors to incoming samples
        https://bugs.webkit.org/show_bug.cgi?id=190590
        <rdar://problem/45275626>

        Reviewed by Eric Carlson.

        * media/media-source/media-source-sequence-timestamps-expected.txt:
        * media/media-source/media-source-timestampoffset-rounding-error-expected.txt: Added.
        * media/media-source/media-source-timestampoffset-rounding-error.html: Added.
        * media/media-source/mock-media-source.js:
        (makeASample):

2018-10-18  Jer Noble  <jer.noble@apple.com>

        Enable WKPreferences._lowPowerVideoAudioBufferSizeEnabled by default
        https://bugs.webkit.org/show_bug.cgi?id=190315
        <rdar://problem/45047807>

        Reviewed by Eric Carlson.

        * media/audio-controls-timeline-in-media-document-expected.txt:
        * media/audio-controls-timeline-in-media-document.html:

2018-10-18  Jer Noble  <jer.noble@apple.com>

        Safari is not able to adapt between H264 streams with EditList and without EditList
        https://bugs.webkit.org/show_bug.cgi?id=190638
        <rdar://problem/45342208>

        Reviewed by Eric Carlson.

        * media/media-source/media-source-append-overlapping-dts-expected.txt: Added.
        * media/media-source/media-source-append-overlapping-dts.html: Added.

2018-10-18  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Region parameter and value should be separated by ':'
        https://bugs.webkit.org/show_bug.cgi?id=190735

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/captions-regions.vtt:
        * media/track/captions-webvtt/header-regions.vtt:

2018-10-18  Jer Noble  <jer.noble@apple.com>

        Add support for MediaKeyEncryptionScheme
        https://bugs.webkit.org/show_bug.cgi?id=190173

        Reviewed by Eric Carlson.

        * media/encrypted-media/mock-navigator-requestMediaKeySystemAccess-expected.txt:
        * media/encrypted-media/mock-navigator-requestMediaKeySystemAccess.html:

2018-10-18  Youenn Fablet  <youenn@apple.com>

        Handle MDNS resolution of candidates through libwebrtc directly
        https://bugs.webkit.org/show_bug.cgi?id=190681

        Reviewed by Eric Carlson.

        * TestExpectations:
        Test should no longer be flaky as we no longer enforce a timer for resolving MDNS candidates.

2018-10-18  Ross Kirsling  <ross.kirsling@sony.com>

        delete expression should not throw without a reference
        https://bugs.webkit.org/show_bug.cgi?id=190637

        Reviewed by Yusuke Suzuki.

        * js/basic-strict-mode-expected.txt:
        * js/script-tests/basic-strict-mode.js:
        Update test cases.

2018-10-18  Wenson Hsieh  <wenson_hsieh@apple.com>

        [GTK] fast/selectors/read-only-read-write-input-basics.html failing since r237245
        https://bugs.webkit.org/show_bug.cgi?id=190711

        Unreviewed test gardening.

        Adjust layout test baselines after r237245. Make fast/selectors/read-only-read-write-input-basics-expected.txt
        contain PASS expectations for color inputs, and remove port-specific iOS/macOS WebKit2 expectations. Since color
        inputs are disabled in legacy WebKit, move the layout test expectation in platform/mac to platform/mac-wk1.

        * fast/selectors/read-only-read-write-input-basics-expected.txt:
        * platform/ios-wk2/fast/selectors/read-only-read-write-input-basics-expected.txt: Removed.
        * platform/mac-wk2/fast/selectors/read-only-read-write-input-basics-expected.txt: Removed.

2018-10-18  Miguel Gomez  <magomez@igalia.com>

        Unreviewed GTK+ gardening after r237249.

        * platform/gtk/TestExpectations:
        * platform/gtk/fast/forms/fieldset/fieldset-elements-htmlcollection-expected.txt: Added.

2018-10-18  Yusuke Suzuki  <yusukesuzuki@slowstart.org>

        [JSC] JSC should have "parseFunction" to optimize Function constructor
        https://bugs.webkit.org/show_bug.cgi?id=190340

        Reviewed by Mark Lam.

        * fast/dom/attribute-event-listener-errors-expected.txt:
        * fast/events/attribute-listener-deletion-crash-expected.txt:
        * fast/events/window-onerror-syntax-error-in-attr-expected.txt:
        * js/dom/invalid-syntax-for-function-expected.txt:
        * js/dom/script-start-end-locations-expected.txt:

2018-10-17  Wenson Hsieh  <wenson_hsieh@apple.com>

        Enable the datalist element by default on iOS and macOS
        https://bugs.webkit.org/show_bug.cgi?id=190594
        <rdar://problem/45281159>

        Reviewed by Ryosuke Niwa and Tim Horton.

        * TestExpectations:

        Mark a couple of datalist tests as failures, with corresponding Bugzilla links.

        * fast/forms/datalist/datalist-fallback-content-expected.html:
        * fast/forms/datalist/datalist-fallback-content.html:

        Refactor this ref test. This was checking that a text input field with an associated datalist with fallback
        content looks identical to an text input field without a datalist, but this simply isn't the case with our
        current implementation due to the presence of the list button. Instead, add a div to cover the list button in
        both cases, and further augment this test to check that inputs of type color behave the same.

        * fast/forms/datalist/range-snap-to-datalist-expected.txt: Added.

        Add missing expectations for this test that were never checked in. Since sliderTickSnappingThreshold simply
        returns 0, this test behaves as expected, though behavior here may change when we add a make the "snapping
        threshold" nonzero.

        * fast/forms/datalist/validity-assertion-inserting-into-datalist-expected.txt: Renamed from LayoutTests/fast/forms/validity-assertion-inserting-into-datalist-expected.txt.
        * fast/forms/datalist/validity-assertion-inserting-into-datalist.html: Renamed from LayoutTests/fast/forms/validity-assertion-inserting-into-datalist.html.
        * fast/selectors/read-only-read-write-input-basics-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/dom/reflection-forms-expected.txt:
        * platform/ios-simulator/fast/forms/datalist/datalist-searchinput-appearance-expected.txt: Added.
        * platform/ios-simulator/fast/forms/datalist/datalist-textinput-appearance-expected.txt: Added.

        Add missing expectations.

        * platform/ios-wk1/TestExpectations:

        Don't run datalist tests in WebKitLegacy by marking them as [ WontFix ].

        * platform/ios-wk2/accessibility/roles-exposed-expected.txt: Added.
        * platform/ios-wk2/fast/borders/empty-outline-border-assert-expected.txt: Added.
        * platform/ios-wk2/fast/dom/Window/window-lookup-precedence-expected.txt: Added.
        * platform/ios-wk2/fast/forms/label/labelable-elements-expected.txt: Added.
        * platform/ios-wk2/fast/forms/label/readwrite-readonly-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt.
        * platform/ios-wk2/fast/selectors/read-only-read-write-input-basics-expected.txt: Copied from LayoutTests/fast/selectors/read-only-read-write-input-basics-expected.txt.
        * platform/ios-wk2/imported/w3c/web-platform-tests/custom-elements/builtin-coverage-expected.txt: Added.
        * platform/ios-wk2/imported/w3c/web-platform-tests/dom/nodes/Node-cloneNode-expected.txt: Added.
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/dom/documents/dom-tree-accessors/document.getElementsByName/document.getElementsByName-newelements-expected.txt: Added.
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/dom/documents/dom-tree-accessors/document.getElementsByName/document.getElementsByName-newelements-xhtml-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/dom/reflection-forms-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/dom/reflection-forms-expected.txt.
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt.
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt.
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/interfaces-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt.
        * platform/ios-wk2/imported/w3c/web-platform-tests/shadow-dom/input-element-list-expected.txt: Added.
        * platform/ios-wk2/mathml/presentation/foreign-element-in-token-expected.txt: Added.

        Add baselines for WebKit2, where we enable the datalist element and color inputs.

        * platform/ios/TestExpectations:
        * platform/mac-wk1/TestExpectations:

        Don't run datalist tests in WebKitLegacy by marking them as [ WontFix ].

        * platform/mac-wk2/accessibility/roles-exposed-expected.txt: Copied from LayoutTests/platform/mac/accessibility/roles-exposed-expected.txt.
        * platform/mac-wk2/fast/borders/empty-outline-border-assert-expected.txt: Added.
        * platform/mac-wk2/fast/dom/Window/window-lookup-precedence-expected.txt: Added.
        * platform/mac-wk2/fast/forms/label/labelable-elements-expected.txt: Added.
        * platform/mac-wk2/fast/forms/label/readwrite-readonly-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt.
        * platform/mac-wk2/fast/selectors/read-only-read-write-input-basics-expected.txt: Copied from LayoutTests/fast/selectors/read-only-read-write-input-basics-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/custom-elements/builtin-coverage-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/dom/nodes/Node-cloneNode-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/dom/documents/dom-tree-accessors/document.getElementsByName/document.getElementsByName-newelements-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/dom/documents/dom-tree-accessors/document.getElementsByName/document.getElementsByName-newelements-xhtml-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt: Renamed from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt: Renamed from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt: Renamed from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/type-change-state-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/type-change-state-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/valueMode-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/valueMode-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/interfaces-expected.txt: Copied from LayoutTests/platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/interfaces-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/shadow-dom/input-element-list-expected.txt: Added.
        * platform/mac-wk2/mathml/presentation/foreign-element-in-token-expected.txt: Added.

        Add baselines for WebKit2, where we enable the datalist element and color inputs.

        * platform/mac/TestExpectations:
        * platform/mac/accessibility/roles-exposed-expected.txt:
        * platform/mac/fast/selectors/read-only-read-write-input-basics-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/type-change-state-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/valueMode-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt:

        Re-rebaseline test expectations that involve input type color, now that color inputs are off by default in WebKitLegacy.

        * platform/win/TestExpectations:

        Remove various datalist test skips and failures on macOS and iOS; ensure that the test failures that are still
        present are tracked with links to Bugzilla.

2018-10-17  Justin Michaud  <justin_michaud@apple.com>

        Parse paint() and store paint callbacks for CSS Painting API
        https://bugs.webkit.org/show_bug.cgi?id=190657

        Reviewed by Dean Jackson.

        * fast/css-custom-paint/basic-expected.txt:
        * fast/css-custom-paint/basic.html:

2018-10-17  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Implement WebGPU bindings up through WebGPUDevice creation
        https://bugs.webkit.org/show_bug.cgi?id=190653

        Reviewed by Dean Jackson.

        Small test to validate creation of a WebGPUDevice when WebGPU is enabled.

        * webgpu/webgpu-enabled.html: Added.

2018-10-17  Andy Estes  <aestes@apple.com>

        [Apple Pay] Increment the API version to 5
        https://bugs.webkit.org/show_bug.cgi?id=190686
        <rdar://problem/45348523>

        Reviewed by Simon Fraser.

        * http/tests/ssl/applepay/ApplePaySessionV5-expected.txt: Added.
        * http/tests/ssl/applepay/ApplePaySessionV5.html: Added.
        * platform/mac-wk2/TestExpectations:

2018-10-17  Chris Fleizach  <cfleizach@apple.com>

        AX: Certain tags should identify their context to iOS API
        https://bugs.webkit.org/show_bug.cgi?id=190622
        <rdar://problem/45308194>

        Reviewed by Zalan Bujtas.

        * accessibility/ios-simulator/text-context-attributes.html: Added.
        * accessibility/ios-simulator/text-context-attributes-expcted.txt: Added.

2018-10-17  Ali Juma  <ajuma@chromium.org>

        Flaky IntersectionObserver web platform tests involving style updates
        https://bugs.webkit.org/show_bug.cgi?id=189091

        Reviewed by Simon Fraser.

        Remove expectation for tests that are no longer flaky.

        Skip IntersectionObserver tests on WK1.

        * TestExpectations:
        * platform/mac-wk1/TestExpectations:

2018-10-17  Charlie Turner  <cturner@igalia.com>

        [EME] media/encrypted-media/mock-MediaKeySystemAccess.html crashes in CDM::createInstance
        https://bugs.webkit.org/show_bug.cgi?id=190578

        Reviewed by Xabier Rodriguez-Calvar.

        * platform/gtk/TestExpectations:

2018-10-16  Chris Dumez  <cdumez@apple.com>

        Regression(r236795) Check boxes are sometimes checked when they should not be
        https://bugs.webkit.org/show_bug.cgi?id=190651
        <rdar://problem/45319934>

        Reviewed by Ryosuke Niwa.

        Add layout test coverage.

        * fast/dom/HTMLInputElement/checkbox-dirty-checkedness-flag-expected.txt: Added.
        * fast/dom/HTMLInputElement/checkbox-dirty-checkedness-flag.html: Added.

2018-10-16  Chris Dumez  <cdumez@apple.com>

        window.performance should not become null after the window loses its browsing context
        https://bugs.webkit.org/show_bug.cgi?id=190636

        Reviewed by Ryosuke Niwa.

        Extend layout test coverage.

        * http/tests/dom/cross-origin-detached-window-properties-expected.txt:
        * http/tests/dom/cross-origin-detached-window-properties.html:
        * http/tests/dom/same-origin-detached-window-properties-expected.txt:
        * http/tests/dom/same-origin-detached-window-properties.html:

2018-10-16  Timothy Hatcher  <timothy@apple.com>

        Add <meta name="supported-color-schemes"> to control what color schemes the page supports
        https://bugs.webkit.org/show_bug.cgi?id=190526
        rdar://problem/45230140

        Reviewed by Dean Jackson.

        * css-dark-mode/supported-color-schemes-expected.txt: Added.
        * css-dark-mode/supported-color-schemes.html: Added.

2018-10-16  Devin Rousso  <drousso@apple.com>

        Web Inspector: Canvas: capture previously saved states and add them to the recording payload
        https://bugs.webkit.org/show_bug.cgi?id=190473

        Reviewed by Joseph Pecoraro.

        * inspector/canvas/recording-2d-expected.txt:
        * inspector/canvas/recording-2d.html:
        * inspector/canvas/resources/recording-utilities.js:
        (TestPage.registerInitializer):
        (TestPage.registerInitializer.async.logRecording): Added.
        (TestPage.registerInitializer.logRecording): Deleted.
        * inspector/model/recording-expected.txt:
        * inspector/model/recording.html:

2018-10-16  Justin Michaud  <justin_michaud@apple.com>

        Implement feature flag and bindings for CSS Painting API
        https://bugs.webkit.org/show_bug.cgi?id=190237

        Reviewed by Ryosuke Niwa.

        Add basic tests for the CSS Painting API registerPaint function,
        and test the custom bindings.

        * fast/css-custom-paint/basic-expected.txt: Added.
        * fast/css-custom-paint/basic.html: Added.
        * fast/css-custom-paint/registerPaintBindings-expected.txt: Added.
        * fast/css-custom-paint/registerPaintBindings.html: Added.
        * platform/ios-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:

2018-10-16  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Support inline WebVTT styles
        https://bugs.webkit.org/show_bug.cgi?id=190369

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/css-styling.vtt: Added.
        * media/track/captions-webvtt/no-css-styling.vtt: Added.
        * media/track/track-cue-css-expected.html: Added.
        * media/track/track-cue-css.html: Added.

2018-10-16  Chris Dumez  <cdumez@apple.com>

        window.navigator should not become null after the window loses its browsing context
        https://bugs.webkit.org/show_bug.cgi?id=190595

        Reviewed by Ryosuke Niwa.

        Extend layout test coverage.

        * fast/frames/detached-frame-property-expected.txt:
        * fast/frames/detached-frame-property.html:
        * http/tests/dom/cross-origin-detached-window-properties-expected.txt:
        * http/tests/dom/cross-origin-detached-window-properties.html:
        * http/tests/dom/same-origin-detached-window-properties-expected.txt:
        * http/tests/dom/same-origin-detached-window-properties.html:

2018-10-16  Charlie Turner  <cturner@igalia.com>

        [EME] Multiple ClearKey tests crashing in gst_qtdemux_request_protection_context
        https://bugs.webkit.org/show_bug.cgi?id=190577

        Reviewed by Michael Catanzaro.

        * platform/gtk/TestExpectations:

2018-10-15  Timothy Hatcher  <timothy@apple.com>

        Add support for prefers-color-scheme media query
        https://bugs.webkit.org/show_bug.cgi?id=190499
        rdar://problem/45212025

        Reviewed by Dean Jackson.

        * css-dark-mode/prefers-color-scheme-expected.txt: Added.
        * css-dark-mode/prefers-color-scheme.html: Added.
        * platform/gtk/TestExpectations: Skip css-dark-mode.
        * platform/ios/TestExpectations: Skip css-dark-mode.
        * platform/mac-wk1/TestExpectations: Skip css-dark-mode.
        * platform/win/TestExpectations: Skip css-dark-mode.
        * platform/wincairo/TestExpectations: Skip css-dark-mode.
        * platform/wpe/TestExpectations: Skip css-dark-mode.

2018-10-15  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Cleanup Table test utilities
        https://bugs.webkit.org/show_bug.cgi?id=190538
        <rdar://problem/45237730>

        Reviewed by Joseph Pecoraro.

        Cleanup Table test utilities by exposing removing the artificial dependency
        between TableDelegate and TableDataSource, and exposing a cleaner set of
        utility methods to InspectorTest. This patch changes `InspectorTest.createTable`
        to take no parameters, and adds `InspectorTest.createTableWithDelegate` for
        tests that need to supply a custom delegate.

        * inspector/table/resources/table-utilities.js:
        (TestPage.registerInitializer.InspectorTest.TableDataSource):
        (TestPage.registerInitializer.InspectorTest.TableDelegate):
        (TestPage.registerInitializer.InspectorTest.TableDelegate.prototype.tablePopulateCell):
        (TestPage.registerInitializer.createDataSource):
        (TestPage.registerInitializer.createTableInternal):
        (TestPage.registerInitializer.InspectorTest.createTable):
        (TestPage.registerInitializer.InspectorTest.createTableWithDelegate):
        (TestPage.registerInitializer):

        * inspector/table/table-selection-expected.txt:
        Update with new test suite name.

        * inspector/table/table-selection.html:

2018-10-15  Charles Vazac  <cvazac@gmail.com>

        Web Inspector: Expose Server Timing Response Headers in Network Tab
        https://bugs.webkit.org/show_bug.cgi?id=190440

        Reviewed by Joseph Pecoraro.

        * inspector/unit-tests/server-timing-entry-expected.txt:
        * inspector/unit-tests/server-timing-entry.html:

2018-10-15  Alex Christensen  <achristensen@webkit.org>

        Garden WK2 tests after r237104
        https://bugs.webkit.org/show_bug.cgi?id=190522

        * platform/wk2/http/tests/navigation/keyboard-events-during-provisional-navigation-expected.txt: Removed.
        I added  this wk2 expectation in r234658 after r234640.  r237104 effectively did the inverse of r234640,
        so behavior is back to how it was before then.  This makes the expectations reflect such.

2018-10-15  Chris Dumez  <cdumez@apple.com>

        Experiment: target=_blank on anchors should imply rel=noopener
        https://bugs.webkit.org/show_bug.cgi?id=190481

        Reviewed by Alex Christensen.

        Update existing tests to reflect behavior change.

        * TestExpectations:
        * http/tests/navigation/no-referrer-reset.html:
        * http/tests/security/resources/referrer-policy-redirect-link.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2-pson.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2.html:
        * http/tests/security/xssAuditor/link-opens-new-window.html:

2018-10-15  Andy Estes  <aestes@apple.com>

        [Apple Pay] New shipping methods are ignored when updating after the shippingaddresschange event
        https://bugs.webkit.org/show_bug.cgi?id=190560
        <rdar://problem/44559075>

        Reviewed by Youenn Fablet.

        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrors.https-expected.txt:
        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrors.https.html:

2018-10-15  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Can't select text after dismissing the keyboard when changing focus
        https://bugs.webkit.org/show_bug.cgi?id=190563
        <rdar://problem/44613559>

        Reviewed by Tim Horton.

        Add a new layout test to check that the user can make a selection by long pressing after the keyboard is
        dismissed due to changing the focused element.

        * editing/selection/ios/select-text-after-changing-focus-expected.txt: Added.
        * editing/selection/ios/select-text-after-changing-focus.html: Added.
        * resources/ui-helper.js:

        Also tweak the behavior of `UIHelper.waitForKeyboardToHide()`, so that it resolves immediately if the keyboard
        is not shown. This allows us to ensure that tests which use `UIHelper.waitForKeyboardToHide()` are robust in the
        case where they wait for another action to complete (e.g. a simulated tap) prior to registering a keyboard
        hiding callback.

        (window.UIHelper.waitForKeyboardToHide.return.new.Promise):
        (window.UIHelper.waitForKeyboardToHide):

2018-10-15  Andy Estes  <aestes@apple.com>

        [Apple Pay] Payment authorization results with ApplePayErrors should never be considered final
        https://bugs.webkit.org/show_bug.cgi?id=190559
        <rdar://problem/37250908>

        Reviewed by Anders Carlsson.

        * http/tests/ssl/applepay/ApplePaySessionFinalState.https-expected.txt: Added.
        * http/tests/ssl/applepay/ApplePaySessionFinalState.https.html: Added.

2018-10-15  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r237054.
        https://bugs.webkit.org/show_bug.cgi?id=190593

        "this regressed JetStream 2 by 6% on iOS" (Requested by
        saamyjoon on #webkit).

        Reverted changeset:

        "[JSC] JSC should have "parseFunction" to optimize Function
        constructor"
        https://bugs.webkit.org/show_bug.cgi?id=190340
        https://trac.webkit.org/changeset/237054

2018-10-15  Wenson Hsieh  <wenson_hsieh@apple.com>

        Changing view scale should zoom to initial scale if the page is already at initial scale
        https://bugs.webkit.org/show_bug.cgi?id=190570
        <rdar://problem/45261877>

        Reviewed by Tim Horton.

        * fast/viewport/ios/initial-scale-after-changing-view-scale-expected.txt: Added.
        * fast/viewport/ios/initial-scale-after-changing-view-scale.html: Added.

        Add a new layout test to verify that:
        1.  Changing view scale before the page scale factor is changed by the user zooms to the new initial scale.
        2.  Changing view scale after the user changes the page scale to something different than initial scale does not
            cause the page to zoom to the new initial scale.
        3.  Changing view scale after the user changes the page scale factor back to initial scale causes the page to
            zoom to the new initial scale.

        * resources/basic-gestures.js:

        Make a small tweak in `doubleTapToZoomAtPoint` to ensure that both single taps as well as zooming are complete
        before invoking UIScriptController completion.

        (return.new.Promise):

2018-10-15  Yoshiaki Jitsukawa  <yoshiaki.jitsukawa@sony.com>

        [Cairo] Incorrect rendering for 135-deg skews
        https://bugs.webkit.org/show_bug.cgi?id=190513

        Reviewed by ≈Ωan Dober≈°ek.

        * fast/transforms/skew-x-135deg-with-gradient-expected.html: Added.
        * fast/transforms/skew-x-135deg-with-gradient.html: Added.
        * fast/transforms/skew-y-135deg-with-gradient-expected.html: Added.
        * fast/transforms/skew-y-135deg-with-gradient.html: Added.

2018-10-15  Chris Dumez  <cdumez@apple.com>

        Restrict browsing context lookup by name to frames that are related to one another
        https://bugs.webkit.org/show_bug.cgi?id=190475

        Reviewed by Alex Christensen.

        * http/tests/dom/new-window-can-target-opener-expected.txt: Added.
        * http/tests/dom/new-window-can-target-opener.html: Added.
        * http/tests/dom/noopener-window-cannot-target-opener-expected.txt: Added.
        * http/tests/dom/noopener-window-cannot-target-opener.html: Added.
        * http/tests/dom/noopener-window-not-targetable-expected.txt: Added.
        * http/tests/dom/noopener-window-not-targetable.html: Added.
        * http/tests/dom/noopener-window-not-targetable2-expected.txt: Added.
        * http/tests/dom/noopener-window-not-targetable2.html: Added.
        * http/tests/dom/noreferrer-window-not-targetable-expected.txt: Added.
        * http/tests/dom/noreferrer-window-not-targetable.html: Added.
        * http/tests/dom/opened-window-not-targetable-after-disowning-opener-expected.txt: Added.
        * http/tests/dom/opened-window-not-targetable-after-disowning-opener.html: Added.
        * http/tests/dom/resources/new-window-can-target-opener-win.html: Added.
        * http/tests/dom/resources/noopener-window-cannot-target-opener-win.html: Added.
        Add layout test coverage.

        * fast/dom/Window/a-rel-noopener-expected.txt:
        * fast/dom/Window/area-rel-noopener-expected.txt:
        * fast/dom/Window/resources/rel-noopener.js:
        * http/tests/navigation/no-referrer-target-blank-expected.txt:
        * http/tests/navigation/resources/no-referrer-helper.php:
        * platform/mac-wk1/imported/w3c/web-platform-tests/html/browsers/windows/noreferrer-window-name-expected.txt:
        * platform/wk2/imported/w3c/web-platform-tests/html/browsers/windows/noreferrer-window-name-expected.txt:
        Update / rebaseline existing tests to reflect behavior change.

2018-10-15  YUHAN WU  <yuhan_wu@apple.com>

        Implement error handler of MediaRecorder
        https://bugs.webkit.org/show_bug.cgi?id=190438

        Reviewed by Youenn Fablet.

        Since dataavailable event has not been implemented, skip three MediaRecorder-related tests now.
        We will need to reenable those tests once implementing the dataavailable event for MediaRecorder.

        * TestExpectations:

2018-10-15  Chris Dumez  <cdumez@apple.com>

        Window's properties such as 'location' should not become null when it loses its browsing context
        https://bugs.webkit.org/show_bug.cgi?id=190539

        Reviewed by Alex Christensen.

        * http/tests/dom/cross-origin-detached-window-properties-expected.txt: Added.
        * http/tests/dom/cross-origin-detached-window-properties.html: Added.
        * http/tests/dom/resources/post-message-to-parent-when-loaded.html: Added.
        * http/tests/dom/same-origin-detached-window-properties-expected.txt: Added.
        * http/tests/dom/same-origin-detached-window-properties.html: Added.
        Add layout test coverage.

        * fast/frames/detached-frame-property-expected.txt:
        * fast/frames/detached-frame-property.html:
        * http/tests/security/named-window-property-from-same-origin-inactive-document-expected.txt:
        * http/tests/security/named-window-property-from-same-origin-inactive-document.html:
        * http/tests/security/xss-DENIED-named-window-property-from-cross-origin-inactive-document-expected.txt:
        * http/tests/security/xss-DENIED-named-window-property-from-cross-origin-inactive-document.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2-pson.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window3.html:
        Update existing layout tests to reflect behavior change.

2018-10-15  Claudio Saavedra  <csaavedra@igalia.com>

        [GStreamer] MediaStream test failing since r236877

        Unreviewed gardening
        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-10-12  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Allow SPI clients to lay out at arbitrarily scaled sizes and scale to fit the view
        https://bugs.webkit.org/show_bug.cgi?id=190504
        <rdar://problem/45117760>

        Reviewed by Tim Horton.

        Add two new layout tests on iOS that change WKWebView's view scale, and measure the resulting window sizes and
        lengths of viewport units.

        * fast/viewport/ios/constant-width-viewport-after-changing-view-scale-expected.txt: Added.
        * fast/viewport/ios/constant-width-viewport-after-changing-view-scale.html: Added.

        Add a test page with a viewport meta tag that has a constant width and an explicit initial scale of 0.5.

        * fast/viewport/ios/device-width-viewport-after-changing-view-scale-expected.txt: Added.
        * fast/viewport/ios/device-width-viewport-after-changing-view-scale.html: Added.

        Add a test page with a viewport meta tag at device-width, with initial scale 1.

        * resources/ui-helper.js:
        (window.UIHelper.setViewScale):

        Add a convenience function that wraps a UI script invocation of `setViewScale` in a promise.

        (window.UIHelper):

2018-10-12  Dawei Fenton  <realdawei@apple.com>

        [Mojave Wk2] Layout Test http/tests/cache/disk-cache/disk-cache-validation-attachment.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=190323

        Unreviewed, mark test as Flaky.

        * platform/mac-wk2/TestExpectations:

2018-10-12  Per Arne Vollan  <pvollan@apple.com>

        Layout Test editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-2.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190520

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-10-08  Yusuke Suzuki  <yusukesuzuki@slowstart.org>

        [JSC] JSC should have "parseFunction" to optimize Function constructor
        https://bugs.webkit.org/show_bug.cgi?id=190340

        Reviewed by Mark Lam.

        * fast/dom/attribute-event-listener-errors-expected.txt:
        * fast/events/attribute-listener-deletion-crash-expected.txt:
        * fast/events/window-onerror-syntax-error-in-attr-expected.txt:
        * js/dom/invalid-syntax-for-function-expected.txt:
        * js/dom/script-start-end-locations-expected.txt:

2018-10-11  Thibault Saunier  <tsaunier@igalia.com>

        [GStreamer] Support arbitrary video resolution in getUserMedia API
        https://bugs.webkit.org/show_bug.cgi?id=189734

        Implement arbitrary video resolution for the getUserMedia API in GStreamer.

        Fix the MockRealtimeMediaSource device list to make devices properties match
        test expectations.

        Reactivate tests that were failling because of that.

        Reviewed by Xabier Rodriguez-Calvar.

        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-10-11  Per Arne Vollan  <pvollan@apple.com>

        Layout Test fast/forms/fieldset/fieldset-elements-htmlcollection.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190472

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-10-11  Alejandro G. Castro  <alex@igalia.com>

        [GTK][WPE] Add mediaDevices.enumerateDevices support
        https://bugs.webkit.org/show_bug.cgi?id=185761

        Reviewed by Youenn Fablet.

        Remove the failure expectation for the test
        media-devices-enumerate-devices.html. Just for the record we have
        also checked the following tests.

        fast/mediastream/media-devices-enumerate-devices.html
        fast/mediastream/resources/enumerate-devices-frame.html
        http/tests/media/media-stream/enumerate-devices-source-id.html
        http/tests/media/media-stream/enumerate-devices-source-id-persistent.html
        http/tests/media/media-stream/resources/enumerate-devices-source-id-frame.html

        * platform/gtk/TestExpectations:

2018-10-10  Devin Rousso  <drousso@apple.com>

        Web Inspector: create special Network waterfall for media events
        https://bugs.webkit.org/show_bug.cgi?id=189773
        <rdar://problem/44626605>

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/dom/didFireEvent-expected.txt: Added.
        * http/tests/inspector/dom/didFireEvent.html: Added.

        * inspector/unit-tests/array-utilities-expected.txt:
        * inspector/unit-tests/array-utilities.html:

2018-10-10  Brent Fulgham  <bfulgham@apple.com>

        Only report the supported WebGL version
        https://bugs.webkit.org/show_bug.cgi?id=190434
        <rdar://problem/45024677>

        Reviewed by Dean Jackson.

        * fast/canvas/webgl/gl-getstring-expected.txt:
        * fast/canvas/webgl/gl-getstring.html:

2018-10-10  Tim Horton  <timothy_horton@apple.com>

        Share more WKShareSheet code between macOS and iOS, and fix a few bugs
        https://bugs.webkit.org/show_bug.cgi?id=190420

        Reviewed by Simon Fraser.

        * fast/events/ios/share-expected.txt: Removed.
        * fast/events/ios/share.html: Removed.
        * fast/web-share/share.html: Added.
        * fast/web-share/share-expected.txt: Added.
        * resources/ui-helper.js:
        (window.UIHelper.setShareSheetCompletesImmediatelyWithResolution):
        (window.UIHelper.invokeShareSheetWithResolution): Deleted.
        Move the existing share sheet test to fast/web-share so it runs on both macOS and iOS.

        * fast/web-share/share-with-no-url.html: Added.
        * fast/web-share/share-with-no-url-expected.txt: Added.
        Add a new test that the sheet is successfully invoked even when a URL is not provided.

2018-10-10  Devin Rousso  <drousso@apple.com>

        Web Inspector: notify the frontend when a canvas has started recording via console.record
        https://bugs.webkit.org/show_bug.cgi?id=190306

        Reviewed by Brian Burg.

        * inspector/canvas/recording-2d.html:
        * inspector/canvas/recording-bitmaprenderer.html:
        * inspector/canvas/recording-webgl-snapshots.html:
        * inspector/canvas/recording-webgl.html:
        * inspector/canvas/resources/recording-utilities.js:
        (TestPage.registerInitializer.window.startRecording):
        Wait to complete the test until the "LastFrame" event is fired, ensuring that any running
        commands don't affect the next test case.

2018-10-09  Antoine Quint  <graouts@apple.com>

        Remove the frames() timing function
        https://bugs.webkit.org/show_bug.cgi?id=190034
        <rdar://problem/44827544>

        Reviewed by Dean Jackson.

        * legacy-animation-engine/transitions/frames-timing-function-expected.txt:
        * legacy-animation-engine/transitions/transitions-parsing-expected.txt:
        * transitions/frames-timing-function-expected.txt:
        * transitions/transitions-parsing-expected.txt:

2018-10-09  Devin Rousso  <drousso@apple.com>

        Web Inspector: show redirect requests in Network and Timelines tabs
        https://bugs.webkit.org/show_bug.cgi?id=150005
        <rdar://problem/5378164>

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/network/resource-timing-expected.txt:
        * http/tests/inspector/network/resource-timing.html:

        * http/tests/inspector/network/resources/delay.php: Added.
        * http/tests/inspector/network/resources/redirect.php: Added.

2018-10-09  Said Abou-Hallawa  <sabouhallawa@apple.com>

        REGRESSION(r234620): SVGLangSpace::svgAttributeChanged() should invalidate the renderer of the SVGGeometryElement descendant only
        https://bugs.webkit.org/show_bug.cgi?id=190411

        Reviewed by Simon Fraser.

        * svg/dynamic-updates/SVGStopElement-dom-xml-lang-attrr-expected.txt: Added.
        * svg/dynamic-updates/SVGStopElement-dom-xml-lang-attrr.html: Added.

2018-10-09  Chris Dumez  <cdumez@apple.com>

        Anchor target should be ignored on activation when the download attribute is set
        https://bugs.webkit.org/show_bug.cgi?id=190408

        Reviewed by Geoffrey Garen.

        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-base-target-popup-not-allowed-expected.txt: Added.
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-base-target-popup-not-allowed.html: Added.
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target-popup-not-allowed-expected.txt: Added.
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target-popup-not-allowed.html: Added.
        Add layout test coverage.

        * http/tests/download/anchor-load-after-download.html:
        * http/tests/workers/service/resources/registration-task-queue-scheduling-1.js:
        Update existing WK2-only layout tests to call testRunner.setCanOpenWindows() since they rely on
        opening a new window. We failed to notice the issue because these tests are not run on WK1.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:
        Skip new tests on WebKit1 since the download attribute is only supported on WebKit2.

2018-10-09  Chris Dumez  <cdumez@apple.com>

        Unreviewed, skip fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target.html on iOS.

        The download attribute is not supported on iOS yet.

        * platform/ios-wk2/TestExpectations:

2018-10-09  Devin Rousso  <drousso@apple.com>

        Web Inspector: REGRESSION: fix canvas test failures after r236952 and r236954
        https://bugs.webkit.org/show_bug.cgi?id=190403

        Reviewed by Joseph Pecoraro.

        * inspector/canvas/create-context-webmetal.html:
        Fix missing parenthesis.

        * inspector/canvas/resources/shaderProgram-utilities.js:
        (createProgram):
        (TestPage.registerInitializer.awaitProgramAdded):
        (TestPage.registerInitializer):
        (TestPage.registerInitializer.window.initializeTestSuite):
        Replace the `WI.CanvasManager` events (which were removed) with listeners for events on the
        specific `WI.Canvas`.

2018-10-09  Chris Dumez  <cdumez@apple.com>

        REGRESSION (Safari 12): Download of Blob URL fails
        https://bugs.webkit.org/show_bug.cgi?id=190351
        <rdar://problem/45091181>

        Reviewed by Geoffrey Garen.

        Add layout test coverage.

        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target-expected.txt: Added.
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target.html: Added.

2018-10-09  Youenn Fablet  <youenn@apple.com>

        Add support for IceCandidate stats
        https://bugs.webkit.org/show_bug.cgi?id=190329

        Reviewed by Eric Carlson.

        * webrtc/candidate-stats-expected.txt: Added.
        * webrtc/candidate-stats.html: Added.
        * webrtc/routines.js:
        * webrtc/video-stats.html:

2018-10-09  Philippe Normand  <pnormand@igalia.com>

        [GStreamer] Stealing cross-origin video pixel with HLS
        https://bugs.webkit.org/show_bug.cgi?id=190003

        Reviewed by Xabier Rodriguez-Calvar.

        * platform/gtk/TestExpectations: Unflag now-passing test.

2018-10-08  Devin Rousso  <drousso@apple.com>

        Fix inspector/canvas/recording.html after r236952

        Unreviewed. Test gardening.

        * inspector/canvas/recording-expected.txt:
        * inspector/canvas/recording.html:
        Recordings default to only capturing a single frame, so add a parameter to ensure that we
        are capturing multiple frames.

2018-10-08  Wenson Hsieh  <wenson_hsieh@apple.com>

        [Cocoa] [WK2] Add support for text alignment and text lists in font attributes
        https://bugs.webkit.org/show_bug.cgi?id=190342
        <rdar://problem/44767118>

        Reviewed by Tim Horton.

        * editing/mac/attributed-string/attributed-string-for-typing-expected.txt:
        * editing/mac/attributed-string/attributed-string-for-typing-with-color-filter-expected.txt:
        * platform/mac-sierra/editing/mac/attributed-string/attributed-string-for-typing-expected.txt:
        * platform/mac-sierra/editing/mac/attributed-string/attributed-string-for-typing-with-color-filter-expected.txt:

        Rebaseline these two layout tests, now that typing attributes include an NSParagraphStyle.

2018-10-08  Justin Fan  <justin_fan@apple.com>

        WebGPU: Rename old WebGPU prototype to WebMetal
        https://bugs.webkit.org/show_bug.cgi?id=190325
        <rdar://problem/44990443>

        Reviewed by Dean Jackson.

        Rename WebGPU prototype files to WebMetal in preparation for implementing the new (Oct 2018) WebGPU interface.

        * fast/canvas/webgpu/webgpu-runtime-flag-expected.txt: Removed.
        * fast/canvas/webmetal/webmetal-dispatch-expected.txt: Renamed from LayoutTests/fast/canvas/webgpu/webgpu-dispatch-expected.txt.
        * fast/canvas/webmetal/webmetal-dispatch.html: Renamed from LayoutTests/fast/canvas/webgpu/webgpu-dispatch.html.
        * fast/canvas/webmetal/webmetal-runtime-flag-expected.txt: Added.
        * fast/canvas/webmetal/webmetal-runtime-flag.html: Renamed from LayoutTests/fast/canvas/webgpu/webgpu-runtime-flag.html.
        * inspector/canvas/create-context-webmetal-expected.txt: Renamed from LayoutTests/inspector/canvas/create-context-webgpu-expected.txt.
        * inspector/canvas/create-context-webmetal.html: Renamed from LayoutTests/inspector/canvas/create-context-webgpu.html.
        * inspector/canvas/resolveCanvasContext-webgpu-expected.txt: Removed.
        * inspector/canvas/resolveCanvasContext-webmetal-expected.txt: Added.
        * inspector/canvas/resolveCanvasContext-webmetal.html: Renamed from LayoutTests/inspector/canvas/resolveCanvasContext-webgpu.html.
        * platform/gtk/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:
        * platform/win/TestExpectations:

2018-10-08  Devin Rousso  <drousso@apple.com>

        Web Inspector: allow multiple canvases to be recorded at the same time
        https://bugs.webkit.org/show_bug.cgi?id=190305

        Reviewed by Brian Burg.

        * inspector/canvas/recording-2d.html:
        * inspector/canvas/recording-bitmaprenderer.html:
        * inspector/canvas/recording-expected.html:
        * inspector/canvas/recording-webgl.html:
        * inspector/canvas/recording.html:
        * inspector/canvas/resources/recording-utilities.js:
        (TestPage.registerInitializer.window.startRecording.handleRecordingProgress):
        (TestPage.registerInitializer.window.startRecording):
        (TestPage.registerInitializer.window.consoleRecord):
        (TestPage.registerInitializer):

2018-10-08  Dean Jackson  <dino@apple.com>

        CrashTracer: backboardd at Recursion :: QuartzCore: CA::Render::Updater::prepare_sublayer0
        https://bugs.webkit.org/show_bug.cgi?id=190376
        <rdar://problem/44986520>

        Reviewed by Tim Horton.

        * compositing/layer-creation/deep-tree.html:

2018-10-08  Aditya Keerthi  <akeerthi@apple.com>

        Make <input type=color> a runtime enabled (on-by-default) feature
        https://bugs.webkit.org/show_bug.cgi?id=189162

        Reviewed by Wenson Hsieh and Tim Horton.

        Rebaseline layout tests after enabling input type=color by default.

        * platform/ios-simulator-wk2/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/dom/reflection-forms-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/type-change-state-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/valueMode-expected.txt:
        * platform/ios/fast/forms/color/input-appearance-color-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/html/semantics/forms/the-form-element/form-elements-filter-expected.txt: Added.
        * platform/ios/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/color-expected.txt:
        * platform/mac/accessibility/roles-exposed-expected.txt:
        * platform/mac/fast/selectors/read-only-read-write-input-basics-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/dom/reflection-forms-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/type-change-state-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/valueMode-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt:

2018-10-08  Ryan Haddad  <ryanhaddad@apple.com>

        Move test expectations from ios-12 to ios directory
        https://bugs.webkit.org/show_bug.cgi?id=189839

        Unreviewed test gardening..

        * platform/ios-11/http/tests/quicklook/hide-referer-on-navigation-expected.txt: Removed.
        * platform/ios-11/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt: Removed.
        * platform/ios-11/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/test_hkdf.https-expected.txt: Removed.
        * platform/ios-11/platform/ios/ios/fast/text/opticalFont-expected.txt: Removed.
        * platform/ios-11/platform/ios/ios/fast/text/opticalFontWithTextStyle-expected.txt: Removed.
        * platform/ios-11/platform/ios/ios/fast/text/opticalFontWithWeight-expected.txt: Removed.
        * platform/ios-11/quicklook/powerpoint-expected.txt: Removed.
        * platform/ios-11/quicklook/powerpoint-legacy-expected.txt: Removed.
        * platform/ios-11/quicklook/word-expected.txt: Removed.
        * platform/ios-11/quicklook/word-legacy-expected.txt: Removed.
        * platform/ios-11/svg/batik/text/longTextOnPath-expected.txt: Removed.
        * platform/ios-12/TestExpectations: Removed.
        * platform/ios/TestExpectations:

2018-10-08  Truitt Savell  <tsavell@apple.com>

        Attempt to fix test failure after 236915
        https://bugs.webkit.org/show_bug.cgi?id=190352

        Unreviewed Test Gardening

        * platform/mac-highsierra/hkdf.https.worker-expected.txt: Removed.
        * platform/mac/imported/w3c/canvas/2d.shadow.gradient.basic-expected.png: Removed.
        * platform/mac/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt:

2018-10-08  Truitt Savell  <tsavell@apple.com>

        Moving files to fix failures introduced in r236915
        https://bugs.webkit.org/show_bug.cgi?id=190352

        Unreviewed test gardening 

        * platform/mac-highsierra/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt: Copied from LayoutTests/platform/mac/hkdf.https.worker-expected.txt.
        * platform/mac/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt: Renamed from LayoutTests/platform/mac/hkdf.https.worker-expected.txt.

2018-10-08  Devin Rousso  <drousso@apple.com>

        Web Inspector: group media network entries by the node that triggered the request
        https://bugs.webkit.org/show_bug.cgi?id=189606
        <rdar://problem/44438527>

        Reviewed by Brian Burg.

        * http/tests/inspector/network/resource-initiatorNode-expected.txt: Added.
        * http/tests/inspector/network/resource-initiatorNode.html: Added.

        * inspector/canvas/requestNode.html:
        Test case no longer needed since the document is always requested once it's available.

2018-10-08  Andy Estes  <aestes@apple.com>

        [Payment Request] Requests should be aborted after details settle when the user cancels
        https://bugs.webkit.org/show_bug.cgi?id=190333

        Reviewed by Alex Christensen.

        * http/tests/paymentrequest/payment-request-show-method.https-expected.txt:
        * http/tests/paymentrequest/payment-request-show-method.https.html:

2018-10-08  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r235630?): [Mojave WK1] Layout test compositing/filters/opacity-change-on-filtered-paints-into-ancestor.html is a flaky image failure
        https://bugs.webkit.org/show_bug.cgi?id=189756

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2018-10-08  David Fenton  <david_fenton@apple.com>

        Layout Tests editing/deleting/delete-emoji.html editing/deleting/delete-emoji-1.html editing/deleting/delete-emoji-9.html are passing.
        https://bugs.webkit.org/show_bug.cgi?id=190353

        Unreviewed. Remove the tests from TestExpectations file.

        * platform/mac/TestExpectations:

2018-10-08  Dawei Fenton  <realdawei@apple.com>

        Layout Tests editing/deleting/delete-emoji.html editing/deleting/delete-emoji-1.html editing/deleting/delete-emoji-9.html are passing.
        https://bugs.webkit.org/show_bug.cgi?id=190353

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2018-10-08  Truitt Savell  <tsavell@apple.com>

        Rebaseline imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker.html for Mojave
        https://bugs.webkit.org/show_bug.cgi?id=190352

        Unreviewed test Gardening

        * platform/mac-highsierra/hkdf.https.worker-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt.
        * platform/mac/hkdf.https.worker-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt.
        * platform/mac/imported/w3c/canvas/2d.shadow.gradient.basic-expected.png: Added.

2018-10-05  Devin Rousso  <drousso@apple.com>

        Web Inspector: refactor constructor of WI.Resource
        https://bugs.webkit.org/show_bug.cgi?id=190318

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/network/har/har-basic.html:
        * inspector/unit-tests/resource-collection.html:

2018-10-05  Joseph Pecoraro  <pecoraro@apple.com>

        Try to unflake inspector/layers/layerTreeDidChange.html

        Unreviewed. Test gardening.

        * inspector/layers/layerTreeDidChange.html:
        Force a layout early in the test to try to force layout tree
        update events in the expected sequence.

2018-10-05  Antoine Quint  <graouts@apple.com>

        [Web Animations] REGRESSION (r236809): crash under AnimationTimeline::updateCSSAnimationsForElement()
        https://bugs.webkit.org/show_bug.cgi?id=190307
        <rdar://problem/45009901>

        Reviewed by Dean Jackson.

        This test was also crashing even though it should not have been using the new animation engine. Adding the
        flag to opt into the legacy animation engine.

        * legacy-animation-engine/animations/animation-shorthand-removed.html:

2018-10-04  Chris Dumez  <cdumez@apple.com>

        A Document / Window should lose its browsing context as soon as its iframe is removed from the document
        https://bugs.webkit.org/show_bug.cgi?id=190282

        Reviewed by Ryosuke Niwa.

        Update existing layout test to reflect behavior change.

        * fast/dom/Window/BarInfo-after-frame-removed.html:
        * fast/dom/Window/dom-access-from-closure-iframe-expected.txt:
        * fast/dom/Window/dom-access-from-closure-window-expected.txt:
        * fast/dom/Window/dom-access-from-closure-window-with-gc-expected.txt:
        * fast/dom/Window/resources/dom-access-from-closure-iframe-child.html:
        * fast/dom/Window/resources/dom-access-from-closure-window-child.html:
        * fast/events/resources/before-unload-return-string-conversion-frame.html:
        * fast/parser/resources/set-parent-to-javascript-url.html:
        * http/tests/media/media-stream/disconnected-frame.html:
        * http/tests/security/contentSecurityPolicy/resources/checkDidSameOriginChildWindowLoad.js:
        (checkDidLoad):
        * http/tests/security/named-window-property-from-same-origin-inactive-document-expected.txt:
        * http/tests/security/named-window-property-from-same-origin-inactive-document.html:
        * http/tests/security/xss-DENIED-contentWindow-eval-expected.txt:
        * http/tests/security/xss-DENIED-named-window-property-from-cross-origin-inactive-document-expected.txt:
        * http/tests/security/xss-DENIED-named-window-property-from-cross-origin-inactive-document.html:

2018-10-04  Ross Kirsling  <ross.kirsling@sony.com>

        Unreviewed test gardening for WinCairo (and one cross-platform test). 

        * TestExpectations:
        Remove a cross-platform failure that seems to be passing on all platforms now.

        * platform/wincairo/TestExpectations:
        * platform/wincairo/editing/pasteboard/emacs-ctrl-k-y-001-expected.txt: Added.

2018-10-04  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Table should support multiple selection and Cmd-click behavior
        https://bugs.webkit.org/show_bug.cgi?id=189705
        <rdar://problem/44571170>

        Reviewed by Devin Rousso.

        * inspector/table/resources/table-utilities.js: Added.
        (TestPage.registerInitializer.InspectorTest.TableDataSource):
        (TestPage.registerInitializer.InspectorTest.TableDataSource.prototype.get items):
        (TestPage.registerInitializer.InspectorTest.TableDataSource.prototype.tableNumberOfRows):
        (TestPage.registerInitializer.InspectorTest.TableDelegate):
        (TestPage.registerInitializer.InspectorTest.TableDelegate.prototype.tableSelectionDidChange):
        (TestPage.registerInitializer.InspectorTest.TableDelegate.prototype.tablePopulateCell):
        (TestPage.registerInitializer.InspectorTest.createTable):
        (TestPage.registerInitializer):

        * inspector/table/table-selection-expected.txt: Added.
        * inspector/table/table-selection.html: Added.
        * inspector/unit-tests/index-set-expected.txt: Added.
        * inspector/unit-tests/index-set.html: Added.

2018-10-03  Ryosuke Niwa  <rniwa@webkit.org>

        MutationRecord doesn't keep JS wrappers of target, addedNodes, and removedNodes alive
        https://bugs.webkit.org/show_bug.cgi?id=190277

        Reviewed by Antti Koivisto.

        Added two regression tests for making sure mutation observers and mutation records keep JS wrappers
        of the enqueued nodes alive. Also see r236799 for a previous failed attempt to add a similar test.

        * fast/dom/MutationObserver/mutation-observer-keeps-js-wrappers-of-nodes-alive-expected.txt: Added.
        * fast/dom/MutationObserver/mutation-observer-keeps-js-wrappers-of-nodes-alive.html: Added.
        * fast/dom/MutationObserver/mutation-record-keeps-js-wrappers-of-nodes-alive-expected.txt: Added.
        * fast/dom/MutationObserver/mutation-record-keeps-js-wrappers-of-nodes-alive.html: Added.

2018-10-04  Devin Rousso  <drousso@apple.com>

        Web Inspector: merge ProbeManager into DebuggerManager
        https://bugs.webkit.org/show_bug.cgi?id=190225

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/debugger/debugger-test.js:
        (TestPage.registerInitializer.InspectorTest.startTracingProbes):
        (TestPage.registerInitializer):
        * http/tests/inspector/resources/probe-test.js:
        (TestPage.registerInitializer.ProtocolTest.Probe.installTracingListeners):
        (TestPage.registerInitializer):

2018-10-04  Devin Rousso  <drousso@apple.com>

        Web Inspector: some files not listed in OpenResourceDialog
        https://bugs.webkit.org/show_bug.cgi?id=190272

        Reviewed by Joseph Pecoraro.

        * inspector/unit-tests/resource-query-controller-expected.txt:
        * inspector/unit-tests/resource-query-controller.html:

2018-10-04  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Move time out control from WebProcess to UIProcess
        https://bugs.webkit.org/show_bug.cgi?id=189642
        <rdar://problem/44476765>

        Reviewed by Chris Dumez.

        This patch also fixes some flaky behaviours regarding to the dirty ASN.1 decoder.

        * http/wpt/webauthn/public-key-credential-create-failure-local-silent.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-local-silent.https.html: Copied from LayoutTests/http/wpt/webauthn/public-key-credential-create-failure-local.https.html.
        * http/wpt/webauthn/public-key-credential-create-failure-local.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-create-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-create-failure.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-create-failure.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure-local-silent.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-local-silent.https.html: Copied from LayoutTests/http/wpt/webauthn/public-key-credential-get-failure-local.https.html.
        * http/wpt/webauthn/public-key-credential-get-failure-local.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-get-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-get-failure.https.html:
        * http/wpt/webauthn/resources/util.js:

2018-10-04  Chris Dumez  <cdumez@apple.com>

        Regression(r236779): Crash when changing the input element type from inside an 'input' event listener
        https://bugs.webkit.org/show_bug.cgi?id=190252

        Reviewed by Alex Christensen.

        Add layout test coverage.

        * fast/dom/HTMLInputElement/change-type-in-click-event-listener-expected.txt: Added.
        * fast/dom/HTMLInputElement/change-type-in-click-event-listener.html: Added.
        * fast/dom/HTMLInputElement/change-type-in-input-event-listener-expected.txt: Added.
        * fast/dom/HTMLInputElement/change-type-in-input-event-listener.html: Added.

2018-10-04  YUHAN WU  <yuhan_wu@apple.com>

        runtime flag and IDL for MediaRecorder
        https://bugs.webkit.org/show_bug.cgi?id=190018

        Reviewed by Youenn Fablet and Chris Dumez.

        * platform/win/TestExpectations:
        * fast/mediacapturefromelement/CanvasCaptureMediaStream-capture-out-of-DOM-element-expected.txt:
        * fast/mediacapturefromelement/CanvasCaptureMediaStream-framerate-0-expected.txt:
        * fast/mediacapturefromelement/CanvasCaptureMediaStream-imagebitmaprenderingcontext-expected.txt:

2018-10-04  Chris Dumez  <cdumez@apple.com>

        Unreviewed, rolling out r236803.

        Caused crashes on some bots

        Reverted changeset:

        "Regression(r236779): Crash when changing the input element
        type from inside an 'input' event listener"
        https://bugs.webkit.org/show_bug.cgi?id=190252
        https://trac.webkit.org/changeset/236803

2018-10-03  Justin Michaud  <justin_michaud@apple.com>

        Registered custom properties should allow inheritance to be controlled
        https://bugs.webkit.org/show_bug.cgi?id=190038

        Reviewed by Antti Koivisto.

        Add tests to check css registered custom properties with inherits. Also test
        calc expression evaluation for inherited registered custom properties.

        * css-custom-properties-api/inherits-expected.txt: Added.
        * css-custom-properties-api/inherits.html: Added.
        * css-custom-properties-api/length-expected.txt: Added.
        * css-custom-properties-api/length.html: Added.
        * css-custom-properties-api/length2-expected.txt: Added.
        * css-custom-properties-api/length2.html: Added.

2018-10-03  Youenn Fablet  <youenn@apple.com>

        Add VP8 support to WebRTC
        https://bugs.webkit.org/show_bug.cgi?id=189976

        Reviewed by Eric Carlson.

        * webrtc/audio-peer-connection-g722.html:
        * webrtc/routines.js:
        * webrtc/video-mute-vp8-expected.txt: Added.
        * webrtc/video-mute-vp8.html: Added.

2018-09-28  Jiewen Tan  <jiewen_tan@apple.com>

        [WebCrypto] ECDSA could not deal with invalid signature inputs
        https://bugs.webkit.org/show_bug.cgi?id=189879
        <rdar://problem/44701276>

        Reviewed by Brent Fulgham.

        * crypto/subtle/ecdsa-verify-malformed-parameters-expected.txt:
        * crypto/subtle/ecdsa-verify-malformed-parameters.html:

2018-10-03  Antoine Quint  <graouts@apple.com>

        [Web Animations] REGRESSION: setting 'animation-name: none' after a 'fill: forwards' animation has completed does not revert to the unanimated style
        https://bugs.webkit.org/show_bug.cgi?id=190257
        <rdar://problem/41341473>

        Reviewed by Dean Jackson.

        Add a test that checks that an animation with fill: forwards no longer applies to an element once it's been removed.

        * animations/animation-fill-forwards-removal-expected.txt: Added.
        * animations/animation-fill-forwards-removal.html: Added.

2018-10-03  Chris Dumez  <cdumez@apple.com>

        Regression(r236779): Crash when changing the input element type from inside an 'input' event listener
        https://bugs.webkit.org/show_bug.cgi?id=190252

        Reviewed by Alex Christensen.

        Add layout test coverage.

        * fast/dom/HTMLInputElement/change-type-in-click-event-listener-expected.txt: Added.
        * fast/dom/HTMLInputElement/change-type-in-click-event-listener.html: Added.
        * fast/dom/HTMLInputElement/change-type-in-input-event-listener-expected.txt: Added.
        * fast/dom/HTMLInputElement/change-type-in-input-event-listener.html: Added.

2018-10-03  Matt Lewis  <jlewis3@apple.com>

        Unreviewed, rolling out r236781.

        The test added with this commit is timing out consistently.

        Reverted changeset:

        "GC can collect JS wrappers of nodes in the mutation records
        waiting to be delivered"
        https://bugs.webkit.org/show_bug.cgi?id=190115
        https://trac.webkit.org/changeset/236781

2018-10-03  Youenn Fablet  <youenn@apple.com>

        Enable H264 simulcast
        https://bugs.webkit.org/show_bug.cgi?id=190167

        Reviewed by Eric Carlson.

        * TestExpectations:
        * webrtc/simulcast-h264-expected.txt: Added.
        * webrtc/simulcast-h264.html: Added.

2018-10-03  Ryosuke Niwa  <rniwa@webkit.org>

        Enable selectionAcrossShadowBoundariesEnabled by default in WebKitLegacy
        https://bugs.webkit.org/show_bug.cgi?id=190238

        Reviewed by Antti Koivisto.

        Removed the unnecessary webkit-test-runner directive.

        * editing/pasteboard/copy-paste-across-shadow-boundaries-1.html:
        * editing/pasteboard/copy-paste-across-shadow-boundaries-2.html:
        * editing/pasteboard/copy-paste-across-shadow-boundaries-3.html:
        * editing/pasteboard/copy-paste-across-shadow-boundaries-4.html:
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-1.html:
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-2.html:
        * editing/pasteboard/copy-paste-with-shadow-content.html:
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-1.html:
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-2.html:
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-3.html:
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-4.html:
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-5.html:
        * editing/selection/selection-across-shadow-boundaries-readonly-1.html:
        * editing/selection/selection-across-shadow-boundaries-readonly-2.html:
        * editing/selection/selection-across-shadow-boundaries-readonly-3.html:
        * editing/selection/selection-across-shadow-boundaries-user-select-all-1.html:

2018-10-02  Fujii Hironori  <Hironori.Fujii@sony.com>

        [WinCairo][BuildBot] archive-test-results fails to delete pywebsocket.ws.log-err.txt
        https://bugs.webkit.org/show_bug.cgi?id=190236

        Unreviewed test gardening.

        * platform/wincairo/TestExpectations: Skipped http/wpt and imported/w3c.

2018-10-02  Ryosuke Niwa  <rniwa@webkit.org>

        Copying content with shadow DOM doesn't copy any contents
        https://bugs.webkit.org/show_bug.cgi?id=157443

        Reviewed by Wenson Hsieh.

        Added tests for copying and pasting across shadow boundaries with HTML and plain text.

        * editing/pasteboard/copy-paste-across-shadow-boundaries-1-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-1.html: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-2-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-2.html: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-3-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-3.html: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-4-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-4.html: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-1-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-1.html: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-2-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-2.html: Added.
        * editing/pasteboard/copy-paste-with-shadow-content-expected.txt: Added.
        * editing/pasteboard/copy-paste-with-shadow-content.html: Added.

2018-10-01  Ryosuke Niwa  <rniwa@webkit.org>

        GC can collect JS wrappers of nodes in the mutation records waiting to be delivered
        https://bugs.webkit.org/show_bug.cgi?id=190115

        Reviewed by Geoffrey Garen.

        Added a regression test.

        * fast/dom/MutationObserver/mutation-observer-retains-js-wrappers-of-targets-alive-expected.txt: Added.
        * fast/dom/MutationObserver/mutation-observer-retains-js-wrappers-of-targets-alive.html: Added.

2018-10-02  Chris Dumez  <cdumez@apple.com>

        radio / checkbox inputs should fire "click, input, change" events in order when clicked
        https://bugs.webkit.org/show_bug.cgi?id=190223

        Reviewed by Ryosuke Niwa.

        Update existing test to reflect behavior change. I have verified that our new behavior
        on this test is consistent with Gecko and Chrome.

        * fast/forms/radio/radio-group-keyboard-change-event-expected.txt:
        * fast/forms/radio/radio-group-keyboard-change-event.html:

2018-10-02  Chris Dumez  <cdumez@apple.com>

        fieldset.elements should return an HTMLCollection instead of an HTMLFormControlsCollection
        https://bugs.webkit.org/show_bug.cgi?id=190218

        Reviewed by Alex Christensen.

        Update existing tests to reflect behavior change, after checking that our behavior is consistent
        with Gecko and Blink on these tests.

        * fast/forms/fieldset/fieldset-elements-expected.txt:
        * fast/forms/fieldset/fieldset-elements-htmlcollection-expected.txt: Added.
        * fast/forms/fieldset/fieldset-elements-htmlcollection.html: Added.
        * fast/forms/fieldset/fieldset-elements.html:
        * fast/forms/fieldset/fieldset-form-collection-radionode-list-expected.txt: Removed.
        * fast/forms/fieldset/fieldset-form-collection-radionode-list.html: Removed.

2018-10-02  Devin Rousso  <drousso@apple.com>

        Web Inspector: prevent layer events from firing until the layer information is re-requested
        https://bugs.webkit.org/show_bug.cgi?id=190159

        Reviewed by Joseph Pecoraro.

        * inspector/layers/layerTreeDidChange-expected.txt: Added.
        * inspector/layers/layerTreeDidChange.html: Added.

2018-10-02  Devin Rousso  <drousso@apple.com>

        Web Inspector: rename frontend managers to be more consistent with backend agents
        https://bugs.webkit.org/show_bug.cgi?id=190160

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/dom/cross-domain-inspected-node-access.html:
        * http/tests/inspector/dom/disconnect-dom-tree-after-main-frame-navigation.html:
        * http/tests/inspector/dom/shapes-test.js:
        * http/tests/inspector/network/har/har-page.html:
        * http/tests/inspector/network/loadResource-insecure-resource.html:
        * http/tests/inspector/network/resource-response-source-memory-cache-revalidate-expired-only.html:
        * http/tests/inspector/network/resource-response-source-memory-cache.html:
        * http/tests/inspector/network/resource-sizes-memory-cache.html:
        * http/tests/inspector/network/set-resource-caching-disabled-memory-cache.html:
        * http/tests/websocket/tests/hybi/inspector/before-load.html:
        * http/tests/websocket/tests/hybi/inspector/resolveWebSocket.html:
        * inspector/canvas/requestNode.html:
        * inspector/codemirror/resources/prettyprinting/utilities.js:
        (TestPage.registerInitializer.loadPrettyPrintingTestAndExpectedResults):
        (TestPage.registerInitializer.window.addPrettyPrintingTests):
        (TestPage.registerInitializer):
        * inspector/console/clearMessages.html:
        * inspector/console/command-line-api.html:
        * inspector/console/console-api.html:
        * inspector/console/console-count.html:
        * inspector/console/console-table.html:
        * inspector/console/console-time.html:
        * inspector/console/message-stack-trace.html:
        * inspector/console/messageAdded-from-named-evaluations.html:
        * inspector/console/messageRepeatCountUpdated.html:
        * inspector/console/messagesCleared.html:
        * inspector/console/webcore-logging-expected.txt:
        * inspector/console/webcore-logging.html:
        * inspector/controller/runtime-controller-import.html:
        * inspector/controller/runtime-controller.html:
        * inspector/css/add-rule.html:
        * inspector/css/createStyleSheet.html:
        * inspector/css/css-property.html:
        * inspector/css/getAllStyleSheets.html:
        * inspector/css/manager-preferredInspectorStyleSheetForFrame.html:
        * inspector/css/matched-style-properties.html:
        * inspector/css/modify-css-property.html:
        * inspector/css/modify-rule-selector.html:
        * inspector/css/pseudo-element-matches-for-pseudo-element-node.html:
        * inspector/css/pseudo-element-matches.html:
        * inspector/css/selector-dynamic-specificity.html:
        * inspector/css/selector-specificity.html:
        * inspector/css/shadow-scoped-style.html:
        * inspector/css/stylesheet-events-basic.html:
        * inspector/css/stylesheet-events-imports.html:
        * inspector/css/stylesheet-events-inspector-stylesheet.html:
        * inspector/css/stylesheet-events-multiple-documents.html:
        * inspector/css/stylesheet-with-mutations.html:
        * inspector/debugger/csp-exceptions.html:
        * inspector/debugger/js-stacktrace.html:
        * inspector/debugger/resources/log-pause-location.js:
        (TestPage.registerInitializer.window.findScript):
        (TestPage.registerInitializer.window.loadMainPageContent):
        (TestPage.registerInitializer.window.logResolvedBreakpointLinesWithContext):
        (TestPage.registerInitializer.window.logLinesWithContext):
        * inspector/debugger/stepping/stepping-through-autoContinue-breakpoint.html:
        * inspector/dom-debugger/dom-breakpoints.html:
        * inspector/dom-debugger/xhr-breakpoints.html:
        * inspector/dom/breakpoint-for-event-listener.html:
        * inspector/dom/csp-big5-hash.html:
        * inspector/dom/csp-hash.html:
        * inspector/dom/customElementState.html:
        * inspector/dom/domutilities-csspath.html:
        * inspector/dom/domutilities-path-dump.html:
        * inspector/dom/domutilities-xpath.html:
        * inspector/dom/event-listener-add-remove.html:
        * inspector/dom/getEventListenersForNode.html:
        * inspector/dom/getOuterHTML.html:
        * inspector/dom/hideHighlight.html:
        * inspector/dom/highlightFrame.html:
        * inspector/dom/highlightNode.html:
        * inspector/dom/highlightNodeList.html:
        * inspector/dom/highlightSelector.html:
        * inspector/dom/insertAdjacentHTML.html:
        * inspector/dom/inspect.html:
        * inspector/dom/pseudo-element-dynamic.html:
        * inspector/dom/pseudo-element-static.html:
        * inspector/dom/push-node-by-path-to-frontend.html:
        * inspector/dom/setEventListenerDisabled.html:
        * inspector/dom/setInspectedNode.html:
        * inspector/dom/setOuterHTML-no-document-element.html:
        * inspector/dom/setOuterHTML.html:
        * inspector/dom/shadow-and-non-shadow-children.html:
        * inspector/dom/shadowRootType.html:
        * inspector/dom/template-content.html:
        * inspector/formatting/resources/utilities.js:
        (TestPage.registerInitializer.loadFormattingTestAndExpectedResults):
        (TestPage.registerInitializer.window.addFormattingTests):
        (TestPage.registerInitializer):
        * inspector/indexeddb/clearObjectStore.html:
        * inspector/indexeddb/deleteDatabaseNamesWithSpace.html:
        * inspector/indexeddb/requestData.html:
        * inspector/indexeddb/requestDatabase.html:
        * inspector/indexeddb/requestDatabaseNames.html:
        * inspector/layers/layer-tree-manager.html:
        * inspector/model/dom-node.html:
        * inspector/model/frame-extra-scripts.html:
        * inspector/model/script-resource-relationship.html:
        * inspector/model/stack-trace.html:
        * inspector/page/empty-or-missing-resources.html:
        * inspector/page/hidpi-snapshot-size.html:
        * inspector/page/main-frame-resource.html:
        * inspector/runtime/change-execution-context-identifier.html:
        * inspector/runtime/saveResult.html:
        * inspector/storage/domStorage-events.html:
        * inspector/worker/console-basic.html:
        * inspector/worker/resources-in-worker.html:

2018-10-02  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [Curl] Fix missing values of  resource timing API.
        https://bugs.webkit.org/show_bug.cgi?id=190193

        Reviewed by Alex Christensen.

        * platform/wincairo/TestExpectations:

2018-10-02  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Cue with line setting is not rendered correctly
        https://bugs.webkit.org/show_bug.cgi?id=190168

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/line-position.vtt: Added.
        * media/track/track-cue-line-position-expected-mismatch.html: Added.
        * media/track/track-cue-line-position.html: Added.

2018-10-02  Carlos Eduardo Ramalho  <cadubentzen@gmail.com>

        [GTK] fast/forms/color/input-appearance-color.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189350

        Reviewed by Michael Catanzaro.

        Update test expectations to match changes introduced in r235435.

        * platform/gtk/TestExpectations:
        * platform/gtk/fast/forms/color/input-appearance-color-expected.png:
        * platform/gtk/fast/forms/color/input-appearance-color-expected.txt:

2018-10-01  Dean Jackson  <dino@apple.com>

        Remove CSS Animation Triggers
        https://bugs.webkit.org/show_bug.cgi?id=190175
        <rdar://problem/44925626>

        Reviewed by Simon Fraser.

        Remove a bunch of tests that no longer have an implementation.

        * TestExpectations:
        * animations/trigger-computed-style-expected.txt: Removed.
        * animations/trigger-computed-style.html: Removed.
        * animations/trigger-container-scroll-boundaries-expected.txt: Removed.
        * animations/trigger-container-scroll-boundaries.html: Removed.
        * animations/trigger-container-scroll-empty-expected.txt: Removed.
        * animations/trigger-container-scroll-empty.html: Removed.
        * animations/trigger-container-scroll-simple-expected.txt: Removed.
        * animations/trigger-container-scroll-simple.html: Removed.
        * animations/trigger-parsing-expected.txt: Removed.
        * animations/trigger-parsing.html: Removed.
        * fast/css/compare-animation-trigger-expected.txt: Removed.
        * fast/css/compare-animation-trigger.html: Removed.
        * legacy-animation-engine/animations/trigger-computed-style-expected.txt: Removed.
        * legacy-animation-engine/animations/trigger-computed-style.html: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-boundaries-expected.txt: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-boundaries.html: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-empty-expected.txt: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-empty.html: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-simple-expected.txt: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-simple.html: Removed.
        * legacy-animation-engine/animations/trigger-parsing-expected.txt: Removed.
        * legacy-animation-engine/animations/trigger-parsing.html: Removed.
        * legacy-animation-engine/fast/css/compare-animation-trigger-expected.txt: Removed.
        * legacy-animation-engine/fast/css/compare-animation-trigger.html: Removed.
        * platform/gtk/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        * platform/wincairo/TestExpectations:

2018-10-02  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r236624 and r236671.
        https://bugs.webkit.org/show_bug.cgi?id=190207

        The change in r236624 introduced crashes on the bots
        (Requested by ryanhaddad on #webkit).

        Reverted changesets:

        "Refactoring: eliminate raw pointer usage in Fullscreen code"
        https://bugs.webkit.org/show_bug.cgi?id=188747
        https://trac.webkit.org/changeset/236624

        "Unify implementation in VideoFullscreenInterfaceAVKit"
        https://bugs.webkit.org/show_bug.cgi?id=190091
        https://trac.webkit.org/changeset/236671

2018-10-02  Frederic Wang  <fwang@igalia.com>

        [WPE] Enable more Cache Storage and Service Workers tests
        https://bugs.webkit.org/show_bug.cgi?id=190198

        Reviewed by Michael Catanzaro.

        * platform/wpe/TestExpectations: Unskip most tests and add expectations for a few of them.

2018-10-02  Frederic Wang  <fwang@igalia.com>

        [GTK] Enable more Cache Storage and Service Workers tests
        https://bugs.webkit.org/show_bug.cgi?id=190196

        Reviewed by Michael Catanzaro.

        * platform/gtk/TestExpectations: Unskip most tests are add some failure annotations.

2018-10-02  Thibault Saunier  <tsaunier@igalia.com>

        [GTK][WPE] Blacklist more tests that are requiring webrtc <-> webaudio bridging
        https://bugs.webkit.org/show_bug.cgi?id=189829

        Reviewed by Alejandro G. Castro.

        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-10-02  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [WinCairo] Enable some wpt tests.
        https://bugs.webkit.org/show_bug.cgi?id=190129

        Unreviewed test gardening..

        * platform/wincairo/TestExpectations:
        * platform/wincairo/http/wpt/html/browsers/browsing-the-web/navigating-across-documents/click-expected.txt: Added.
        * platform/wincairo/http/wpt/html/browsers/browsing-the-web/navigating-across-documents/href-expected.txt: Added.

2018-10-01  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed test gardening.

        * platform/wincairo/TestExpectations:

2018-10-01  Ryosuke Niwa  <rniwa@webkit.org>

        Removed a failing test expectation on imported/w3c/web-platform-tests/shadow-dom/slotchange.html
        since we haven't seen a single failure after the fix in r236440.

        * platform/mac/TestExpectations:

2018-10-01  Myles C. Maxfield  <mmaxfield@apple.com>

        [Cocoa] Update delete-emoji expected results
        https://bugs.webkit.org/show_bug.cgi?id=190182

        Unreviewed.

        Simply update the expected results.

        * platform/mac-highsierra/editing/deleting/delete-emoji-1-expected.txt: Copied from LayoutTests/platform/mac/editing/deleting/delete-emoji-1-expected.txt.
        * platform/mac-highsierra/editing/deleting/delete-emoji-9-expected.txt: Copied from LayoutTests/platform/mac/editing/deleting/delete-emoji-9-expected.txt.
        * platform/mac-highsierra/editing/deleting/delete-emoji-expected.txt: Copied from LayoutTests/platform/mac/editing/deleting/delete-emoji-expected.txt.
        * platform/mac/TestExpectations:
        * platform/mac/editing/deleting/delete-emoji-1-expected.txt:
        * platform/mac/editing/deleting/delete-emoji-9-expected.txt:
        * platform/mac/editing/deleting/delete-emoji-expected.txt:

2018-10-01  Ryosuke Niwa  <rniwa@webkit.org>

        Add a new variant of serializePreservingVisualAppearance which takes VisibleSelection
        https://bugs.webkit.org/show_bug.cgi?id=190108

        Reviewed by Wenson Hsieh.

        Rebaselined the test since the bug that interchange new lines are inserted in the last table cell is fixed.
        Also updated the description in the test to reflect this change.

        * editing/pasteboard/paste-table-003-expected.txt:
        * editing/pasteboard/paste-table-003.html:

2018-10-01  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rebaseline tests after r236632.

        * platform/ios/css3/blending/repaint/blend-mode-isolate-stacking-context-expected.txt:
        * platform/ios/css3/blending/repaint/blend-mode-turn-off-isolation-expected.txt:
        * platform/ios/css3/blending/repaint/blend-mode-turn-off-isolation-no-effect-expected.txt: Added.

2018-10-01  Sihui Liu  <sihui_liu@apple.com>

        Remove StorageProcess
        https://bugs.webkit.org/show_bug.cgi?id=189975

        Reviewed by Geoffrey Garen.

        Since Service Worker management is in netowrk process now, we should terminate network 
        process instead of storage process.

        * http/wpt/service-workers/persistent-importScripts.html:

2018-10-01  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Import a JS CBOR coder
        https://bugs.webkit.org/show_bug.cgi?id=189877
        <rdar://problem/44701124>

        Reviewed by Chris Dumez.

        This patch import a 3rd party JS CBOR coder from https://github.com/paroga/cbor-js.
        The library is MIT licensed, which should be fine to use within WebKit.

        As a benefit from the library, tests are updated to check CBOR binaries.

        * http/wpt/credential-management/credentialscontainer-store-basics.https.html:
        * http/wpt/webauthn/idl.https.html:
        * http/wpt/webauthn/public-key-credential-create-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-create-success-local.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-get-success-local.https.html:
        * http/wpt/webauthn/resources/cbor.js: Added.
        * http/wpt/webauthn/resources/util.js:

2018-10-01  Daniel Bates  <dabates@apple.com>

        [iOS] Special keys are misidentified in DOM keyboard events
        https://bugs.webkit.org/show_bug.cgi?id=189974

        Reviewed by Wenson Hsieh.

        Add tests to ensure that we do not regress key identification for special keys.

        Update the expected results for test fast/events/ios/keydown-keyup-special-keys-in-non-editable-element.html
        now that we correctly identify some more keys.

        * fast/events/ios/keydown-keyup-arrow-keys-in-non-editable-element-expected.txt: Added.
        * fast/events/ios/keydown-keyup-arrow-keys-in-non-editable-element.html: Added.
        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element-expected.txt:
        * fast/events/ios/keypress-keys-in-non-editable-element-expected.txt: Added.
        * fast/events/ios/keypress-keys-in-non-editable-element.html: Added.
        * resources/ui-helper.js:
        (window.UIHelper.typeCharacter): Actually type the specified character in DumpRenderTree.

2018-10-01  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r235948?): Layout Test media/media-controls-accessibility.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189674

        Unreviewed test gardening..

        * platform/mac/TestExpectations: Remove flaky expectation.

2018-10-01  Youenn Fablet  <youenn@apple.com>

        [macOS Sierra] Layout Test http/wpt/cache-storage/cache-put-keys.https.any.worker.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=184204

        Reviewed by Chris Dumez.

        * platform/mac-wk2/TestExpectations:

2018-10-01  Chris Dumez  <cdumez@apple.com>

        Make crossOriginObject.then undefined for promises
        https://bugs.webkit.org/show_bug.cgi?id=190094

        Reviewed by Darin Adler.

        Update existing tests to reflect behavior change.

        * http/tests/navigation/process-swap-window-open-expected.txt:
        * http/tests/navigation/process-swap-window-open.html:
        * http/wpt/cross-origin-window-policy/resources/utils.js:
        (testCrossOriginOption):

2018-10-01  Alicia Boya Garc√≠a  <aboya@igalia.com>

        [MSE][GStreamer] Reset running time in PlaybackPipeline::flush()
        https://bugs.webkit.org/show_bug.cgi?id=190076

        Reviewed by Philippe Normand.

        A test where a seek is followed by a redundant append is added. This
        test timed out in the GStreamer MSE implementation before the
        accompanying patch fixed it.

        The MIME type declared in test-48khz-manifest.json has also been
        changed, from non-standard `audio/x-m4a` to `audio/mp4;
        codecs="mp4a.40.2"`, as implied by the MSE specs. This should not
        affect other tests because no other tests were reading this type
        string before.

        * media/media-source/content/test-48khz-manifest.json:
        * media/media-source/media-source-seek-redundant-append-expected.txt: Added.
        * media/media-source/media-source-seek-redundant-append.html: Added.
        * media/video-test.js:

2018-10-01  Antoine Quint  <graouts@apple.com>

        [Web Animations] Fix test regressions after enabling Web Animations with CSS Integration
        https://bugs.webkit.org/show_bug.cgi?id=190032

        Unreviewed. We need to opt into the legacy animation engine for these tests to fix some crashes in other
        tests due to webkit.org/b/186946.

        * legacy-animation-engine/animations/cross-fade-webkit-mask-image.html:
        * legacy-animation-engine/transitions/delay.html:
        * legacy-animation-engine/transitions/transition-timing-function.html:

2018-09-30  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Clean up RealtimeMediaSource settings change handling
        https://bugs.webkit.org/show_bug.cgi?id=189998
        <rdar://problem/44797884>

        Reviewed by Youenn Fablet.

        * webrtc/video-disabled-black.html:

2018-09-29  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r236631.
        https://bugs.webkit.org/show_bug.cgi?id=190112

        Caused various eventSender tests, including fast/css/pseudo-
        active-style-sharing*, to fail (Requested by smfr on #webkit).

        Reverted changeset:

        "Regression(r236512): http/tests/navigation/keyboard-events-
        during-provisional-navigation.html is flaky"
        https://bugs.webkit.org/show_bug.cgi?id=190052
        https://trac.webkit.org/changeset/236631

2018-09-28  Zamiul Haque  <zhaque@apple.com>

        Angled gradient backgrounds in body render vertically when body height is 0
        https://bugs.webkit.org/show_bug.cgi?id=177232
        <rdar://problem/34548230>.

        Reviewed by Tim Horton.

        Added tests to make sure that angled background gradients inside of a 
        body tag of height 0 render as empty white screens.

        * angled-background-repeating-gradient-rendering-vertical.html: Added.
        * angled-background-repeating-gradient-rendering-vertical-expected.html: Added.

2018-09-28  Chris Dumez  <cdumez@apple.com>

        The return value of an OnBeforeUnloadEventHandler should always be coerced into a DOMString
        https://bugs.webkit.org/show_bug.cgi?id=190090

        Reviewed by Ryosuke Niwa.

        Update test that was returning a value in a beforeunload event listener instead of using an
        event handler. The test needs to use an event handler (window.onbeforeunload) as an event
        listener does not have a return value. I have verified that our behavior is consistent with
        Chrome and Firefox on this test, both with an event listener and an event handler.

        * fast/loader/form-submission-after-beforeunload-cancel.html:

2018-09-28  Simon Fraser  <simon.fraser@apple.com>

        RenderLayer::removeOnlyThisLayer() should not call updateLayerPositions()
        https://bugs.webkit.org/show_bug.cgi?id=190093

        Reviewed by Dean Jackson and Zalan Bujtas.
        
        The ordering of the repaints changes.
        
        blend-mode-turn-off-isolation-no-effect.html now issues a repaint, which is expected now.
        Isolation is so rare that this is not a problem.

        * css3/blending/repaint/blend-mode-isolate-stacking-context-expected.txt:
        * css3/blending/repaint/blend-mode-turn-off-isolation-expected.txt:
        * css3/blending/repaint/blend-mode-turn-off-isolation-no-effect-expected.txt:
        * fast/repaint/absolute-position-change-containing-block-expected.txt:

2018-09-28  Devin Rousso  <drousso@apple.com>

        Web Inspector: crash in InspectorNetworkAgent::didReceiveResponse when loading denied x-frame resources
        https://bugs.webkit.org/show_bug.cgi?id=190046

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/network/resources/x-frame-options.php: Added.
        * http/tests/inspector/network/x-frame-options-expected.txt: Added.
        * http/tests/inspector/network/x-frame-options.html: Added.

2018-09-28  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Polish WebAuthN auto-test environment
        https://bugs.webkit.org/show_bug.cgi?id=189283
        <rdar://problem/44117828>

        Reviewed by Chris Dumez.

        This patch does the following few things:
        1. Update tests that employ old mocking mechnism to the new one.
        2. Move tests from http/tests/webauthn to http/wpt/webauthn. As a result, we have one unified place for
        all WebAuthN tests: http/wpt/webauthn.
        3. Add a helper function to check DOMException message as well.

        * TestExpectations:
        * http/tests/webauthn/public-key-credential-create-with-invalid-parameters.https-expected.txt: Removed.
        * http/tests/webauthn/public-key-credential-get-with-invalid-parameters.https-expected.txt: Removed.
        * http/tests/webauthn/public-key-credential-same-origin-with-ancestors-2.https-expected.txt: Removed.
        * http/tests/webauthn/public-key-credential-same-origin-with-ancestors-2.https.html: Removed.
        * http/tests/webauthn/public-key-credential-same-origin-with-ancestors.https-expected.txt: Removed.
        * http/tests/webauthn/public-key-credential-same-origin-with-ancestors.https.html: Removed.
        * http/tests/webauthn/resources/last-layer-frame.https.html: Removed.
        * http/tests/webauthn/resources/util.js: Removed.
        * http/wpt/credential-management/credentialscontainer-store-basics.https.html:
        * http/wpt/webauthn/idl.https.html:
        * http/wpt/webauthn/public-key-credential-create-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-create-failure.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-create-failure.https.html:
        * http/wpt/webauthn/public-key-credential-create-success.https-expected.txt: Removed.
        * http/wpt/webauthn/public-key-credential-create-success.https.html: Removed.
        * http/wpt/webauthn/public-key-credential-create-with-invalid-parameters.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-with-invalid-parameters.https.html: Renamed from LayoutTests/http/tests/webauthn/public-key-credential-create-with-invalid-parameters.https.html.
        * http/wpt/webauthn/public-key-credential-get-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-get-failure.https.html:
        * http/wpt/webauthn/public-key-credential-get-success.https-expected.txt: Removed.
        * http/wpt/webauthn/public-key-credential-get-success.https.html: Removed.
        * http/wpt/webauthn/public-key-credential-get-with-invalid-parameters.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-with-invalid-parameters.https.html: Renamed from LayoutTests/http/tests/webauthn/public-key-credential-get-with-invalid-parameters.https.html.
        * http/wpt/webauthn/public-key-credential-same-origin-with-ancestors.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-same-origin-with-ancestors.https.html: Added.
        * http/wpt/webauthn/resources/last-layer-frame.https.html: Added.
        * http/wpt/webauthn/resources/second-layer-frame.https.html: Renamed from LayoutTests/http/tests/webauthn/resources/second-layer-frame.https.html.
        * http/wpt/webauthn/resources/util.js:
        * platform/gtk/TestExpectations:
        * platform/ios-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        * platform/win/TestExpectations:
        * platform/wincairo/TestExpectations:
        * platform/wpe/TestExpectations:

2018-09-28  Jer Noble  <jer.noble@apple.com>

        Refactoring: eliminate raw pointer usage in Fullscreen code
        https://bugs.webkit.org/show_bug.cgi?id=188747
        <rdar://problem/43541164>

        Reviewed by Alex Christensen.

        Test was causing false pass results due to the webkitPresentationMode being correctly set
        to "inline" during the close() operation; modify the test to only perform the close()
        operation when the presetation mode is changed to "picture-in-picture".

        * media/controls/ipad/close-page-with-picture-in-picture-video-assertion-failure.html:
        * media/controls/ipad/resources/picture-in-picture.html:

2018-09-28  Chris Dumez  <cdumez@apple.com>

        Drop support for cross-origin-window-policy header
        https://bugs.webkit.org/show_bug.cgi?id=190081

        Reviewed by Ryosuke Niwa.

        * http/wpt/cross-origin-window-policy/allow-postmessage-expected.txt: Removed.
        * http/wpt/cross-origin-window-policy/allow-postmessage-from-deny-expected.txt: Removed.
        * http/wpt/cross-origin-window-policy/allow-postmessage-from-deny.html: Removed.
        * http/wpt/cross-origin-window-policy/allow-postmessage-from-deny.html.headers: Removed.
        * http/wpt/cross-origin-window-policy/allow-postmessage.html: Removed.
        * http/wpt/cross-origin-window-policy/cross-origin-window-policy-header-expected.txt: Removed.
        * http/wpt/cross-origin-window-policy/cross-origin-window-policy-header.html: Removed.
        * http/wpt/cross-origin-window-policy/navigation-from-opener-via-open-target-expected.txt: Removed.
        * http/wpt/cross-origin-window-policy/navigation-from-opener-via-open-target.html: Removed.
        * http/wpt/cross-origin-window-policy/navigation-from-subframe-via-anchor-target-expected.txt: Removed.
        * http/wpt/cross-origin-window-policy/navigation-from-subframe-via-anchor-target.html: Removed.
        * http/wpt/cross-origin-window-policy/resources/cross-origin-window-policy-allow-postmessage-pong.html: Removed.
        * http/wpt/cross-origin-window-policy/resources/cross-origin-window-policy-allow-postmessage-pong.html.headers: Removed.
        * http/wpt/cross-origin-window-policy/resources/destination.html: Removed.
        * http/wpt/cross-origin-window-policy/resources/navigate-parent-via-anchor.html: Removed.
        * http/wpt/cross-origin-window-policy/resources/navigation-from-subframe-frame.py: Removed.
        * http/wpt/cross-origin-window-policy/resources/serve-cross-origin-window-policy-header.py: Removed.
        * http/wpt/cross-origin-window-policy/resources/utils.js: Removed.

2018-09-28  Andy Estes  <aestes@apple.com>

        [Apple Pay] Remove the "in-store" button type
        https://bugs.webkit.org/show_bug.cgi?id=190079

        Reviewed by Tim Horton.

        * http/tests/ssl/applepay/ApplePayButton.html:
        * platform/mac/http/tests/ssl/applepay/ApplePayButton-expected.png:
        * platform/mac/http/tests/ssl/applepay/ApplePayButton-expected.txt:

2018-09-28  Dawei Fenton  <realdawei@apple.com>

        WebGL conformance: Failures and Timeouts in suite 2.0.0/conformance
        https://bugs.webkit.org/show_bug.cgi?id=189641

        Unreviewed, skip tests that are timing out.

        * TestExpectations:

2018-09-28  Chris Dumez  <cdumez@apple.com>

        document.open() should throw errors for cross-origin calls
        https://bugs.webkit.org/show_bug.cgi?id=189371
        <rdar://problem/44282700>

        Reviewed by Youenn Fablet.

        Tweak a couple of existing tests to reflect behavior change.

        * fast/dom/HTMLDocument/document-open-return-value.html:
        * fast/parser/tokenizer-close-during-document-write.html:

2018-09-28  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r236605.
        https://bugs.webkit.org/show_bug.cgi?id=190087

        caused three API test timeouts (Requested by jernoble on
        #webkit).

        Reverted changeset:

        "Refactoring: eliminate raw pointer usage in Fullscreen code"
        https://bugs.webkit.org/show_bug.cgi?id=188747
        https://trac.webkit.org/changeset/236605

2018-09-28  Jer Noble  <jer.noble@apple.com>

        Refactoring: eliminate raw pointer usage in Fullscreen code
        https://bugs.webkit.org/show_bug.cgi?id=188747
        <rdar://problem/43541164>

        Reviewed by Alex Christensen.

        Test was causing false pass results due to the webkitPresentationMode being correctly set
        to "inline" during the close() operation; modify the test to only perform the close()
        operation when the presetation mode is changed to "picture-in-picture".

        * media/controls/ipad/close-page-with-picture-in-picture-video-assertion-failure.html:
        * media/controls/ipad/resources/picture-in-picture.html:

2018-09-28  Chris Dumez  <cdumez@apple.com>

        REGRESSION (r236573): [iOS] Layout test editing/pasteboard/emacs-ctrl-a-k-y.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190067

        Unreviewed, re-land ios-specific expected result for this test as they were inadvertently
        dropped in r236573.

        * platform/ios-wk2/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Added.
        * platform/ios/TestExpectations:

2018-09-27  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [Curl] Fix priority issue with multiple cookies with different level of path.
        https://bugs.webkit.org/show_bug.cgi?id=189920

        Reviewed by Fujii Hironori.

        * http/tests/cookies/cookie-with-multiple-level-path-expected.txt: Added.
        * http/tests/cookies/cookie-with-multiple-level-path.html: Added.
        * http/tests/cookies/resources/cookie-with-multiple-level-path.php: Added.

2018-09-27  Ryan Haddad  <ryanhaddad@apple.com>

        [iOS] Layout test editing/pasteboard/emacs-ctrl-a-k-y.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190067

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as failing.

2018-09-27  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Non-redirected top frame navigation should not get captured in statistics
        https://bugs.webkit.org/show_bug.cgi?id=190055
        <rdar://problem/44843460>

        Reviewed by Chris Dumez.

        * http/tests/resourceLoadStatistics/do-not-capture-statistics-for-simple-top-navigations-expected.txt: Added.
        * http/tests/resourceLoadStatistics/do-not-capture-statistics-for-simple-top-navigations.html: Added.

2018-09-27  Chris Dumez  <cdumez@apple.com>

        Regression(r236512): fast/scrolling/scroll-animator-overlay-scrollbars-clicked.html and editing/pasteboard/emacs-ctrl-a-k-y.html are flaky
        https://bugs.webkit.org/show_bug.cgi?id=190048

        Reviewed by Ryosuke Niwa.

        Update editing/pasteboard/emacs-ctrl-a-k-y.html to address flakiness:
        - Stop dumping editing callbacks as some of them may get logged in a slightly different order
          due to IPC ordering, and those are not needed to determine that the test passes.
        - Dump the test as text to avoid needing platform-specific results.

        * editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Added.
        * editing/pasteboard/emacs-ctrl-a-k-y.html:
        * platform/gtk/editing/pasteboard/emacs-ctrl-a-k-y-expected.png: Removed.
        * platform/gtk/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/ios-wk1/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/ios-wk2/editing/pasteboard/emacs-ctrl-a-k-y-expected.png: Removed.
        * platform/ios-wk2/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/mac/editing/pasteboard/emacs-ctrl-a-k-y-expected.png: Removed.
        * platform/mac/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/win/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/wincairo/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/wincairo/editing/pasteboard/emacs-ctrl-k-y-001-expected.txt: Removed.

2018-09-27  Andy Estes  <aestes@apple.com>

        [Payment Request] Update web platform tests
        https://bugs.webkit.org/show_bug.cgi?id=190049

        Reviewed by Youenn Fablet.

        Updated web-platform-tests/payment-request/ to tip-of-tree from web-platform-tests.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-09-27  Alicia Boya Garc√≠a  <aboya@igalia.com>

        [MSE] Fix unwanted sample erase from the decode queue
        https://bugs.webkit.org/show_bug.cgi?id=180643

        Reviewed by Jer Noble.

        Added a test case for the fixed bug.

        * media/media-source/media-source-append-acb-no-frame-lost.html: Added.

2018-09-27  Chris Dumez  <cdumez@apple.com>

        Unreviewed, make fast/scrolling/scroll-animator-overlay-scrollbars-clicked.html more deterministic to address flakiness.

        * fast/scrolling/scroll-animator-overlay-scrollbars-clicked-expected.txt:
        * fast/scrolling/scroll-animator-overlay-scrollbars-clicked.html:

2018-09-27  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Remove temporary compatibility fix for auto-dismiss popups
        https://bugs.webkit.org/show_bug.cgi?id=189980
        <rdar://problem/44780645>

        Reviewed by Alex Christensen.

        This test was for the temporary compatibility fix in:
        https://bugs.webkit.org/show_bug.cgi?id=183620. This change makes it into a
        test that the compatibility fix is no longer there.

        * http/tests/storageAccess/deny-storage-access-under-opener-if-auto-dismiss-expected.txt: Renamed from LayoutTests/http/tests/storageAccess/grant-storage-access-under-opener-expected.txt.
        * http/tests/storageAccess/deny-storage-access-under-opener-if-auto-dismiss.html: Renamed from LayoutTests/http/tests/storageAccess/grant-storage-access-under-opener.html.
        * platform/ios-wk2/TestExpectations:
            Removed comment and entry since https://bugs.webkit.org/show_bug.cgi?id=183714 was fixed long ago.
        * platform/ios/TestExpectations:
            Changed test name.
        * platform/mac-wk2/TestExpectations:
            Changed test name.

2018-09-27  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r236557.

        Really roll out r236557 this time because it breaks internal
        builds.

        Reverted changeset:

        "Add VP8 support to WebRTC"
        https://bugs.webkit.org/show_bug.cgi?id=189976
        https://trac.webkit.org/changeset/236557

2018-09-27  Youenn Fablet  <youenn@apple.com>

        Add VP8 support to WebRTC
        https://bugs.webkit.org/show_bug.cgi?id=189976

        Reviewed by Eric Carlson.

        * webrtc/audio-peer-connection-g722.html:
        * webrtc/routines.js:
        * webrtc/video-mute-vp8-expected.txt: Added.
        * webrtc/video-mute-vp8.html: Added.

2018-09-27  Youenn Fablet  <youenn@apple.com>

        LayoutTest webrtc/video-unmute.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=172879
        <rdar://problem/32548738>

        Reviewed by Eric Carlson.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        * webrtc/video-unmute.html:
        Resort on routines.js black frame routine.
        Reenable test in mac and ios.

2018-09-27  Andy Estes  <aestes@apple.com>

        [Apple Pay] Support granular errors in PaymentDetailsUpdate
        https://bugs.webkit.org/show_bug.cgi?id=189938

        Reviewed by Youenn Fablet.

        * http/tests/resources/payment-request.js:
        (validPaymentDetails):
        (updateDetailsOnShippingAddressChange):
        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrors.https-expected.txt: Added.
        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrors.https.html: Added.
        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrorsV3.https-expected.txt: Added.
        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrorsV3.https.html: Added.
        * platform/mac-wk2/TestExpectations:

2018-09-27  Chris Dumez  <cdumez@apple.com>

        document.open() should not propagate URLs to non-fully active documents
        https://bugs.webkit.org/show_bug.cgi?id=189375
        <rdar://problem/44282755>

        Reviewed by Youenn Fablet.

        Update existing test to reflect behavior change. I have verified that this test was
        failing in Firefox and is now passing in Firefox.

        * fast/dom/resource-locations-in-created-html-document.html:

2018-09-27  Chris Dumez  <cdumez@apple.com>

        The WebContent process should not process incoming IPC while waiting for a sync IPC reply
        https://bugs.webkit.org/show_bug.cgi?id=184183
        <rdar://problem/36800576>

        Reviewed by Ryosuke Niwa.

        Drop test for the DoNotProcessIncomingMessagesWhenWaitingForSyncReply IPC::SendOption as it was
        removed in this patch. This SendOption is no longer useful because it is now the default behavior
        for the WebContent process.

        * fast/misc/testIncomingSyncIPCMessageWhileWaitingForSyncReply-expected.txt: Removed.
        * fast/misc/testIncomingSyncIPCMessageWhileWaitingForSyncReply.html: Removed.

2018-09-27  Philippe Normand  <pnormand@igalia.com>

        Unreviewed GTK WebAudio rebaseline.

        This time from the 64-bit Release bot...

        * platform/gtk/webaudio/oscillator-custom-expected.wav:
        * platform/gtk/webaudio/oscillator-sawtooth-expected.wav:
        * platform/gtk/webaudio/oscillator-sine-expected.wav:
        * platform/gtk/webaudio/oscillator-square-expected.wav:
        * platform/gtk/webaudio/oscillator-triangle-expected.wav:

2018-09-27  Philippe Normand  <pnormand@igalia.com>

        Unreviewed GTK WebAudio rebaselines

        * platform/gtk/TestExpectations: webaudio/audioprocessingevent.html doesn't fail.
        * platform/gtk/webaudio/codec-tests/wav/24bit-22khz-resample-expected.wav: Rebaselined.

2018-09-27  Philippe Normand  <pnormand@igalia.com>

        [GTK] Several tests are failing since r217598
        https://bugs.webkit.org/show_bug.cgi?id=172809

        Unreviewed, GTK platform test expectations rebaseline.

        * platform/gtk/TestExpectations:
        * platform/gtk/http/tests/xmlhttprequest/cache-override-expected.txt: Removed.
        * platform/gtk/webaudio/oscillator-custom-expected.wav:
        * platform/gtk/webaudio/oscillator-sawtooth-expected.wav:
        * platform/gtk/webaudio/oscillator-sine-expected.wav:
        * platform/gtk/webaudio/oscillator-square-expected.wav:
        * platform/gtk/webaudio/oscillator-triangle-expected.wav:

2018-09-27  Antoine Quint  <graouts@apple.com>

        [Web Animations] Turn Web Animations with CSS integration on
        https://bugs.webkit.org/show_bug.cgi?id=184819
        <rdar://problem/39597337>

        Reviewed by Dean Jackson.

        * TestExpectations:
        * animations/3d/matrix-transform-type-animation.html:
        * animations/3d/replace-filling-transform.html:
        * animations/3d/transform-origin-vs-functions.html:
        * animations/3d/transform-perspective.html:
        * animations/additive-transform-animations.html:
        * animations/animation-border-overflow.html:
        * animations/animation-callback-timestamp.html:
        * animations/animation-controller-drt-api.html:
        * animations/animation-direction-alternate-reverse-expected.txt:
        * animations/animation-direction-alternate-reverse.html:
        * animations/animation-direction-reverse-fill-mode-hardware.html:
        * animations/animation-direction-reverse-hardware-opacity.html:
        * animations/animation-direction-reverse-hardware.html:
        * animations/animation-direction-reverse-non-hardware.html:
        * animations/animation-direction-reverse-timing-functions-hardware.html:
        * animations/animation-direction-reverse-timing-functions.html:
        * animations/animation-direction.html:
        * animations/animation-followed-by-transition.html:
        * animations/animation-hit-test-transform.html:
        * animations/animation-hit-test.html:
        * animations/animation-internals-api-expected.txt: Removed.
        * animations/animation-internals-api-multiple-keyframes-expected.txt: Removed.
        * animations/animation-internals-api-multiple-keyframes.html: Removed.
        * animations/animation-internals-api.html: Removed.
        * animations/animation-offscreen-to-onscreen.html:
        * animations/animation-playstate-paused-style-resolution.html:
        * animations/big-rotation-expected.txt:
        * animations/big-rotation.html:
        * animations/change-completed-animation-transform.html:
        * animations/change-keyframes.html:
        * animations/combo-transform-rotate+scale.html:
        * animations/cross-fade-background-image.html:
        * animations/cross-fade-border-image-source.html:
        * animations/cross-fade-list-style-image.html:
        * animations/cross-fade-webkit-mask-box-image.html:
        * animations/duplicate-keys-expected.html:
        * animations/duplicate-keys.html:
        * animations/duplicated-keyframes-name.html:
        * animations/fill-forwards-end-state.html:
        * animations/fill-mode-forwards-zero-duration-expected.txt:
        * animations/fill-mode-forwards-zero-duration.html:
        * animations/fill-mode-removed.html:
        * animations/font-variations/font-stretch.html:
        * animations/font-variations/font-style.html:
        * animations/font-variations/font-variation-settings-order.html:
        * animations/font-variations/font-variation-settings-unlike.html:
        * animations/font-variations/font-variation-settings.html:
        * animations/font-variations/font-weight.html:
        * animations/generic-from-to.html:
        * animations/import.html:
        * animations/keyframe-multiple-timing-functions-transform.html:
        * animations/keyframe-timing-functions-transform.html:
        * animations/keyframe-timing-functions.html:
        * animations/keyframe-timing-functions2.html:
        * animations/keyframes-comma-separated.html:
        * animations/keyframes-dynamic.html:
        * animations/keyframes-infinite-iterations.html:
        * animations/keyframes-invalid-keys.html:
        * animations/keyframes-out-of-order.html:
        * animations/keyframes.html:
        * animations/leak-document-with-css-animation.html:
        * animations/lineheight-animation.html:
        * animations/longhand-timing-function.html:
        * animations/matrix-anim.html:
        * animations/missing-from-to-transforms.html:
        * animations/missing-from-to.html:
        * animations/missing-keyframe-properties-repeating.html:
        * animations/missing-keyframe-properties-timing-function.html:
        * animations/missing-keyframe-properties.html:
        * animations/missing-values-first-keyframe.html:
        * animations/missing-values-last-keyframe.html:
        * animations/multiple-animations-timing-function.html:
        * animations/multiple-animations.html:
        * animations/multiple-keyframes.html:
        * animations/negative-delay.html:
        * animations/pause-crash.html:
        * animations/play-state-start-paused.html:
        * animations/resources/animation-leak-iframe.html:
        * animations/simultaneous-start-left.html:
        * animations/simultaneous-start-transform.html:
        * animations/spring-function.html:
        * animations/stacking-context-unchanged-while-running.html:
        * animations/stop-animation-on-suspend.html:
        * animations/suspend-resume-animation-events.html:
        * animations/timing-functions.html:
        * animations/transition-and-animation-1.html:
        * animations/transition-and-animation-2.html:
        * animations/transition-and-animation-3.html:
        * animations/trigger-container-scroll-boundaries.html:
        * animations/trigger-container-scroll-empty.html:
        * animations/trigger-container-scroll-simple.html:
        * animations/unanimated-style.html:
        * animations/unprefixed-keyframes.html:
        * animations/width-using-ems.html:
        * compositing/animation/animated-composited-inside-hidden.html:
        * compositing/animation/computed-style-during-delay.html:
        * compositing/animation/layer-for-filling-animation.html:
        * compositing/backing/backface-visibility-flip.html:
        * compositing/backing/transform-transition-from-outside-view.html:
        * compositing/contents-scale/animating.html:
        * compositing/layer-creation/animation-overlap-with-children.html:
        * compositing/layer-creation/mismatched-rotated-transform-animation-overlap.html:
        * compositing/layer-creation/mismatched-rotated-transform-transition-overlap.html:
        * compositing/layer-creation/mismatched-transform-transition-overlap.html:
        * compositing/layer-creation/multiple-keyframes-animation-overlap.html:
        * compositing/layer-creation/overlap-animation-clipping.html:
        * compositing/layer-creation/overlap-animation-container.html:
        * compositing/layer-creation/overlap-animation.html:
        * compositing/layer-creation/scale-rotation-animation-overlap.html:
        * compositing/layer-creation/scale-rotation-transition-overlap.html:
        * compositing/layer-creation/translate-animation-overlap.html:
        * compositing/layer-creation/translate-scale-animation-overlap.html:
        * compositing/layer-creation/translate-scale-transition-overlap.html:
        * compositing/layer-creation/translate-transition-overlap.html:
        * compositing/overflow/overflow-positioning.html:
        * compositing/reflections/animation-inside-reflection.html:
        * compositing/reflections/nested-reflection-animated.html:
        * compositing/reflections/nested-reflection-transition.html:
        * compositing/scrolling/touch-scroll-to-clip.html:
        * compositing/transitions/scale-transition-no-start.html:
        * compositing/transitions/singular-scale-transition.html:
        * compositing/visible-rect/animated-from-none.html:
        * compositing/visible-rect/animated.html:
        * css3/calc/transitions-dependent.html:
        * css3/calc/transitions.html:
        * css3/filters/backdrop/animation.html:
        * css3/filters/composited-during-animation.html:
        * css3/filters/filter-animation-from-none-hw.html:
        * css3/filters/filter-animation-from-none-multi-hw.html:
        * css3/filters/filter-animation-from-none-multi.html:
        * css3/filters/filter-animation-from-none.html:
        * css3/filters/filter-animation-hw.html:
        * css3/filters/filter-animation-multi-hw.html:
        * css3/filters/filter-animation-multi.html:
        * css3/filters/filter-animation.html:
        * css3/masking/clip-path-animation.html:
        * fast/animation/css-animation-resuming-when-visible-with-style-change.html:
        * fast/animation/css-animation-resuming-when-visible-with-style-change2.html:
        * fast/animation/css-animation-resuming-when-visible.html:
        * fast/animation/css-animation-throttling-lowPowerMode.html:
        * fast/animation/height-auto-transition-computed-value.html:
        * fast/css-generated-content/pseudo-animation.html:
        * fast/css-generated-content/pseudo-transition.html:
        * fast/filter-image/filter-image-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-shape-image-threshold-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-shape-margin-animation.html:
        * http/wpt/css/css-animations/start-animation-001.html:
        * imported/blink/transitions/transition-not-interpolable.html:
        * imported/blink/transitions/unprefixed-transform.html:
        * platform/ios/TestExpectations:
        * platform/win/TestExpectations:
        * transitions/remove-transition-style.html:
        * transitions/transition-drt-api-delay-expected.txt: Removed.
        * transitions/transition-drt-api-delay.html: Removed.
        * transitions/transition-drt-api-expected.txt: Removed.
        * transitions/transition-drt-api.html: Removed.
        * transitions/zero-duration-with-non-zero-delay-end.html:

2018-09-26  Devin Rousso  <drousso@apple.com>

        Web Inspector: Hide DOM and XHR breakpoint sections when they are empty
        https://bugs.webkit.org/show_bug.cgi?id=182406
        <rdar://problem/37131512>

        Reviewed by Joseph Pecoraro.

        * inspector/debugger/break-on-uncaught-exception-throw-in-promise.html:
        * inspector/debugger/break-on-uncaught-exception.html:
        * inspector/debugger/breakpoints-disabled-expected.txt:
        * inspector/debugger/breakpoints-disabled.html:
        * inspector/debugger/pause-reason.html:
        * inspector/debugger/setPauseOnAssertions.html:
        * inspector/worker/debugger-pause.html:

2018-09-26  Devin Rousso  <drousso@apple.com>

        Web Inspector: determine hasVisibleEffect for each RecordingAction as it's processed
        https://bugs.webkit.org/show_bug.cgi?id=189860

        Reviewed by Joseph Pecoraro.

        * inspector/unit-tests/array-utilities-expected.txt:
        * inspector/unit-tests/array-utilities.html:

2018-09-26  Justin Fan  <justin_fan@apple.com>

        WebGL 2: updated passing test expectations for deqp/primitiverestart
        https://bugs.webkit.org/show_bug.cgi?id=189981

        Reviewed by Jon Lee.

        Test-expectation updates for trac.webkit.org/changeset/236490; these are still to be skipped on ews.

        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/00-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/01-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/02-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/03-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/04-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/05-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/06-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/07-expected.txt:

2018-09-26  Alex Christensen  <achristensen@webkit.org>

        Unreviewed, rolling out r236524.

        Broke API tests

        Reverted changeset:

        "URLWithUserTypedString should return nil for URLs deemed to
        be invalid by WebCore::URL"
        https://bugs.webkit.org/show_bug.cgi?id=189979
        https://trac.webkit.org/changeset/236524

2018-09-26  Per Arne Vollan  <pvollan@apple.com>

        WebVTT cue alignment broken
        https://bugs.webkit.org/show_bug.cgi?id=190004

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/left-align.vtt: Added.
        * media/track/track-add-remove-cue-expected.txt:
        * media/track/track-add-remove-cue.html:
        * media/track/track-cue-left-align-expected-mismatch.html: Added.
        * media/track/track-cue-left-align.html: Added.
        * media/track/track-cue-mutable-expected.txt:
        * media/track/track-cue-mutable.html:
        * media/track/track-vttcue-expected.txt:
        * media/track/track-vttcue.html:
        * media/track/track-webvtt-tc013-settings-expected.txt:
        * media/track/track-webvtt-tc013-settings.html:
        * media/track/track-webvtt-tc015-positioning-expected.txt:
        * media/track/track-webvtt-tc015-positioning.html:
        * media/track/track-webvtt-tc016-align-positioning-expected.txt:
        * media/track/track-webvtt-tc016-align-positioning.html:
        * media/track/track-webvtt-tc018-align-text-line-position-expected.txt:
        * media/track/track-webvtt-tc018-align-text-line-position.html:
        * media/track/track-webvtt-tc021-valign-expected.txt:
        * media/track/track-webvtt-tc021-valign.html:
        * media/video-test.js:
        (testCues):

2018-09-26  James Savage  <james.savage@apple.com>

        Allow override of viewport configuration.
        https://bugs.webkit.org/show_bug.cgi?id=188772.
        <rdar://problem/43538892>.

        Reviewed by Simon Fraser.

        Add test proving that a document without a meta viewport specifying
        width=device-width still gets a layout when this setting is enabled. I also
        added a baseline case to prove that without this setting we do not layout
        at device width.

        * fast/viewport/ios/ipad/empty-viewport-expected.txt: Added.
        * fast/viewport/ios/ipad/empty-viewport.html: Added.
        * fast/viewport/ios/ipad/meta-viewport-disabled-expected.txt: Added.
        * fast/viewport/ios/ipad/meta-viewport-disabled.html: Added.

2018-09-26  Alex Christensen  <achristensen@webkit.org>

        uidna_nameToASCII only needs a buffer capacity of 64
        https://bugs.webkit.org/show_bug.cgi?id=190006

        Reviewed by Chris Dumez.

        * fast/dom/DOMURL/parsing.html:

2018-09-26  Ryosuke Niwa  <rniwa@webkit.org>

        Selection should work across shadow boundary when initiated by a mouse drag
        https://bugs.webkit.org/show_bug.cgi?id=151380
        <rdar://problem/24363872>

        Reviewed by Antti Koivisto and Wenson Hsieh.

        Added regression tests using ref tests since getSelection() doesn't expose any node inside a shadow tree.

        * editing/selection/selection-across-shadow-boundaries-mixed-editability-1-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-1.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-2-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-2.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-3-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-3.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-4-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-4.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-5-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-5.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-1-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-1.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-2-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-2.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-3-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-3.html: Added.
        * editing/selection/selection-across-shadow-boundaries-user-select-all-1-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-user-select-all-1.html: Added.

2018-09-26  Alicia Boya Garc√≠a  <aboya@igalia.com>

        [GTK] Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=190002

        * TestExpectations:
        * platform/gtk/TestExpectations:

2018-09-26  Truitt Savell  <tsavell@apple.com>

        Marking two more media-fragments/ tests as flakey after the iOS12 update
        https://bugs.webkit.org/show_bug.cgi?id=187557

        Unreviewed Test Gardening

        * platform/ios/TestExpectations:

2018-09-25  Justin Fan  <justin_fan@apple.com>

        WebGL 2 Conformance: primitive restart and draw_primitive_restart WebGL2 sample
        https://bugs.webkit.org/show_bug.cgi?id=189625
        <rdar://problem/42882620>

        Reviewed by Dean Jackson.

        Implement support for Primitive Restart Fixed Index as expected 
        by the WebGL 2 specifications. 

        * TestExpectations: Skip some flaky tests between different Mac machines under 2.0.0. 
        * webgl/webgl2-primitive-restart.html: Canary ref test to be run as part of LayoutTests suite.
        * webgl/webgl2-primitive-restart-expected.html:

2018-09-25  Chris Dumez  <cdumez@apple.com>

        Unreviewed, rolling out r236420 and r236458.

        This change is not fully correct

        Reverted changesets:

        "Do not do early processing of incoming sync IPC unless we're
        waiting for a sync IPC reply"
        https://bugs.webkit.org/show_bug.cgi?id=186941
        https://trac.webkit.org/changeset/236420

        "Unreviewed, update bug number of http/tests/misc/blob-
        size.html crash on Windows"
        https://trac.webkit.org/changeset/236458

2018-09-25  Justin Fan  <justin_fan@apple.com>

        WebGL 2 conformance: expected test results for the deqp suite (mac-mojave-wk2)
        https://bugs.webkit.org/show_bug.cgi?id=189942

        Reviewed by Jon Lee.

        Add expected results for the deqp suite with the new detailed format, for this spade for macOS Mojave.

        * webgl/2.0.0/deqp/.../*-expected.txt: Added expected results.

2018-09-25  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Make AuthenticatorManager
        https://bugs.webkit.org/show_bug.cgi?id=189279
        <rdar://problem/44116792>

        Reviewed by Chris Dumez.

        Most of the new tests are rewritten from the LocalAuthenticator API tests. Old mock tests are temporarily skipped
        for the new mock tests.

        * TestExpectations:
        * http/wpt/webauthn/public-key-credential-create-failure-local.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-local.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-success-local.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-success-local.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-success.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure-local.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-local.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-success-local.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-success-local.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-success.https.html:
        * http/wpt/webauthn/public-key-credential-is-user-verifying-platform-authenticator-available-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-is-user-verifying-platform-authenticator-available.html: Added.
        * http/wpt/webauthn/public-key-is-user-verifying-platform-authenticator-available-expected.txt: Removed.
        * http/wpt/webauthn/public-key-is-user-verifying-platform-authenticator-available.html: Removed.
        * http/wpt/webauthn/resources/util.js:
        * platform/mac-wk2/TestExpectations:

2018-09-25  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION: (r235948) Layout Test compositing/backing/backing-store-attachment-fill-forwards-animation.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189598#c0

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.
        * platform/mac-wk2/TestExpectations: Ditto.

2018-09-25  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Update constraints supported by getDisplayMedia
        https://bugs.webkit.org/show_bug.cgi?id=189930

        Reviewed by Youenn Fablet.

        * http/tests/media/media-stream/get-display-media-prompt-expected.txt:
        * http/tests/media/media-stream/get-display-media-prompt.html:

2018-09-25  Ryan Haddad  <ryanhaddad@apple.com>

        [resource-timing] imported/w3c/web-platform-tests/resource-timing/resource_timing.worker.html times out on WK1
        https://bugs.webkit.org/show_bug.cgi?id=189908

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as a failure since it is hitting a WPT harness timeout.
        * platform/mac/TestExpectations: Remove expectation in favor of a mac-wk1 specific one.

2018-09-25  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, correct a typo in a bug URL.

        * platform/mac/TestExpectations:

2018-09-25  Chris Dumez  <cdumez@apple.com>

        Unreviewed, update bug number of http/tests/misc/blob-size.html crash on Windows

        * platform/win/TestExpectations:

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        Mark two tests as flakey.

        * platform/mac/TestExpectations:

2018-09-24  John Wilander  <wilander@apple.com>

        Cap lifetime of persistent cookies created client-side through document.cookie
        https://bugs.webkit.org/show_bug.cgi?id=189933
        <rdar://problem/44741888>

        Reviewed by Chris Dumez.

        * TestExpectations:
            Skipped the new test by default since the behavior change is for
            Cocoa platforms only.
        * http/tests/cookies/capped-lifetime-for-cookie-set-in-js-expected.txt: Added.
        * http/tests/cookies/capped-lifetime-for-cookie-set-in-js.html: Added.
        * http/tests/cookies/resources/cookie-utilities.js:
        * platform/ios/TestExpectations:
            Marked the new test as [ Pass ].
        * platform/mac-wk2/TestExpectations:
            Marked the new test as [ Pass ].

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        Remove filterRes parameter from filters
        https://bugs.webkit.org/show_bug.cgi?id=129565
        <rdar://problem/44714340>

        Reviewed by Dean Jackson.

        Remove support for the "filterRes" attribute on SVG filters. It's marked as
        deprecated in https://drafts.fxtf.org/filter-effects/#element-attrdef-filter-filterres
        and no longer supported by Chrome or Firefox.
        
        Removed existing filterRes tests, added new test checking that it has no effect.

        * html5lib/resources/tests11.dat: Edited to remove filterRes. This seems to have been superseded by
            imported/w3c/web-platform-tests/html/syntax/parsing/html5lib_tests11.html
        * platform/gtk/svg/dynamic-updates/SVGFilterElement-dom-filterRes-attr-expected.png: Removed.
        * platform/gtk/svg/dynamic-updates/SVGFilterElement-svgdom-filterRes-call-expected.png: Removed.
        * platform/gtk/svg/dynamic-updates/SVGFilterElement-svgdom-filterResX-prop-expected.png: Removed.
        * platform/gtk/svg/dynamic-updates/SVGFilterElement-svgdom-filterResY-prop-expected.png: Removed.
        * platform/gtk/svg/filters/filterRes-expected.png: Removed.
        * platform/gtk/svg/filters/filterRes1-expected.png: Removed.
        * platform/gtk/svg/filters/filterRes3-expected.png: Removed.
        * platform/mac/svg/W3C-SVG-1.1-SE/svgdom-over-01-f-expected.txt: Removed.
        * platform/mac/svg/dynamic-updates/SVGFilterElement-dom-filterRes-attr-expected.png: Removed.
        * platform/mac/svg/dynamic-updates/SVGFilterElement-svgdom-filterRes-call-expected.png: Removed.
        * platform/mac/svg/dynamic-updates/SVGFilterElement-svgdom-filterResX-prop-expected.png: Removed.
        * platform/mac/svg/dynamic-updates/SVGFilterElement-svgdom-filterResY-prop-expected.png: Removed.
        * platform/mac/svg/filters/filterRes-expected.png: Removed.
        * platform/mac/svg/filters/filterRes1-expected.png: Removed.
        * platform/mac/svg/filters/filterRes2-expected.png: Removed.
        * platform/mac/svg/filters/filterRes3-expected.png: Removed.
        * svg/W3C-SVG-1.1-SE/svgdom-over-01-f-expected.txt:
        * svg/W3C-SVG-1.1-SE/svgdom-over-01-f.svg:
        * svg/dom/SVGAnimatedInteger-expected.txt:
        * svg/dom/SVGAnimatedInteger.html: Change to use feConvolveMatrix orderX.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterRes-call-expected.txt: Removed.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterRes-call.html: Removed.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterResX-prop-expected.txt: Removed.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterResX-prop.html: Removed.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterResY-prop-expected.txt: Removed.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterResY-prop.html: Removed.
        * svg/filters/filterRes-is-noop-expected.svg: Added.
        * svg/filters/filterRes-is-noop.svg: Added.
        * svg/filters/filterRes.svg: Removed.
        * svg/filters/filterRes1-expected.txt: Removed.
        * svg/filters/filterRes1.svg: Removed.
        * svg/filters/filterRes2-expected.png: Removed.
        * svg/filters/filterRes2-expected.txt: Removed.
        * svg/filters/filterRes2.svg: Removed.
        * svg/filters/filterRes3-expected.txt: Removed.
        * svg/filters/filterRes3.svg: Removed.

2018-09-24  Justin Michaud  <justin_michaud@apple.com>

        Import WPT tests for css custom properties api
        https://bugs.webkit.org/show_bug.cgi?id=189764

        Reviewed by Ryosuke Niwa.

        * platform/mac-wk1/TestExpectations:

2018-09-24  Matt Lewis  <jlewis3@apple.com>

        Skipped accessibility/mac/focus-setting-selection-syncronizing-not-clearing.html on High Sierra+.
        https://bugs.webkit.org/show_bug.cgi?id=189094

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2018-09-24  Ryosuke Niwa  <rniwa@webkit.org>

        imported/w3c/web-platform-tests/shadow-dom/slotchange.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=167652

        Reviewed by Saam Barati.

        Added a regression test for signaling a lot of slot elements.

        * fast/shadow-dom/signal-slot-list-retains-js-wrappers-expected.txt: Added.
        * fast/shadow-dom/signal-slot-list-retains-js-wrappers.html: Added.

2018-09-24  Ryosuke Niwa  <rniwa@webkit.org>

        Release assert when using paper-textarea due to autocorrect IDL attribute missing CEReactions
        https://bugs.webkit.org/show_bug.cgi?id=174629
        <rdar://problem/33407620>

        Reviewed by Simon Fraser.

        Added a regression test for mutating autocorrect and autocapitalize IDL attributes during connected callback.

        * fast/custom-elements/autocorrect-autocapitalize-idl-attributes-crash-expected.txt: Added.
        * fast/custom-elements/autocorrect-autocapitalize-idl-attributes-crash.html: Added.

2018-09-24  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [Curl] Enable http/tests/misc tests.
        https://bugs.webkit.org/show_bug.cgi?id=189931

        Unreviewed test gardening.

        * platform/wincairo/TestExpectations:
        * platform/wincairo/http/tests/misc/acid2-expected.txt: Added.
        * platform/wincairo/http/tests/misc/acid2-pixel-expected.txt: Added.
        * platform/wincairo/http/tests/misc/error404-expected.txt: Added.
        * platform/wincairo/http/tests/misc/favicon-as-image-expected.txt: Added.
        * platform/wincairo/http/tests/misc/frame-access-during-load-expected.txt: Added.
        * platform/wincairo/http/tests/misc/generated-content-inside-table-expected.txt: Added.
        * platform/wincairo/http/tests/misc/iframe404-expected.txt: Added.
        * platform/wincairo/http/tests/misc/object-embedding-svg-delayed-size-negotiation-2-expected.txt: Added.
        * platform/wincairo/http/tests/misc/object-embedding-svg-delayed-size-negotiation-expected.png: Added.
        * platform/wincairo/http/tests/misc/slow-loading-image-in-pattern-expected.txt: Added.

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        Update some test results under compositing/overflow
        https://bugs.webkit.org/show_bug.cgi?id=189857

        Reviewed by Tim Horton.
        
        Unskip some tests under compositing/overflow, and land new macOS and iOS expectations.

        * compositing/overflow/overflow-auto-with-touch-expected.txt:
        * compositing/overflow/overflow-overlay-with-touch-expected.txt:
        * compositing/overflow/scrolling-content-clip-to-viewport-expected.txt:
        * compositing/overflow/scrolling-without-painting-expected.txt:
        * compositing/overflow/textarea-scroll-touch-expected.txt:
        * compositing/overflow/updating-scrolling-content-expected.txt:
        * platform/ios-simulator-wk2/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/ios/compositing/overflow/nested-scrolling-expected.txt:
        * platform/ios/compositing/overflow/overflow-auto-with-touch-expected.txt: Copied from LayoutTests/compositing/overflow/overflow-auto-with-touch-expected.txt.
        * platform/ios/compositing/overflow/overflow-auto-with-touch-toggle-expected.txt: Copied from LayoutTests/compositing/overflow/overflow-auto-with-touch-expected.txt.
        * platform/ios/compositing/overflow/overflow-overlay-with-touch-expected.txt: Copied from LayoutTests/compositing/overflow/overflow-overlay-with-touch-expected.txt.
        * platform/ios/compositing/overflow/scrolling-content-clip-to-viewport-expected.txt: Copied from LayoutTests/compositing/overflow/scrolling-content-clip-to-viewport-expected.txt.
        * platform/ios/compositing/overflow/scrolling-without-painting-expected.txt: Copied from LayoutTests/compositing/overflow/scrolling-without-painting-expected.txt.
        * platform/ios/compositing/overflow/textarea-scroll-touch-expected.txt: Copied from LayoutTests/compositing/overflow/textarea-scroll-touch-expected.txt.
        * platform/ios/compositing/overflow/updating-scrolling-content-expected.txt: Copied from LayoutTests/compositing/overflow/updating-scrolling-content-expected.txt.
        * platform/mac/TestExpectations:
        * platform/mac/compositing/overflow/composited-scrolling-paint-phases-expected.txt:

2018-09-24  Truitt Savell  <tsavell@apple.com>

        Continued test gardening of media-fragment/ tests for ios 12
        https://bugs.webkit.org/show_bug.cgi?id=187557

        Unreviewed test gardening

        * platform/ios/TestExpectations:

2018-09-21  Simon Fraser  <simon.fraser@apple.com>

        Remove the old "AcceleratedCompositingForOverflowScroll" code
        https://bugs.webkit.org/show_bug.cgi?id=189870

        Reviewed by Zalan Bujtas.

        The "AcceleratedCompositingForOverflowScroll" code was added to allow overflow:scroll to use
        composited scrolling if an overflow:scroll could be made a stacking context without affecting
        z-order. We need overflow:scroll to be accelerated always, so a different approach is needed.
        Remove this old code (unused by any platform?) to make working on new code easier.
        
        Keep some of the tests; they will be useful later.

        * compositing/overflow/automatically-opt-into-composited-scrolling-expected.txt: Removed.
        * compositing/overflow/automatically-opt-into-composited-scrolling.html: Removed.
        * compositing/overflow/clipping-ancestor-with-accelerated-scrolling-ancestor.html:
        * compositing/overflow/composited-scrolling-creates-a-stacking-container.html: Removed.
        * compositing/overflow/composited-scrolling-paint-phases.html:
        * compositing/overflow/do-not-paint-outline-into-composited-scrolling-contents.html:
        * compositing/overflow/dynamic-composited-scrolling-status.html:
        * compositing/overflow/iframe-inside-overflow-clipping.html:
        * compositing/overflow/nested-scrolling.html:
        * compositing/overflow/overflow-clip-with-accelerated-scrolling-ancestor.html:
        * compositing/overflow/paint-neg-z-order-descendants-into-scrolling-contents-layer.html:
        * compositing/overflow/scrolling-content-clip-to-viewport.html:
        * compositing/overflow/scrolling-without-painting.html:
        * compositing/overflow/textarea-scroll-touch.html:
        * compositing/overflow/updating-scrolling-content.html:
        * compositing/rtl/rtl-overflow-scrolling.html:
        * platform/gtk/compositing/overflow/composited-scrolling-creates-a-stacking-container-expected.txt: Removed.
        * platform/ios-simulator-wk2/TestExpectations:
        * platform/ios-wk1/TestExpectations:
        * platform/ios/compositing/overflow/automatically-opt-into-composited-scrolling-expected.txt: Removed.
        * platform/ios/compositing/overflow/composited-scrolling-creates-a-stacking-container-expected.txt: Removed.
        * platform/mac/compositing/overflow/composited-scrolling-creates-a-stacking-container-expected.txt: Removed.

2018-09-24  Chris Dumez  <cdumez@apple.com>

        Do not do early processing of incoming sync IPC unless we're waiting for a sync IPC reply
        https://bugs.webkit.org/show_bug.cgi?id=186941

        Reviewed by Alex Christensen.

        Add layout test coverage.

        * http/tests/misc/blob-size-expected.txt: Added.
        * http/tests/misc/blob-size.html: Added.

2018-09-24  Chris Dumez  <cdumez@apple.com>

        Unreviewed, skip imported/w3c/web-platform-tests/html/webappapis/dynamic-markup-insertion/document-write/contentType.window.html

        This newly imported test flakily times out.

        * TestExpectations:

2018-09-24  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed WPE gardening. Managing failing WebGL tests in the 2.0.0
        version of the Khronos conformance suite.

        * platform/wpe/TestExpectations: Skip the GLSL test cases of which one
        is DoS-ing AMD GPUs on Linux. This needs more research to isolate the
        culprit and properly fix the underlying problem.
        * platform/wpe/webgl/2.0.0/: 44 test baselines added.

2018-09-24  Daniel Bates  <dabates@apple.com>

        [iOS] Key code is 0 for many hardware keyboard keys
        https://bugs.webkit.org/show_bug.cgi?id=189604

        Reviewed by Wenson Hsieh.

        Update existing test and test result and add a new test to ensure we dispatch DOM keydown
        and DOM keyup events dispatched for special keys.

        * fast/events/ios/keydown-keyup-in-non-editable-content-expected.txt: Update expected result.
        * fast/events/ios/keydown-keyup-in-non-editable-content.html: Remove logic to test arrow keys
        as these are tested in test keydown-keyup-special-keys-in-non-editable-element.html. Also
        update manual instructions to use <kbd> to format keyboard keys.
        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element-expected.txt:

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        feMorphology filter in CSS doesn't update when element moves
        https://bugs.webkit.org/show_bug.cgi?id=189895

        Reviewed by Dean Jackson.
        
        Test that moves a box inside a filtered div. Masking is necessary to work
        around bugs in feMorphology invalidation (webkit.org/b/189896).

        * css3/filters/invalidate-sourceAlpha-expected.html: Added.
        * css3/filters/invalidate-sourceAlpha.html: Added.

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        CSS reference filter with feDisplacementMap shows buffer corruption on Retina displays
        https://bugs.webkit.org/show_bug.cgi?id=188486
        <rdar://problem/43189750>

        Reviewed by Dean Jackson.

        * css3/filters/hidpi-feDisplacementMap-expected.html: Added.
        * css3/filters/hidpi-feDisplacementMap.html: Added.

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        Garbled rendering of image when applied feConvolveMatrix to it, on Retina display
        https://bugs.webkit.org/show_bug.cgi?id=189748
        <rdar://problem/44621494>

        Reviewed by Jon Lee.

        * css3/filters/hidpi-feConvolveMatrix-expected.html: Added.
        * css3/filters/hidpi-feConvolveMatrix.html: Added.

2018-09-22  Dean Jackson  <dino@apple.com>

        Ensure PointerEvent is not visible when disabled
        https://bugs.webkit.org/show_bug.cgi?id=189889
        <rdar://problem/44708253>

        Reviewed by Eric Carlson.

        A test that explicitly disables PointerEvents and checks
        that the interface is not visible.

        * pointerevents/disabled-expected.html: Added.
        * pointerevents/disabled.html: Added.

2018-09-24  Truitt Savell  <tsavell@apple.com>

        [ iOS ] Layout Tests in media/media-fragments/ are flaky - Remved Debug only as tests are flakey on Release. 
        https://bugs.webkit.org/show_bug.cgi?id=187557

        Unreviewed Test Gardening

        * platform/ios/TestExpectations:

2018-09-24  Truitt Savell  <tsavell@apple.com>

        [ iOS ] Layout Tests in media/media-fragments/ are flaky
        https://bugs.webkit.org/show_bug.cgi?id=187557

        Unreviewed Test Gardening

        * platform/ios/TestExpectations:

2018-09-24  Andy Estes  <aestes@apple.com>

        Try to make payment-response-reference-cycle-leak.https.html not be flaky.

        Unreviewed.

        * http/tests/paymentrequest/payment-response-reference-cycle-leak.https.html:
        Doubled the number of repetitions (from 40 to 80).

2018-09-24  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Change name of WebVTT region attribute 'height' to 'lines'.
        https://bugs.webkit.org/show_bug.cgi?id=189862

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/captions-regions.vtt:
        * media/track/captions-webvtt/header-regions.vtt:
        * media/track/regions-webvtt/vtt-region-constructor-expected.txt:
        * media/track/regions-webvtt/vtt-region-constructor.html:
        * media/track/regions-webvtt/vtt-region-display-expected.txt:
        * media/track/regions-webvtt/vtt-region-display.html:
        * media/track/regions-webvtt/vtt-region-list-expected.txt:
        * media/track/regions-webvtt/vtt-region-list.html:
        * media/track/regions-webvtt/vtt-region-parser-expected.txt:
        * media/track/regions-webvtt/vtt-region-parser.html:

2018-09-24  Yoav Weiss  <yoav@yoav.ws>

        Import WPT resource-timing tests
        https://bugs.webkit.org/show_bug.cgi?id=189903

        Reviewed by Youenn Fablet.

        * TestExpectations:: Added a few failing tests.
        * platform/mac/TestExpectations:: Added a timeout test.

2018-09-22  Dean Jackson  <dino@apple.com>

        Unreviewed - Skip pointer events tests on legacy WebKit.

        * platform/ios-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:

2018-09-22  Youenn Fablet  <youenn@apple.com>

        Tests checking document GC in case of ActiveDOMObjects are flaky
        https://bugs.webkit.org/show_bug.cgi?id=189413
        <rdar://problem/44243231>

        Reviewed by Eric Carlson.

        Media controls prevent in some cases to collect the document.
        Remove the controls to remove a source of flakiness for this test.

        * http/tests/media/clearkey/resources/mywebkitmediasessionframe.htm:
        * platform/mac/TestExpectations:

2018-09-21  Ryosuke Niwa  <rniwa@webkit.org>

        Cannot start a drag inside a shadow tree when an inclusive-ancestor of its shadow host is a draggable element
        https://bugs.webkit.org/show_bug.cgi?id=136836

        Reviewed by Wenson Hsieh.

        Added regression tests for dragging a element with a shadow tree, which is fixed in this bug
        as well as dragging an element inside a shadow tree, which was already functional but had no tests.

        * TestExpectations:
        * fast/shadow-dom/dragging-element-inside-shadow-tree-expected.txt: Added.
        * fast/shadow-dom/dragging-element-inside-shadow-tree.html: Added.
        * fast/shadow-dom/dragging-element-with-shadow-tree-expected.txt: Added.
        * fast/shadow-dom/dragging-element-with-shadow-tree.html: Added.
        * platform/ios/TestExpectations: Don't mark the entirety of fast/shadow-dom as PASS.
        * platform/mac-wk1/TestExpectations:

2018-09-21  Devin Rousso  <drousso@apple.com>

        Web Inspector: REGRESSION(r236336): computed CSSProperty doesn't have a value for _text
        https://bugs.webkit.org/show_bug.cgi?id=189864

        Reviewed by Joseph Pecoraro.

        * inspector/css/pseudo-element-matches-for-pseudo-element-node.html:

        `CSS.types.CSSComputedStyleProperty` doesn't include a `text` value, which was used to print
         each property's text. Modify the test to generate it's own text via `name` and `value`.

2018-09-21  Justin Michaud  <justin_michaud@apple.com>

        Implement initialValue support for CSS Custom Properties and Values API
        https://bugs.webkit.org/show_bug.cgi?id=189819

        Reviewed by Simon Fraser.

        * css-custom-properties-api/initialValue-expected.html: Added.
        * css-custom-properties-api/initialValue.html: Added.
        * css-custom-properties-api/initialValueJS-expected.txt: Added.
        * css-custom-properties-api/initialValueJS.html: Added.
        * css-custom-properties-api/registerProperty-expected.txt:
        * css-custom-properties-api/registerProperty.html:
        * platform/win/TestExpectations:

2018-09-21  Ryan Haddad  <ryanhaddad@apple.com>

        [macOS EWS] Layout test accessibility/smart-invert-reference.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189818

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations: Mark test as flaky.

2018-09-21  Ryosuke Niwa  <rniwa@webkit.org>

        Custom elements in a reaction queue can lose its JS wrapper and become HTMLUnknownElement
        https://bugs.webkit.org/show_bug.cgi?id=184307

        Reviewed by Keith Miller.

        Added a test for enqueuing a lot of custom elements into the reaction queue via innerHTML setter.
        WebKit should retain the JS wrappers of all custom elements.

        * fast/custom-elements/custom-elements-reaction-queue-retains-js-wrapper-expected.txt: Added.
        * fast/custom-elements/custom-elements-reaction-queue-retains-js-wrapper.html: Added.

2018-09-21  Chris Dumez  <cdumez@apple.com>

        Unreviewed, speed up storage/websql/transaction-database-expand-quota.html

        This test was so slow that is sometimes timed out on the debug bots.

        * storage/websql/transaction-database-expand-quota-expected.txt:
        * storage/websql/transaction-database-expand-quota.html:

2018-09-21  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening, consolidate expectation file for EventTarget-dispatchEvent.html.

        * platform/ios-11/imported/w3c/web-platform-tests/dom/events/EventTarget-dispatchEvent-expected.txt: Removed.
        * platform/ios/imported/w3c/web-platform-tests/dom/events/EventTarget-dispatchEvent-expected.txt:

2018-09-21  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r235948?): Layout Test media/media-controls-accessibility.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189674

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark test as flaky.

2018-09-21  Per Arne Vollan  <pvollan@apple.com>

        [Win10] Update test expectations for failing tests.
        https://bugs.webkit.org/show_bug.cgi?id=189858

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-09-21  Chris Dumez  <cdumez@apple.com>

        WebSQL: User cannot grant quota increase if the JS provides an expected usage value that is too low
        https://bugs.webkit.org/show_bug.cgi?id=189801
        <rdar://problem/43592498>

        Reviewed by Youenn Fablet.

        Add layout test coverage.

        * storage/websql/transaction-database-expand-quota-expected.txt: Added.
        * storage/websql/transaction-database-expand-quota.html: Added.

2018-09-21  Youenn Fablet  <youenn@apple.com>

        Add RTCCodecStats support
        https://bugs.webkit.org/show_bug.cgi?id=189792
        <rdar://problem/32370668>

        Reviewed by Eric Carlson.

        * webrtc/video-stats.html:

2018-09-21  Megan Gardner  <megan_gardner@apple.com>

        [iOS] Layout test fast/gradients/conic-gradient-alpha.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189802

        Unreviewed test gardening

        It is more difficult to squish the alpha channel than the other channels using an SVG filters.
        Thus the cropping bars need to be slightly wider to cover the imperfections in the filter.
        Made the bars even more slightly wider, since apparenlty they weren't quite wide enough for iOS.

        * fast/gradients/conic-gradient-alpha-expected.html:
        * fast/gradients/conic-gradient-alpha.html:
        * platform/ios-12/TestExpectations:

2018-09-20  Simon Fraser  <simon.fraser@apple.com>

        Make "overflow: overlay" a synonym for "overflow: auto"
        https://bugs.webkit.org/show_bug.cgi?id=189811

        Reviewed by Zalan Bujtas.
        
        Add a modern CSS parsing/computed style test for overflow, superseding
        fast/css/overflow-property.html.

        * fast/css/getComputedStyle/getComputedStyle-overflow-expected.txt: Added.
        * fast/css/getComputedStyle/getComputedStyle-overflow.html: Added.
        * fast/css/overflow-property-expected.txt: Removed.
        * fast/css/overflow-property.html: Removed.

2018-09-21  Ryan Haddad  <ryanhaddad@apple.com>

        Tests checking document GC in case of ActiveDOMObjects are flaky
        https://bugs.webkit.org/show_bug.cgi?id=189413

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark http/tests/media/clearkey/collect-webkit-media-session.html as flaky.

2018-09-21  Devin Rousso  <drousso@apple.com>

        Web Inspector: remove Legacy Style Editor
        https://bugs.webkit.org/show_bug.cgi?id=189808

        Reviewed by Joseph Pecoraro.

        * platform/gtk/TestExpectations:
        * platform/mac/TestExpectations:

        * inspector/css/css-property-expected.txt:
        * inspector/css/css-property.html:
        * inspector/css/modify-css-property.html:
        * inspector/css/shadow-scoped-style.html:
        Update tests for functionality that has been deleted.

        * inspector/unit-tests/test-harness-expect-functions-expected.txt:
        * inspector/unit-tests/test-harness-expect-functions.html:
        The changes to `WI.CSSRule` now make it small enough that `InspectorTest` will print it as
        JSON instead of an object instance. Change the test to use different objects so this doesn't
        happen.

        * inspector/unit-tests/text-utilities-expected.txt: Removed.
        * inspector/unit-tests/text-utilities.html: Removed.
        * inspector/css/generate-css-rule-string-expected.txt: Removed.
        * inspector/css/generate-css-rule-string.html: Removed.
        Remove tests for functionality that has been deleted.

        * inspector/codemirror/prettyprinting-css-rules.html: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-after-colon-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-after-colon.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-after-comma-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-after-comma.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-between-rules-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-between-rules.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-between-values-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-between-values.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/css-variables-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/css-variables.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/do-not-add-whitespace-before-prefixed-property-value-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/do-not-add-whitespace-before-prefixed-property-value.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/do-not-append-semicolon-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/do-not-append-semicolon.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/invalid-property-is-not-removed-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/invalid-property-is-not-removed.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/keep-prefixed-value-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/keep-prefixed-value.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-newline-between-values-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-newline-between-values.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-colon-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-colon.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-comment-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-comment.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-invalid-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-invalid-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-prefixed-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-prefixed-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-semicolon-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-semicolon.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-comment-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-comment.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-invalid-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-invalid-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-prefixed-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-prefixed-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-comment-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-comment.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-invalid-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-invalid-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-prefixed-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-prefixed-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-comment-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-comment.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-invalid-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-invalid-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-prefixed-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-prefixed-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-without-semicolon-followed-by-comment-and-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-without-semicolon-followed-by-comment-and-property.css: Removed.
        Remove all tests for the "css-rule" CodeMirror mode since it's been removed.

2018-09-21  Antoine Quint  <graouts@apple.com>

        REGRESSION (r235962-r235963): Layout Test animations/suspend-resume-animation-events.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189607
        <rdar://problem/44652315>

        Reviewed by Dean Jackson.

        * animations/suspend-resume-animation-events.html: Ensure the test always opts into Web Animations backing CSS Animations and Transitions.
        * platform/mac-wk2/TestExpectations: Mark the test as no longer flaky.

2018-09-21  Per Arne Vollan  <pvollan@apple.com>

        Layout Test webanimations/accelerated-animation-suspension.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189836

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-09-21  Per Arne Vollan  <pvollan@apple.com>

        Layout Test css-custom-properties-api/registerProperty.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189834

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-09-21  Antoine Quint  <graouts@apple.com>

        [Web Animations] Accelerated animations don't get suspended
        https://bugs.webkit.org/show_bug.cgi?id=189783
        <rdar://problem/44652315>

        Unreviewed, correct a merge error in the previous commit.

        * animations/suspend-resume-animation-events.html:

2018-09-21  Antoine Quint  <graouts@apple.com>

        [Web Animations] Accelerated animations don't get suspended
        https://bugs.webkit.org/show_bug.cgi?id=189783
        <rdar://problem/43033568>

        Reviewed by Dean Jackson.

        Add a new test that checks whether an accelerated animation is correctly paused after suspending animations.

        * webanimations/accelerated-animation-suspension-expected.txt: Added.
        * webanimations/accelerated-animation-suspension.html: Added.
        * platform/win/TestExpectations:

2018-09-21  Antoine Quint  <graouts@apple.com>

        [Web Animations] DocumentTimeline::updateAnimations() is called endlessly
        https://bugs.webkit.org/show_bug.cgi?id=189784
        <rdar://problem/41705679>

        Reviewed by Dean Jackson.

        Add a new test that checks that setting "display: none" on an element with an accelerated CSS animation on it
        will no longer update the animation timeline.

        * webanimations/accelerated-animation-interruption-display-none-expected.txt: Added.
        * webanimations/accelerated-animation-interruption-display-none.html: Added.
        * platform/win/TestExpectations:

2018-09-20  Dean Jackson  <dino@apple.com>

        Restrict the total combined size of backdrop filters
        https://bugs.webkit.org/show_bug.cgi?id=189812
        <rdar://problem/44532782>

        Reviewed by Simon Fraser.

        Tests that have an acceptable number of backdrops, an excessive
        number of backdrops, and then some that add and remove backdrops
        at various points in the tree to confirm we do recursive checks
        correctly.

        * css3/filters/backdrop/layer-tree-as-text.js: Added.
        * css3/filters/backdrop/resource-use-add-more-layers-expected.txt: Added.
        * css3/filters/backdrop/resource-use-add-more-layers.html: Added.
        * css3/filters/backdrop/resource-use-excessive-expected.txt: Added.
        * css3/filters/backdrop/resource-use-excessive.html: Added.
        * css3/filters/backdrop/resource-use-ok-expected.txt: Added.
        * css3/filters/backdrop/resource-use-ok.html: Added.
        * css3/filters/backdrop/resource-use-remove-some-layers-expected.txt: Added.
        * css3/filters/backdrop/resource-use-remove-some-layers.html: Added.
        * css3/filters/backdrop/resource-use.css: Added.

2018-09-20  Truitt Savell  <tsavell@apple.com>

        Continued test gardening after r236236
        https://bugs.webkit.org/show_bug.cgi?id=189641

        Unreviewed test gardening 

        * TestExpectations:

2018-09-20  Zalan Bujtas  <zalan@apple.com>

        Release assert under RenderView::pageOrViewLogicalHeight
        https://bugs.webkit.org/show_bug.cgi?id=189798
        <rdar://problem/43659749>

        Reviewed by Simon Fraser.

        * printing/crash-while-formatting-subframe-for-printing-expected.txt: Added.
        * printing/crash-while-formatting-subframe-for-printing.html: Added.

2018-09-20  Sihui Liu  <sihui_liu@apple.com>

        REGRESSION(r196265): WKWebView fires mouseover, mouseenter, and mouseleave events even when it's in a background window
        https://bugs.webkit.org/show_bug.cgi?id=187545
        <rdar://problem/42401575>

        Reviewed by Ryosuke Niwa.

        * TestExpectations:
        * fast/events/inactive-window-no-mouse-event-expected.txt: Added.
        * fast/events/inactive-window-no-mouse-event.html: Added.
        * platform/mac-wk2/TestExpectations:

2018-09-20  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [Win] TestRunner::queueLoad() fails to generate correct url for some urls.
        https://bugs.webkit.org/show_bug.cgi?id=189679

        Reviewed by Fujii Hironori.

        * platform/wincairo/TestExpectations:

2018-09-20  Ryan Haddad  <ryanhaddad@apple.com>

        [iOS] Layout test fast/gradients/conic-gradient-alpha.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189802

        Unreviewed test gardening.

        * platform/ios-12/TestExpectations: Mark test as failing.

2018-09-20  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r235962-r235963): Layout Test animations/suspend-resume-animation-events.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189607

        Unreivewed test gardening.

        * platform/mac-wk2/TestExpectations: Mark test as flaky.

2018-09-20  Dawei Fenton  <realdawei@apple.com>

        WebGL 2 updated test expectations.
        https://bugs.webkit.org/show_bug.cgi?id=189686

        Unreviewed, skip tests that are timing out.

        * platform/ios-wk2/TestExpectations:

2018-09-20  Oriol Brufau  <obrufau@igalia.com>

        Fix 'border' serialization with both common and uncommon values
        https://bugs.webkit.org/show_bug.cgi?id=189597

        Reviewed by Simon Fraser.

        Fix existing tests to check that 'border' serializes to empty string if there
        are uncommon values.

        * fast/css/getPropertyValue-border-expected.txt:
        * fast/css/getPropertyValue-border.html:
        * fast/dom/css-shorthand-common-value-expected.txt:
        * fast/dom/css-shorthand-common-value.html:

2018-09-20  Dawei Fenton  <realdawei@apple.com>

        WebGL conformance: Failures and Timeouts in suite 2.0.0/conformance
        https://bugs.webkit.org/show_bug.cgi?id=189641

        Unreviewed test gardening.

        * TestExpectations: Mark tests as Failure Slow.
        * platform/mac/TestExpectations:

2018-09-20  Frederic Wang  <fwang@igalia.com>

        Synchronize CSSOM View test suite against upstream WPT
        https://bugs.webkit.org/show_bug.cgi?id=189787

        Reviewed by Antonio Gomes.

        * tests-options.json: Mark smooth scrolling tests as slow.
        * ios/TestExpectations: Mark as failing since frames are not scrollable on iOS.

2018-09-20  Justin Michaud  <justin_michaud@apple.com>

        Implement CSS Custom Properties and Values Skeleton
        https://bugs.webkit.org/show_bug.cgi?id=189694

        Reviewed by Simon Fraser.

        Add test to check that the CSS.registerProperty method exists.

        * css-custom-properties-api/registerProperty-expected.txt: Added.
        * css-custom-properties-api/registerProperty.html: Added.
        * platform/ios-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:

2018-09-20  Dawei Fenton  <realdawei@apple.com>

        WebGL conformance: Failures and Timeouts in suite 2.0.0/conformance
        https://bugs.webkit.org/show_bug.cgi?id=189641

        Unreviewed, marked tests as failing.

        * TestExpectations:

2018-09-20  Daniel Bates  <dabates@apple.com>

        [iOS] Support testing more hardware special keys
        https://bugs.webkit.org/show_bug.cgi?id=189793

        Reviewed by Simon Fraser.

        For now, many of the DOM keydown and keyup events for special hardware keys are wrong.
        We will fix this up in a subsequent commit(s).

        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element-expected.txt: Added.
        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element.html: Added.

2018-09-20  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Update the parser according to the new region syntax.
        https://bugs.webkit.org/show_bug.cgi?id=189767

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/captions-regions.vtt:
        * media/track/captions-webvtt/header-regions.vtt:
        * media/track/regions-webvtt/vtt-region-parser-expected.txt:
        * media/track/regions-webvtt/vtt-region-parser.html:

2018-09-19  Ryan Haddad  <ryanhaddad@apple.com>

        [macOS Sierra] Layout Test http/wpt/cache-storage/cache-put-keys.https.any.worker.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=184204

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations: Mark test as flaky and remove an entry for a test that doesn't exist in the repository anymore.

2018-09-19  Yacine Bandou  <yacine.bandou@softathome.com>

        [EME][WPE] Add WebM initData in the expected result of clearkey-generate-request-disallowed-input test
        https://bugs.webkit.org/show_bug.cgi?id=189747

        Reviewed by Xabier Rodriguez-Calvar.

        Since r235610 the WebM initData is supported.

        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-generate-request-disallowed-input.https-expected.txt:
        Add an expcted result for WebM initData.

2018-09-19  Justin Fan  <justin_fan@apple.com>

        WebGL 2 partial passes and failing test expectations for conformance/conformance2 layout tests
        https://bugs.webkit.org/show_bug.cgi?id=189686

        Reviewed by Dean Jackson.

        * TestExpectations: Still skipping all of deqp, but now enabling all non-crashing/timing out tests.
        * platform/ios-simulator/TestExpectations:
        * platform/mac/TestExpectations:
        * webgl/2.0.0/conformance/.../*expected.txt: Failures now report results of individual sub-tests for more granular implementation testing.
        * webgl/2.0.0/conformance2/.../*expected.txt:
        * platform/ios-simulator/webgl/2.0.0/.../*expected.txt: ios-simulator-specific expectations added.

2018-09-19  Dawei Fenton  <realdawei@apple.com>

        storage/indexeddb/modern/transactions-stop-on-navigation.html is flaky.
        https://bugs.webkit.org/show_bug.cgi?id=186339

        Unreviewed, mark test as flaky.

        * platform/mac-wk2/TestExpectations:

2018-09-19  Dawei Fenton  <realdawei@apple.com>

        Marked imported/w3c/web-platform-tests/webrtc/RTCPeerConnection-onnegotiationneeded.html as flak on iOS.
        https://bugs.webkit.org/show_bug.cgi?id=176078

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-09-19  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Add optional cap on partitioned cache max age
        https://bugs.webkit.org/show_bug.cgi?id=189711
        <rdar://problem/39246837>

        Reviewed by Antti Koivisto and Chris Dumez.

        * http/tests/resourceLoadStatistics/cap-cache-max-age-for-prevalent-resource-expected.txt: Added.
        * http/tests/resourceLoadStatistics/cap-cache-max-age-for-prevalent-resource.html: Added.
        * http/tests/resourceLoadStatistics/resources/cached-permanent-redirect.php: Added.
        * http/tests/resourceLoadStatistics/resources/echo-query.php: Added.
        * platform/ios/TestExpectations:
            New test marked as [ Pass ].
        * platform/mac-wk2/TestExpectations:
            New test marked as [ Pass ].
        * platform/wk2/TestExpectations:
            New test marked as [ Skip ] because it's not supported on non-Cocoa platforms.

2018-09-19  Youenn Fablet  <youenn@apple.com>

        Layout Test webrtc/video-mute.html is flaky.
        https://bugs.webkit.org/show_bug.cgi?id=177501

        Reviewed by Eric Carlson.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        * webrtc/routines.js: Increase counter to make test more robust.

2018-09-19  Chris Dumez  <cdumez@apple.com>

        [iOS] Layout Test imported/w3c/web-platform-tests/beacon/beacon-basic-blob.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189728

        Unreviewed, send console logging to stderr to adress flakiness.

        * TestExpectations:

2018-09-19  Ms2ger  <Ms2ger@igalia.com>

        [WPE] Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=189749

        Unreviewed test gardening.

        * platform/wpe/TestExpectations: Add some expectations to match GTK.
        * platform/wpe/imported/w3c/web-platform-tests/dom/events/EventTarget-dispatchEvent-expected.txt: Update after r236002.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/access-control-basic-cors-safelisted-request-headers-expected.txt: Removed (defer to generic expectation).
        * platform/wpe/imported/w3c/web-platform-tests/xhr/access-control-basic-get-fail-non-simple-expected.txt: Removed (defer to generic expectation).
        * platform/wpe/imported/w3c/web-platform-tests/xhr/access-control-basic-post-with-non-cors-safelisted-content-type-expected.txt: Removed (defer to generic expectation).
        * platform/wpe/imported/w3c/web-platform-tests/xhr/send-redirect-infinite-expected.txt: Update after r235354.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/send-redirect-infinite-sync-expected.txt: Update after r235354.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/xmlhttprequest-network-error-expected.txt: Update after r235354.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/xmlhttprequest-network-error-sync-expected.txt: Update after r235354.
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-as-return-value-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-assign-constructor-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-assign-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-complex-indexing-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-element-increment-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-equality-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-in-complex-expression-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/bool-type-cast-bug-uint-ivec-uvec-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/compare-structs-containing-arrays-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/compound-assignment-type-combination-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/const-array-init-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/forbidden-operators-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/frag-depth-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/invalid-default-precision-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/invalid-invariant-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/loops-with-side-effects-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/misplaced-version-directive-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/sampler-no-precision-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/sequence-operator-returns-non-constant-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/shader-linking-expected.txt: Update after r236001.
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/shader-with-mis-matching-uniform-block-expected.txt: Update after r236001.
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/short-circuiting-in-loop-condition-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/texture-offset-out-of-range-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/texture-offset-uniform-texture-coordinate-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/tricky-loop-conditions-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/uniform-block-layout-match-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/uniform-block-layouts-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/valid-invariant-expected.txt: Update after r236001.
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-nv-driver-bug-expected.txt: Removed (defer to generic expectation after r236001).

2018-09-19  Youenn Fablet  <youenn@apple.com>

        Implement sender/receiver getStats
        https://bugs.webkit.org/show_bug.cgi?id=189707

        Reviewed by Eric Carlson.

        * webrtc/video-stats-expected.txt:
        * webrtc/video-stats.html:

2018-09-19  Ms2ger  <Ms2ger@igalia.com>

        [GTK] Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=189744

        Unreviewed test gardening.

        * platform/gtk/TestExpectations: Add some expectations.

2018-09-19  Philippe Normand <pnormand@igalia.com>

        [GStreamer] Add support for AV1 decoding
        https://bugs.webkit.org/show_bug.cgi?id=189647

        Reviewed by ≈Ωan Dober≈°ek.

        Layout test for AV1 canPlay() compatiblity checking. Right now
        GStreamer-based ports are the only ones expecting to support AV1.

        * media/media-can-play-av1-expected.txt: Added.
        * media/media-can-play-av1.html: Added.
        * platform/ios/media/media-can-play-av1-expected.txt: Added.
        * platform/mac/media/media-can-play-av1-expected.txt: Added.

2018-09-19  Chris Dumez  <cdumez@apple.com>

        http/tests/navigation/window-open-cross-origin-then-navigated-back-same-origin.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=189710

        Reviewed by Ryosuke Niwa.

        Update the test to stop relying on the test page posting a message to the auxiliary window
        to trigger a navigation. Instead, the auxiliary window now takes care of navigating itself
        after it is loaded. This is more robust, especially considering that the test page is cross
        origin and thus is not getting a load event for the auxiliary window.

        * http/tests/navigation/resources/navigate-back-same-origin-helper.html: Added.
        * http/tests/navigation/resources/navigate-helper.html: Removed.
        * http/tests/navigation/window-open-cross-origin-then-navigated-back-same-origin.html:

2018-09-19  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE][GTK] Assorted gardening

        Unreviewed test gardening
        * platform/gtk/TestExpectations: Add new mediastream failures.
        * platform/wpe/TestExpectations: Ditto.
        * platform/wpe/js/dom/dom-static-property-for-in-iteration-expected.txt: rebaseline

2018-09-18  Ali Juma  <ajuma@chromium.org>

        [macOS WK1] Mark intersection-observer/no-document-leak.html as a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=189731

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2018-09-18  Ryan Haddad  <ryanhaddad@apple.com>

        [iOS] Layout Test imported/w3c/web-platform-tests/service-workers/service-worker/fetch-cors-xhr.https.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189727

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-09-18  Ryan Haddad  <ryanhaddad@apple.com>

        [iOS] Layout test imported/w3c/web-platform-tests/service-workers/service-worker/fetch-mixed-content-to-inscope.https.html and fetch-mixed-content-to-outscope.https.html are flaky failures
        https://bugs.webkit.org/show_bug.cgi?id=189726

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-09-18  Megan Gardner  <megan_gardner@apple.com>

        Support Images Module Level 4's double-position gradient color stop syntax
        https://bugs.webkit.org/show_bug.cgi?id=186154
        <rdar://problem/44158152>

        Reviewed by Simon Fraser.

        Test that uses two angles or positions per color stop.

        * TestExpectations:
        * fast/gradients/conic-two-hints-expected.html: Added.
        * fast/gradients/conic-two-hints.html: Added.
        * fast/gradients/linear-two-hints-angle-expected.html: Added.
        * fast/gradients/linear-two-hints-angle.html: Added.
        * fast/gradients/linear-two-hints-expected.html: Added.
        * fast/gradients/linear-two-hints.html: Added.
        * fast/gradients/radial-two-hints-expected.html: Added.
        * fast/gradients/radial-two-hints.html: Added.
        * platform/ios-12/TestExpectations:
        * platform/mac/TestExpectations:

2018-09-18  Youenn Fablet  <youenn@apple.com>

        Enable Unified Plan by default
        https://bugs.webkit.org/show_bug.cgi?id=189675

        Reviewed by Eric Carlson.

        * webrtc/video-addLegacyTransceiver-expected.txt:
        * webrtc/video-addLegacyTransceiver.html:

2018-09-18  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] change "middle" to "center" for consistency with CSS
        https://bugs.webkit.org/show_bug.cgi?id=158478

        Reviewed by Eric Carlson.

        * media/track/track-add-remove-cue-expected.txt:
        * media/track/track-add-remove-cue.html:
        * media/track/track-cue-mutable-expected.txt:
        * media/track/track-cue-mutable.html:
        * media/track/track-cue-rendering-snap-to-lines-not-set-expected.txt:
        * media/track/track-vttcue-expected.txt:
        * media/track/track-vttcue.html:
        * media/track/track-webvtt-tc013-settings-expected.txt:
        * media/track/track-webvtt-tc013-settings.html:
        * media/track/track-webvtt-tc014-alignment-expected.txt:
        * media/track/track-webvtt-tc014-alignment.html:
        * media/track/track-webvtt-tc016-align-positioning-expected.txt:
        * media/track/track-webvtt-tc016-align-positioning.html:
        * media/track/track-webvtt-tc018-align-text-line-position-expected.txt:
        * media/track/track-webvtt-tc018-align-text-line-position.html:
        * media/track/track-webvtt-tc020-cue-size-align-expected.txt:
        * media/track/track-webvtt-tc020-cue-size-align.html:
        * media/track/track-webvtt-tc021-valign-expected.txt:
        * media/track/track-webvtt-tc021-valign.html:

2018-09-18  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE] Gardening after r236124

        Quick gardening. There might be more tests that are now passing or
        need updated results but this was the most obvious for now.
        Unreviewed gardening.
        * platform/wpe/TestExpectations:
        * platform/wpe/svg/custom/pan-direction-expected.txt:

2018-09-18  Xabier Rodriguez Calvar  <calvaris@igalia.com>

        [EME][GStreamer] The current EME implementation doesn't support the waitingforkey event
        https://bugs.webkit.org/show_bug.cgi?id=185590

        Reviewed by Philippe Normand.

        Updated status of
        imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-waitingforkey.https
        and expectations.

        * platform/wpe/TestExpectations:
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-waitingforkey.https-expected.txt:

2018-09-17  Ryan Haddad  <ryanhaddad@apple.com>

        Layout Test legacy-animation-engine/animations/play-state-in-shorthand.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=185651

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark test as flaky.

2018-09-17  Justin Fan  <justin_fan@apple.com>

        Updated expected test [ PASS ] messages for new test-harness format for webgl tests
        https://bugs.webkit.org/show_bug.cgi?id=189677

        Reviewed by Dean Jackson.

        Update generate-webgl-tests.py's test expectation template
        for my new version of webgl-test-harness.js for the webgl 2 suite,
        and update all webgl/2.0.0 test expectations to match.

        * webgl/resources/webgl-expectation-template.txt: 
        * webgl/2.0.0/.../*expected.txt: Modified all *expected.txts to match.

2018-09-17  Jer Noble  <jer.noble@apple.com>

        Add support for HEVC codec types in Media Capabilities
        https://bugs.webkit.org/show_bug.cgi?id=189565

        Reviewed by Eric Carlson.

        * media/hevc-codec-parameters-expected.txt: Added.
        * media/hevc-codec-parameters.html: Added.

2018-09-17  Devin Rousso  <drousso@apple.com>

        Web Inspector: generate CSSKeywordCompletions from backend values
        https://bugs.webkit.org/show_bug.cgi?id=189041

        Reviewed by Joseph Pecoraro.

        * inspector/css/getSupportedCSSProperties-expected.txt:
        * inspector/css/getSupportedCSSProperties.html:

2018-09-17  Youenn Fablet  <youenn@apple.com>

        track.onmute isn't called for a remote MediaStreamTrack when its counter part track is removed from the peer connection
        https://bugs.webkit.org/show_bug.cgi?id=176281
        <rdar://problem/44525674>

        Reviewed by Eric Carlson.

        * webrtc/remove-track-expected.txt: Added.
        * webrtc/remove-track.html: Added.

2018-09-17  Dawei Fenton  <realdawei@apple.com>

        Fixed typo in TestExpectations file.
        https://bugs.webkit.org/show_bug.cgi?id=188020.

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-09-17  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [Curl] Respond with requested authentication scheme for authentication challenge.
        https://bugs.webkit.org/show_bug.cgi?id=189318

        Reviewed by Alex Christensen.

        * platform/wincairo/TestExpectations:

2018-09-17  Antoine Quint  <graouts@apple.com>

        [Web Animations] Positive delays of accelerated animations are not respected
        https://bugs.webkit.org/show_bug.cgi?id=189411
        <rdar://problem/44151416>

        Reviewed by Dean Jackson.

        Use a mask over the animated rectangle to allow for a 1px rounding error when seeking to fix flakiness.

        * webanimations/accelerated-animation-with-delay-and-seek-expected.html:
        * webanimations/accelerated-animation-with-delay-and-seek.html:

2018-09-17  Youenn Fablet  <youenn@apple.com>

        Enable VCP for iOS and reenable it for MacOS
        https://bugs.webkit.org/show_bug.cgi?id=189635
        <rdar://problem/43621029>

        Reviewed by Eric Carlson.

        * platform/mac/webrtc/captureCanvas-webrtc-software-encoder.html:
        For platforms suppporting VCP, arbitrary size should be supported.
        * webrtc/routines.js:

2018-09-17  Alexey Proskuryakov  <ap@apple.com>

        Revert https://trac.webkit.org/r235910, because the new test times out.
        Crash under PlatformPopupMenuData::encode when interacting with a select menu that has variable fonts
        https://bugs.webkit.org/show_bug.cgi?id=188008

        * fast/text/variations/ipc2-expected.txt: Removed.
        * fast/text/variations/ipc2.html: Removed.
        * platform/mac-wk1/TestExpectations:

2018-09-17  Dawei Fenton  <realdawei@apple.com>

        Layout Test imported/w3c/web-platform-tests/2dcontext/imagebitmap/createImageBitmap-drawImage.html is a flaky failure.
        https://bugs.webkit.org/show_bug.cgi?id=188020.

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-09-17  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE] Add new failure

        Unreviewed gardening.
        * platform/wpe/TestExpectations:

2018-09-17  Claudio Saavedra  <csaavedra@igalia.com>

        [GTK][WPE] Update baseline for fast/dom/navigator-detached-no-crash

        In GTK it's just a matter of updating the baseline. In WPE
        there's some JS output that just needs to be ignored.
        * platform/gtk/TestExpectations:
        * platform/gtk/fast/dom/navigator-detached-no-crash-expected.txt:
        * platform/wpe/TestExpectations:

2018-09-17  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE] Mark crashing animations test.

        animations/play-state-start-paused.html crashing.
        Unreviewed gardening.
        * platform/wpe/TestExpectations:

2018-09-17  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE] Unmark now passing tests

        Unreviewed gardening.
        * platform/wpe/TestExpectations:

2018-09-17  Claudio Saavedra  <csaavedra@igalia.com>

        [GTK] Unmark now passing tests.

        Unreviewed gardening.
        * platform/gtk/TestExpectations:
s
2018-09-17  Sihui Liu  <sihui_liu@apple.com>

        Move IndexedDB to Network Process
        https://bugs.webkit.org/show_bug.cgi?id=189415
        <rdar://problem/44396973>

        Reviewed by Chris Dumez.

        * storage/indexeddb/modern/opendatabase-after-storage-crash.html:

2018-09-16  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening, mark fast/text/variations/ipc2.html as slow.

        * platform/mac-wk2/TestExpectations:

2018-09-15  Rob Buis  <rbuis@igalia.com>

        XMLHttpRequest::createResponseBlob() should create a Blob with type for empty response
        https://bugs.webkit.org/show_bug.cgi?id=189627

        Reviewed by Alexey Proskuryakov.

        * fast/files/xhr-response-blob-expected.txt:
        * fast/files/xhr-response-blob.html:

2018-09-14  Megan Gardner  <megan_gardner@apple.com>

        Additional tests for conic gradients
        https://bugs.webkit.org/show_bug.cgi?id=189566

        Reviewed by Simon Fraser.

        Adding tests that actually test the gradient nature of gradients.
        This is done by using an svg filter to consolidate the sections
        of the gradient to sections we can actuall test the color of. Also,
        the seams are clipped out, to reduce noise. Since gradients are 
        highly noise prone, this is the best way to check and make sure
        that gradients are functional without sevear noise issues.

        * TestExpectations:
        * fast/gradients/conic-gradient-alpha-expected.html: Added.
        * fast/gradients/conic-gradient-alpha.html: Added.
        * fast/gradients/conic-gradient-expected.html: Added.
        * fast/gradients/conic-gradient-extended-stops-expected.html: Added.
        * fast/gradients/conic-gradient-extended-stops.html: Added.
        * fast/gradients/conic-gradient.html: Added.
        * platform/ios-12/TestExpectations:
        * platform/mac/TestExpectations:

2018-09-14  Justin Fan  <justin_fan@apple.com>

        WebGL 2 conformance: rgb-format-support.html
        https://bugs.webkit.org/show_bug.cgi?id=189610
        <rdar://problem/44403343>

        Reviewed by Dean Jackson.

        Enabled rgb-format-support.html, and updated expectation for gl-teximage.html.

        * TestExpectations:
        * platform/mac/TestExpectations:
        * webgl/2.0.0/conformance2/rendering/rgb-format-support-expected.txt:

2018-09-14  Justin Michaud  <justin_michaud@apple.com>

        Add support for spreadMethod=reflect and repeat on SVG gradients (for CoreGraphics platforms)
        https://bugs.webkit.org/show_bug.cgi?id=5968

        Add new svg tests for linear gradients with spreadMethod, and alpha values specified in
        both stop-opacity and color.

        Reviewed by Simon Fraser.

        * platform/mac/svg/W3C-SVG-1.1/pservers-grad-10-b-expected.png:
        * svg/gradients/spreadMethod-expected.svg: Added.
        * svg/gradients/spreadMethod.svg: Added.
        * svg/gradients/spreadMethodAlpha-expected.svg: Added.
        * svg/gradients/spreadMethodAlpha.svg: Added.
        * svg/gradients/spreadMethodClose0-expected-mismatch.svg: Added.
        * svg/gradients/spreadMethodClose0.svg: Added.
        * svg/gradients/spreadMethodClose1-expected-mismatch.svg: Added.
        * svg/gradients/spreadMethodClose1.svg: Added.
        * svg/gradients/spreadMethodClose2-expected.svg: Added.
        * svg/gradients/spreadMethodClose2.svg: Added.
        * svg/gradients/spreadMethodDiagonal-expected.svg: Added.
        * svg/gradients/spreadMethodDiagonal.svg: Added.
        * svg/gradients/spreadMethodDiagonal2-expected.svg: Added.
        * svg/gradients/spreadMethodDiagonal2.svg: Added.
        * svg/gradients/spreadMethodDuplicateStop-expected.svg: Added.
        * svg/gradients/spreadMethodDuplicateStop.svg: Added.
        * svg/gradients/spreadMethodReversed-expected.svg: Added.
        * svg/gradients/spreadMethodReversed.svg: Added.
        * svg/gradients/stopAlpha-expected.svg: Added.
        * svg/gradients/stopAlpha.svg: Added.

2018-09-14  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed test gardening.

        * TestExpectations: Remove duplicative line introduced in r235959.
        * platform/wincairo/TestExpectations:

2018-09-14  Woodrow Wang  <woodrow_wang@apple.com>

        Add stability to tests for web API statistics
        https://bugs.webkit.org/show_bug.cgi?id=189560
        <rdar://problem/44396413>

        Reviewed by Chris Dumez.

        Using js-test added some data to the font loading collection, which made the tests dependent on
        js-test.js. Thus, if any changes were made to js-test.js the tests for web API statistics would
        fail. This patch removes the dependency on js-test. Also, this patch speeds up each test 
        significantly by bypassing the timer in ResourceLoadObserver for recording the statistics.  

        * http/tests/webAPIStatistics/canvas-read-and-write-data-collection-expected.txt:
        * http/tests/webAPIStatistics/canvas-read-and-write-data-collection.html:
        * http/tests/webAPIStatistics/font-load-data-collection-expected.txt:
        * http/tests/webAPIStatistics/font-load-data-collection.html:
        * http/tests/webAPIStatistics/navigator-functions-accessed-data-collection-expected.txt:
        * http/tests/webAPIStatistics/navigator-functions-accessed-data-collection.html:
        * http/tests/webAPIStatistics/screen-functions-accessed-data-collection-expected.txt:
        * http/tests/webAPIStatistics/screen-functions-accessed-data-collection.html:

2018-09-14  Eric Carlson  <eric.carlson@apple.com>

        Support arbitrary video resolution in getUserMedia API
        https://bugs.webkit.org/show_bug.cgi?id=178109
        <rdar://problem/35083128>

        Reviewed by Youenn Fablet.

        * fast/mediastream/MediaStreamTrack-getCapabilities-expected.txt:
        * fast/mediastream/apply-constraints-advanced-expected.txt:
        * fast/mediastream/apply-constraints-advanced.html:
        * fast/mediastream/apply-constraints-video.html:

2018-09-14  Devin Rousso  <webkit@devinrousso.com>

        Web Inspector: Record actions performed on ImageBitmapRenderingContext
        https://bugs.webkit.org/show_bug.cgi?id=181341

        Reviewed by Joseph Pecoraro.

        * inspector/canvas/recording-2d-expected.txt:
        * inspector/canvas/recording-bitmaprenderer-expected.txt: Added.
        * inspector/canvas/recording-bitmaprenderer.html: Added.
        * inspector/canvas/recording-webgl-expected.txt:
        * inspector/canvas/recording-webgl-snapshots-expected.txt:
        * inspector/canvas/resources/recording-utilities.js:
        Simplify the test output to avoid unrelated failures, such as if line numbers change.
        Also remove non-human-readable text, as it makes it more difficult for those unfamiliar with
        the test to determine if any differences are acceptable.

2018-09-14  Ms2ger  <Ms2ger@igalia.com>

        Remove some obsolete XHR tests
        https://bugs.webkit.org/show_bug.cgi?id=189581

        Reviewed by Youenn Fablet.

        * TestExpectations: Drop reference to removed test.

2018-09-13  Ryosuke Niwa  <rniwa@webkit.org>

        Capturing event listeners are called during bubbling phase for shadow hosts
        https://bugs.webkit.org/show_bug.cgi?id=174288

        Reviewed by Darin Adler.

        Added a W3C style testharness.js test and rebaselined two tests. See below for rationals of rebaselines.

        * fast/shadow-dom/capturing-and-bubbling-event-listeners-across-shadow-trees-expected.txt: Added.
        * fast/shadow-dom/capturing-and-bubbling-event-listeners-across-shadow-trees.html: Added.

        * media/media-load-event-expected.txt: Rebaselined. The logging of oncanplaythrough event is now happening
        before canplaythrough() is called because the logging is done by waitForEvent which uses a capturing event
        listener whereas canplaythrough is called by a event handler, which is non-capturing.

        * platform/ios-11/imported/w3c/web-platform-tests/dom/events/EventTarget-dispatchEvent-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/dom/events/EventTarget-dispatchEvent-expected.txt:

2018-09-13  Justin Fan  <justin_fan@apple.com>

        Update webkit-webgl-test-harness.js for more details on WebGL 2 conformance tests part 4
        https://bugs.webkit.org/show_bug.cgi?id=189609

        Unreviewed small change for only the few webgl 2 tests' harness; completely passing 
        tests now only report the PASS line, to avoid discrepancies between e.g. feature ability 
        of different graphics cards causing diffs to fail.

        * webgl/2.0.0/conformance2/glsl3/array-as-return-value-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-assign-constructor-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-assign-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-complex-indexing-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-element-increment-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-equality-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-in-complex-expression-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/bool-type-cast-bug-uint-ivec-uvec-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/compare-structs-containing-arrays-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/compound-assignment-type-combination-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/const-array-init-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/forbidden-operators-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/frag-depth-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/invalid-default-precision-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/invalid-invariant-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/loops-with-side-effects-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/misplaced-version-directive-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/no-attribute-vertex-shader-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/sampler-no-precision-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/sequence-operator-returns-non-constant-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1025-character-define-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1025-character-identifier.frag-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/short-circuiting-in-loop-condition-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/texture-offset-out-of-range-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/texture-offset-uniform-texture-coordinate-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/tricky-loop-conditions-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/uniform-block-layout-match-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/uniform-block-layouts-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-nv-driver-bug-expected.txt:
        * webgl/2.0.0/conformance2/renderbuffers/framebuffer-test-expected.txt:
        * webgl/2.0.0/conformance2/vertex_arrays/vertex-array-object-expected.txt:
        * webgl/2.0.0/resources/webkit-webgl-test-harness.js:
        (window.webglTestHarness.notifyFinished):

2018-09-13  Ryan Haddad  <ryanhaddad@apple.com>

        Layout Test imported/w3c/web-platform-tests/streams/piping/error-propagation-backward.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=188070

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.
        * platform/mac-wk1/TestExpectations: Ditto.

2018-09-13  Megan Gardner  <megan_gardner@apple.com>

        Fix color stop blending in conic gradients for stops past 1
        https://bugs.webkit.org/show_bug.cgi?id=189532
        <rdar://problem/44158221>

        Reviewed by Simon Fraser.

        Tests that last stop in the gradient is correct.

        * fast/gradients/conic-repeating-last-stop-expected.html: Added.
        * fast/gradients/conic-repeating-last-stop.html: Added.
        * platform/ios-12/TestExpectations:
        * platform/mac/TestExpectations:

2018-09-13  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r235954.

        Breaks the watchOS build.

        Reverted changeset:

        "Move IndexedDB to Network Process"
        https://bugs.webkit.org/show_bug.cgi?id=189415
        https://trac.webkit.org/changeset/235954

2018-09-13  Chris Dumez  <cdumez@apple.com>

        Regression(PSON): setting window.opener to null allows process swapping in cases that are not web-compatible
        https://bugs.webkit.org/show_bug.cgi?id=189590
        <rdar://problem/44422725>

        Reviewed by Geoffrey Garen.

        Add layout test coverage.

        * http/tests/navigation/resources/navigate-helper.html: Added.
        * http/tests/navigation/window-open-cross-origin-then-navigated-back-same-origin-expected.txt: Added.
        * http/tests/navigation/window-open-cross-origin-then-navigated-back-same-origin.html: Added.

2018-09-13  Dean Jackson  <dino@grorg.org>

        https://bugs.webkit.org/show_bug.cgi?id=189594

        Mark this test as failing on WK1.

        * platform/ios-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:

2018-09-13  Dean Jackson  <dino@grorg.org>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        Add feature headers to more tests.

        * fast/animation/css-animation-resuming-when-visible-with-style-change2.html:
        * legacy-animation-engine/animations/duplicate-keys-expected.html:

2018-09-13  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline imported/w3c/web-platform-tests/web-share/idlharness.https.html after r235925.

        Unreviewed test gardening.

        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/idlharness.https-expected.txt:

2018-09-13  Ms2ger  <Ms2ger@igalia.com>

        [GTK] Enable media-source/interfaces.html.
        https://bugs.webkit.org/show_bug.cgi?id=183613

        Unreviewed test gardening.

        The platform-neutral expectation applies to the GTK port as well.

        * platform/gtk/TestExpectations: Remove expectation.
        * platform/gtk/imported/w3c/web-platform-tests/media-source/interfaces-expected.txt: Removed.

2018-09-13  Youenn Fablet  <youenn@apple.com>

        Introduce RTCRtpSendParameters
        https://bugs.webkit.org/show_bug.cgi?id=189563

        Reviewed by Eric Carlson.

        * webrtc/video-getParameters-expected.txt:
        * webrtc/video-getParameters.html:

2018-09-12  Dean Jackson  <dino@grorg.org>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        Another test fix.

        * legacy-animation-engine/animations/duplicate-keys.html:

2018-09-12  Dean Jackson  <dino@grorg.org>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        And even more test fixes!

        * animations/stop-animation-on-suspend.html:
        * compositing/scrolling/touch-scroll-to-clip.html:

2018-09-12  Dean Jackson  <dino@grorg.org>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        More test fixes.

        * legacy-animation-engine/animations/animation-border-overflow.html:
        * legacy-animation-engine/animations/cross-fade-border-image-source.html:
        * legacy-animation-engine/animations/cross-fade-list-style-image.html:
        * legacy-animation-engine/animations/cross-fade-webkit-mask-box-image.html:
        * legacy-animation-engine/fast/shapes/shape-outside-floats/shape-outside-shape-image-threshold-animation.html:
        * legacy-animation-engine/transitions/extra-transition.html:
        * legacy-animation-engine/transitions/svg-transitions.html:
        * legacy-animation-engine/transitions/transition-in-delay-phase.html:
        * legacy-animation-engine/transitions/visited-link-color.html:

2018-09-12  Dean Jackson  <dino@apple.com>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        Fix failing tests by explicitly turning off Web Animations for CSS animations.
        Previously the test system was doing this, even though the feature was
        supposed to be enabled.

        * legacy-animation-engine/*.html:

2018-09-12  Alicia Boya Garc√≠a  <aboya@igalia.com>

        Unreviewed GTK test gardening.

        * TestExpectations:
        * platform/gtk/TestExpectations:

2018-09-11  Ryosuke Niwa  <rniwa@webkit.org>

        imported/w3c/web-platform-tests/shadow-dom/form-control-form-attribute.html hits assertion
        https://bugs.webkit.org/show_bug.cgi?id=189493

        Reviewed by Alex Christensen.

        Unskip the test now that it doesn't hit a debug assertion.

        * TestExpectations:

2018-09-12  Dan Bernstein  <mitz@apple.com>

        [Cocoa] Complete support for Paste as Quotation
        https://bugs.webkit.org/show_bug.cgi?id=189504

        Reviewed by Wenson Hsieh.

        Took a few existing tests of the Paste as Quotation behavior and modified them to use the
        new PasteAsQuotation command. The only difference in the results is that the blockquote has
        the "type" attribute set to "cite".

        * editing/pasteboard/4930986-1-paste-as-quotation-expected.txt: Added.
        * editing/pasteboard/4930986-1-paste-as-quotation.html: Added.
        * editing/pasteboard/4930986-2-paste-as-quotation-expected.txt: Added.
        * editing/pasteboard/4930986-2-paste-as-quotation.html: Added.
        * editing/pasteboard/4930986-3-paste-as-quotation-expected.txt: Added.
        * editing/pasteboard/4930986-3-paste-as-quotation.html: Added.

2018-09-12  Sihui Liu  <sihui_liu@apple.com>

        Move IndexedDB to Network Process
        https://bugs.webkit.org/show_bug.cgi?id=189415

        Reviewed by Geoffrey Garen.

        * storage/indexeddb/modern/opendatabase-after-storage-crash.html:

2018-09-11  Dean Jackson  <dino@apple.com>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        Reviewed by Tim Horton.

        New webkit-test-runner headers.

        * animations/3d/matrix-transform-type-animation.html:
        * animations/3d/replace-filling-transform.html:
        * animations/3d/transform-origin-vs-functions.html:
        * animations/3d/transform-perspective.html:
        * animations/additive-transform-animations.html:
        * animations/animation-border-overflow.html:
        * animations/animation-callback-timestamp.html:
        * animations/animation-controller-drt-api.html:
        * animations/animation-direction-alternate-reverse.html:
        * animations/animation-direction-reverse-fill-mode-hardware.html:
        * animations/animation-direction-reverse-hardware-opacity.html:
        * animations/animation-direction-reverse-hardware.html:
        * animations/animation-direction-reverse-non-hardware.html:
        * animations/animation-direction-reverse-timing-functions-hardware.html:
        * animations/animation-direction-reverse-timing-functions.html:
        * animations/animation-direction.html:
        * animations/animation-followed-by-transition.html:
        * animations/animation-hit-test-transform.html:
        * animations/animation-hit-test.html:
        * animations/animation-internals-api-multiple-keyframes.html:
        * animations/animation-internals-api.html:
        * animations/animation-offscreen-to-onscreen.html:
        * animations/animation-playstate-paused-style-resolution.html:
        * animations/big-rotation.html:
        * animations/change-completed-animation-transform.html:
        * animations/change-keyframes.html:
        * animations/combo-transform-rotate+scale.html:
        * animations/cross-fade-background-image.html:
        * animations/cross-fade-border-image-source.html:
        * animations/cross-fade-list-style-image.html:
        * animations/cross-fade-webkit-mask-box-image.html:
        * animations/duplicate-keys-expected.html:
        * animations/duplicate-keys.html:
        * animations/duplicated-keyframes-name.html:
        * animations/fill-forwards-end-state.html:
        * animations/fill-mode-forwards-zero-duration.html:
        * animations/fill-mode-removed.html:
        * animations/font-variations/font-stretch.html:
        * animations/font-variations/font-style.html:
        * animations/font-variations/font-variation-settings-order.html:
        * animations/font-variations/font-variation-settings-unlike.html:
        * animations/font-variations/font-variation-settings.html:
        * animations/font-variations/font-weight.html:
        * animations/generic-from-to.html:
        * animations/import.html:
        * animations/keyframe-multiple-timing-functions-transform.html:
        * animations/keyframe-timing-functions-transform.html:
        * animations/keyframe-timing-functions.html:
        * animations/keyframe-timing-functions2.html:
        * animations/keyframes-comma-separated.html:
        * animations/keyframes-dynamic.html:
        * animations/keyframes-infinite-iterations.html:
        * animations/keyframes-invalid-keys.html:
        * animations/keyframes-out-of-order.html:
        * animations/keyframes.html:
        * animations/leak-document-with-css-animation.html:
        * animations/lineheight-animation.html:
        * animations/longhand-timing-function.html:
        * animations/matrix-anim.html:
        * animations/missing-from-to-transforms.html:
        * animations/missing-from-to.html:
        * animations/missing-keyframe-properties-repeating.html:
        * animations/missing-keyframe-properties-timing-function.html:
        * animations/missing-keyframe-properties.html:
        * animations/missing-values-first-keyframe.html:
        * animations/missing-values-last-keyframe.html:
        * animations/multiple-animations-timing-function.html:
        * animations/multiple-animations.html:
        * animations/multiple-keyframes.html:
        * animations/negative-delay.html:
        * animations/pause-crash.html:
        * animations/play-state-start-paused.html:
        * animations/resources/animation-leak-iframe.html:
        * animations/simultaneous-start-left.html:
        * animations/simultaneous-start-transform.html:
        * animations/spring-function.html:
        * animations/stacking-context-unchanged-while-running.html:
        * animations/timing-functions.html:
        * animations/transition-and-animation-1.html:
        * animations/transition-and-animation-2.html:
        * animations/transition-and-animation-3.html:
        * animations/trigger-container-scroll-boundaries.html:
        * animations/trigger-container-scroll-empty.html:
        * animations/trigger-container-scroll-simple.html:
        * animations/unanimated-style.html:
        * animations/unprefixed-keyframes.html:
        * animations/width-using-ems.html:
        * compositing/animation/animated-composited-inside-hidden.html:
        * compositing/animation/computed-style-during-delay.html:
        * compositing/animation/layer-for-filling-animation.html:
        * compositing/backing/backface-visibility-flip.html:
        * compositing/backing/transform-transition-from-outside-view.html:
        * compositing/contents-scale/animating.html:
        * compositing/layer-creation/animation-overlap-with-children.html:
        * compositing/layer-creation/mismatched-rotated-transform-animation-overlap.html:
        * compositing/layer-creation/mismatched-rotated-transform-transition-overlap.html:
        * compositing/layer-creation/mismatched-transform-transition-overlap.html:
        * compositing/layer-creation/multiple-keyframes-animation-overlap.html:
        * compositing/layer-creation/overlap-animation-clipping.html:
        * compositing/layer-creation/overlap-animation-container.html:
        * compositing/layer-creation/overlap-animation.html:
        * compositing/layer-creation/scale-rotation-animation-overlap.html:
        * compositing/layer-creation/scale-rotation-transition-overlap.html:
        * compositing/layer-creation/translate-animation-overlap.html:
        * compositing/layer-creation/translate-scale-animation-overlap.html:
        * compositing/layer-creation/translate-scale-transition-overlap.html:
        * compositing/layer-creation/translate-transition-overlap.html:
        * compositing/overflow/overflow-positioning.html:
        * compositing/reflections/animation-inside-reflection.html:
        * compositing/reflections/nested-reflection-animated.html:
        * compositing/reflections/nested-reflection-transition.html:
        * compositing/transitions/scale-transition-no-start.html:
        * compositing/transitions/singular-scale-transition.html:
        * compositing/visible-rect/animated-from-none.html:
        * compositing/visible-rect/animated.html:
        * css3/calc/transitions-dependent.html:
        * css3/calc/transitions.html:
        * css3/filters/backdrop/animation.html:
        * css3/filters/composited-during-animation.html:
        * css3/filters/filter-animation-from-none-hw.html:
        * css3/filters/filter-animation-from-none-multi-hw.html:
        * css3/filters/filter-animation-from-none-multi.html:
        * css3/filters/filter-animation-from-none.html:
        * css3/filters/filter-animation-hw.html:
        * css3/filters/filter-animation-multi-hw.html:
        * css3/filters/filter-animation-multi.html:
        * css3/filters/filter-animation.html:
        * css3/masking/clip-path-animation.html:
        * fast/animation/css-animation-resuming-when-visible-with-style-change.html:
        * fast/animation/css-animation-resuming-when-visible.html:
        * fast/animation/css-animation-throttling-lowPowerMode.html:
        * fast/animation/height-auto-transition-computed-value.html:
        * fast/css-generated-content/pseudo-animation.html:
        * fast/css-generated-content/pseudo-transition.html:
        * fast/filter-image/filter-image-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-shape-image-threshold-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-shape-margin-animation.html:
        * http/wpt/css/css-animations/start-animation-001.html:
        * imported/blink/transitions/transition-not-interpolable.html:
        * imported/blink/transitions/unprefixed-transform.html:
        * platform/mac/TestExpectations:
        * transitions/background-position-transitions.html:
        * transitions/background-transitions.html:
        * transitions/blendmode-transitions.html:
        * transitions/border-radius-transition.html:
        * transitions/clip-path-path-transitions.html:
        * transitions/clip-path-transitions.html:
        * transitions/clip-transition.html:
        * transitions/color-transition-all.html:
        * transitions/color-transition-premultiplied.html:
        * transitions/color-transition-rounding.html:
        * transitions/cross-fade-background-image.html:
        * transitions/cross-fade-border-image.html:
        * transitions/cubic-bezier-overflow-color.html:
        * transitions/cubic-bezier-overflow-length.html:
        * transitions/cubic-bezier-overflow-shadow.html:
        * transitions/cubic-bezier-overflow-svg-length.html:
        * transitions/cubic-bezier-overflow-transform.html:
        * transitions/default-timing-function.html:
        * transitions/delay.html:
        * transitions/extra-transition.html:
        * transitions/flex-transitions.html:
        * transitions/font-family-during-transition.html:
        * transitions/frames-timing-function.html:
        * transitions/interrupted-all-transition.html:
        * transitions/longhand-vs-shorthand-initial.html:
        * transitions/mask-transitions.html:
        * transitions/min-max-width-height-transitions.html:
        * transitions/mismatched-shadow-styles.html:
        * transitions/mismatched-shadow-transitions.html:
        * transitions/mixed-type.html:
        * transitions/move-after-transition.html:
        * transitions/multiple-background-size-transitions.html:
        * transitions/multiple-background-transitions.html:
        * transitions/multiple-mask-transitions.html:
        * transitions/multiple-shadow-transitions.html:
        * transitions/negative-delay.html:
        * transitions/opacity-transition-zindex.html:
        * transitions/remove-transition-style.html:
        * transitions/shape-outside-transitions.html:
        * transitions/shorthand-border-transitions.html:
        * transitions/shorthand-transitions.html:
        * transitions/steps-timing-function.html:
        * transitions/svg-layout-transition.html:
        * transitions/svg-text-shadow-transition.html:
        * transitions/svg-transitions.html:
        * transitions/text-indent-transition.html:
        * transitions/transform-op-list-match.html:
        * transitions/transform-op-list-no-match.html:
        * transitions/transition-drt-api-delay.html:
        * transitions/transition-drt-api.html:
        * transitions/transition-end-event-rendering.html:
        * transitions/transition-hit-test-transform.html:
        * transitions/transition-hit-test.html:
        * transitions/transition-in-delay-phase.html:
        * transitions/transition-on-element-with-content.html:
        * transitions/transition-shorthand-delay.html:
        * transitions/transition-timing-function.html:
        * transitions/transition-to-from-auto.html:
        * transitions/transition-to-from-undefined.html:
        * transitions/visited-link-color.html:
        * transitions/zero-duration-in-list.html:
        * transitions/zero-duration-with-non-zero-delay-end.html:
        * transitions/zero-duration-with-non-zero-delay-start.html:
        * webanimations/accelerated-transition-by-removing-property.html:
        * webanimations/accessing-current-time-after-clearing-css-animation-effect.html:
        * webanimations/accessing-current-time-after-finished-css-animation-target-removal.html:
        * webanimations/css-animation-effect-target-change-and-animation-removal-crash.html:
        * webanimations/css-animations.html:
        * webanimations/empty-keyframes-crash.html:
        * webanimations/partly-accelerated-transition-by-removing-property.html:
        * webanimations/setting-css-animation-none-after-clearing-effect.html:
        * webanimations/setting-css-animation-timing-property-via-style-after-clearing-effect.html:

2018-09-12  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: fix test case failures in js-isLikelyStackTrace.html
        https://bugs.webkit.org/show_bug.cgi?id=180664

        Reviewed by Devin Rousso.

        * inspector/console/js-isLikelyStackTrace-expected.txt:
        * inspector/console/js-isLikelyStackTrace.html:
        Avoid Inspector Internal InjectedScript code in backtraces by producing
        the exception stacks in the page itself without going through inspector
        test evaluation code. This produces exception stacks more like a page.
        Also add some explicit tests for strings that we'd expect to be classified
        as exception stacks.

2018-09-12  Per Arne Vollan  <pvollan@apple.com>

        Layout Test fast/text/variations/ipc2.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189550

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-09-11  Olivia Barnett  <obarnett@apple.com>

        Implement the Web Share API for mac
        https://bugs.webkit.org/show_bug.cgi?id=189443

        Reviewed by Tim Horton.

        * platform/mac-wk2/fast/dom/navigator-detached-no-crash-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/idlharness.https-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/share-empty.https-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/share-securecontext.http-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/share-url-invalid.https-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/share-without-user-gesture.https-expected.txt: Added.
        Updated test expectations.

2018-09-11  Myles C. Maxfield  <mmaxfield@apple.com>

        Unreviewed test fix after r235910
        https://bugs.webkit.org/show_bug.cgi?id=188008

        * platform/mac-wk1/TestExpectations:

2018-09-11  James Savage  <james.savage@apple.com>

        Follow up to:
        Expose -apple-system-container-border color to internal web views.
        https://bugs.webkit.org/show_bug.cgi?id=189178.

        Reviewed by Timothy Hatcher.

        * platform/mac-highsierra/fast/css/apple-system-control-colors-expected.txt:
        Reset test expectations to go along with fix.

2018-09-07  Dean Jackson  <dino@apple.com>

        Add and expose Internal features from WebKit
        https://bugs.webkit.org/show_bug.cgi?id=189442
        <rdar://problem/44243404>

        Reviewed by Simon Fraser.

        Skip some tests that rely on an experimental feature that has
        moved to internal. A follow-up patch will allow WKTR to enable
        them on demand.

        * platform/mac/TestExpectations:

2018-09-11  Jer Noble  <jer.noble@apple.com>

        [MediaCapabilities] Implement MediaEngineConfigurationFactory registration
        https://bugs.webkit.org/show_bug.cgi?id=189438

        Reviewed by Eric Carlson.

        * media/mediacapabilities/mediacapabilities-types-expected.txt:

2018-09-08  Ryosuke Niwa  <rniwa@webkit.org>

        :first-child, :last-child, :nth-child, and :nth-of-type don't work on shadow root's children
        https://bugs.webkit.org/show_bug.cgi?id=166748
        <rdar://problem/29649177>

        Reviewed by Yusuke Suzuki.

        Added ref tests for matching positional pseudo classes on direct child of shadow roots
        during style resolutions and DOM API matching with C++ selector checker and selector compilers.

        Also added a test for invalidating these selectors.

        * fast/shadow-dom/nth-node-on-shadow-child-expected.html: Added.
        * fast/shadow-dom/nth-node-on-shadow-child-invalidation-expected.html: Added.
        * fast/shadow-dom/nth-node-on-shadow-child-invalidation.html: Added.
        * fast/shadow-dom/nth-node-on-shadow-child-no-jit-expected.html: Added.
        * fast/shadow-dom/nth-node-on-shadow-child-no-jit.html: Added.
        * fast/shadow-dom/nth-node-on-shadow-child.html: Added.

2018-09-11  Ryosuke Niwa  <rniwa@webkit.org>

        Updated the test expectation as this test also causes a crash in release builds.

        * TestExpectations:

2018-09-11  Wenson Hsieh  <wenson_hsieh@apple.com>

        [macOS] [WK2] Support changing foreground colors via color panel
        https://bugs.webkit.org/show_bug.cgi?id=189382
        <rdar://problem/44227311>

        Reviewed by Ryosuke Niwa.

        Adjust an existing layout test that applies a text color with alpha. Currently, this results in a font element
        being emitted with the `color` attribute, but this is incorrect, since the `color` attribute of a font element
        does not support "rgba(‚Ä¶)" values.

        Instead, split this into two cases: verify that setting the color to an opaque color (with alpha = 1) emits a
        font element with the correct `color` attribute, and fall back to using an inline style when the color is
        partially transparent.

        * editing/style/inline-style-container-expected.txt:
        * editing/style/inline-style-container.html:

2018-09-11  Justin Fan  <justin_fan@apple.com>

        Update webkit-webgl-test-harness.js for more details on WebGL 2 conformance tests part 3
        https://bugs.webkit.org/show_bug.cgi?id=189491

        Reviewed by Dean Jackson.

        Small update to the test-harness file used for the new 2.0.0 suite tests, as well as 
        expectation updates for the unskipped tests. 

        * webgl/2.0.0/conformance2/glsl3/array-as-return-value-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-assign-constructor-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-assign-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-complex-indexing-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-element-increment-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-equality-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-in-complex-expression-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/attrib-location-length-limits-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/bool-type-cast-bug-uint-ivec-uvec-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/compare-structs-containing-arrays-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/compound-assignment-type-combination-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/const-array-init-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/forbidden-operators-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/frag-depth-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/invalid-default-precision-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/invalid-invariant-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/loops-with-side-effects-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/misplaced-version-directive-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/no-attribute-vertex-shader-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/sampler-no-precision-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/sequence-operator-returns-non-constant-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-linking-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1024-character-define-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1024-character-identifier.frag-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1025-character-define-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1025-character-identifier.frag-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-invalid-characters-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-mis-matching-uniform-block-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/short-circuiting-in-loop-condition-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/texture-offset-out-of-range-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/texture-offset-uniform-texture-coordinate-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/tricky-loop-conditions-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/unary-minus-operator-in-dynamic-loop-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/uniform-block-layout-match-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/uniform-block-layouts-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/uniform-location-length-limits-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/valid-invariant-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-nv-driver-bug-expected.txt:
        * webgl/2.0.0/conformance2/renderbuffers/framebuffer-test-expected.txt:
        * webgl/2.0.0/conformance2/vertex_arrays/vertex-array-object-expected.txt:
        * webgl/2.0.0/resources/webkit-webgl-test-harness.js:
        (list):
        (window.webglTestHarness.reportResults):
        (window.webglTestHarness.notifyFinished):

2018-09-11  Myles C. Maxfield  <mmaxfield@apple.com>

        Crash under PlatformPopupMenuData::encode when interacting with a select menu that has variable fonts
        https://bugs.webkit.org/show_bug.cgi?id=188008

        Reviewed by Alex Christensen.

        * fast/text/variations/ipc2-expected.txt: Added.
        * fast/text/variations/ipc2.html: Added.

2018-09-11  Woodrow Wang  <woodrow_wang@apple.com>

        Add Web API Statistics Collection
        https://bugs.webkit.org/show_bug.cgi?id=187773
        <rdar://problem/44155162>

        Reviewed by Brent Fulgham.

        Added new tests and expectations for the web API statistics data collection.

        * TestExpectations:
        * http/tests/webAPIStatistics/canvas-read-and-write-data-collection-expected.txt: Added.
        * http/tests/webAPIStatistics/canvas-read-and-write-data-collection.html: Added.
        * http/tests/webAPIStatistics/font-load-data-collection-expected.txt: Added.
        * http/tests/webAPIStatistics/font-load-data-collection.html: Added.
        * http/tests/webAPIStatistics/navigator-functions-accessed-data-collection-expected.txt: Added.
        * http/tests/webAPIStatistics/navigator-functions-accessed-data-collection.html: Added.
        * http/tests/webAPIStatistics/screen-functions-accessed-data-collection-expected.txt: Added.
        * http/tests/webAPIStatistics/screen-functions-accessed-data-collection.html: Added.
        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-09-11  Frederic Wang  <fwang@igalia.com>

        Modify more tests to use document.scrollingElement to access viewport scroll properties
        https://bugs.webkit.org/show_bug.cgi?id=189495

        After r235806, it is wrong to use document.body to access scroll properties of the viewport
        in standard mode. New tests added since r227781 are modified to use
        document.scrollingElement instead and avoid flaky behavior. For consistency, we do the same
        for old tests in quirks mode. Note that WPT tests as well as the following tests using
        document.body on purpose are not modified:
        - fast/dom/Element/*
        - events/scroll-in-scaled-page-with-overflow-hidden.html
        - compositing/ios/overflow-scroll-update-overlap.html
        - body-stuck-with-dirty-bit-with-columns.html

        Reviewed by Antonio Gomes.

        * compositing/rtl/rtl-absolute-overflow-scrolled.html:
        * compositing/rtl/rtl-fixed-overflow-scrolled.html:
        * editing/caret/ios/absolute-caret-position-after-scroll.html:
        * editing/caret/ios/fixed-caret-position-after-scroll.html:
        * editing/execCommand/delete-no-scroll.html:
        * editing/input/resources/reveal-utilities.js:
        (performJumpAtTheEdgeTest):
        * editing/pasteboard/copy-crash.html:
        * editing/selection/ios/absolute-selection-after-scroll.html:
        * editing/selection/ios/fixed-selection-after-scroll.html:
        * fast/autoresize/autoresize-with-iframe-expected.txt:
        * fast/autoresize/autoresize-with-iframe.html:
        * fast/autoresize/basic-expected.txt:
        * fast/autoresize/basic.html:
        * fast/autoresize/turn-off-autoresize-expected.txt:
        * fast/autoresize/turn-off-autoresize.html:
        * fast/css/element-scrollByLines-scrollByPages-obsolete.html:
        * fast/dom/non-numeric-values-numeric-parameters-expected.txt:
        * fast/dom/non-numeric-values-numeric-parameters.html:
        * fast/dom/resources/check-scroll-position-onload.html:
        * fast/dom/scroll-position-for-new-loads.html:
        * fast/events/attempt-scroll-with-no-scrollbars.html:
        * fast/events/fire-scroll-event.html:
        * fast/events/frame-scroll-fake-mouse-move.html:
        * fast/events/ios/no-touch-events-when-stopping-momentum-scroll-in-mainframe-expected.txt:
        * fast/events/ios/no-touch-events-when-stopping-momentum-scroll-in-mainframe.html:
        * fast/events/ios/touch-events-during-scroll-deceleration-in-overflow.html:
        * fast/events/mouse-cursor-image-set.html:
        * fast/events/mouse-cursor-multiframecur.html:
        * fast/events/mouse-cursor.html:
        * fast/events/no-scroll-on-input-text-selection-expected.txt:
        * fast/events/no-scroll-on-input-text-selection.html:
        * fast/events/platform-wheelevent-paging-x-in-non-scrolling-page-expected.txt:
        * fast/events/platform-wheelevent-paging-x-in-non-scrolling-page.html:
        * fast/events/platform-wheelevent-paging-x-in-scrolling-page-expected.txt:
        * fast/events/platform-wheelevent-paging-x-in-scrolling-page.html:
        * fast/events/platform-wheelevent-paging-xy-in-scrolling-page-expected.txt:
        * fast/events/platform-wheelevent-paging-xy-in-scrolling-page.html:
        * fast/events/platform-wheelevent-paging-y-in-non-scrolling-page-expected.txt:
        * fast/events/platform-wheelevent-paging-y-in-non-scrolling-page.html:
        * fast/events/platform-wheelevent-paging-y-in-scrolling-page-expected.txt:
        * fast/events/platform-wheelevent-paging-y-in-scrolling-page.html:
        * fast/events/scale-and-scroll-body-expected.txt:
        * fast/events/scale-and-scroll-body.html:
        * fast/events/scale-and-scroll-window-expected.txt:
        * fast/events/scale-and-scroll-window.html:
        * fast/events/scroll-after-click-on-tab-index.html:
        * fast/events/scroll-to-anchor-in-overflow-hidden.html:
        * fast/events/touch/ios/touchmove-cancelable-after-touchstart-expected.txt:
        * fast/events/touch/ios/touchmove-cancelable-after-touchstart.html:
        * fast/forms/autofocus-opera-003.html:
        * fast/forms/input-readonly-autoscroll.html:
        * fast/forms/resources/common.js:
        (getAbsoluteRect):
        * fast/frames/iframe-scroll-page-up-down.html:
        * fast/frames/transparent-scrollbar.html:
        * fast/harness/results.html:
        * fast/html/empty-fragment-id-goto-top-expected.txt:
        * fast/html/empty-fragment-id-goto-top.html:
        * fast/images/imagemap-scroll.html:
        * fast/loader/scroll-position-restored-on-back-non-cached.html:
        * fast/loader/scroll-position-restored-on-back.html:
        * fast/multicol/body-stuck-with-dirty-bit-with-columns.html:
        * fast/repaint/resources/iframe-scroll-repaint-iframe.html:
        * fast/scrolling/ios/iframe-scroll-into-view.html:
        * fast/scrolling/latching/scroll-div-latched-div.html:
        * fast/scrolling/latching/scroll-div-latched-mainframe.html:
        * fast/scrolling/latching/scroll-div-with-nested-nonscrollable-iframe.html:
        * fast/scrolling/latching/scroll-iframe-fragment.html:
        * fast/scrolling/latching/scroll-iframe-latched-iframe.html:
        * fast/scrolling/latching/scroll-iframe-latched-mainframe.html:
        * fast/scrolling/latching/scroll-iframe-webkit1-latching-bug.html:
        * fast/scrolling/latching/scroll-select-bottom-test.html:
        * fast/scrolling/latching/scroll-select-latched-mainframe.html:
        * fast/scrolling/latching/scroll-select-latched-select.html:
        * fast/scrolling/rtl-point-in-iframe.html:
        * fast/spatial-navigation/snav-unit-overflow-and-scroll-in-direction.html:
        * fast/table/assert-when-visual-overflow-is-cleared.html:
        * fast/transforms/selection-bounds-in-transformed-view.html:
        * http/tests/navigation/anchor-frames-cross-origin-expected.txt:
        * http/tests/navigation/resources/frame-with-anchor-cross-origin.html:
        * jquery/resources/test/unit/offset.js:
        * legacy-animation-engine/fast/harness/results.html:
        * media/video-controls-to-not-scroll-page-on-load.html:
        * media/video-main-content-allow-then-scroll-expected.txt:
        * media/video-main-content-allow-then-scroll.html:
        * scrollbars/scrollbar-large-overflow-rectangle.html:
        * tiled-drawing/scrolling/fast-scroll-div-latched-div-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-div-latched-div.html:
        * tiled-drawing/scrolling/fast-scroll-div-latched-mainframe-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-iframe-latched-iframe-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-iframe-latched-iframe.html:
        * tiled-drawing/scrolling/fast-scroll-iframe-latched-mainframe-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-iframe-latched-select.html:
        * tiled-drawing/scrolling/fast-scroll-select-latched-mainframe-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-select-latched-mainframe.html:
        * tiled-drawing/scrolling/fast-scroll-select-latched-select-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-select-latched-select.html:
        * tiled-drawing/scrolling/latched-to-deleted-node.html:
        * tiled-drawing/scrolling/non-fast-region/top-content-inset-header.html:
        * tiled-drawing/scrolling/non-fast-region/top-content-inset.html:
        * tiled-drawing/scrolling/non-fast-region/wheel-event-plugin.html:
        * tiled-drawing/scrolling/root-overflow-with-mousewheel.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-mandatory-mainframe-horizontal.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-mandatory-mainframe-slow-horizontal.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-mandatory-mainframe-slow-vertical.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-mandatory-mainframe-vertical-then-horizontal.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-mandatory-mainframe-vertical.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-proximity-mainframe.html:

== Rolled over to ChangeLog-2018-09-11 ==
