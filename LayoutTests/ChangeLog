2017-05-22  Antti Koivisto  <antti@apple.com>

        [macOS Sierra Wk1] LayoutTest/animations/animation-initial-inheritance.html is a flaky image failure.
        https://bugs.webkit.org/show_bug.cgi?id=172177
        <rdar://problem/32239583>

        Unreviewed.

        * animations/animation-initial-inheritance.html: Try to unflake.

2017-05-21  Per Arne Vollan  <pvollan@apple.com>

        Unreviewed Windows test gardening, skip tests which are timing out.

        * platform/win/TestExpectations:

2017-05-21  Per Arne Vollan  <pvollan@apple.com>

        [Win] Update expectations for layout tests.
        https://bugs.webkit.org/show_bug.cgi?id=172437

        Unreviewed test gardening, update test expectations for failing tests.

        * platform/win/TestExpectations:

2017-05-21  Saam Barati  <sbarati@apple.com>

        We incorrectly throw a syntax error when declaring a top level for-loop iteration variable the same as a parameter
        https://bugs.webkit.org/show_bug.cgi?id=171041
        <rdar://problem/32082516>

        Reviewed by Yusuke Suzuki.

        * js/parser-syntax-check-expected.txt:
        * js/script-tests/parser-syntax-check.js:

2017-05-21  Antti Koivisto  <antti@apple.com>

        matchMedia('print').addListener() fires in WK1 but never in WK2 when printing (breaks printing Google maps, QuickLooks)
        https://bugs.webkit.org/show_bug.cgi?id=172361
        <rdar://problem/28777408>

        Reviewed by Sam Weinig.

        * fast/media/matchMedia-print-expected.txt: Added.
        * fast/media/matchMedia-print.html: Added.

2017-05-20  Alexey Proskuryakov  <ap@apple.com>

        Correct line endings in a couple files.

        * fast/canvas/script-tests/canvas-gradient-without-path.js:
        * fast/dom/Geolocation/page-reload-cancel-permission-requests.html:

2017-05-20  Chris Dumez  <cdumez@apple.com>

        Drop [NoInterfaceObject] from RTCDTMFSender and RTCStatsReport
        https://bugs.webkit.org/show_bug.cgi?id=172418

        Reviewed by Youenn Fablet.

        Rebaseline existing test to reflect change.

        * platform/mac-elcapitan/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac-wk1/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac-yosemite/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac/js/dom/global-constructors-attributes-expected.txt:

2017-05-20  Chris Dumez  <cdumez@apple.com>

        Value for iterator property is wrong for maplike interfaces
        https://bugs.webkit.org/show_bug.cgi?id=172410

        Reviewed by Sam Weinig.

        Extend test coverage to test the RTCStatsReport iterator.

        * webrtc/video-stats.html:

2017-05-20  Jer Noble  <jer.noble@apple.com>

        [MSE][Mac] Support painting MSE video-element to canvas
        https://bugs.webkit.org/show_bug.cgi?id=125157
        <rdar://problem/23062016>

        Reviewed by Eric Carlson.

        * media/media-source/content/test-fragmented.mp4: Add a 'edts' atom to move the presentation time for the
            first sample to 0:00.
        * media/media-source/content/test-fragmented-manifest.json: 
        * media/media-source/media-source-paint-to-canvas-expected.txt: Added.
        * media/media-source/media-source-paint-to-canvas.html: Added.

2017-05-19  Chris Dumez  <cdumez@apple.com>

        Consider not exposing webkitURL in workers
        https://bugs.webkit.org/show_bug.cgi?id=172166

        Reviewed by Geoffrey Garen.

        Rebaseline existing test to reflect behavior change.

        * js/dom/global-constructors-attributes-dedicated-worker-expected.txt:

2017-05-19  Jeremy Jones  <jeremyj@apple.com>

        webkitSupportsFullscreen and webkitSupportsPresentationMode('fullscreen') disagree.
        https://bugs.webkit.org/show_bug.cgi?id=172329
        rdar://problem/32260891

        Reviewed by Darin Adler.

        webkitSupportsPresentationMode('fullscreen') should delegate to webkitSupportsFullscreen.
        The additional mediaSession().fullscreenPermitted() check causes it to return false when
        not handling a user gesture, which isn't helpful to deciding to show a button in controls
        or not.

        * media/media-fullscreen-inline-expected.txt:
        * media/media-fullscreen-not-in-document-expected.txt:
        * media/media-fullscreen.js:
        (canplaythrough):
        * platform/mac-elcapitan/media/media-fullscreen-inline-expected.txt:
        * platform/mac-elcapitan/media/media-fullscreen-not-in-document-expected.txt:

2017-05-19  Matt Lewis  <jlewis3@apple.com>

        Marked webrtc/datachannel/filter-ice-candidate.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171061

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2017-05-19  Chris Dumez  <cdumez@apple.com>

        Do not fire load event for SVGElements that are detached or in frameless documents
        https://bugs.webkit.org/show_bug.cgi?id=172289
        <rdar://problem/32275689>

        Reviewed by Ryosuke Niwa.

        Add layout test coverage.

        * svg/load-event-detached-expected.txt: Added.
        * svg/load-event-detached.html: Added.

2017-05-19  Alexey Proskuryakov  <ap@apple.com>

        Many accessibility js-tests use waitUntilDone
        https://bugs.webkit.org/show_bug.cgi?id=172372

        Reviewed by Tim Horton.

        Corrected the use of js-test harness, updated the tests to use js-test.js instead
        of js-test-pre.js where possible.

        * accessibility/anonymous-render-block-in-continuation-causes-crash-expected.txt:
        * accessibility/anonymous-render-block-in-continuation-causes-crash.html:
        * accessibility/aria-checkbox-sends-notification.html:
        * accessibility/aria-invalid.html:
        * accessibility/aria-switch-sends-notification.html:
        * accessibility/deleting-iframe-destroys-axcache.html:
        * accessibility/file-upload-button-with-axpress.html:
        * accessibility/frame-disconnect-textmarker-cache-crash-expected.txt:
        * accessibility/frame-disconnect-textmarker-cache-crash.html:
        * accessibility/gtk/aria-listbox-crash.html:
        * accessibility/heading-title-includes-links-expected.txt:
        * accessibility/heading-title-includes-links.html:
        * accessibility/image-map-update-parent-crash-expected.txt:
        * accessibility/image-map-update-parent-crash.html:
        * accessibility/insert-children-assert-expected.txt:
        * accessibility/insert-children-assert.html:
        * accessibility/ios-simulator/focus-change-notifications.html:
        * accessibility/label-element-press.html:
        * accessibility/loading-iframe-updates-axtree.html:
        * accessibility/mac/aria-expanded-notifications.html:
        * accessibility/mac/aria-listbox-selectedchildren-change.html:
        * accessibility/mac/aria-liveregion-on-image.html:
        * accessibility/mac/aria-liveregions-addedelement.html:
        * accessibility/mac/aria-liveregions-changedalt.html:
        * accessibility/mac/aria-liveregions-changedtext.html:
        * accessibility/mac/aria-liveregions-removedelement.html:
        * accessibility/mac/combobox-activedescendant-notifications-expected.txt:
        * accessibility/mac/combobox-activedescendant-notifications.html:
        * accessibility/mac/focus-setting-selection-syncronizing-not-clearing-expected.txt:
        * accessibility/mac/focus-setting-selection-syncronizing-not-clearing.html:
        * accessibility/mac/html-slider-indicator.html:
        * accessibility/mac/input-replacevalue-userinfo-expected.txt:
        * accessibility/mac/input-replacevalue-userinfo.html:
        * accessibility/mac/ordered-textmarker-crash-expected.txt:
        * accessibility/mac/ordered-textmarker-crash.html:
        * accessibility/mac/search-with-frames-expected.txt:
        * accessibility/mac/search-with-frames.html:
        * accessibility/mac/selection-boundary-userinfo.html:
        * accessibility/mac/selection-change-userinfo.html:
        * accessibility/mac/selection-element-tabbing-to-link.html:
        * accessibility/mac/selection-value-changes-for-aria-textbox.html:
        * accessibility/mac/stale-textmarker-crash-expected.txt:
        * accessibility/mac/stale-textmarker-crash.html:
        * accessibility/mac/textbox-role-reports-notifications-expected.txt:
        * accessibility/mac/textbox-role-reports-notifications.html:
        * accessibility/mac/value-change/value-change-user-info-contenteditable.html:
        * accessibility/mac/value-change/value-change-user-info-textarea.html:
        * accessibility/mac/value-change/value-change-user-info-textfield.html:
        * accessibility/media-element.html:
        * accessibility/menu-list-sends-change-notification.html:
        * accessibility/multiselect-list-reports-active-option.html:
        * accessibility/paragraph-with-linebreaks.html:
        * accessibility/platform-name.html:
        * accessibility/radio-button-group-members.html:
        * accessibility/radio-button-title-label.html:
        * accessibility/selection-states-expected.txt:
        * accessibility/selection-states.html:
        * accessibility/spinbutton-value.html:
        * accessibility/svg-bounds.html:
        * accessibility/table-cell-for-column-and-row-crash.html:
        * accessibility/table-cells-roles.html:
        * accessibility/table-roles-hierarchy.html:
        * accessibility/table-with-aria-role.html:
        * accessibility/textarea-insertion-point-line-number.html:
        * accessibility/textbox-role-reports-selection.html:
        * accessibility/title-ui-element-correctness.html:
        * accessibility/unknown-roles-not-exposed-expected.txt:
        * accessibility/unknown-roles-not-exposed.html:
        * accessibility/win/bstr-elements-role.html:
        * accessibility/win/detached-object-notification-crash.html:
        * accessibility/win/heading-elements.html:
        * accessibility/win/img-alt-attribute.html:
        * accessibility/win/linked-elements.html:
        * accessibility/win/list-item-role.html:
        * accessibility/win/list-marker-role.html:
        * accessibility/win/list-role.html:
        * accessibility/win/multiple-select-element-role.html:
        * accessibility/win/option-element-position-and-size.html:
        * accessibility/win/parent-element.html:
        * accessibility/win/select-element-role.html:
        * accessibility/win/selection-and-focus.html:
        * accessibility/win/single-select-children-changed.html:
        * accessibility/win/single-select-children.html:
        * accessibility/win/text-role.html:
        * platform/mac-wk1/accessibility/loading-iframe-updates-axtree-expected.txt:
        * platform/mac-wk2/accessibility/deleting-iframe-destroys-axcache-expected.txt:
        * platform/mac/accessibility/deleting-iframe-destroys-axcache-expected.txt:
        * platform/mac/accessibility/media-element-expected.txt:
        * platform/mac/accessibility/table-cells-roles-expected.txt:
        * platform/mac/accessibility/table-roles-hierarchy-expected.txt:

2017-05-19  Matt Lewis  <jlewis3@apple.com>

        Rebaselined js/dom/global-constructors-attributes.html after revision 217129
        

        Unreviewed test gardening.

        * platform/mac/js/dom/global-constructors-attributes-expected.txt:

2017-05-19  Chris Dumez  <cdumez@apple.com>

        URLSearchParams / Headers objects @@iterator is not as per Web IDL spec
        https://bugs.webkit.org/show_bug.cgi?id=172218

        Reviewed by Youenn Fablet.

        * fast/text/font-face-set-javascript-expected.txt:
        * fast/text/font-face-set-javascript.html:
        Fix FontFaceSet test which wrong expected FontFaceSet's entries() to return
        a pair iterator. It does not make sense to return a pair iterator here given
        that this is not a key-value structure. FontFaceSet should not even have an
        entries() method but this is an artifact of us using iterable<FontFace> instead of
        setlike<FontFace> until we support setlike<> (Bug 159140).

2017-05-19  Zalan Bujtas  <zalan@apple.com>

        Redundant ellipsis box triggers ASSERT_WITH_SECURITY_IMPLICATION in InlineBox::parent().
        https://bugs.webkit.org/show_bug.cgi?id=172309
        <rdar://problem/32262357>

        Reviewed by Simon Fraser.

        * fast/inline/redundant-ellipsis-triggers-assert-incorrectly-expected.txt: Added.
        * fast/inline/redundant-ellipsis-triggers-assert-incorrectly.html: Added.

2017-05-19  Ryan Haddad  <ryanhaddad@apple.com>

        LayoutTest js/Promise-types.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=171739

        Unreviewed follow-up fix for JSC tests.

        * js/script-tests/Promise-types.js:

2017-05-19  Youenn Fablet  <youenn@apple.com>

        Align MockRealtimeMediaSourceCenter with RealtimeMediaSourceCenter
        https://bugs.webkit.org/show_bug.cgi?id=172324

        Reviewed by Eric Carlson.

        * fast/mediastream/mock-media-source-webaudio.html:

2017-05-19  Alexey Proskuryakov  <ap@apple.com>

        Many CSS js-tests use waitUntilDone
        https://bugs.webkit.org/show_bug.cgi?id=172379

        Reviewed by Tim Horton.

        Corrected the use of js-test harness, updated the tests to use js-test.js instead
        of js-test-pre.js where possible.

        * css3/filters/should-not-have-compositing-layer-expected.txt:
        * css3/filters/should-not-have-compositing-layer.html:
        * css3/scroll-snap/nested-elements-expected.txt:
        * css3/scroll-snap/nested-elements.html:
        * css3/scroll-snap/scroll-snap-2d-change-axis-type-expected.txt:
        * css3/scroll-snap/scroll-snap-2d-change-axis-type.html:
        * css3/scroll-snap/scroll-snap-2d-offsets-computed-independently-expected.txt:
        * css3/scroll-snap/scroll-snap-2d-offsets-computed-independently.html:
        * css3/scroll-snap/scroll-snap-elements-container-larger-than-children-expected.txt:
        * css3/scroll-snap/scroll-snap-elements-container-larger-than-children.html:
        * css3/scroll-snap/scroll-snap-mismatch-expected.txt:
        * css3/scroll-snap/scroll-snap-mismatch.html:
        * css3/scroll-snap/scroll-snap-offsets-expected.txt:
        * css3/scroll-snap/scroll-snap-offsets.html:
        * css3/scroll-snap/scroll-snap-positions-expected.txt:
        * css3/scroll-snap/scroll-snap-positions-mainframe-expected.txt:
        * css3/scroll-snap/scroll-snap-positions-mainframe.html:
        * css3/scroll-snap/scroll-snap-positions-overflow-resize-expected.txt:
        * css3/scroll-snap/scroll-snap-positions-overflow-resize.html:
        * css3/scroll-snap/scroll-snap-positions.html:
        * css3/scroll-snap/scroll-snap-style-changed-align-expected.txt:
        * css3/scroll-snap/scroll-snap-style-changed-align.html:
        * css3/touch-action/touch-action-manipulation-fast-clicks.html:
        * fast/css/counters/2displays-expected.txt:
        * fast/css/counters/2displays.html:
        * fast/css/counters/after-continuation-expected.txt:
        * fast/css/counters/after-continuation.html:
        * fast/css/counters/counter-increment-inherit-expected.txt:
        * fast/css/counters/counter-increment-inherit.htm:
        * fast/css/counters/counter-increment-tests-expected.txt:
        * fast/css/counters/counter-increment-tests.htm:
        * fast/css/device-aspect-ratio.html:
        * fast/css/hover-display-block-inline-expected.txt:
        * fast/css/hover-display-block-inline.html:
        * fast/css/hover-display-block-none-expected.txt:
        * fast/css/hover-display-block-none.html:
        * fast/css/image-resolution/image-resolution.html:
        * fast/css/max-device-aspect-ratio.html:
        * fast/css/min-device-aspect-ratio.html:
        * fast/css/pseudo-target-indirect-sibling-001.html:
        * fast/css/pseudo-target-indirect-sibling-002.html:

2017-05-19  Ryan Haddad  <ryanhaddad@apple.com>

        Skip tests that are reporting FailureNotTested.
        https://bugs.webkit.org/show_bug.cgi?id=172378

        Unreviewed test gardening.

        * TestExpectations:
        * platform/ios-wk2/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:

2017-05-19  Ryan Haddad  <ryanhaddad@apple.com>

        LayoutTest js/Promise-types.html is a flaky failure (Unhandled Promise Rejection messages)
        https://bugs.webkit.org/show_bug.cgi?id=171739

        Reviewed by Joseph Pecoraro.

        Silence the console messages for unhandled rejections in this LayoutTest.

        * js/script-tests/Promise-types.js:

2017-05-19  Zalan Bujtas  <zalan@apple.com>

        LayoutTests/accessibility/mac/aria-multiple-liveregions-notification.html should force layout after r216726.
        https://bugs.webkit.org/show_bug.cgi?id=172363
        <rdar://problem/32182167>

        Reviewed by Simon Fraser.

        10ms timer is too short to securely ensure a layout. Let's force it instead.

        * accessibility/mac/aria-multiple-liveregions-notification.html:

2017-05-19  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r217098, r217111, r217113, and
        r217114.
        https://bugs.webkit.org/show_bug.cgi?id=172367

        These changes broke the Windows build and introduced
        LayoutTest failures (Requested by ryanhaddad on #webkit).

        Reverted changesets:

        "[MSE][Mac] Support painting MSE video-element to canvas"
        https://bugs.webkit.org/show_bug.cgi?id=125157
        http://trac.webkit.org/changeset/217098

        "[MSE][Mac] Support painting MSE video-element to canvas"
        https://bugs.webkit.org/show_bug.cgi?id=125157
        http://trac.webkit.org/changeset/217111

        "Unreviewed build fix; add undefined functions and constants
        to the CoreMediaSoftLink.h, and use the"
        http://trac.webkit.org/changeset/217113

        "[MSE][Mac] Support painting MSE video-element to canvas"
        https://bugs.webkit.org/show_bug.cgi?id=125157
        http://trac.webkit.org/changeset/217114

2017-05-19  Andy Estes  <aestes@apple.com>

        REGRESSION (r217078): window.ApplePaySession is undefined on macOS Sierra
        https://bugs.webkit.org/show_bug.cgi?id=172344

        Reviewed by Tim Horton.

        * TestExpectations: Removed http/tests/ssl/applepay/ApplePaySession.html

2017-05-19  Chris Dumez  <cdumez@apple.com>

        CSSOM insertRule() index argument is optional with default 0
        https://bugs.webkit.org/show_bug.cgi?id=172219

        Reviewed by Sam Weinig.

        Update / Rebaseline existing tests to reflect behavior change.

        * fast/css/CSSSupportsRule-parameters-expected.txt:
        * fast/css/CSSSupportsRule-parameters.html:
        * fast/css/stylesheet-parameters-expected.txt:
        * fast/css/stylesheet-parameters.html:
        * fast/dom/non-numeric-values-numeric-parameters-expected.txt:

2017-05-19  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed GTK+ gardening. Adding or updating test expectations for
        four W3C layout tests covering MSE and IndexedDB implementations.

        * platform/gtk/TestExpectations:

2017-05-19  Jer Noble  <jer.noble@apple.com>

        [MSE][Mac] Support painting MSE video-element to canvas
        https://bugs.webkit.org/show_bug.cgi?id=125157
        <rdar://problem/23062016>

        Reviewed by Eric Carlson.

        * media/media-source/content/test-fragmented.mp4:

2017-05-19  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed GTK+ gardening.

        * platform/gtk/TestExpectations: Skip Apple Pay layout tests. Update one
        http/tests/loading/resourceLoadStatistics test expectation.
        * platform/gtk/http/tests/dom/document-attributes-null-handling-expected.txt: Update after r217091.

2017-05-18  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r217079.

        This change broke internal builds.

        Reverted changeset:

        "Redundant ellipsis box triggers
        ASSERT_WITH_SECURITY_IMPLICATION in InlineBox::parent()."
        https://bugs.webkit.org/show_bug.cgi?id=172309
        http://trac.webkit.org/changeset/217079

2017-05-18  Chris Dumez  <cdumez@apple.com>

        [macOS Sierra] Layout Test http/tests/dom/document-attributes-null-handling.html is flaky.
        https://bugs.webkit.org/show_bug.cgi?id=172311

        Reviewed by Andreas Kling.

        Not sure why the cookies are sometimes returned by CFNetwork in a different order. However,
        what matters and what we want to test is that the cookie was actually added so make the
        test not rely on a specific order to address flakiness.

        * http/tests/dom/document-attributes-null-handling-expected.txt:
        * http/tests/dom/document-attributes-null-handling.html:

2017-05-18  Andy Estes  <aestes@apple.com>

        Unreviewed gardening on ApplePaySession.html after r217078.

        * TestExpectations: Expect failure until webkit.org/b/172344 is fixed.

2017-05-18  Andy Estes  <aestes@apple.com>

        Unreviewed gardening on ApplePaySession.html after r217078.

        The ApplePayError tests are only expected to pass when APPLE_PAY_DELEGATE is enabled, so
        this breaks them out into their own file so that they can be skipped independently from
        ApplePaySession.html.

        * http/tests/ssl/applepay/ApplePayError-expected.txt: Added.
        * http/tests/ssl/applepay/ApplePayError.html: Added.
        * http/tests/ssl/applepay/ApplePaySession-expected.txt:
        * http/tests/ssl/applepay/ApplePaySession.html:
        * platform/mac-wk2/TestExpectations:

2017-05-18  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline js/dom/global-constructors-attributes.html after r217078.

        Unreviewed test gardening.

        * platform/mac-wk1/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac/js/dom/global-constructors-attributes-expected.txt:

2017-05-18  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] do not cache gUM permissions
        https://bugs.webkit.org/show_bug.cgi?id=172245

        Reviewed by Youenn Fablet.

        * fast/mediastream/MediaDevices-getUserMedia-expected.txt: Updated.
        * fast/mediastream/MediaDevices-getUserMedia.html:
        * http/tests/media/media-stream/get-user-media-prompt-expected.txt:
        * http/tests/media/media-stream/get-user-media-prompt.html:

2017-05-18  Zalan Bujtas  <zalan@apple.com>

        Redundant ellipsis box triggers ASSERT_WITH_SECURITY_IMPLICATION in InlineBox::parent().
        https://bugs.webkit.org/show_bug.cgi?id=172309
        <rdar://problem/32262357>

        Reviewed by Simon Fraser.

        * fast/inline/redundant-ellipsis-triggers-assert-incorrectly-expected.txt: Added.
        * fast/inline/redundant-ellipsis-triggers-assert-incorrectly.html: Added.

2017-05-18  Simon Fraser  <simon.fraser@apple.com>

        Add a test to ensure that media controls don't trigger composting of ancestors via "isolates blending"
        https://bugs.webkit.org/show_bug.cgi?id=172320

        Reviewed by Dean Jackson.

        Test that makes some source-less and sourced audio and video controls, and dumps
        the layer tree to ensure that they didn't trigger compositing on their ancestor
        stacking context element.

        * media/controls-should-not-trigger-isolates-blending-expected.txt: Added.
        * media/controls-should-not-trigger-isolates-blending.html: Added.

2017-05-18  Dean Jackson  <dino@apple.com>

        Transform misplaces element 50% of the time
        https://bugs.webkit.org/show_bug.cgi?id=172300
        <rdar://problem/29835668>

        Reviewed by Simon Fraser.

        A test case which has an animation that relies on
        translation percentages. If all goes well, the
        animating element will be completely obscured.

        * animations/needs-layout-expected.html: Added.
        * animations/needs-layout.html: Added.

2017-05-18  Daniel Bates  <dabates@apple.com>

        Improve error message for Access-Control-Allow-Origin violation due to misconfigured server
        https://bugs.webkit.org/show_bug.cgi?id=162819
        <rdar://problem/28575938>

        Reviewed by Joseph Pecoraro.

        Add more tests when Access-Control-Allow-Origin has more than one value and group
        with existing tests. Update expected results.

        * http/tests/xmlhttprequest/origin-exact-matching-expected.txt:
        * http/tests/xmlhttprequest/resources/origin-exact-matching-iframe.html: Also extracted
        the origin string for the page into a local variable called pageOrigin, making use of document.origin,
        and referenced this variable instead of duplicating its value. Fixed various style nits.

2017-05-18  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Grandfather domains for existing data records
        https://bugs.webkit.org/show_bug.cgi?id=172155
        <rdar://problem/24913532>

        Reviewed by Alex Christensen.

        * http/tests/loading/resourceLoadStatistics/grandfathering-expected.txt: Added.
        * http/tests/loading/resourceLoadStatistics/grandfathering.html: Added.
        * platform/wk2/TestExpectations:
            Marked it Pass for WebKit2.

2017-05-18  Keith Miller  <keith_miller@apple.com>

        Fix wasm-mem-post-message.html test expectations
        https://bugs.webkit.org/show_bug.cgi?id=172308

        Unreviewed, test gardening.

        * platform/ios-simulator/TestExpectations:
        * platform/win/TestExpectations:

2017-05-18  Jer Noble  <jer.noble@apple.com>

        Allow nested timers to propagate user gestures so long as the total nested interval is less than 1s.
        https://bugs.webkit.org/show_bug.cgi?id=172173

        Reviewed by Andy Estes.

        * fast/events/popup-blocked-from-untrusted-mouse-click.html:
        * fast/events/popup-blocking-timers4-expected.txt: Removed.
        * fast/events/popup-blocking-timers4.html: Removed.
        * media/restricted-audio-playback-with-multiple-settimeouts-expected.txt: Added.
        * media/restricted-audio-playback-with-multiple-settimeouts.html: Added.
        * platform/ios/TestExpectations:

2017-05-18  Daniel Bates  <dabates@apple.com>

        Evaluating window named element may return wrong result
        https://bugs.webkit.org/show_bug.cgi?id=166792
        <rdar://problem/29801059>

        Reviewed by Chris Dumez.

        Add tests to ensure we do not regress evaluation of window named elements.

        * http/tests/security/named-window-property-from-same-origin-inactive-document-expected.txt: Added.
        * http/tests/security/named-window-property-from-same-origin-inactive-document.html: Added.
        * http/tests/security/resources/innocent-victim-with-named-elements.html: Added.
        * http/tests/security/xss-DENIED-named-window-property-from-cross-origin-inactive-document-expected.txt: Added.
        * http/tests/security/xss-DENIED-named-window-property-from-cross-origin-inactive-document.html: Added.

2017-05-18  Andy Estes  <aestes@apple.com>

        Add "countryCode" to ApplePayErrorContactField
        https://bugs.webkit.org/show_bug.cgi?id=172264
        <rdar://problem/32004909>

        Reviewed by Anders Carlsson.

        * http/tests/ssl/applepay/ApplePaySession-expected.txt:
        * http/tests/ssl/applepay/ApplePaySession.html:

2017-05-18  Daniel Bates  <dabates@apple.com>

        REGRESSION (r209608): Cross-origin plugin document opened in child window blocked by parent
        window CSP when object-src 'none' is set
        https://bugs.webkit.org/show_bug.cgi?id=172038
        <rdar://problem/32258262>

        Reviewed by Andy Estes.

        Adds tests to ensure that a same-origin- and cross-origin- plugin document opened in a child
        window inherit and do not inherit the CSP of its opener, respectively. Also adds a test to
        ensure that an about:blank window inherits the CSP plugin policy of its opener.

        * http/tests/plugins/resources/plugin-document-alert-and-notify-done.pl: Added.
        * http/tests/security/contentSecurityPolicy/cross-origin-plugin-document-allowed-in-child-window-expected.txt: Added.
        * http/tests/security/contentSecurityPolicy/cross-origin-plugin-document-allowed-in-child-window.html: Added.
        * http/tests/security/contentSecurityPolicy/plugin-blocked-in-about-blank-window-expected.txt: Added.
        * http/tests/security/contentSecurityPolicy/plugin-blocked-in-about-blank-window.html: Added.
        * http/tests/security/contentSecurityPolicy/same-origin-plugin-document-blocked-in-child-window-expected.txt: Added.
        * http/tests/security/contentSecurityPolicy/same-origin-plugin-document-blocked-in-child-window.html: Added.
        * platform/ios/TestExpectations: Skip added tests as iOS does not support plugins.

2017-05-18  Keith Miller  <keith_miller@apple.com>

        WebAssembly API: test with neutered inputs
        https://bugs.webkit.org/show_bug.cgi?id=163899

        Reviewed by JF Bastien.

        This patch dups Saam's de-modularized builder.

        * workers/sab/postMessage-transfer-type-error-expected.txt:
        * workers/wasm-mem-post-message-expected.txt: Added.
        * workers/wasm-mem-post-message.html: Added.
        * workers/wasm-mem-post-message/test.js: Added.
        (worker.onmessage):
        * workers/wasm-mem-post-message/worker.js: Added.
        (onmessage):
        * workers/wasm-resources/builder.js: Added.
        (const._fail):
        (const.isNotA.assert.isNotA):
        (const):
        (switch.typeof):
        (Builder):
        (Builder.prototype.setChecked):
        (Builder.prototype.setPreamble):
        (Builder.prototype._functionIndexSpaceKeyHash):
        (Builder.prototype._registerFunctionToIndexSpace):
        (Builder.prototype._getFunctionFromIndexSpace):
        (Builder.prototype._registerSectionBuilders.const.section.in.WASM.description.section.switch.section.case.string_appeared_here.this.section):
        (Builder.prototype._registerSectionBuilders.const.section.in.WASM.description.section.switch.section.const.codeBuilder.End.switch.case.string_appeared_here.e):
        (Builder.prototype._registerSectionBuilders.this.Unknown):

2017-05-18  Chris Dumez  <cdumez@apple.com>

        Update web-platform-tests tools
        https://bugs.webkit.org/show_bug.cgi?id=172247

        Reviewed by Youenn Fablet.

        * platform/mac/imported/w3c/web-platform-tests/media-source/interfaces-expected.txt:

2017-05-18  Antti Koivisto  <antti@apple.com>

        Design mode should not affect UA shadow trees
        https://bugs.webkit.org/show_bug.cgi?id=171854
        <rdar://problem/32071037>

        Reviewed by Zalan Bujtas.

        * editing/deleting/search-shadow-tree-delete-expected.txt: Added.
        * editing/deleting/search-shadow-tree-delete.html: Added.

2017-05-18  Miguel Gomez  <magomez@igalia.com>

        Unreviewed GTK+ gardening. Update expectations of tests failing after r217039.

        * platform/gtk/TestExpectations:

2017-05-17  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r217014.

        This change caused mac-wk2 LayoutTests to exit early due to
        crashes.

        Reverted changeset:

        "Resource Load Statistics: Grandfather domains for existing
        data records"
        https://bugs.webkit.org/show_bug.cgi?id=172155
        http://trac.webkit.org/changeset/217014

2017-05-17  Zalan Bujtas  <zalan@apple.com>

        Tighten TextIterator::handleTextNode run-renderer mapping logic.
        https://bugs.webkit.org/show_bug.cgi?id=172174

        Reviewed by Antti Koivisto.

        * fast/shadow-dom/slot-crash-expected.txt:

2017-05-17  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Grandfather domains for existing data records
        https://bugs.webkit.org/show_bug.cgi?id=172155
        <rdar://problem/24913532>

        Reviewed by Alex Christensen.

        * http/tests/loading/resourceLoadStatistics/grandfathering-expected.txt: Added.
        * http/tests/loading/resourceLoadStatistics/grandfathering.html: Added.
        * platform/wk2/TestExpectations:
            Marked it Pass for WebKit2.

2017-05-17  Zalan Bujtas  <zalan@apple.com>

        Debug ASSERT: WebCore::RenderImageResource::shutdown
        https://bugs.webkit.org/show_bug.cgi?id=172238
        <rdar://problem/30064601>

        Reviewed by Simon Fraser.

        * fast/images/assert-when-insertion-point-is-incorrect-expected.txt: Added.
        * fast/images/assert-when-insertion-point-is-incorrect.html: Added.

2017-05-17  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/appcache/404-resource-with-slow-main-resource.php as flaky on mac-wk1.
        https://bugs.webkit.org/show_bug.cgi?id=172241

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-05-17  Chris Dumez  <cdumez@apple.com>

        Setting URL.search to '' results in a stringified URL ending in '?'
        https://bugs.webkit.org/show_bug.cgi?id=162345
        <rdar://problem/31800441>

        Reviewed by Alex Christensen.

        * fast/dom/DOMURL/set-href-attribute-search-expected.txt:
        * fast/dom/DOMURL/set-href-attribute-search.html:
        * fast/dom/HTMLAnchorElement/script-tests/set-href-attribute-search.js:
        * fast/dom/HTMLAnchorElement/set-href-attribute-search-expected.txt:
        Update / rebaseline existing tests to reflect behavior change.

        * platform/ios-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        Unskip url-setters.html test as it seems to be passing for me on WK1.

2017-05-17  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] videoWidth and videoHeight should be set when 'loadedmetadata' event fires
        https://bugs.webkit.org/show_bug.cgi?id=172223
        <rdar://problem/31899755>

        Reviewed by Jer Noble.

        * fast/mediastream/get-user-media-on-loadedmetadata-expected.txt: Added.
        * fast/mediastream/get-user-media-on-loadedmetadata.html: Added.

2017-05-17  Youenn Fablet  <youenn@apple.com>

        iOS WebRTC Media Capture should not allow camera capture from background tab
        https://bugs.webkit.org/show_bug.cgi?id=172200

        Reviewed by Eric Carlson.

        * platform/ios/mediastream/getUserMedia-disabled-in-background-tabs-expected.txt: Added.
        * platform/ios/mediastream/getUserMedia-disabled-in-background-tabs.html: Added.

2017-05-15  Jiewen Tan  <jiewen_tan@apple.com>

        Replace CryptoOperationData with BufferSource for WebKitSubtleCrypto
        https://bugs.webkit.org/show_bug.cgi?id=172146
        <rdar://problem/32122256>

        Reviewed by Brent Fulgham.

        * crypto/webkitSubtle/argument-conversion-expected.txt:
        * crypto/webkitSubtle/import-export-raw-key-leak-expected.txt: Added.
        * crypto/webkitSubtle/import-export-raw-key-leak.html: Added.

2017-05-17  Chris Dumez  <cdumez@apple.com>

        Unreviewed, skip newly imported notifications tests on iOS

        Notifications are not enabled on iOS.

        * platform/ios/TestExpectations:

2017-05-17  Ryan Haddad  <ryanhaddad@apple.com>

        Mark two http/tests/media/hls/video tests as failing during investigation.
        https://bugs.webkit.org/show_bug.cgi?id=171814

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-05-17  Nan Wang  <n_wang@apple.com>

        ASSERTION FAILED in WebCore::AccessibilityNodeObject::insertChild()
        https://bugs.webkit.org/show_bug.cgi?id=171927
        <rdar://problem/32109781>

        Reviewed by Chris Fleizach.

        * accessibility/insert-children-assert-expected.txt: Added.
        * accessibility/insert-children-assert.html: Added.

2017-05-17  Chris Dumez  <cdumez@apple.com>

        Import Notification tests from web-platform-tests
        https://bugs.webkit.org/show_bug.cgi?id=172196

        Reviewed by Youenn Fablet.

        * resources/testharnessreport.js:
        Allow notifications as this is a pre-requirement for web-platform-tests.

2017-05-17  Ryosuke Niwa  <rniwa@webkit.org>

        getElementById can return a wrong elemnt when a matching element is removed during beforeload event
        https://bugs.webkit.org/show_bug.cgi?id=171374

        Reviewed by Brent Fulgham.

        Added a regression test for calling getElementById after removing a matching element
        during beforeload event of a link element.

        * fast/html/link-element-removal-during-beforeload-expected.txt: Added.
        * fast/html/link-element-removal-during-beforeload.html: Added.

2017-05-17  Chris Dumez  <cdumez@apple.com>

        Unreviewed, rebaseline js/dom/global-constructors-attributes.html after r216959.

        * js/dom/global-constructors-attributes-expected.txt:
        * platform/gtk/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac-elcapitan/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac-wk1/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac-yosemite/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac/js/dom/global-constructors-attributes-expected.txt:
        * platform/win/js/dom/global-constructors-attributes-expected.txt:
        * platform/wpe/js/dom/global-constructors-attributes-expected.txt:

2017-05-17  Ben Kelly  <ben@wanderview.com>

        Import FileAPI WPT tests.
        https://bugs.webkit.org/show_bug.cgi?id=171960

        Reviewed by Youenn Fablet.

        * TestExpectations:

2017-05-17  Antti Koivisto  <antti@apple.com>

        Regression (198943): <marquee> shouldn't wrap text
        https://bugs.webkit.org/show_bug.cgi?id=172217

        Reviewed by Andreas Kling.

        * fast/html/marquee-child-wrap-expected.html: Added.
        * fast/html/marquee-child-wrap.html: Added.

2017-05-17  David Kilzer  <ddkilzer@apple.com>

        REGRESSION (r216966): fast/shadow-dom/slot-crash.html started to fail

        Unreviewed test gardening.

        Update test results after the fix for:
            Do not skip <slot> children when collecting content for innerText.
            https://bugs.webkit.org/show_bug.cgi?id=172113
            <rdar://problem/30362324>

        * fast/shadow-dom/slot-crash-expected.txt: Update results to add
        a space to the end of the output.

2017-05-16  Chris Dumez  <cdumez@apple.com>

        [macOS Debug wk2] Layout test svg/animations/animations-paused-in-background-page-iframe.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=172183

        Reviewed by Andreas Kling.

        Fix test flakiness by using shouldBecome() instead of relying on a 30ms timer.

        * svg/animations/animations-paused-in-background-page-iframe-expected.txt:
        * svg/animations/animations-paused-in-background-page-iframe.html:

2017-05-16  Sam Weinig  <sam@webkit.org>

        Bring Notification.idl up to spec
        https://bugs.webkit.org/show_bug.cgi?id=172156

        Reviewed by Chris Dumez.

        * http/tests/notifications/notification-expected.txt: Added.
        * http/tests/notifications/notification.html: Added.
        Add test for basic Notification API functionality.

2017-05-16  Zalan Bujtas  <zalan@apple.com>

        Do not skip <slot> children when collecting content for innerText.
        https://bugs.webkit.org/show_bug.cgi?id=172113
        <rdar://problem/30362324>

        Reviewed by Ryosuke Niwa and Brent Fulgham.

        * fast/text/inner-text-should-include-slot-subtree-expected.txt: Added.
        * fast/text/inner-text-should-include-slot-subtree.html: Added.

2017-05-16  Jiewen Tan  <jiewen_tan@apple.com>

        Unreviewed, fix LayoutTests/plugins/navigator-plugin-crash.html
        <rdar://problem/32236478>

        * plugins/navigator-plugin-crash-expected.txt:
        * plugins/navigator-plugin-crash.html:

2017-05-16  Chris Dumez  <cdumez@apple.com>

        Implement DOMMatrix / DOMMatrixReadOnly
        https://bugs.webkit.org/show_bug.cgi?id=110001

        Reviewed by Sam Weinig and Simon Fraser.

        Drop test I previously added now that a better version landed in web-platform-tests
        and was re-imported in this patch.

        * fast/css/matrix-stringifier-expected.txt: Removed.
        * fast/css/matrix-stringifier.html: Removed.

2017-05-16  Myles C. Maxfield  <mmaxfield@apple.com>

        REGRESSION(r212513): LastResort is platform-dependent, so its semantics should not be required to perform font loading correctly.
        https://bugs.webkit.org/show_bug.cgi?id=168487

        Reviewed by Antti Koivisto.

        * fast/text/font-download-font-face-src-list-expected.txt: Added.
        * fast/text/font-download-font-face-src-list.html: Copied from LayoutTests/fast/text/font-weight-download-2.html.
        * fast/text/font-download-font-family-property-expected.txt: Added.
        * fast/text/font-download-font-family-property.html: Copied from LayoutTests/fast/text/font-weight-download-2.html.
        * fast/text/font-download-remote-fallback-all-expected.txt: Added.
        * fast/text/font-download-remote-fallback-all.html: Copied from LayoutTests/fast/text/font-weight-download-2.html.
        * fast/text/font-interstitial-invisible-width-while-loading-expected.txt: Added.
        * fast/text/font-interstitial-invisible-width-while-loading.html: Added.
        * fast/text/font-weight-download-2.html:
        * fast/text/font-weight-download-3-expected.txt: Added.
        * fast/text/font-weight-download-3.html: Copied from LayoutTests/fast/text/font-weight-download-2.html.
        * fast/text/web-font-load-fallback-during-loading-2-expected.html: Added.
        * fast/text/web-font-load-fallback-during-loading-2.html: Added.
        * fast/text/web-font-load-fallback-during-loading-expected.html:
        * fast/text/web-font-load-fallback-during-loading.html:
        * fast/text/web-font-load-invisible-during-loading-expected.txt: Added.
        * fast/text/web-font-load-invisible-during-loading.html: Added.
        * http/tests/webfont/fallback-font-while-loading-expected.txt:
        * http/tests/webfont/fallback-font-while-loading.html:

2017-05-16  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Return default device list until user gives permission to capture
        https://bugs.webkit.org/show_bug.cgi?id=172168
        <rdar://problem/31816884>

        Reviewed by Youenn Fablet.

        * fast/mediastream/MediaDevices-enumerateDevices-expected.txt: Removed.
        * fast/mediastream/MediaDevices-enumerateDevices.html: Removed.
        * fast/mediastream/media-devices-enumerate-devices-expected.txt: Added.
        * fast/mediastream/media-devices-enumerate-devices.html: Added.

2017-05-16  Tim Horton  <timothy_horton@apple.com>

        Make it possible to adjust which edges are affected by safe area insets
        https://bugs.webkit.org/show_bug.cgi?id=172149
        <rdar://problem/31564729>

        Reviewed by Beth Dakin.

        * fast/viewport/ios/viewport-fit-auto-expected.txt:
        * fast/viewport/ios/viewport-fit-contain-expected.txt:

2017-05-16  Mark Lam  <mark.lam@apple.com>

        Gardening: rebased parser-syntax-check test results after r216891.
        https://bugs.webkit.org/show_bug.cgi?id=172171

        Not reviewed.

        * js/parser-syntax-check-expected.txt:
        * js/script-tests/parser-syntax-check.js:

2017-05-16  Ryan Haddad  <ryanhaddad@apple.com>

        Skip LayoutTest media/restricted-audio-playback-with-document-gesture.html on iOS.

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2017-05-16  Claudio Saavedra  <csaavedra@igalia.com>

        [GTK] Tests that always pass when run alone, but fail in the bots
        https://bugs.webkit.org/show_bug.cgi?id=168572

        Reviewed by Michael Catanzaro.

        PlatformWebView::viewSupportsOptions() is basically a comparison
        that checks that the passed options are the ones supported by the
        web view. There is no reason for them to be implemented for each
        platform differently. In fact doing so causes issues each time a
        new option is added, if the corresponding platform implementation
        is not updated accordingly.

        A consequence of not updating the viewSupportOptions()
        implementations when new options are added is that tests that need
        these options might fail if they are executed after a test that
        didn't need the option, as the webview will be reused even if the
        option is not supported. This cannot be spotted when running the
        tests individually. See bug #165133 for other example of the same
        problem.

        Remove the platform implementations and make the comparison a
        method of the TestOptions structure, so that the check is in one
        place. For the time being include in the comparison the options
        checked in the mac and ios platforms, which seem to be the only
        ones relevant this far (unless newer ones have also been
        forgotten).

        * platform/gtk/TestExpectations: Unskip an affected test.

2017-05-16  Romain Bellessort  <romain.bellessort@crf.canon.fr>

        [Readable Streams API] Implement ReadableStreamBYOBReader releaseLock()
        https://bugs.webkit.org/show_bug.cgi?id=172111

        Reviewed by Chris Dumez.

        Added tests to check releaseLock() behavior.

        * streams/readable-stream-byob-reader-expected.txt: Updated.
        * streams/readable-stream-byob-reader.js: Added new tests.

2017-05-16  Per Arne Vollan  <pvollan@apple.com>

        Unreviewed Windows gardening. Skip svg animation test, since image throttling behaves differently on WK1.

        * platform/win/TestExpectations:

2017-05-16  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline tests after r216817.

        * platform/gtk/fast/multicol/client-rects-expected.txt:
        * platform/gtk/fast/multicol/client-rects-spanners-complex-expected.txt:
        * platform/gtk/fast/multicol/client-rects-spanners-expected.txt:
        * platform/gtk/fast/multicol/newmulticol/client-rects-expected.txt:
        * platform/gtk/fast/transforms/bounding-rect-zoom-expected.txt:

2017-05-16  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Update expectations of several WebRTC tests.

        * platform/gtk/TestExpectations:

2017-05-16  Manuel Rego Casasnovas  <rego@igalia.com>

        [css-grid] Fix static position of positioned grid items
        https://bugs.webkit.org/show_bug.cgi?id=172108

        Reviewed by Sergio Villar Senin.

        The test is updated as the expected results were wrong.
        Note that after this patch we match Chrome and Firefox behavior on this test.

        * fast/css-grid-layout/absolute-positioning-grid-container-parent.html:

2017-05-15  Said Abou-Hallawa  <sabouhallawa@apple.com>

        Do not delete asynchronously decoded frames for large images if their clients are in the viewport
        https://bugs.webkit.org/show_bug.cgi?id=170640

        Reviewed by Simon Fraser.

        * fast/images/async-image-background-image-repeated.html:
        * fast/images/async-image-background-image.html:
        * fast/images/sprite-sheet-image-draw.html:

2017-05-15  Youenn Fablet  <youenn@apple.com>

        WebRTC outgoing muted video sources should send black frames
        https://bugs.webkit.org/show_bug.cgi?id=170627
        <rdar://problem/31513869>

        Reviewed by Eric Carlson.

        * webrtc/video-mute-expected.txt:
        * webrtc/video-mute.html:

2017-05-15  Mark Lam  <mark.lam@apple.com>

        Rolling out r214038 and r213697: Crashes when using computed properties with rest destructuring and object spread.
        https://bugs.webkit.org/show_bug.cgi?id=172147

        Rubber-stamped by Saam Barati.

        * js/parser-syntax-check-expected.txt:
        * js/script-tests/parser-syntax-check.js:

2017-05-15  Chris Dumez  <cdumez@apple.com>

        Unreviewed, rebaseline platform/ios/ios/css/construct-WebKitCSSMatrix.html after r216881.

        * platform/ios/ios/css/construct-WebKitCSSMatrix-expected.txt:
        * platform/ios/ios/css/resources/construct-WebKitCSSMatrix.js:

2017-05-15  Jer Noble  <jer.noble@apple.com>

        Add experimental setting to allow document gesture interaction to fulfill media playback gesture requirement
        https://bugs.webkit.org/show_bug.cgi?id=172131

        Reviewed by Eric Carlson.

        * media/restricted-audio-playback-with-document-gesture-expected.txt: Added.
        * media/restricted-audio-playback-with-document-gesture.html: Added.

2017-05-15  Per Arne Vollan  <pvollan@apple.com>

        LayoutTest http/tests/media/track-in-band-hls-metadata-crash.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=167749

        Reviewed by Eric Carlson.

        Start video playback when the 'canplaythrough' event is handled, and stop logging the event,
        since the event sequence is not identical on all bots.

        * http/tests/media/track-in-band-hls-metadata-crash-expected.txt:
        * http/tests/media/track-in-band-hls-metadata-crash.html:

2017-05-15  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: CRASH seen with DOM.setOuterHTML when there is no documentElement
        https://bugs.webkit.org/show_bug.cgi?id=172135
        <rdar://problem/32175860>

        Reviewed by Brian Burg.

        * inspector/dom/setOuterHTML-no-document-element-expected.txt: Added.
        * inspector/dom/setOuterHTML-no-document-element.html: Added.

2017-05-15  Chris Dumez  <cdumez@apple.com>

        Align WebKitCSSMatrix stringifier with spec for DOMMatrix
        https://bugs.webkit.org/show_bug.cgi?id=172114

        Reviewed by Simon Fraser.

        * fast/css/matrix-stringifier-expected.txt: Added.
        * fast/css/matrix-stringifier.html: Added.
        Add layout test coverage.

        * fast/dom/Window/custom-constructors-expected.txt:
        * fast/dom/Window/custom-constructors.html:
        Rebaseline existing test to reflect behavior change.

2017-05-15  Mark Lam  <mark.lam@apple.com>

        WorkerRunLoop::Task::performTask() should check !scriptController->isTerminatingExecution().
        https://bugs.webkit.org/show_bug.cgi?id=171775
        <rdar://problem/30975761>

        Reviewed by Filip Pizlo.

        * TestExpectations:

2017-05-15  Myles C. Maxfield  <mmaxfield@apple.com>

        Unicode characters which can't be rendered in any font are invisible
        https://bugs.webkit.org/show_bug.cgi?id=171942
        <rdar://problem/32054234>

        Reviewed by Tim Horton.

        * fast/text/default-ignorable-expected.html: Added.
        * fast/text/default-ignorable.html: Added.
        * fast/text/unknown-char-notdef-expected-mismatch.html: Added.
        * fast/text/unknown-char-notdef.html: Added.

2017-05-15  Zalan Bujtas  <zalan@apple.com>

        Simple line layout: Leading whitespace followed by a <br> produces an extra linebreak.
        https://bugs.webkit.org/show_bug.cgi?id=172076

        Reviewed by Antti Koivisto.

        * fast/text/simple-line-layout-leading-whitespace-with-soft-hard-linebreak-expected.html: Added.
        * fast/text/simple-line-layout-leading-whitespace-with-soft-hard-linebreak.html: Added.

2017-05-15  Nael Ouedraogo  <nael.ouedraogo@crf.canon.fr>

        Invalid MediaSource duration value should throw TyperError instead of InvalidStateError
        https://bugs.webkit.org/show_bug.cgi?id=171653

        Reviewed by Chris Dumez.

        Modify MediaSource::setDuration to throw a TypeError when duration value is invalid as per MSE specification
        (https://www.w3.org/TR/2016/REC-media-source-20161117/#dom-mediasource-duration).

        Update expectations of corresponding WPT test.

        * platform/gtk/TestExpectations:
        * platform/gtk/imported/w3c/web-platform-tests/media-source/mediasource-duration-boundaryconditions-expected.txt: Added.
        * platform/mac-elcapitan/imported/w3c/web-platform-tests/media-source/mediasource-duration-boundaryconditions-expected.txt: Added.
        * platform/mac/TestExpectations:

2017-05-15  Gwang Yoon Hwang  <yoon@igalia.com>

        [CAIRO] Painting an image mask with a matrix above Pixman's limit breaks internal states of Cairo
        https://bugs.webkit.org/show_bug.cgi?id=169094

        Reviewed by an Doberek.

        * fast/hidpi/hidpi-long-page-with-inset-element-expected.html: Added.
        * fast/hidpi/hidpi-long-page-with-inset-element.html: Added.

2017-05-14  Sam Weinig  <sam@webkit.org>

        [WebIDL/DOM] Remove need for custom bindings for HTMLAllCollection and bring up to spec
        https://bugs.webkit.org/show_bug.cgi?id=172095

        Reviewed by Darin Adler.

        * fast/dom/collection-null-like-arguments-expected.txt:
        Update results.

        * fast/dom/document-all-expected.txt: Added.
        * fast/dom/document-all.html: Added.
        New test that covers a bunch of missing coverage.

2017-05-14  David Kilzer  <ddkilzer@apple.com>

        [iOS/macOS Debug WK2] LayoutTests/imported/w3c/web-platform-tests/webrtc/interfaces.html is a flaky crash due to assertion failure
        <https://bugs.webkit.org/show_bug.cgi?id=172094>
        <rdar://problem/32184256>

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        - Mark test as flaky crash on Debug WK2 builds.

2017-05-14  David Kilzer  <ddkilzer@apple.com>

        [macOS Debug WK1] fast/parser/adoption-agency-unload-iframe-4.html is a flaky timeout (always on iOS 10 Release WK1)
        <https://webkit.org/b/172092>

        Unreviewed test gardening.

        * platform/ios-wk1/TestExpectations:
        - This only times out on Release builds.

2017-05-14  David Kilzer  <ddkilzer@apple.com>

        [macOS Debug WK1] fast/parser/adoption-agency-unload-iframe-4.html is a flaky timeout (always on iOS 10 Release WK1)
        <https://webkit.org/b/172092>

        Unreviewed test gardening.

        See also Bug 169211 for a similar GTK WK1 timeout.

        * platform/ios-wk1/TestExpectations:
        - Mark as always timing out on all builds.
        * platform/mac-wk1/TestExpectations:
        - Mark flaky on Debug builds.

2017-05-13  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] deviceId constraint doesn't work with getUserMedia
        https://bugs.webkit.org/show_bug.cgi?id=171877
        <rdar://problem/31899730>

        Reviewed by Jer Noble.

        * fast/mediastream/get-user-media-device-id-expected.txt: Added.
        * fast/mediastream/get-user-media-device-id.html: Added.
        * fast/mediastream/apply-constraints-video-expected.txt: Updated.
        * fast/mediastream/apply-constraints-video.html: Ditto.

2017-05-13  David Kilzer  <ddkilzer@apple.com>

        TestExpectations: Remove last refereneces to Legacy Notifications

        Unreviewed test gardening fixes these lint warnings:

            LayoutTests/TestExpectations:1222 Path does not exist. fast/notifications/notifications-event-stop-propagation.html
            LayoutTests/TestExpectations:1223 Path does not exist. fast/notifications/notifications-multi-events.html

        * TestExpectations: Remove references to skipped tests.  Legacy
        Notification support was removed in r216641.

2017-05-13  Ryan Haddad  <ryanhaddad@apple.com>

        Remove flaky expectation for LayoutTest media/media-controls-clone-crash.html.
        https://bugs.webkit.org/show_bug.cgi?id=171978

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-13  Javier Fernandez  <jfernandez@igalia.com>

        [css-align] Implement the place-self shorthand
        https://bugs.webkit.org/show_bug.cgi?id=168846

        Reviewed by Zalan Bujtas.

        Regression tests for the new place-self alignment shorthand.

        * css3/parse-place-self-expected.txt: Added.
        * css3/parse-place-self.html: Added.

2017-05-13  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r216801.
        https://bugs.webkit.org/show_bug.cgi?id=172072

        Many memory corruption crashes on worker threads (Requested by
        ap on #webkit).

        Reverted changeset:

        "WorkerRunLoop::Task::performTask() should check
        !scriptController->isTerminatingExecution()."
        https://bugs.webkit.org/show_bug.cgi?id=171775
        http://trac.webkit.org/changeset/216801

2017-05-12  Simon Fraser  <simon.fraser@apple.com>

        event.clientX/clientY should be in layout viewport coordinates
        https://bugs.webkit.org/show_bug.cgi?id=172018

        Reviewed by Zalan Bujtas.
        
        * fast/events/clientXY-in-zoom-and-scroll.html:
        * fast/visual-viewport/client-coordinates-relative-to-layout-viewport-expected.txt: Added.
        * fast/visual-viewport/client-coordinates-relative-to-layout-viewport.html: Added.
        * platform/ios/TestExpectations:
        * platform/mac/fast/events/clientXY-in-zoom-and-scroll-expected.txt:

2017-05-12  Simon Fraser  <simon.fraser@apple.com>

        The rects returned by Element/Range.getClientRects() should not be rounded
        https://bugs.webkit.org/show_bug.cgi?id=172057

        Reviewed by Chris Dumez.

        Fix tests that were sensitive to rounding. I had to mark fast/text/multiglyph-characters.html
        as failing (webkit.org/b/172056).

        * TestExpectations:
        * fast/dom/Document/CaretRangeFromPoint/caretRangeFromPoint-in-zoom-and-scroll.html:
        * fast/dom/Range/getClientRects-expected.txt:
        * fast/dom/Range/getClientRects.html:
        * fast/dom/Range/simple-line-layout-getclientrects-expected.html:
        * fast/dom/Range/simple-line-layout-getclientrects.html:
        * fast/visual-viewport/client-rects-relative-to-layout-viewport-expected.txt:
        * platform/ios/TestExpectations:
        * platform/ios/fast/multicol/client-rects-expected.txt:
        * platform/ios/fast/multicol/client-rects-spanners-complex-expected.txt:
        * platform/ios/fast/multicol/client-rects-spanners-expected.txt:
        * platform/ios/fast/multicol/newmulticol/client-rects-expected.txt:
        * platform/ios/fast/transforms/bounding-rect-zoom-expected.txt:
        * platform/mac/fast/multicol/client-rects-expected.txt:
        * platform/mac/fast/multicol/client-rects-spanners-complex-expected.txt:
        * platform/mac/fast/multicol/client-rects-spanners-expected.txt:
        * platform/mac/fast/multicol/newmulticol/client-rects-expected.txt:
        * platform/mac/fast/transforms/bounding-rect-zoom-expected.txt:

2017-05-12  Jiewen Tan  <jiewen_tan@apple.com>

        Elements should be inserted into a template element as its content's last child
        https://bugs.webkit.org/show_bug.cgi?id=171373
        <rdar://problem/31862949>

        Reviewed by Ryosuke Niwa.

        * fast/dom/HTMLTemplateElement/insert-fostering-child-expected.txt: Added.
        * fast/dom/HTMLTemplateElement/insert-fostering-child.html: Added.

2017-05-11  Simon Fraser  <simon.fraser@apple.com>

        Incorrect position when dragging jQuery Draggable elements with position fixed after pinch zoom
        https://bugs.webkit.org/show_bug.cgi?id=171113

        Reviewed by Tim Horton.

        Rebaseline tests which dumped the getBoundingClientRect for fixed elements; now that these
        are layout viewport-relative, getBoundingClientRect() for a fixed element is unchanging.

        New test that exercises getBoundingClientRect() and getClientRects() for fixed and absolute
        elements after zooming.

        * fast/events/autoscroll-when-zoomed.html: Adjust to account for behavior change.
        * fast/visual-viewport/client-rects-relative-to-layout-viewport-expected.txt: Added.
        * fast/visual-viewport/client-rects-relative-to-layout-viewport.html: Added.
        * fast/visual-viewport/zoomed-fixed-expected.txt:
        * fast/visual-viewport/zoomed-fixed-header-and-footer-expected.txt:
        * fast/zooming/client-rect-in-fixed-zoomed-expected.txt:
        * fast/zooming/client-rect-in-fixed-zoomed.html:
        * fast/zooming/client-rects-with-css-and-page-zoom-expected.txt: Added.
        * fast/zooming/client-rects-with-css-and-page-zoom.html: Added.
        * platform/ios-wk2/fast/visual-viewport/client-rects-relative-to-layout-viewport-expected.txt: Added.
        * platform/ios/TestExpectations: Mark imported/w3c/web-platform-tests/cssom-view/elementFromPoint.html as failing;
            it will be fixed via webkit.org/b/172019
        * platform/ios/fast/visual-viewport/zoomed-fixed-expected.txt:
        * platform/ios/fast/visual-viewport/zoomed-fixed-header-and-footer-expected.txt:

2017-05-12  Mark Lam  <mark.lam@apple.com>

        WorkerRunLoop::Task::performTask() should check !scriptController->isTerminatingExecution().
        https://bugs.webkit.org/show_bug.cgi?id=171775
        <rdar://problem/30975761>

        Reviewed by Saam Barati.

        * TestExpectations:

2017-05-12  Daniel Bates  <dabates@apple.com>

        Attempt to fix timeout failure of test plugins/navigator-plugin-crash.html in WebKit1
        following <http://trac.webkit.org/changeset/216789>
        (https://bugs.webkit.org/show_bug.cgi?id=171712)

        In r216798 I inadvertently added testRunner.setPopupBlockingEnabled(true) instead
        instead of testRunner.setPopupBlockingEnabled(false) to disable the popup blocker.

        * plugins/navigator-plugin-crash.html:

2017-05-12  Daniel Bates  <dabates@apple.com>

        Attempt to fix timeout failure of test plugins/navigator-plugin-crash.html in WebKit1
        following <http://trac.webkit.org/changeset/216789>
        (https://bugs.webkit.org/show_bug.cgi?id=171712)

        On WebKit1 we need to explicitly allow the test tool to open windows by calling
        testRunner.setCanOpenWindows(). We should also call testRunner.setCloseRemainingWindowsWhenComplete(true)
        to have the test tool close any open windows after running the test.

        It is also good practice to explicitly disable the popup blocker by calling
        testRunner.setPopupBlockingEnabled(false).

        * plugins/navigator-plugin-crash.html:

2017-05-11  Jiewen Tan  <jiewen_tan@apple.com>

        Check existence of a page before accessing its plugins
        https://bugs.webkit.org/show_bug.cgi?id=171712
        <rdar://problem/32007806>

        Reviewed by Brent Fulgham.

        * plugins/navigator-plugin-crash-expected.txt: Added.
        * plugins/navigator-plugin-crash.html: Added.

2017-05-12  Romain Bellessort  <romain.bellessort@crf.canon.fr>

        [Readable Streams API] Add ReadableStreamBYOBReader closed getter
        https://bugs.webkit.org/show_bug.cgi?id=172024

        Reviewed by Youenn Fablet.

        Added tests to check closed getter behaviour.

        * streams/readable-stream-byob-reader-expected.txt: Updated.
        * streams/readable-stream-byob-reader.js: Updated.

2017-05-12  Matt Lewis  <jlewis3@apple.com>

        Marked webrtc/closing-peerconnection.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=172034

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-12  Claudio Saavedra  <csaavedra@igalia.com>

        [GTK] After upgrading glib and glib-networking, resources with zero bytes are always identified as text/plain
        https://bugs.webkit.org/show_bug.cgi?id=171058

        Reviewed by Carlos Garcia Campos.

        GLib-based ports have issues detecting the mimetypes of empty
        files, as they are all considered to be text/plain by
        glib. Replace these resources with a minimal valid file for its
        type (that is, 1x1 PNG files and 1 whitespace for text files).

        * fast/preloader/resources/base-image1.png:
        * fast/preloader/resources/base-image2.png:
        * fast/preloader/resources/base-image3.png:
        * fast/preloader/resources/image1.png:
        * fast/preloader/resources/link1.css:
        * fast/preloader/resources/noscript-image1.png:
        * fast/preloader/resources/noscript-image2.png:
        * fast/preloader/resources/script1.js:
        * fast/preloader/resources/style1.css:
        * tables/mozilla/core/col_widths_fix_autoFixPer.html:

        * platform/gtk/TestExpectations: Unskip the now passing tests.

2017-05-12  Antti Koivisto  <antti@apple.com>

        Updating class name of a shadow host does not update the style applied by descendants of :host()
        https://bugs.webkit.org/show_bug.cgi?id=170762
        <rdar://problem/31572668>

        Reviewed by Ryosuke Niwa.

        * fast/shadow-dom/css-scoping-host-class-and-attribute-mutation-expected.html: Added.
        * fast/shadow-dom/css-scoping-host-class-and-attribute-mutation.html: Added.

2017-05-12  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE] Unreviewed gardening.

        ClientRect, ClientRectList were removed, PromiseRejectionEvent was
        added, update global constructors attributes test expectations.

        * platform/wpe/js/dom/global-constructors-attributes-expected.txt:

2017-05-12  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] ASSERTION FAILED: !m_flushingLayers
        https://bugs.webkit.org/show_bug.cgi?id=172025

        Reviewed by an Doberek.

        * platform/gtk/TestExpectations:

2017-05-12  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] GIF images are not properly loaded the first time
        https://bugs.webkit.org/show_bug.cgi?id=170432

        Reviewed by Carlos Alberto Lopez Perez.

        * http/tests/images/gif-progressive-load-expected.html: Added.
        * http/tests/images/gif-progressive-load.html: Added.

2017-05-12  Manuel Rego Casasnovas  <rego@igalia.com>

        [selectors4] css/selectors4/focus-within-006.html test from WPT is failing
        https://bugs.webkit.org/show_bug.cgi?id=170900

        Reviewed by Sergio Villar Senin.

        * TestExpectations: Remove test as it's passing now.

2017-05-11  Per Arne Vollan  <pvollan@apple.com>

        Geolocation requests should not be blocked when the security origin is local.
        https://bugs.webkit.org/show_bug.cgi?id=171857

        Reviewed by Brent Fulgham.

        * fast/misc/geolocation-local-security-origin-expected.txt: Added.
        * fast/misc/geolocation-local-security-origin.html: Added.

2017-05-11  Manuel Rego Casasnovas  <rego@igalia.com>

        [selectors4] :focus-within tests using shadow DOM don't pass on WK1
        https://bugs.webkit.org/show_bug.cgi?id=170935

        Reviewed by Youenn Fablet.

        * platform/mac-wk1/TestExpectations: Remove tests as they're passing now.

2017-05-11  Zalan Bujtas  <zalan@apple.com>

        RenderImageResource::hasImage is redundant and RenderImageResourceStyleImage's override is incorrect.
        https://bugs.webkit.org/show_bug.cgi?id=172010
        <rdar://problem/31086735>

        Reviewed by Simon Fraser.

        * fast/images/missing-content-image-crash-expected.txt: Added.
        * fast/images/missing-content-image-crash.html: Added.

2017-05-11  Zalan Bujtas  <zalan@apple.com>

        AX: Defer text changes until after the tree is clean if needed.
        https://bugs.webkit.org/show_bug.cgi?id=171546
        <rdar://problem/31934942>

        Reviewed by Simon Fraser.

        * accessibility/crash-when-render-tree-is-not-clean-expected.txt: Added.
        * accessibility/crash-when-render-tree-is-not-clean.html: Added.

2017-05-11  Youenn Fablet  <youenn@apple.com>

        Allow WPT server to serve specific WebKit tests
        https://bugs.webkit.org/show_bug.cgi?id=171479

        Reviewed by Ryosuke Niwa.

        Moving tests to ensure they are correctly runned.

        * http/wpt/fetch/fetch-as-blob-expected.txt: Renamed from LayoutTests/http/tests/fetch/fetch-as-blob-expected.txt.
        * http/wpt/fetch/fetch-as-blob-worker-expected.txt: Renamed from LayoutTests/http/tests/fetch/fetch-as-blob-worker-expected.txt.
        * http/wpt/fetch/fetch-as-blob-worker.html: Renamed from LayoutTests/http/tests/fetch/fetch-as-blob-worker.html.
        * http/wpt/fetch/fetch-as-blob.html: Renamed from LayoutTests/http/tests/fetch/fetch-as-blob.html.
        * http/wpt/fetch/fetch-as-blob.js: Renamed from LayoutTests/http/tests/fetch/fetch-as-blob.js.
        (promise_test):

2017-05-11  Youenn Fablet  <youenn@apple.com>

        [iOS] Unset active media capture source when stopped capturing
        https://bugs.webkit.org/show_bug.cgi?id=171815
        <rdar://problem/32117885>

        Reviewed by Eric Carlson.

        Improving the existing tests for better reliability and debugability.
        Updating tests to use less webkitAudioContext.

        * platform/ios/mediastream/getUserMedia-single-capture-expected.txt: Added.
        * platform/ios/mediastream/getUserMedia-single-capture.html: Added.
        * webrtc/audio-peer-connection-webaudio.html:
        * webrtc/audio-replace-track-expected.txt:
        * webrtc/audio-replace-track.html:
        * webrtc/peer-connection-audio-mute.html:
        * webrtc/peer-connection-audio-mute2.html:
        * webrtc/peer-connection-remote-audio-mute.html:
        * webrtc/peer-connection-remote-audio-mute2.html:
        * webrtc/routines.js:
        * webrtc/video-replace-track-expected.txt:
        * webrtc/video-replace-track.html:

2017-05-11  Matt Lewis  <jlewis3@apple.com>

        Unreviewed, rolling out r216677.

        Patch caused layout test crashes.

        Reverted changeset:

        "WorkerThread::stop() should call
        scheduleExecutionTermination() last."
        https://bugs.webkit.org/show_bug.cgi?id=171775
        http://trac.webkit.org/changeset/216677

2017-05-11  Matt Lewis  <jlewis3@apple.com>

        Marked tiled-drawing/scrolling/fast-scroll-iframe-latched-mainframe.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=168937

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-11  Joseph Pecoraro  <pecoraro@apple.com>

        Remove Vibration API
        https://bugs.webkit.org/show_bug.cgi?id=171766

        Rubber-stamped by Alexey Proskuryakov.

        * platform/gtk/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:
        * platform/win/TestExpectations:
        * platform/wpe/TestExpectations:
        * vibration/cancelVibration-after-pagevisibility-changed-to-hidden-expected.txt: Removed.
        * vibration/cancelVibration-after-pagevisibility-changed-to-hidden.html: Removed.
        * vibration/cancelVibration-during-pattern-vibrating-expected.txt: Removed.
        * vibration/cancelVibration-during-pattern-vibrating.html: Removed.
        * vibration/navigator-vibration-expected.txt: Removed.
        * vibration/navigator-vibration.html: Removed.

2017-05-11  Dean Jackson  <dino@apple.com>

        WebGLRenderingContext should implement WebGLRenderingContextBase
        https://bugs.webkit.org/show_bug.cgi?id=171961
        <rdar://problem/32124920>

        Reviewed by Sam Weinig.

        New test to make sure constants from WebGLRenderingContextBase are
        visible on the WebGLRenderingContext prototype.

        Also, fix up some existing tests that were expecting to see
        instances of WebGLRenderingContextBase.

        * fast/canvas/webgl/constants-on-interface-expected.txt: Added.
        * fast/canvas/webgl/constants-on-interface.html: Added.
        * fast/canvas/webgl/gl-object-get-calls-expected.txt:
        * fast/canvas/webgl/null-object-behaviour-expected.txt:
        * fast/canvas/webgl/texImageTest-expected.txt:

2017-05-11  Matt Lewis  <jlewis3@apple.com>

        Fixed typo errors in TestExpectations.


        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-11  Matt Lewis  <jlewis3@apple.com>

        Fixed typo errors in TestExpectations.
        

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-11  Matt Lewis  <jlewis3@apple.com>

        Marked imported/w3c/web-platform-tests/html/webappapis/timers/negative-settimeout.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170699

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-11  Romain Bellessort  <romain.bellessort@crf.canon.fr>

        [Readable Streams API] Implement ReadableStreamBYOBReader cancel()
        https://bugs.webkit.org/show_bug.cgi?id=171919

        Reviewed by Youenn Fablet.

        Added test cases to check cancel() behaviour.

        * streams/readable-stream-byob-reader-expected.txt: Updated.
        * streams/readable-stream-byob-reader.js: Updated.

2017-05-11  Matt Lewis  <jlewis3@apple.com>

        Marked media/media-controls-clone-crash.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171978

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-11  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Error trying to delete DOM breakpoints from the Debugger tab
        https://bugs.webkit.org/show_bug.cgi?id=171970
        <rdar://problem/32129262>

        Reviewed by Brian Burg.

        Add test for DOMDebuggerManager.prototype.removeDOMBreakpointsForNode.

        * inspector/dom-debugger/dom-breakpoints-expected.txt:
        * inspector/dom-debugger/dom-breakpoints.html:

2017-05-11  Per Arne Vollan  <pvollan@apple.com>

        LayoutTest http/tests/media/track-in-band-hls-metadata-crash.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=167749

        Reviewed by Eric Carlson.

        Revert parts of r216588. The position of the 'canplaythrough' event in the event sequence
        is not always the same, causing flakiness. Stop listening to the 'canplaythrough' event,
        this was introduced in r216588.

        * http/tests/media/track-in-band-hls-metadata-crash-expected.txt:
        * http/tests/media/track-in-band-hls-metadata-crash.html:

2017-05-11  Mark Lam  <mark.lam@apple.com>

        WorkerThread::stop() should call scheduleExecutionTermination() last.
        https://bugs.webkit.org/show_bug.cgi?id=171775
        <rdar://problem/30975761>

        Reviewed by Geoffrey Garen.

        * TestExpectations:

2017-05-11  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Update expectations of tests failing after r216450.

        * platform/gtk/TestExpectations:

2017-05-10  Matt Lewis  <jlewis3@apple.com>

        Marked fast/animation/request-animation-frame-time-unit.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171957

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-10  Andy Estes  <aestes@apple.com>

        REGRESSION (r167845): ASSERT(!m_renderView.needsLayout()) in svg/custom/bug79798.html
        https://bugs.webkit.org/show_bug.cgi?id=132297

        Reviewed by Simon Fraser.

        * http/tests/navigation/keyboard-events-during-provisional-navigation-expected.txt:
        * http/tests/navigation/keyboard-events-during-provisional-subframe-navigation-expected.txt:
        * http/tests/navigation/resources/keyboard-events-test.js:
        (runTest):
        * platform/ios-wk2/TestExpectations:
        * platform/wk2/TestExpectations:

2017-05-09  Sam Weinig  <sam@webkit.org>

        Remove support for legacy Notifications
        https://bugs.webkit.org/show_bug.cgi?id=171487

        Reviewed by Jon Lee.

        - Remove fast/notifications/. It was skipped on all platforms and use legacy Notifications API.
        - Remove http/notifications/legacy. It tested the legacy API.
        - Update two tests in fast/history to use the non-legacy API to test page cache + notifications.
        - Update TestExpectations for removals.

        * TestExpectations:
        * platform/gtk/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:
        * platform/win/TestExpectations:
        * fast/history/page-cache-notification-non-suspendable.html:
        * fast/history/page-cache-notification-suspendable.html:
        * fast/notifications: Removed.
        * fast/notifications/notification-after-close-expected.txt: Removed.
        * fast/notifications/notification-after-close.html: Removed.
        * fast/notifications/notification-permisssion-deletable-expected.txt: Removed.
        * fast/notifications/notification-permisssion-deletable.html: Removed.
        * fast/notifications/notifications-cancel-request-permission-expected.txt: Removed.
        * fast/notifications/notifications-cancel-request-permission.html: Removed.
        * fast/notifications/notifications-check-permission-expected.txt: Removed.
        * fast/notifications/notifications-check-permission.html: Removed.
        * fast/notifications/notifications-click-event-expected.txt: Removed.
        * fast/notifications/notifications-click-event-focus-expected.txt: Removed.
        * fast/notifications/notifications-click-event-focus.html: Removed.
        * fast/notifications/notifications-click-event.html: Removed.
        * fast/notifications/notifications-constructor-request-permission-expected.txt: Removed.
        * fast/notifications/notifications-constructor-request-permission.html: Removed.
        * fast/notifications/notifications-constructor-with-permission-expected.txt: Removed.
        * fast/notifications/notifications-constructor-with-permission.html: Removed.
        * fast/notifications/notifications-constructor-without-permission-expected.txt: Removed.
        * fast/notifications/notifications-constructor-without-permission.html: Removed.
        * fast/notifications/notifications-display-close-events-expected.txt: Removed.
        * fast/notifications/notifications-display-close-events.html: Removed.
        * fast/notifications/notifications-document-close-crash-expected.txt: Removed.
        * fast/notifications/notifications-document-close-crash.html: Removed.
        * fast/notifications/notifications-event-stop-propagation-expected.txt: Removed.
        * fast/notifications/notifications-event-stop-propagation.html: Removed.
        * fast/notifications/notifications-multi-events-expected.txt: Removed.
        * fast/notifications/notifications-multi-events.html: Removed.
        * fast/notifications/notifications-no-icon-expected.txt: Removed.
        * fast/notifications/notifications-no-icon.html: Removed.
        * fast/notifications/notifications-permission-expected.txt: Removed.
        * fast/notifications/notifications-permission.html: Removed.
        * fast/notifications/notifications-replace-expected.txt: Removed.
        * fast/notifications/notifications-replace.html: Removed.
        * fast/notifications/notifications-request-permission-expected.txt: Removed.
        * fast/notifications/notifications-request-permission-optional-expected.txt: Removed.
        * fast/notifications/notifications-request-permission-optional.html: Removed.
        * fast/notifications/notifications-request-permission.html: Removed.
        * fast/notifications/notifications-rtl-expected.txt: Removed.
        * fast/notifications/notifications-rtl.html: Removed.
        * fast/notifications/notifications-sandbox-permission-expected.txt: Removed.
        * fast/notifications/notifications-sandbox-permission.html: Removed.
        * fast/notifications/notifications-window-close-crash-expected.txt: Removed.
        * fast/notifications/notifications-window-close-crash.html: Removed.
        * fast/notifications/notifications-with-permission-expected.txt: Removed.
        * fast/notifications/notifications-with-permission.html: Removed.
        * fast/notifications/notifications-without-permission-expected.txt: Removed.
        * fast/notifications/notifications-without-permission.html: Removed.
        * fast/notifications/request-notification-permission-while-reloading-expected.txt: Removed.
        * fast/notifications/request-notification-permission-while-reloading.html: Removed.
        * fast/notifications/resources: Removed.
        * fast/notifications/resources/notifications-cancel-request-permission.html: Removed.
        * fast/notifications/resources/notifications-iframe.html: Removed.
        * http/tests/notifications/legacy: Removed.
        * http/tests/notifications/legacy/double-show-expected.txt: Removed.
        * http/tests/notifications/legacy/double-show.html: Removed.
        * http/tests/notifications/legacy/events-expected.txt: Removed.
        * http/tests/notifications/legacy/events.html: Removed.
        * http/tests/notifications/legacy/notification-request-permission-then-navigate-expected.txt: Removed.
        * http/tests/notifications/legacy/notification-request-permission-then-navigate.html: Removed.
        * http/tests/notifications/legacy/request-expected.txt: Removed.
        * http/tests/notifications/legacy/request-no-callback-expected.txt: Removed.
        * http/tests/notifications/legacy/request-no-callback.html: Removed.
        * http/tests/notifications/legacy/request.html: Removed.
        * http/tests/notifications/legacy/resources: Removed.
        * http/tests/notifications/legacy/resources/notify-opener-done.html: Removed.
        * http/tests/notifications/legacy/resources/request-permission-then-navigate.html: Removed.
        * http/tests/notifications/legacy/show-expected.txt: Removed.
        * http/tests/notifications/legacy/show.html: Removed.
        * http/tests/notifications/legacy/window-show-on-click-expected.txt: Removed.
        * http/tests/notifications/legacy/window-show-on-click.html: Removed.

2017-05-10  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/media-controller/media-controller-auto-hide-mouse-enter-and-mouse-leave.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=169876

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-05-10  Ryan Haddad  <ryanhaddad@apple.com>

        Mark inspector/protocol/inspector-backend-invocation-return-value.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=168146

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-05-10  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r216635.
        https://bugs.webkit.org/show_bug.cgi?id=171953

        "Some worker tests are failing". (Requested by mlam on #webkit).

        Reverted changeset:

        "WorkerThread::stop() should call
        scheduleExecutionTermination() last."
        https://bugs.webkit.org/show_bug.cgi?id=171775
        http://trac.webkit.org/changeset/216635

2017-05-10  Mark Lam  <mark.lam@apple.com>

        WorkerThread::stop() should call scheduleExecutionTermination() last.
        https://bugs.webkit.org/show_bug.cgi?id=171775
        <rdar://problem/30975761>

        Reviewed by Geoffrey Garen.

        * TestExpectations:

2017-05-10  Tim Horton  <timothy_horton@apple.com>

        Add an experimental feature flag for viewport-fit
        https://bugs.webkit.org/show_bug.cgi?id=171948
        <rdar://problem/31995518>

        Reviewed by Simon Fraser.

        * fast/css/variables/constants/ios/safe-area-inset-set-expected.html:
        * fast/css/variables/constants/ios/safe-area-inset-set.html:
        * fast/viewport/ios/viewport-fit-auto.html:
        * fast/viewport/ios/viewport-fit-contain.html:
        * fast/viewport/ios/viewport-fit-cover.html:

2017-05-10  Matt Lewis  <jlewis3@apple.com>

        Marked fast/hidpi/filters-and-image-buffer-resolution.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171951

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-10  Antti Koivisto  <antti@apple.com>

        REGRESSION (r207372) Visibility property is not inherited when used in an animation
        https://bugs.webkit.org/show_bug.cgi?id=171883
        <rdar://problem/32086550>

        Reviewed by Simon Fraser.

        * animations/animation-initial-inheritance-expected.html: Added.
        * animations/animation-initial-inheritance.html: Added.

2017-05-10  Matt Lewis  <jlewis3@apple.com>

        Marked transitions/extra-transition.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171947

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-10  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r216591.

        This change broke an internal build.

        Reverted changeset:

        "REGRESSION (r207372) Visibility property is not inherited
        when used in an animation"
        https://bugs.webkit.org/show_bug.cgi?id=171883
        http://trac.webkit.org/changeset/216591

2017-05-10  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, remove TestExpectation for a test that was removed in r216259.

        * platform/mac/TestExpectations:

2017-05-10  Matt Lewis  <jlewis3@apple.com>

        Marked perf/class-list-remove.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171945

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-10  Andy Estes  <aestes@apple.com>

        r216599 accidentally included two copies of the new layout test and expected result
        https://bugs.webkit.org/show_bug.cgi?id=171938

        Unreviewed.

        * http/tests/navigation/keyboard-events-during-provisional-subframe-navigation-expected.txt:
        * http/tests/navigation/keyboard-events-during-provisional-subframe-navigation.html:

2017-05-10  Ryan Haddad  <ryanhaddad@apple.com>

        Skip http/tests/navigation/keyboard-events-during-provisional-subframe-navigation.html on ios-simulator.
        https://bugs.webkit.org/show_bug.cgi?id=171880

        Unreviewed test gardening.

        This test times out on ios-simulator because it relies on eventSender.keyDown.

        * platform/ios/TestExpectations:

2017-05-10  Timothy Horton  <timothy_horton@apple.com>

        Add an experimental feature flag for constant properties
        https://bugs.webkit.org/show_bug.cgi?id=171913
        <rdar://problem/31995518>

        Reviewed by Ryosuke Niwa.

        * fast/css/variables/constants/invalid-constant-name-fallback.html:
        * fast/css/variables/constants/ios/safe-area-inset-set.html:
        * fast/css/variables/constants/safe-area-inset-cannot-override.html:
        * fast/css/variables/constants/safe-area-inset-zero.html:

2017-05-10  Matt Lewis  <jlewis3@apple.com>

        Marked media/track/track-cue-rendering-on-resize.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171939

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-10  Ryan Haddad  <ryanhaddad@apple.com>

        Mark imported/w3c/web-platform-tests/dom/nodes/ParentNode-querySelector-All tests as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171937

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-05-10  Matt Lewis  <jlewis3@apple.com>

        Marked tiled-drawing/scrolling/fast-scroll-select-latched-mainframe.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171935

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-10  Andy Estes  <aestes@apple.com>

        Keyboard input suppression should extend to subframes
        https://bugs.webkit.org/show_bug.cgi?id=171880
        <rdar://problem/31201793>

        Reviewed by Ryosuke Niwa.

        * http/tests/navigation/keyboard-events-during-provisional-navigation-expected.txt:
        * http/tests/navigation/keyboard-events-during-provisional-navigation.html:
        * http/tests/navigation/keyboard-events-during-provisional-subframe-navigation-expected.txt: Copied from LayoutTests/http/tests/navigation/keyboard-events-during-provisional-navigation-expected.txt.
        * http/tests/navigation/keyboard-events-during-provisional-subframe-navigation.html: Copied from LayoutTests/http/tests/navigation/keyboard-events-during-provisional-navigation.html.
        * http/tests/navigation/resources/keyboard-events-after-navigation.html:
        * http/tests/navigation/resources/keyboard-events-test.js:
        (runTest):
        (waitForProvisionalNavigation.xhr.onreadystatechange):
        (waitForProvisionalNavigation):

2017-05-10  Matt Lewis  <jlewis3@apple.com>

        Unreviewed, rolling out r216563.

        Revision caused 2 api failures

        Reverted changeset:

        "[MediaStream] deviceId constraint doesn't work with
        getUserMedia"
        https://bugs.webkit.org/show_bug.cgi?id=171877
        http://trac.webkit.org/changeset/216563

2017-05-10  Matt Lewis  <jlewis3@apple.com>

        Marked imported/w3c/web-platform-tests/webrtc/RTCPeerConnection-idl.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171930

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2017-05-10  Antti Koivisto  <antti@apple.com>

        REGRESSION (r207372) Visibility property is not inherited when used in an animation
        https://bugs.webkit.org/show_bug.cgi?id=171883
        <rdar://problem/32086550>

        Reviewed by Simon Fraser.

        * animations/animation-initial-inheritance-expected.html: Added.
        * animations/animation-initial-inheritance.html: Added.

2017-05-10  Per Arne Vollan  <pvollan@apple.com>

        LayoutTest http/tests/media/track-in-band-hls-metadata-crash.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=167749

        Reviewed by Eric Carlson.

        This is a speculative fix of the test. I have not been able to reproduce the timeout.
        When the test times out, the 'addtrack' event is never received. In case the event
        was dispatched before we added the event listener, the event listener is added before
        the video source is set. In case the test will continue to time out, a couple of
        error event callbacks have been added to get more information. Also, video playback
        will begin when the 'canplaythrough' event is received.
 
        * http/tests/media/track-in-band-hls-metadata-crash-expected.txt:
        * http/tests/media/track-in-band-hls-metadata-crash.html:

2017-05-10  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r216578.
        https://bugs.webkit.org/show_bug.cgi?id=171920

        Broke the GTK+ build with Wayland enabled (Requested by KaL on
        #webkit).

        Reverted changeset:

        "[GTK] Bump GTK+ and its dependencies in jhbuild"
        https://bugs.webkit.org/show_bug.cgi?id=171918
        http://trac.webkit.org/changeset/216578

2017-05-10  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] Bump GTK+ and its dependencies in jhbuild
        https://bugs.webkit.org/show_bug.cgi?id=171918

        Reviewed by Carlos Alberto Lopez Perez.

        Rebaseline tests for new GTK+ versin.

        * platform/gtk/css1/box_properties/acid_test-expected.txt:
        * platform/gtk/css2.1/20110323/replaced-elements-001-expected.png:
        * platform/gtk/css2.1/20110323/replaced-elements-001-expected.txt:
        * platform/gtk/css2.1/t09-c5526c-display-00-e-expected.png:
        * platform/gtk/css2.1/t09-c5526c-display-00-e-expected.txt:
        * platform/gtk/css3/flexbox/button-expected.png:
        * platform/gtk/css3/flexbox/button-expected.txt:
        * platform/gtk/css3/selectors3/html/css3-modsel-161-expected.png:
        * platform/gtk/css3/selectors3/html/css3-modsel-161-expected.txt:
        * platform/gtk/css3/selectors3/html/css3-modsel-19b-expected.png:
        * platform/gtk/css3/selectors3/html/css3-modsel-19b-expected.txt:
        * platform/gtk/css3/selectors3/html/css3-modsel-23-expected.png:
        * platform/gtk/css3/selectors3/html/css3-modsel-23-expected.txt:
        * platform/gtk/css3/selectors3/html/css3-modsel-25-expected.png:
        * platform/gtk/css3/selectors3/html/css3-modsel-25-expected.txt:
        * platform/gtk/css3/selectors3/html/css3-modsel-69-expected.png:
        * platform/gtk/css3/selectors3/html/css3-modsel-69-expected.txt:
        * platform/gtk/css3/selectors3/html/css3-modsel-70-expected.png:
        * platform/gtk/css3/selectors3/html/css3-modsel-70-expected.txt:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-161-expected.png:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-161-expected.txt:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-19b-expected.png:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-19b-expected.txt:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-23-expected.png:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-23-expected.txt:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-25-expected.png:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-25-expected.txt:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-69-expected.png:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-69-expected.txt:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-70-expected.png:
        * platform/gtk/css3/selectors3/xhtml/css3-modsel-70-expected.txt:
        * platform/gtk/css3/selectors3/xml/css3-modsel-161-expected.png:
        * platform/gtk/css3/selectors3/xml/css3-modsel-161-expected.txt:
        * platform/gtk/css3/selectors3/xml/css3-modsel-19b-expected.png:
        * platform/gtk/css3/selectors3/xml/css3-modsel-19b-expected.txt:
        * platform/gtk/css3/selectors3/xml/css3-modsel-23-expected.png:
        * platform/gtk/css3/selectors3/xml/css3-modsel-23-expected.txt:
        * platform/gtk/css3/selectors3/xml/css3-modsel-25-expected.png:
        * platform/gtk/css3/selectors3/xml/css3-modsel-25-expected.txt:
        * platform/gtk/css3/selectors3/xml/css3-modsel-69-expected.png:
        * platform/gtk/css3/selectors3/xml/css3-modsel-69-expected.txt:
        * platform/gtk/css3/selectors3/xml/css3-modsel-70-expected.png:
        * platform/gtk/css3/selectors3/xml/css3-modsel-70-expected.txt:
        * platform/gtk/editing/pasteboard/4641033-expected.png:
        * platform/gtk/editing/pasteboard/4641033-expected.txt:
        * platform/gtk/editing/pasteboard/4944770-1-expected.png:
        * platform/gtk/editing/pasteboard/4944770-1-expected.txt:
        * platform/gtk/editing/pasteboard/4944770-2-expected.png:
        * platform/gtk/editing/pasteboard/4944770-2-expected.txt:
        * platform/gtk/editing/selection/3690703-2-expected.png:
        * platform/gtk/editing/selection/3690703-2-expected.txt:
        * platform/gtk/editing/selection/3690703-expected.png:
        * platform/gtk/editing/selection/3690703-expected.txt:
        * platform/gtk/editing/selection/3690719-expected.png:
        * platform/gtk/editing/selection/3690719-expected.txt:
        * platform/gtk/editing/selection/4397952-expected.png:
        * platform/gtk/editing/selection/4397952-expected.txt:
        * platform/gtk/editing/selection/5240265-expected.png:
        * platform/gtk/editing/selection/5240265-expected.txt:
        * platform/gtk/editing/selection/caret-before-select-expected.png:
        * platform/gtk/editing/selection/caret-before-select-expected.txt:
        * platform/gtk/editing/selection/replaced-boundaries-3-expected.png:
        * platform/gtk/editing/selection/replaced-boundaries-3-expected.txt:
        * platform/gtk/editing/selection/select-box-expected.png:
        * platform/gtk/editing/selection/select-box-expected.txt:
        * platform/gtk/editing/selection/select-element-paragraph-boundary-expected.png:
        * platform/gtk/editing/selection/select-element-paragraph-boundary-expected.txt:
        * platform/gtk/editing/selection/selection-button-text-expected.png:
        * platform/gtk/editing/selection/selection-button-text-expected.txt:
        * platform/gtk/fast/block/basic/011-expected.png:
        * platform/gtk/fast/block/basic/011-expected.txt:
        * platform/gtk/fast/block/float/float-avoidance-expected.png:
        * platform/gtk/fast/block/float/float-avoidance-expected.txt:
        * platform/gtk/fast/block/margin-collapse/103-expected.png:
        * platform/gtk/fast/block/margin-collapse/103-expected.txt:
        * platform/gtk/fast/block/positioning/inline-block-relposition-expected.png:
        * platform/gtk/fast/block/positioning/inline-block-relposition-expected.txt:
        * platform/gtk/fast/box-sizing/percentage-height-expected.png:
        * platform/gtk/fast/box-sizing/percentage-height-expected.txt:
        * platform/gtk/fast/css/continuationCrash-expected.png:
        * platform/gtk/fast/css/continuationCrash-expected.txt:
        * platform/gtk/fast/css/focus-ring-exists-for-search-field-expected.png:
        * platform/gtk/fast/css/focus-ring-exists-for-search-field-expected.txt:
        * platform/gtk/fast/css/input-search-padding-expected.png:
        * platform/gtk/fast/css/input-search-padding-expected.txt:
        * platform/gtk/fast/css/margin-top-bottom-dynamic-expected.png:
        * platform/gtk/fast/css/margin-top-bottom-dynamic-expected.txt:
        * platform/gtk/fast/css/non-standard-checkbox-size-expected.png:
        * platform/gtk/fast/css/non-standard-checkbox-size-expected.txt:
        * platform/gtk/fast/css/rtl-ordering-expected.png:
        * platform/gtk/fast/css/rtl-ordering-expected.txt:
        * platform/gtk/fast/css/text-input-with-webkit-border-radius-expected.png:
        * platform/gtk/fast/css/text-input-with-webkit-border-radius-expected.txt:
        * platform/gtk/fast/css/text-overflow-input-expected.png:
        * platform/gtk/fast/css/text-overflow-input-expected.txt:
        * platform/gtk/fast/css/text-transform-select-expected.png:
        * platform/gtk/fast/css/text-transform-select-expected.txt:
        * platform/gtk/fast/dom/HTMLInputElement/input-slider-update-expected.png:
        * platform/gtk/fast/dom/HTMLInputElement/input-slider-update-expected.txt:
        * platform/gtk/fast/dom/HTMLProgressElement/indeterminate-progress-001-expected.txt:
        * platform/gtk/fast/dom/HTMLProgressElement/native-progress-bar-expected.png:
        * platform/gtk/fast/dom/HTMLProgressElement/native-progress-bar-expected.txt:
        * platform/gtk/fast/dom/HTMLProgressElement/progress-bar-value-pseudo-element-expected.png:
        * platform/gtk/fast/dom/HTMLProgressElement/progress-bar-value-pseudo-element-expected.txt:
        * platform/gtk/fast/dom/HTMLProgressElement/progress-element-expected.png:
        * platform/gtk/fast/dom/HTMLProgressElement/progress-element-expected.txt:
        * platform/gtk/fast/dom/HTMLTableColElement/resize-table-using-col-width-expected.png:
        * platform/gtk/fast/dom/HTMLTableColElement/resize-table-using-col-width-expected.txt:
        * platform/gtk/fast/dom/HTMLTextAreaElement/reset-textarea-expected.png:
        * platform/gtk/fast/dom/HTMLTextAreaElement/reset-textarea-expected.txt:
        * platform/gtk/fast/dynamic/positioned-movement-with-positioned-children-expected.txt:
        * platform/gtk/fast/forms/001-expected.png:
        * platform/gtk/fast/forms/001-expected.txt:
        * platform/gtk/fast/forms/003-expected.png:
        * platform/gtk/fast/forms/003-expected.txt:
        * platform/gtk/fast/forms/004-expected.png:
        * platform/gtk/fast/forms/004-expected.txt:
        * platform/gtk/fast/forms/basic-buttons-expected.png:
        * platform/gtk/fast/forms/basic-buttons-expected.txt:
        * platform/gtk/fast/forms/basic-inputs-expected.png:
        * platform/gtk/fast/forms/basic-inputs-expected.txt:
        * platform/gtk/fast/forms/basic-selects-expected.png:
        * platform/gtk/fast/forms/basic-selects-expected.txt:
        * platform/gtk/fast/forms/blankbuttons-expected.png:
        * platform/gtk/fast/forms/blankbuttons-expected.txt:
        * platform/gtk/fast/forms/box-shadow-override-expected.png:
        * platform/gtk/fast/forms/box-shadow-override-expected.txt:
        * platform/gtk/fast/forms/button-align-expected.png:
        * platform/gtk/fast/forms/button-align-expected.txt:
        * platform/gtk/fast/forms/button-cannot-be-nested-expected.png:
        * platform/gtk/fast/forms/button-cannot-be-nested-expected.txt:
        * platform/gtk/fast/forms/button-default-title-expected.png:
        * platform/gtk/fast/forms/button-default-title-expected.txt:
        * platform/gtk/fast/forms/button-generated-content-expected.png:
        * platform/gtk/fast/forms/button-generated-content-expected.txt:
        * platform/gtk/fast/forms/button-inner-block-reuse-expected.png:
        * platform/gtk/fast/forms/button-inner-block-reuse-expected.txt:
        * platform/gtk/fast/forms/button-positioned-expected.png:
        * platform/gtk/fast/forms/button-positioned-expected.txt:
        * platform/gtk/fast/forms/button-sizes-expected.png:
        * platform/gtk/fast/forms/button-sizes-expected.txt:
        * platform/gtk/fast/forms/button-style-color-expected.png:
        * platform/gtk/fast/forms/button-style-color-expected.txt:
        * platform/gtk/fast/forms/button-table-styles-expected.png:
        * platform/gtk/fast/forms/button-table-styles-expected.txt:
        * platform/gtk/fast/forms/button-text-transform-expected.png:
        * platform/gtk/fast/forms/button-text-transform-expected.txt:
        * platform/gtk/fast/forms/button-white-space-expected.png:
        * platform/gtk/fast/forms/button-white-space-expected.txt:
        * platform/gtk/fast/forms/control-clip-expected.png:
        * platform/gtk/fast/forms/control-clip-expected.txt:
        * platform/gtk/fast/forms/control-clip-overflow-expected.png:
        * platform/gtk/fast/forms/control-clip-overflow-expected.txt:
        * platform/gtk/fast/forms/control-restrict-line-height-expected.png:
        * platform/gtk/fast/forms/control-restrict-line-height-expected.txt:
        * platform/gtk/fast/forms/disabled-select-change-index-expected.png:
        * platform/gtk/fast/forms/disabled-select-change-index-expected.txt:
        * platform/gtk/fast/forms/file/file-input-direction-expected.png:
        * platform/gtk/fast/forms/file/file-input-direction-expected.txt:
        * platform/gtk/fast/forms/file/file-input-disabled-expected.png:
        * platform/gtk/fast/forms/file/file-input-disabled-expected.txt:
        * platform/gtk/fast/forms/form-element-geometry-expected.png:
        * platform/gtk/fast/forms/form-element-geometry-expected.txt:
        * platform/gtk/fast/forms/formmove-expected.png:
        * platform/gtk/fast/forms/formmove-expected.txt:
        * platform/gtk/fast/forms/formmove2-expected.png:
        * platform/gtk/fast/forms/formmove2-expected.txt:
        * platform/gtk/fast/forms/formmove3-expected.png:
        * platform/gtk/fast/forms/formmove3-expected.txt:
        * platform/gtk/fast/forms/indeterminate-expected.png:
        * platform/gtk/fast/forms/indeterminate-expected.txt:
        * platform/gtk/fast/forms/input-appearance-height-expected.png:
        * platform/gtk/fast/forms/input-appearance-height-expected.txt:
        * platform/gtk/fast/forms/input-button-sizes-expected.png:
        * platform/gtk/fast/forms/input-button-sizes-expected.txt:
        * platform/gtk/fast/forms/input-first-letter-expected.png:
        * platform/gtk/fast/forms/input-first-letter-expected.txt:
        * platform/gtk/fast/forms/input-number-click-expected.txt: Added.
        * platform/gtk/fast/forms/input-value-expected.png:
        * platform/gtk/fast/forms/input-value-expected.txt:
        * platform/gtk/fast/forms/menulist-deselect-update-expected.png:
        * platform/gtk/fast/forms/menulist-deselect-update-expected.txt:
        * platform/gtk/fast/forms/menulist-narrow-width-expected.png:
        * platform/gtk/fast/forms/menulist-narrow-width-expected.txt:
        * platform/gtk/fast/forms/menulist-no-overflow-expected.png:
        * platform/gtk/fast/forms/menulist-no-overflow-expected.txt:
        * platform/gtk/fast/forms/menulist-restrict-line-height-expected.png:
        * platform/gtk/fast/forms/menulist-restrict-line-height-expected.txt:
        * platform/gtk/fast/forms/menulist-separator-painting-expected.png:
        * platform/gtk/fast/forms/menulist-separator-painting-expected.txt:
        * platform/gtk/fast/forms/menulist-style-color-expected.png:
        * platform/gtk/fast/forms/menulist-style-color-expected.txt:
        * platform/gtk/fast/forms/menulist-width-change-expected.png:
        * platform/gtk/fast/forms/menulist-width-change-expected.txt:
        * platform/gtk/fast/forms/number/number-appearance-rtl-expected.png:
        * platform/gtk/fast/forms/number/number-appearance-rtl-expected.txt:
        * platform/gtk/fast/forms/number/number-appearance-spinbutton-disabled-readonly-expected.png:
        * platform/gtk/fast/forms/number/number-appearance-spinbutton-disabled-readonly-expected.txt:
        * platform/gtk/fast/forms/number/number-appearance-spinbutton-layer-expected.png:
        * platform/gtk/fast/forms/number/number-appearance-spinbutton-layer-expected.txt:
        * platform/gtk/fast/forms/number/number-spinbutton-change-and-input-events-expected.txt: Added.
        * platform/gtk/fast/forms/number/number-spinbutton-click-in-iframe-expected.txt: Added.
        * platform/gtk/fast/forms/number/number-spinbutton-gets-disabled-or-readonly-expected.txt: Added.
        * platform/gtk/fast/forms/option-script-expected.png:
        * platform/gtk/fast/forms/option-script-expected.txt:
        * platform/gtk/fast/forms/option-strip-whitespace-expected.png:
        * platform/gtk/fast/forms/option-strip-whitespace-expected.txt:
        * platform/gtk/fast/forms/option-text-clip-expected.png:
        * platform/gtk/fast/forms/option-text-clip-expected.txt:
        * platform/gtk/fast/forms/placeholder-position-expected.png:
        * platform/gtk/fast/forms/placeholder-position-expected.txt:
        * platform/gtk/fast/forms/placeholder-pseudo-style-expected.png:
        * platform/gtk/fast/forms/placeholder-pseudo-style-expected.txt:
        * platform/gtk/fast/forms/range/input-appearance-range-expected.png:
        * platform/gtk/fast/forms/range/input-appearance-range-expected.txt:
        * platform/gtk/fast/forms/range/slider-padding-expected.png:
        * platform/gtk/fast/forms/range/slider-padding-expected.txt:
        * platform/gtk/fast/forms/range/slider-thumb-shared-style-expected.png:
        * platform/gtk/fast/forms/range/slider-thumb-shared-style-expected.txt:
        * platform/gtk/fast/forms/range/slider-transformed-expected.txt:
        * platform/gtk/fast/forms/range/thumbslider-no-parent-slider-expected.png:
        * platform/gtk/fast/forms/range/thumbslider-no-parent-slider-expected.txt:
        * platform/gtk/fast/forms/search-cancel-button-style-sharing-expected.png:
        * platform/gtk/fast/forms/search-cancel-button-style-sharing-expected.txt:
        * platform/gtk/fast/forms/search-display-none-cancel-button-expected.png:
        * platform/gtk/fast/forms/search-display-none-cancel-button-expected.txt:
        * platform/gtk/fast/forms/search-input-rtl-expected.png:
        * platform/gtk/fast/forms/search-input-rtl-expected.txt: Added.
        * platform/gtk/fast/forms/search-rtl-expected.png:
        * platform/gtk/fast/forms/search-rtl-expected.txt:
        * platform/gtk/fast/forms/search-styled-expected.png:
        * platform/gtk/fast/forms/search-styled-expected.txt:
        * platform/gtk/fast/forms/search/search-size-with-decorations-expected.png:
        * platform/gtk/fast/forms/search/search-size-with-decorations-expected.txt:
        * platform/gtk/fast/forms/searchfield-heights-expected.png:
        * platform/gtk/fast/forms/searchfield-heights-expected.txt:
        * platform/gtk/fast/forms/select-align-expected.png:
        * platform/gtk/fast/forms/select-align-expected.txt:
        * platform/gtk/fast/forms/select-background-none-expected.png:
        * platform/gtk/fast/forms/select-background-none-expected.txt:
        * platform/gtk/fast/forms/select-baseline-expected.png:
        * platform/gtk/fast/forms/select-baseline-expected.txt:
        * platform/gtk/fast/forms/select-change-listbox-to-popup-expected.png:
        * platform/gtk/fast/forms/select-change-listbox-to-popup-expected.txt:
        * platform/gtk/fast/forms/select-dirty-parent-pref-widths-expected.png:
        * platform/gtk/fast/forms/select-dirty-parent-pref-widths-expected.txt:
        * platform/gtk/fast/forms/select-disabled-appearance-expected.png:
        * platform/gtk/fast/forms/select-disabled-appearance-expected.txt:
        * platform/gtk/fast/forms/select-element-focus-ring-expected.png: Added.
        * platform/gtk/fast/forms/select-element-focus-ring-expected.txt:
        * platform/gtk/fast/forms/select-initial-position-expected.png:
        * platform/gtk/fast/forms/select-initial-position-expected.txt:
        * platform/gtk/fast/forms/select-non-native-rendering-direction-expected.png: Added.
        * platform/gtk/fast/forms/select-non-native-rendering-direction-expected.txt: Added.
        * platform/gtk/fast/forms/select-selected-expected.png:
        * platform/gtk/fast/forms/select-selected-expected.txt:
        * platform/gtk/fast/forms/select-style-expected.png:
        * platform/gtk/fast/forms/select-style-expected.txt:
        * platform/gtk/fast/forms/select-visual-hebrew-expected.png:
        * platform/gtk/fast/forms/select-visual-hebrew-expected.txt:
        * platform/gtk/fast/forms/select-writing-direction-natural-expected.png:
        * platform/gtk/fast/forms/select-writing-direction-natural-expected.txt:
        * platform/gtk/fast/forms/select/optgroup-rendering-expected.png:
        * platform/gtk/fast/forms/select/optgroup-rendering-expected.txt:
        * platform/gtk/fast/forms/selectlist-minsize-expected.png:
        * platform/gtk/fast/forms/selectlist-minsize-expected.txt:
        * platform/gtk/fast/forms/stuff-on-my-optgroup-expected.png:
        * platform/gtk/fast/forms/stuff-on-my-optgroup-expected.txt:
        * platform/gtk/fast/forms/targeted-frame-submission-expected.png:
        * platform/gtk/fast/forms/targeted-frame-submission-expected.txt:
        * platform/gtk/fast/forms/validation-message-appearance-expected.png:
        * platform/gtk/fast/forms/validation-message-appearance-expected.txt:
        * platform/gtk/fast/html/details-replace-summary-child-expected.png:
        * platform/gtk/fast/html/details-replace-summary-child-expected.txt:
        * platform/gtk/fast/html/details-replace-text-expected.png:
        * platform/gtk/fast/html/details-replace-text-expected.txt:
        * platform/gtk/fast/html/keygen-expected.png:
        * platform/gtk/fast/html/keygen-expected.txt:
        * platform/gtk/fast/inline/positionedLifetime-expected.png:
        * platform/gtk/fast/inline/positionedLifetime-expected.txt:
        * platform/gtk/fast/invalid/014-expected.png:
        * platform/gtk/fast/invalid/014-expected.txt:
        * platform/gtk/fast/overflow/scroll-nested-positioned-layer-in-overflow-expected.png:
        * platform/gtk/fast/overflow/scroll-nested-positioned-layer-in-overflow-expected.txt:
        * platform/gtk/fast/overflow/scrollRevealButton-expected.png:
        * platform/gtk/fast/overflow/scrollRevealButton-expected.txt:
        * platform/gtk/fast/parser/bad-xml-slash-expected.png:
        * platform/gtk/fast/parser/bad-xml-slash-expected.txt:
        * platform/gtk/fast/parser/document-write-option-expected.png:
        * platform/gtk/fast/parser/document-write-option-expected.txt:
        * platform/gtk/fast/repaint/search-field-cancel-expected.png:
        * platform/gtk/fast/repaint/search-field-cancel-expected.txt:
        * platform/gtk/fast/repaint/slider-thumb-drag-release-expected.png:
        * platform/gtk/fast/repaint/slider-thumb-drag-release-expected.txt:
        * platform/gtk/fast/replaced/replaced-breaking-expected.png:
        * platform/gtk/fast/replaced/replaced-breaking-expected.txt:
        * platform/gtk/fast/replaced/replaced-breaking-mixture-expected.png:
        * platform/gtk/fast/replaced/replaced-breaking-mixture-expected.txt:
        * platform/gtk/fast/replaced/three-selects-break-expected.png:
        * platform/gtk/fast/replaced/three-selects-break-expected.txt:
        * platform/gtk/fast/replaced/width100percent-button-expected.png:
        * platform/gtk/fast/replaced/width100percent-button-expected.txt:
        * platform/gtk/fast/replaced/width100percent-menulist-expected.png:
        * platform/gtk/fast/replaced/width100percent-menulist-expected.txt:
        * platform/gtk/fast/replaced/width100percent-searchfield-expected.png:
        * platform/gtk/fast/replaced/width100percent-searchfield-expected.txt:
        * platform/gtk/fast/scrolling/overflow-scrollable-after-back-expected.txt: Added.
        * platform/gtk/fast/table/append-cells2-expected.png:
        * platform/gtk/fast/table/append-cells2-expected.txt:
        * platform/gtk/fast/table/remove-td-display-none-expected.png:
        * platform/gtk/fast/table/remove-td-display-none-expected.txt:
        * platform/gtk/fast/text/international/bidi-menulist-expected.png:
        * platform/gtk/fast/text/international/bidi-menulist-expected.txt:
        * platform/gtk/fast/text/international/hindi-spacing-expected.png:
        * platform/gtk/fast/text/international/hindi-spacing-expected.txt:
        * platform/gtk/fast/text/international/pop-up-button-text-alignment-and-direction-expected.png:
        * platform/gtk/fast/text/international/pop-up-button-text-alignment-and-direction-expected.txt:
        * platform/gtk/fast/text/textIteratorNilRenderer-expected.png:
        * platform/gtk/fast/text/textIteratorNilRenderer-expected.txt:
        * platform/gtk/fast/text/whitespace/normal-after-nowrap-breaking-expected.png:
        * platform/gtk/fast/text/whitespace/normal-after-nowrap-breaking-expected.txt:
        * platform/gtk/http/tests/navigation/javascriptlink-frames-expected.png:
        * platform/gtk/http/tests/navigation/javascriptlink-frames-expected.txt:
        * platform/gtk/svg/custom/foreign-object-skew-expected.png:
        * platform/gtk/svg/custom/foreign-object-skew-expected.txt:
        * platform/gtk/svg/custom/inline-svg-in-xhtml-expected.png:
        * platform/gtk/svg/custom/inline-svg-in-xhtml-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug1188-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug1188-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug1318-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug1318-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug138725-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug138725-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug18359-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug18359-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug2479-2-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug2479-2-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug2479-3-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug2479-3-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug2479-4-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug26178-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug26178-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug28928-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug28928-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug29326-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug29326-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug33855-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug33855-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug39209-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug39209-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug4382-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug4382-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug4429-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug4429-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug44505-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug44505-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug4527-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug4527-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug46368-1-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug46368-1-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug46368-2-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug46368-2-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug51037-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug51037-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug51727-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug51727-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug52505-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug52505-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug52506-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug52506-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug60749-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug60749-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug68912-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug68912-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug7342-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug7342-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug92647-2-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug92647-2-expected.txt:
        * platform/gtk/tables/mozilla/bugs/bug96334-expected.png:
        * platform/gtk/tables/mozilla/bugs/bug96334-expected.txt:
        * platform/gtk/tables/mozilla/collapsing_borders/bug41262-4-expected.png:
        * platform/gtk/tables/mozilla/collapsing_borders/bug41262-4-expected.txt:
        * platform/gtk/tables/mozilla/core/margins-expected.png:
        * platform/gtk/tables/mozilla/core/margins-expected.txt:
        * platform/gtk/tables/mozilla/dom/tableDom-expected.png:
        * platform/gtk/tables/mozilla/dom/tableDom-expected.txt:
        * platform/gtk/tables/mozilla/other/move_row-expected.png:
        * platform/gtk/tables/mozilla/other/move_row-expected.txt:
        * platform/gtk/tables/mozilla_expected_failures/bugs/bug1725-expected.png:
        * platform/gtk/tables/mozilla_expected_failures/bugs/bug1725-expected.txt:
        * platform/gtk/tables/mozilla_expected_failures/bugs/bug2479-5-expected.png:
        * platform/gtk/tables/mozilla_expected_failures/bugs/bug2479-5-expected.txt:
        * platform/gtk/tables/mozilla_expected_failures/bugs/bug58402-2-expected.png:
        * platform/gtk/tables/mozilla_expected_failures/bugs/bug58402-2-expected.txt:
        * platform/gtk/tables/mozilla_expected_failures/collapsing_borders/bug41262-5-expected.png:
        * platform/gtk/tables/mozilla_expected_failures/collapsing_borders/bug41262-5-expected.txt:
        * platform/gtk/tables/mozilla_expected_failures/collapsing_borders/bug41262-6-expected.png:
        * platform/gtk/tables/mozilla_expected_failures/collapsing_borders/bug41262-6-expected.txt:
        * platform/gtk/tables/mozilla_expected_failures/core/captions1-expected.png:
        * platform/gtk/tables/mozilla_expected_failures/core/captions1-expected.txt:
        * platform/gtk/tables/mozilla_expected_failures/core/captions2-expected.png:
        * platform/gtk/tables/mozilla_expected_failures/core/captions2-expected.txt:
        * platform/gtk/transforms/2d/zoom-menulist-expected.png:
        * platform/gtk/transforms/2d/zoom-menulist-expected.txt:

2017-05-08  Sergio Villar Senin  <svillar@igalia.com>

        [css-grid] Remove Blink-specific code for handling orthogonal grid items
        https://bugs.webkit.org/show_bug.cgi?id=171807

        Reviewed by Darin Adler.

        Updated the expectations. They should now be compatible with Firefox and Chrome.

        * fast/css-grid-layout/grid-track-sizing-with-orthogonal-flows.html:
        * fast/css-grid-layout/grid-track-sizing-with-percentages-and-orthogonal-flows.html:
        * fast/css-grid-layout/repeating-layout-must-produce-the-same-results.html:

2017-05-09  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] deviceId constraint doesn't work with getUserMedia
        https://bugs.webkit.org/show_bug.cgi?id=171877
        <rdar://problem/31899730>

        Reviewed by Jer Noble.

        * fast/mediastream/get-user-media-device-id-expected.txt: Added.
        * fast/mediastream/get-user-media-device-id.html: Added.

2017-05-09  Matt Lewis  <jlewis3@apple.com>

        Mark webrtc/libwebrtc/release-while-setting-local-description.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171899

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-09  Matt Lewis  <jlewis3@apple.com>

        Mark webrtc/audio-replace-track.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171895

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-09  Sam Weinig  <sam@webkit.org>

        Implement Subresource Integrity (SRI)
        https://bugs.webkit.org/show_bug.cgi?id=148363
        <rdar://problem/18945879>

        Reviewed by Youenn Fablet.

        Add tests for Subresource Integrity for Fetch based off the ones from Web 
        Platform Tests. Additional tests for more CORS combinations have been added.

        * http/tests/subresource-integrity/resources/crossorigin-anon-resource.txt: Added.
        * http/tests/subresource-integrity/resources/crossorigin-creds-resource.txt: Added.
        * http/tests/subresource-integrity/resources/crossorigin-ineligible-resource.txt: Added.
        * http/tests/subresource-integrity/resources/resource.txt: Added.
        * http/tests/subresource-integrity/sri-fetch-expected.txt: Added.
        * http/tests/subresource-integrity/sri-fetch-worker-expected.txt: Added.
        * http/tests/subresource-integrity/sri-fetch-worker.html: Added.
        * http/tests/subresource-integrity/sri-fetch.html: Added.
        * http/tests/subresource-integrity/sri-fetch.js: Added.

2017-05-09  Matt Lewis  <jlewis3@apple.com>

        Marked webrtc/captureCanvas-webrtc.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170870

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-09  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r216545.
        https://bugs.webkit.org/show_bug.cgi?id=171889

        Caused a test failure (Requested by eric_carlson on #webkit).

        Reverted changeset:

        "[MediaStream] deviceId constraint doesn't work with
        getUserMedia"
        https://bugs.webkit.org/show_bug.cgi?id=171877
        http://trac.webkit.org/changeset/216545

2017-05-09  Zalan Bujtas  <zalan@apple.com>

        resetFlowThreadContainingBlockAndChildInfoIncludingDescendants should not ignore RenderElement subtrees.
        https://bugs.webkit.org/show_bug.cgi?id=171873
        <rdar://problem/32004954>

        Reviewed by Simon Fraser.

        * fast/multicol/crash-when-column-inside-table-expected.txt: Added.
        * fast/multicol/crash-when-column-inside-table.html: Added.

2017-05-09  Ryan Haddad  <ryanhaddad@apple.com>

        [iOS Simulator] Flaky failure LayoutTest/webrtc/libwebrtc/release-while-setting-local-description.html
        https://bugs.webkit.org/show_bug.cgi?id=171742

        Reviewed by Youenn Fablet.

        Silence the console messages for unhandled rejections in this test.

        * webrtc/libwebrtc/release-while-setting-local-description-expected.txt:
        * webrtc/libwebrtc/release-while-setting-local-description.html:

2017-05-09  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] deviceId constraint doesn't work with getUserMedia
        https://bugs.webkit.org/show_bug.cgi?id=171877
        <rdar://problem/31899730>

        Reviewed by Jer Noble.

        * fast/mediastream/get-user-media-device-id-expected.txt: Added.
        * fast/mediastream/get-user-media-device-id.html: Added.

2017-05-09  Matt Lewis  <jlewis3@apple.com>

        Marked multiple test flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171886

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:
        * platform/mac/TestExpectations:

2017-05-09  Chris Dumez  <cdumez@apple.com>

        Introduce DocumentAndElementEventHandlers IDL interface
        https://bugs.webkit.org/show_bug.cgi?id=171879

        Reviewed by Simon Fraser and Ryosuke Niwa.

        * fast/events/DocumentAndElementEventHandlers-expected.txt: Added.
        * fast/events/DocumentAndElementEventHandlers.html: Added.
        Add layout test coverage.

        * js/dom/dom-static-property-for-in-iteration-expected.txt:
        Rebaseline now that those event handlers are enumerable.

2017-05-10  Dean Jackson  <dino@apple.com>

        Restrict SVG filters to accessible security origins
        https://bugs.webkit.org/show_bug.cgi?id=118689
        <rdar://problem/27362159>

        Reviewed by Brent Fulgham.

        Add a test that shows safe frames, unsafe frames, and
        then a safe frame that itself has an unsafe frame, to
        show that the security requirements are being forwarded
        down the tree.

        * http/tests/css/filters-on-iframes-expected.html: Added.
        * http/tests/css/filters-on-iframes.html: Added.
        * http/tests/css/resources/blank.html: Added.
        * http/tests/css/resources/references-external.html: Added.
        * http/tests/css/resources/solid-red.html: Added.

2017-05-09  Chris Dumez  <cdumez@apple.com>

        Move onanimation* EventHandlers to GlobalEventHandlers
        https://bugs.webkit.org/show_bug.cgi?id=171874

        Reviewed by Simon Fraser.

        * fast/css/onanimation-eventhandlers-expected.txt: Added.
        * fast/css/onanimation-eventhandlers.html: Added.
        Add layout test coverage.

        * fast/dom/event-handler-attributes-expected.txt:
        * fast/dom/event-handler-attributes.html:
        * js/dom/dom-static-property-for-in-iteration-expected.txt:
        Rebaseline existing tests to reflect behavior change.

2017-05-09  Matt Lewis  <jlewis3@apple.com>

        Fixed a typo in expectations file.
        https://bugs.webkit.org/show_bug.cgi?id=162710

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-09  Javier Fernandez  <jfernandez@igalia.com>

        space-evenly misbehaves with flexbox
        https://bugs.webkit.org/show_bug.cgi?id=170445

        Reviewed by David Hyatt.

        Added test cases for the 'space-evenly' value for align-content and justify-content.

        * css3/flexbox/alignContent-applies-with-flexWrap-wrap-with-single-line-expected.txt:
        * css3/flexbox/alignContent-applies-with-flexWrap-wrap-with-single-line.html:
        * css3/flexbox/css-properties-expected.txt:
        * css3/flexbox/css-properties.html:
        * css3/flexbox/flex-justify-content-expected.txt:
        * css3/flexbox/flex-justify-content.html:
        * css3/flexbox/multiline-align-content-expected.txt:
        * css3/flexbox/multiline-align-content-horizontal-column-expected.txt:
        * css3/flexbox/multiline-align-content-horizontal-column.html:
        * css3/flexbox/multiline-align-content.html:
        * css3/flexbox/resources/flexbox.css:
        (.align-content-space-around):
        (.justify-content-space-around):
        * css3/flexbox/true-centering-expected.txt:
        * css3/flexbox/true-centering.html:

2017-05-09  Matt Lewis  <jlewis3@apple.com>

        Unreviewed, rolling out r216508.

        The layout test enabled in this change is failing on Sierra.

        Reverted changeset:

        "Invalid MediaSource duration value should throw TyperError
        instead of InvalidStateError"
        https://bugs.webkit.org/show_bug.cgi?id=171653
        http://trac.webkit.org/changeset/216508

2017-05-09  Matt Lewis  <jlewis3@apple.com>

        Marked media/element-containing-pip-video-going-into-fullscreen.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=162710

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-09  Myles C. Maxfield  <mmaxfield@apple.com>

        font-stretch: normal selects expanded fonts instead of condensed fonts
        https://bugs.webkit.org/show_bug.cgi?id=171838
        <rdar://problem/31005481>

        Reviewed by Jon Lee.

        * fast/text/font-width-100-expected.html: Added.
        * fast/text/font-width-100.html: Added.

2017-05-09  Matt Lewis  <jlewis3@apple.com>

        Mark storage/indexeddb/modern/idbtransaction-objectstore-failures.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171862

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-09  Romain Bellessort  <romain.bellessort@crf.canon.fr>

        [Readable Streams API] Enable creation of ReadableStreamBYOBReader
        https://bugs.webkit.org/show_bug.cgi?id=171665

        Reviewed by Youenn Fablet.
        
        Added test to check the creation of ReadableStreamBYOBReader. Also check
        that created object has the right methods and properties.

        * streams/readable-stream-byob-reader-expected.txt: Added.
        * streams/readable-stream-byob-reader.html: Added.
        * streams/readable-stream-byob-reader.js: Added.

2017-05-09  Frederic Wang  <fwang@igalia.com>

        Print more properties in the output of scrolling trees
        https://bugs.webkit.org/show_bug.cgi?id=171858

        Reviewed by Simon Fraser.

        Update text expectations to include new properties.

        * fast/scrolling/ios/remove-scrolling-role-expected.txt:
        * fast/visual-viewport/tiled-drawing/zoomed-fixed-scrolled-down-expected.txt:
        * fast/visual-viewport/tiled-drawing/zoomed-fixed-scrolled-down-then-up-expected.txt:
        * fast/visual-viewport/tiled-drawing/zoomed-fixed-scrolling-layers-state-expected.txt:
        * tiled-drawing/scrolling/clamp-out-of-bounds-scrolls-expected.txt:
        * tiled-drawing/scrolling/fixed/absolute-inside-fixed-expected.txt:
        * tiled-drawing/scrolling/fixed/absolute-inside-out-of-view-fixed-expected.txt:
        * tiled-drawing/scrolling/fixed/fixed-in-overflow-expected.txt:
        * tiled-drawing/scrolling/fixed/fixed-position-out-of-view-expected.txt:
        * tiled-drawing/scrolling/fixed/fixed-position-out-of-view-negative-zindex-expected.txt:
        * tiled-drawing/scrolling/fixed/four-bars-expected.txt:
        * tiled-drawing/scrolling/fixed/four-bars-with-header-and-footer-expected.txt:
        * tiled-drawing/scrolling/fixed/four-bars-zoomed-expected.txt:
        * tiled-drawing/scrolling/fixed/negative-scroll-offset-expected.txt:
        * tiled-drawing/scrolling/fixed/negative-scroll-offset-in-view-expected.txt:
        * tiled-drawing/scrolling/fixed/nested-fixed-expected.txt:
        * tiled-drawing/scrolling/fixed/percentage-inside-fixed-expected.txt:
        * tiled-drawing/scrolling/frames/coordinated-frame-expected.txt:
        * tiled-drawing/scrolling/frames/coordinated-frame-gain-scrolling-ancestor-expected.txt:
        * tiled-drawing/scrolling/frames/coordinated-frame-in-fixed-expected.txt:
        * tiled-drawing/scrolling/frames/coordinated-frame-lose-scrolling-ancestor-expected.txt:
        * tiled-drawing/scrolling/frames/fixed-inside-frame-expected.txt:
        * tiled-drawing/scrolling/frames/remove-coordinated-frame-expected.txt:
        * tiled-drawing/scrolling/frames/scroll-region-after-frame-layout-expected.txt:
        * tiled-drawing/scrolling/scrolling-tree-after-scroll-expected.txt:
        * tiled-drawing/scrolling/scrolling-tree-slow-scrolling-expected.txt:
        * tiled-drawing/scrolling/sticky/negative-scroll-offset-expected.txt:
        * tiled-drawing/scrolling/sticky/sticky-horizontal-expected.txt:
        * tiled-drawing/scrolling/sticky/sticky-vertical-expected.txt:

2017-05-09  Chris Dumez  <cdumez@apple.com>

        ontransitionend eventHandler should be in GlobalEventHandlers
        https://bugs.webkit.org/show_bug.cgi?id=171836

        Reviewed by Ryosuke Niwa.

        * fast/css/ontransitionend-eventhandler-expected.txt: Added.
        * fast/css/ontransitionend-eventhandler.html: Added.
        Add layout test coverage.

        * fast/dom/event-handler-attributes-expected.txt:
        * fast/dom/event-handler-attributes.html:
        * js/dom/dom-static-property-for-in-iteration-expected.txt:
        Rebaseline existing tests to reflect behavior change.

2017-05-09  Nael Ouedraogo  <nael.ouedraogo@crf.canon.fr>

        Invalid MediaSource duration value should throw TyperError instead of InvalidStateError
        https://bugs.webkit.org/show_bug.cgi?id=171653

        Reviewed by Youenn Fablet.

        Modify MediaSource::setDuration to throw a TypeError when duration value is invalid as per MSE specification
        (https://www.w3.org/TR/2016/REC-media-source-20161117/#dom-mediasource-duration).

        Update expectation of corresponding WPT test.

        * platform/gtk/TestExpectations:
        * platform/gtk/imported/w3c/web-platform-tests/media-source/mediasource-duration-boundaryconditions-expected.txt: Added.
        * platform/mac/TestExpectations:
        * platform/mac/imported/w3c/web-platform-tests/media-source/mediasource-duration-boundaryconditions-expected.txt: Added.

2017-05-09  Yusuke Suzuki  <utatane.tea@gmail.com>

        Handle IDLPromise<> properly
        https://bugs.webkit.org/show_bug.cgi?id=166752

        Reviewed by Youenn Fablet.

        * js/dom/promise-rejection-event-should-follow-webidl-promise-conversion-rule-expected.txt: Added.
        * js/dom/promise-rejection-event-should-follow-webidl-promise-conversion-rule.html: Added.

2017-05-09  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed. Landing the WPE layout test baselines.

        Baseline filenames are omitted for brevity.

        * platform/wpe/TestExpectations: Added.
        * platform/wpe/animations/: Added.
        * platform/wpe/css1/: Added.
        * platform/wpe/css2.1/: Added.
        * platform/wpe/css3/: Added.
        * platform/wpe/fast/: Added.
        * platform/wpe/ietestcenter/: Added.
        * platform/wpe/js/: Added.
        * platform/wpe/scrollbars/: Added.
        * platform/wpe/security/: Added.
        * platform/wpe/sputnik/: Added.
        * platform/wpe/tables/: Added.
        * platform/wpe/transforms/: Added.
        * platform/wpe/transitions/: Added.

2017-05-08  Frederic Wang  <fwang@igalia.com>

        Simplify ScrollingStateNode::scrollingStateTreeAsText
        https://bugs.webkit.org/show_bug.cgi?id=171802

        Reviewed by Simon Fraser.

        Update references due to minor format changes in text ouput of scrolling state trees.

        * fast/scrolling/ios/remove-scrolling-role-expected.txt:
        * fast/visual-viewport/tiled-drawing/zoomed-fixed-scrolled-down-expected.txt:
        * fast/visual-viewport/tiled-drawing/zoomed-fixed-scrolled-down-then-up-expected.txt:
        * fast/visual-viewport/tiled-drawing/zoomed-fixed-scrolling-layers-state-expected.txt:
        * tiled-drawing/scrolling/clamp-out-of-bounds-scrolls-expected.txt:
        * tiled-drawing/scrolling/fixed/absolute-inside-fixed-expected.txt:
        * tiled-drawing/scrolling/fixed/absolute-inside-out-of-view-fixed-expected.txt:
        * tiled-drawing/scrolling/fixed/fixed-in-overflow-expected.txt:
        * tiled-drawing/scrolling/fixed/fixed-position-out-of-view-expected.txt:
        * tiled-drawing/scrolling/fixed/fixed-position-out-of-view-negative-zindex-expected.txt:
        * tiled-drawing/scrolling/fixed/four-bars-expected.txt:
        * tiled-drawing/scrolling/fixed/four-bars-with-header-and-footer-expected.txt:
        * tiled-drawing/scrolling/fixed/four-bars-zoomed-expected.txt:
        * tiled-drawing/scrolling/fixed/negative-scroll-offset-expected.txt:
        * tiled-drawing/scrolling/fixed/negative-scroll-offset-in-view-expected.txt:
        * tiled-drawing/scrolling/fixed/nested-fixed-expected.txt:
        * tiled-drawing/scrolling/fixed/percentage-inside-fixed-expected.txt:
        * tiled-drawing/scrolling/frames/coordinated-frame-expected.txt:
        * tiled-drawing/scrolling/frames/coordinated-frame-gain-scrolling-ancestor-expected.txt:
        * tiled-drawing/scrolling/frames/coordinated-frame-in-fixed-expected.txt:
        * tiled-drawing/scrolling/frames/coordinated-frame-lose-scrolling-ancestor-expected.txt:
        * tiled-drawing/scrolling/frames/fixed-inside-frame-expected.txt:
        * tiled-drawing/scrolling/frames/remove-coordinated-frame-expected.txt:
        * tiled-drawing/scrolling/frames/scroll-region-after-frame-layout-expected.txt:
        * tiled-drawing/scrolling/scrolling-tree-after-scroll-expected.txt:
        * tiled-drawing/scrolling/scrolling-tree-slow-scrolling-expected.txt:
        * tiled-drawing/scrolling/sticky/negative-scroll-offset-expected.txt:
        * tiled-drawing/scrolling/sticky/sticky-horizontal-expected.txt:
        * tiled-drawing/scrolling/sticky/sticky-vertical-expected.txt:

2017-05-08  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed GTK expectations gardening

        * platform/gtk/TestExpectations:
        * webaudio/codec-tests/wav/24bit-22khz-resample-expected.wav:

2017-05-08  Matt Lewis  <jlewis3@apple.com>

        Marked http/tests/security/storage-blocking-loosened-plugin.html as flaky
        https://bugs.webkit.org/show_bug.cgi?id=171837

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-08  Chris Dumez  <cdumez@apple.com>

        Move offsetParent / offsetLeft / offsetTop / offsetWidth / offsetHeight from Element to HTMLElement
        https://bugs.webkit.org/show_bug.cgi?id=171829

        Reviewed by Simon Fraser.

        * fast/css/htmlelement-offset-properties-expected.txt:
        * fast/css/htmlelement-offset-properties.html:
        Add layout test coverage.

        * editing/pasteboard/drag-link-with-data-transfer-adds-trusted-link-to-pasteboard.html:
        * fast/css-grid-layout/grid-item-display.html:
        * js/dom/dom-static-property-for-in-iteration-expected.txt:
        * mathml/presentation/menclose-notation-no-overlap-expected.txt:
        * mathml/presentation/menclose-notation-no-overlap.html:
        * platform/mac/inspector/model/remote-object-expected.txt:
        * svg/dynamic-updates/resources/SVGTestCase.js:
        (clickAt):
        * svg/text/inline-text-destroy-attributes-crash.xhtml:
        Use getClientBoundingRect() instead of offset* properties for non-HTML elements.

2017-05-08  Matt Lewis  <jlewis3@apple.com>

        Marked imported/w3c/web-platform-tests/XMLHttpRequest/timeout-multiple-fetches.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=169637

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-08  Jonathan Bedard  <jbedard@apple.com>

        Implement PlatformWebView::windowSnapshotImage and createBitmapContextFromWebView for iOS devices
        https://bugs.webkit.org/show_bug.cgi?id=169421
        <rdar://problem/30950171>

        Reviewed by Tim Horton.

        * platform/ios-device/TestExpectations: Mark compositing tests as failures, this
        is due to a bug tracked in https://bugs.webkit.org/show_bug.cgi?id=170772.

2017-05-08  Chris Dumez  <cdumez@apple.com>

        Drop non-standard document.implementation.createCSSStyleSheet() API
        https://bugs.webkit.org/show_bug.cgi?id=171825

        Reviewed by Simon Fraser.

        * fast/css/DOMImplementation.createCSSStyleSheet-obsolete-expected.txt:
        * fast/css/DOMImplementation.createCSSStyleSheet-obsolete.html:
        Add layout test coverage.

        * fast/dom/StyleSheet/gc-parent-rule-expected.txt:
        * fast/dom/StyleSheet/gc-parent-rule.html:
        * fast/dom/StyleSheet/gc-parent-stylesheet-expected.txt:
        * fast/dom/StyleSheet/gc-parent-stylesheet.html:
        Add utility functions to construct a CSSStyleSheet object and use it instead
        of document.implementation.createCSSStyleSheet().

2017-05-08  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: don't expose empty roledescription
        https://bugs.webkit.org/show_bug.cgi?id=163647

        Reviewed by Chris Fleizach.

        * accessibility/aria-roledescription-expected.txt: New test cases, updated expectations.
        * accessibility/aria-roledescription.html: New test cases, updated expectations.
        * platform/gtk/accessibility/aria-roledescription-expected.txt: New test cases, updated expectations.

2017-05-08  Chris Dumez  <cdumez@apple.com>

        Drop non-standard Element.scrollByLines() / scrollByPages()
        https://bugs.webkit.org/show_bug.cgi?id=171820

        Reviewed by Simon Fraser.

        * LayoutTests/fast/css/element-scrollByLines-scrollByPages-obsolete-expected.txt:
        * LayoutTests/fast/css/element-scrollByLines-scrollByPages-obsolete.html:
        Add layout test coverage.

        * fast/dom/non-numeric-values-numeric-parameters-expected.txt:
        * fast/dom/script-tests/non-numeric-values-numeric-parameters.js:
        * fast/events/scroll-event-does-not-bubble.html:
        * fast/layers/scroll-overflow-no-layer-expected.txt: Renamed from LayoutTests/fast/layers/scrollByLines-overflow-no-layer-expected.txt.
        * fast/layers/scroll-overflow-no-layer.html: Renamed from LayoutTests/fast/layers/scrollByLines-overflow-no-layer.html.
        Update existing tests to stop relying on the API.

2017-05-08  Matt Lewis  <jlewis3@apple.com>

        Marked http/tests/websocket/tests/hybi/workers/close.html is flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171830

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-08  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/status-label/status-label-font.html as flaky on mac-wk1.
        https://bugs.webkit.org/show_bug.cgi?id=171828

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-05-08  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: Setting aria-orientation="horizontal" on a listbox is being overridden on the Mac
        https://bugs.webkit.org/show_bug.cgi?id=171821

        Reviewed by Chris Fleizach.

        * accessibility/aria-orientation-expected.txt: New test case.
        * accessibility/aria-orientation.html: New test case.

2017-05-08  Said Abou-Hallawa  <sabouhallawa@apple.com>

        [CG] To decode an image frame asynchronously, pass the native size of the image to CGImageSourceCreateThumbnailAtIndex() if it's smaller than the sizeForDrawing
        https://bugs.webkit.org/show_bug.cgi?id=170864

        Reviewed by Simon Fraser.

        * fast/images/async-image-background-image-repeated-expected.html:
        * fast/images/async-image-background-image-repeated.html:
        * fast/images/resources/sprite-sheet-red-green-blue.png:
        * fast/images/sprite-sheet-image-draw-expected.html:
        * fast/images/sprite-sheet-image-draw.html:
        Change the sprite image to be 200x33100 instead of 200x2100 and use it in drawing.
        If the maxPixelSize is not passed to CGImageSourceCreateThumbnailAtIndex(), the
        decoded farme of this image will be 30x5000 pixels (15% of the original size).

2017-05-08  Beth Dakin  <bdakin@apple.com>

        WebKit should default to using sRGB with NSColor conversion instead of device 
        color space
        https://bugs.webkit.org/show_bug.cgi?id=171745
        -and corresponding-
        rdar://problem/28314183

        Reviewed by Tim Horton.

        * editing/mac/attributed-string/anchor-element-expected.txt:
        * editing/mac/attributed-string/basic-expected.txt:
        * editing/mac/attributed-string/comment-cdata-section-expected.txt:
        * editing/mac/attributed-string/font-size-expected.txt:
        * editing/mac/attributed-string/font-style-variant-effect-expected.txt:
        * editing/mac/attributed-string/font-weight-expected.txt:
        * editing/mac/attributed-string/letter-spacing-expected.txt:
        * editing/mac/attributed-string/text-decorations-expected.txt:
        * editing/mac/attributed-string/vertical-align-expected.txt:

2017-05-04  Jiewen Tan  <jiewen_tan@apple.com>

        Search events should not fire synchronously for search type input elements with incremental attribute set
        https://bugs.webkit.org/show_bug.cgi?id=171376
        <rdar://problem/31863296>

        Reviewed by Chris Dumez.

        * fast/forms/search/search-incremental-crash-expected.txt: Added.
        * fast/forms/search/search-incremental-crash.html: Added.

2017-05-08  Zalan Bujtas  <zalan@apple.com>

        Text overlaps on http://www.duden.de/rechtschreibung/Acre
        https://bugs.webkit.org/show_bug.cgi?id=171796
        <rdar://problem/31036028>

        Reviewed by Simon Fraser.

        * fast/text/simple-line-layout-fallback-space-glyph-expected.html: Added.
        * fast/text/simple-line-layout-fallback-space-glyph.html: Added.

2017-05-08  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed, rolling out r216419.

        Broke 70 layout tests on GTK bot

        Reverted changeset:

        "Ensure clean tree before AX cache update."
        https://bugs.webkit.org/show_bug.cgi?id=171546
        http://trac.webkit.org/changeset/216419

2017-05-08  Antti Koivisto  <antti@apple.com>

        ComposedTreeIterator does not traverse all slotted children if the traversal root is a slot element.
        https://bugs.webkit.org/show_bug.cgi?id=171375
        <rdar://problem/31863184>

        Reviewed by Zalan Bujtas.

        * fast/html/details-flow-thread-expected.txt: Added.
        * fast/html/details-flow-thread.html: Added.
        * fast/shadow-dom/composed-tree-slots-expected.txt:
        * fast/shadow-dom/composed-tree-slots.html:

            Expand the test so it also prints out slot subtrees using slots as traversal roots.

2017-05-08  Chris Dumez  <cdumez@apple.com>

        Move 'style' from Element to HTMLElement / SVGElement and make it settable
        https://bugs.webkit.org/show_bug.cgi?id=171795

        Reviewed by Alex Christensen.

        * accessibility/roles-exposed.html:
        Add null check for element.style.

        * fast/css/Element-style-expected.txt: Added.
        * fast/css/Element-style.html: Added.
        Add layout test coverage.

        * fast/forms/input-width-height-attributes-without-renderer-loaded-image-expected.txt:
        Rebaseline test that was setting HTMLElement.style which was a no-op until this patch. Now that it actually
        does something, the input element actually looses its renderer. This found a bug which I fixed in this
        patch.

        * js/dom/dom-static-property-for-in-iteration-expected.txt:
        Rebaseline as property enumeration order has changed.

2017-05-08  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: Propagate aria-readonly to grid descendants
        https://bugs.webkit.org/show_bug.cgi?id=171189

        Reviewed by Chris Fleizach.

        Add new test cases to aria-readonly.html. In addition, because the platform-specific
        test expectations seem due to how platforms treat whitespace from the test file, hide
        the test cases after the test is run so that there are no extraneous characters and
        a single expectations file can be shared.

        * accessibility/aria-readonly-expected.txt: Updated.
        * accessibility/aria-readonly.html: Updated.
        * accessibility/gtk/aria-readonly-propagated-expected.txt: Added.
        * accessibility/gtk/aria-readonly-propagated.html: Added.
        * platform/mac-elcapitan/accessibility/aria-readonly-expected.txt: Removed.
        * platform/mac/accessibility/aria-readonly-expected.txt: Removed.
        * platform/win/accessibility/aria-readonly-expected.txt: Removed.

2017-05-06  Zalan Bujtas  <zalan@apple.com>

        Ensure clean tree before AX cache update.
        https://bugs.webkit.org/show_bug.cgi?id=171546
        <rdar://problem/31934942>

        Reviewed by Chris Fleizach.

        * accessibility/crash-when-render-tree-is-not-clean.html: Added.

2017-05-08  Myles C. Maxfield  <mmaxfield@apple.com>

        Unprefix unicode-bidi CSS values
        https://bugs.webkit.org/show_bug.cgi?id=171761

        Reviewed by Simon Fraser.

        Import W3C's internationalization tests from
        https://www.w3.org/International/tests/repo/results/writing-modes-bidi

        * fast/css/default-bidi-css-rules-expected.txt: Updating expected results.
        * fast/css/default-bidi-css-rules.html: Ditto.
        * fast/css/unicode-bidi-computed-value-expected.txt: Ditto.
        * fast/css/unicode-bidi-computed-value.html: Ditto.
        * fast/text/bidi-unprefix-expected.txt: Added. Test unprefixing.
        * fast/text/bidi-unprefix.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-001-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-001.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-002-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-002.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-003-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-003.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-004-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-004.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-005-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-005.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-006-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-006.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-007-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-007.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-008-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-008.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-009-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-009.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-010-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-010.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-011-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-embed-011.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-001-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-001.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-002-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-002.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-003-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-003.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-004-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-004.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-005-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-005.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-006-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-006.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-007-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-007.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-008-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-008.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-009-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-009.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-010-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-010.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-011-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-011.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-001-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-001.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-002-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-002.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-003-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-003.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-004-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-004.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-005-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-005.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-006-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-006.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-007-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-007.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-008-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-008.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-009-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-009.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-010-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-010.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-011-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-011.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-012-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-isolate-override-012.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-001-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-001.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-002-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-002.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-003-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-003.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-004-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-004.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-005-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-005.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-006-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-006.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-007-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-007.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-008-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-008.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-009-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-009.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-010-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-010.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-011-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-normal-011.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-001-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-001.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-002-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-002.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-003-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-003.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-004-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-004.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-005-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-005.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-006-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-006.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-007-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-007.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-008-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-008.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-009-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-009.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-010-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-010.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-011-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-011.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-012-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-override-012.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-001-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-001.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-003-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-003.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-005-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-005.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-006-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-006.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-007-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-007.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-008-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-008.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-009-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-009.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-010-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-010.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-011-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-plaintext-011.html: Added.
        * imported/w3c/i18n/bidi/bidi-table-001-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-table-001.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-001-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-001.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-002-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-002.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-003-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-003.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-004-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-004.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-005-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-005.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-006-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-006.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-007-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-007.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-008-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-008.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-009-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-009.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-010-expected.html: Added.
        * imported/w3c/i18n/bidi/bidi-unset-010.html: Added.
        * imported/w3c/i18n/bidi/block-embed-001-expected.html: Added.
        * imported/w3c/i18n/bidi/block-embed-001.html: Added.
        * imported/w3c/i18n/bidi/block-embed-002-expected.html: Added.
        * imported/w3c/i18n/bidi/block-embed-002.html: Added.
        * imported/w3c/i18n/bidi/block-embed-003-expected.html: Added.
        * imported/w3c/i18n/bidi/block-embed-003.html: Added.
        * imported/w3c/i18n/bidi/block-override-001-expected.html: Added.
        * imported/w3c/i18n/bidi/block-override-001.html: Added.
        * imported/w3c/i18n/bidi/block-override-002-expected.html: Added.
        * imported/w3c/i18n/bidi/block-override-002.html: Added.
        * imported/w3c/i18n/bidi/block-override-003-expected.html: Added.
        * imported/w3c/i18n/bidi/block-override-003.html: Added.
        * imported/w3c/i18n/bidi/block-override-004-expected.html: Added.
        * imported/w3c/i18n/bidi/block-override-004.html: Added.
        * imported/w3c/i18n/bidi/block-override-isolate-001-expected.html: Added.
        * imported/w3c/i18n/bidi/block-override-isolate-001.html: Added.
        * imported/w3c/i18n/bidi/block-override-isolate-002-expected.html: Added.
        * imported/w3c/i18n/bidi/block-override-isolate-002.html: Added.
        * imported/w3c/i18n/bidi/block-override-isolate-003-expected.html: Added.
        * imported/w3c/i18n/bidi/block-override-isolate-003.html: Added.
        * imported/w3c/i18n/bidi/block-override-isolate-004-expected.html: Added.
        * imported/w3c/i18n/bidi/block-override-isolate-004.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-001-expected.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-001.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-002-expected.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-002.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-003-expected.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-003.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-004-expected.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-004.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-005-expected.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-005.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-006-expected.html: Added.
        * imported/w3c/i18n/bidi/block-plaintext-006.html: Added.
        * imported/w3c/i18n/bidi/resources/sileot-webfont.woff: Added.
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:

2017-05-08  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Update expectations of several tests.

        * platform/gtk/TestExpectations:

2017-05-07  Simon Fraser  <simon.fraser@apple.com>

        [iOS] REGRESSION (r209409): getBoundingClientRect is wrong for fixed-position elements in resize/orientationchange
        https://bugs.webkit.org/show_bug.cgi?id=171140

        Reviewed by Sam Weinig.

        Tests that fetch the dimensions of a fixed element in resize and orientationchange handlers,
        which is a proxy for reading the layout viewport.

        * fast/events/ios/rotation/layout-viewport-during-rotation-expected.txt: Added.
        * fast/events/ios/rotation/layout-viewport-during-rotation.html: Added.
        * fast/events/ios/rotation/layout-viewport-during-safari-type-rotation-expected.txt: Added.
        * fast/events/ios/rotation/layout-viewport-during-safari-type-rotation.html: Added.
        * fast/events/ios/rotation/resources/rotation-utils.js: Added.
        (stringFromRect):
        (accumulateLog):
        (logFixedObject):
        (logFixedAndViewports):
        (doTest):

2017-05-07  Youenn Fablet  <youenn@apple.com>

        [MediaStream] r216197 caused some webrtc tests to fail
        https://bugs.webkit.org/show_bug.cgi?id=171728

        Reviewed by Eric Carlson.

        * platform/ios-wk2/TestExpectations:

2017-05-07  Sam Weinig  <sam@webkit.org>

        Implement Subresource Integrity (SRI)
        https://bugs.webkit.org/show_bug.cgi?id=148363
        <rdar://problem/18945879>

        Reviewed by Daniel Bates.

        Add tests for Subresource Integrity based off the ones from Web 
        Platform Tests. They have been changed to:
        - Split <link> and <script> testing.
        - Add additional tests:
            - Integrity hashes using base64URL encoding.
            - Integrity hashes using mixed base64 and base64URL encoding.
            - Integrity metadata that does not conform to the grammar at all.
            - Multiple valid, but only one matching, integrity hashes.
            - Non-matching integrity hash with options.
        - Run one at a time, so console output is consistent.
        
        We can/should upstream these changes, but this avoids the possibility that
        an update of the imported web-platform-tests could cause these tests to fail.
        
        Also adds tests that show the Subresource Integrity setting works correctly.

        * http/tests/subresource-integrity: Added.
        * http/tests/subresource-integrity/.htaccess: Added.
        * http/tests/subresource-integrity/resources: Added.
        * http/tests/subresource-integrity/resources/alternate.css: Added.
        * http/tests/subresource-integrity/resources/crossorigin-anon-script.js: Added.
        * http/tests/subresource-integrity/resources/crossorigin-anon-style.css: Added.
        * http/tests/subresource-integrity/resources/crossorigin-creds-script.js: Added.
        * http/tests/subresource-integrity/resources/crossorigin-creds-style.css: Added.
        * http/tests/subresource-integrity/resources/crossorigin-ineligible-script.js: Added.
        * http/tests/subresource-integrity/resources/crossorigin-ineligible-style.css: Added.
        * http/tests/subresource-integrity/resources/matching-digest.js: Added.
        * http/tests/subresource-integrity/resources/non-matching-digest.js: Added.
        * http/tests/subresource-integrity/resources/sri-utilities.js: Added.
        * http/tests/subresource-integrity/resources/style.css: Added.
        * http/tests/subresource-integrity/sri-disabled-with-setting-expected.txt: Added.
        * http/tests/subresource-integrity/sri-disabled-with-setting.html: Added.
        * http/tests/subresource-integrity/sri-enabled-with-setting-expected.txt: Added.
        * http/tests/subresource-integrity/sri-enabled-with-setting.html: Added.
        * http/tests/subresource-integrity/sri-script-expected.txt: Added.
        * http/tests/subresource-integrity/sri-script.html: Added.
        * http/tests/subresource-integrity/sri-style-expected.txt: Added.
        * http/tests/subresource-integrity/sri-style.html: Added.

2017-05-06  Myles C. Maxfield  <mmaxfield@apple.com>

        [Cocoa] CTFontDescriptorCreateMatchingFontDescriptor() is not case insensitive
        https://bugs.webkit.org/show_bug.cgi?id=171636
        <rdar://problem/30811218>

        Reviewed by Dean Jackson.

        * fast/text/lastResort-expected.html: Added.
        * fast/text/lastResort.html: Added.

2017-05-06  Chris Dumez  <cdumez@apple.com>

        Implement the concept of cookie-averse document
        https://bugs.webkit.org/show_bug.cgi?id=171746
        <rdar://problem/32004466>

        Reviewed by Sam Weinig.

        Add layout test coverage.

        * fast/cookies/cookie-averse-document-expected.txt: Added.
        * fast/cookies/cookie-averse-document.html: Added.

2017-05-06  Chris Dumez  <cdumez@apple.com>

        Align our IDL files with the latest DOM specification
        https://bugs.webkit.org/show_bug.cgi?id=171777

        Reviewed by Sam Weinig.

        Rebaseline a few tests.

        * fast/dom/Document/adoptNode-null-expected.txt:
        * fast/dom/Document/adoptNode-null.html:
        * fast/dom/Document/importNode-null-expected.txt:
        * fast/dom/Document/importNode-null.html:
        * fast/dom/Range/range-intersectsNode-expected.txt:
        * fast/text/text-combine-crash-expected.txt:

2017-05-06  Alexey Proskuryakov  <ap@apple.com>

        Mark http/tests/loading/resourceLoadStatistics/prevalent-resource-without-user-interaction.html as flaky
        https://bugs.webkit.org/show_bug.cgi?id=171785

        * platform/wk2/TestExpectations:

2017-05-06  Alexey Proskuryakov  <ap@apple.com>

        REGRESSION (r216294): The new test fails on WebKit1
        https://bugs.webkit.org/show_bug.cgi?id=171780

        Rolling back https://trac.webkit.org/r216294, https://trac.webkit.org/r216296,
        https://trac.webkit.org/216299, https://trac.webkit.org/216330

        * http/tests/css/filters-on-iframes-expected.html: Removed.
        * http/tests/css/filters-on-iframes.html: Removed.
        * http/tests/css/resources/blank.html: Removed.
        * http/tests/css/resources/references-external.html: Removed.
        * http/tests/css/resources/solid-red.html: Removed.

2017-05-06  Simon Fraser  <simon.fraser@apple.com>

        [iOS WK2] Make rotation tests more reliable
        https://bugs.webkit.org/show_bug.cgi?id=171778

        Reviewed by Tim Horton.

        New baseline.

        * fast/events/ios/rotation/zz-no-rotation-expected.txt:
        * fast/events/ios/rotation/zz-no-rotation.html:

2017-05-06  Chris Dumez  <cdumez@apple.com>

        Unreviewed, rolling out r216333.

        Caused layout test failures

        Reverted changeset:

        "Implement the concept of cookie-averse document"
        https://bugs.webkit.org/show_bug.cgi?id=171746
        http://trac.webkit.org/changeset/216333

2017-05-06  Chris Dumez  <cdumez@apple.com>

        Implement the concept of cookie-averse document
        https://bugs.webkit.org/show_bug.cgi?id=171746
        <rdar://problem/32004466>

        Reviewed by Sam Weinig.

        Add layout test coverage.

        * fast/cookies/cookie-averse-document-expected.txt: Added.
        * fast/cookies/cookie-averse-document.html: Added.

2017-05-06  Myles C. Maxfield  <mmaxfield@apple.com>

        REGERSSION(r213499): Emoji with Fitzpatrick modifiers are drawn as two separate glyphs
        https://bugs.webkit.org/show_bug.cgi?id=171750
        <rdar://problem/31122612>

        Reviewed by Zalan Bujtas.

        * fast/text/fitzpatrick-combination-expected.html: Added.
        * fast/text/fitzpatrick-combination.html: Added.

2017-05-05  Zalan Bujtas  <zalan@apple.com>

        Renderers being destroyed should not be added to AX's deferred list.
        https://bugs.webkit.org/show_bug.cgi?id=171768
        <rdar://problem/31955660>

        Reviewed by Simon Fraser.

        * accessibility/crash-when-renderers-are-added-back-to-deferred-list-expected.txt: Added.
        * accessibility/crash-when-renderers-are-added-back-to-deferred-list.html: Added.

2017-05-05  Matt Lewis  <jlewis3@apple.com>

        Mark compositing/tiling/non-active-window-tiles-size.html as flaky
        https://bugs.webkit.org/show_bug.cgi?id=171763

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-05  Oliver Hunt  <oliver@apple.com>

        Move trivial String prototype functions to JS builtins
        https://bugs.webkit.org/show_bug.cgi?id=171737

        Reviewed by Saam Barati.

        Updated output

        * js/dom/string-anchor-expected.txt:
        * js/dom/string-anchor.html:
        * js/dom/string-fontcolor-expected.txt:
        * js/dom/string-fontcolor.html:
        * js/dom/string-fontsize-expected.txt:
        * js/dom/string-fontsize.html:
        * js/dom/string-link-expected.txt:
        * js/dom/string-link.html:

2017-05-05  Dean Jackson  <dino@apple.com>

        Restrict SVG filters to accessible security origins
        https://bugs.webkit.org/show_bug.cgi?id=118689
        <rdar://problem/27362159>

        Reviewed by Brent Fulgham.

        Add a test that shows safe frames, unsafe frames, and
        then a safe frame that itself has an unsafe frame, to
        show that the security requirements are being forwarded
        down the tree.

        * http/tests/css/filters-on-iframes-expected.html: Added.
        * http/tests/css/filters-on-iframes.html: Added.
        * http/tests/css/resources/blank.html: Added.
        * http/tests/css/resources/references-external.html: Added.
        * http/tests/css/resources/solid-red.html: Added.

2017-05-05  Simon Fraser  <simon.fraser@apple.com>

        Make it possible to test rotation in iOS WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=171755

        Reviewed by Tim Horton.

        Two rotation tests and one that comes last to ensure that the device was not left in a rotated state.

        * fast/events/ios/rotation/basic-rotation-expected.txt: Added.
        * fast/events/ios/rotation/basic-rotation.html: Added.
        * fast/events/ios/rotation/safari-like-rotation-expected.txt: Added.
        * fast/events/ios/rotation/safari-like-rotation.html: Added.
        * fast/events/ios/rotation/zz-no-rotation-expected.txt: Added.
        * fast/events/ios/rotation/zz-no-rotation.html: Added.

2017-05-05  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/loading/resourceLoadStatistics/prevalent-resource-without-user-interaction.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171756

        Unreviewed test gardening.

        * platform/wk2/TestExpectations:

2017-05-05  Matt Lewis  <jlewis3@apple.com>

        Mark test http/tests/security/module-correct-mime-types.html slow.
        https://bugs.webkit.org/show_bug.cgi?id=164960

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-05  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r216275.

        This change broke internal builds.

        Reverted changeset:

        "[Cocoa] CTFontDescriptorCreateMatchingFontDescriptor() is not
        case insensitive"
        https://bugs.webkit.org/show_bug.cgi?id=171636
        http://trac.webkit.org/changeset/216275

2017-05-05  Myles C. Maxfield  <mmaxfield@apple.com>

        [Cocoa] CTFontDescriptorCreateMatchingFontDescriptor() is not case insensitive
        https://bugs.webkit.org/show_bug.cgi?id=171636
        <rdar://problem/30811218>

        Reviewed by Dean Jackson.

        * fast/text/lastResort-expected.html: Added.
        * fast/text/lastResort.html: Added.

2017-05-05  Ryan Haddad  <ryanhaddad@apple.com>

        Unskip media/click-placeholder-not-pausing.html.

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-05  Joseph Pecoraro  <pecoraro@apple.com>

        REGRESSION: LayoutTest streams/reference-implementation/readable-stream-templated.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=171580
        <rdar://problem/32009647>

        Rubber-stamped by Alexey Proskuryakov.

        * TestExpectations:
        * streams/reference-implementation/pipe-to-expected.txt:
        Rebaseline expectations. This test was previously flakey so the results were
        missed unless the test was run with --force.

        * streams/reference-implementation/readable-stream-templated-expected.txt:
        * streams/reference-implementation/readable-stream-templated.html:
        Silence unhandled rejections. This test did not expect unhandled promise
        rejections to affect test results, so ignore them.

2017-05-05  Joseph Pecoraro  <pecoraro@apple.com>

        [macOS Sierra] LayoutTest http/tests/inspector/network/resource-request-headers.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=170702
        <rdar://problem/31616643>

        Rubber-stamped by Brian Burg.

        * platform/mac-wk2/TestExpectations:
        * http/tests/inspector/network/resource-request-headers.html:
        Make this test unflakey by ensuring we wait for the load to complete.

2017-05-05  Chris Dumez  <cdumez@apple.com>

        Attr Nodes should not have children
        https://bugs.webkit.org/show_bug.cgi?id=171688
        <rdar://problem/31998412>

        Reviewed by Andreas Kling.

        * fast/dom/Attr/cannot-have-children-expected.txt: Added.
        * fast/dom/Attr/cannot-have-children.html: Added.
        Add layout test coverage. I have verified that this test passes in both
        Firefox and Chrome.

        * dom/html/level1/*: Removed legacy / outdated tests.
        * dom/xhtml/level1/*: Removed legacy / outdated tests.

        * fast/dom/Attr/child-nodes-cache-expected.txt: Removed.
        * fast/dom/Attr/child-nodes-cache.html: Removed.
        * fast/dom/Attr/child-nodes-length-cache-expected.txt: Removed.
        * fast/dom/Attr/child-nodes-length-cache.html: Removed.
        * fast/dom/Attr/invalidate-nodelist-after-attr-setvalue-expected.txt: Removed.
        * fast/dom/Attr/invalidate-nodelist-after-attr-setvalue.html: Removed.
        * fast/dom/attribute-change-on-mutate-expected.txt: Removed.
        * fast/dom/attribute-change-on-mutate.html: Removed.
        * svg/custom/image-with-attr-change-after-delete-crash-expected.txt: Removed.
        * svg/custom/image-with-attr-change-after-delete-crash.html: Removed.
        * traversal/moz-bug590771-expected.txt: Removed.
        * traversal/moz-bug590771.html: Removed.
        Removed some outdated tests.

        * fast/custom-elements/reactions-for-webkit-extensions-expected.txt:
        * fast/custom-elements/reactions-for-webkit-extensions.html:
        * fast/dom/Attr/change-id-via-attr-node-value-expected.txt:
        * fast/dom/Attr/change-id-via-attr-node-value.html:
        * fast/dom/Element/normalize-crash.html:
        * fast/dom/Element/normalize-crash2.html:
        * fast/dom/HTMLLinkElement/event-while-removing-attribute-expected.txt:
        * fast/dom/HTMLLinkElement/event-while-removing-attribute.html:
        * fast/dom/MutationObserver/observe-attributes-expected.txt:
        * fast/dom/MutationObserver/observe-attributes.html:
        * fast/dom/import-attribute-node.html:
        * fast/dom/insertedIntoDocument-child.html:
        * fast/dom/insertedIntoDocument-sibling.html:
        * fast/dom/no-assert-for-malformed-js-url-attribute-expected.txt:
        * fast/dom/no-assert-for-malformed-js-url-attribute.html:
        * fast/dom/normalize-attributes-mutation-event-crash.html:
        * fast/dom/serialize-nodes.xhtml:
        * http/tests/security/xss-DENIED-iframe-src-alias-expected.txt:
        Update existing tests so they stop relying on Attr Node having Text children.

2017-05-05  Ryan Haddad  <ryanhaddad@apple.com>

        Mark w3c test persisted-user-state-restoration/scroll-restoration-fragment-scrolling-cross-origin.html as flaky on mac-wk1.
        https://bugs.webkit.org/show_bug.cgi?id=161360

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-05-05  Matt Lewis  <jlewis3@apple.com>

        Mark 2 webrtc test as failing.
        https://bugs.webkit.org/show_bug.cgi?id=171728

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-05  Chris Dumez  <cdumez@apple.com>

        Refactor / Clean up Element.idl
        https://bugs.webkit.org/show_bug.cgi?id=171734

        Reviewed by Sam Weinig.

        Rebaseline a couple of tests due to Element properties being enumerated in a slightly
        different order and because exception messages have changed slightly.

        * fast/dom/Element/attr-param-typechecking-expected.txt:
        * js/dom/dom-static-property-for-in-iteration-expected.txt:

2017-05-05  Jeremy Jones  <jeremyj@apple.com>

        REGRESSION (r215951): LayoutTest media/modern-media-controls/placard-support/placard-support-pip.html is a flaky crash
        https://bugs.webkit.org/show_bug.cgi?id=171610
        <rdar://problem/31976820>

        Reviewed by Eric Carlson.

        enable test: media/modern-media-controls/pip-support/pip-support-click.html

        * platform/mac-wk1/TestExpectations:

2017-05-05  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Update expectations of tests failing after GST upgrade to 1.10.4.

        * platform/gtk/TestExpectations:

2017-05-05  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline several tests.

        * platform/gtk/editing/simple-line-layout-caret-is-gone-expected.txt: Added.
        * platform/gtk/fast/repaint/mutate-non-visible-expected.txt: Added.
        * platform/gtk/fast/visual-viewport/rubberbanding-viewport-rects-extended-background-expected.txt:
        * platform/gtk/http/tests/security/video-cross-origin-accessfailure-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/fetch/http-cache/cc-request-expected.txt: Added.

2017-05-05  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed GTK+ gardening.

        * platform/gtk/TestExpectations: Enable already-passing Web Crypto layout tests
        for the GTK+ port. Also update expectations for the imported W3C Web Crypto tests.

2017-05-04  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r216206.
        https://bugs.webkit.org/show_bug.cgi?id=171714

        Multiple LayoutTests crashing in Document::page() (Requested
        by ap on #webkit).

        Reverted changeset:

        "Remove support for legacy Notifications"
        https://bugs.webkit.org/show_bug.cgi?id=171487
        http://trac.webkit.org/changeset/216206

2017-05-04  Chris Dumez  <cdumez@apple.com>

        Element.slot should be marked as [Unscopable]
        https://bugs.webkit.org/show_bug.cgi?id=171683

        Reviewed by Darin Adler.

        Add layout test coverage. This test is passing in Firefox and Chrome.

        * fast/shadow-dom/Element-slot-unscopable-expected.txt: Added.
        * fast/shadow-dom/Element-slot-unscopable.html: Added.

2017-05-04  Said Abou-Hallawa  <sabouhallawa@apple.com>

        Change the asynchronous image decoding tests to use the event webkitImageFrameReady
        https://bugs.webkit.org/show_bug.cgi?id=171634

        Reviewed by Simon Fraser.

        To test the async image decoding reliably we need to do the following:

        -- Make sure to load the image before setting its src to the element.
        -- Call document.body.offsetHeight to force layout.
        -- Call testRunner.display() to force the first paint.
        -- Use the webkitImageFrameReady to reliably know when an image frame is ready.
        -- When webkitImageFrameReady is fired call testRunner.notifyDone(). This
           will force the second paint.

        * fast/images/async-image-background-image-repeated.html:
        * fast/images/async-image-background-image.html:
        * fast/images/sprite-sheet-image-draw.html:

2017-05-04  Matt Lewis  <jlewis3@apple.com>

        Mark webrtc/libwebrtc/descriptionGetters.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171703

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-04  Said Abou-Hallawa  <sabouhallawa@apple.com>

        Rename testRunner.displayAndTrackRepaints() to testRunner.displayAndTrackRepaints()
        https://bugs.webkit.org/show_bug.cgi?id=171641

        Reviewed by Simon Fraser.

        Replace all the calls to testRunner.displayAndTrackRepaints() by testRunner.displayAndTrackRepaints()
        Replace all the calls to testRunner.displayInvalidatedRegion() by
        testRunner.displayAndTrackRepaints() since the former is a copy of the later.

        * compositing/clip-change.html:
        * compositing/geometry/foreground-offset-change.html:
        * compositing/geometry/limit-layer-bounds-transformed-overflow.html:
        * compositing/iframes/become-composited-nested-iframes.html:
        * compositing/iframes/become-overlapped-iframe.html:
        * compositing/iframes/connect-compositing-iframe-delayed.html:
        * compositing/iframes/connect-compositing-iframe.html:
        * compositing/iframes/connect-compositing-iframe2.html:
        * compositing/iframes/connect-compositing-iframe3.html:
        * compositing/iframes/enter-compositing-iframe.html:
        * compositing/iframes/iframe-content-flipping.html:
        * compositing/iframes/iframe-resize.html:
        * compositing/iframes/iframe-size-to-zero.html:
        * compositing/iframes/iframe-src-change.html:
        * compositing/iframes/invisible-nested-iframe-hide.html:
        * compositing/iframes/invisible-nested-iframe-show.html:
        * compositing/iframes/leave-compositing-iframe.html:
        * compositing/iframes/overlapped-iframe-iframe.html:
        * compositing/iframes/overlapped-iframe.html:
        * compositing/iframes/overlapped-nested-iframes.html:
        * compositing/iframes/repaint-after-losing-scrollbars.html:
        * compositing/iframes/resources/fixed-position-subframe.html:
        * compositing/iframes/resources/fixed-position-transformed-subframe.html:
        * compositing/iframes/resources/scrollgrandchild-inner.html:
        * compositing/iframes/scrolling-iframe.html:
        * compositing/overflow/content-gains-scrollbars.html:
        * compositing/overflow/content-loses-scrollbars.html:
        * compositing/overflow/do-not-paint-outline-into-composited-scrolling-contents.html:
        * compositing/overflow/overflow-scrollbar-layers.html:
        * compositing/overflow/paint-neg-z-order-descendants-into-scrolling-contents-layer.html:
        * compositing/overflow/repaint-after-losing-scrollbars.html:
        * compositing/patterns/direct-pattern-compositing-add-text-expected.html:
        * compositing/patterns/direct-pattern-compositing-add-text.html:
        * compositing/patterns/direct-pattern-compositing-change-expected.html:
        * compositing/patterns/direct-pattern-compositing-change.html:
        * compositing/patterns/direct-pattern-compositing-load-expected.html:
        * compositing/patterns/direct-pattern-compositing-load.html:
        * compositing/plugins/invalidate_rect.html:
        * compositing/repaint/iframes/composited-iframe-with-fixed-background-doc-repaint.html:
        * compositing/repaint/iframes/compositing-iframe-scroll-repaint.html:
        * compositing/repaint/iframes/compositing-iframe-with-fixed-background-doc-repaint.html:
        * compositing/repaint/newly-composited-on-scroll.html:
        * compositing/repaint/newly-composited-repaint-rect.html:
        * compositing/repaint/page-scale-repaint.html:
        * compositing/repaint/requires-backing-repaint.html:
        * compositing/repaint/transform-style-change.html:
        * compositing/rtl/rtl-overflow-invalidation.html:
        * compositing/scroll-painted-composited-content.html:
        * compositing/tiling/huge-layer-resize.html:
        * compositing/video-page-visibility.html:
        * compositing/video/video-with-invalid-source.html:
        * compositing/webgl/webgl-repaint.html:
        * css3/filters/multiple-filters-invalidation.html:
        * css3/flexbox/repaint-column-reverse.html:
        * css3/flexbox/repaint-during-resize-no-flex.html:
        * css3/flexbox/repaint-rtl-column.html:
        * css3/flexbox/repaint.html:
        * displaylists/canvas-display-list.html:
        * displaylists/resources/dump-target-display-list.js:
        (doTest):
        * displaylists/resources/dump-target-replay-list.js:
        (doTest):
        * fast/animation/request-animation-frame-detach-element.html:
        * fast/animation/request-animation-frame-detach-element2.html:
        * fast/animation/request-animation-frame-during-modal.html:
        * fast/animation/request-animation-frame-iframe.html:
        * fast/animation/request-animation-frame-iframe2.html:
        * fast/animation/script-tests/request-animation-frame-cancel.js:
        * fast/animation/script-tests/request-animation-frame-cancel2.js:
        * fast/animation/script-tests/request-animation-frame-disabled.js:
        * fast/animation/script-tests/request-animation-frame-prefix.js:
        (window.webkitRequestAnimationFrame):
        (window.testRunner.window.setTimeout):
        * fast/animation/script-tests/request-animation-frame-time-unit.js:
        (window.requestAnimationFrame):
        * fast/animation/script-tests/request-animation-frame-timestamps-advance.js:
        (window.requestAnimationFrame):
        (window.testRunner.window.setTimeout):
        * fast/animation/script-tests/request-animation-frame-timestamps.js:
        * fast/animation/script-tests/request-animation-frame-within-callback.js:
        * fast/animation/script-tests/request-animation-frame.js:
        * fast/backgrounds/obscured-background-child-style-change-expected.html:
        * fast/backgrounds/obscured-background-child-style-change.html:
        * fast/backgrounds/solid-color-context-restore.html:
        * fast/canvas/canvas-as-image-incremental-repaint.html:
        * fast/canvas/canvas-incremental-repaint-2.html:
        * fast/canvas/canvas-incremental-repaint.html:
        * fast/canvas/canvas-resize-after-paint.html:
        * fast/canvas/resources/repaint.js:
        (runRepaintTest):
        * fast/canvas/script-tests/canvas-imageSmoothingEnabled-repaint.js:
        (TestControllerPaint):
        * fast/canvas/webgl/canvas-test.html:
        * fast/canvas/webgl/webgl-layer-update.html:
        * fast/css/pseudostyle-anonymous-text.html:
        * fast/css/relative-positioned-block-crash.html:
        * fast/dom/Window/post-message-crash.html:
        * fast/dom/Window/web-timing-minimal-performance-now.html:
        * fast/dynamic/containing-block-change.html:
        * fast/dynamic/layer-no-longer-paginated.html:
        * fast/events/touch/gesture/pad-gesture-cancel.js:
        * fast/events/touch/gesture/pad-gesture-fling.js:
        * fast/forms/hidden-listbox.html:
        * fast/forms/listbox-clip.html:
        * fast/frames/inline-object-inside-frameset.html:
        * fast/frames/transparent-scrollbar.html:
        * fast/images/animated-background-image-crash.html:
        * fast/layers/add-layer-with-nested-stacking.html:
        * fast/layers/inline-dirty-z-order-lists.html:
        * fast/layers/layer-content-visibility-change.html:
        * fast/layers/nested-layers-1.html:
        * fast/layers/nested-layers-2.html:
        * fast/layers/nested-layers-3.html:
        * fast/layers/nested-layers-4.html:
        * fast/layers/remove-layer-with-nested-stacking.html:
        * fast/overflow/hidden-scrollbar-resize.html:
        * fast/reflections/inline-crash.html:
        * fast/repaint/animation-after-layer-scroll.html:
        * fast/repaint/background-shorthand-with-gradient-and-height-changes.html:
        * fast/repaint/fixed-child-move-after-scroll.html:
        * fast/repaint/fixed-child-of-fixed-move-after-scroll.html:
        * fast/repaint/fixed-child-of-transformed-move-after-scroll.html:
        * fast/repaint/fixed-move-after-scroll.html:
        * fast/repaint/no-animation-outside-viewport-subframe.html:
        * fast/repaint/no-animation-outside-viewport.html:
        * fast/repaint/obscured-background-no-repaint.html:
        * fast/repaint/overflow-hidden-in-overflow-hidden-scrolled.html:
        * fast/repaint/renderer-destruction-by-invalidateSelection-crash.html:
        * fast/repaint/repaint-during-scroll-with-zoom.html:
        * fast/repaint/resources/fixed-move-after-keyboard-scroll-iframe.html:
        * fast/repaint/resources/iframe-scroll-repaint-iframe.html:
        * fast/repaint/resources/line-flow-with-floats.js:
        (beginTest):
        * fast/repaint/resources/repaint.js:
        (runRepaintTest):
        * fast/repaint/table-overflow-hidden-in-overflow-hidden-scrolled.html:
        * fast/replaced/width100percent-textarea.html:
        * fast/scrolling/scrollbar-tickmarks-hittest.html:
        * fast/table/border-collapsing/cached-69296.html:
        * fast/table/border-collapsing/cached-cell-append.html:
        * fast/table/border-collapsing/cached-cell-remove.html:
        * fast/table/border-collapsing/cached-change-cell-border-color.html:
        * fast/table/border-collapsing/cached-change-cell-border-width.html:
        * fast/table/border-collapsing/cached-change-cell-sl-border-color.html:
        * fast/table/border-collapsing/cached-change-col-border-color.html:
        * fast/table/border-collapsing/cached-change-col-border-width.html:
        * fast/table/border-collapsing/cached-change-colgroup-border-color.html:
        * fast/table/border-collapsing/cached-change-colgroup-border-width.html:
        * fast/table/border-collapsing/cached-change-row-border-color.html:
        * fast/table/border-collapsing/cached-change-row-border-width.html:
        * fast/table/border-collapsing/cached-change-table-border-color.html:
        * fast/table/border-collapsing/cached-change-table-border-width.html:
        * fast/table/border-collapsing/cached-change-tbody-border-color.html:
        * fast/table/border-collapsing/cached-change-tbody-border-width.html:
        * fast/table/empty-section-crash.html:
        * fast/text/font-initial.html:
        * fast/text/international/harfbuzz-runs-with-no-glyph.html:
        * fast/text/text-shadow-extreme-value.html:
        * http/tests/misc/slow-loading-image-in-pattern.html:
        * media/audio-repaint.html:
        * media/media-document-audio-repaint.html:
        * plugins/windowless_plugin_paint_test.html:
        * scrollbars/scrollbar-percent-padding-crash.html:
        * svg/custom/non-scaling-stroke-update.svg:
        * svg/custom/stale-resource-data-crash.svg:

2017-05-04  Chris Dumez  <cdumez@apple.com>

        Reformat / Clean up Node.idl to match the specification
        https://bugs.webkit.org/show_bug.cgi?id=171686

        Reviewed by Sam Weinig.

        Rebaseline existing test now that the Node properties are enumerated in a
        slightly different order.

        * js/dom/dom-static-property-for-in-iteration-expected.txt:

2017-05-04  Sam Weinig  <sam@webkit.org>

        Remove support for legacy Notifications
        https://bugs.webkit.org/show_bug.cgi?id=171487

        Reviewed by Jon Lee.

        - Remove fast/notifications/. It was skipped on all platforms and use legacy Notifications API.
        - Remove http/notifications/legacy. It tested the legacy API.
        - Update two tests in fast/history to use the non-legacy API to test page cache + notifications.
        - Update TestExpectations for removals.

        * TestExpectations:
        * platform/gtk/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:
        * platform/win/TestExpectations:
        * fast/history/page-cache-notification-non-suspendable.html:
        * fast/history/page-cache-notification-suspendable.html:
        * fast/notifications: Removed.
        * fast/notifications/notification-after-close-expected.txt: Removed.
        * fast/notifications/notification-after-close.html: Removed.
        * fast/notifications/notification-permisssion-deletable-expected.txt: Removed.
        * fast/notifications/notification-permisssion-deletable.html: Removed.
        * fast/notifications/notifications-cancel-request-permission-expected.txt: Removed.
        * fast/notifications/notifications-cancel-request-permission.html: Removed.
        * fast/notifications/notifications-check-permission-expected.txt: Removed.
        * fast/notifications/notifications-check-permission.html: Removed.
        * fast/notifications/notifications-click-event-expected.txt: Removed.
        * fast/notifications/notifications-click-event-focus-expected.txt: Removed.
        * fast/notifications/notifications-click-event-focus.html: Removed.
        * fast/notifications/notifications-click-event.html: Removed.
        * fast/notifications/notifications-constructor-request-permission-expected.txt: Removed.
        * fast/notifications/notifications-constructor-request-permission.html: Removed.
        * fast/notifications/notifications-constructor-with-permission-expected.txt: Removed.
        * fast/notifications/notifications-constructor-with-permission.html: Removed.
        * fast/notifications/notifications-constructor-without-permission-expected.txt: Removed.
        * fast/notifications/notifications-constructor-without-permission.html: Removed.
        * fast/notifications/notifications-display-close-events-expected.txt: Removed.
        * fast/notifications/notifications-display-close-events.html: Removed.
        * fast/notifications/notifications-document-close-crash-expected.txt: Removed.
        * fast/notifications/notifications-document-close-crash.html: Removed.
        * fast/notifications/notifications-event-stop-propagation-expected.txt: Removed.
        * fast/notifications/notifications-event-stop-propagation.html: Removed.
        * fast/notifications/notifications-multi-events-expected.txt: Removed.
        * fast/notifications/notifications-multi-events.html: Removed.
        * fast/notifications/notifications-no-icon-expected.txt: Removed.
        * fast/notifications/notifications-no-icon.html: Removed.
        * fast/notifications/notifications-permission-expected.txt: Removed.
        * fast/notifications/notifications-permission.html: Removed.
        * fast/notifications/notifications-replace-expected.txt: Removed.
        * fast/notifications/notifications-replace.html: Removed.
        * fast/notifications/notifications-request-permission-expected.txt: Removed.
        * fast/notifications/notifications-request-permission-optional-expected.txt: Removed.
        * fast/notifications/notifications-request-permission-optional.html: Removed.
        * fast/notifications/notifications-request-permission.html: Removed.
        * fast/notifications/notifications-rtl-expected.txt: Removed.
        * fast/notifications/notifications-rtl.html: Removed.
        * fast/notifications/notifications-sandbox-permission-expected.txt: Removed.
        * fast/notifications/notifications-sandbox-permission.html: Removed.
        * fast/notifications/notifications-window-close-crash-expected.txt: Removed.
        * fast/notifications/notifications-window-close-crash.html: Removed.
        * fast/notifications/notifications-with-permission-expected.txt: Removed.
        * fast/notifications/notifications-with-permission.html: Removed.
        * fast/notifications/notifications-without-permission-expected.txt: Removed.
        * fast/notifications/notifications-without-permission.html: Removed.
        * fast/notifications/request-notification-permission-while-reloading-expected.txt: Removed.
        * fast/notifications/request-notification-permission-while-reloading.html: Removed.
        * fast/notifications/resources: Removed.
        * fast/notifications/resources/notifications-cancel-request-permission.html: Removed.
        * fast/notifications/resources/notifications-iframe.html: Removed.
        * http/tests/notifications/legacy: Removed.
        * http/tests/notifications/legacy/double-show-expected.txt: Removed.
        * http/tests/notifications/legacy/double-show.html: Removed.
        * http/tests/notifications/legacy/events-expected.txt: Removed.
        * http/tests/notifications/legacy/events.html: Removed.
        * http/tests/notifications/legacy/notification-request-permission-then-navigate-expected.txt: Removed.
        * http/tests/notifications/legacy/notification-request-permission-then-navigate.html: Removed.
        * http/tests/notifications/legacy/request-expected.txt: Removed.
        * http/tests/notifications/legacy/request-no-callback-expected.txt: Removed.
        * http/tests/notifications/legacy/request-no-callback.html: Removed.
        * http/tests/notifications/legacy/request.html: Removed.
        * http/tests/notifications/legacy/resources: Removed.
        * http/tests/notifications/legacy/resources/notify-opener-done.html: Removed.
        * http/tests/notifications/legacy/resources/request-permission-then-navigate.html: Removed.
        * http/tests/notifications/legacy/show-expected.txt: Removed.
        * http/tests/notifications/legacy/show.html: Removed.
        * http/tests/notifications/legacy/window-show-on-click-expected.txt: Removed.
        * http/tests/notifications/legacy/window-show-on-click.html: Removed.

2017-05-04  Matt Lewis  <jlewis3@apple.com>

        Marked http/tests/xmlhttprequest/workers/methods-async.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=160368

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-04  Antti Koivisto  <antti@apple.com>

        REGRESSION (Safari 10.1): When 'transition' contains -ms-transform, transform-origin is also transitioned
        https://bugs.webkit.org/show_bug.cgi?id=171250
        <rdar://problem/31827243>

        Reviewed by Geoffrey Garen.

        * transitions/transition-unknown-property-ignore-expected.txt: Added.
        * transitions/transition-unknown-property-ignore.html: Added.
        * transitions/transitions-parsing-expected.txt:
        * transitions/transitions-parsing.html:

            Update the roundtrip expectations for unknown properties. The new results match Blink and Gecko.

2017-05-04  Chris Dumez  <cdumez@apple.com>

        Reformat / clean up Event.idl
        https://bugs.webkit.org/show_bug.cgi?id=171675

        Reviewed by Sam Weinig.

        Rebaseline test now that the Event properties are in a slightly different order.

        * inspector/model/remote-object-get-properties-expected.txt:

2017-05-04  Daniel Bates  <dabates@apple.com>

        importScripts() should respect X-Content-Type-Options: nosniff
        https://bugs.webkit.org/show_bug.cgi?id=171248
        <rdar://problem/31819023>

        Reviewed by Andy Estes.

        Unskip web-platform-tests/fetch/nosniff/importscripts as it now passes.

        * TestExpectations:

2017-05-04  Said Abou-Hallawa  <sabouhallawa@apple.com>

        Unreviewed: Replace Windows line ending (CRLF) by Unix line ending (CR).

        * plugins/windowless_plugin_paint_test.html:

2017-05-04  Said Abou-Hallawa  <sabouhallawa@apple.com>

        Unreviewed: Replace Windows line ending (CRLF) by Unix line ending (CR).

        * compositing/video/video-with-invalid-source.html:

2017-05-04  Ryan Haddad  <ryanhaddad@apple.com>

        Skip media/modern-media-controls/pip-support/pip-support-click.html on mac-wk1.
        https://bugs.webkit.org/show_bug.cgi?id=171610

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-05-04  Dave Hyatt  <hyatt@apple.com>

        REGRESSION(STP): rgb() with calc() containing variables doesn't work
        https://bugs.webkit.org/show_bug.cgi?id=169939

        Reviewed by Zalan Bujtas.

        * fast/css/variables/calc-float-to-int-expected.html: Added.
        * fast/css/variables/calc-float-to-int.html: Added.

2017-05-04  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed gardening. Update main expectations of http/tests/inspector/network/resource-request-headers.html.

        And add platform specific results for mac-wk2.

        * http/tests/inspector/network/resource-request-headers-expected.txt:
        * platform/mac-wk2/http/tests/inspector/network/resource-request-headers-expected.txt: Copied from LayoutTests/http/tests/inspector/network/resource-request-headers-expected.txt.

2017-05-03  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Remove all statistics for modifiedSince website data removals
        https://bugs.webkit.org/show_bug.cgi?id=171584
        <rdar://problem/24702576>

        Reviewed by Brent Fulgham.

        * http/tests/loading/resourceLoadStatistics/clear-in-memory-and-persistent-store-one-hour-expected.txt: Added.
        * http/tests/loading/resourceLoadStatistics/clear-in-memory-and-persistent-store-one-hour.html: Added.

2017-05-03  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: aria-rowspan value should be ignored if td/th rowspan value is provided
        https://bugs.webkit.org/show_bug.cgi?id=171214

        Reviewed by Chris Fleizach.

        * accessibility/aria-cellspans-with-native-cellspans-expected.txt: Added.
        * accessibility/aria-cellspans-with-native-cellspans.html: Added.

2017-05-03  Matt Lewis  <jlewis3@apple.com>

        Mark http/tests/xmlhttprequest/methods.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171638

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-03  Ryan Haddad  <ryanhaddad@apple.com>

        Mark scrollingcoordinator/ios/nested-fixed-layer-positions.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171628

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-03  Zalan Bujtas  <zalan@apple.com>

        SearchInputType could end up with a mismatched renderer.
        https://bugs.webkit.org/show_bug.cgi?id=171547
        <rdar://problem/31935047>

        Reviewed by Antti Koivisto.

        * fast/forms/change-input-type-and-submit-form-crash-expected.txt: Added.
        * fast/forms/change-input-type-and-submit-form-crash.html: Added.

2017-05-03  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/slider/slider-styles.html as flaky on mac-wk1.
        https://bugs.webkit.org/show_bug.cgi?id=171629

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-05-03  Joseph Pecoraro  <pecoraro@apple.com>

        LayoutTest http/tests/inspector/network/fetch-network-data.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=166038
        <rdar://problem/29488489>

        Reviewed by Matt Baker.

        * platform/mac/TestExpectations:
        * http/tests/inspector/network/fetch-network-data.html:
        * http/tests/inspector/network/xhr-request-data-encoded-correctly.html:
        Use singleFireEventListener instead of awaitEvent so that the follow-up event handlers
        can be added synchronously instead of in a microtask. When the microtask happened later
        than other incoming events then the follow-up handlers would have been added too late.

2017-05-03  Matt Lewis  <jlewis3@apple.com>

        Mark imported/w3c/web-platform-tests/html/webappapis/timers/negative-settimeout.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170699.

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-03  Simon Fraser  <simon.fraser@apple.com>

        Have WKWebView call _updateVisibleContentRects for the current transaction if possible, rather than always delaying
        https://bugs.webkit.org/show_bug.cgi?id=171619
        https://bugs.webkit.org/show_bug.cgi?id=170153

        Reviewed by Tim Horton.

        These tests need to wait a bit for the scrolling state of the document to be updated.

        * fast/scrolling/ios/touch-scroll-pointer-events-none.html:
        * fast/scrolling/ios/touch-scroll-visibility-hidden.html:
        * platform/ios-wk2/TestExpectations:

2017-05-03  Yoav Weiss  <yoav@yoav.ws>

        Link preload HTMLPreloadScanner support
        https://bugs.webkit.org/show_bug.cgi?id=170747

        Reviewed by Youenn Fablet.

        * http/tests/preload/preloadscanner_download_resources-expected.txt: Added.
        * http/tests/preload/preloadscanner_download_resources.html: Added.

2017-05-03  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/preload/single_download_preload.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171331

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-03  Matt Lewis  <jlewis3@apple.com>

        Mark perf/object-keys.html as flaky
        https://bugs.webkit.org/show_bug.cgi?id=171617

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-03  Keith Miller  <keith_miller@apple.com>

        Different behaviour with the .sort(callback) method (unlike Firefox & Chrome)
        https://bugs.webkit.org/show_bug.cgi?id=47825

        Reviewed by Saam Barati.

        Fix broken test.

        * http/tests/inspector/worker/blob-script-with-cross-domain-imported-scripts-expected.txt:

2017-05-03  Matt Lewis  <jlewis3@apple.com>

        Mark http/tests/xmlhttprequest/supported-xml-content-types.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171613

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-03  Nan Wang  <n_wang@apple.com>

        AX: VO skips cells after cell with aria-colspan
        https://bugs.webkit.org/show_bug.cgi?id=171579

        Reviewed by Chris Fleizach.

        * accessibility/mac/aria-grid-column-span-expected.txt: Added.
        * accessibility/mac/aria-grid-column-span.html: Added.

2017-05-03  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/websocket/tests/hybi/inspector/binary.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171553

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-03  Daniel Bates  <dabates@apple.com>

        Detach frame from document when entering page cache
        https://bugs.webkit.org/show_bug.cgi?id=166774
        <rdar://problem/29904368>

        Reviewed by Chris Dumez.

        * TestExpectations: Unskip tests.
        * fast/history/page-cache-after-window-open-expected.txt: Update expected result.
        * fast/history/page-cache-after-window-open.html: Ditto.
        * fast/history/page-cache-with-opener-expected.txt: Ditto.
        * fast/history/page-cache-with-opener.html: Update test given its new expected behavior.
        * fast/history/resources/page-cache-window-with-opener.html: Ditto.
        * http/tests/security/xss-DENIED-click-and-form-submission-from-inactive-domwindow-expected.txt: Added.
        * http/tests/security/xss-DENIED-click-and-form-submission-from-inactive-domwindow.html: Added.
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window-expected.txt: Added.
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window.html: Added.
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2-expected.txt: Added.
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2.html: Added.
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window3-expected.txt: Added.
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window3.html: Added.

2017-05-03  Matt Lewis  <jlewis3@apple.com>

        Marking three imported/w3c/web-platform-tests/webrtc test as flaky failures.
        https://bugs.webkit.org/show_bug.cgi?id=171605

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-03  Matt Lewis  <jlewis3@apple.com>

        Marked test http/tests/local/blob/send-sliced-data-blob.html as flaky failure and timeout.
        https://bugs.webkit.org/show_bug.cgi?id=171564

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-03  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: Treat cells with ARIA table cell properties as cells
        https://bugs.webkit.org/show_bug.cgi?id=171178

        Reviewed by Chris Fleizach.

        * accessibility/minimal-table-with-aria-is-data-table-expected.txt: Added.
        * accessibility/minimal-table-with-aria-is-data-table.html: Added.
        * platform/gtk/accessibility/minimal-table-with-aria-is-data-table-expected.txt: Added.

2017-05-03  Andy VanWagoner  <thetalecrafter@gmail.com>

        [INTL] Support dashed values in unicode locale extensions
        https://bugs.webkit.org/show_bug.cgi?id=171480

        Reviewed by JF Bastien.

        Added tests for calendar locale extensions that contain '-'.

        * js/intl-datetimeformat-expected.txt:
        * js/script-tests/intl-datetimeformat.js:

2017-05-03  Daniel Bates  <dabates@apple.com>

        Abandon the current load once the provisional loader detaches from the frame
        https://bugs.webkit.org/show_bug.cgi?id=171577
        <rdar://problem/31581227>

        Reviewed by Brent Fulgham.

        * fast/loader/inner-iframe-loads-data-url-into-parent-on-unload-crash-expected.txt: Added.
        * fast/loader/inner-iframe-loads-data-url-into-parent-on-unload-crash.html: Added.

2017-05-03  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Update expectations of several tests.

        * platform/gtk/TestExpectations:

2017-05-03  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline inspector resource size tests.

        Libsoup doesn't provide the required information to fill all those size metrics.

        * platform/gtk/http/tests/inspector/network/resource-sizes-memory-cache-expected.txt: Added.
        * platform/gtk/http/tests/inspector/network/resource-sizes-network-expected.txt: Added.

2017-05-02  Simon Fraser  <simon.fraser@apple.com>

        Dynamically added position:fixed element is in the wrong place
        https://bugs.webkit.org/show_bug.cgi?id=170280
        rdar://problem/31374008

        Reviewed by Tim Horton.

        * scrollingcoordinator/ios/nested-fixed-layer-positions-expected.html: Added.
        * scrollingcoordinator/ios/nested-fixed-layer-positions.html: Added.

2017-05-02  Ryan Haddad  <ryanhaddad@apple.com>

        Move flaky expectation for svg/animations/getCurrentTime-pause-unpause.html ios-wk1 to ios TestExpectations file.

        Unreviewed test gardening.

        * platform/ios-wk1/TestExpectations:
        * platform/ios/TestExpectations:

2017-05-02  Ryan Haddad  <ryanhaddad@apple.com>

        Mark imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.worker.html as flaky on macOS.
        https://bugs.webkit.org/show_bug.cgi?id=170907

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-02  Zalan Bujtas  <zalan@apple.com>

        Defer AX cache update when text content changes until after layout is finished.
        https://bugs.webkit.org/show_bug.cgi?id=171429
        <rdar://problem/31885984>

        Reviewed by Simon Fraser.

        * accessibility/crash-while-adding-text-child-with-transform-expected.txt: Added.
        * accessibility/crash-while-adding-text-child-with-transform.html: Added.

2017-05-02  David Kilzer  <ddkilzer@apple.com>

        check-webkit-style should keep JavaScript test functions in sync
        <https://webkit.org/b/171424>

        Reviewed by Joseph Pecoraro.

        This change attempts to fix all whitespace issues in these two
        files (which are now identical and will be kept in sync by
        check-webkit-style):

            LayoutTests/http/tests/resources/js-test-pre.js
            LayoutTests/resources/js-test-pre.js

        It also syncs the implementation of shouldBe(), shouldNotBe(),
        shouldNotThrow() and shouldThrow() across the following files:

            JSTests/stress/resources/standalone-pre.js
            LayoutTests/http/tests/resources/js-test-pre.js
            LayoutTests/resources/js-test-pre.js
            LayoutTests/resources/js-test.js
            LayoutTests/resources/standalone-pre.js

        Only interesting (non-whitespace) changes are listed below.

        * http/tests/resources/js-test-pre.js: Copy from resources/js-test-pre.js.
        (shouldBe): Prefix 'exception' and 'quiet' variables with
        underscore.
        (shouldNotBe): Ditto.

        * resources/js-test-pre.js:
        (shouldBe): Prefix 'exception' and 'quiet' variables with
        underscore.
        (shouldNotBe): Ditto.

        * resources/js-test.js:
        (shouldBe): Prefix 'quiet' variable with underscore.  Use
        stringify() when printing '_bv' value.

        * resources/standalone-pre.js:
        (shouldBe): Prefix 'exception' and 'quiet' variables with
        underscore.
        (shouldNotBe): Ditto.

2017-05-02  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: Update implementation of aria-orientation
        https://bugs.webkit.org/show_bug.cgi?id=171166

        Reviewed by Chris Fleizach.

        Moved the mac aria-orientation.html test to the shared tests and add several
        new test cases to it. Update the orientation-related assertion in two tests
        to reflect the ARIA 1.1 behavior.

        * accessibility/aria-orientation-expected.txt: Renamed from LayoutTests/accessibility/mac/aria-orientation-expected.txt.
        * accessibility/aria-orientation.html: Renamed from LayoutTests/accessibility/mac/aria-orientation.html.
        * accessibility/mac/slider-supports-actions.html: Updated.
        * accessibility/gtk/combobox-descendants-orientation-crash-expected.txt: Updated.

2017-05-02  Myles C. Maxfield  <mmaxfield@apple.com>

        REGRESSION (r211382): Partial right-to-left text runs are painted at an offset (breaks Find indicators, Look Up, and custom ::selection style)
        https://bugs.webkit.org/show_bug.cgi?id=169517
        <rdar://problem/30652443>

        Reviewed by Dean Jackson.

        * fast/text/complex-text-selection-expected.html: Added.
        * fast/text/complex-text-selection.html: Added.
        * platform/ios/TestExpectations:

2017-05-02  Joseph Pecoraro  <pecoraro@apple.com>

        [Mac] WK1: http/tests/inspector/network/resource-sizes tests are failing

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:
        Skip these tests on WebKit1. They depend on the NSURLSession
        loading path which is not used in WebKit1.

2017-05-02  Chris Dumez  <cdumez@apple.com>

        [macOS] Flaky Crash under EventTarget::fireEventListeners on imported/blink/paint/deprecatedpaintlayer/non-self-painting-layer-overrides-visibility.html
        https://bugs.webkit.org/show_bug.cgi?id=171406
        <rdar://problem/30945281>

        Reviewed by Eric Carlson.

        Unskip test.

        * platform/mac/TestExpectations:

2017-05-02  Matt Lewis  <jlewis3@apple.com>

        Marked test svg/animations/animated-svg-image-removed-from-document-paused.html as flaky failure.
        https://bugs.webkit.org/show_bug.cgi?id=171559

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-02  Matt Lewis  <jlewis3@apple.com>

        Marked test imported/w3c/web-platform-tests/webrtc/rtcpeerconnection/setRemoteDescription.html as flaky failure.
        https://bugs.webkit.org/show_bug.cgi?id=170818

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-02  Myles C. Maxfield  <mmaxfield@apple.com>

        Font Loading API specifies font is loaded but sizing of font after load reports inconsistent values
        https://bugs.webkit.org/show_bug.cgi?id=168533

        Reviewed by Zalan Bujtas.

        * fast/text/font-loading-local-expected.txt: Added.
        * fast/text/font-loading-local.html: Added.
        * fast/text/web-font-load-fallback-during-loading.html:

2017-05-02  Youenn Fablet  <youenn@apple.com>

        Allow media stream based videos with sound autoplay if the page is already playing sound
        https://bugs.webkit.org/show_bug.cgi?id=171447

        Reviewed by Eric Carlson.

        * http/tests/media/autoplay-if-audio-is-playing-expected.txt: Added.
        * http/tests/media/autoplay-if-audio-is-playing.html: Added.
        * http/tests/media/resources/test-25fps.mp4: Added.

2017-05-02  Matt Lewis  <jlewis3@apple.com>

        Marked test http/tests/xmlhttprequest/methods-async.html as flaky timeout.
        https://bugs.webkit.org/show_bug.cgi?id=171530

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-01  Zan Dobersek  <zdobersek@igalia.com>

        [GCrypt] ECDSA signing and verification support
        https://bugs.webkit.org/show_bug.cgi?id=171103

        Reviewed by Carlos Garcia Campos.

        * platform/gtk/TestExpectations: Enable the passing ECDSA tests under
        crypto/subtle/. The ECDSA tests that utilize PKCS #8 and SPKI remain
        skipped since support for that hasn't landed yet.

2017-05-01  Zan Dobersek  <zdobersek@igalia.com>

        [GCrypt] HKDF bit derivation support
        https://bugs.webkit.org/show_bug.cgi?id=171074

        Reviewed by Michael Catanzaro.

        The crypto/subtle/hkdf-derive-bits-length-limits.html test is added, testing the
        corner-case length values for which the bit derivation operation must succeed or
        fail for any specified SHA hash algorithm. With HashLen as the algorithm's output
        length, the operation should reject for lengths of 0 or above 255 * HashLen * 8.
        The operation should resolve for lengths between the two limits, with testing
        performed on lengths of 8 (the minimum output length), HashLen * 8 (matching the
        output length of the hash algorithm), and 255 * HashLen * 8 (the maximum
        derivation output length).

        * crypto/subtle/hkdf-derive-bits-length-limits-expected.txt: Added.
        * crypto/subtle/hkdf-derive-bits-length-limits.html: Added.
        * platform/gtk/TestExpectations: Enable the HKDF tests under crypto/subtle/.

2017-05-01  Zan Dobersek  <zdobersek@igalia.com>

        [GCrypt] ECDH bit derivation support
        https://bugs.webkit.org/show_bug.cgi?id=171070

        Reviewed by Michael Catanzaro.

        The crypto/subtle/ecdh-derive-bits-length-limits.html test is added, testing the
        corner-case length values for which the bit derivation operation must succeed or
        fail. When specifying 0 as the length, the returned result must match the EC key
        size in length. 8, tested as the minimum non-zero value, and the key size for
        each key must also correctly resolve and return a resulting ArrayBuffer whose
        length in bytes must match the requested length. Derivations for byte-aligned
        values should start rejecting immediately for length values that are bigger than
        the EC key's length.

        * crypto/subtle/ecdh-derive-bits-length-limits-expected.txt: Added.
        * crypto/subtle/ecdh-derive-bits-length-limits.html: Added.
        * platform/gtk/TestExpectations: Enable Web Crypto ECDH tests under crypto/subtle/
        that are passing now that the proper implementation has been added. The remaining
        failing ECDH tests use PKCS #8 and SPKI key import/export formats, which are not
        supported yet.

2017-05-01  Saam Barati  <sbarati@apple.com>

        REGRESSION: LayoutTest workers/wasm-hashset-many.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=171449

        Unreviewed.

        * platform/win/TestExpectations: Skip Wasm tests on Windows.
        * workers/wasm-hashset-many-expected.txt:
        * workers/wasm-hashset/many-test.js: Make wasm-hashset-many run fewer workers.

2017-05-01  Youenn Fablet  <youenn@apple.com>

        Ensure RealtimeOutgoingVideoSource sends a black frame when its related source is muted
        https://bugs.webkit.org/show_bug.cgi?id=171497

        Reviewed by Eric Carlson.

        * webrtc/video-mute.html: Updating the test to make debugging clearer.

2017-05-01  Matt Lewis  <jlewis3@apple.com>

        Marked LayoutTest/http/tests/preload/not_delaying_window_onload_before_discovery.html as flaky failure.
        https://bugs.webkit.org/show_bug.cgi?id=171528

        Unreviewed test Gardening.

        * platform/ios-wk2/TestExpectations:

2017-05-01  Timothy Horton  <timothy_horton@apple.com>

        Expose viewport-fit instead of clip-to-safe-area
        https://bugs.webkit.org/show_bug.cgi?id=171503
        <rdar://problem/31918249>

        Reviewed by Simon Fraser.

        * TestExpectations:
        * fast/css/variables/constants/ios/safe-area-inset-set-expected.html:
        * fast/css/variables/constants/ios/safe-area-inset-set.html:
        * fast/viewport/ios/viewport-fit-auto-expected.txt: Added.
        * fast/viewport/ios/viewport-fit-auto.html: Added.
        * fast/viewport/ios/viewport-fit-contain-expected.txt: Added.
        * fast/viewport/ios/viewport-fit-contain.html: Added.
        * fast/viewport/ios/viewport-fit-cover-expected.txt: Added.
        * fast/viewport/ios/viewport-fit-cover.html: Added.
        * tiled-drawing/ios/viewport-clip-to-safe-area-no-gets-margin-tiles-expected.txt: Removed.
        * tiled-drawing/ios/viewport-clip-to-safe-area-no-gets-margin-tiles.html: Removed.
        * tiled-drawing/ios/viewport-clip-to-safe-area-yes-gets-no-margin-tiles-expected.txt: Removed.
        * tiled-drawing/ios/viewport-clip-to-safe-area-yes-gets-no-margin-tiles.html: Removed.
        Remove clip-to-safe-area tests and add some viewport-fit tests. Also, adjust
        safe-area-inset-set to use the new UIScriptController setSafeAreaInset method.

2017-05-01  Chris Dumez  <cdumez@apple.com>

        Documents created using DOMParser.parseFromString should inherit their context document's origin / URL
        https://bugs.webkit.org/show_bug.cgi?id=171499

        Reviewed by Sam Weinig.

        Add layout test coverage. I have verified that this test passes in both Firefox and Chrome.

        * fast/dom/domparser-parsefromstring-origin-expected.txt: Added.
        * fast/dom/domparser-parsefromstring-origin.html: Added.

2017-05-01  Ryan Haddad  <ryanhaddad@apple.com>

        Mark inspector/debugger/tail-recursion.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=168387

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-05-01  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline two fast/visual-viewport tests for iOS.

        Unreviewed test gardening.

        * platform/ios/fast/visual-viewport/zoomed-fixed-expected.txt:
        * platform/ios/fast/visual-viewport/zoomed-fixed-header-and-footer-expected.txt:

2017-05-01  Joseph Pecoraro  <pecoraro@apple.com>

        [GTK] Two test started to fail after due to unhandled promise rejection reported after r215916
        https://bugs.webkit.org/show_bug.cgi?id=171491

        Unreviewed test gardening.

        * js/promises-tests/promises-tests-2-3-3.html:
        Silence unhandled expectation messages for this test.

        * media/video-fullscreen-restriction-removed-expected.txt:
        Rebaseline expected results with unhandled expectation message.

        * platform/gtk/TestExpectations:

2017-05-01  Chris Fleizach  <cfleizach@apple.com>

        AX: Support time@datetime for verbosity clarification of dates, times, and durations
        https://bugs.webkit.org/show_bug.cgi?id=171498
        <rdar://problem/12985540>

        Reviewed by Joanmarie Diggs.

        * accessibility/datetime-attribute.html: Added.
        * accessibility/roles-computedRoleString-expected.txt:
        * platform/gtk/accessibility/datetime-attribute-expected.txt: Added.
        * platform/gtk/accessibility/roles-exposed-expected.txt:
        * platform/mac/accessibility/datetime-attribute-expected.txt: Added.
        * platform/mac/accessibility/roles-computedRoleString-expected.txt:
        * platform/mac/accessibility/roles-exposed-expected.txt:

2017-05-01  Matt Lewis  <jlewis3@apple.com>

        Marked fast/mediastream/getUserMedia-webaudio.html as flaky timeout.
        https://bugs.webkit.org/show_bug.cgi?id=170960

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-05-01  Joseph Pecoraro  <pecoraro@apple.com>

        RejectedPromiseTracker should produce better callstacks and avoid capturing callstacks unless there is a debugger/inspector
        https://bugs.webkit.org/show_bug.cgi?id=171416
        <rdar://problem/31899425>

        Reviewed by Saam Barati and Brian Burg.

        * inspector/console/message-stack-trace-expected.txt: Added.
        * inspector/console/message-stack-trace.html: Added.
        Test console stack traces from various places where console messages
        are generated and the stacks are important.

        * inspector/console/resources/log-console-stack-trace.js: Added.
        (TestPage.registerInitializer.logCallFrame):
        (TestPage.registerInitializer.window.logConsoleMessageStackTrace):
        Like the logger for Debugger StackTrace but for Console StackTrace.

        * inspector/debugger/break-on-exception-throw-in-promise-expected.txt:
        * inspector/debugger/break-on-uncaught-exception-throw-in-promise-expected.txt:
        * fast/mediastream/MediaStream-MediaElement-setObject-null-expected.txt:
        * http/tests/security/video-cross-origin-caching-expected.txt:
        * js/dom/unhandled-promise-rejection-bindings-type-error-expected.txt:
        * js/dom/unhandled-promise-rejection-console-report-expected.txt:
        * js/promises-tests/promises-tests-2-2-6-expected.txt:
        * streams/reference-implementation/pipe-to-options-expected.txt:
        * streams/reference-implementation/readable-stream-templated-expected.txt:
        * streams/reference-implementation/writable-stream-abort-expected.txt:
        * streams/reference-implementation/writable-stream-expected.txt:
        * webrtc/libwebrtc/release-while-creating-offer-expected.txt:
        * webrtc/libwebrtc/release-while-setting-local-description-expected.txt:
        Rebaseline results. Better stack trace for errors includes correct line numbers.
        Explicit rejections with a value do not include backtraces without a debugger.

2017-05-01  Joseph Pecoraro  <pecoraro@apple.com>

        LayoutTest/imported/w3c/web-platform-tests/resource-timing/rt-revalidate-requests.html is a flaky failure.
        https://bugs.webkit.org/show_bug.cgi?id=171511

        Unreviewed test gardening.

        * TestExpectations:

2017-05-01  Ryan Haddad  <ryanhaddad@apple.com>

        Update TestExpectations for http/tests/fetch/fetch-in-worker-crash.html.

        Unreviewed test gardening.

        * TestExpectations:

2017-05-01  Joanmarie Diggs  <jdiggs@igalia.com>

        [ATK] Expose values of aria-rowcount, aria-colcount, aria-rowindex, aria-colindex, aria-rowspan, and aria-colspan as object attributes
        https://bugs.webkit.org/show_bug.cgi?id=171496

        Reviewed by Chris Fleizach.

        * platform/gtk/TestExpectations: Unskip accessibility/aria-table-attributes.html

2017-05-01  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline fast/visual-viewport/rtl-zoomed-rects.html for mac-wk1.
        https://bugs.webkit.org/show_bug.cgi?id=171500

        Unreviewed test gardening.

        * platform/mac-wk1/fast/visual-viewport/rtl-zoomed-rects-expected.txt:

2017-05-01  Matt Lewis  <jlewis3@apple.com>

        Rebaselined fast/visual-viewport/ tests.
        https://bugs.webkit.org/show_bug.cgi?id=171500

        Unreviewed test gardening.

        * platform/ios-wk2/fast/visual-viewport/nonzoomed-rects-expected.txt:
        * platform/ios-wk2/fast/visual-viewport/rtl-nonzoomed-rects-expected.txt:
        * platform/ios-wk2/fast/visual-viewport/rtl-zoomed-rects-expected.txt:
        * platform/ios-wk2/fast/visual-viewport/rubberbanding-viewport-rects-expected.txt:
        * platform/ios-wk2/fast/visual-viewport/rubberbanding-viewport-rects-extended-background-expected.txt:
        * platform/ios-wk2/fast/visual-viewport/rubberbanding-viewport-rects-header-footer-expected.txt:
        * platform/ios-wk2/fast/visual-viewport/zoomed-fixed-expected.txt: Added.
        * platform/ios-wk2/fast/visual-viewport/zoomed-fixed-header-and-footer-expected.txt: Added.
        * platform/ios-wk2/fast/visual-viewport/zoomed-rects-expected.txt:

2017-05-01  Chris Dumez  <cdumez@apple.com>

        Do not dispatch SVG load event in frameless documents
        https://bugs.webkit.org/show_bug.cgi?id=171505
        <rdar://problem/31799776>

        Reviewed by Andreas Kling.

        Add layout test coverage. I have verified that this test passes on both Firefox and Chrome.

        * fast/dom/domparser-parsefromstring-svg-load-event-expected.txt: Added.
        * fast/dom/domparser-parsefromstring-svg-load-event.html: Added.

2017-05-01  Ryan Haddad  <ryanhaddad@apple.com>

        Skip editing/execCommand/show-modal-dialog-during-execCommand.html on mac-wk1.
        https://bugs.webkit.org/show_bug.cgi?id=171501

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-05-01  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline js/dom/global-constructors-attributes.html  after r215956.

        Unreviewed test gardening.

        * platform/mac-elcapitan/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac-wk1/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac/js/dom/global-constructors-attributes-expected.txt:

2017-05-01  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: [GTK] Add support to query for aria-current
        https://bugs.webkit.org/show_bug.cgi?id=149016

        Reviewed by Chris Fleizach.

        * platform/gtk/TestExpectations: Unskip now-passing test.

2017-05-01  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline giantRowspan tests after r215914.

        * platform/gtk/fast/table/giantRowspan-expected.txt:
        * platform/gtk/fast/table/giantRowspan2-expected.txt:

2017-05-01  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Update expectations of several test.

        * platform/gtk/TestExpectations:

2017-05-01  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline several WPT fetch API tests.

        * platform/gtk/imported/w3c/web-platform-tests/fetch/api/basic/request-headers.any-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/fetch/api/basic/request-headers.any.worker-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/fetch/api/basic/scheme-about.any-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/fetch/api/cors/cors-basic.any-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/fetch/api/cors/cors-basic.any.worker-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/fetch/api/cors/cors-no-preflight.any-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/fetch/api/cors/cors-no-preflight.any.worker-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/fetch/api/cors/cors-origin.any-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/fetch/api/cors/cors-origin.any.worker-expected.txt: Added.

2017-05-01  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: AccessibilityTable::ariaRowCount() and ariaColumnCount() should not return -1 unless that is the author-provided value
        https://bugs.webkit.org/show_bug.cgi?id=171475

        Reviewed by Chris Fleizach.

        * accessibility/table-detection-expected.txt: Updated.
        * accessibility/table-with-rules-expected.txt: Updated.

2017-05-01  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Update expectations of several test.

        * platform/gtk/TestExpectations:

2017-05-01  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: Implement support for ARIA "figure" and "term" roles; update AXRoleDescription mapping for "feed" role
        https://bugs.webkit.org/show_bug.cgi?id=171183

        Reviewed by Chris Fleizach.

        New test cases added and expectations updated.

        * accessibility/gtk/xml-roles-exposed-expected.txt:
        * accessibility/gtk/xml-roles-exposed.html:
        * accessibility/roles-computedRoleString.html:
        * accessibility/roles-exposed.html:
        * platform/gtk/accessibility/roles-exposed-expected.txt:
        * platform/mac/accessibility/roles-computedRoleString-expected.txt:
        * platform/mac/accessibility/roles-exposed-expected.txt:

2017-04-30  Zalan Bujtas  <zalan@apple.com>

        Initialize a new layout state while bailing out of simple line layout only when needed.
        https://bugs.webkit.org/show_bug.cgi?id=171481
        <rdar://problem/31906382>

        Reviewed by Antti Koivisto.

        * fast/multicol/simple-line-layout-switch-to-normal-layout-while-inside-layout-expected.txt: Added.
        * fast/multicol/simple-line-layout-switch-to-normal-layout-while-inside-layout.html: Added.

2017-04-30  Joanmarie Diggs  <jdiggs@igalia.com>

        [ATK] Implement support for aria-autocomplete
        https://bugs.webkit.org/show_bug.cgi?id=171167

        Reviewed by Chris Fleizach.

        * accessibility/gtk/aria-autocomplete-expected.txt: Added.
        * accessibility/gtk/aria-autocomplete.html: Added.

2017-04-30  Joanmarie Diggs  <jdiggs@igalia.com>

        [ATK] ARIA treegrid role should be exposed as ATK_ROLE_TREE_TABLE; not ATK_ROLE_TABLE
        https://bugs.webkit.org/show_bug.cgi?id=171170

        Reviewed by Chris Fleizach.

        Add interface-table.html to verify that all roles which have tabular functionality
        implement AtkTable. Update other tests to reflect that the ARIA treegrid role maps
        to our internal TreeGridRole AccessibilityRole.

        * accessibility/gtk/interface-table-cell-expected.txt: Updated.
        * accessibility/gtk/interface-table-expected.txt: Added.
        * accessibility/gtk/interface-table.html: Added.
        * accessibility/roles-computedRoleString.html: Updated.
        * platform/gtk/accessibility/aria-selected-expected.txt: Updated.
        * platform/gtk/accessibility/roles-exposed-expected.txt: Updated.
        * platform/mac/accessibility/roles-computedRoleString-expected.txt: Updated.

2017-04-30  Joanmarie Diggs  <jdiggs@igalia.com>

        [ATK] Emit object:state-changed:busy event when aria-busy value changes
        https://bugs.webkit.org/show_bug.cgi?id=171181

        Reviewed by Chris Fleizach.

        New test. Also update the expectations for menu-list-unfocused-notifications.html
        because the addition of the handler for AXElementBusyChanged results in that
        notification being output in the test results.

        * accessibility/gtk/aria-busy-changed-notification-expected.txt: Added.
        * accessibility/gtk/aria-busy-changed-notification.html: Added.
        * accessibility/gtk/menu-list-unfocused-notifications-expected.txt: Updated.

2017-04-30  Oleksandr Skachkov  <gskachkov@gmail.com>

        [ES6]. Implement Annex B.3.3 function hoisting rules for eval
        https://bugs.webkit.org/show_bug.cgi?id=163208

        Reviewed by Saam Barati.

        * inspector/runtime/evaluate-CommandLineAPI-expected.txt:
        * inspector/runtime/evaluate-CommandLineAPI.html:
        * js/parser-syntax-check-expected.txt:
        * js/script-tests/parser-syntax-check.js:

2017-04-29  Oleksandr Skachkov  <gskachkov@gmail.com>

        Deep nesting is leading to ReferenceError for hoisted function
        https://bugs.webkit.org/show_bug.cgi?id=171456

        Reviewed by Yusuke Suzuki.

        * js/function-declaration-statement-expected.txt:
        * js/script-tests/function-declaration-statement.js:
        (deepNesting.foo):
        (deepNesting):
        (deepNestingForFunctionDeclaration.foo):
        (deepNestingForFunctionDeclaration):
        (eval.deepNestingInEval.foo):
        (eval.deepNestingInEval):
        (eval.deepNestingForFunctionDeclarationInEval.foo):
        (eval.deepNestingForFunctionDeclarationInEval):

2017-04-28  Zalan Bujtas  <zalan@apple.com>

        iBooks text can overlap, sometimes columns are shifted splitting words.
        https://bugs.webkit.org/show_bug.cgi?id=171472
        <rdar://problem/31096037>

        Reviewed by Antti Koivisto.

        * fast/text/simple-line-layout-glyph-overflows-line-expected.html: Added.
        * fast/text/simple-line-layout-glyph-overflows-line.html: Added.

2017-04-28  Per Arne Vollan  <pvollan@apple.com>

        Crash under WebCore::AccessibilityRenderObject::handleAriaExpandedChanged().
        https://bugs.webkit.org/show_bug.cgi?id=171427

        Reviewed by Brent Fulgham.

        * accessibility/accessibility-crash-setattribute-expected.txt: Added.
        * accessibility/accessibility-crash-setattribute.html: Added.

2017-04-28  Wenson Hsieh  <wenson_hsieh@apple.com>

        Unreviewed test gardening (Mac WK1)

        Mark a LayoutTest as PASS on Mac WK1. This test is currently skipped globally,
        but was meant to be enabled for WK1 on Mac. Followup to r213897.

        * platform/mac-wk1/TestExpectations:

2017-04-28  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: ARIA "region" role which lacks an accessible name should not be treated as a landmark
        https://bugs.webkit.org/show_bug.cgi?id=171180

        Reviewed by Chris Fleizach.

        Add new test cases to several tests so that we have coverage for both named and
        unnamed regions, which now have different mappings. In aria-namefrom-author.html,
        the region role was replaced with the table role because the test requires elements
        which have mapped ARIA roles and lack an author-provided name. A region which lacks
        an author-provided name is no longer mapped as an ARIA role as per the spec. Table
        was introduced in ARIA 1.1 and serves the same purpose with respect to what is
        being tested.

        * accessibility/aria-namefrom-author.html:
        * accessibility/gtk/xml-roles-exposed-expected.txt:
        * accessibility/gtk/xml-roles-exposed.html:
        * accessibility/mac/aria-grouping-roles.html:
        * accessibility/roles-computedRoleString.html:
        * accessibility/roles-exposed.html:
        * platform/gtk/accessibility/roles-exposed-expected.txt:
        * platform/mac/accessibility/roles-computedRoleString-expected.txt:
        * platform/mac/accessibility/roles-exposed-expected.txt:

2017-04-28  Joseph Pecoraro  <pecoraro@apple.com>

        LayoutTests/js/dom/Promise-static-all/race.html are flakey - Unhandled Promise Rejection messages
        https://bugs.webkit.org/show_bug.cgi?id=171445

        Unreviewed test gardening.

        * js/dom/Promise-static-all.html:
        Fix an accidentally commented out line.

2017-04-28  Matt Lewis  <jlewis3@apple.com>

        Marked media/track/track-in-band-style.html as flaky timeout.
        https://bugs.webkit.org/show_bug.cgi?id=171465

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-28  Dean Jackson  <dino@apple.com>

        App crashing: Dispatch queue: com.apple.root.user-interactive-qos / vBoxConvolve / WebCore::FEGaussianBlur::platformApplySoftware()
        https://bugs.webkit.org/show_bug.cgi?id=171461
        <rdar://problem/30534722>

        Reviewed by Eric Carlson.

        Test a bunch of blurs a frame at a time.

        * css3/filters/blur-various-radii-expected.html: Added.
        * css3/filters/blur-various-radii.html: Added.

2017-04-28  Chris Dumez  <cdumez@apple.com>

        Stop using legacy ClientRect / ClientRectList in Internals
        https://bugs.webkit.org/show_bug.cgi?id=171412

        Reviewed by Simon Fraser.

        Rebaseline existing tests as DOMRect has more properties than ClientRect.

        * fast/visual-viewport/nonzoomed-rects-expected.txt:
        * fast/visual-viewport/rtl-nonzoomed-rects-expected.txt:
        * fast/visual-viewport/rtl-zoomed-rects-expected.txt:
        * fast/visual-viewport/rubberbanding-viewport-rects-expected.txt:
        * fast/visual-viewport/rubberbanding-viewport-rects-extended-background-expected.txt:
        * fast/visual-viewport/rubberbanding-viewport-rects-header-footer-expected.txt:
        * fast/visual-viewport/zoomed-fixed-expected.txt:
        * fast/visual-viewport/zoomed-fixed-header-and-footer-expected.txt:
        * fast/visual-viewport/zoomed-rects-expected.txt:
        * inspector/dom/hideHighlight-expected.txt:
        * inspector/dom/highlightQuad-expected.txt:
        * inspector/dom/highlightRect-expected.txt:

2017-04-28  Jeremy Jones  <jeremyj@apple.com>

        ARGUMENT BAD: time, time >= 0
        https://bugs.webkit.org/show_bug.cgi?id=164336
        rdar://problem/29314891

        Reviewed by Eric Carlson.

        Remove workaround that affected other tests.

        * media/modern-media-controls/pip-support/pip-support-click.html:

2017-04-28  Chris Dumez  <cdumez@apple.com>

        Range.getClientRects() / getBoundingClientRect() should return DOMRect types
        https://bugs.webkit.org/show_bug.cgi?id=171393

        Reviewed by Simon Fraser.

        Add layout test coverage.

        * fast/dom/Range/getBoundingClientRect-getClientRects-return-type-expected.txt: Added.
        * fast/dom/Range/getBoundingClientRect-getClientRects-return-type.html: Added.

2017-04-28  Joseph Pecoraro  <pecoraro@apple.com>

        LayoutTests/js/dom/Promise-static-all/race.html are flakey - Unhandled Promise Rejection messages
        https://bugs.webkit.org/show_bug.cgi?id=171445

        Reviewed by Saam Barati.

        * js/dom/Promise-static-all.html:
        * js/dom/Promise-static-race.html:
        Silence the console messages for unhandled rejections in this test.
        There are unhandled rejections and messages sometimes appear
        depending on the order of events on the page. The messages are not
        important for this test so just mute them.

2017-04-28  Chris Dumez  <cdumez@apple.com>

        Unreviewed, skip imported/w3c/web-platform-tests/html/semantics/tabular-data/processing-model-1/span-limits.html in Debug builds

        This test is slow.

        * TestExpectations:

2017-04-28  Ryan Haddad  <ryanhaddad@apple.com>

        Mark imported/w3c/web-platform-tests/webrtc/rtcpeerconnection/rtcpeerconnection-idl.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171094

        Unreviewed test gardening.

        * TestExpectations:

2017-04-28  Joanmarie Diggs  <jdiggs@igalia.com>

        [ATK] aria-modal="true" should be exposed via ATK_STATE_MODAL
        https://bugs.webkit.org/show_bug.cgi?id=171188

        Reviewed by Chris Fleizach.

        * accessibility/gtk/aria-modal-state-exposed-expected.txt: Added.
        * accessibility/gtk/aria-modal-state-exposed.html: Added.

2017-04-28  Matt Lewis  <jlewis3@apple.com>

        Rebaselining test after r215916.
        https://bugs.webkit.org/show_bug.cgi?id=171438

        Unreviewed test gardening.

        * js/dom/global-constructors-attributes-dedicated-worker-expected.txt:
        * platform/mac-elcapitan/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac-wk1/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac/js/dom/global-constructors-attributes-expected.txt:

2017-04-28  Eric Carlson  <eric.carlson@apple.com>

        Implement ondevicechange
        https://bugs.webkit.org/show_bug.cgi?id=169872
        <rdar://problem/28945035>

        Reviewed by Jer Noble.

        * fast/mediastream/device-change-event-expected.txt: Added.
        * fast/mediastream/device-change-event.html: Added.

2017-04-28  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: Implement aria-value support for focusable separators
        https://bugs.webkit.org/show_bug.cgi?id=171169

        Reviewed by Chris Fleizach.

        * accessibility/separator-values-expected.txt: Added.
        * accessibility/separator-values.html: Added.

2017-04-28  Joanmarie Diggs  <jdiggs@igalia.com>

        [ATK] GridCellRole should implement AtkTableCell (regression?)
        https://bugs.webkit.org/show_bug.cgi?id=171179

        Reviewed by Chris Fleizach.

        * accessibility/gtk/interface-table-cell-expected.txt: Added.
        * accessibility/gtk/interface-table-cell.html: Added.

2017-04-28  Miguel Gomez  <magomez@igalia.com>

        REGRESSION(r215211): [GTK] Several webgl related tests are failing
        https://bugs.webkit.org/show_bug.cgi?id=170730

        Reviewed by Said Abou-Hallawa.

        Adjust test expectations for the tests that were failing. They must pass now.

        * platform/gtk/TestExpectations:

2017-04-27  Andy VanWagoner  <thetalecrafter@gmail.com>

        [INTL] Implement the caseFirst option for Intl.Collator
        https://bugs.webkit.org/show_bug.cgi?id=158188

        Reviewed by Geoffrey Garen.

        Updates the Intl.Collator tests to check caseFirst support.
        The caseFirst option or unicode locale extension lets the user explicitly
        set if lower or upper case characters should be first in order.

        * js/intl-collator-expected.txt:
        * js/script-tests/intl-collator.js:
        (testCollator):

2017-04-27  Joseph Pecoraro  <pecoraro@apple.com>

        Support for promise rejection events (unhandledrejection)
        https://bugs.webkit.org/show_bug.cgi?id=150358
        <rdar://problem/28441651>

        Reviewed by Saam Barati.

        Patch by Joseph Pecoraro and Yusuke Suzuki.

        * js/dom/unhandled-promise-rejection-basic-expected.txt: Added.
        * js/dom/unhandled-promise-rejection-basic.html: Added.
        * js/dom/unhandled-promise-rejection-bindings-type-error-expected.txt: Added.
        * js/dom/unhandled-promise-rejection-bindings-type-error.html: Added.
        * js/dom/unhandled-promise-rejection-console-no-report-expected.txt: Added.
        * js/dom/unhandled-promise-rejection-console-no-report.html: Added.
        * js/dom/unhandled-promise-rejection-console-report-expected.txt: Added.
        * js/dom/unhandled-promise-rejection-console-report.html: Added.
        * js/dom/unhandled-promise-rejection-handle-during-event-expected.txt: Added.
        * js/dom/unhandled-promise-rejection-handle-during-event.html: Added.
        * js/dom/unhandled-promise-rejection-handle-expected.txt: Added.
        * js/dom/unhandled-promise-rejection-handle-in-handler-expected.txt: Added.
        * js/dom/unhandled-promise-rejection-handle-in-handler.html: Added.
        * js/dom/unhandled-promise-rejection-handle.html: Added.
        * js/dom/unhandled-promise-rejection-order-expected.txt: Added.
        * js/dom/unhandled-promise-rejection-order.html: Added.
        New tests specific to the `onunhandledrejection` and `onrejectionhandled` events.

        * resources/testharnessreport.js:
        (self.testRunner.add_completion_callback.sanitize):
        (self.testRunner.add_completion_callback):
        Report results immediately and then finish the test after a turn. This way
        if the test ends with a pass, but may get unhandled rejections after
        completing which should not make the test appear as if it failed. Some tests
        have unhandled promise rejections but are expected to pass. Likewise some
        tests perform cleanup in their own completion callbacks, which happen after
        this initial completion callback, and we want to report results after all
        the work is done as it may eliminate non-deterministic debug test output.

        * TestExpectations:
        Mark some tests as flakey that have sometimes have unhandled promise rejections.
        These tests are all various imported tests that use the testharness.

        * fast/mediastream/MediaStream-MediaElement-setObject-null-expected.txt:
        * http/tests/security/video-cross-origin-caching-expected.txt:
        * inspector/debugger/break-on-exception-throw-in-promise-expected.txt:
        * inspector/debugger/break-on-uncaught-exception-throw-in-promise-expected.txt:
        * inspector/worker/resources-in-worker-expected.txt:
        * js/dom/dom-static-property-for-in-iteration-expected.txt:
        * js/dom/global-constructors-attributes-dedicated-worker-expected.txt:
        * js/promises-tests/promises-tests-2-2-6-expected.txt:
        * platform/mac/inspector/model/remote-object-expected.txt:
        * webrtc/libwebrtc/release-while-creating-offer-expected.txt:
        * webrtc/libwebrtc/release-while-setting-local-description-expected.txt:
        Update tests with unhandled promise rejection messages.

        * media/W3C/audio/events/event_pause_manual.html:
        * media/audio-playback-restriction-play-expected.txt:
        * media/audio-playback-restriction-play.html:
        * media/click-volume-bar-not-pausing.html:
        * media/remote-control-command-is-user-gesture-expected.txt:
        * media/remote-control-command-is-user-gesture.html:
        * media/track/track-mode.html:
        * media/video-autoplay-allowed-but-fullscreen-required.html:
        * media/video-display-none-crash.html:
        * media/video-main-content-deny-display-none.html:
        * media/video-main-content-deny-not-in-dom.html:
        * media/video-main-content-deny-not-visible.html:
        * media/video-main-content-deny-obscured.html:
        * media/video-main-content-deny-too-small.html:
        * media/video-multiple-concurrent-playback-expected.txt:
        * media/video-play-audio-require-user-gesture-expected.txt:
        * media/video-play-audio-require-user-gesture.html:
        * media/video-play-pause-events-expected.txt:
        * media/video-play-pause-events.html:
        * media/video-play-pause-exception-expected.txt:
        * media/video-play-pause-exception.html:
        * media/video-play-require-user-gesture-expected.txt:
        * media/video-play-require-user-gesture.html:
        * media/video-preload-expected.txt:
        * media/video-preload.html:
        * media/video-test.js:
        (handlePromise.handle):
        Snuff many possible unhandled promise rejections in media via media.play().

        * streams/reference-implementation/pipe-to-expected.txt:
        * streams/reference-implementation/pipe-to-options-expected.txt:
        * streams/reference-implementation/readable-stream-templated-expected.txt:
        * streams/reference-implementation/writable-stream-abort-expected.txt:
        * streams/reference-implementation/writable-stream-expected.txt:
        These stream tests are out of date and produce unhandled rejections.

        * streams/shadowing-Promise.html:
        Update non-imported tests to prevent unhandled rejection messages.

2017-04-27  Chris Dumez  <cdumez@apple.com>

        Align colspan/rowspan limits with the latest HTML specification
        https://bugs.webkit.org/show_bug.cgi?id=171322

        Reviewed by Darin Adler.

        Rebaseline a couple of rowspan tests now that our max limit has changed.

        * fast/table/giantRowspan2-expected.txt:
        * platform/ios/fast/table/giantRowspan-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/html/dom/reflection-embedded-expected.txt:
        * platform/mac/fast/table/giantRowspan-expected.txt:

2017-04-27  Matt Lewis  <jlewis3@apple.com>

        Mark fast/mediacapturefromelement/CanvasCaptureMediaStream-2d-events.html as a flaky failure.
        https://bugs.webkit.org/show_bug.cgi?id=170835

        Unreviewed test gardening.

        * TestExpectations:

2017-04-27  Matt Lewis  <jlewis3@apple.com>

        Mark imported/blink/paint/deprecatedpaintlayer/non-self-painting-layer-overrides-visibility.html as a flaky crash.
        https://bugs.webkit.org/show_bug.cgi?id=171406

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-27  Ryan Haddad  <ryanhaddad@apple.com>

        Add missing expected file for fast/inline/simple-line-layout-16bit-content.html.
        https://bugs.webkit.org/show_bug.cgi?id=171379

        Unreviewed test gardening.

        * fast/inline/simple-line-layout-16bit-content-expected-mismatch.html: Added.

2017-04-27  David Kilzer  <ddkilzer@apple.com>

        Enhance shouldBe()/shouldNotBe() to accept anonymous function arguments
        <https://webkit.org/b/171362>
        <rdar://problem/31867686>

        Reviewed by Joseph Pecoraro.

        This change makes it possible to pass either the first or second
        argument (or both) as anonymous functions into shouldBe() and
        shouldNotBe() to make it easy to capture local variables when
        writing tests.  This is similar to the change in r202609 for Bug
        159232 for shouldThrow() and shouldNotThrow().

        Note that shouldBe()/shouldNotBe() from the following files were
        NOT updated since they were imported from other projects and did
        share the full WebKit history of resources/js-test-pre.js:

            http/tests/webgl/1.0.2/resources/webgl_test_files/resources/js-test-pre.js
            js/mozilla/resources/js-test-pre.js
            webgl/1.0.2/resources/webgl_test_files/resources/js-test-pre.js
            webgl/1.0.3/resources/webgl_test_files/resources/js-test-pre.js

        However, these files WERE brought up-to-date with the ability to
        pass anonymous functions into shouldBe()/shouldNotBe() for this
        bug, and shouldThrow()/shouldNotThrow() which should have
        originally been fixed with Bug 159232:

            http/tests/resources/js-test-pre.js
            resources/standalone-pre.js

        * css3/scroll-snap/resources/iframe-content.html: Drive-by fix
        to debug message for copy-paste error.  Found by searching
        LayoutTests directory for "expects string arguments".

        * fast/canvas/webgl/array-unit-tests-expected.txt: Update test
        results.
        * fast/canvas/webgl/array-unit-tests.html: Fix warning by making
        second argument to shouldBe() a string.

        * fast/css/script-tests/image-set-parsing.js:
        (testImageSetRule): Remove comment by changing second argument
        to shouldBe() into an anonymous function.

        * http/tests/resources/js-test-pre.js:
        (evalAndLog):
        (evalAndLogResult):
        (shouldBe):
        (shouldNotBe):
        (shouldEvaluateTo):
        - Made a full copy of resources/js-test-pre.js to bring this up
          to speed.  Needs a checker written for it to keep them in sync.
        * http/tests/security/xssAuditor/block-does-not-leak-location-expected.txt:
        * http/tests/security/xssAuditor/block-does-not-leak-referrer-expected.txt:
        - Update line numbers after updating http/tests/resources/js-test-pre.js.

        * js/function-declarations-in-switch-statement-expected.txt:
        - Update results after fixing warnings.
        * js/script-tests/function-declarations-in-switch-statement.js:
        - Fix warnings by passing in strings to shouldBe().

        * js/script-tests/stack-unwinding.js:
        - Update results after fixing warnings.
        * js/stack-unwinding-expected.txt:
        - Fix warnings by passing in strings to shouldBe().

        * resources/js-test-pre.js:
        (shouldBe):
        (shouldNotBe):
        * resources/js-test.js:
        (shouldBe):
        (shouldNotBe):
        - Update shouldBe()/shouldNotBe() to accept anonymous function
          arguments.

        * resources/standalone-pre.js:
        (shouldBe):
        (shouldNotBe):
        (shouldNotThrow):
        (shouldThrow):
        - Update shouldBe()/shouldNotBe() to accept anonymous function
          arguments.
        - Also fix shouldThrow()/shouldNotThrow() to accept anonymous
          function arguments (which were missed in r202609 for Bug
          159232).

2017-04-27  Chris Dumez  <cdumez@apple.com>

        Element.getBoundingClientRect() / getClientRects() should return a DOMRect types
        https://bugs.webkit.org/show_bug.cgi?id=171226

        Reviewed by Simon Fraser.

        Update existing tests to reflect behavior change.

        * TestExpectations:
        * css3/flexbox/align-absolute-child-expected.txt:
        * fast/css/ClientRect-attributes-prototype-expected.txt: Removed.
        * fast/css/ClientRect-attributes-prototype.html: Removed.
        * fast/css/ClientRect-serialization-expected.txt: Removed.
        * fast/css/ClientRect-serialization.html: Removed.
        * fast/css/DOMRect-attributes-prototype-expected.txt: Added.
        * fast/css/DOMRect-attributes-prototype.html: Added.
        * fast/css/DOMRect-serialization-expected.txt: Added.
        * fast/css/DOMRect-serialization.html: Added.
        * fast/dom/Element/getClientRects-return-type-expected.txt: Added.
        * fast/dom/Element/getClientRects-return-type.html: Added.
        * fast/dom/collection-iterators-expected.txt:
        * fast/dom/collection-iterators.html:
        * fast/visual-viewport/zoomed-fixed-expected.txt:
        * fast/visual-viewport/zoomed-fixed-header-and-footer-expected.txt:
        * fast/zooming/client-rect-in-fixed-zoomed-expected.txt:
        * fast/zooming/client-rect-in-fixed-zoomed.html:
        * js/resources/JSON-stringify.js:

2017-04-27  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/fullscreen-button/fullscreen-button.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171391

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-04-27  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/security/contentSecurityPolicy/source-list-parsing-05.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171389

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-04-27  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/xmlhttprequest/workers/methods.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170181

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-04-27  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: Expose elements with the ARIA "feed" role
        https://bugs.webkit.org/show_bug.cgi?id=171184

        Reviewed by Chris Fleizach.

        Add "feed" role to roles-exposed.html, xml-roles-exposed.html, and
        roles-computedRoleString.html. Update expectations accordingly.

        * accessibility/gtk/xml-roles-exposed-expected.txt:
        * accessibility/gtk/xml-roles-exposed.html:
        * accessibility/roles-computedRoleString.html:
        * accessibility/roles-exposed.html:
        * platform/gtk/accessibility/roles-exposed-expected.txt:
        * platform/mac/accessibility/roles-computedRoleString-expected.txt:
        * platform/mac/accessibility/roles-exposed-expected.txt:

2017-04-27  Myles C. Maxfield  <mmaxfield@apple.com>

        REGRESSION(r214572): Update fast/text/variations/advances.html to understand normalized variation widths
        https://bugs.webkit.org/show_bug.cgi?id=171356
        <rdar://problem/28670085>

        Reviewed by Dean Jackson.

        Unspecified 'wdth' axis values are being normalized because the font is a GX font. However, this
        font assumes no normalization, which means one of the comparisons in the test is bogus.

        * fast/text/variations/advances-expected.txt:
        * fast/text/variations/advances.html:
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:

2017-04-27  Antti Koivisto  <antti@apple.com>

        Skip css3/viewport-percentage-lengths/vh-auto-size.html on WK1.

        Looks like use of auto-sizing leaves state behind in DRT.

        * platform/mac-wk1/TestExpectations:

2017-04-27  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/buttons-container/buttons-container-buttons-property.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=167371

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-04-27  Ryan Haddad  <ryanhaddad@apple.com>

        Mark webgl/1.0.2/conformance/glsl/misc/shader-with-reserved-words.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170877

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-04-27  Zalan Bujtas  <zalan@apple.com>

        Use text-shadow to visualize simple line layout coverage.
        https://bugs.webkit.org/show_bug.cgi?id=171379

        Reviewed by Antti Koivisto.

        * fast/inline/simple-line-layout-16bit-content-expected-mismatch.html: Added.
        * fast/inline/simple-line-layout-16bit-content-expected.html: Removed.
        * fast/inline/simple-line-layout-16bit-content.html:

2017-04-27  Joanmarie Diggs  <jdiggs@igalia.com>

        [ATK] ARIA alertdialogs should be exposed with ROLE_DIALOG
        https://bugs.webkit.org/show_bug.cgi?id=171187

        Reviewed by Chris Fleizach.

        * accessibility/aria-mappings-expected.txt: Updated.
        * accessibility/gtk/xml-roles-exposed-expected.txt: Updated.
        * platform/gtk/accessibility/roles-exposed-expected.txt: Updated.

2017-04-27  Myles C. Maxfield  <mmaxfield@apple.com>

        Make fast/text/complex-small-caps-non-bmp-capitalize.html more robust
        https://bugs.webkit.org/show_bug.cgi?id=171366
        <rdar://problem/30060323>

        Reviewed by Alex Christensen.

        This test needs a font which supports Deseret but doesn't support small caps.
        Geneva is a better choice for such a font.

        * fast/text/complex-small-caps-non-bmp-capitalize-expected.html:
        * fast/text/complex-small-caps-non-bmp-capitalize.html:

2017-04-27  Antti Koivisto  <antti@apple.com>

        Repeated layouts in Mail due to viewport units being used with auto-sizing
        https://bugs.webkit.org/show_bug.cgi?id=171371
        <rdar://problem/28780084>

        Reviewed by Zalan Bujtas.

        * css3/viewport-percentage-lengths/vh-auto-size-expected.html: Added.
        * css3/viewport-percentage-lengths/vh-auto-size.html: Added.

2017-04-27  Joanmarie Diggs  <jdiggs@igalia.com>

        AX: Inconsistent exposure of ARIA "button" role with non-false value of aria-haspopup
        https://bugs.webkit.org/show_bug.cgi?id=171204

        Reviewed by Chris Fleizach.

        It turns out that this bug was fixed as a side effect of the changes made
        to fix WebKitGtk bug 171164 (r215821). But we didn't realize it due to the
        lack of an existing layout test covering the mappings for other platforms.
        The test created for the WebKitGtk port was modified and moved to the shared
        tests. Shared expectations are based on the Mac's mappings.

        * accessibility/button-with-aria-haspopup-role-expected.txt: Added.
        * accessibility/button-with-aria-haspopup-role.html: Renamed from LayoutTests/accessibility/gtk/button-with-aria-haspopup-is-not-a-combobox.html.
        * accessibility/gtk/button-with-aria-haspopup-is-not-a-combobox-expected.txt: Removed.
        * platform/gtk/accessibility/button-with-aria-haspopup-role-expected.txt: Added.

2017-04-27  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/local/blob/send-hybrid-blob-using-open-panel.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171353

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-04-27  Frederic Wang  <fwang@igalia.com>

        Fix some tests from platform-tests/cssom-view/cssom-view/
        https://bugs.webkit.org/show_bug.cgi?id=171228

        Reviewed by Youenn Fablet.

        * TestExpectations: Unskip media-query-list-interface.

2017-04-27  Zalan Bujtas  <zalan@apple.com>

        Text gets cut off when bailing out of simple line layout with widows.
        https://bugs.webkit.org/show_bug.cgi?id=171370
        <rdar://problem/31563414>

        Reviewed by Antti Koivisto.

        * fast/multicol/simple-line-layout-widows-when-switching-over-to-normal-line-layout-expected.html: Added.
        * fast/multicol/simple-line-layout-widows-when-switching-over-to-normal-line-layout.html: Added.

2017-04-26  Chris Dumez  <cdumez@apple.com>

        Unreviewed, remove unnecessary expected result in platform/ios-wk2

        * platform/ios-wk2/imported/w3c/web-platform-tests/html/dom/reflection-embedded-expected.txt: Removed.
        * platform/ios/imported/w3c/web-platform-tests/html/dom/reflection-embedded-expected.txt:

2017-04-26  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Uint8ClampedArray should be treated like an array, not an object
        https://bugs.webkit.org/show_bug.cgi?id=171364
        <rdar://problem/10873037>

        Reviewed by Sam Weinig.

        * inspector/model/remote-object-expected.txt:
        * inspector/model/remote-object.html:
        * platform/mac/inspector/model/remote-object-expected.txt:
        Test a Uint8ClampedArray is treated like an array.

2017-04-26  Saam Barati  <sbarati@apple.com>

        ASSERTION FAILED: inIndex != notFound in JSC::invalidParameterInSourceAppender()
        https://bugs.webkit.org/show_bug.cgi?id=170924
        <rdar://problem/31721052>

        Reviewed by Mark Lam.

        * js/let-syntax-expected.txt:

2017-04-26  Joanmarie Diggs  <jdiggs@igalia.com>

        [ATK] ARIA buttons which have a popup should be ATK_ROLE_PUSH_BUTTON; not ATK_ROLE_COMBO_BOX
        https://bugs.webkit.org/show_bug.cgi?id=171182

        Reviewed by Chris Fleizach.

        * accessibility/gtk/button-with-aria-haspopup-is-not-a-combobox-expected.txt: Added.
        * accessibility/gtk/button-with-aria-haspopup-is-not-a-combobox.html: Added.

2017-04-26  Tim Horton  <timothy_horton@apple.com>

        Should not drag x-apple-data-detectors links
        https://bugs.webkit.org/show_bug.cgi?id=171352
        <rdar://problem/31309081>

        Reviewed by Beth Dakin.

        * fast/events/do-not-drag-and-drop-data-detectors-link-expected.txt: Added.
        * fast/events/do-not-drag-and-drop-data-detectors-link.html: Added.

2017-04-26  Tim Horton  <timothy_horton@apple.com>

        Revert accidentally smushed commit.

        * TestExpectations:
        * fast/events/do-not-drag-and-drop-data-detectors-link-expected.txt: Removed.
        * fast/events/do-not-drag-and-drop-data-detectors-link.html: Removed.
        * platform/mac/TestExpectations:

2017-04-26  Matt Lewis  <jlewis3@apple.com>

        Re-baseline inspector/dom/getAccessibilityPropertiesForNode.html after r215821
        https://bugs.webkit.org/show_bug.cgi?id=171346

        Unreviewed test gardening.

        * inspector/dom/getAccessibilityPropertiesForNode-expected.txt:

2017-04-26  Joanmarie Diggs  <jdiggs@igalia.com>

        [ATK] Elements with a defined, non-false value for aria-current should expose ATK_STATE_ACTIVE
        https://bugs.webkit.org/show_bug.cgi?id=171163

        Reviewed by Chris Fleizach.

        * accessibility/gtk/aria-current-changed-notification-expected.txt: Added.
        * accessibility/gtk/aria-current-changed-notification.html: Added.
        * accessibility/gtk/aria-current-expected.txt: Added.
        * accessibility/gtk/aria-current.html: Added.

2017-04-26  Youenn Fablet  <youenn@apple.com>

        LayoutTest webrtc/datachannel/bufferedAmountLowThreshold.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=170701

        Reviewed by Eric Carlson.

        * platform/mac-wk1/TestExpectations: Removing flaky expectation.
        * webrtc/datachannel/bufferedAmountLowThreshold-expected.txt:
        * webrtc/datachannel/bufferedAmountLowThreshold.html:

2017-04-26  Said Abou-Hallawa  <sabouhallawa@apple.com>

        Restrict WebKit image formats to a known whitelist
        https://bugs.webkit.org/show_bug.cgi?id=170700

        Reviewed by Tim Horton.

        * fast/images/image-formats-support-expected.txt: Added.
        * fast/images/image-formats-support.html: Added.
        * fast/images/resources/100x100-red-psd-renamed.png: Added.
        * fast/images/resources/100x100-red-tga-renamed.png: Added.
        * fast/images/resources/100x100-red.psd: Added.
        * fast/images/resources/100x100-red.tga: Added.

2017-04-26  Matt Lewis  <jlewis3@apple.com>

        Mark swipe/main-frame-pinning-requirement.html as a flaky failure on mac-wk2.
        https://bugs.webkit.org/show_bug.cgi?id=170484

        Reviewed by Alexey Proskuryakov.

        * platform/mac-wk2/TestExpectations:

2017-04-26  Chris Dumez  <cdumez@apple.com>

        Re-sync html/browsers/the-window-object web-platform-tests from upstream
        https://bugs.webkit.org/show_bug.cgi?id=171313

        Reviewed by Alex Christensen.

        * tests-options.json:

2017-04-26  Joanmarie Diggs  <jdiggs@igalia.com>

        [ATK] Implement support for new ARIA 1.1 values of aria-haspopup
        https://bugs.webkit.org/show_bug.cgi?id=171164

        Reviewed by Chris Fleizach.

        In addition to the new test, update xml-roles-exposed.html's expectations
        because the implicit value of aria-haspopup for the combobox role is now
        listbox, and that value should be exposed via an AtkObject attribute.

        * accessibility/gtk/aria-haspopup-expected.txt: Added.
        * accessibility/gtk/aria-haspopup.html: Added.
        * accessibility/gtk/xml-roles-exposed-expected.txt:

2017-04-26  Simon Fraser  <simon.fraser@apple.com>

        http/tests/frame-throttling tests failing on iOS
        https://bugs.webkit.org/show_bug.cgi?id=171314
        rdar://problem/31691134

        Reviewed by Chris Dumez.

        The tests use UIHelper.activateAt(), which in DumpRenderTree dispatches mouse events via EventSender, and in iOS WK2 uses
        UIScriptController to dispatch touch events. The former just use standard hit testing, which works fine.
        The latter go via Frame::qualifyingNodeAtViewportLocation(), which calls ancestorRespondingToClickEvents()
        and does area hit testing, and this fails to find anything clickable inside the <iframe>s.

        Fix by putting a div with an onlick handler inside the iframes, and adjusting the click
        locations.

        * http/tests/frame-throttling/raf-throttle-in-cross-origin-subframe.html:
        * http/tests/frame-throttling/resources/requestAnimationFrame-frame.html:
        * http/tests/frame-throttling/resources/timer-throttling-frame.html:
        * http/tests/frame-throttling/timer-throttle-in-cross-origin-subframe.html:

2017-04-26  Matt Lewis  <jlewis3@apple.com>

        Removing Flaky timeout expectation for swipe/main-frame-pinning-requirement.html.
        https://bugs.webkit.org/show_bug.cgi?id=161887

        Reviewed by Tim Horton.

        * platform/mac-wk2/TestExpectations:

2017-04-25  Dean Jackson  <dino@apple.com>

        [Color] Make gradients work with ExtendedColors
        https://bugs.webkit.org/show_bug.cgi?id=171315
        <rdar://problems/31830177>

        Reviewed by Antoine Quint.

        Test for gradients using the color() syntax. Unfortunately,
        due to rounding errors, we can't use a ref test for some
        transparent colors, so comment them out for the moment.
        These can be re-enabled when we can specify a tolerance
        value for image comparison in the testing framework.

        * css3/color/gradients-expected.html: Added.
        * css3/color/gradients.html: Added.

2017-04-26  Zalan Bujtas  <zalan@apple.com>

        Forced page break on :after triggers infinite loop in column balancing
        https://bugs.webkit.org/show_bug.cgi?id=171309
        rdar://problem/26285884

        Reviewed by David Hyatt.

        * fast/multicol/infinite-loop-when-forced-break-expected.txt: Added.
        * fast/multicol/infinite-loop-when-forced-break.html: Added.

2017-04-26  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r215767.

        The LayoutTest for this change is a flaky failure.

        Reverted changeset:

        "Restrict WebKit image formats to a known whitelist"
        https://bugs.webkit.org/show_bug.cgi?id=170700
        http://trac.webkit.org/changeset/215767

2017-04-24  Sergio Villar Senin  <svillar@igalia.com>

        [css-grid] Remove most of the usage of SizingOperation
        https://bugs.webkit.org/show_bug.cgi?id=171225

        Reviewed by Darin Adler.

        Added a new test case which was working correctly but that was not properly tested before.

        * fast/css-grid-layout/grid-track-sizing-with-percentages-and-orthogonal-flows-expected.txt:
        * fast/css-grid-layout/grid-track-sizing-with-percentages-and-orthogonal-flows.html:

2017-04-25  Joseph Pecoraro  <pecoraro@apple.com>

        [mac-wk1 Debug] LayoutTest http/tests/inspector/network/resource-sizes-network.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=170953

        Reviewed by Brian Burg.

        * http/tests/inspector/network/resource-sizes-disk-cache.html:
        * http/tests/inspector/network/resource-sizes-network.html:
        Read the entire data to ensure the load is complete before we notify the frontend.

        * platform/mac-wk1/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        Unflake these tests, they should be more reliable now.

2017-04-25  Youenn Fablet  <youenn@apple.com>

        fast/mediastream/RTCPeerConnection-icecandidate-event.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=171242

        Reviewed by Alex Christensen.

        * TestExpectations:
        * fast/mediastream/RTCPeerConnection-icecandidate-event-expected.txt:
        * fast/mediastream/RTCPeerConnection-icecandidate-event.html: Updating test to be more deterministic.

2017-04-25  Brent Fulgham  <bfulgham@apple.com>

        Relax the event firing ASSERT for Attr changes
        https://bugs.webkit.org/show_bug.cgi?id=171236
        <rdar://problem/30516349>

        Reviewed by Dean Jackson.

        * fast/dom/HTMLLinkElement/event-while-removing-attribute-expected.txt: Added.
        * fast/dom/HTMLLinkElement/event-while-removing-attribute.html: Added.

2017-04-25  Dean Jackson  <dino@apple.com>

        REGRESSION (r214129): fast/media/mq-prefers-reduced-motion.html fails
        https://bugs.webkit.org/show_bug.cgi?id=171303
        <rdar://problem/31434879>

        Reviewed by Brent Fulgham.

        This particular test was calling notifyDone() from within
        a callback triggered by the UIScriptController script, which
        meant that by the time the controller tried to call its callback,
        the test had finished.

        * fast/media/mq-prefers-reduced-motion-matchMedia.html: Make sure
        notifyDone is called after both the callback-like functions have
        triggered.

2017-04-25  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Introduce shorter time-to-live for cookie partition whitelisting
        https://bugs.webkit.org/show_bug.cgi?id=171295
        <rdar://problem/31823818>

        Reviewed by Brent Fulgham.

        * http/tests/loading/resourceLoadStatistics/partitioned-and-unpartitioned-cookie-deletion.html:
            Changed a TestRunner function name to
            statisticsFireShouldPartitionCookiesHandlerForOneDomain().
        * http/tests/loading/resourceLoadStatistics/partitioned-and-unpartitioned-cookie-with-partitioning-timeout-expected.txt: Added.
        * http/tests/loading/resourceLoadStatistics/partitioned-and-unpartitioned-cookie-with-partitioning-timeout.html: Added.
        * http/tests/loading/resourceLoadStatistics/partitioned-cookies-with-and-without-user-interaction.html:
            Changed a TestRunner function name to
            statisticsFireShouldPartitionCookiesHandlerForOneDomain().

2017-04-25  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r215476.
        https://bugs.webkit.org/show_bug.cgi?id=171304

        "It broke JSBench" (Requested by saamyjoon on #webkit).

        Reverted changeset:

        "[ES6]. Implement Annex B.3.3 function hoisting rules for
        eval"
        https://bugs.webkit.org/show_bug.cgi?id=163208
        http://trac.webkit.org/changeset/215476

2017-04-25  Saam Barati  <sbarati@apple.com>

        JSArray::isArrayPrototypeIteratorProtocolFastAndNonObservable is wrong because it does not do the necessary checks on the base object
        https://bugs.webkit.org/show_bug.cgi?id=171150
        <rdar://problem/31771880>

        Reviewed by Sam Weinig.

        * js/sequence-iterator-protocol-2-expected.txt: Added.
        * js/sequence-iterator-protocol-2.html: Added.
        * js/sequence-iterator-protocol-expected.txt: Added.
        * js/sequence-iterator-protocol.html: Added.

2017-04-25  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/pip-support/pip-support-click.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=165311

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-25  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/security/contentSecurityPolicy/1.1/module-scriptnonce-invalidnonce.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171301

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-04-25  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r215730.

        The LayoutTest for this change is a flaky timeout on mac-wk1
        debug.

        Reverted changeset:

        "Enable expired-only reload policy on Mac and iOS"
        https://bugs.webkit.org/show_bug.cgi?id=171264
        http://trac.webkit.org/changeset/215730

2017-04-25  Said Abou-Hallawa  <sabouhallawa@apple.com>

        Restrict WebKit image formats to a known whitelist
        https://bugs.webkit.org/show_bug.cgi?id=170700

        Reviewed by Tim Horton.

        * fast/images/image-formats-support-expected.txt: Added.
        * fast/images/image-formats-support.html: Added.
        * fast/images/resources/100x100-red-psd-renamed.png: Added.
        * fast/images/resources/100x100-red-tga-renamed.png: Added.
        * fast/images/resources/100x100-red.psd: Added.
        * fast/images/resources/100x100-red.tga: Added.

2017-04-25  Tim Horton  <timothy_horton@apple.com>

        Deduplicate some lines in the toplevel TestExpectations

        * TestExpectations:
        Remove a duplicate line and consolidate another.

2017-04-25  Chris Dumez  <cdumez@apple.com>

        Element.dataset.name incorrectly returns undefined
        https://bugs.webkit.org/show_bug.cgi?id=161454
        <rdar://problem/31818563>

        Reviewed by Mark Lam.

        Add layout test for JS caching bug on DOMStringMap that was fixed as part
        of a large named property getter refactoring in r210667.

        * fast/dom/dataset-caching-bug-expected.txt: Added.
        * fast/dom/dataset-caching-bug.html: Added.

2017-04-25  Myles C. Maxfield  <mmaxfield@apple.com>

        Supplementary Multilingual Plane Complex Scripts Rendered Incorrectly
        https://bugs.webkit.org/show_bug.cgi?id=171272
        <rdar://problem/30966764>

        Reviewed by Zalan Bujtas.

        * fast/text/kaithi-expected.html: Added.
        * fast/text/kaithi.html: Added.
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:

2017-04-25  Daniel Bates  <dabates@apple.com>

        [Cocoa][Win] Enable of X-Content-Type-Options: nosniff header
        https://bugs.webkit.org/show_bug.cgi?id=136452
        <rdar://problem/23412620>

        Reviewed by Brent Fulgham.

        Unskip nosniff tests on Mac, iOS and Windows and update expected results now that
        we support X-Content-Type-Options: nosniff.

        Merge Blink test from <https://src.chromium.org/viewvc/blink?revision=168570&view=revision>.

        * TestExpectations: Unskip all nosniff tests except imported/w3c/web-platform-tests/fetch/nosniff/importscripts.html.
        We need to fix <https://bugs.webkit.org/show_bug.cgi?id=171248> before we can unskip it.
        When running the nosniff Web Platform Tests (WPT) dump console messages to standard error
        to avoid a difference of console message ordering due to the non-determinism of the WPT
        tests from affecting the matching of the expected result.
        * http/tests/security/contentTypeOptions/nosniff-dynamic-script-blocked-expected.txt: Added.
        * http/tests/security/contentTypeOptions/nosniff-dynamic-script-blocked.html: Copied from LayoutTests/http/tests/security/contentTypeOptions/nosniff-script-blocked.html.
        * http/tests/security/contentTypeOptions/nosniff-script-blocked-expected.txt: Update expected result.
        * http/tests/security/contentTypeOptions/nosniff-script-blocked.html: Substitute the not executable
        MIME type "text/xx-javascript" for "text/x-javascript" as the latter is an acceptable MIME type for
        JavaScript scripts as per the Fetch standard, <https://html.spec.whatwg.org/multipage/scripting.html#javascript-mime-type> (30 March 2017).
        * http/tests/security/contentTypeOptions/nosniff-script-without-content-type-blocked-expected.txt: Update
        expected result.
        * platform/gtk/TestExpectations: Skip the nosniff tests as GTK does not enable ENABLE(NOSNIFF).
        * platform/ios/TestExpectations: Unskip nosniff tests.
        * platform/mac/TestExpectations: Ditto.
        * platform/win/TestExpectations: Ditto.
        * platform/wk2/TestExpectations: Ditto.

2017-04-25  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/inspector/network/resource-sizes-disk-cache.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170971

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-04-25  Chris Dumez  <cdumez@apple.com>

        Content-Disposition header filename is ignored when 'download' attribute is specified in HTML
        https://bugs.webkit.org/show_bug.cgi?id=171239
        <rdar://problem/31789855>

        Reviewed by Alex Christensen.

        * http/tests/security/anchor-download-allow-sameorigin.html:
        Stop using attachment.php as resource for this download attribute test because attachment.php
        returns a Content-Disposition header with a filename. Given the behavior change in this patch,
        this resource is no longer suitable for testing the download attribute.

        * http/tests/download/anchor-download-attribute-content-disposition-expected.txt: Added.
        * http/tests/download/anchor-download-attribute-content-disposition.html: Added.
        * http/tests/download/resources/content-disposition-pass.php: Added.
        Add layout test coverage.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:
        Skip new test on platforms where the download attribute is not supported.

2017-04-25  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline fast/canvas/canvas-crash.html for ios-simulator.
        https://bugs.webkit.org/show_bug.cgi?id=171238

        Unreviewed test gardening.

        * platform/ios-simulator/fast/canvas/canvas-crash-expected.txt: Added.

2017-04-25  Antti Koivisto  <antti@apple.com>

        Enable expired-only reload policy on Mac and iOS
        https://bugs.webkit.org/show_bug.cgi?id=171264
        <rdar://problem/31807637>

        Reviewed by Andreas Kling.

        * fast/loader/display-image-unset-can-block-image-and-can-reload-in-place.html:

        WebKitDisplayImages preference blocks loads, it does not prevent images already in memory cache from displaying.
        Modify the test to clear the memory cache so it still tests what it is supposed to.

2017-04-25  Frederic Wang  <fwang@igalia.com>

        Import W3C tests for the CSSOM View module
        https://bugs.webkit.org/show_bug.cgi?id=171215

        Reviewed by Youenn Fablet.

        * TestExpectations: Skip some completely failing CSSOM View tests.
        * platform/ios-simulator/imported/w3c/web-platform-tests/cssom-view/Screen-pixelDepth-Screen-colorDepth001-actual.txt: Added. Add an expectation for iOS simulator, differing from other platform.
        * platform/ios-simulator/imported/w3c/web-platform-tests/cssom-view/scrolling-quirks-vs-nonquirks-expected.txt: Added. Ditto.

2017-04-24  Joseph Pecoraro  <pecoraro@apple.com>

        test262: test262/test/language/expressions/object/method-definition/early-errors-object-method-duplicate-parameters.js
        https://bugs.webkit.org/show_bug.cgi?id=171190

        Reviewed by Saam Barati.

        * js/parser-syntax-check-expected.txt:
        * js/script-tests/parser-syntax-check.js:
        Extend to cover method duplicate parameter cases.

2017-04-24  Jiewen Tan  <jiewen_tan@apple.com>

        LayoutTests crypto/subtle/ecdsa-generate-key-sign-verify-p384.html and crypto/subtle/ecdsa-generate-key-sign-verify-p256.html are flaky failures
        https://bugs.webkit.org/show_bug.cgi?id=171059
        <rdar://problem/31734958>

        Reviewed by Brent Fulgham.

        * TestExpectations:
        Remove test expectations.

2017-04-24  Manuel Rego Casasnovas  <rego@igalia.com>

        [selectors4] :focus-within should use the flat tree
        https://bugs.webkit.org/show_bug.cgi?id=170899

        Reviewed by Antti Koivisto.

        * TestExpectations: Remove test that is passing now.

2017-04-24  Nan Wang  <n_wang@apple.com>

        AX: Crash at WebCore::AXObjectCache::characterOffsetForIndex(int, WebCore::AccessibilityObject const*) + 703
        https://bugs.webkit.org/show_bug.cgi?id=171247

        Reviewed by Chris Fleizach.

        * accessibility/mac/input-string-for-range-crash-expected.txt: Added.
        * accessibility/mac/input-string-for-range-crash.html: Added.

2017-04-24  Youenn Fablet  <youenn@apple.com>

        Set defaults video getUserMedia constraints
        https://bugs.webkit.org/show_bug.cgi?id=171127

        Reviewed by Eric Carlson.

        * fast/mediastream/getUserMedia-default-expected.txt: Added.
        * fast/mediastream/getUserMedia-default.html: Added.

2017-04-24  Chris Dumez  <cdumez@apple.com>

        createElementNS() should now throw only InvalidCharacterError, not NamespaceError
        https://bugs.webkit.org/show_bug.cgi?id=171052

        Reviewed by Sam Weinig.

        Updated / rebaselined existing tests to reflect behavior change.

        * fast/dom/DOMImplementation/createDocument-namespace-err-expected.txt:
        * fast/dom/DOMImplementation/createDocumentType-err-expected.txt:
        * fast/dom/DOMImplementation/script-tests/createDocument-namespace-err.js:
        * fast/dom/DOMImplementation/script-tests/createDocumentType-err.js:
        * fast/dom/Document/createAttributeNS-namespace-err-expected.txt:
        * fast/dom/Document/createElementNS-namespace-err-expected.txt:
        * fast/dom/Document/script-tests/createAttributeNS-namespace-err.js:
        * fast/dom/Document/script-tests/createElementNS-namespace-err.js:
        * fast/dom/Element/script-tests/setAttributeNS-namespace-err.js:
        * fast/dom/Element/setAttributeNS-namespace-err-expected.txt:

2017-04-24  Chris Dumez  <cdumez@apple.com>

        REGRESSION (214503): Webkit crash under RenderElement::repaintForPausedImageAnimationsIfNeeded() when scrolling giphy pages
        https://bugs.webkit.org/show_bug.cgi?id=171243
        <rdar://problem/31715572>

        Reviewed by Antti Koivisto.

        Add layout test coverage.

        * fast/images/animated-gif-scrolling-crash-expected.txt: Added.
        * fast/images/animated-gif-scrolling-crash.html: Added.

2017-04-24  Saam Barati  <sbarati@apple.com>

        [mac debug] LayoutTest workers/wasm-long-compile-many.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=171120
        <rdar://problem/31781889>

        Rubber stamped by Mark Lam.

        Make the wasm binary we compile close to 50% smaller.

        * workers/wasm-resources/long-compile-many.js:
        (i.async.run):
        (i.worker.onmessage):
        * workers/wasm-resources/long-compile-worker.js:
        * workers/wasm-resources/long-compile.js:
        (async.run):
        (worker.onmessage):

2017-04-24  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/scrubber-support/scrubber-support-click.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171245

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-04-24  Joseph Pecoraro  <pecoraro@apple.com>

        test262: test262/test/language/computed-property-names/class/static/getter-prototype.js
        https://bugs.webkit.org/show_bug.cgi?id=170897

        Reviewed by Saam Barati.

        * js/class-syntax-declaration-expected.txt:
        * js/script-tests/class-syntax-declaration.js:
        Extend tests for static and non-static methods named "constructor" and "prototype".

2017-04-24  Joseph Pecoraro  <pecoraro@apple.com>

        Address some FIXMEs in JavaScript tests for bugs that have been fixed
        https://bugs.webkit.org/show_bug.cgi?id=171191

        Reviewed by JF Bastien.

        * js/dom/custom-constructors-expected.txt:
        * js/dom/script-tests/custom-constructors.js:
        * js/script-tests/keyword-method-names.js:

2017-04-24  Joseph Pecoraro  <pecoraro@apple.com>

        test262: test262/test/language/expressions/generators/yield-as-label.js
        https://bugs.webkit.org/show_bug.cgi?id=170979

        Reviewed by Saam Barati.

        * js/object-literal-shorthand-construction-expected.txt:
        * js/script-tests/object-literal-shorthand-construction.js:
        Extend this test to cover object literal shorthand with keywords.

        * js/dom/reserved-words-as-property-expected.txt:
        * js/let-syntax-expected.txt:
        * js/parser-syntax-check-expected.txt:
        Improved error messages.

2017-04-23  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r215674.
        https://bugs.webkit.org/show_bug.cgi?id=171212

        Possible unintended commit. This patch was on the wrong bug.
        (Requested by JoePeck on #webkit).

        Reverted changeset:

        "test262: test262/test/language/expressions/generators/yield-
        as-label.js"
        https://bugs.webkit.org/show_bug.cgi?id=170979
        http://trac.webkit.org/changeset/215674

2017-04-23  Joseph Pecoraro  <pecoraro@apple.com>

        test262: test262/test/language/expressions/generators/yield-as-label.js
        https://bugs.webkit.org/show_bug.cgi?id=170979

        Reviewed by Saam Barati.

        * js/object-literal-shorthand-construction-expected.txt:
        * js/script-tests/object-literal-shorthand-construction.js:
        Extend this test to cover object literal shorthand with keywords.

        * js/dom/reserved-words-as-property-expected.txt:
        * js/let-syntax-expected.txt:
        * js/parser-syntax-check-expected.txt:
        Improved error messages.

2017-04-21  Zalan Bujtas  <zalan@apple.com>

        REGRESSION(r205374): <li> content inside <ul> should mid-word wrap when word-break: break-word is present.
        https://bugs.webkit.org/show_bug.cgi?id=171108
        <rdar://problem/30271747>

        Reviewed by Dan Bernstein.

        * fast/replaced/ul-li-word-break-break-word-expected.html: Added.
        * fast/replaced/ul-li-word-break-break-word.html: Added.
        * fast/replaced/zero-width-image-force-linebreak-expected.html: Added.
        * fast/replaced/zero-width-image-force-linebreak.html: Added.

2017-04-21  Aaron Chu  <aaron_chu@apple.com>

        AX: FKA: Buttons need a visible focus indicator
        https://bugs.webkit.org/show_bug.cgi?id=171040
        <rdar://problem/30922548>

        Reviewed by Antoine Quint.

        * TestExpectations:
        * media/modern-media-controls/icon-button/icon-button-focus-state-expected.txt: Added.
        * media/modern-media-controls/icon-button/icon-button-focus-state.html: Added.
        * platform/mac/TestExpectations:

2017-04-21  Ryan Haddad  <ryanhaddad@apple.com>

        Mark inspector/debugger/tail-deleted-frames-this-value.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=169119

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-21  Chris Dumez  <cdumez@apple.com>

        Regression(r206240): XMLSerializer.serializeToString() does not properly escape '<' / '>' in attribute values
        https://bugs.webkit.org/show_bug.cgi?id=171132
        <rdar://problem/31426752>

        Reviewed by Ryosuke Niwa.

        Add layout test coverage. This test is passing in both Firefox and Chrome.

        * fast/dom/XMLSerializer-serializeToString-entities-expected.txt: Added.
        * fast/dom/XMLSerializer-serializeToString-entities.html: Added.

2017-04-21  Youenn Fablet  <youenn@apple.com>

        [ios-simulator] LayoutTest webrtc/multi-video.html is a flaky crash
        https://bugs.webkit.org/show_bug.cgi?id=170823
        <rdar://problem/31611583>

        Unreviewed.

        * TestExpectations: Reactivating test.

2017-04-21  Daniel Bates  <dabates@apple.com>

        [iOS] Skip http/tests/security/contentSecurityPolicy/{audio, video}-redirect-allowed2.html
        <rdar://problem/31690952>

        Rubber-stamped by Jer Noble.

        We can enable these tests again once we fix <rdar://problem/25780035>.

        * platform/ios/TestExpectations:

2017-04-21  Per Arne Vollan  <pvollan@apple.com>

        Validate vImage arguments
        https://bugs.webkit.org/show_bug.cgi?id=171109

        Reviewed by Brent Fulgham.

        * fast/canvas/canvas-crash-expected.txt: Added.
        * fast/canvas/canvas-crash.html: Added.

2017-04-21  Ryan Haddad  <ryanhaddad@apple.com>

        Mark webrtc/datachannel/bufferedAmountLowThreshold.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170701

        Unreviewed test gardening.

        * TestExpectations:

2017-04-21  Andy VanWagoner  <thetalecrafter@gmail.com>

        [INTL] Implement Intl.DateTimeFormat.prototype.formatToParts
        https://bugs.webkit.org/show_bug.cgi?id=169458

        Reviewed by JF Bastien.

        Add tests for formatToParts

        * js/intl-datetimeformat-expected.txt:
        * js/script-tests/intl-datetimeformat.js:

2017-04-21  Timothy Horton  <timothy_horton@apple.com>

        Expose obscured insets to web content (as "safe area insets")
        https://bugs.webkit.org/show_bug.cgi?id=171013
        <rdar://problem/31564652>

        Reviewed by Wenson Hsieh and Dave Hyatt.

        * TestExpectations:
        * fast/css/variables/constants/invalid-constant-name-fallback-expected.html: Added.
        * fast/css/variables/constants/invalid-constant-name-fallback.html: Added.
        * fast/css/variables/constants/ios/safe-area-inset-set-expected.html: Added.
        * fast/css/variables/constants/ios/safe-area-inset-set.html: Added.
        * fast/css/variables/constants/safe-area-inset-cannot-override-expected.html: Added.
        * fast/css/variables/constants/safe-area-inset-cannot-override.html: Added.
        * fast/css/variables/constants/safe-area-inset-zero-expected.html: Added.
        * fast/css/variables/constants/safe-area-inset-zero.html: Added.
        * platform/ios-wk2/TestExpectations:

2017-04-20  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r215597.
        https://bugs.webkit.org/show_bug.cgi?id=171102

        Made all tests crash under GuardMalloc (Requested by ap on
        #webkit).

        Reverted changeset:

        "Expose obscured insets to web content (as "safe area
        insets")"
        https://bugs.webkit.org/show_bug.cgi?id=171013
        http://trac.webkit.org/changeset/215597

2017-04-20  Timothy Horton  <timothy_horton@apple.com>

        Expose obscured insets to web content (as "safe area insets")
        https://bugs.webkit.org/show_bug.cgi?id=171013
        <rdar://problem/31564652>

        Reviewed by Wenson Hsieh and Dave Hyatt.

        * TestExpectations:
        * fast/css/variables/constants/invalid-constant-name-fallback-expected.html: Added.
        * fast/css/variables/constants/invalid-constant-name-fallback.html: Added.
        * fast/css/variables/constants/ios/safe-area-inset-set-expected.html: Added.
        * fast/css/variables/constants/ios/safe-area-inset-set.html: Added.
        * fast/css/variables/constants/safe-area-inset-cannot-override-expected.html: Added.
        * fast/css/variables/constants/safe-area-inset-cannot-override.html: Added.
        * fast/css/variables/constants/safe-area-inset-zero-expected.html: Added.
        * fast/css/variables/constants/safe-area-inset-zero.html: Added.
        * platform/ios-wk2/TestExpectations:

2017-04-20  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/tracks-support/tracks-support-click-track-in-panel.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=169109

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-20  Ryan Haddad  <ryanhaddad@apple.com>

        Mark imported/w3c/web-platform-tests/WebCryptoAPI/sign_verify/ecdsa.worker.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170921

        Unreviewed test gardening.

        * TestExpectations:

2017-04-20  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Add regular expression support to XHR breakpoints
        https://bugs.webkit.org/show_bug.cgi?id=170099
        <rdar://problem/31558082>

        Reviewed by Joseph Pecoraro.

        Update tests and expectations for new XHR breakpoint type.

        * inspector/dom-debugger/xhr-breakpoints-expected.txt:
        * inspector/dom-debugger/xhr-breakpoints.html:

2017-04-20  Wenson Hsieh  <wenson_hsieh@apple.com>

        Inline anchor elements cannot be dragged when starting the drag from a block descendant
        https://bugs.webkit.org/show_bug.cgi?id=171062
        <rdar://problem/31697835>

        Reviewed by Tim Horton.

        Adds a new test on WK1 Mac to verify that link dragging succeeds when the link's anchor element is inline and
        the drag is started from a block element under the link.

        * fast/events/drag-and-drop-link-containing-block-expected.txt: Added.
        * fast/events/drag-and-drop-link-containing-block.html: Added.
        * platform/ios/TestExpectations:
        * platform/mac-wk2/TestExpectations:

        Skip the test on iOS and Mac WK2.

2017-04-20  Aaron Chu  <aaron_chu@apple.com>

        AX: Modern Media Controls Timeline slider should be operable
        https://bugs.webkit.org/show_bug.cgi?id=170250

        Reviewed by Antoine Quint.

        * media/modern-media-controls/scrubber/scrubber-has-correct-ax-label-expected.txt: Added.
        * media/modern-media-controls/scrubber/scrubber-has-correct-ax-label.html: Added.

2017-04-18  Filip Pizlo  <fpizlo@apple.com>

        Optimize SharedArrayBuffer in the DFG+FTL
        https://bugs.webkit.org/show_bug.cgi?id=164108

        Reviewed by Saam Barati.
        
        Add a test of futex performance.

        * workers/sab/cascade_lock-worker.js: Added.
        (onmessage):
        * workers/sab/cascade_lock.html: Added.
        * workers/sab/worker-resources.js:
        (cascadeLockSlow):
        (cascadeLock):
        (cascadeUnlock):

2017-04-20  Jon Lee  <jonlee@apple.com>

        Update pip placard to "picture in picture"
        https://bugs.webkit.org/show_bug.cgi?id=171036
        rdar://problem/30201536

        Reviewed by Antoine Quint.

        * media/modern-media-controls/pip-placard/pip-placard-expected.txt: Updated expected results.
        * media/modern-media-controls/pip-placard/pip-placard.html:

2017-04-20  Ryan Haddad  <ryanhaddad@apple.com>

        Mark two crypto/subtle/ecdsa LayoutTests as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=171059

        Unreviewed test gardening.

        * TestExpectations:

2017-04-20  Ryan Haddad  <ryanhaddad@apple.com>

        Mark memory/memory-pressure-simulation.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170629

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-04-20  Carlos Alberto Lopez Perez  <clopez@igalia.com>

        [GTK] Update layout tests expectations after r215556
        https://bugs.webkit.org/show_bug.cgi?id=170942

        Unreviewed gardening.

        * platform/gtk/TestExpectations:

2017-04-20  Youenn Fablet  <youenn@apple.com>

        RTCPeerConnection is stopping its backend twice sometimes
        https://bugs.webkit.org/show_bug.cgi?id=171043

        Reviewed by Eric Carlson.

        * webrtc/closing-peerconnection-expected.txt: Added.
        * webrtc/closing-peerconnection.html: Added.

2017-04-20  Joanmarie Diggs  <jdiggs@igalia.com>

        [ATK] Implement support for DPub ARIA roles
        https://bugs.webkit.org/show_bug.cgi?id=170679

        Reviewed by Chris Fleizach.

        Update tests and expectations to reflect the modified WebCore Accessibility
        role mappings, and the corresponding changes for the platforms.

        * accessibility/gtk/xml-roles-exposed-expected.txt:
        * accessibility/gtk/xml-roles-exposed.html:
        * accessibility/roles-exposed.html:
        * inspector/dom/getAccessibilityPropertiesForNode-expected.txt:
        * platform/gtk/TestExpectations:
        * platform/gtk/accessibility/roles-exposed-expected.txt:
        * platform/mac/accessibility/roles-exposed-expected.txt:

2017-04-19  Ryan Haddad  <ryanhaddad@apple.com>

        Mark imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.worker.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170907

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-04-19  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline imported/w3c/web-platform-tests/html/dom/reflection-embedded.html.

        Unreviewed test gardening.

        * platform/ios-wk2/imported/w3c/web-platform-tests/html/dom/reflection-embedded-expected.txt:

2017-04-19  Ryan Haddad  <ryanhaddad@apple.com>

        Mark imported/w3c/web-platform-tests/XMLHttpRequest/getallresponseheaders-cl.htm as failing.
        https://bugs.webkit.org/show_bug.cgi?id=171031

        Unreviewed test gardening.

        * TestExpectations:

2017-04-19  Ryan Haddad  <ryanhaddad@apple.com>

        Remove two tests after r215515.
        https://bugs.webkit.org/show_bug.cgi?id=171014

        Unreviewed test gardening.

        * TestExpectations:

2017-04-19  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline tests after r215515.
        https://bugs.webkit.org/show_bug.cgi?id=171014

        Unreviewed test gardening.

        * TestExpectations:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/dom/reflection-embedded-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/html/browsers/browsing-the-web/history-traversal/persisted-user-state-restoration/scroll-restoration-fragment-scrolling-cross-origin-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/html/dom/reflection-embedded-expected.txt:

2017-04-19  Alex Christensen  <achristensen@webkit.org>

        Parsing large XML strings fails
        https://bugs.webkit.org/show_bug.cgi?id=170999
        <rdar://problem/17336267>

        Reviewed by Brady Eidson.

        * fast/dom/xml-large-expected.txt: Added.
        * fast/dom/xml-large.html: Added.

2017-04-19  Chris Fleizach  <cfleizach@apple.com>

        AX: <hr> should use a different role description than interactive separators
        https://bugs.webkit.org/show_bug.cgi?id=170317
        <rdar://problem/31363024>

        Reviewed by Joanmarie Diggs.

        * accessibility/mac/hr-element-expected.txt:
        * accessibility/mac/hr-element.html:

2017-04-19  JF Bastien  <jfbastien@apple.com>

        Unreviewed, rolling out r215520.

        Broke Debian 8

        Reverted changeset:

        "[INTL] Implement Intl.DateTimeFormat.prototype.formatToParts"
        https://bugs.webkit.org/show_bug.cgi?id=169458
        http://trac.webkit.org/changeset/215520

2017-04-19  Andy VanWagoner  <thetalecrafter@gmail.com>

        [INTL] Implement Intl.DateTimeFormat.prototype.formatToParts
        https://bugs.webkit.org/show_bug.cgi?id=169458

        Reviewed by JF Bastien.

        Add tests for formatToParts

        * js/intl-datetimeformat-expected.txt:
        * js/script-tests/intl-datetimeformat.js:

2017-04-19  Youenn Fablet  <youenn@apple.com>

        Import web-platform-tests/tools
        https://bugs.webkit.org/show_bug.cgi?id=170718

        Reviewed by Alex Christensen.

        * TestExpectations:
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/api/cors/cors-basic.any-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/api/cors/cors-basic.any.worker-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/api/cors/cors-no-preflight.any-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/api/cors/cors-no-preflight.any.worker-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/api/cors/cors-origin.any-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/api/cors/cors-origin.any.worker-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/api/request/request-cache-only-if-cached-expected.txt: Renamed from LayoutTests/platform/mac/imported/w3c/web-platform-tests/fetch/api/request/request-cache-only-if-cached-expected.txt.
        * tests-options.json:

2017-04-19  Antti Koivisto  <antti@apple.com>

        Avoid repaints for invisible animations on tumblr.com/search/aww
        https://bugs.webkit.org/show_bug.cgi?id=170986
        <rdar://problem/28644580>

        Reviewed by Andreas Kling.

        * fast/repaint/mutate-non-visible-expected.txt: Added.
        * fast/repaint/mutate-non-visible.html: Added.

2017-04-18  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Check both origins and cookieHostNames for domain matches in data removal
        https://bugs.webkit.org/show_bug.cgi?id=170763
        <rdar://problem/31573091>

        Reviewed by Alex Christensen.

        * http/tests/loading/resourceLoadStatistics/partitioned-and-unpartitioned-cookie-deletion-expected.txt: Added.
        * http/tests/loading/resourceLoadStatistics/partitioned-and-unpartitioned-cookie-deletion.html: Added.

2017-04-18  Dean Jackson  <dino@apple.com>

        Update ANGLE
        https://bugs.webkit.org/show_bug.cgi?id=170941
        <rdar://problem/31633999>

        Reviewed by Alex Christensen.

        * fast/canvas/webgl/fragment-shader-assertion-expected.txt:

2017-04-18  Brent Fulgham  <bfulgham@apple.com>

        Correct handling of isolatedWorld in event handling
        https://bugs.webkit.org/show_bug.cgi?id=65589
        <rdar://problem/24097804>

        Reviewed by Geoffrey Garen.

        This following test cases are from the following Blink change:
        https://src.chromium.org/viewvc/blink?revision=152377&view=revision

        * fast/dom/event-attrs-isolated-world-expected.txt: Added.
        * fast/dom/event-attrs-isolated-world.html: Added.
        * http/tests/security/isolatedWorld/onclick-attribute-expected.txt: Added.
        * http/tests/security/isolatedWorld/onclick-attribute.html: Added.

2017-04-18  Wenson Hsieh  <wenson_hsieh@apple.com>

        [WK2] Cannot select text on nytimes.com when the selection granularity is WKSelectionGranularityCharacter
        https://bugs.webkit.org/show_bug.cgi?id=170968
        <rdar://problem/31692560>

        Reviewed by Dan Bernstein.

        Adds a new layout test checking that text within a node with a click handler can be selected when using
        character selection granularity.

        * editing/selection/character-granularity-select-text-with-click-handler-expected.txt: Added.
        * editing/selection/character-granularity-select-text-with-click-handler.html: Added.

2017-04-18  Joseph Pecoraro  <pecoraro@apple.com>

        [mac-wk1 Debug] LayoutTest http/tests/inspector/network/resource-sizes-network.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=170953

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:
        Mark a flakey test in WebKit1.

2017-04-17  Sam Weinig  <sam@webkit.org>

        [WebIDL] Make annotated types first class allowing them to be used in sequences and unions
        https://bugs.webkit.org/show_bug.cgi?id=170926

        Reviewed by Chris Dumez.

        * js/dom/webidl-type-mapping-expected.txt:
        * js/dom/webidl-type-mapping.html:
        Update test to account for testDictionary now being an attribute,
        and test that the annotated type members behave correctly.

2017-04-18  Oleksandr Skachkov  <gskachkov@gmail.com>

        [ES6]. Implement Annex B.3.3 function hoisting rules for eval
        https://bugs.webkit.org/show_bug.cgi?id=163208

        Reviewed by Saam Barati.

        * inspector/runtime/evaluate-CommandLineAPI-expected.txt:
        * inspector/runtime/evaluate-CommandLineAPI.html:
        * js/parser-syntax-check-expected.txt:
        * js/script-tests/parser-syntax-check.js:

2017-04-18  Antti Koivisto  <antti@apple.com>

        Enable optimized layer flushes on iOS
        https://bugs.webkit.org/show_bug.cgi?id=170938
        <rdar://problem/31677395>

        Reviewed by Simon Fraser.

        Add test verifying that tiles get created for touch overflow scrolling.

        * compositing/ios/overflow-scroll-touch-tiles-expected.txt: Added.
        * compositing/ios/overflow-scroll-touch-tiles.html: Added.

2017-04-18  Ryan Haddad  <ryanhaddad@apple.com>

        Update TestExpectations for "selectors4" tests on mac-wk1.
        https://trac.webkit.org/changeset/215457/webkit

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-04-18  Manuel Rego Casasnovas  <rego@igalia.com>

        [css-grid] Add support for percentage gaps
        https://bugs.webkit.org/show_bug.cgi?id=170764

        Reviewed by Sergio Villar Senin.

        Import tests from Blink.

        * fast/css-grid-layout/grid-gutters-as-percentage-expected.txt: Added.
        * fast/css-grid-layout/grid-gutters-as-percentage.html: Added.
        * fast/css-grid-layout/grid-gutters-get-set-expected.txt:
        * fast/css-grid-layout/grid-gutters-get-set.html:

2017-04-18  Miguel Gomez  <magomez@igalia.com>

        [GTK+] Crash in WebCore::ImageFrame::ImageFrame()
        https://bugs.webkit.org/show_bug.cgi?id=170332

        Reviewed by Carlos Garcia Campos.

        Added a test to ensure that the browser doesn't crash when loading a PNG image which
        reports a wrong number of frames.

        * fast/images/bad-png-missing-fdat-expected.txt: Added.
        * fast/images/bad-png-missing-fdat.html: Added.
        * fast/images/resources/bad-png-missing-fdAT.png: Added.

2017-04-18  Manuel Rego Casasnovas  <rego@igalia.com>

        [selectors4] Import W3C Test Suite
        https://bugs.webkit.org/show_bug.cgi?id=170898

        Reviewed by Youenn Fablet.

        * TestExpectations: Mark a few tests as failure linking to the related bugs.
        * platform/mac-wk1/TestExpectations: Marking some tests that have issues on WK1.

2017-04-18  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Add several test expectations.

        * platform/gtk/TestExpectations:

2017-04-17  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Doesn't show size of compressed content correctly
        https://bugs.webkit.org/show_bug.cgi?id=155112
        <rdar://problem/25006728>

        Reviewed by Alex Christensen and Timothy Hatcher.

        * http/tests/inspector/network/resource-sizes-disk-cache-expected.txt: Added.
        * http/tests/inspector/network/resource-sizes-disk-cache.html: Added.
        * http/tests/inspector/network/resource-sizes-memory-cache-expected.txt: Added.
        * http/tests/inspector/network/resource-sizes-memory-cache.html: Added.
        * http/tests/inspector/network/resource-sizes-network-expected.txt: Added.
        * http/tests/inspector/network/resource-sizes-network.html: Added.
        Test resource sizes under different load conditions.

        * platform/mac/http/tests/inspector/network/resource-sizes-memory-cache-expected.txt: Added.
        * platform/mac/http/tests/inspector/network/resource-sizes-network-expected.txt: Added.
        Older versions of macOS will not have the new metrics, but test their output anyways.

        * http/tests/inspector/network/resources/404.php: Added.
        * http/tests/inspector/network/resources/gzipped-lorem-no-content-length.php: Added.
        * http/tests/inspector/network/resources/gzipped-lorem.php: Added.
        * http/tests/inspector/network/resources/lorem.txt: Added.
        Different resources with fixed sizes (text, gzipped, 404 with fixed response).

        * http/tests/inspector/network/resources/resource-size-test.js: Added.
        (TestPage.registerInitializer.InspectorTest.gracefulExpectEquals):
        (TestPage.registerInitializer.window.addResourceSizeTest):
        (TestPage.registerInitializer):
        Shared test code for resource sizes.

        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:

2017-04-17  Youenn Fablet  <youenn@apple.com>

        Enable video autoplay when getUserMedia is on
        https://bugs.webkit.org/show_bug.cgi?id=170919

        Reviewed by Geoffrey Garen.

        * webrtc/video-autoplay-expected.txt: Added.
        * webrtc/video-autoplay.html: Added.

2017-04-17  Ryan Haddad  <ryanhaddad@apple.com>

        Skip webrtc/multi-video.html.
        https://bugs.webkit.org/show_bug.cgi?id=170823

        Unreviewed test gardening.

        * TestExpectations:

2017-04-17  Youenn Fablet  <youenn@apple.com>

        LayoutTest webrtc/video-mute.html is a flaky failure
        https://bugs.webkit.or
        g/show_bug.cgi?id=170704

        Reviewed by Eric Carlson.

        * webrtc/video-mute.html: Another try at making the test not flaky.

2017-04-17  Tim Horton  <timothy_horton@apple.com>

        Provide a viewport parameter to disable clipping to the safe area
        https://bugs.webkit.org/show_bug.cgi?id=170766
        <rdar://problem/31564634>

        Reviewed by Beth Dakin.

        * tiled-drawing/ios/viewport-clip-to-safe-area-no-gets-margin-tiles-expected.txt: Added.
        * tiled-drawing/ios/viewport-clip-to-safe-area-no-gets-margin-tiles.html: Added.
        * tiled-drawing/ios/viewport-clip-to-safe-area-yes-gets-no-margin-tiles-expected.txt: Added.
        * tiled-drawing/ios/viewport-clip-to-safe-area-yes-gets-no-margin-tiles.html: Added.

2017-04-14  Jiewen Tan  <jiewen_tan@apple.com>

        [WebCrypto] Add support for ECDSA
        https://bugs.webkit.org/show_bug.cgi?id=170789
        <rdar://problem/31588604>

        Reviewed by Brent Fulgham.

        * crypto/subtle/ec-generate-key-malformed-parameters-expected.txt:
        * crypto/subtle/ec-generate-key-malformed-parameters.html:
        * crypto/subtle/ec-import-key-malformed-parameters-expected.txt:
        * crypto/subtle/ec-import-key-malformed-parameters.html:
        * crypto/subtle/ecdh-generate-export-key-pkcs8-p256-expected.txt: Renamed from LayoutTests/crypto/subtle/ecdh-generate-export-pkcs8-p256-expected.txt.
        * crypto/subtle/ecdh-generate-export-key-pkcs8-p256.html: Renamed from LayoutTests/crypto/subtle/ecdh-generate-export-pkcs8-p256.html.
        * crypto/subtle/ecdh-generate-export-key-pkcs8-p384-expected.txt: Renamed from LayoutTests/crypto/subtle/ecdh-generate-export-pkcs8-p384-expected.txt.
        * crypto/subtle/ecdh-generate-export-key-pkcs8-p384.html: Renamed from LayoutTests/crypto/subtle/ecdh-generate-export-pkcs8-p384.html.
        * crypto/subtle/ecdsa-generate-export-jwk-key-expected.txt: Added.
        * crypto/subtle/ecdsa-generate-export-jwk-key.html: Added.
        * crypto/subtle/ecdsa-generate-export-key-pkcs8-expected.txt: Added.
        * crypto/subtle/ecdsa-generate-export-key-pkcs8.html: Added.
        * crypto/subtle/ecdsa-generate-export-key-raw-expected.txt: Added.
        * crypto/subtle/ecdsa-generate-export-key-raw.html: Added.
        * crypto/subtle/ecdsa-generate-export-key-spki-expected.txt: Added.
        * crypto/subtle/ecdsa-generate-export-key-spki.html: Added.
        * crypto/subtle/ecdsa-generate-key-expected.txt: Added.
        * crypto/subtle/ecdsa-generate-key-sign-verify-p256-expected.txt: Added.
        * crypto/subtle/ecdsa-generate-key-sign-verify-p256.html: Added.
        * crypto/subtle/ecdsa-generate-key-sign-verify-p384-expected.txt: Added.
        * crypto/subtle/ecdsa-generate-key-sign-verify-p384.html: Added.
        * crypto/subtle/ecdsa-generate-key.html: Added.
        * crypto/subtle/ecdsa-import-jwk-private-key-expected.txt: Added.
        * crypto/subtle/ecdsa-import-jwk-private-key.html: Added.
        * crypto/subtle/ecdsa-import-jwk-public-key-alg-256-expected.txt: Added.
        * crypto/subtle/ecdsa-import-jwk-public-key-alg-256.html: Added.
        * crypto/subtle/ecdsa-import-jwk-public-key-alg-384-expected.txt: Added.
        * crypto/subtle/ecdsa-import-jwk-public-key-alg-384.html: Added.
        * crypto/subtle/ecdsa-import-jwk-public-key-expected.txt: Added.
        * crypto/subtle/ecdsa-import-jwk-public-key.html: Added.
        * crypto/subtle/ecdsa-import-key-sign-p256-expected.txt: Added.
        * crypto/subtle/ecdsa-import-key-sign-p256.html: Added.
        * crypto/subtle/ecdsa-import-key-sign-p384-expected.txt: Added.
        * crypto/subtle/ecdsa-import-key-sign-p384.html: Added.
        * crypto/subtle/ecdsa-import-key-verify-p256-expected.txt: Added.
        * crypto/subtle/ecdsa-import-key-verify-p256.html: Added.
        * crypto/subtle/ecdsa-import-key-verify-p384-expected.txt: Added.
        * crypto/subtle/ecdsa-import-key-verify-p384.html: Added.
        * crypto/subtle/ecdsa-import-pkcs8-key-expected.txt: Added.
        * crypto/subtle/ecdsa-import-pkcs8-key.html: Added.
        * crypto/subtle/ecdsa-import-raw-key-expected.txt: Added.
        * crypto/subtle/ecdsa-import-raw-key.html: Added.
        * crypto/subtle/ecdsa-import-spki-key-expected.txt: Added.
        * crypto/subtle/ecdsa-import-spki-key.html: Added.
        * crypto/subtle/ecdsa-verify-malformed-parameters-expected.txt: Added.
        * crypto/subtle/ecdsa-verify-malformed-parameters.html: Added.
        * crypto/workers/subtle/ecdsa-import-key-sign-expected.txt: Added.
        * crypto/workers/subtle/ecdsa-import-key-sign.html: Added.
        * crypto/workers/subtle/ecdsa-import-key-verify-expected.txt: Added.
        * crypto/workers/subtle/ecdsa-import-key-verify.html: Added.
        * crypto/workers/subtle/resources/ecdsa-import-key-sign.js: Added.
        * crypto/workers/subtle/resources/ecdsa-import-key-verify.js: Added.

2017-04-17  Youenn Fablet  <youenn@apple.com>

        LayoutTestwebrtc/audio-replace-track.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=170837

        Reviewed by Eric Carlson.

        * webrtc/audio-replace-track.html: Updating the test to be less flaky.

2017-04-17  Youenn Fablet  <youenn@apple.com>

        RTCPeerConnection addTrack does not require a stream parameter
        https://bugs.webkit.org/show_bug.cgi?id=170894

        Reviewed by Alex Christensen.

        * webrtc/video-addTrack-expected.txt: Added.
        * webrtc/video-addTrack.html: Added.

2017-04-16  Joseph Pecoraro  <pecoraro@apple.com>

        test262: test262/test/built-ins/Object/prototype/toLocaleString/primitive_this_value.js
        https://bugs.webkit.org/show_bug.cgi?id=170882

        Reviewed by Saam Barati.

        * js/dom/object-prototype-toLocaleString-expected.txt:
        * js/dom/script-tests/object-prototype-toLocaleString.js:
        Test the case of toLocaleString where toString does not exist.

2017-04-16  Chris Dumez  <cdumez@apple.com>

        CMD+R / CMD+Q is considered as user interaction and beforeunload alert is shown
        https://bugs.webkit.org/show_bug.cgi?id=169995
        <rdar://problem/23798897>

        Reviewed by Sam Weinig.

        Add layout test coverage.

        * fast/events/beforeunload-alert-handled-keydown-expected.txt: Added.
        * fast/events/beforeunload-alert-handled-keydown.html: Added.
        * fast/events/beforeunload-alert-unhandled-keydown-expected.txt: Added.
        * fast/events/beforeunload-alert-unhandled-keydown.html: Added.

2017-04-16  Joseph Pecoraro  <pecoraro@apple.com>

        test262: test262/test/built-ins/Object/getOwnPropertyNames/15.2.3.4-4-44.js
        https://bugs.webkit.org/show_bug.cgi?id=170879

        Reviewed by Saam Barati.

        * js/Object-getOwnPropertyNames-expected.txt:
        * js/script-tests/Object-getOwnPropertyNames.js:

2017-04-14  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: WebSockets: messages with non-latin letters are displayed incorrectly
        https://bugs.webkit.org/show_bug.cgi?id=170760

        Reviewed by Joseph Pecoraro.

        Test sending and receiving text and binary (blob and array buffer) data.

        * http/tests/websocket/tests/hybi/inspector/binary-expected.txt: Added.
        * http/tests/websocket/tests/hybi/inspector/binary.html: Added.
        * http/tests/websocket/tests/hybi/inspector/binary_wsh.py: Added.
        (web_socket_do_extra_handshake):
        (web_socket_transfer_data):
        (all_distinct_bytes):
        * http/tests/websocket/tests/hybi/inspector/send-and-receive-expected.txt: Added.
        * http/tests/websocket/tests/hybi/inspector/send-and-receive.html: Added.
        * http/tests/websocket/tests/hybi/inspector/send-and-receive_wsh.py: Added.
        (web_socket_do_extra_handshake):
        (web_socket_transfer_data):

2017-04-14  Jiewen Tan  <jiewen_tan@apple.com>

        [WebCrypto] Support HKDF
        https://bugs.webkit.org/show_bug.cgi?id=170636
        <rdar://problem/23539827>

        Reviewed by Brent Fulgham.

        * TestExpectations:
        * crypto/subtle/ecdh-import-key-derive-hkdf-key-expected.txt: Added.
        * crypto/subtle/ecdh-import-key-derive-hkdf-key.html: Added.
        * crypto/subtle/hkdf-derive-bits-malformed-parametrs-expected.txt: Added.
        * crypto/subtle/hkdf-derive-bits-malformed-parametrs.html: Added.
        * crypto/subtle/hkdf-import-key-derive-bits-expected.txt: Added.
        * crypto/subtle/hkdf-import-key-derive-bits.html: Added.
        * crypto/subtle/hkdf-import-key-derive-hmac-key-expected.txt: Added.
        * crypto/subtle/hkdf-import-key-derive-hmac-key.html: Added.
        * crypto/subtle/hkdf-import-key-expected.txt: Added.
        * crypto/subtle/hkdf-import-key-malformed-parameters-expected.txt: Added.
        * crypto/subtle/hkdf-import-key-malformed-parameters.html: Added.
        * crypto/subtle/hkdf-import-key.html: Added.
        * crypto/workers/subtle/hkdf-import-key-derive-bits-expected.txt: Added.
        * crypto/workers/subtle/hkdf-import-key-derive-bits.html: Added.
        * crypto/workers/subtle/hkdf-import-key-derive-hmac-key-expected.txt: Added.
        * crypto/workers/subtle/hkdf-import-key-derive-hmac-key.html: Added.
        * crypto/workers/subtle/hkdf-import-key-expected.txt: Added.
        * crypto/workers/subtle/hkdf-import-key.html: Added.
        * crypto/workers/subtle/resources/hkdf-import-key-derive-bits.js: Added.
        * crypto/workers/subtle/resources/hkdf-import-key-derive-hmac-key.js: Added.
        * crypto/workers/subtle/resources/hkdf-import-key.js: Added.

2017-04-14  Ryan Haddad  <ryanhaddad@apple.com>

        Skip workers/wasm-* LayoutTests on ios-simulator.

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2017-04-14  Zalan Bujtas  <zalan@apple.com>

        text-align start / end failure in table cells
        https://bugs.webkit.org/show_bug.cgi?id=141417
        <rdar://problem/31051672>

        Reviewed by Antti Koivisto.

        * fast/table/center-th-when-parent-has-initial-text-align-expected.html: Added.
        * fast/table/center-th-when-parent-has-initial-text-align.html: Added.

2017-04-13  Saam Barati  <sbarati@apple.com>

        WebAssembly: We should be able to postMessage a JSWebAssemblyModule
        https://bugs.webkit.org/show_bug.cgi?id=170573

        Reviewed by Filip Pizlo.

        * storage/indexeddb/resources/wasm-exceptions.js: Added.
        (const._fail):
        (const.isNotA.assert.isNotA):
        (const):
        (switch.typeof):
        (Builder):
        (Builder.prototype.setChecked):
        (Builder.prototype.setPreamble):
        (Builder.prototype._functionIndexSpaceKeyHash):
        (Builder.prototype._registerFunctionToIndexSpace):
        (Builder.prototype._getFunctionFromIndexSpace):
        (Builder.prototype._registerSectionBuilders.const.section.in.WASM.description.section.switch.section.case.string_appeared_here.this.section):
        (Builder.prototype._registerSectionBuilders.const.section.in.WASM.description.section.switch.section.const.codeBuilder.End.switch.case.string_appeared_here.e):
        (Builder.prototype._registerSectionBuilders.this.Unknown):
        (prepareDatabase):
        (testDatabase):
        * storage/indexeddb/wasm-exceptions-expected.txt: Added.
        * storage/indexeddb/wasm-exceptions.html: Added.
        * workers/wasm-hashset: Added.
        * workers/wasm-hashset-expected.txt: Added.
        * workers/wasm-hashset-many-expected.txt: Added.
        * workers/wasm-hashset-many.html: Added.
        * workers/wasm-hashset.html: Added.
        * workers/wasm-hashset/many-test.js: Added.
        (reallyDone):
        (console.log):
        (console.error):
        (console.assert):
        (i.worker.onmessage):
        (Module.print):
        (Module.printErr):
        (Module.canvas):
        (Module.setStatus):
        (Module):
        (setValue):
        (getValue):
        (allocate):
        (getMemory):
        (Pointer_stringify):
        (AsciiToString):
        (stringToAscii):
        (UTF8ArrayToString):
        (UTF8ToString):
        (stringToUTF8Array):
        (stringToUTF8):
        (lengthBytesUTF8):
        (demangle):
        (demangleAll):
        (stackTrace):
        (alignUp):
        (updateGlobalBuffer):
        (updateGlobalBufferViews):
        (abortOnCannotGrowMemory):
        (enlargeMemory):
        (getTotalMemory):
        (callRuntimeCallbacks):
        (preRun):
        (ensureInitRuntime):
        (preMain):
        (exitRuntime):
        (postRun):
        (addOnPreRun):
        (addOnInit):
        (addOnPreMain):
        (addOnExit):
        (addOnPostRun):
        (intArrayFromString):
        (intArrayToString):
        (writeStringToMemory):
        (writeArrayToMemory):
        (writeAsciiToMemory):
        (Math.string_appeared_here):
        (addRunDependency):
        (removeRunDependency):
        (integrateWasmJS.asm2wasmImports.string_appeared_here):
        (integrateWasmJS.lookupImport):
        (integrateWasmJS.mergeMemory):
        (integrateWasmJS.fixImports):
        (integrateWasmJS.getBinary):
        (integrateWasmJS.doJustAsm):
        (integrateWasmJS.receiveInstance):
        (integrateWasmJS.):
        (integrateWasmJS.doNativeWasm):
        (integrateWasmJS.doWasmPolyfill):
        (integrateWasmJS.Module.string_appeared_here):
        (integrateWasmJS):
        (___setErrNo):
        (__ZSt18uncaught_exceptionv):
        (EXCEPTIONS.deAdjust):
        (EXCEPTIONS.addRef):
        (EXCEPTIONS.decRef):
        (EXCEPTIONS.clearRef):
        (___cxa_find_matching_catch):
        (___gxx_personality_v0):
        (___lock):
        (_emscripten_memcpy_big):
        (_gettimeofday):
        (_abort):
        (SYSCALLS):
        (SYSCALLS.get getStr):
        (SYSCALLS.get64):
        (SYSCALLS.getZero):
        (try.___syscall146.printChar):
        (___syscall146):
        (___syscall54):
        (___unlock):
        (___syscall6):
        (invoke_ii):
        (invoke_iiii):
        (invoke_v):
        (_malloc.Module.string_appeared_here):
        (getTempRet0.Module.string_appeared_here):
        (_free.Module.string_appeared_here):
        (_main.Module.string_appeared_here):
        (setTempRet0.Module.string_appeared_here):
        (establishStackSpace.Module.string_appeared_here):
        (stackSave.Module.string_appeared_here):
        (_memset.Module.string_appeared_here):
        (_sbrk.Module.string_appeared_here):
        (_emscripten_get_global_libc.Module.string_appeared_here):
        (_memcpy.Module.string_appeared_here):
        (___errno_location.Module.string_appeared_here):
        (setThrew.Module.string_appeared_here):
        (_fflush.Module.string_appeared_here):
        (stackAlloc.Module.string_appeared_here):
        (stackRestore.Module.string_appeared_here):
        (_llvm_bswap_i32.Module.string_appeared_here):
        (runPostSets.Module.string_appeared_here):
        (dynCall_ii.Module.string_appeared_here):
        (dynCall_iiii.Module.string_appeared_here):
        (dynCall_v.Module.string_appeared_here):
        (else.applyMemoryInitializer):
        (else):
        (else.useRequest):
        (ExitStatus):
        (dependenciesFulfilled):
        (Module.string_appeared_here.Module.callMain.callMain.pad):
        (Module.string_appeared_here.Module.callMain):
        (run.doRun):
        (run):
        (exit):
        * workers/wasm-hashset/many-worker.js: Added.
        (console.log):
        (console.error):
        (console.assert):
        (Module.print):
        (Module.printErr):
        (Module.canvas):
        (Module.setStatus):
        (Module):
        (setValue):
        (getValue):
        (allocate):
        (getMemory):
        (Pointer_stringify):
        (AsciiToString):
        (stringToAscii):
        (UTF8ArrayToString):
        (UTF8ToString):
        (stringToUTF8Array):
        (stringToUTF8):
        (lengthBytesUTF8):
        (demangle):
        (demangleAll):
        (stackTrace):
        (alignUp):
        (updateGlobalBuffer):
        (updateGlobalBufferViews):
        (abortOnCannotGrowMemory):
        (enlargeMemory):
        (getTotalMemory):
        (callRuntimeCallbacks):
        (preRun):
        (ensureInitRuntime):
        (preMain):
        (exitRuntime):
        (postRun):
        (addOnPreRun):
        (addOnInit):
        (addOnPreMain):
        (addOnExit):
        (addOnPostRun):
        (intArrayFromString):
        (intArrayToString):
        (writeStringToMemory):
        (writeArrayToMemory):
        (writeAsciiToMemory):
        (Math.string_appeared_here):
        (addRunDependency):
        (removeRunDependency):
        (integrateWasmJS.asm2wasmImports.string_appeared_here):
        (integrateWasmJS.lookupImport):
        (integrateWasmJS.mergeMemory):
        (integrateWasmJS.fixImports):
        (integrateWasmJS.getBinary):
        (integrateWasmJS.doJustAsm):
        (integrateWasmJS.receiveInstance):
        (integrateWasmJS.doNativeWasm):
        (integrateWasmJS.doWasmPolyfill):
        (integrateWasmJS.Module.string_appeared_here):
        (integrateWasmJS):
        (___setErrNo):
        (__ZSt18uncaught_exceptionv):
        (EXCEPTIONS.deAdjust):
        (EXCEPTIONS.addRef):
        (EXCEPTIONS.decRef):
        (EXCEPTIONS.clearRef):
        (___cxa_find_matching_catch):
        (___gxx_personality_v0):
        (___lock):
        (_emscripten_memcpy_big):
        (_gettimeofday):
        (_abort):
        (SYSCALLS):
        (SYSCALLS.get getStr):
        (SYSCALLS.get64):
        (SYSCALLS.getZero):
        (try.___syscall146.printChar):
        (___syscall146):
        (___syscall54):
        (___unlock):
        (___syscall6):
        (invoke_ii):
        (invoke_iiii):
        (invoke_v):
        (_malloc.Module.string_appeared_here):
        (getTempRet0.Module.string_appeared_here):
        (_free.Module.string_appeared_here):
        (_main.Module.string_appeared_here):
        (setTempRet0.Module.string_appeared_here):
        (establishStackSpace.Module.string_appeared_here):
        (stackSave.Module.string_appeared_here):
        (_memset.Module.string_appeared_here):
        (_sbrk.Module.string_appeared_here):
        (_emscripten_get_global_libc.Module.string_appeared_here):
        (_memcpy.Module.string_appeared_here):
        (___errno_location.Module.string_appeared_here):
        (setThrew.Module.string_appeared_here):
        (_fflush.Module.string_appeared_here):
        (stackAlloc.Module.string_appeared_here):
        (stackRestore.Module.string_appeared_here):
        (_llvm_bswap_i32.Module.string_appeared_here):
        (runPostSets.Module.string_appeared_here):
        (dynCall_ii.Module.string_appeared_here):
        (dynCall_iiii.Module.string_appeared_here):
        (dynCall_v.Module.string_appeared_here):
        (else.applyMemoryInitializer):
        (else):
        (else.useRequest):
        (ExitStatus):
        (dependenciesFulfilled):
        (Module.string_appeared_here.Module.callMain.callMain.pad):
        (Module.string_appeared_here.Module.callMain):
        (run.doRun):
        (run):
        (exit):
        * workers/wasm-hashset/test.js: Added.
        (reallyDone):
        (console.log):
        (console.error):
        (console.assert):
        (Module.print):
        (Module.printErr):
        (Module.canvas):
        (Module.setStatus):
        (Module):
        (setValue):
        (getValue):
        (allocate):
        (getMemory):
        (Pointer_stringify):
        (AsciiToString):
        (stringToAscii):
        (UTF8ArrayToString):
        (UTF8ToString):
        (stringToUTF8Array):
        (stringToUTF8):
        (lengthBytesUTF8):
        (demangle):
        (demangleAll):
        (stackTrace):
        (alignUp):
        (updateGlobalBuffer):
        (updateGlobalBufferViews):
        (abortOnCannotGrowMemory):
        (enlargeMemory):
        (getTotalMemory):
        (callRuntimeCallbacks):
        (preRun):
        (ensureInitRuntime):
        (preMain):
        (exitRuntime):
        (postRun):
        (addOnPreRun):
        (addOnInit):
        (addOnPreMain):
        (addOnExit):
        (addOnPostRun):
        (intArrayFromString):
        (intArrayToString):
        (writeStringToMemory):
        (writeArrayToMemory):
        (writeAsciiToMemory):
        (Math.string_appeared_here):
        (addRunDependency):
        (removeRunDependency):
        (integrateWasmJS.asm2wasmImports.string_appeared_here):
        (integrateWasmJS.lookupImport):
        (integrateWasmJS.mergeMemory):
        (integrateWasmJS.fixImports):
        (integrateWasmJS.getBinary):
        (integrateWasmJS.doJustAsm):
        (integrateWasmJS.receiveInstance):
        (integrateWasmJS.doNativeWasm):
        (integrateWasmJS.doWasmPolyfill):
        (integrateWasmJS.Module.string_appeared_here):
        (integrateWasmJS):
        (___setErrNo):
        (__ZSt18uncaught_exceptionv):
        (EXCEPTIONS.deAdjust):
        (EXCEPTIONS.addRef):
        (EXCEPTIONS.decRef):
        (EXCEPTIONS.clearRef):
        (___cxa_find_matching_catch):
        (___gxx_personality_v0):
        (___lock):
        (_emscripten_memcpy_big):
        (_gettimeofday):
        (_abort):
        (SYSCALLS):
        (SYSCALLS.get getStr):
        (SYSCALLS.get64):
        (SYSCALLS.getZero):
        (try.___syscall146.printChar):
        (___syscall146):
        (___syscall54):
        (___unlock):
        (___syscall6):
        (invoke_ii):
        (invoke_iiii):
        (invoke_v):
        (_malloc.Module.string_appeared_here):
        (getTempRet0.Module.string_appeared_here):
        (_free.Module.string_appeared_here):
        (_main.Module.string_appeared_here):
        (setTempRet0.Module.string_appeared_here):
        (establishStackSpace.Module.string_appeared_here):
        (stackSave.Module.string_appeared_here):
        (_memset.Module.string_appeared_here):
        (_sbrk.Module.string_appeared_here):
        (_emscripten_get_global_libc.Module.string_appeared_here):
        (_memcpy.Module.string_appeared_here):
        (___errno_location.Module.string_appeared_here):
        (setThrew.Module.string_appeared_here):
        (_fflush.Module.string_appeared_here):
        (stackAlloc.Module.string_appeared_here):
        (stackRestore.Module.string_appeared_here):
        (_llvm_bswap_i32.Module.string_appeared_here):
        (runPostSets.Module.string_appeared_here):
        (dynCall_ii.Module.string_appeared_here):
        (dynCall_iiii.Module.string_appeared_here):
        (dynCall_v.Module.string_appeared_here):
        (else.applyMemoryInitializer):
        (else):
        (else.useRequest):
        (ExitStatus):
        (dependenciesFulfilled):
        (Module.string_appeared_here.Module.callMain.callMain.pad):
        (Module.string_appeared_here.Module.callMain):
        (run.doRun):
        (run):
        (exit):
        * workers/wasm-hashset/worker.js: Added.
        (console.log):
        (console.error):
        (console.assert):
        (Module.print):
        (Module.printErr):
        (Module.canvas):
        (Module.setStatus):
        (Module):
        (setValue):
        (getValue):
        (allocate):
        (getMemory):
        (Pointer_stringify):
        (AsciiToString):
        (stringToAscii):
        (UTF8ArrayToString):
        (UTF8ToString):
        (stringToUTF8Array):
        (stringToUTF8):
        (lengthBytesUTF8):
        (demangle):
        (demangleAll):
        (stackTrace):
        (alignUp):
        (updateGlobalBuffer):
        (updateGlobalBufferViews):
        (abortOnCannotGrowMemory):
        (enlargeMemory):
        (getTotalMemory):
        (callRuntimeCallbacks):
        (preRun):
        (ensureInitRuntime):
        (preMain):
        (exitRuntime):
        (postRun):
        (addOnPreRun):
        (addOnInit):
        (addOnPreMain):
        (addOnExit):
        (addOnPostRun):
        (intArrayFromString):
        (intArrayToString):
        (writeStringToMemory):
        (writeArrayToMemory):
        (writeAsciiToMemory):
        (Math.string_appeared_here):
        (addRunDependency):
        (removeRunDependency):
        (integrateWasmJS.asm2wasmImports.string_appeared_here):
        (integrateWasmJS.lookupImport):
        (integrateWasmJS.mergeMemory):
        (integrateWasmJS.fixImports):
        (integrateWasmJS.getBinary):
        (integrateWasmJS.doJustAsm):
        (integrateWasmJS.receiveInstance):
        (integrateWasmJS.):
        (integrateWasmJS.doNativeWasm):
        (integrateWasmJS.doWasmPolyfill):
        (integrateWasmJS.Module.string_appeared_here):
        (integrateWasmJS):
        (___setErrNo):
        (__ZSt18uncaught_exceptionv):
        (EXCEPTIONS.deAdjust):
        (EXCEPTIONS.addRef):
        (EXCEPTIONS.decRef):
        (EXCEPTIONS.clearRef):
        (___cxa_find_matching_catch):
        (___gxx_personality_v0):
        (___lock):
        (_emscripten_memcpy_big):
        (_gettimeofday):
        (_abort):
        (SYSCALLS):
        (SYSCALLS.get getStr):
        (SYSCALLS.get64):
        (SYSCALLS.getZero):
        (try.___syscall146.printChar):
        (___syscall146):
        (___syscall54):
        (___unlock):
        (___syscall6):
        (invoke_ii):
        (invoke_iiii):
        (invoke_v):
        (_malloc.Module.string_appeared_here):
        (getTempRet0.Module.string_appeared_here):
        (_free.Module.string_appeared_here):
        (_main.Module.string_appeared_here):
        (setTempRet0.Module.string_appeared_here):
        (establishStackSpace.Module.string_appeared_here):
        (stackSave.Module.string_appeared_here):
        (_memset.Module.string_appeared_here):
        (_sbrk.Module.string_appeared_here):
        (_emscripten_get_global_libc.Module.string_appeared_here):
        (_memcpy.Module.string_appeared_here):
        (___errno_location.Module.string_appeared_here):
        (setThrew.Module.string_appeared_here):
        (_fflush.Module.string_appeared_here):
        (stackAlloc.Module.string_appeared_here):
        (stackRestore.Module.string_appeared_here):
        (_llvm_bswap_i32.Module.string_appeared_here):
        (runPostSets.Module.string_appeared_here):
        (dynCall_ii.Module.string_appeared_here):
        (dynCall_iiii.Module.string_appeared_here):
        (dynCall_v.Module.string_appeared_here):
        (else.applyMemoryInitializer):
        (else):
        (else.useRequest):
        (ExitStatus):
        (dependenciesFulfilled):
        (Module.string_appeared_here.Module.callMain.callMain.pad):
        (Module.string_appeared_here.Module.callMain):
        (run.doRun):
        (run):
        (exit):
        * workers/wasm-long-compile-expected.txt: Added.
        * workers/wasm-long-compile-many-expected.txt: Added.
        * workers/wasm-long-compile-many.html: Added.
        * workers/wasm-long-compile.html: Added.
        * workers/wasm-resources: Added.
        * workers/wasm-resources/long-compile-many.js: Added.
        (done):
        (i.async.run):
        (i.worker.onmessage):
        * workers/wasm-resources/long-compile-worker.js: Added.
        (const._fail):
        (const.isNotA.assert.isNotA):
        (const):
        (switch.typeof):
        (Builder):
        (Builder.prototype.setChecked):
        (Builder.prototype.setPreamble):
        (Builder.prototype._functionIndexSpaceKeyHash):
        (Builder.prototype._registerFunctionToIndexSpace):
        (Builder.prototype._getFunctionFromIndexSpace):
        (Builder.prototype._registerSectionBuilders.const.section.in.WASM.description.section.switch.section.case.string_appeared_here.this.section):
        (Builder.prototype._registerSectionBuilders.const.section.in.WASM.description.section.switch.section.const.codeBuilder.End.switch.case.string_appeared_here.e):
        (Builder.prototype._registerSectionBuilders.this.Unknown):
        * workers/wasm-resources/long-compile.js: Added.
        (done):
        (async.run):
        (worker.onmessage):

2017-04-13  Dean Jackson  <dino@apple.com>

        Large negative animation-delays may not work depending on machine uptime
        https://bugs.webkit.org/show_bug.cgi?id=166962
        <rdar://problem/30091526>

        Reviewed by Tim Horton.

        * animations/large-negative-delay-expected.txt: Added.
        * animations/large-negative-delay.html: Added.

2017-04-13  Andy VanWagoner  <thetalecrafter@gmail.com>

        Change Intl prototypes to plain objects
        https://bugs.webkit.org/show_bug.cgi?id=168178

        Reviewed by JF Bastien.

        * js/intl-collator-expected.txt:
        * js/intl-datetimeformat-expected.txt:
        * js/intl-numberformat-expected.txt:
        * js/script-tests/intl-collator.js:
        * js/script-tests/intl-datetimeformat.js:
        * js/script-tests/intl-numberformat.js:

2017-04-13  Ryan Haddad  <ryanhaddad@apple.com>

        Mark fast/mediacapturefromelement/CanvasCaptureMediaStream-request-frame-events.html as flaky on iOS.
        https://bugs.webkit.org/show_bug.cgi?id=169719

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-04-13  Antti Koivisto  <antti@apple.com>

        Don't invalidate composition for style changes in non-composited layers
        https://bugs.webkit.org/show_bug.cgi?id=170805
        <rdar://problem/31606185>

        Reviewed by Simon Fraser.

        * compositing/updates/animation-non-composited-expected.txt: Added.
        * compositing/updates/animation-non-composited.html: Added.

2017-04-13  Ryan Haddad  <ryanhaddad@apple.com>

        Mark webrtc/video-mute.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170704

        Unreviewed test gardening.

        * TestExpectations:

2017-04-13  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/media-controls-timeline-updates-when-hovered.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=165553

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-13  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/track/track-cue-rendering-rtl.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170831

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-13  Ryan Haddad  <ryanhaddad@apple.com>

        Mark inspector/sampling-profiler/named-function-expression.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170830

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-04-13  Ryan Haddad  <ryanhaddad@apple.com>

        Add ios-simulator baseline for imported/w3c/web-platform-tests/fetch/api/request/request-cache-only-if-cached.html.

        Unreviewed test gardening.

        * platform/ios-simulator/imported/w3c/web-platform-tests/fetch/api/request/request-cache-only-if-cached-expected.txt: Added.

2017-04-13  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/inspector/network/resource-request-headers.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170702

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-04-13  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/volume-support/volume-support-click.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=164229

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-13  Chris Dumez  <cdumez@apple.com>

        LayoutTest svg/animations/animated-svg-image-outside-viewport-paused.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=170745

        Reviewed by Tim Horton.

        Test was relying on a setTimeout(30) and was flaky. Now use shouldBecomeEqual() to make the
        test more robust.

        * svg/animations/animated-svg-image-outside-viewport-paused-expected.txt:
        * svg/animations/animated-svg-image-outside-viewport-paused.html:

2017-04-13  Youenn Fablet  <youenn@apple.com>

        Remove RTCSignalingState::Closed
        https://bugs.webkit.org/show_bug.cgi?id=170811

        Reviewed by Eric Carlson.

        * webrtc/connection-state.html:

2017-04-13  Jonathan Bedard  <jbedard@apple.com>

        Remove compositing/masks/solid-color-masked.html expectation
        https://bugs.webkit.org/show_bug.cgi?id=168054

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Remove compositing/masks/solid-color-masked.html.

2017-04-13  Youenn Fablet  <youenn@apple.com>

        Add some more WebRTC tests
        https://bugs.webkit.org/show_bug.cgi?id=170796

        Reviewed by Eric Carlson.

        * webrtc/multi-video-expected.txt: Added.
        * webrtc/multi-video.html: Added.
        * webrtc/video-with-data-channel-expected.txt: Added.
        * webrtc/video-with-data-channel.html: Added.

2017-04-13  Romain Bellessort  <romain.bellessort@crf.canon.fr>

        [Readable Streams API] Implement cloneArrayBuffer in WebCore
        https://bugs.webkit.org/show_bug.cgi?id=170008

        Reviewed by Youenn Fablet.

        Added test to check cloneArrayBuffer behaviour. 

        * streams/clone-array-buffer-expected.txt: Added.
        * streams/clone-array-buffer.html: Added.

2017-04-13  Youenn Fablet  <youenn@apple.com>

        onnegotiationneeded should only be called once
        https://bugs.webkit.org/show_bug.cgi?id=170785

        Reviewed by Alex Christensen.

        * webrtc/negotiatedneeded-event-addStream.html:

2017-04-13  Dave Hyatt  <hyatt@apple.com>

        Rendering flexbox children across columns
        https://bugs.webkit.org/show_bug.cgi?id=164166
        <rdar://problem/29055587>

        Reviewed by Zalan Bujtas.

        * fast/multicol/flexbox-rows-expected.html: Added.
        * fast/multicol/flexbox-rows.html: Added.

2017-04-13  Antti Koivisto  <antti@apple.com>

        Try to unflake a test.

        * http/tests/cache/disk-cache/disk-cache-media-small.html:

2017-04-12  Brady Eidson  <beidson@apple.com>

        QuotaExceededError when saving to localStorage in private mode.
        https://bugs.webkit.org/show_bug.cgi?id=157010

        Reviewed by Alex Christensen.

        * platform/mac-wk2/TestExpectations:
        * storage/domstorage/localstorage/private-browsing-affects-storage-expected.txt:
        * storage/domstorage/localstorage/private-browsing-affects-storage.html:
        * storage/domstorage/localstorage/resources/private-browsing-1.html: Added.
        * storage/domstorage/localstorage/resources/private-browsing-2.html: Added.
        * storage/domstorage/localstorage/resources/private-browsing-3.html: Added.
        * storage/domstorage/localstorage/resources/private-browsing-storage-2.html: Added.
        * storage/domstorage/sessionstorage/private-browsing-affects-storage-expected.txt: Removed.
        * storage/domstorage/sessionstorage/private-browsing-affects-storage.html: Removed.

2017-04-12  Joseph Pecoraro  <pecoraro@apple.com>

        test262: test262/test/built-ins/NativeErrors/EvalError/proto.js
        https://bugs.webkit.org/show_bug.cgi?id=170668

        Reviewed by Keith Miller.

        * ietestcenter/Javascript/15.2.3.2-2-12-expected.txt:
        * ietestcenter/Javascript/15.2.3.2-2-13-expected.txt:
        * ietestcenter/Javascript/15.2.3.2-2-14-expected.txt:
        * ietestcenter/Javascript/15.2.3.2-2-15-expected.txt:
        * ietestcenter/Javascript/15.2.3.2-2-16-expected.txt:
        * ietestcenter/Javascript/15.2.3.2-2-17-expected.txt:
        These tests are now out of date.

2017-04-12  Joseph Pecoraro  <pecoraro@apple.com>

        test262: test262/test/language/literals/regexp/u-dec-esc.js
        https://bugs.webkit.org/show_bug.cgi?id=170687

        Reviewed by Michael Saboff.

        * js/regexp-unicode-expected.txt:
        * js/script-tests/regexp-unicode.js:
        Extend test to test invalid backreferences.

2017-04-12  Jonathan Bedard  <jbedard@apple.com>

        Move expectation for compositing/iframes/iframe-size-from-zero.htm to top level

        Unreviewed test gardening.

        * TestExpectations: Marked compositing/iframes/iframe-size-from-zero.html as flaky.
        * platform/ios-wk1/TestExpectations: Move test expectation to top level.
        * platform/mac-wk1/TestExpectations: Ditto.
        * platform/win/TestExpectations: Ditto.
        * platform/wk2/TestExpectations: Ditto.

2017-04-11  Dean Jackson  <dino@apple.com>

        canvas/2d.gradient.* LayoutTests failing
        https://bugs.webkit.org/show_bug.cgi?id=170757
        <rdar://problem/31177990>

        Reviewed by Antoine Quint.

        Add a fudge factor to the gradient tests, since we can
        now produce noisy (nicer looking) gradients. There might
        be 1 or 2 bits of difference per pixel.

        * canvas/philip/tests.js:
        (_assertPixelWithGradientNoise):
        * canvas/philip/tests/2d.gradient.linear.transform.1.html:
        * canvas/philip/tests/2d.gradient.linear.transform.2.html:
        * canvas/philip/tests/2d.gradient.linear.transform.3.html:
        * canvas/philip/tests/2d.gradient.radial.cone.bottom.html:
        * canvas/philip/tests/2d.gradient.radial.cone.cylinder.html:
        * canvas/philip/tests/2d.gradient.radial.cone.front.html:
        * canvas/philip/tests/2d.gradient.radial.cone.shape1.html:
        * canvas/philip/tests/2d.gradient.radial.cone.top.html:
        * canvas/philip/tests/2d.gradient.radial.inside1.html:
        * canvas/philip/tests/2d.gradient.radial.inside2.html:
        * canvas/philip/tests/2d.gradient.radial.inside3.html:
        * canvas/philip/tests/2d.gradient.radial.outside1.html:
        * canvas/philip/tests/2d.gradient.radial.outside2.html:
        * canvas/philip/tests/2d.gradient.radial.outside3.html:
        * canvas/philip/tests/2d.gradient.radial.touch2.html:
        * fast/canvas/script-tests/canvas-gradient-on-compositing.js:
        * fast/canvas/canvas-gradient-on-compositing-expected.html:

2017-04-12  Myles C. Maxfield  <mmaxfield@apple.com>

        Well-known variations should clamp to the values listed in the @font-face block
        https://bugs.webkit.org/show_bug.cgi?id=169260

        Reviewed by Dean Jackson.

        * fast/text/variations/font-face-clamp-expected.html: Added.
        * fast/text/variations/font-face-clamp.html: Added.

2017-04-12  Jonathan Bedard  <jbedard@apple.com>

        Remove two passing canvas tests from ios expectations

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2017-04-12  Youenn Fablet  <youenn@apple.com>

        REGRESSION: LayoutTest webrtc/negotiatedneeded-event-addStream.html is frequently crashing
        https://bugs.webkit.org/show_bug.cgi?id=170754
        <rdar://problem/31573169>

        Unreviewed.

        * TestExpectations: Marking test as crashing.

2017-04-12  Manuel Rego Casasnovas  <rego@igalia.com>

        [css-grid] Replaced elements don't properly resolve percentage heights
        https://bugs.webkit.org/show_bug.cgi?id=159670

        Reviewed by Darin Adler.

        The issue was fixed in r213149 (bug #168657), but the Blink test was not imported.
        This patch only adds the test to avoid regressions in the future.

        * fast/css-grid-layout/grid-item-with-percent-height-replaced-element-expected.txt: Added.
        * fast/css-grid-layout/grid-item-with-percent-height-replaced-element.html: Added.

2017-04-10  Antti Koivisto  <antti@apple.com>

        Cache small media resources in disk cache
        https://bugs.webkit.org/show_bug.cgi?id=170676
        <rdar://problem/31532649>

        Reviewed by Andreas Kling.

        * http/tests/cache/disk-cache/disk-cache-media-small-expected.txt: Added.
        * http/tests/cache/disk-cache/disk-cache-media-small.html: Added.

2017-04-12  Per Arne Vollan  <pvollan@apple.com>

        Implement stroke-color CSS property.
        https://bugs.webkit.org/show_bug.cgi?id=169352

        Reviewed by Jon Lee.

        * fast/css/stroke-color-expected.html: Added.
        * fast/css/stroke-color-fallback-expected.html: Added.
        * fast/css/stroke-color-fallback.html: Added.
        * fast/css/stroke-color.html: Added.
        * fast/css/visited-link-stroke-color-expected.html: Added.
        * fast/css/visited-link-stroke-color.html: Added.

2017-04-11  Youenn Fablet  <youenn@apple.com>

        LayoutTest webrtc/video-mute.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=170704

        Reviewed by Eric Carlson.

        * webrtc/video-mute.html: Trying to make it less flaky.

2017-04-11  Youenn Fablet  <youenn@apple.com>

        [WK1] Add captureStream test with webrtc
        https://bugs.webkit.org/show_bug.cgi?id=170746

        Reviewed by Eric Carlson.

        * platform/mac-wk1/TestExpectations: Activating this new test in WK1.
        * webrtc/captureCanvas-webrtc-expected.txt: Added.
        * webrtc/captureCanvas-webrtc.html: Added.

2017-04-11  Youenn Fablet  <youenn@apple.com>

        Migrating webrtc tests to latest API
        https://bugs.webkit.org/show_bug.cgi?id=170709

        Reviewed by Eric Carlson.

        * webrtc/audio-peer-connection-webaudio.html:
        * webrtc/libwebrtc/descriptionGetters.html:
        * webrtc/negotiatedneeded-event-addStream.html:
        * webrtc/peer-connection-audio-mute.html:
        * webrtc/peer-connection-audio-mute2.html:
        * webrtc/peer-connection-remote-audio-mute.html:
        * webrtc/peer-connection-remote-audio-mute2.html:
        * webrtc/release-after-getting-track.html:
        * webrtc/video-disabled-black.html:
        * webrtc/video-mute.html:
        * webrtc/video-remote-mute.html:
        * webrtc/video-with-receiver.html:
        * webrtc/video.html:

2017-04-11  Youenn Fablet  <youenn@apple.com>

        Activate WebRTC data channel tests for WK1
        https://bugs.webkit.org/show_bug.cgi?id=170710

        Reviewed by Eric Carlson.

        * platform/mac-wk1/TestExpectations:

2017-04-11  Youenn Fablet  <youenn@apple.com>

        MediaStream id should be equal to msid
        https://bugs.webkit.org/show_bug.cgi?id=170712

        Reviewed by Eric Carlson.

        Removing no longer needed/Adding needed calls to useMockRTCPeerConnectionFactory.

        * fast/mediastream/RTCPeerConnection-inspect-answer.html:
        * fast/mediastream/RTCPeerConnection-inspect-offer.html:
        * fast/mediastream/RTCPeerConnection-legacy-stream-based-api.html:
        * fast/mediastream/RTCPeerConnection-media-setup-single-dialog.html:
        * fast/mediastream/RTCPeerConnection-remotely-assigned-transceiver-mid.html:
        * fast/mediastream/RTCPeerConnection-setLocalDescription-offer.html:
        * fast/mediastream/RTCPeerConnection-setRemoteDescription-offer.html:
        * webrtc/audio-peer-connection-webaudio.html:
        * webrtc/audio-replace-track.html:
        * webrtc/connection-state.html:
        * webrtc/datachannel/basic.html:
        * webrtc/datachannel/bufferedAmountLowThreshold.html:
        * webrtc/datachannel/datachannel-gc.html:
        * webrtc/datachannel/datachannel-stats.html:
        * webrtc/datachannel/filter-ice-candidate.html:
        * webrtc/ephemeral-certificates-and-cnames.html:
        * webrtc/libwebrtc/descriptionGetters.html:
        * webrtc/negotiatedneeded-event-addStream.html:
        * webrtc/no-port-zero-in-upd-candidates.html:
        * webrtc/peer-connection-audio-mute.html:
        * webrtc/peer-connection-audio-mute2.html:
        * webrtc/peer-connection-remote-audio-mute.html:
        * webrtc/peer-connection-remote-audio-mute2.html:
        * webrtc/release-after-getting-track.html:
        * webrtc/video-disabled-black.html:
        * webrtc/video-getParameters.html:
        * webrtc/video-mediastreamtrack-stats.html:
        * webrtc/video-mute.html:
        * webrtc/video-remote-mute.html:
        * webrtc/video-replace-track-to-null.html:
        * webrtc/video-replace-track.html:
        * webrtc/video-stats.html:
        * webrtc/video-with-receiver.html:
        * webrtc/video.html:

2017-04-11  Chris Fleizach  <cfleizach@apple.com>

        AX: Web article navigation does not work (article rotor for Facebook, Twitter, Messages etc.)
        https://bugs.webkit.org/show_bug.cgi?id=170330
        <rdar://problem/31366105>

        Reviewed by Joanmarie Diggs.

        * accessibility/mac/search-predicate-article-expected.txt:
        * accessibility/mac/search-predicate-article.html:

2017-04-11  Joseph Pecoraro  <pecoraro@apple.com>

        test262: test262/test/annexB/language/comments/multi-line-html-close.js
        https://bugs.webkit.org/show_bug.cgi?id=170648

        Reviewed by Keith Miller.

        * js/parser-xml-close-comment-expected.txt:
        * js/script-tests/parser-xml-close-comment.js:
        Update test coverage for JavaScript HTML comments.

2017-04-11  Joseph Pecoraro  <pecoraro@apple.com>

        test262: test262/test/built-ins/Array/S15.4.3_A2.2.js
        https://bugs.webkit.org/show_bug.cgi?id=170652

        Reviewed by Michael Saboff.

        * ietestcenter/Javascript/15.2.3.3-4-186-expected.txt:
        * ietestcenter/Javascript/15.2.3.3-4-191-expected.txt:
        * ietestcenter/Javascript/15.2.3.3-4-194-expected.txt:
        * ietestcenter/Javascript/15.2.3.3-4-201-expected.txt:
        * ietestcenter/Javascript/15.3.3.2-1-expected.txt:
        * sputnik/Conformance/15_Native_Objects/15.4_Array/15.4.3/S15.4.3_A2.2-expected.txt:
        * sputnik/Conformance/15_Native_Objects/15.9_Date/15.9.5/15.9.5.1_Date.prototype.constructor/S15.9.5.1_A3_T2-expected.txt:
        These tests expected the opposite, they are now out of date.

2017-04-11  Yoav Weiss  <yoav@yoav.ws>

        [link preload] Double downloads of preloaded content when it's in MemoryCache
        https://bugs.webkit.org/show_bug.cgi?id=170122

        Reviewed by Antti Koivisto.

        * TestExpectations: Removed flakiness label from the header preload charset test.
        * fast/loader/cache-encoding-expected.txt: Changed expectation.
        * fast/loader/cache-encoding.html: Modified behavior to stick with the first decoded string.
        * http/tests/preload/preload-encoding-expected.txt: Changed expectation.
        * http/tests/preload/preload-encoding.html: Modified behavior to stick with the first decoded string.
        * imported/w3c/web-platform-tests/html/semantics/scripting-1/the-script-element/script-charset-01-expected.txt: This test refers to the same file
        twice and expects different decoding for it each time. This is the behavior that we modified, and therefore the test expectation is changed as well.

2017-04-11  Manuel Rego Casasnovas  <rego@igalia.com>

        [css-grid] Fix fast/css-grid-layout/grid-simplified-layout-positioned.html
        https://bugs.webkit.org/show_bug.cgi?id=167538

        Reviewed by Darin Adler.

        fast/css-grid-layout/grid-simplified-layout-positioned.html was flacky
        as the caret was not always painted in the test runner.
        The test was checking for a crash in simplified layout (see bug #163450)
        and has nothing to do with the caret or "autofocus" behavior.
        "autofocus" was needed to get the crash, so this change modifies
        the test to blur the element, so the caret is not painted anymore.

        * fast/css-grid-layout/grid-simplified-layout-positioned-expected.html:
        Don't focus the input element.
        * fast/css-grid-layout/grid-simplified-layout-positioned.html: Blur
        the input element to avoid showing the caret.
        * platform/mac-wk2/TestExpectations: Remove file from expectations.

2017-04-10  Jiewen Tan  <jiewen_tan@apple.com>

        Unreviewed, test expectations update

        * platform/wk2/TestExpectations:

2017-04-10  Ryan Haddad  <ryanhaddad@apple.com>

        Mark two newly imported web-platform-tests as failing.

        Unreviewed test gardening.

        * TestExpectations:

2017-04-10  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/volume-slider/volume-slider-value.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=167475

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-04-10  Wenson Hsieh  <wenson_hsieh@apple.com>

        REGRESSION (r214403): fast/events/drag-to-navigate.html and fast/events/only-valid-drop-targets-receive-file-drop.html failing
        https://bugs.webkit.org/show_bug.cgi?id=170677
        <rdar://problem/31512633>

        Reviewed by Tim Horton.

        Turn enableDragDestinationActionLoad on in these two LayoutTests via WKTR options.

        * fast/events/drag-to-navigate.html:
        * fast/events/only-valid-drop-targets-receive-file-drop.html:

2017-04-10  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/volume-up-support/volume-up-support.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170682

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-04-10  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline js/dom/global-constructors-attributes.html after r215131.

        Unreviewed test gardening.

        * platform/mac-elcapitan/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac-wk1/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac/js/dom/global-constructors-attributes-expected.txt:

2017-04-10  Andreas Kling  <akling@apple.com>

        Don't generate extra scrolling tiles for non-visible pages.
        https://bugs.webkit.org/show_bug.cgi?id=167213
        <rdar://problem/30105774>

        Reviewed by Antti Koivisto.

        * TestExpectations:
        * compositing/tiling/non-visible-window-tile-coverage-expected.txt: Added.
        * compositing/tiling/non-visible-window-tile-coverage.html: Added.
        * platform/mac-wk2/TestExpectations:

2017-04-10  Carlos Garcia Campos  <cgarcia@igalia.com>

        REGRESSION(r214426): [GTK] Test media/video-click-dblckick-standalone.html started to fail in the bots after r214426
        https://bugs.webkit.org/show_bug.cgi?id=170667

        Reviewed by an Doberek.

        Unskip then test that is passing now.

        * platform/gtk/TestExpectations:

2017-04-10  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Mark several tests as failing/timing out.

        * platform/gtk/TestExpectations:

2017-04-10  Miguel Gomez  <magomez@igalia.com>

        REGRESSION(r205841): [GTK] Test fast/images/animated-png.html is failing since r205841
        https://bugs.webkit.org/show_bug.cgi?id=168425

        Reviewed by Said Abou-Hallawa.

        Adjusted expectation for fast/images/animated-png.html. It must pass now.

        * platform/gtk/TestExpectations:

2017-04-09  Devin Rousso  <webkit@devinrousso.com>

        Web Inspector: tabbing in Styles sidebar is broken when additional ":" and ";" are in the property value
        https://bugs.webkit.org/show_bug.cgi?id=170184

        Reviewed by Matt Baker.

        * inspector/unit-tests/text-utilities-expected.txt: Added.
        * inspector/unit-tests/text-utilities.html: Added.

2017-04-09  Youenn Fablet  <youenn@apple.com>

        Resync WPT tests up to 23cd07d4685d81024b7440e042f8bbdb33e7ddec
        https://bugs.webkit.org/show_bug.cgi?id=170647

        Reviewed by Sam Weinig.

        * TestExpectations:
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/http-cache/304-update-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/http-cache/cc-request-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/http-cache/heuristic-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/http-cache/invalidate-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/http-cache/status-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/html/browsers/windows/browsing-context-expected.txt: Added.
        * platform/mac/TestExpectations:
        * tests-options.json:

2017-04-09  Joseph Pecoraro  <pecoraro@apple.com>

        test262: test262/test/annexB/language/literals/regexp/identity-escape.js
        https://bugs.webkit.org/show_bug.cgi?id=170651

        Reviewed by Saam Barati.

        * js/regexp-no-extensions-expected.txt:
        * js/script-tests/regexp-no-extensions.js:
        Update existing test for these edge cases.

2017-04-08  Myles C. Maxfield  <mmaxfield@apple.com>

        [Variation Fonts] Width values of GX fonts are not mapped correctly
        https://bugs.webkit.org/show_bug.cgi?id=170367

        Reviewed by Simon Fraser.

        * fast/text/variations/font-selection-properties-expected.html:
        * fast/text/variations/gx-width-expected.html: Added.
        * fast/text/variations/gx-width.html: Added.

2017-04-08  Said Abou-Hallawa  <sabouhallawa@apple.com>

        A synchronous DecodingOptions should be compatible with any asynchronous sizeForDrawing DecodingOptions
        https://bugs.webkit.org/show_bug.cgi?id=170577

        Reviewed by Simon Fraser.

        * fast/images/async-image-background-image-repeated-expected.html: Added.
        * fast/images/async-image-background-image-repeated.html: Added.

2017-04-08  Simon Fraser  <simon.fraser@apple.com>

        Unprefix CSS cursor values grab and grabbing
        https://bugs.webkit.org/show_bug.cgi?id=170543

        Reviewed by Jon Lee.

        Enhanced the cursor test to check round-tripping of all values.

        * fast/css/cursor-parsing-expected.txt:
        * fast/css/cursor-parsing.html:

2017-04-08  Youenn Fablet  <youenn@apple.com>

        WebRTC tests gardening
        https://bugs.webkit.org/show_bug.cgi?id=170508

        Reviewed by Eric Carlson.

        * platform/ios-wk1/TestExpectations:
        * platform/ios-wk2/TestExpectations:
        * platform/ios/TestExpectations:

2017-04-08  Youenn Fablet  <youenn@apple.com>

        MediaStreamTrack id should be preserved by PeerConnection
        https://bugs.webkit.org/show_bug.cgi?id=170624

        Reviewed by Eric Carlson.

        * webrtc/video.html:

2017-04-07  Chris Dumez  <cdumez@apple.com>

        Unreviewed, update 2 media tests after r215120 so they work on iOS.

        Setting the volume is a no-op on iOS so mute the video instead.

        * media/video-restricted-invisible-autoplay-allowed-when-visible.html:
        * media/video-restricted-invisible-autoplay-not-allowed.html:

2017-04-07  Yuichiro Kikura  <y.kikura@gmail.com>

        WebGPU: implement ComputeCommandEncoder and related components    
        https://bugs.webkit.org/show_bug.cgi?id=170444

        Reviewed by Alex Christensen.

        Added a test case to ensure ComputeCommandEncoder is dispatched successfully

        * fast/canvas/webgpu/webgpu-dispatch-expected.txt: Added.
        * fast/canvas/webgpu/webgpu-dispatch.html: Added.

2017-04-07  Zalan Bujtas  <zalan@apple.com>

        Simple line layout: FlowContents::segmentIndexForRunSlow skips empty runs.
        https://bugs.webkit.org/show_bug.cgi?id=170552

        Reviewed by Antti Koivisto.

        * fast/text/simple-line-layout-hover-over-subsequent-linebreaks-expected.txt: Added.
        * fast/text/simple-line-layout-hover-over-subsequent-linebreaks.html: Added.

2017-04-07  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/media-controller/media-controller-auto-hide-mouse-leave-after-play.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=168540

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-07  Ryan Haddad  <ryanhaddad@apple.com>

        Mark inspector/codemirror/prettyprinting-css.html as a flaky timeout.
        https://bugs.webkit.org/show_bug.cgi?id=170615

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-07  Chris Dumez  <cdumez@apple.com>

        Audible autoplay videos should not get paused when outside the viewport
        https://bugs.webkit.org/show_bug.cgi?id=170610
        <rdar://problem/31505984>

        Reviewed by Eric Carlson.

        Add layout test coverage.

        * media/video-restricted-invisible-autoplay-allowed-if-audible-expected.txt: Added.
        * media/video-restricted-invisible-autoplay-allowed-if-audible.html: Copied from LayoutTests/media/video-restricted-invisible-autoplay-not-allowed.html.
        * media/video-restricted-invisible-autoplay-allowed-when-visible.html:
        * media/video-restricted-invisible-autoplay-not-allowed.html:

2017-04-07  Chris Dumez  <cdumez@apple.com>

        Throttle / Align DOM Timers in cross-origin iframes to 30fps
        https://bugs.webkit.org/show_bug.cgi?id=170613
        <rdar://problem/31506444>

        Reviewed by Simon Fraser.

        Add layout test coverage.

        * http/tests/frame-throttling/resources/timer-throttling-frame.html: Added.
        * http/tests/frame-throttling/timer-throttle-in-cross-origin-subframe-expected.txt: Added.
        * http/tests/frame-throttling/timer-throttle-in-cross-origin-subframe.html: Added.

2017-04-07  Brent Fulgham  <bfulgham@apple.com>

        Rebaseline additional tests after r215096.
        https://bugs.webkit.org/show_bug.cgi?id=170561
        <rdar://problem/7415154>

        * http/tests/security/contentSecurityPolicy/1.1/frame-ancestors/frame-ancestors-nested-cross-in-cross-none-block-expected.txt:
        * http/tests/security/contentSecurityPolicy/1.1/frame-ancestors/frame-ancestors-nested-cross-in-cross-self-block-expected.txt:
        * http/tests/security/contentSecurityPolicy/1.1/frame-ancestors/frame-ancestors-nested-cross-in-same-none-block-expected.txt:
        * http/tests/security/contentSecurityPolicy/1.1/frame-ancestors/frame-ancestors-nested-cross-in-same-self-block-expected.txt:
        * http/tests/security/contentSecurityPolicy/1.1/frame-ancestors/frame-ancestors-nested-same-in-cross-none-block-expected.txt:
        * http/tests/security/contentSecurityPolicy/1.1/frame-ancestors/frame-ancestors-nested-same-in-cross-self-block-expected.txt:
        * http/tests/security/contentSecurityPolicy/1.1/frame-ancestors/frame-ancestors-nested-same-in-same-none-block-expected.txt:
        * http/tests/security/contentSecurityPolicy/1.1/frame-ancestors/frame-ancestors-none-block-expected.txt:
        * http/tests/security/contentSecurityPolicy/1.1/frame-ancestors/frame-ancestors-self-block-expected.txt:
        * http/tests/security/no-popup-from-sandbox-top-expected.txt:
        * http/tests/xmlhttprequest/origin-exact-matching-expected.txt:

2017-04-07  Brent Fulgham  <bfulgham@apple.com>

        WebKit should percent encode single quotes in query strings
        https://bugs.webkit.org/show_bug.cgi?id=170561
        <rdar://problem/7415154>

        Reviewed by Alex Christensen.

        Rebaseline tests after change.

        * fast/events/popup-blocked-from-unique-frame-via-window-open-named-sibling-frame-expected.txt:
        * fast/frames/xss-auditor-handles-file-urls-expected.txt:
        * http/tests/security/xssAuditor/base-href-control-char-expected.txt:
        * http/tests/security/xssAuditor/base-href-expected.txt:
        * http/tests/security/xssAuditor/base-href-null-char-expected.txt:
        * http/tests/security/xssAuditor/base-href-scheme-relative-expected.txt:
        * http/tests/security/xssAuditor/embed-tag-control-char-expected.txt:
        * http/tests/security/xssAuditor/embed-tag-expected.txt:
        * http/tests/security/xssAuditor/embed-tag-javascript-url-expected.txt:
        * http/tests/security/xssAuditor/embed-tag-null-char-expected.txt:
        * http/tests/security/xssAuditor/form-action-expected.txt:
        * http/tests/security/xssAuditor/formaction-on-button-expected.txt:
        * http/tests/security/xssAuditor/formaction-on-input-expected.txt:
        * http/tests/security/xssAuditor/frameset-injection-expected.txt:
        * http/tests/security/xssAuditor/full-block-base-href-expected.txt:
        * http/tests/security/xssAuditor/full-block-link-onclick-expected.txt:
        * http/tests/security/xssAuditor/full-block-object-tag-expected.txt:
        * http/tests/security/xssAuditor/full-block-script-tag-with-source-expected.txt:
        * http/tests/security/xssAuditor/iframe-injection-expected.txt:
        * http/tests/security/xssAuditor/iframe-javascript-url-more-encoding-expected.txt:
        * http/tests/security/xssAuditor/img-onerror-non-ASCII-char-default-encoding-expected.txt:
        * http/tests/security/xssAuditor/img-onerror-non-ASCII-char-expected.txt:
        * http/tests/security/xssAuditor/link-onclick-ampersand-expected.txt:
        * http/tests/security/xssAuditor/link-onclick-control-char-expected.txt:
        * http/tests/security/xssAuditor/link-onclick-entities-expected.txt:
        * http/tests/security/xssAuditor/link-onclick-expected.txt:
        * http/tests/security/xssAuditor/link-onclick-null-char-expected.txt:
        * http/tests/security/xssAuditor/object-embed-tag-control-char-expected.txt:
        * http/tests/security/xssAuditor/object-embed-tag-expected.txt:
        * http/tests/security/xssAuditor/object-embed-tag-null-char-expected.txt:
        * http/tests/security/xssAuditor/object-tag-expected.txt:
        * http/tests/security/xssAuditor/object-tag-javascript-url-expected.txt:
        * http/tests/security/xssAuditor/script-tag-expression-follows-expected.txt:
        * http/tests/security/xssAuditor/script-tag-with-16bit-unicode4-expected.txt:
        * http/tests/security/xssAuditor/script-tag-with-16bit-unicode5-expected.txt:
        * http/tests/security/xssAuditor/script-tag-with-comma-01-expected.txt:
        * http/tests/security/xssAuditor/script-tag-with-source-control-char-expected.txt:
        * http/tests/security/xssAuditor/script-tag-with-source-entities-expected.txt:
        * http/tests/security/xssAuditor/script-tag-with-source-expected.txt:
        * http/tests/security/xssAuditor/script-tag-with-source-null-char-expected.txt:
        * http/tests/security/xssAuditor/script-tag-with-source-same-host-with-query-expected.txt:
        * http/tests/security/xssAuditor/svg-animate-expected.txt:
        * http/tests/security/xssAuditor/svg-script-tag-expected.txt:
        * http/tests/security/xssAuditor/xss-filter-bypass-big5-expected.txt:
        * http/tests/security/xssAuditor/xss-filter-bypass-sjis-expected.txt:

2017-04-07  Youenn Fablet  <youenn@apple.com>

        Improve some WebRTC flaky tests
        https://bugs.webkit.org/show_bug.cgi?id=170584

        Reviewed by Alex Christensen.

        * webrtc/libwebrtc/descriptionGetters.html:
        * webrtc/video-replace-track-to-null.html:

2017-04-07  Zalan Bujtas  <zalan@apple.com>

        Text insertion cursor disappears after pressing enter
        https://bugs.webkit.org/show_bug.cgi?id=169291
        <rdar://problem/30899611>

        Reviewed by Tim Horton.

        * editing/simple-line-layout-caret-is-gone-expected.txt: Added.
        * editing/simple-line-layout-caret-is-gone.html: Added.

2017-04-06  Myles C. Maxfield  <mmaxfield@apple.com>

        Make FontWithFeatures test font pass OTS
        https://bugs.webkit.org/show_bug.cgi?id=169788

        Reviewed by Tim Horton.

        Updated font to the one which passes the tests.

        * css3/resources/FontWithFeatures.otf:

2017-04-06  Jiewen Tan  <jiewen_tan@apple.com>

        LayoutTest crypto/subtle/aes-ctr-encrypt-malformed-parameters.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=170571

        Unreviewed.

        * crypto/subtle/aes-ctr-encrypt-malformed-parameters-expected.txt:
        * crypto/subtle/aes-ctr-encrypt-malformed-parameters.html:

2017-04-06  Wenson Hsieh  <wenson_hsieh@apple.com>

        Scroll offset jumps after a programmatic scroll in an overflow container with scroll snapping
        https://bugs.webkit.org/show_bug.cgi?id=170560
        <rdar://problem/31484693>

        Reviewed by Tim Horton.

        Add a test verifying that programmatically changing the scroll offset of an overflow container does not cause the
        scroll offset to jump back to the last active snap position. See WebCore ChangeLog for more details.

        * css3/scroll-snap/scroll-snap-programmatic-overflow-scroll-expected.txt: Added.
        * css3/scroll-snap/scroll-snap-programmatic-overflow-scroll.html: Added.

2017-04-05  Simon Fraser  <simon.fraser@apple.com>

        Throttle requestAnimationFrame in cross-origin iframes to 30fps
        https://bugs.webkit.org/show_bug.cgi?id=170534

        Reviewed by Dan Bates.

        * http/tests/frame-throttling/raf-throttle-in-cross-origin-subframe-expected.txt: Added.
        * http/tests/frame-throttling/raf-throttle-in-cross-origin-subframe.html: Added.
        * http/tests/frame-throttling/resources/requestAnimationFrame-frame.html: Added.

2017-04-06  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r215041.

        The LayoutTest for this change is failing on ios-simulator.

        Reverted changeset:

        "Rendering flexbox children across columns"
        https://bugs.webkit.org/show_bug.cgi?id=164166
        http://trac.webkit.org/changeset/215041

2017-04-06  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r215046.

        This change broke internal builds.

        Reverted changeset:

        "WebRTC tests gardening"
        https://bugs.webkit.org/show_bug.cgi?id=170508
        http://trac.webkit.org/changeset/215046

2017-04-06  Ryan Haddad  <ryanhaddad@apple.com>

        Skip a test that was accidentally enabled with r214982.

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2017-04-06  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Show all headers in the Request Headers section of the Resource details sidebar
        https://bugs.webkit.org/show_bug.cgi?id=16531
        <rdar://problem/5712895>

        Reviewed by Timothy Hatcher.

        * http/tests/inspector/network/resource-request-headers-expected.txt: Added.
        * http/tests/inspector/network/resource-request-headers.html: Added.
        * http/tests/inspector/network/resources/basic-auth.php: Added.
        Test coverage for Cookie and Basic Authentication headers.

        * platform/mac/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:
        Mark the test as expected to fail on WebKit1 CFNetwork based platforms,
        and ElCapitan which uses the legacy non-NSURLSession loading path.

2017-04-06  Youenn Fablet  <youenn@apple.com>

        LayoutTest fast/mediastream/getUserMedia-webaudio.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=167513

        Reviewed by Eric Carlson.

        * fast/mediastream/getUserMedia-webaudio.html: Removing unecessary flaky check.

2017-04-06  Zalan Bujtas  <zalan@apple.com>

        Simple line layout: Hittest always returns the first renderer in the block.
        https://bugs.webkit.org/show_bug.cgi?id=170520
        <rdar://problem/30979175>

        Reviewed by Antti Koivisto.

        * fast/dom/Document/CaretRangeFromPoint/simple-line-layout-hittest-with-caret-range-from-point-expected.html: Added.
        * fast/dom/Document/CaretRangeFromPoint/simple-line-layout-hittest-with-caret-range-from-point.html: Added.

2017-03-31  Jiewen Tan  <jiewen_tan@apple.com>

        [WebCrypto] Add support for AES-CTR
        https://bugs.webkit.org/show_bug.cgi?id=169761
        <rdar://problem/31331321>

        Reviewed by Brent Fulgham.

        * crypto/subtle/aes-ctr-encrypt-malformed-parameters-expected.txt: Added.
        * crypto/subtle/aes-ctr-encrypt-malformed-parameters.html: Added.
        * crypto/subtle/aes-ctr-generate-export-key-jwk-length-128-expected.txt: Added.
        * crypto/subtle/aes-ctr-generate-export-key-jwk-length-128.html: Added.
        * crypto/subtle/aes-ctr-generate-export-key-jwk-length-192-expected.txt: Added.
        * crypto/subtle/aes-ctr-generate-export-key-jwk-length-192.html: Added.
        * crypto/subtle/aes-ctr-generate-export-key-jwk-length-256-expected.txt: Added.
        * crypto/subtle/aes-ctr-generate-export-key-jwk-length-256.html: Added.
        * crypto/subtle/aes-ctr-generate-export-raw-key-expected.txt: Added.
        * crypto/subtle/aes-ctr-generate-export-raw-key.html: Added.
        * crypto/subtle/aes-ctr-generate-key-encrypt-decrypt-expected.txt: Added.
        * crypto/subtle/aes-ctr-generate-key-encrypt-decrypt.html: Added.
        * crypto/subtle/aes-ctr-generate-key-expected.txt: Added.
        * crypto/subtle/aes-ctr-generate-key.html: Added.
        * crypto/subtle/aes-ctr-import-jwk-key-length-128-expected.txt: Added.
        * crypto/subtle/aes-ctr-import-jwk-key-length-128.html: Added.
        * crypto/subtle/aes-ctr-import-jwk-key-length-192-expected.txt: Added.
        * crypto/subtle/aes-ctr-import-jwk-key-length-192.html: Added.
        * crypto/subtle/aes-ctr-import-jwk-key-length-256-expected.txt: Added.
        * crypto/subtle/aes-ctr-import-jwk-key-length-256.html: Added.
        * crypto/subtle/aes-ctr-import-key-decrypt-expected.txt: Added.
        * crypto/subtle/aes-ctr-import-key-decrypt.html: Added.
        * crypto/subtle/aes-ctr-import-key-encrypt-expected.txt: Added.
        * crypto/subtle/aes-ctr-import-key-encrypt.html: Added.
        * crypto/subtle/aes-ctr-import-key-unwrap-jwk-key-expected.txt: Added.
        * crypto/subtle/aes-ctr-import-key-unwrap-jwk-key.html: Added.
        * crypto/subtle/aes-ctr-import-key-unwrap-raw-key-expected.txt: Added.
        * crypto/subtle/aes-ctr-import-key-unwrap-raw-key.html: Added.
        * crypto/subtle/aes-ctr-import-key-wrap-jwk-key-expected.txt: Added.
        * crypto/subtle/aes-ctr-import-key-wrap-jwk-key.html: Added.
        * crypto/subtle/aes-ctr-import-key-wrap-raw-key-expected.txt: Added.
        * crypto/subtle/aes-ctr-import-key-wrap-raw-key.html: Added.
        * crypto/subtle/aes-ctr-import-raw-key-expected.txt: Added.
        * crypto/subtle/aes-ctr-import-raw-key.html: Added.
        * crypto/subtle/aes-generate-key-malformed-parameters-expected.txt:
        * crypto/subtle/aes-generate-key-malformed-parameters.html:
        * crypto/subtle/aes-import-key-malformed-parameters-expected.txt:
        * crypto/subtle/aes-import-key-malformed-parameters.html:
        * crypto/workers/subtle/aes-ctr-import-key-decrypt-expected.txt: Added.
        * crypto/workers/subtle/aes-ctr-import-key-decrypt.html: Added.
        * crypto/workers/subtle/aes-ctr-import-key-encrypt-expected.txt: Added.
        * crypto/workers/subtle/aes-ctr-import-key-encrypt.html: Added.
        * crypto/workers/subtle/aes-ctr-import-key-unwrap-key-expected.txt: Added.
        * crypto/workers/subtle/aes-ctr-import-key-unwrap-key.html: Added.
        * crypto/workers/subtle/aes-ctr-import-key-wrap-key-expected.txt: Added.
        * crypto/workers/subtle/aes-ctr-import-key-wrap-key.html: Added.
        * crypto/workers/subtle/resources/aes-ctr-import-key-decrypt.js: Added.
        * crypto/workers/subtle/resources/aes-ctr-import-key-encrypt.js: Added.
        * crypto/workers/subtle/resources/aes-ctr-import-key-unwrap-key.js: Added.
        * crypto/workers/subtle/resources/aes-ctr-import-key-wrap-key.js: Added.

2017-04-06  Ryan Haddad  <ryanhaddad@apple.com>

        Mark inspector/codemirror/prettyprinting-css-rules.html as flaky on release.
        https://bugs.webkit.org/show_bug.cgi?id=153460

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-06  Youenn Fablet  <youenn@apple.com>

        WebRTC tests gardening
        https://bugs.webkit.org/show_bug.cgi?id=170508

        Reviewed by Eric Carlson.

        * platform/ios-wk1/TestExpectations:
        * platform/ios-wk2/TestExpectations:
        * platform/ios/TestExpectations:

2017-04-06  Antti Koivisto  <antti@apple.com>

        Implement testing mode for disk cache
        https://bugs.webkit.org/show_bug.cgi?id=170547

        Reviewed by Andreas Kling.

        Enable a few disabled tests to see how it goes.

        * platform/mac-wk2/TestExpectations:

2017-04-06  Romain Bellessort  <romain.bellessort@crf.canon.fr>

        [Readable Streams API] Implement ReadableStreamBYOBRequest respondWithNewView()
        https://bugs.webkit.org/show_bug.cgi?id=170339

        Reviewed by Youenn Fablet.

        Added new tests addressing respondWithNewView() behaviour.

        * streams/readable-stream-byob-request-expected.txt: Updated.
        * streams/readable-stream-byob-request.js: Added new tests.

2017-04-06  Dave Hyatt  <hyatt@apple.com>

        Rendering flexbox children across columns
        https://bugs.webkit.org/show_bug.cgi?id=164166
        <rdar://problem/29055587>

        Reviewed by Zalan Bujtas.

        * fast/multicol/flexbox-rows-expected.html: Added.
        * fast/multicol/flexbox-rows.html: Added.

2017-04-05  Simon Fraser  <simon.fraser@apple.com>

        Set lastHandledUserGestureTimestamp on all ancestor documents, not just the top document
        https://bugs.webkit.org/show_bug.cgi?id=170479

        Reviewed by Sam Weinig.

        * fast/frames/user-gesture-timestamp-propagation-expected.txt: Added.
        * fast/frames/user-gesture-timestamp-propagation.html: Added.
        * platform/ios/TestExpectations:

2017-04-05  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Host application should be able to mute and unmute media streams
        https://bugs.webkit.org/show_bug.cgi?id=170519
        <rdar://problem/31174326>

        Reviewed by Youenn Fablet.

        * fast/mediastream/MediaStream-page-muted-expected.txt:
        * fast/mediastream/MediaStream-page-muted.html:

2017-04-05  Javier Fernandez  <jfernandez@igalia.com>

        [css-align] Implement the place-items shorthand
        https://bugs.webkit.org/show_bug.cgi?id=168847

        Reviewed by David Hyatt.

        Regression tests for the new place-content alignment shorthand.

        * css3/parse-place-items.html: Added.

2017-04-05  Carlos Alberto Lopez Perez  <clopez@igalia.com>

        [WebRTC][OpenWebRTC] Add support for SDP BUNDLE ("a:group:BUNDLE" and "a=bundle-only" lines)
        https://bugs.webkit.org/show_bug.cgi?id=170157

        Reviewed by Alejandro G. Castro.

        The test fast/mediastream/RTCPeerConnection-inspect-offer-bundlePolicy-bundle-only.html
        is used to check that we generate the "a=bundle-only" lines on the "m=" sections
        according to the bundlePolicy. The 3 possible values of bundlePolicy are tested.
        To properly test bundlePolicy:"balanced" we generate 5 extra tracks (6 in total)
        for each one of the audio media type and video media type.

        * TestExpectations: Set RTCPeerConnection-inspect-offer-bundlePolicy-bundle-only.html
        as failing in the general TestExpectations, because the libwebrtc backend currently
        doesn't generate the expected a=bundle-only lines.
        On the GTK+ port TestExpectations file this is overriden, and the test is marked to pass.
        The whole fast/mediastream directory is already overriden to pass.
        * fast/mediastream/RTCPeerConnection-inspect-offer-bundlePolicy-bundle-only-expected.txt: Added.
        * fast/mediastream/RTCPeerConnection-inspect-offer-bundlePolicy-bundle-only.html: Added.
        * fast/mediastream/resources/sdp-utils.js:
        (printComparableSessionDescription): Validate the a=group:BUNDLE line to contain the required MID identifiers.
        * platform/gtk/fast/mediastream/RTCPeerConnection-inspect-answer-expected.txt: Added. Rebaseline with the expected a=group:BUNDLE line.
        * platform/gtk/fast/mediastream/RTCPeerConnection-inspect-offer-expected.txt: Added. Rebaseline with the expected a=group:BUNDLE line.

2017-04-05  Jer Noble  <jer.noble@apple.com>

        [MSE] Seeks to currentTime=0 will fail if currentTime is already 0.
        https://bugs.webkit.org/show_bug.cgi?id=170510

        Reviewed by Eric Carlson.

        * media/media-source/media-source-unnecessary-seek-seeked-expected.txt: Added.
        * media/media-source/media-source-unnecessary-seek-seeked.html: Added.

2017-04-05  Matt Baker  <mattbaker@apple.com>

        Web Inspector: XHR breakpoints should be global
        https://bugs.webkit.org/show_bug.cgi?id=170033

        Reviewed by Joseph Pecoraro..

        * inspector/dom-debugger/xhr-breakpoints.html:
        Update for XHRBreakpoint constructor change.

2017-04-05  Chris Dumez  <cdumez@apple.com>

        <input type="range"> changing to disabled while active breaks all pointer events
        https://bugs.webkit.org/show_bug.cgi?id=170447
        <rdar://problem/31442875>

        Reviewed by Geoffrey Garen.

        Add layout test coverage.

        * fast/forms/range/disabled-while-dragging-expected.txt: Added.
        * fast/forms/range/disabled-while-dragging.html: Added.

2017-04-05  Jiewen Tan  <jiewen_tan@apple.com>

        Unreviewed, rebasing crypto/subtle/rsa-import-key-malformed-parameters.html
        <rdar://problem/31322400>

        * crypto/subtle/rsa-import-key-malformed-parameters-expected.txt:
        * crypto/subtle/rsa-import-key-malformed-parameters.html:

2017-04-05  Youenn Fablet  <youenn@apple.com>

        Deprecate and remove URL.createObjectURL(mediastream)
        https://bugs.webkit.org/show_bug.cgi?id=167518
        <rdar://problem/31149607>

        Reviewed by Eric Carlson.

        * fast/mediacapturefromelement/CanvasCaptureMediaStream-2d-events.html:
        * fast/mediacapturefromelement/CanvasCaptureMediaStream-request-frame-events.html:
        * fast/mediacapturefromelement/CanvasCaptureMediaStream-webgl-events.html:
        * fast/mediastream/MediaStream-video-element-displays-buffer-expected.txt:
        * fast/mediastream/MediaStream-video-element-displays-buffer.html:
        * fast/mediastream/MediaStream-video-element-expected.txt:
        * fast/mediastream/MediaStream-video-element-track-stop-expected.txt:
        * fast/mediastream/MediaStream-video-element-track-stop.html:
        * fast/mediastream/MediaStream-video-element-video-tracks-disabled-then-enabled-expected.txt:
        * fast/mediastream/MediaStream-video-element-video-tracks-disabled.html:
        * fast/mediastream/MediaStream-video-element.html:
        * fast/mediastream/resources/getUserMedia-helper.js:
        (setupVideoElementWithStream):

2017-04-05  Javier Fernandez  <jfernandez@igalia.com>

        [GTK] Unreviewed tests gardening
        https://bugs.webkit.org/show_bug.cgi?id=170497

        Unreviewed test gardening. Rebaseline tests after r214712.

        * platform/gtk/fast/multicol/table-vertical-align-expected.txt:


2017-04-04  Alexey Proskuryakov  <ap@apple.com>

        Mark imported/w3c/web-platform-tests/fetch/api/response/response-trailer.html as flaky
        for https://bugs.webkit.org/show_bug.cgi?id=170493

        * platform/mac/TestExpectations:

2017-04-04  Youenn Fablet  <youenn@apple.com>

        Canvas is tainted when painting a video with MediaStreamTrack
        https://bugs.webkit.org/show_bug.cgi?id=170486

        Reviewed by Eric Carlson.

        * http/tests/media/media-stream/getusermedia-with-canvas-expected.txt: Added.
        * http/tests/media/media-stream/getusermedia-with-canvas.html: Added.
        * http/tests/media/media-stream/resources/getUserMedia-helper.js: Added.
        (reject):
        (getUserMedia):
        (defaultRejectOrCatch):
        (setupVideoElementWithStream):

2017-04-04  Youenn Fablet  <youenn@apple.com>

        [Mac] Add back web audio support for getUserMedia MediaStreamTrack
        https://bugs.webkit.org/show_bug.cgi?id=170482

        Reviewed by Eric Carlson.

        * TestExpectations:

2017-04-04  Ryan Haddad  <ryanhaddad@apple.com>

        Mark fast/images/slower-animation-than-decoding-image.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=168390

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-04  Ryan Haddad  <ryanhaddad@apple.com>

        Mark fast/images/reset-image-animation.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170177

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-04-04  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/airplay-button/airplay-button.html as flaky on mac-wk1 Release.
        https://bugs.webkit.org/show_bug.cgi?id=168409

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-04-04  Brent Fulgham  <bfulgham@apple.com>

        Do not assert when CharacterData representing an Attr fires events
        https://bugs.webkit.org/show_bug.cgi?id=170454
        <rdar://problem/30979320>

        Reviewed by Ryosuke Niwa.

        * fast/dom/no-assert-for-malformed-js-url-attribute-expected.txt: Added.
        * fast/dom/no-assert-for-malformed-js-url-attribute.html: Added.

2017-04-04  Youenn Fablet  <youenn@apple.com>

        LayoutTest webrtc/libwebrtc/descriptionGetters.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=169481

        Reviewed by Eric Carlson.

        * platform/mac-wk2/TestExpectations: Removing flaky expectation.
        * webrtc/datachannel/basic.html:

2017-04-04  Ryan Haddad  <ryanhaddad@apple.com>

        Add back results that were accidentally removed with r214848.
        https://bugs.webkit.org/show_bug.cgi?id=169301

        Unreviewed test gardening.

        * platform/mac/fast/text/international/synthesized-italic-vertical-latin-expected.png: Added.
        * platform/mac/fast/text/international/synthesized-italic-vertical-latin-expected.txt: Added.

2017-04-04  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/macos-inline-media-controls/macos-inline-media-controls-buttons-styles.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170456

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-04-04  Youenn Fablet  <youenn@apple.com>

        webrtc/peer-connection-audio-mute.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=170451

        Reviewed by Eric Carlson.

        * TestExpectations: Removed flaky expectation for webrtc/peer-connection-audio-mute.html.
        * webrtc/peer-connection-remote-audio-mute.html: Added timer to ensure setting enable propagates.
        Decreasing time spent at detecting hum or not.
        * webrtc/peer-connection-remote-audio-mute2.html: Ditto (but keeping flakiness expectation for now).

2017-04-04  Ryan Haddad  <ryanhaddad@apple.com>

        Mark fast/images/animated-gif-webkit-transform.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170410

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2017-04-03  Alexey Proskuryakov  <ap@apple.com>

        Re-adding flaky timeout expectation for http/tests/loading/resourceLoadStatistics/non-prevalent-resource-with-user-interaction.html

        This test still times out, most of the time.

        * platform/wk2/TestExpectations:

2017-04-03  Javier Fernandez  <jfernandez@igalia.com>

        [css-align] Adapt place-content alignment shorthand to the new baseline syntax
        https://bugs.webkit.org/show_bug.cgi?id=170340

        Reviewed by David Hyatt.

        Added additional test cases to evaluate the new baseline-alignment syntax.

        * css3/parse-place-content-expected.txt:
        * css3/parse-place-content.html:

2017-04-03  Nan Wang  <n_wang@apple.com>

        AX: Expose link children when doing search predication on iOS
        https://bugs.webkit.org/show_bug.cgi?id=170424
        <rdar://problem/31413335>

        Reviewed by Chris Fleizach.

        * accessibility/ios-simulator/ios-search-predicate-link-children-expected.txt: Added.
        * accessibility/ios-simulator/ios-search-predicate-link-children.html: Added.

2017-04-03  Dave Hyatt  <hyatt@apple.com>

        Japanese fonts in vertical text should support synthesized italics
        https://bugs.webkit.org/show_bug.cgi?id=169301

        Reviewed by Simon Fraser.

        * fast/text/international/synthesized-italic-vertical-expected.html:
        * fast/text/international/synthesized-italic-vertical.html:
        * platform/mac/fast/text/international/synthesized-italic-vertical-latin-expected.png: Removed.
        * platform/mac/fast/text/international/synthesized-italic-vertical-latin-expected.txt: Removed.

2017-04-03  Chris Dumez  <cdumez@apple.com>

        REGRESSION (r206744): CSS background-image in style attribute ignored when using createHTMLDocument method of DOM parsing
        https://bugs.webkit.org/show_bug.cgi?id=170285
        <rdar://problem/31378543>

        Reviewed by Andy Estes.

        Add layout test coverage.

        * fast/images/background-image-relative-url-changes-document-expected.html: Added.
        * fast/images/background-image-relative-url-changes-document.html: Added.

2017-04-03  John Wilander  <wilander@apple.com>

        Remove timeout expectations after bug fix
        https://bugs.webkit.org/show_bug.cgi?id=168262

        Unreviewed test gardening.

        Remove timeout expectations after bug fix in
        https://bugs.webkit.org/show_bug.cgi?id=170400

        * platform/wk2/TestExpectations:
            Remove expected timeout for the first five test cases
            under http/tests/loading/resourceLoadStatistics/.

2017-04-03  Antti Koivisto  <antti@apple.com>

        REGRESSION (r207669): FileMaker Pro Help pages do not render correctly
        https://bugs.webkit.org/show_bug.cgi?id=170402
        <rdar://problem/31004344>

        Reviewed by Simon Fraser.

        * fast/css/document-stylesheets-dynamic-expected.html: Added.
        * fast/css/document-stylesheets-dynamic.html: Added.

2017-04-03  Jeremy Jones  <jeremyj@apple.com>

        LayoutTest pointer-lock/mouse-event-delivery.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=167965

        Reviewed by Jon Lee.

        Wait for wheel event before doing next step of test. The wheel event is delivered asynchronously and
        can therefore be delivered later than expected by the test. This is already done for the first one,
        do this for the second one also.

        * platform/mac-wk2/TestExpectations:
        * pointer-lock/mouse-event-delivery.html:

2017-04-01  Simon Fraser  <simon.fraser@apple.com>

        Clean up touch event handler registration when moving nodes between documents
        https://bugs.webkit.org/show_bug.cgi?id=170384
        rdar://problem/30816694

        Reviewed by Chris Dumez.

        Tests for moving nodes with various listener/handler combinations between documents.

        * fast/events/touch/ios/gesture-node-move-between-documents-expected.txt: Added.
        * fast/events/touch/ios/gesture-node-move-between-documents.html: Added.
        * fast/events/touch/ios/overflow-node-move-between-documents-expected.txt: Added.
        * fast/events/touch/ios/overflow-node-move-between-documents.html: Added.
        * fast/events/touch/ios/slider-node-move-between-documents-expected.txt: Added.
        * fast/events/touch/ios/slider-node-move-between-documents.html: Added.
        * fast/events/touch/ios/touch-node-move-between-documents-expected.txt: Added.
        * fast/events/touch/ios/touch-node-move-between-documents.html: Added.

2017-04-03  Carlos Garcia Campos  <cgarcia@igalia.com>

        [SOUP] URI Fragment is lost after redirect
        https://bugs.webkit.org/show_bug.cgi?id=170058

        Reviewed by Michael Catanzaro.

        Add tests to check we correctly handle fragment identifiers on server redirections.

        * http/tests/navigation/redirect-preserves-fragment-expected.txt: Added.
        * http/tests/navigation/redirect-preserves-fragment.html: Added.
        * http/tests/navigation/redirect-to-fragment-expected.txt: Added.
        * http/tests/navigation/redirect-to-fragment.html: Added.
        * http/tests/navigation/redirect-to-fragment2-expected.txt: Added.
        * http/tests/navigation/redirect-to-fragment2.html: Added.
        * http/tests/navigation/resources/redirect-preserves-fragment.php: Added.
        * http/tests/navigation/resources/redirect-to-fragment.php: Added.
        * http/tests/navigation/resources/redirect-to-fragment2.php: Added.
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:

2017-04-03  Youenn Fablet  <youenn@apple.com>

        captureStream is getting black frames with webgl canvas
        https://bugs.webkit.org/show_bug.cgi?id=170325

        Reviewed by Dean Jackson.

        * fast/mediastream/captureStream/canvas3d-expected.txt: Added.
        * fast/mediastream/captureStream/canvas3d.html: Added.

2017-04-03  Per Arne Vollan  <pvollan@apple.com>

        Implement stroke-miterlimit.
        https://bugs.webkit.org/show_bug.cgi?id=169078

        Reviewed by Dean Jackson.

        * fast/css/stroke-miterlimit-default-expected.html: Added.
        * fast/css/stroke-miterlimit-default.html: Added.
        * fast/css/stroke-miterlimit-large-expected-mismatch.html: Added.
        * fast/css/stroke-miterlimit-large.html: Added.
        * fast/css/stroke-miterlimit-zero-expected-mismatch.html: Added.
        * fast/css/stroke-miterlimit-zero.html: Added.

2017-04-02  Alexey Proskuryakov  <ap@apple.com>

        Remove accidentally added DumpJSConsoleLogInStdErr from http/tests/fetch/fetch-in-worker-crash.html expectation.

        * TestExpectations:

2017-04-02  Alexey Proskuryakov  <ap@apple.com>

        Build fix for
        Add missing text styles
        https://bugs.webkit.org/show_bug.cgi?id=170295

        * platform/ios/ios/fast/text/opticalFontWithTextStyle-expected.txt:

2017-04-02  Alexey Proskuryakov  <ap@apple.com>

        Fix lint errors.

        * TestExpectations:
        * platform/ios-wk1/TestExpectations:
        * platform/ios-wk2/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac-wk1/TestExpectations:

2017-04-02  Alexey Proskuryakov  <ap@apple.com>

        Mark http/tests/fetch/fetch-in-worker-crash.html and imported/w3c/web-platform-tests/fetch/api/cors/cors-preflight-status.html as flaky.

        For https://bugs.webkit.org/show_bug.cgi?id=170395
        rdar://problem/30975761, rdar://problem/31394017

        * TestExpectations:

2017-04-01  Per Arne Vollan  <pvollan@apple.com>

        Add test for expected fallback behavior between stroke-width and -webkit-text-stroke-width.
        https://bugs.webkit.org/show_bug.cgi?id=169466

        Reviewed by Jon Lee.

        Now that we have added support for stroke-width, we should have a test for expected fallback behavior between
        stroke-width and -webkit-text-stroke-width. Currently, stroke-width is always preferred, also when inherited,
        and when -webkit-text-stroke-width is declared inline. When stroke-width is not specified, we fall back to
        -webkit-text-stroke-width.

        * fast/css/stroke-width-fallback-expected.html: Added.
        * fast/css/stroke-width-fallback.html: Added.

2017-04-01  Jon Lee  <jonlee@apple.com>

        Add missing text styles
        https://bugs.webkit.org/show_bug.cgi?id=170295
        rdar://problem/30219503

        Reviewed by Dean Jackson.

        * platform/ios/ios/fast/text/opticalFontWithTextStyle.html: Update test to include title0 and title4.

2017-04-01  Chris Dumez  <cdumez@apple.com>

        We should pause silent WebAudio rendering in background tabs
        https://bugs.webkit.org/show_bug.cgi?id=170299
        <rdar://problem/31289132>

        Reviewed by Eric Carlson.

        Add layout test coverage.

        * webaudio/silent-audio-interrupted-in-background-expected.txt: Added.
        * webaudio/silent-audio-interrupted-in-background.html: Added.

2017-04-01  Alexey Proskuryakov  <ap@apple.com>

        Rolling back http://trac.webkit.org/r214663 - memory corruption

        * streams/readable-stream-byob-request-expected.txt:
        * streams/readable-stream-byob-request.js:
        (self.importScripts.test): Deleted.

2017-03-31  Zalan Bujtas  <zalan@apple.com>

        <table>: Including <caption>, <thead> or <tbody> causes clipping across page breaks
        https://bugs.webkit.org/show_bug.cgi?id=170348
        <rdar://problem/24727151>

        Reviewed by David Hyatt.

        * fast/multicol/table-section-page-break-expected.html: Added.
        * fast/multicol/table-section-page-break.html: Added.

2017-03-31  Chris Dumez  <cdumez@apple.com>

        LayoutTest fast/images/animated-gif-restored-from-bfcache.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=162510
        <rdar://problem/31380650>

        Reviewed by Alexey Proskuryakov.

        The test restores a page from PageCache and wants to check that an animated
        GIF is properly animating. To do so, it store the data of the current image
        frame, and then checks in a 100ms timer that the current image frame is
        different. This is flaky by nature since the image only has 10 frames and
        you therefore have a 1/10 chance that the new frame will be the same as the
        previous one, even if the image is properly animating.

        To address the problem, do a setInterval instead of a setTimeout and check
        until the frame becomes different.

        * fast/images/animated-gif-restored-from-bfcache.html:
        * platform/mac/TestExpectations:

2017-03-31  Wenson Hsieh  <wenson_hsieh@apple.com>

        [WK2] Tapping away to dismiss the selection does not update the selected DOM range using character granularity
        https://bugs.webkit.org/show_bug.cgi?id=170328
        <rdar://problem/30904558>

        Reviewed by Tim Horton.

        Adds a new layout test verifying that when a user taps away to clear the current selection in character
        granularity selection mode, the selected DOM range in the web process does not fall out of sync with UIKit's
        selection views, which are dismissed.

        * editing/selection/character-granularity-selected-range-after-dismissing-selection-expected.txt: Added.
        * editing/selection/character-granularity-selected-range-after-dismissing-selection.html: Added.

2017-03-31  Youenn Fablet  <youenn@apple.com>

        Add a test to ensure webrtc generated certificates and names are ephemeral
        https://bugs.webkit.org/show_bug.cgi?id=170225

        Reviewed by Jon Lee.

        * webrtc/ephemeral-certificates-and-cnames-expected.txt: Added.
        * webrtc/ephemeral-certificates-and-cnames.html: Added.

2017-03-31  Wenson Hsieh  <wenson_hsieh@apple.com>

        [WK2] Tapping editable text inside of a range selection no longer changes the selection to a caret
        https://bugs.webkit.org/show_bug.cgi?id=170327
        <rdar://problem/31363816>

        Reviewed by Tim Horton.

        Adds a new WK2 interaction test for iOS verifying that tapping a selection in editable content sets the selection
        to a caret, rather than maintaining the range selection. This test is disabled in OpenSource, since it relies on
        synthetic touch events.

        * TestExpectations:
        * editing/selection/caret-after-tap-in-editable-selection-expected.txt: Added.
        * editing/selection/caret-after-tap-in-editable-selection.html: Added.

2017-03-31  Alexey Proskuryakov  <ap@apple.com>

        Mark fast/mediastream/MediaStream-page-muted.html as flaky for
        https://bugs.webkit.org/show_bug.cgi?id=170355

        * TestExpectations:

2017-03-31  Alexey Proskuryakov  <ap@apple.com>

        Correction for the previous change - this is an image failure.

        * platform/mac-wk2/TestExpectations:

2017-03-31  Alexey Proskuryakov  <ap@apple.com>

        Mark fast/images/animated-image-different-dest-size.html as flaky for
        https://bugs.webkit.org/show_bug.cgi?id=170203

        * platform/mac-wk2/TestExpectations:

2017-03-31  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Update expectations of several tests.

        Also rebaseline fast/css/getComputedStyle/computed-style-font-family.html after r214394, it also requires variation
        fonts.

        * platform/gtk/TestExpectations:
        * platform/gtk/fast/css/getComputedStyle/computed-style-font-family-expected.txt: Added.

2017-03-31  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline several tests after r214546.

        GTK+ port doesn't support variation fonts. Also mark canvas/philip/tests/2d.pattern.animated.gif.html as failing
        after r214503.

        * platform/gtk/TestExpectations:
        * platform/gtk/fast/text/font-selection-font-loading-api-parse-expected.txt: Added.
        * platform/gtk/fast/text/font-stretch-parse-expected.txt: Added.
        * platform/gtk/fast/text/font-style-parse-expected.txt: Added.
        * platform/gtk/fast/text/font-weight-parse-expected.txt: Added.

2017-03-31  Romain Bellessort  <romain.bellessort@crf.canon.fr>

        [Readable Streams API] Implement cloneArrayBuffer in WebCore
        https://bugs.webkit.org/show_bug.cgi?id=170008

        Reviewed by Youenn Fablet.

        Added test to check cloneArrayBuffer behaviour. 

        * streams/readable-stream-byob-request.js:

2017-03-31  Oleksandr Skachkov  <gskachkov@gmail.com>

        String.prototype.replace incorrectly applies "special replacement parameters" when passed a function
        https://bugs.webkit.org/show_bug.cgi?id=170151

        Reviewed by Saam Barati.

        * js/script-tests/string_replace_function.js: Added.
        * js/script-tests/string_replace_regexp.js: Renamed from LayoutTests/js/script-tests/string_replace.js.
        * js/string_replace_function-expected.txt: Added.
        * js/string_replace_function.html: Copied from LayoutTests/js/string_replace.html.
        * js/string_replace_regexp-expected.txt: Renamed from LayoutTests/js/string_replace-expected.txt.
        * js/string_replace_regexp.html: Renamed from LayoutTests/js/string_replace.html.

2017-03-31  Manuel Rego Casasnovas  <rego@igalia.com>

        [css-grid] Update W3C Test Suite
        https://bugs.webkit.org/show_bug.cgi?id=170170

        Reviewed by Youenn Fablet.

        Update path to tests in TestExpectations as the CSS Grid Layout suite
        is now under web-platform-tests.

        * TestExpectations:

2017-03-31  Antoine Quint  <graouts@apple.com>

        [mac-wk1] LayoutTest media/modern-media-controls/airplay-button/airplay-button.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=168409
        <rdar://problem/30799198>

        Unreviewed. Capture new logging events.

        * media/modern-media-controls/airplay-button/airplay-button.html:

2017-03-30  Matt Baker  <mattbaker@apple.com>

        Unreviewed. Update test expectations after https://bugs.webkit.org/show_bug.cgi?id=170279.

        * inspector/css/getAllStyleSheets-expected.txt:

2017-03-30  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline js/dom/global-constructors-attributes.html.

        Unreviewed test gardening.

        * platform/mac-elcapitan/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac-wk1/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac/js/dom/global-constructors-attributes-expected.txt:

2017-03-30  Simon Fraser  <simon.fraser@apple.com>

        Rename a touch event function, and new touch region test results
        https://bugs.webkit.org/show_bug.cgi?id=170309
        rdar://problem/31329520

        Reviewed by Chris Dumez.

        A code change in WebKitAdditions progresses this test result.

        * fast/events/touch/ios/touch-event-regions/iframes-expected.txt:

2017-03-30  Said Abou-Hallawa  <sabouhallawa@apple.com>

        REGRESSION (r213764): Background image from sprite sheet incorrectly scaled
        https://bugs.webkit.org/show_bug.cgi?id=169547

        Reviewed by Simon Fraser.

        * fast/images/async-image-background-image.html:
        * fast/images/resources/sprite-sheet-red-green-blue.png: Added.
        * fast/images/sprite-sheet-image-draw-expected.html: Added.
        * fast/images/sprite-sheet-image-draw.html: Added.

2017-03-30  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Assertion failure in InspectorStyleProperty::setRawTextFromStyleDeclaration
        https://bugs.webkit.org/show_bug.cgi?id=170279
        <rdar://problem/30200492>

        Reviewed by David Hyatt.

        * inspector/css/getAllStyleSheets.html:
        Add stylesheet with an "unparsed" property having no final semicolon.

2017-03-30  Youenn Fablet  <youenn@apple.com>

        Clean up RTCDataChannel
        https://bugs.webkit.org/show_bug.cgi?id=169732

        Reviewed by Chris Dumez.

        * webrtc/datachannel/bufferedAmountLowThreshold-expected.txt: Added.
        * webrtc/datachannel/bufferedAmountLowThreshold.html: Added.

2017-03-30  Chris Dumez  <cdumez@apple.com>

        svg/animations/animations-paused-in-background-page.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=170290

        Reviewed by Simon Fraser.

        Fix shouldBecomeEqual() check in the test which was wrong and was passing by chance
        due to a race.

        * svg/animations/animations-paused-in-background-page-expected.txt:
        * svg/animations/animations-paused-in-background-page.html:

2017-03-30  Javier Fernandez  <jfernandez@igalia.com>

        [css-align] Adapt content-alignment properties to the new baseline syntax
        https://bugs.webkit.org/show_bug.cgi?id=170262

        Reviewed by David Hyatt.

        Added new cases to the alignment properties parsing tests so that we can verify the new
        baseline-alignment syntax is parsed as expected.
        Additionally, I modified the tests so that they use the testharness format.

        * css3/parse-align-content-expected.txt:
        * css3/parse-align-content.html:
        * css3/parse-justify-content-expected.txt:
        * css3/parse-justify-content.html:

2017-03-30  James Craig  <jcraig@apple.com>

        AX: Expose a new AXSubrole for explicit ARIA "group" role
        https://bugs.webkit.org/show_bug.cgi?id=169810
        <rdar://problem/31039693>

        Reviewed by Chris Fleizach.

        * accessibility/list-detection2-expected.txt:
        * accessibility/list-detection2.html:
        * accessibility/roles-computedRoleString.html:
        * inspector/dom/getAccessibilityPropertiesForNode-expected.txt:
        * inspector/dom/highlightFrame-expected.txt:
        * inspector/dom/highlightSelector-expected.txt:
        * platform/mac/accessibility/roles-computedRoleString-expected.txt:
        * platform/mac/accessibility/roles-exposed-expected.txt:

2017-03-30  Youenn Fablet  <youenn@apple.com>

        webrtc/video-stats.html and webrtc/video-replace-track.html are flaky
        https://bugs.webkit.org/show_bug.cgi?id=170294

        Unreviewed.

        * TestExpectations: Marking these tests as flaky.

2017-03-30  Eric Carlson  <eric.carlson@apple.com>

        [Crash] WebCore::AudioBuffer::AudioBuffer don't checking illegal value
        https://bugs.webkit.org/show_bug.cgi?id=169956

        Reviewed by Youenn Fablet.

        * webaudio/audiobuffer-crash-expected.txt: Added.
        * webaudio/audiobuffer-crash.html: Added.

2017-03-30  Simon Fraser  <simon.fraser@apple.com>

        Add some tests that dump the touch event regions with various content configurations
        https://bugs.webkit.org/show_bug.cgi?id=170216

        Followup: add missing results files, and tweak iframes.html to show that regions fail to
        take iframe borders into account.

        * fast/events/touch/ios/touch-event-regions/active-passive-nesting-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/columns-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/complex-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/document-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/iframes-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/iframes.html:
        * fast/events/touch/ios/touch-event-regions/overflow-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/range-sliders-expected.txt: Added.

2017-03-30  Per Arne Vollan  <pvollan@apple.com>

        [mac-wk1 debug] LayoutTest media/track/track-cue-rendering-with-padding.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=170188

        Reviewed by Eric Carlson.

        The textTrackDisplayElement call will fail and throw an exception if the text track display element
        has not yet been added to the text track container element. We wait until it has been added.

        * media/track/track-cue-rendering-with-padding.html:

2017-03-30  Antoine Quint  <graouts@apple.com>

        [Modern Media Controls] Invalid placard icon is not visible for short video
        https://bugs.webkit.org/show_bug.cgi?id=170277
        <rdar://problem/31327955>

        Reviewed by Eric Carlson.

        Add a new test to check that we correctly hide the invalid icon only when
        there is no space left to display it.

        * media/modern-media-controls/invalid-placard/invalid-placard-constrained-metrics-expected.txt: Added.
        * media/modern-media-controls/invalid-placard/invalid-placard-constrained-metrics.html: Added.

2017-03-27  Sergio Villar Senin  <svillar@igalia.com>

        [css-grid] Clamp the number of autorepeat tracks
        https://bugs.webkit.org/show_bug.cgi?id=170120

        Reviewed by Manuel Rego Casasnovas.

        Added a new test to check the clamping of grid tracks. It's mostly all JavaScript in order
        to allow us to run several test cases over a small number of grids in a single file quite
        fast. The other option was to statically (CSS) create several huge grids, something that
        could potentially be very expensive in terms of memory and CPU leading to timeouts.

        * fast/css-grid-layout/grid-auto-repeat-huge-grid-expected.txt: Added.
        * fast/css-grid-layout/grid-auto-repeat-huge-grid.html: Added.

2017-03-30  Antoine Quint  <graouts@apple.com>

        [mac-wk1] LayoutTest media/modern-media-controls/airplay-button/airplay-button.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=168409
        <rdar://problem/30799198>

        Unreviewed. Add logging related to visibility since document.visibility = hidden would cause the
        requestAnimationFrame() call to suspend the ScriptedAnimationController.

        * media/modern-media-controls/airplay-button/airplay-button.html:

2017-03-30  Per Arne Vollan  <pvollan@apple.com>

        REGRESSION(~r212322): LayoutTest media/track/track-cue-container-rendering-position.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=168660

        Reviewed Eric Carlson.

        The textTrackDisplayElement call will fail and throw an exception if the text track display element
        has not yet been added to the text track container element. We wait until it has been added.

        * media/track/track-cue-container-rendering-position.html:

2017-03-29  Ryosuke Niwa  <rniwa@webkit.org>

        Disconnecting a HTMLObjectElement does not always unload its content document
        https://bugs.webkit.org/show_bug.cgi?id=169606

        Reviewed by Andy Estes.

        Add a regression test.

        * fast/dom/removing-focused-object-element-expected.txt: Added.
        * fast/dom/removing-focused-object-element.html: Added.

2017-03-29  Simon Fraser  <simon.fraser@apple.com>

        Add some tests that dump the touch event regions with various content configurations
        https://bugs.webkit.org/show_bug.cgi?id=170216

        Reviewed by Dean Jackson.

        Tests for touch event regions. Some of these are modeled after tests in tiled-drawing/scrolling/non-fast-region/.

        * fast/events/touch/ios/touch-event-regions/resources/touch-regions-helper.js: Added.
        * fast/events/touch/ios/touch-event-regions/active-passive-nesting-expected.html: Added.
        * fast/events/touch/ios/touch-event-regions/active-passive-nesting.html: Added.
        * fast/events/touch/ios/touch-event-regions/columns-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/columns.html: Added.
        * fast/events/touch/ios/touch-event-regions/complex-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/complex.html: Added.
        * fast/events/touch/ios/touch-event-regions/document-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/document.html: Added.
        * fast/events/touch/ios/touch-event-regions/iframes-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/iframes.html: Added.
        * fast/events/touch/ios/touch-event-regions/overflow-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/overflow.html: Added.
        * fast/events/touch/ios/touch-event-regions/range-sliders-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions/range-sliders.html: Added.

2017-03-28  Simon Fraser  <simon.fraser@apple.com>

        Make it possible to dump touch event regions for testing
        https://bugs.webkit.org/show_bug.cgi?id=170209
        <rdar://problem/31309258>

        Reviewed by Tim Horton.

        Simple test that dumps the regions.

        * fast/events/touch/ios/touch-event-regions-expected.txt: Added.
        * fast/events/touch/ios/touch-event-regions.html: Added.

2017-03-29  Zalan Bujtas  <zalan@apple.com>

        RenderBlockFlow::addFloatsToNewParent should check if float is already added to the object list.
        https://bugs.webkit.org/show_bug.cgi?id=170259
        <rdar://problem/31300584>

        Reviewed by Simon Fraser.

        * fast/block/float/placing-multiple-floats-crash-expected.txt: Added.
        * fast/block/float/placing-multiple-floats-crash.html: Added.

2017-03-29  Tim Horton  <timothy_horton@apple.com>

        Swipe gesture tests don't work on macOS Sierra
        https://bugs.webkit.org/show_bug.cgi?id=161675
        <rdar://problem/23379930>

        Reviewed by Darin Adler.

        * platform/mac-wk2/TestExpectations:
        * swipe/basic-cached-back-swipe-expected.txt:
        * swipe/basic-cached-back-swipe.html:
        * swipe/main-frame-pinning-requirement-expected.txt:
        * swipe/main-frame-pinning-requirement.html:
        * swipe/pushState-cached-back-swipe-expected.txt:
        * swipe/pushState-cached-back-swipe.html:
        * swipe/pushState-programmatic-back-while-swiping-crash-expected.txt:
        * swipe/pushState-programmatic-back-while-swiping-crash.html:
        * swipe/resources/swipe-test.js:
        (measuredDurationShouldBeLessThan):
        (startSwipeGesture):
        (completeSwipeGesture):
        (playEventStream):
        (eventQueue.enqueueScrollEvent): Deleted.
        (eventQueue.enqueueSwipeEvent): Deleted.
        (eventQueue.hasPendingEvents): Deleted.
        (eventQueue.callAfterEventDispatch): Deleted.
        (eventQueue._processEventQueue): Deleted.
        (eventQueue._processEventQueueSoon): Deleted.
        * swipe/swipe-start-hysteresis-failures-expected.txt: Removed.
        * swipe/swipe-start-hysteresis-failures.html: Removed.

2017-03-29  Myles C. Maxfield  <mmaxfield@apple.com>

        Try to normalize variation ranges
        https://bugs.webkit.org/show_bug.cgi?id=170119

        Reviewed by Simon Fraser.

        * fast/text/variations/font-selection-properties-expected.html:

2017-03-29  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/media/modern-media-controls/time-labels-support/long-time.html as flaky on macOS.
        https://bugs.webkit.org/show_bug.cgi?id=169677

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:
        * platform/mac/TestExpectations:

2017-03-29  Javier Fernandez  <jfernandez@igalia.com>

        [css-align] Adapt self-alignment properties to the new baseline syntax
        https://bugs.webkit.org/show_bug.cgi?id=170235

        Reviewed by David Hyatt.

        Added new cases to the alignment properties parsing tests so that we can verify the new
        baseline-alignment syntax is parsed as expected.
        Additionally, I modified the tests so that they use the testharness format.

        * css3/parse-align-items-expected.txt:
        * css3/parse-align-items.html:
        * css3/parse-align-self-expected.txt:
        * css3/parse-align-self.html:
        * css3/resources/alignment-parsing-utils-th.js:
        (checkValues):
        * fast/css/parse-justify-items-expected.txt:
        * fast/css/parse-justify-items.html:
        * fast/css/parse-justify-self-expected.txt:
        * fast/css/parse-justify-self.html:
        * fast/css/resources/alignment-parsing-utils-th.js: Copied from LayoutTests/css3/resources/alignment-parsing-utils-th.js.
        (checkValues):
        (checkBadValues):
        (checkInitialValues):
        (checkInheritValues):
        (checkLegacyValues):
        (checkSupportedValues):

2017-03-29  Chris Dumez  <cdumez@apple.com>

        Animated SVG images are not paused in pages loaded in the background
        https://bugs.webkit.org/show_bug.cgi?id=170043
        <rdar://problem/31234412>

        Reviewed by Simon Fraser.

        Extend layout test coverage.

        * svg/animations/animations-paused-in-background-page-expected.txt: Added.
        * svg/animations/animations-paused-in-background-page-iframe-expected.txt: Added.
        * svg/animations/animations-paused-in-background-page-iframe.html: Added.
        * svg/animations/animations-paused-in-background-page.html: Added.
        * svg/animations/resources/iframe-with-animated-svg-image.html: Added.

2017-03-29  Myles C. Maxfield  <mmaxfield@apple.com>

        Post-commit test gardening after r214546
        https://bugs.webkit.org/show_bug.cgi?id=169518

        Unreviewed.

        * platform/mac-elcapitan/fast/text/font-selection-font-loading-api-parse-expected.txt:
        * platform/mac-elcapitan/fast/text/font-style-parse-expected.txt:

2017-03-29  Myles C. Maxfield  <mmaxfield@apple.com>

        Post-commit test gardening after r214546
        https://bugs.webkit.org/show_bug.cgi?id=169518

        Unreviewed.

        * platform/mac-elcapitan/fast/text/font-selection-font-loading-api-parse-expected.txt:
        * platform/mac-elcapitan/fast/text/font-style-parse-expected.txt:

2017-03-29  Ryan Haddad  <ryanhaddad@apple.com>

        Mark fast/events/before-unload-adopt-subframe-to-outside.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170130

        Unreviewed test gardening.

        * TestExpectations:

2017-03-29  Myles C. Maxfield  <mmaxfield@apple.com>

        Variation fonts: Make sure that feature detection and preprocessor macros are right
        https://bugs.webkit.org/show_bug.cgi?id=169518

        Reviewed by Simon Fraser.

        Create platform-specific results for mac-elcapitan which doesn't support variation fonts.

        * fast/text/font-variations-feature-detection-expected.html: Added.
        * fast/text/font-variations-feature-detection.html: Added.
        * platform/ios-simulator/TestExpectations:
        * platform/mac-elcapitan/fast/text/font-selection-font-face-parse-expected.txt:
        * platform/mac-elcapitan/fast/text/font-selection-font-loading-api-parse-expected.txt: Added.
        * platform/mac-elcapitan/fast/text/font-stretch-parse-expected.txt: Added.
        * platform/mac-elcapitan/fast/text/font-style-parse-expected.txt: Added.
        * platform/mac-elcapitan/fast/text/font-weight-parse-expected.txt: Added.
        * platform/mac/TestExpectations:

2017-03-29  Antoine Quint  <graouts@apple.com>

        [Modern Media Controls] Controls bar may disappear while captions menu is visible (redux)
        https://bugs.webkit.org/show_bug.cgi?id=170239
        <rdar://problem/31320685>

        Reviewed by Dean Jackson.

        We extend an existing test to cover the case where we would hide the controls bar while the tracks panel
        is up by mousing out of the media. We also add a new test where we check that clicking over the controls
        bar to dismiss the tracks panel does not hide the controls bar. Finally, we make a small change to an
        existing test to listen to "transitionend" event on the tracks panel specifically since with this patch
        the controls bar would disappear and trigger a similar event when disappearing as the tracks panel is dismissed.

        * media/modern-media-controls/tracks-panel/tracks-panel-controls-bar-remains-visible-after-clicking-over-it-expected.txt: Added.
        * media/modern-media-controls/tracks-panel/tracks-panel-controls-bar-remains-visible-after-clicking-over-it.html: Added.
        * media/modern-media-controls/tracks-panel/tracks-panel-prevent-controls-bar-from-fading-expected.txt:
        * media/modern-media-controls/tracks-panel/tracks-panel-prevent-controls-bar-from-fading.html:
        * media/modern-media-controls/tracks-support/tracks-support-click-track-in-panel.html:

2017-03-28  Ryan Haddad  <ryanhaddad@apple.com>

        Mark fast/workers/worker-close-more.html as a flaky timeout.
        https://bugs.webkit.org/show_bug.cgi?id=169838

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-03-29  Youenn Fablet  <youenn@apple.com>

        Move DTMF WebRTC extension behind its own compile flag
        https://bugs.webkit.org/show_bug.cgi?id=170226

        Reviewed by Eric Carlson.

        * TestExpectations:
        * platform/mac-elcapitan/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac-wk1/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac-yosemite/js/dom/global-constructors-attributes-expected.txt:
        * platform/mac/js/dom/global-constructors-attributes-expected.txt:

2017-03-29  Carlos Alberto Lopez Perez  <clopez@igalia.com>

        [GTK][OWR] Rebaseline fast/mediastream/RTCPeerConnection-addIceCandidate.html after r214527
        https://bugs.webkit.org/show_bug.cgi?id=170192

        Unreviewed test gardening.

        * platform/gtk/fast/mediastream/RTCPeerConnection-addIceCandidate-expected.txt:

2017-03-29  Youenn Fablet  <youenn@apple.com>

        Add test for differentiating camera versus canvas stream
        https://bugs.webkit.org/show_bug.cgi?id=169698
        <rdar://problem/31076026>

        Reviewed by Eric Carlson.

        * fast/mediastream/captureStream/canvas2d.html:

2017-03-28  Carlos Alberto Lopez Perez  <clopez@igalia.com>

        [WebRTC] Update test RTCPeerConnection-overloaded-operations-params.html after r214441
        https://bugs.webkit.org/show_bug.cgi?id=170223

        Reviewed by Youenn Fablet.

        After r214441 the arguments of addIceCandidate() are nullable.

        * fast/mediastream/RTCPeerConnection-overloaded-operations-params-expected.txt:
        * fast/mediastream/RTCPeerConnection-overloaded-operations-params.html:
        * platform/gtk/fast/mediastream/RTCPeerConnection-overloaded-operations-params-expected.txt: Removed. The expected result was the same than the general one.

2017-03-29  Antoine Quint  <graouts@apple.com>

        [mac-wk1] LayoutTest media/modern-media-controls/airplay-button/airplay-button.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=168409
        <rdar://problem/30799198>

        Reviewed by Dean Jackson.

        Opt into ScriptedAnimationController logging.

        * media/modern-media-controls/airplay-button/airplay-button-expected.txt:
        * media/modern-media-controls/airplay-button/airplay-button.html:

2017-03-28  Youenn Fablet  <youenn@apple.com>

        [WebRTC] After r214441 addIceCandidate no longer accepts an RTCIceCandidateInit dictionary
        https://bugs.webkit.org/show_bug.cgi?id=170192

        Reviewed by Jon Lee.

        * fast/mediastream/RTCIceCandidate-expected.txt:
        * fast/mediastream/RTCIceCandidate.html: Removing no longer valid tests.
        * fast/mediastream/RTCPeerConnection-addIceCandidate-expected.txt:
        * fast/mediastream/RTCPeerConnection-addIceCandidate.html: Adding more tests to cover null/undefined cases.
        Ensuring sdpMid has a valid value.
        * fast/mediastream/resources/promise-utils.js: Improving error logging.

2017-03-27  Brent Fulgham  <bfulgham@apple.com>

        Only attach Attributes to a given element one time
        https://bugs.webkit.org/show_bug.cgi?id=170125
        <rdar://problem/31279676>

        Reviewed by Chris Dumez.

        * fast/dom/Attr/make-unique-element-data-while-replacing-attr-expected.txt: Rebaselined.
        * fast/dom/Attr/make-unique-element-data-while-replacing-attr.html: Add check before setting new value.
        * fast/dom/Attr/only-attach-attr-once-expected.txt: Added.
        * fast/dom/Attr/only-attach-attr-once.html: Added.

2017-03-28  Youenn Fablet  <youenn@apple.com>

        Stop RTCDataChannel when closing page
        https://bugs.webkit.org/show_bug.cgi?id=170166

        Reviewed by Eric Carlson.

        * webrtc/datachannel/datachannel-gc-expected.txt: Added.
        * webrtc/datachannel/datachannel-gc.html: Added.

2017-03-28  Myles C. Maxfield  <mmaxfield@apple.com>

        Ranges for variation font properties are not enforced
        https://bugs.webkit.org/show_bug.cgi?id=169979

        Reviewed by David Hyatt.

        * fast/text/font-selection-font-face-parse-expected.txt:
        * fast/text/font-selection-font-face-parse.html:
        * fast/text/font-selection-font-loading-api-parse-expected.txt:
        * fast/text/font-selection-font-loading-api-parse.html:
        * fast/text/font-style-parse-expected.txt:
        * fast/text/font-style-parse.html:
        * fast/text/variations/font-loading-api-parse-ranges-expected.txt:
        * fast/text/variations/font-loading-api-parse-ranges.html:
        * fast/text/variations/out-of-bounds-selection-properties-expected.txt: Added.
        * fast/text/variations/out-of-bounds-selection-properties.html: Added.
        * platform/mac-elcapitan/fast/text/font-selection-font-face-parse-expected.txt:

2017-03-28  Andy Estes  <aestes@apple.com>

        [iOS] Crash in -[WebPreviewLoader failed] when running http/tests/multipart/policy-ignore-crash.php
        https://bugs.webkit.org/show_bug.cgi?id=170197
        <rdar://problem/30314067>

        Reviewed by Brady Eidson.

        * platform/ios/TestExpectations: Unskipped http/tests/multipart/policy-ignore-crash.php.
        * platform/ios/http/tests/multipart/policy-ignore-crash-expected.txt: Added an iOS-specific result.

2017-03-28  Chris Dumez  <cdumez@apple.com>

        Animated SVG images are not paused when outside viewport
        https://bugs.webkit.org/show_bug.cgi?id=170155
        <rdar://problem/31288893>

        Reviewed by Antti Koivisto.

        Add layout test coverage.

        * platform/mac-wk1/TestExpectations:
        * svg/animations/animated-svg-image-outside-viewport-paused-expected.txt: Added.
        * svg/animations/animated-svg-image-outside-viewport-paused.html: Added.
        * svg/animations/animated-svg-image-removed-from-document-paused-expected.txt: Added.
        * svg/animations/animated-svg-image-removed-from-document-paused.html: Added.
        * svg/animations/resources/smilAnimation.svg: Added.

2017-03-28  Antti Koivisto  <antti@apple.com>

        Missing render tree position invalidation when tearing down renderers for display:contents subtree
        https://bugs.webkit.org/show_bug.cgi?id=170199
        <rdar://problem/31260856>

        Reviewed by Zalan Bujtas.

        * fast/shadow-dom/slot-renderer-teardown-expected.txt: Added.
        * fast/shadow-dom/slot-renderer-teardown.html: Added.

2017-03-28  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r214485.

        This change caused LayoutTest crashes.

        Reverted changeset:

        "Stop RTCDataChannel when closing page"
        https://bugs.webkit.org/show_bug.cgi?id=170166
        http://trac.webkit.org/changeset/214485

2017-03-28  Brian Burg  <bburg@apple.com>

        Web Inspector: Add "Disable Caches" option that only applies to the inspected page while Web Inspector is open
        https://bugs.webkit.org/show_bug.cgi?id=169865
        <rdar://problem/31250573>

        Reviewed by Joseph Pecoraro.

        Add tests that verify the new command works as expected when it disables resource caching.
        I also manually verified that the override setting is cleared when Web Inspector disconnects.
        This is not easy to check in a layout test since we rely on the Web Inspector to tell whether
        a load happened or not.

        * http/tests/inspector/network/set-resource-caching-disabled-disk-cache-expected.txt: Added.
        * http/tests/inspector/network/set-resource-caching-disabled-disk-cache.html: Added.
        * http/tests/inspector/network/set-resource-caching-disabled-memory-cache-expected.txt: Added.
        * http/tests/inspector/network/set-resource-caching-disabled-memory-cache.html: Added.

2017-03-28  Youenn Fablet  <youenn@apple.com>

        Update LayoutTests/fast/mediastream/RTCPeerConnection-addIceCandidate.html to get more coverage
        https://bugs.webkit.org/show_bug.cgi?id=170194

        Reviewed by Chris Dumez.

        * fast/mediastream/RTCPeerConnection-addIceCandidate-expected.txt:
        * fast/mediastream/RTCPeerConnection-addIceCandidate.html: Making test more robust to failures to get more coverage.

2017-03-28  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Inspecting a Main Resource that is JS/JSON does not format / syntax highlight it properly
        https://bugs.webkit.org/show_bug.cgi?id=166862
        <rdar://problem/29835977>

        Reviewed by Brian Burg.

        * http/tests/inspector/network/resource-mime-type-expected.txt: Added.
        * http/tests/inspector/network/resource-mime-type.html: Added.
        Test resource mime types for different resources.

        * http/tests/inspector/network/resources/json.php: Added.
        * http/tests/inspector/network/resources/script.js: Added.
        * http/tests/inspector/network/resources/script.txt: Added.
        * http/tests/inspector/network/resources/stylesheet.css: Added.
        * http/tests/inspector/network/resources/stylesheet.txt: Added.
        * http/tests/resources/square20.jpg: Added.
        Resources for various requests and different mime types.

2017-03-28  Ryan Haddad  <ryanhaddad@apple.com>

        Mark http/tests/xmlhttprequest/simple-cross-origin-progress-events.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=168132

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-03-28  Ryan Haddad  <ryanhaddad@apple.com>

        Mark two fast/scrolling/ios/touch-scroll tests as failing.
        https://bugs.webkit.org/show_bug.cgi?id=170153

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-03-28  Ryan Haddad  <ryanhaddad@apple.com>

        Remove failure expectation for media/modern-media-controls/media-controller/media-controller-scale-factor-audio.html.

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2017-03-28  Youenn Fablet  <youenn@apple.com>

        Stop RTCDataChannel when closing page
        https://bugs.webkit.org/show_bug.cgi?id=170166

        Reviewed by Eric Carlson.

        * webrtc/datachannel/datachannel-gc-expected.txt: Added.
        * webrtc/datachannel/datachannel-gc.html: Added.

2017-03-28  Antoine Quint  <graouts@apple.com>

        REGRESSION (r214386): [ios-simulator] LayoutTest media/modern-media-controls/media-controller/media-controller-scale-factor-audio.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=170180

        Unreviewed. Restore a value that was mistakenly changed in the fix for webkit.org/b/169962.

        * media/modern-media-controls/media-controller/media-controller-scale-factor-audio-expected.txt:
        * media/modern-media-controls/media-controller/media-controller-scale-factor-audio.html:

2017-03-28  Ryan Haddad  <ryanhaddad@apple.com>

        Mark fast/history/ios/history-scroll-restoration.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=169558

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2017-03-28  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/media-controller/media-controller-scale-factor-audio.html as failing on ios-simulator.
        https://bugs.webkit.org/show_bug.cgi?id=170180

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2017-03-28  Youenn Fablet  <youenn@apple.com>

        LayoutTest webrtc/video-getParameters.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=170148

        Unreviewed.

        * TestExpectations: Marking webrtc/video-getParameters.html as failing.

2017-03-28  Ryan Haddad  <ryanhaddad@apple.com>

        Mark webrtc/video-replace-track-to-null.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170178

        Unreviewed test gardening.

        * TestExpectations:

2017-03-28  Jonathan Bedard  <jbedard@apple.com>

        Moved gardened ios-simulator tests to ios folders
        <rdar://problem/30948691>

        Unreviewed test re-organization.

        Moving ios-simulator test expectations to share as many expectations
        as possible with on-device testing.

        * platform/ios: Moved from platform/ios-simulator.
        * platform/ios-device: Added.
        * platform/ios-device-wk1: Added.
        * platform/ios-device-wk2: Added.
        * platform/ios-simulator: Moved to platform/ios.
        * platform/ios-simulator-wk1: Moved to platform/ios-wk1.
        * platform/ios-simulator-wk2: Moved to platform/ios-wk2.
        * platform/ios-wk1: Moved from platform/ios-simulator-wk1.
        * platform/ios-wk2: Moved from platform/ios-simulator-wk2.

2017-03-28  Yoav Weiss  <yoav@yoav.ws>

        Add a warning for unused link preloads.
        https://bugs.webkit.org/show_bug.cgi?id=165670

        Reviewed by Youenn Fablet.

        * TestExpectations: Added a "Failure Pass" for the flaky charset header test.
        * http/tests/preload/download_resources-expected.txt:
        * http/tests/preload/download_resources.html: Added references to preloaded resources.
        * http/tests/preload/onerror_event-expected.txt:
        * http/tests/preload/onerror_event.html: Added references to preloaded resources.
        * http/tests/preload/onload_event-expected.txt:
        * http/tests/preload/onload_event.html: Added references to preloaded resources.
        * http/tests/preload/single_download_preload.html: Deflaked.
        * http/tests/preload/single_download_preload_headers.php: Removed the charset to avoid double download bug.
        * http/tests/preload/single_download_preload_headers_charset-expected.txt: Added.
        * http/tests/preload/single_download_preload_headers_charset.php: Flaky test showing the double download bug when charset is declared.
        * http/tests/preload/unused_preload_warning-expected.txt: Added.
        * http/tests/preload/unused_preload_warning.html: Added.

2017-03-28  Antoine Quint  <graouts@apple.com>

        REGRESSION: Double-clicking the captions button while the captions popover is open prevents the popover from being opened again
        https://bugs.webkit.org/show_bug.cgi?id=170171
        <rdar://problem/31095500>

        Reviewed by Dean Jackson.

        Adding a new test that runs the steps to reproduce the issue, and rebaselining an existing one now that
        the "presented" property returns false immediately after calling hide() on the panel.

        * media/modern-media-controls/tracks-panel/tracks-panel-hide-expected.txt:
        * media/modern-media-controls/tracks-panel/tracks-panel-hide.html:
        * media/modern-media-controls/tracks-support/tracks-support-show-panel-then-double-click-on-tracks-button-expected.txt: Added.
        * media/modern-media-controls/tracks-support/tracks-support-show-panel-then-double-click-on-tracks-button.html: Added.

2017-03-28  Aaron Chu  <aaron_chu@apple.com>

        AX: Media controls should be able to be re-activated after faded away
        https://bugs.webkit.org/show_bug.cgi?id=170048
        <rdar://problem/30157179>

        Reviewed by Antoine Quint.

        * media/modern-media-controls/media-controls/media-controls-appear-when-focus-expected.txt: Added.
        * media/modern-media-controls/media-controls/media-controls-appear-when-focus.html: Added.

2017-03-28  Antoine Quint  <graouts@apple.com>

        [Modern Media Controls] Improve media documents across macOS, iPhone and iPad
        https://bugs.webkit.org/show_bug.cgi?id=169145
        <rdar://problem/17048858>

        Reviewed by Dean Jackson.

        We add new tests for media documents and related features that cover the following cases:
        
            - checking <video> with only audio tracks does not show the fullscreen button
            - checking <video> with only audio tracks does not show the picture-in-picture button
            - checking the size used in media documents for audio and video across macOS, iPhone and iPad

        * media/modern-media-controls/fullscreen-support/fullscreen-support-disabled-video-with-audio-tracks-only-expected.txt: Added.
        * media/modern-media-controls/fullscreen-support/fullscreen-support-disabled-video-with-audio-tracks-only.html: Added.
        * media/modern-media-controls/media-documents/ipad/media-document-audio-ios-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/ipad/media-document-audio-ios-sizing.html: Added.
        * media/modern-media-controls/media-documents/ipad/media-document-video-ios-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/ipad/media-document-video-ios-sizing.html: Added.
        * media/modern-media-controls/media-documents/media-document-audio-ios-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/media-document-audio-ios-sizing.html: Added.
        * media/modern-media-controls/media-documents/media-document-audio-mac-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/media-document-audio-mac-sizing.html: Added.
        * media/modern-media-controls/media-documents/media-document-video-ios-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/media-document-video-ios-sizing.html: Added.
        * media/modern-media-controls/media-documents/media-document-video-mac-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/media-document-video-mac-sizing.html: Added.
        * media/modern-media-controls/pip-support/pip-support-disabled-video-with-audio-tracks-only-expected.txt: Added.
        * media/modern-media-controls/pip-support/pip-support-disabled-video-with-audio-tracks-only.html: Added.
        * platform/ios-simulator/TestExpectations:
        * platform/mac/TestExpectations:

2017-03-27  Said Abou-Hallawa  <sabouhallawa@apple.com>

        REGRESSION(213764): Large images should not be decoded asynchronously when they are drawn on a canvas
        https://bugs.webkit.org/show_bug.cgi?id=169771

        Reviewed by Simon Fraser.

        * fast/images/animated-image-different-dest-size-expected.html: Added.
        * fast/images/animated-image-different-dest-size.html: Added.
        This test crashes without this patch.

        * fast/images/animated-image-loop-count.html:
        Clear the memory cache so the test can be not flaky. Running it with -repeat-each was failing.

        * fast/images/async-image-background-image-expected.html: Added.
        * fast/images/async-image-background-image.html: Added.
        Ensures the background image can be drawn asynchronously if it is large.

        * fast/images/async-image-canvas-draw-image-expected.html: Added.
        * fast/images/async-image-canvas-draw-image.html: Added.
        Ensures the image is drawn synchronously on the canvas regardless of its size.

        * fast/images/ordered-animated-image-frames.html:
        Clear the memory cache so the test can be not flaky. Running it with -repeat-each was failing.

        * fast/images/reset-image-animation-expected.txt:
        * fast/images/reset-image-animation.html:
        Change how the steps of the test are ordered so the test can be not flaky.
        Running it with -repeat-each was failing.

        * fast/images/resources/red-green-blue-900-300.png: Added.

2017-03-27  Youenn Fablet  <youenn@apple.com>

        addIceCandidate should not throw if passed null or undefined
        https://bugs.webkit.org/show_bug.cgi?id=170118

        Reviewed by Eric Carlson.

        Updating test to log addIceCandidate rejection.

        * webrtc/datachannel/basic.html:
        * webrtc/routines.js:
        (iceCallback1):
        (iceCallback2):
        (onAddIceCandidateError):

2017-03-27  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline svg/css/getComputedStyle-basic.xhtml for macOS.

        Unreviewed test gardening.

        * platform/mac-elcapitan/svg/css/getComputedStyle-basic-expected.txt: Added.
        * platform/mac/svg/css/getComputedStyle-basic-expected.txt: Added.

2017-03-27  Antti Koivisto  <antti@apple.com>

        Loading in-body stylesheets should not block rendering of elements before them
        https://bugs.webkit.org/show_bug.cgi?id=169345

        Reviewed by Simon Fraser.

        * http/tests/incremental/resources/delayed-css.php: Added.
        * http/tests/incremental/stylesheet-body-incremental-rendering-expected.html: Added.
        * http/tests/incremental/stylesheet-body-incremental-rendering.html: Added.

2017-03-27  Myles C. Maxfield  <mmaxfield@apple.com>

        Test variation font ranges in the CSS Font Loading API
        https://bugs.webkit.org/show_bug.cgi?id=170022

        Reviewed by Dean Jackson.

        * fast/text/variations/font-loading-api-parse-ranges-expected.txt: Added.
        * fast/text/variations/font-loading-api-parse-ranges.html: Added.

2017-03-27  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r214411.

        Two of the LayoutTests for this change time out on ios-
        simulator.

        Reverted changeset:

        "[Modern Media Controls] Improve media documents across macOS,
        iPhone and iPad"
        https://bugs.webkit.org/show_bug.cgi?id=169145
        http://trac.webkit.org/changeset/214411

2017-03-27  Antoine Quint  <graouts@apple.com>

        [Modern Media Controls] Clicking on the tracks button when the tracks panel is up in a media document pauses the video
        https://bugs.webkit.org/show_bug.cgi?id=168517
        <rdar://problem/30577636>

        Reviewed by Dean Jackson.

        * media/video-click-dblckick-standalone.html: We disable modern-media-controls here since we know that this test won't pass with them on.

2017-03-27  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/time-label/time-label-white-space-nowrap.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=169679

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-03-27  Ryan Haddad  <ryanhaddad@apple.com>

        Mark inspector/dom-debugger/dom-breakpoints.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=170127

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-03-27  Ryan Haddad  <ryanhaddad@apple.com>

        Mark media/modern-media-controls/time-label/time-label.html as flaky.
        https://bugs.webkit.org/show_bug.cgi?id=169678

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2017-03-27  Ryan Haddad  <ryanhaddad@apple.com>

        Marking two modern-media-controls tests as timeouts.
        https://bugs.webkit.org/show_bug.cgi?id=170123

        Unreviewed test gardening.

        * platform/ios-simulator/TestExpectations:

2017-03-27  Youenn Fablet  <youenn@apple.com>

        Tighten RTCDatachannel creation and parameter getters
        https://bugs.webkit.org/show_bug.cgi?id=170081

        Reviewed by Eric Carlson.

        * webrtc/datachannel/basic-expected.txt:
        * webrtc/datachannel/basic.html:

2017-03-27  Youenn Fablet  <youenn@apple.com>

        Add support for RTCRtpReceiver/RTCRtpSender getParameters
        https://bugs.webkit.org/show_bug.cgi?id=170057

        Reviewed by Alex Christensen.

        * webrtc/video-getParameters-expected.txt: Added.
        * webrtc/video-getParameters.html: Added.

2017-03-27  Myles C. Maxfield  <mmaxfield@apple.com>

        font variation properties don't need to accept numbers
        https://bugs.webkit.org/show_bug.cgi?id=169357

        Reviewed by Antti Koivisto.

        * fast/text/font-selection-font-face-parse-expected.txt:
        * fast/text/font-selection-font-face-parse.html:
        * fast/text/font-selection-font-loading-api-parse-expected.txt:
        * fast/text/font-selection-font-loading-api-parse.html:
        * fast/text/font-stretch-parse-expected.txt:
        * fast/text/font-stretch-parse.html:
        * fast/text/font-style-parse-expected.txt:
        * fast/text/font-style-parse.html:
        * fast/text/variations/font-selection-properties.html:
        * platform/mac-elcapitan/fast/text/font-selection-font-face-parse-expected.txt:

2017-03-27  Myles C. Maxfield  <mmaxfield@apple.com>

        Implement format specifier for variation fonts
        https://bugs.webkit.org/show_bug.cgi?id=169327

        Reviewed by Simon Fraser.

        * fast/text/variations/font-face-format-expected.html: Added.
        * fast/text/variations/font-face-format.html: Added.

2017-03-27  Myles C. Maxfield  <mmaxfield@apple.com>

        Make sure animation works for font-weight, font-stretch, and font-style
        https://bugs.webkit.org/show_bug.cgi?id=169683

        Reviewed by Simon Fraser.

        * animations/font-variations/font-stretch-expected.txt: Added.
        * animations/font-variations/font-stretch.html: Added.
        * animations/font-variations/font-style-expected.txt: Added.
        * animations/font-variations/font-style.html: Added.
        * animations/font-variations/font-weight-expected.txt: Added.
        * animations/font-variations/font-weight.html: Added.
        * animations/resources/animation-test-helpers.js:
        (compareFontStyle):
        (getPropertyValue):
        (comparePropertyValue):

2017-03-27  Alex Christensen  <achristensen@webkit.org>

        Make WebSockets work in network process
        https://bugs.webkit.org/show_bug.cgi?id=169930

        Reviewed by Youenn Fablet.

        * http/tests/websocket/tests/hybi/network-process-crash-error-expected.txt: Added.
        * http/tests/websocket/tests/hybi/network-process-crash-error.html: Added.
        * http/tests/websocket/tests/hybi/slow-reply_wsh.py: Added.
        (web_socket_do_extra_handshake):
        (web_socket_transfer_data):
        * platform/ios-simulator-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:

2017-03-27  Antoine Quint  <graouts@apple.com>

        [Modern Media Controls] Improve media documents across macOS, iPhone and iPad
        https://bugs.webkit.org/show_bug.cgi?id=169145
        <rdar://problem/17048858>

        Reviewed by Dean Jackson.

        We add new tests for media documents and related features that cover the following cases:
        
            - checking <video> with only audio tracks does not show the fullscreen button
            - checking <video> with only audio tracks does not show the picture-in-picture button
            - checking the size used in media documents for audio and video across macOS, iPhone and iPad

        * media/modern-media-controls/fullscreen-support/fullscreen-support-disabled-video-with-audio-tracks-only-expected.txt: Added.
        * media/modern-media-controls/fullscreen-support/fullscreen-support-disabled-video-with-audio-tracks-only.html: Added.
        * media/modern-media-controls/media-documents/ipad/media-document-audio-ios-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/ipad/media-document-audio-ios-sizing.html: Added.
        * media/modern-media-controls/media-documents/ipad/media-document-video-ios-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/ipad/media-document-video-ios-sizing.html: Added.
        * media/modern-media-controls/media-documents/media-document-audio-ios-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/media-document-audio-ios-sizing.html: Added.
        * media/modern-media-controls/media-documents/media-document-audio-mac-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/media-document-audio-mac-sizing.html: Added.
        * media/modern-media-controls/media-documents/media-document-video-ios-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/media-document-video-ios-sizing.html: Added.
        * media/modern-media-controls/media-documents/media-document-video-mac-sizing-expected.txt: Added.
        * media/modern-media-controls/media-documents/media-document-video-mac-sizing.html: Added.
        * media/modern-media-controls/pip-support/pip-support-disabled-video-with-audio-tracks-only-expected.txt: Added.
        * media/modern-media-controls/pip-support/pip-support-disabled-video-with-audio-tracks-only.html: Added.
        * platform/ios-simulator/TestExpectations:
        * platform/mac/TestExpectations:

2017-03-25  Aaron Chu  <aaron_chu@apple.com>

        AX: Media controls are unlabeled
        https://bugs.webkit.org/show_bug.cgi?id=169947
        <rdar://problem/30153323>

        Reviewed by Antoine Quint.

        * media/modern-media-controls/airplay-button/airplay-button-expected.txt:
        * media/modern-media-controls/airplay-button/airplay-button.html:
        * media/modern-media-controls/forward-button/forward-button-expected.txt:
        * media/modern-media-controls/forward-button/forward-button.html:
        * media/modern-media-controls/fullscreen-button/fullscreen-button-expected.txt:
        * media/modern-media-controls/fullscreen-button/fullscreen-button.html:
        * media/modern-media-controls/icon-button/icon-button-expected.txt:
        * media/modern-media-controls/icon-button/icon-button.html:
        * media/modern-media-controls/icon-service/icon-service-expected.txt:
        * media/modern-media-controls/icon-service/icon-service.html:
        * media/modern-media-controls/mute-button/mute-button-expected.txt:
        * media/modern-media-controls/mute-button/mute-button.html:
        * media/modern-media-controls/pip-button/pip-button-expected.txt:
        * media/modern-media-controls/pip-button/pip-button.html:
        * media/modern-media-controls/play-pause-button/play-pause-button-expected.txt:
        * media/modern-media-controls/play-pause-button/play-pause-button.html:
        * media/modern-media-controls/rewind-button/rewind-button-expected.txt:
        * media/modern-media-controls/rewind-button/rewind-button.html:
        * media/modern-media-controls/skip-back-button/skip-back-button-expected.txt:
        * media/modern-media-controls/skip-back-button/skip-back-button.html:
        * media/modern-media-controls/start-button/start-button-expected.txt:
        * media/modern-media-controls/start-button/start-button.html:
        * media/modern-media-controls/tracks-button/tracks-button-expected.txt:
        * media/modern-media-controls/tracks-button/tracks-button.html:

2017-03-25  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Update expectations of several tests.

        * platform/gtk/TestExpectations:

2017-03-25  Myles C. Maxfield  <mmaxfield@apple.com>

        Post-commit test fix after r214394
        https://bugs.webkit.org/show_bug.cgi?id=170083

        Unreviewed.

        * fast/text/variations/optical-sizing.html:

2017-03-24  Myles C. Maxfield  <mmaxfield@apple.com>

        Add font-optical-sizing to CSSComputedStyleDeclaration
        https://bugs.webkit.org/show_bug.cgi?id=170083

        Reviewed by Joseph Pecoraro.

        * fast/css/getComputedStyle/computed-style-expected.txt:
        * fast/css/getComputedStyle/computed-style-font-family-expected.txt:
        * fast/css/getComputedStyle/computed-style-without-renderer-expected.txt:
        * fast/css/getComputedStyle/resources/property-names.js:
        * fast/text/variations/optical-sizing-expected.txt:
        * fast/text/variations/optical-sizing.html:
        * platform/mac-elcapitan/fast/css/getComputedStyle/computed-style-expected.txt: Added.
        * platform/mac-elcapitan/fast/css/getComputedStyle/computed-style-font-family-expected.txt: Added.
        * platform/mac-elcapitan/fast/css/getComputedStyle/computed-style-without-renderer-expected.txt: Added.

2017-03-24  Ryan Haddad  <ryanhaddad@apple.com>

        Consolidate TestExpectations for media/restore-from-page-cache.html.

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2017-03-24  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r214361.

        This change caused flakiness in http/tests/preload tests.

        Reverted changeset:

        "Add a warning for unused link preloads."
        https://bugs.webkit.org/show_bug.cgi?id=165670
        http://trac.webkit.org/changeset/214361

2017-03-24  Antoine Quint  <graouts@webkit.org>

        [Modern Media Controls] Remove placard icon if height is compressed
        https://bugs.webkit.org/show_bug.cgi?id=167935
        <rdar://problem/30397128>

        Reviewed by Dean Jackson.

        We add a new test to check that the various designed constraints to toggle display of a placard's
        icon, title and description are honored. Also, due to the old layout() method now being called
        "commit()", we refactor a relevant test.

        * media/modern-media-controls/layout-node/node-made-dirty-during-commit-expected.txt: Added.
        * media/modern-media-controls/layout-node/node-made-dirty-during-commit.html: Added.
        * media/modern-media-controls/media-controls/media-controls-placard-compressed-metrics-expected.txt: Added.
        * media/modern-media-controls/media-controls/media-controls-placard-compressed-metrics.html: Added.

2017-03-24  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] "ideal" constraints passed to getUserMedia should affect fitness score
        https://bugs.webkit.org/show_bug.cgi?id=170056

        Reviewed by Youenn Fablet.

        * fast/mediastream/MediaStream-video-element-displays-buffer-expected.txt:
        * fast/mediastream/MediaStream-video-element-displays-buffer.html:
        * fast/mediastream/MediaStreamTrack-getCapabilities-expected.txt:
        * fast/mediastream/apply-constraints-advanced-expected.txt:
        * fast/mediastream/apply-constraints-advanced.html:
        * fast/mediastream/apply-constraints-video-expected.txt:
        * fast/mediastream/apply-constraints-video.html:

2017-03-24  Dean Jackson  <dino@apple.com>

        Serialization of custom props in longhand should be "" not value of shorthand
        https://bugs.webkit.org/show_bug.cgi?id=167699
        <rdar://problem/30324200>

        Reviewed by Sam Weinig.

        * fast/css/variables/rule-property-get-expected.html:
        * fast/css/variables/rule-property-get.html:

2017-03-24  Antoine Quint  <graouts@webkit.org>

        [Modern Media Controls] Captions don't move with the appearance of the inline controls
        https://bugs.webkit.org/show_bug.cgi?id=170051
        <rdar://problem/30754428>

        Reviewed by Dean Jackson.

        Add a new test, which would have previously failed, where we check that we account for the controls bar height
        when showing captions with the controls bar visible.

        * media/modern-media-controls/tracks-support/tracks-support-captions-offset-with-controls-bar-expected.txt: Added.
        * media/modern-media-controls/tracks-support/tracks-support-captions-offset-with-controls-bar.html: Added.

2017-03-24  Brent Fulgham  <bfulgham@apple.com>

        Handle recursive calls to ProcessingInstruction::checkStyleSheet
        https://bugs.webkit.org/show_bug.cgi?id=169982
        <rdar://problem/31083051>

        Reviewed by Antti Koivisto.

        * fast/dom/beforeload/image-removed-during-before-load-expected.txt: Copied from LayoutTests/fast/dom/beforeload/image-removed-during-before-load-expected.txt.
        * fast/dom/beforeload/image-removed-during-before-load.html: Copied from LayoutTests/fast/dom/beforeload/image-removed-during-before-load.html.
        * fast/dom/beforeload/recursive-css-pi-before-load-expected.txt: Copied from LayoutTests/fast/dom/beforeload/recursive-css-pi-before-load-expected.txt.
        * fast/dom/beforeload/recursive-css-pi-before-load.html: Copied from LayoutTests/fast/dom/beforeload/recursive-css-pi-before-load.html.
        * fast/dom/beforeload/recursive-link-before-load-expected.txt: Copied from LayoutTests/fast/dom/beforeload/recursive-link-before-load-expected.txt.
        * fast/dom/beforeload/recursive-link-before-load.html: Copied from LayoutTests/fast/dom/beforeload/recursive-link-before-load.html.
        * fast/dom/beforeload/recursive-xsl-pi-before-load-expected.txt: Copied from LayoutTests/fast/dom/beforeload/recursive-xsl-pi-before-load-expected.txt.
        * fast/dom/beforeload/recursive-xsl-pi-before-load.html: Copied from LayoutTests/fast/dom/beforeload/recursive-xsl-pi-before-load.html.
        * fast/dom/beforeload/resources/content.xhtml: Copied from LayoutTests/fast/dom/beforeload/resources/content.xhtml.
        * fast/dom/beforeload/resources/pass.css: Copied from LayoutTests/fast/dom/beforeload/resources/pass.css.
        * fast/dom/beforeload/resources/test.xsl: Copied from LayoutTests/fast/dom/beforeload/resources/test.xsl.

2017-03-24  Brady Eidson  <beidson@apple.com>

        A null compound index value crashes the Databases process.
        <rdar://problem/30499831> and https://bugs.webkit.org/show_bug.cgi?id=170000

        Reviewed by Alex Christensen.

        * storage/indexeddb/modern/resources/single-entry-index-invalid-key-crash.js: Added.
        * storage/indexeddb/modern/single-entry-index-invalid-key-crash-expected.txt: Added.
        * storage/indexeddb/modern/single-entry-index-invalid-key-crash-private-expected.txt: Added.
        * storage/indexeddb/modern/single-entry-index-invalid-key-crash-private.html: Added.
        * storage/indexeddb/modern/single-entry-index-invalid-key-crash.html: Added.

2017-03-24  Ryan Haddad  <ryanhaddad@apple.com>

        Skip svg/animations/animations-paused-when-inserted-in-hidden-document* tests on ios-simulator.
        https://bugs.webkit.org/show_bug.cgi?id=170068

        Unreviewed test gardening.

        * platform/ios-simulator/TestExpectations:

2017-03-24  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r214360.

        This change caused 20+ LayoutTest failures.

        Reverted changeset:

        "Handle recursive calls to
        ProcessingInstruction::checkStyleSheet"
        https://bugs.webkit.org/show_bug.cgi?id=169982
        http://trac.webkit.org/changeset/214360

2017-03-24  Youenn Fablet  <youenn@apple.com>

        Add support for qpSum in WebRTC stats
        https://bugs.webkit.org/show_bug.cgi?id=170060

        Reviewed by Eric Carlson.

        * webrtc/video-stats.html:

2017-03-24  Daniel Bates  <dabates@apple.com>

        Prevent new navigations during document unload
        https://bugs.webkit.org/show_bug.cgi?id=169934
        <rdar://problem/31247584>

        Reviewed by Chris Dumez.

        Add a test to ensure that we do not cause an assertion fail when calling setTimeout
        after starting a navigation from an onunload event handler.

        * fast/frames/frame-unload-navigate-and-setTimeout-assert-fail-expected.txt: Added.
        * fast/frames/frame-unload-navigate-and-setTimeout-assert-fail.html: Added.

2017-03-24  Myles C. Maxfield  <mmaxfield@apple.com>

        Implement font-optical-sizing
        https://bugs.webkit.org/show_bug.cgi?id=168895

        Reviewed by Dean Jackson.

        * fast/text/variations/optical-sizing-expected.txt: Added.
        * fast/text/variations/optical-sizing.html: Added.

2017-03-24  Yoav Weiss  <yoav@yoav.ws>

        Add a warning for unused link preloads.
        https://bugs.webkit.org/show_bug.cgi?id=165670

        Reviewed by Youenn Fablet.

        This adds a test for the unused preload warning, and adapts some of the other preload tests,
        to avoid warnings.

        * http/tests/preload/download_resources-expected.txt: Changed.
        * http/tests/preload/download_resources.html: Added references to preloaded resources.
        * http/tests/preload/onerrer_event-expected.txt: Changed.
        * http/tests/preload/onerror_event.html: Added references to preloaded resources.
        * http/tests/preload/onload_event.html: Added references to preloaded resources.
        * http/tests/preload/resources/single_download_preload.html: Deflaked.
        * http/tests/preload/unused_preload_warning-expected.txt: Added.
        * http/tests/preload/unused_preload_warning.html: Added.

2017-03-24  Brent Fulgham  <bfulgham@apple.com>

        Handle recursive calls to ProcessingInstruction::checkStyleSheet
        https://bugs.webkit.org/show_bug.cgi?id=169982
        <rdar://problem/31083051>

        Reviewed by Antti Koivisto.

        * fast/dom/beforeload/image-removed-during-before-load-expected.txt: Added.
        * fast/dom/beforeload/image-removed-during-before-load.html: Added.
        * fast/dom/beforeload/recursive-css-pi-before-load-expected.txt: Added.
        * fast/dom/beforeload/recursive-css-pi-before-load.html: Added.
        * fast/dom/beforeload/recursive-link-before-load-expected.txt: Added.
        * fast/dom/beforeload/recursive-link-before-load.html: Added.
        * fast/dom/beforeload/recursive-xsl-pi-before-load-expected.txt: Added.
        * fast/dom/beforeload/recursive-xsl-pi-before-load.html: Added.
        * fast/dom/beforeload/resources/content.xhtml: Added.
        * fast/dom/beforeload/resources/pass.css: Added.
        * fast/dom/beforeload/resources/test.xsl: Added.

2017-03-24  Myles C. Maxfield  <mmaxfield@apple.com>

        font-style needs a new CSSValue to make CSSRule.cssText work correctly
        https://bugs.webkit.org/show_bug.cgi?id=169258

        Reviewed by David Hyatt.

        Update tests' expected results.

        * fast/text/font-selection-font-face-parse-expected.txt:
        * fast/text/font-selection-font-face-parse.html:
        * fast/text/font-style-parse-expected.txt:
        * fast/text/font-style-parse.html:
        * platform/mac-elcapitan/fast/text/font-selection-font-face-parse-expected.txt:
        * svg/css/getComputedStyle-basic-expected.txt:

2017-03-24  Youenn Fablet  <youenn@apple.com>

        Add libwebrtc backend support for RTCRtpSender::replaceTrack
        https://bugs.webkit.org/show_bug.cgi?id=169841

        Reviewed by Alex Christensen.

        * webrtc/audio-replace-track-expected.txt: Added.
        * webrtc/audio-replace-track.html: Added.
        * webrtc/video-replace-track-expected.txt: Added.
        * webrtc/video-replace-track.html: Added.
        * webrtc/video-replace-track-to-null-expected.txt: Added.
        * webrtc/video-replace-track-to-null.html: Added.

2017-03-24  Ryan Haddad  <ryanhaddad@apple.com>

        Update TestExpectations for media/restore-from-page-cache.html.

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:
        * platform/mac/TestExpectations:

2017-03-24  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Mark webrtc/video-stats.html as failing.

        * platform/gtk/TestExpectations:

2017-03-24  Youenn Fablet  <youenn@apple.com>

        Add support for DataChannel and MediaStreamTrack stats
        https://bugs.webkit.org/show_bug.cgi?id=170031

        Reviewed by Eric Carlson.

        * webrtc/datachannel/datachannel-stats-expected.txt: Added.
        * webrtc/datachannel/datachannel-stats.html: Added.
        * webrtc/video-mediastreamtrack-stats-expected.txt: Added.
        * webrtc/video-mediastreamtrack-stats.html: Added.

2017-03-24  Chris Dumez  <cdumez@apple.com>

        Extend svg/animations/animations-paused-disconnected-iframe.html
        https://bugs.webkit.org/show_bug.cgi?id=170035

        Reviewed by Andreas Kling.

        Extend svg/animations/animations-paused-disconnected-iframe.html to cover more things.

        * svg/animations/animations-paused-disconnected-iframe-expected.txt:
        * svg/animations/animations-paused-disconnected-iframe.html:

2017-03-24  Youenn Fablet  <youenn@apple.com>

        Fix framesEncoded/framesDecoded RTC stats
        https://bugs.webkit.org/show_bug.cgi?id=170024

        Reviewed by Eric Carlson.

        * webrtc/video-stats-expected.txt: Added.
        * webrtc/video-stats.html: Added.

2017-03-24  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Mark media/video-load-require-user-gesture.html as failing after r214338.

        * platform/gtk/TestExpectations:

2017-03-24  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline http/tests/inspector/network/fetch-response-body.html/xhr-response-body.html after r214338.

        We are now getting the right application/json for a file data.json. The soup network backend tries to gess the
        mime type from the extension when sniffing is not allowed and the mime type is not known. See bug
        webkit.org/b/168299, that was added actually to fix these tests, but at that time we also failed to guess the
        mime type and returned application/octet-stream.

        * platform/gtk/TestExpectations:
        * platform/gtk/http/tests/inspector/network/fetch-response-body-expected.txt: Added.
        * platform/gtk/http/tests/inspector/network/xhr-response-body-expected.txt: Added.

2017-03-24  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline fast/dom/HTMLAnchorElement/anchor-file-blob-convert-to-download.html after r214338.

        We are now getting a MIME type for otf files.

        * platform/gtk/fast/dom/HTMLAnchorElement/anchor-file-blob-convert-to-download-expected.txt: Added.

2017-03-24  Per Arne Vollan  <pvollan@apple.com>

        Text stroke is sometimes clipped on video captions.
        https://bugs.webkit.org/show_bug.cgi?id=170006

        Reviewed by Eric Carlson.

        * media/track/track-css-stroke-cues-expected.txt:
        * media/track/track-css-stroke-cues.html:

2017-03-24  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] Add MIMETypeRegistry implementation using xdgmime and remove the GTK+ one
        https://bugs.webkit.org/show_bug.cgi?id=170001

        Reviewed by Michael Catanzaro.

        Remove platform specific expectations of two test because now we do the same as other wk2 ports.

        * platform/gtk/TestExpectations:

2017-03-23  Antti Koivisto  <antti@apple.com>

        Revert r213712, caused iPad PLT regression
        https://bugs.webkit.org/show_bug.cgi?id=170040

        Unreviewed.

        * http/tests/incremental/stylesheet-body-incremental-rendering-expected.html: Removed.
        * http/tests/incremental/stylesheet-body-incremental-rendering.html: Removed.

2017-03-23  Chris Dumez  <cdumez@apple.com>

        SVG animations are not paused when their <svg> element is removed from the document
        https://bugs.webkit.org/show_bug.cgi?id=170030
        <rdar://problem/31230252>

        Reviewed by Dean Jackson.

        Add layout test coverage.

        * svg/animations/animations-paused-when-removed-from-document-expected.txt: Added.
        * svg/animations/animations-paused-when-removed-from-document.html: Added.

2017-03-22  Myles C. Maxfield  <mmaxfield@apple.com>

        font shorthand should accept variation values
        https://bugs.webkit.org/show_bug.cgi?id=168998

        Reviewed by Simon Fraser.

        * fast/text/font-style-parse-expected.txt:
        * fast/text/font-style-parse.html:
        * fast/text/font-weight-parse-expected.txt:
        * fast/text/font-weight-parse.html:

2017-03-23  Chris Dumez  <cdumez@apple.com>

        SVG animations are not paused when inserted into a hidden page
        https://bugs.webkit.org/show_bug.cgi?id=170026
        <rdar://problem/31228704>

        Reviewed by Andreas Kling.

        Add layout test coverage.

        * svg/animations/animations-paused-when-inserted-in-hidden-document-expected.txt: Added.
        * svg/animations/animations-paused-when-inserted-in-hidden-document.html: Added.
        * svg/animations/animations-paused-when-inserted-in-hidden-document2-expected.txt: Added.
        * svg/animations/animations-paused-when-inserted-in-hidden-document2.html: Added.

== Rolled over to ChangeLog-2017-03-23 ==
