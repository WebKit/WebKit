2015-08-12  Babak Shafiei  <bshafiei@apple.com>

        Merge r188190.

    2015-08-08  Commit Queue  <commit-queue@webkit.org>

            Unreviewed, rolling out r179871.
            https://bugs.webkit.org/show_bug.cgi?id=147810

            Breaks product images on http://www.apple.com/shop/buy-
            mac/macbook (Requested by smfr on #webkit).

            Reverted changeset:

            "Render: properly update body's background image"
            https://bugs.webkit.org/show_bug.cgi?id=140183
            http://trac.webkit.org/changeset/179871

2015-08-11  Matthew Hanson  <matthew_hanson@apple.com>

        Rollout r188195. rdar://problem/22102378

2015-08-11  Matthew Hanson  <matthew_hanson@apple.com>

        Merge r188195. rdar://problem/22102378

    2015-08-09  Myles C. Maxfield  <mmaxfield@apple.com>

            Crash in ComplexTextController when laying out obscure text
            https://bugs.webkit.org/show_bug.cgi?id=147806
            <rdar://problem/22102378>

            Reviewed by Darin Adler.

            * fast/text/crash-obscure-text-expected.txt: Added.
            * fast/text/crash-obscure-text.html: Added.

2015-08-11  Matthew Hanson  <matthew_hanson@apple.com>

        Merge r188263. rdar://problem/22202935

    2015-08-11  Myles C. Maxfield  <mmaxfield@apple.com>

            [iOS] Arabic letter Yeh is drawn in LastResort
            https://bugs.webkit.org/show_bug.cgi?id=147862
            <rdar://problem/22202935>

            Reviewed by Darin Adler.

            * fast/text/arabic-glyph-cache-fill-combine-expected.html: Added.
            * fast/text/arabic-glyph-cache-fill-combine.html: Added.
            * platform/mac/TestExpectations: Mark test as iOS-specific
            * platform/gtk/TestExpectations: Mark test as iOS-specific
            * platform/efl/TestExpectations: Mark test as iOS-specific
            * platform/efl/TestExpectations: Mark test as iOS-specific

2015-08-03  Matthew Hanson  <matthew_hanson@apple.com>

        Merge r187778. rdar://problem/22098457

    2015-08-03  Brady Eidson  <beidson@apple.com>

            Fix ASSERTy test added in r187752

            * http/tests/appcache/resources/identifier-test-real.php: Only post one message.

2015-08-03  Matthew Hanson  <matthew_hanson@apple.com>

        Merge r187752. rdar://problem/22098457

    2015-08-03  Brady Eidson  <beidson@apple.com>

            Adding a test for:
            Crash when signing into twitter calling WebCore::DocumentLoader::responseReceived(WebCore::CachedResource*, WebCore::ResourceResponse const&).
            <rdar://problem/22098457> and https://bugs.webkit.org/show_bug.cgi?id=147560

            Reviewed by Alexey Proskuryakov.

            * http/tests/appcache/identifier-test-expected.txt: Added.
            * http/tests/appcache/identifier-test.html: Added.
            * http/tests/appcache/resources/identifier-test-real.php: Added.
            * http/tests/appcache/resources/identifier-test.manifest: Added.
            * http/tests/appcache/resources/identifier-test.php: Added.

2015-07-31  Lucas Forschler  <lforschler@apple.com>

        Merge r187556

    2015-07-29  Brady Eidson  <beidson@apple.com>

            Crash calling webSocket.close() from onError handler for blocked web socket.
            <rdar://problem/21771620> and https://bugs.webkit.org/show_bug.cgi?id=147411

            Reviewed by Tim Horton.

            * http/tests/security/mixedContent/resources/frame-with-insecure-websocket.html: Add a call to webSocket.close() inside the onError handler.
            * http/tests/security/mixedContent/websocket/insecure-websocket-in-iframe-expected.txt:
            * http/tests/security/mixedContent/websocket/insecure-websocket-in-main-frame-expected.txt:

2015-07-31  Lucas Forschler  <lforschler@apple.com>

        Merge r187535

    2015-07-28  Simon Fraser  <simon.fraser@apple.com>

            Animations sometimes fail to start
            https://bugs.webkit.org/show_bug.cgi?id=147394
            rdar://problem/21852603

            Reviewed by Dean Jackson.

            Test that starts an accelerated and non-accelerated animation, then removes
            the node for the accelerated one.

            * animations/remove-syncing-animation-expected.txt: Added.
            * animations/remove-syncing-animation.html: Added.

2015-07-31  Lucas Forschler  <lforschler@apple.com>

        Merge r187525

    2015-07-28  Myles C. Maxfield  <mmaxfield@apple.com>

            [iOS] Crash when encountering characters whose natural font is one we can't look up
            https://bugs.webkit.org/show_bug.cgi?id=147377
            <rdar://problem/22022011>

            Reviewed by Simon Fraser.

            * fast/text/crash-complex-unknown-font-expected.html: Added.
            * fast/text/crash-complex-unknown-font.html: Added.

2015-07-31  Lucas Forschler  <lforschler@apple.com>

        Merge r187523

    2015-07-28  Chris Dumez  <cdumez@apple.com>

            Tests introduced in r187489 are flaky
            https://bugs.webkit.org/show_bug.cgi?id=147327

            Rubber-stamped by Benjamin Poulain.

            Tests introduced in r187489 are flaky, they sometimes print the console
            message, sometimes not. The reason is that we sometimes use a cached
            parsed stylesheet and we do not print the warning in this case. To fix
            the flakiness, we now clear the memory cache at the beginning of each
            test to make sure we download and parse the stylesheets.

            * http/tests/security/cross-origin-css-1.html:
            * http/tests/security/cross-origin-css-2.html:
            * http/tests/security/cross-origin-css-3.html:
            * http/tests/security/cross-origin-css-4.html:
            * http/tests/security/cross-origin-css-5.html:
            * http/tests/security/cross-origin-css-6.html:
            * http/tests/security/cross-origin-css-7.html:
            * http/tests/security/cross-origin-css-8.html:
            * http/tests/security/cross-origin-css-in-quirks-1.html:
            * http/tests/security/cross-origin-css-in-quirks-2.html:
            * http/tests/security/cross-origin-css-in-quirks-3.html:
            * http/tests/security/cross-origin-css-in-quirks-4.html:
            * http/tests/security/cross-origin-css-in-quirks-5.html:
            * http/tests/security/cross-origin-css-in-quirks-6.html:
            * http/tests/security/cross-origin-css-in-quirks-7.html:
            * http/tests/security/cross-origin-css-in-quirks-8.html:
            * http/tests/security/same-origin-css-1.html:
            * http/tests/security/same-origin-css-2.html:
            * http/tests/security/same-origin-css-3.html:
            * http/tests/security/same-origin-css-4.html:
            * http/tests/security/same-origin-css-5.html:
            * http/tests/security/same-origin-css-6.html:
            * http/tests/security/same-origin-css-7.html:
            * http/tests/security/same-origin-css-8.html:
            * http/tests/security/same-origin-css-in-quirks.html:

2015-07-31  Lucas Forschler  <lforschler@apple.com>

        Merge r187512

    2015-07-28  Chris Dumez  <cdumez@apple.com>

            Unreviewed, fix wrong test baseline landed in r187489.

            * http/tests/security/same-origin-css-4-expected.txt:

2015-07-31  Lucas Forschler  <lforschler@apple.com>

        Merge r187489

    2015-07-28  Chris Dumez  <cdumez@apple.com>

            Allow lax MIME type parsing for same-origin CSS in quirks mode.
            https://bugs.webkit.org/show_bug.cgi?id=147327
            <rdar://problem/22010303>

            Reviewed by Zalan Bujtas.

            Add layout test coverage for MIME type parsing for same-origin CSS in
            quirks mode and not.

            * http/tests/inspector/css/bad-mime-type-expected.txt:
            * http/tests/mime/standard-mode-does-not-load-stylesheet-with-text-plain-and-css-extension-expected.txt:
            * http/tests/mime/standard-mode-does-not-load-stylesheet-with-text-plain-expected.txt:
            * http/tests/misc/css-accept-any-type-expected.txt: Removed.
            * http/tests/misc/css-accept-any-type.html: Removed.
            * http/tests/misc/css-reject-any-type-in-strict-mode-expected.txt:
            * http/tests/security/cross-origin-css-1-expected.txt:
            * http/tests/security/cross-origin-css-2-expected.txt:
            * http/tests/security/cross-origin-css-4-expected.txt:
            * http/tests/security/cross-origin-css-5-expected.txt:
            * http/tests/security/cross-origin-css-7-expected.txt:
            * http/tests/security/cross-origin-css-in-quirks-1-expected.txt: Copied from LayoutTests/http/tests/security/cross-origin-css-1-expected.txt.
            * http/tests/security/cross-origin-css-in-quirks-1.html: Added.
            * http/tests/security/cross-origin-css-in-quirks-2-expected.txt: Copied from LayoutTests/http/tests/security/cross-origin-css-2-expected.txt.
            * http/tests/security/cross-origin-css-in-quirks-2.html: Added.
            * http/tests/security/cross-origin-css-in-quirks-3-expected.txt: Added.
            * http/tests/security/cross-origin-css-in-quirks-3.html: Added.
            * http/tests/security/cross-origin-css-in-quirks-4-expected.txt: Added.
            * http/tests/security/cross-origin-css-in-quirks-4.html: Added.
            * http/tests/security/cross-origin-css-in-quirks-5-expected.txt: Copied from LayoutTests/http/tests/security/cross-origin-css-5-expected.txt.
            * http/tests/security/cross-origin-css-in-quirks-5.html: Added.
            * http/tests/security/cross-origin-css-in-quirks-6-expected.txt: Added.
            * http/tests/security/cross-origin-css-in-quirks-6.html: Added.
            * http/tests/security/cross-origin-css-in-quirks-7-expected.txt: Added.
            * http/tests/security/cross-origin-css-in-quirks-7.html: Added.
            * http/tests/security/cross-origin-css-in-quirks-8-expected.txt: Added.
            * http/tests/security/cross-origin-css-in-quirks-8.html: Added.
            * http/tests/security/same-origin-css-1-expected.txt: Added.
            * http/tests/security/same-origin-css-1.html: Added.
            * http/tests/security/same-origin-css-2-expected.txt: Added.
            * http/tests/security/same-origin-css-2.html: Added.
            * http/tests/security/same-origin-css-3-expected.txt: Added.
            * http/tests/security/same-origin-css-3.html: Added.
            * http/tests/security/same-origin-css-4-expected.txt: Added.
            * http/tests/security/same-origin-css-4.html: Added.
            * http/tests/security/same-origin-css-5-expected.txt: Added.
            * http/tests/security/same-origin-css-5.html: Added.
            * http/tests/security/same-origin-css-6-expected.txt: Added.
            * http/tests/security/same-origin-css-6.html: Added.
            * http/tests/security/same-origin-css-7-expected.txt: Copied from LayoutTests/http/tests/security/cross-origin-css-7-expected.txt.
            * http/tests/security/same-origin-css-7.html: Added.
            * http/tests/security/same-origin-css-8-expected.txt: Added.
            * http/tests/security/same-origin-css-8.html: Added.
            * http/tests/security/same-origin-css-in-quirks-expected.txt: Added.
            * http/tests/security/same-origin-css-in-quirks.html: Added.
            * platform/mac/http/tests/misc/acid3-expected.txt:

2015-07-30  Matthew Hanson  <matthew_hanson@apple.com>

        Merge r187278. rdar://problem/19908029

    2015-07-23  Nan Wang  <n_wang@apple.com>

            AX: AccessibilityNodeObject::childrenChanged() generates too many AXLiveRegionChanged notifications
            https://bugs.webkit.org/show_bug.cgi?id=147211
            <rdar://problem/19908029>

            Reviewed by Chris Fleizach.

            * platform/mac/accessibility/aria-liveregions-notifications-always-sent-expected.txt:
            * platform/mac/accessibility/aria-liveregions-notifications-always-sent.html:
            * platform/mac/accessibility/aria-liveregions-notifications-expected.txt:
            * platform/mac/accessibility/aria-liveregions-notifications.html:
            * platform/mac/accessibility/aria-multiple-liveregions-notification-expected.txt: Added.
            * platform/mac/accessibility/aria-multiple-liveregions-notification.html: Added.

2015-07-30  Matthew Hanson  <matthew_hanson@apple.com>

        Merge r187504. rdar://problem/21915355

    2015-07-28  Said Abou-Hallawa  <sabouhallawa@apple.com>

            Crash happens when calling removeEventListener for an SVG element which has an instance inside a <defs> element of shadow tree
            https://bugs.webkit.org/show_bug.cgi?id=147290

            Reviewed by Daniel Bates.

            Make sure we do not crash when when calling removeEventListener() for an
            element which is cloned under a disallowed parent inside the shadow tree
            of another <use> element.

            * svg/custom/remove-event-listener-shadow-disallowed-element-expected.txt: Added.
            * svg/custom/remove-event-listener-shadow-disallowed-element.svg: Added.

2015-07-27  Alexey Proskuryakov  <ap@apple.com>

        More test gardening after r187346 ('>>' descendant combinator).

        * platform/mac/TestExpectations:

2015-07-27  Alexey Proskuryakov  <ap@apple.com>

        Merge r187443.

    2015-07-27  Alexey Proskuryakov  <ap@apple.com>

            Test result gardening for El Capitan.

            * platform/mac-yosemite/fast/text/international/bold-bengali-expected.png: Copied from LayoutTests/platform/mac/fast/text/international/bold-bengali-expected.png.
            * platform/mac-yosemite/fast/text/international/bold-bengali-expected.txt: Copied from LayoutTests/platform/mac/fast/text/international/bold-bengali-expected.txt.
            * platform/mac/fast/text/font-weights-zh-expected.txt:
            * platform/mac/fast/text/international/bold-bengali-expected.png:
            * platform/mac/fast/text/international/bold-bengali-expected.txt:
            * platform/mac/fast/text/international/danda-space-expected.png:
            * platform/mac/fast/text/international/danda-space-expected.txt:

2015-07-27  Alexey Proskuryakov  <ap@apple.com>

        Merge r187439 and r187441.

    2015-07-27  Alexey Proskuryakov  <ap@apple.com>

            More test expectations for rdar://problem/22014672

            * platform/mac/TestExpectations:


    2015-07-27  Alexey Proskuryakov  <ap@apple.com>

            Add test expectations for rdar://problem/22014672

            * platform/mac/TestExpectations:

2015-07-27  Babak Shafiei  <bshafiei@apple.com>

        Merge r187395.

    2015-07-25  Alexey Proskuryakov  <ap@apple.com>

            inspector/css/modify-rule-selector.html times out (flakily on some platforms, and
            every time on others).
            https://bugs.webkit.org/show_bug.cgi?id=147229

            * platform/gtk/TestExpectations:
            * platform/mac-wk2/TestExpectations:
            * platform/win/TestExpectations:
            Added expectations.

2015-07-27  Babak Shafiei  <bshafiei@apple.com>

        Merge r187352.

    2015-07-24  Devin Rousso  <drousso@apple.com>

            Web Inspector: Editing non-inspector-stylesheet rule selectors fails after the first change
            https://bugs.webkit.org/show_bug.cgi?id=147229

            Reviewed by Timothy Hatcher.

            * inspector/css/modify-rule-selector-expected.txt: Added.
            * inspector/css/modify-rule-selector.html: Added.

2015-07-27  Babak Shafiei  <bshafiei@apple.com>

        Merge r187371.

    2015-07-24  Chris Fleizach  <cfleizach@apple.com>

            AX: scrollable elements do not allow 3-finger swipe
            https://bugs.webkit.org/show_bug.cgi?id=141893

            Reviewed by Mario Sanchez Prada.

            * platform/ios-simulator/accessibility/scroll-in-overflow-div-expected.txt: Added.
            * platform/ios-simulator/accessibility/scroll-in-overflow-div.html: Added.

2015-07-25  Alexey Proskuryakov  <ap@apple.com>

        Updating an expectation to actually work (it's a reftest, so it needs ImageOnlyFailure).

        * platform/mac/TestExpectations:

2015-07-25  Alexey Proskuryakov  <ap@apple.com>

        Update test results after r187346 ('>>' descendant combinator).

        * fast/css/css-selector-text-expected.txt:
        * fast/css/css-set-selector-text-expected.txt:
        * fast/css/parsing-css-attribute-case-insensitive-value-1-expected.txt:
        * fast/css/parsing-css-attribute-case-insensitive-value-4-expected.txt:
        * fast/css/parsing-css-descendant-combinator-doubled-child-syntax-expected.txt:
        * fast/selectors/case-insensitive-attribute-register-requirement-2-expected.txt:
        * fast/selectors/element-closest-descendant-combinator-doubled-child-syntax-expected.txt:
        * fast/selectors/element-matches-attribute-ascii-case-insensitive-html-expected.txt:
        * fast/selectors/element-matches-descendant-combinator-doubled-child-syntax-expected.txt:
        * fast/selectors/nth-child-matching-first-expected.txt:
        * fast/selectors/nth-last-child-matching-first-expected.txt:
        * fast/selectors/querySelector-attribute-ascii-case-insensitive-html-expected.txt:
        * fast/selectors/querySelector-descendant-combinator-doubled-child-syntax-expected.txt:
        * platform/mac/TestExpectations:

2015-07-24  Matthew Hanson  <matthew_hanson@apple.com>

        Merge r187271. rdar://problem/21929247

    2015-07-22  Simon Fraser  <simon.fraser@apple.com>

            Layer z-ordering is incorrect when scrolling on page witih position:fixed
            https://bugs.webkit.org/show_bug.cgi?id=147220
            rdar://problem/15849697&21929247

            Reviewed by Dean Jackson.

            Tests that reveal the overlap area by creating lots of small layers, and dumping
            the layer tree.

            * compositing/layer-creation/fixed-overlap-extent-expected.txt: Added.
            * compositing/layer-creation/fixed-overlap-extent-rtl-expected.txt: Added.
            * compositing/layer-creation/fixed-overlap-extent-rtl.html: Added.
            * compositing/layer-creation/fixed-overlap-extent.html: Added.

2015-07-24  Matthew Hanson  <matthew_hanson@apple.com>

        Merge r187248. rdar://problem/21949735

    2015-07-23  Brady Eidson  <beidson@apple.com>

            Crash in WebPlatformStrategies::createPingHandle - Deref a null NetworkingContext.
            <rdar://problem/21949735> and https://bugs.webkit.org/show_bug.cgi?id=147227

            Reviewed by Alexey Proskuryakov.

            * http/tests/security/contentSecurityPolicy/user-style-sheet-font-crasher-expected.txt: Added.
            * http/tests/security/contentSecurityPolicy/user-style-sheet-font-crasher.html: Added.

2015-07-24  Matthew Hanson  <matthew_hanson@apple.com>

        Merge r187189. rdar://problem/21567767

    2015-07-22  Dean Jackson  <dino@apple.com>

            Out of bounds in WebGLRenderingContext::simulateVertexAttrib0
            https://bugs.webkit.org/show_bug.cgi?id=147176
            <rdar://problem/21567767>

            Reviewed by Oliver Hunt.

            * fast/canvas/webgl/out-of-bounds-simulated-vertexAttrib0-drawArrays-expected.txt: Added.
            * fast/canvas/webgl/out-of-bounds-simulated-vertexAttrib0-drawArrays.html: Added.

2015-07-24  Lucas Forschler  <lforschler@apple.com>

        Merge r187133

    2015-07-21  Benjamin Poulain  <bpoulain@apple.com>

            StyleSheetContents::wrapperInsertRule() can create rules that overflow RuleData's selector index
            https://bugs.webkit.org/show_bug.cgi?id=147144

            Reviewed by Alex Christensen.

            This bug was affecting two parts of WebKit:
            -In CSSOM, StyleSheet.insertRule() could create bogus rules.
             The new test verifies that the call fails instead of creating undefined
             behaviors.
            -In ContentExtensions, large selectors are now working correctly. The tests
             cover the case of a default stylesheet and an dynamic stylesheet.

            * fast/css/insert-rule-overflow-rule-data-expected.txt: Added.
            * fast/css/insert-rule-overflow-rule-data.html: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-1-expected.txt: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-1.html: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-1.html.json: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-2-expected.txt: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-2.html: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-2.html.json: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-3-expected.txt: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-3.html: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-3.html.json: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-4-expected.txt: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-4.html: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-4.html.json: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-5-expected.txt: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-5.html: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-5.html.json: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-6-expected.txt: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-6.html: Added.
            * http/tests/contentextensions/css-display-none-overflows-rule-data-6.html.json: Added.

2015-07-23  Lucas Forschler  <lforschler@apple.com>

        Merge r187116

    2015-07-21  Said Abou-Hallawa  <sabouhallawa@apple.com>

            REGRESSION (r172417, r184065): Multiple rendering issues with fixed attached background-image
            https://bugs.webkit.org/show_bug.cgi?id=147049
            <rdar://problem/21110936>

            Reviewed by Simon Fraser.

            fixedLayoutSize background-image rendering for root and non-root elements.

            * platform/mac-wk2/tiled-drawing/fixed-layout-size-fixed-attachment-cover-expected.html: Added.
            * platform/mac-wk2/tiled-drawing/fixed-layout-size-fixed-attachment-cover.html: Added.
            * platform/mac-wk2/tiled-drawing/fixed-layout-size-fixed-attachment-local-expected.html: Added.
            * platform/mac-wk2/tiled-drawing/fixed-layout-size-fixed-attachment-local.html: Added.

2015-07-23  Lucas Forschler  <lforschler@apple.com>

        Merge r186994

    2015-07-18  David Kilzer  <ddkilzer@apple.com>

            REGRESSION (r186981): fast/repaint/block-inputrange-repaint.html is starting out life as flaky

            <https://webkit-test-results.appspot.com/dashboards/flakiness_dashboard.html#showAllRuns=true&tests=fast%2Frepaint%2Fblock-inputrange-repaint.html>

            * fast/repaint/block-inputrange-repaint.html:
            - Use setTimeout() to give WebKit time to repaint.

2015-07-23  Lucas Forschler  <lforschler@apple.com>

        Merge r186981

    2015-07-17  Zalan Bujtas  <zalan@apple.com>

            (display: block)input range's thumb disappears when moved.
            https://bugs.webkit.org/show_bug.cgi?id=146896
            <rdar://problem/21787807>

            Reviewed by Simon Fraser.

            Since the thumb is positioned after the layout for the input (shadow) subtree is finished, the repaint rects
            issued during the layout will not cover the re-positioned thumb.
            We need to issue a repaint soon after the thumb is re-positioned.

            * fast/repaint/block-inputrange-repaint-expected.txt: Added.
            * fast/repaint/block-inputrange-repaint.html: Added.

== Rolled over to ChangeLog-2015-07-23 ==
