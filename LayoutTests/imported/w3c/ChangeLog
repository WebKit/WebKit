2018-01-24  Chris Dumez  <cdumez@apple.com>

        Unreviewed, rebaseline flaky service worker test

        * web-platform-tests/service-workers/service-worker/windowclient-navigate.https-expected.txt:

2018-01-24  Chris Dumez  <cdumez@apple.com>

        Unreviewed, unskip some service worker tests that no longer time out

        * web-platform-tests/service-workers/service-worker/clients-matchall-include-uncontrolled.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/extendable-event-waituntil.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/indexeddb.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/navigation-redirect.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/postmessage-msgport-to-client.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/postmessage.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/sandboxed-iframe-fetch-event.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/update-recovery.https-expected.txt:

2018-01-24  Manuel Rego Casasnovas  <rego@igalia.com>

        Update paths of CSS tests from WPT
        https://bugs.webkit.org/show_bug.cgi?id=182043

        Reviewed by Youenn Fablet.

        * resources/import-expectations.json:
        * resources/resource-files.json:
        * web-platform-tests/css/css-display/: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-display-3/.
        * web-platform-tests/css/css-pseudo/: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-pseudo-4/.
        * web-platform-tests/css/css-scoping/: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-scoping-1/.
        * web-platform-tests/css/css-shapes/: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-shapes-1/.
        * web-platform-tests/css/css-ui/: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-ui-3/.
        * web-platform-tests/css/geometry/: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/geometry-1/.
        * web-platform-tests/css/selectors/: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/selectors4/.
        * web-platform-tests/lint.whitelist:

2018-01-23  Yusuke Suzuki  <utatane.tea@gmail.com>

        Import WPT for modules
        https://bugs.webkit.org/show_bug.cgi?id=181981

        Reviewed by Sam Weinig.

        This patch just imports WPT for modules mechanically.

        * resources/import-expectations.json:
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/bad-module-specifier.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/charset-01-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/charset-01.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/charset-02-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/charset-02.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/charset-03-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/charset-03.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/compilation-error-1-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/compilation-error-1.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/compilation-error-2-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/compilation-error-2.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/credentials.sub-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/credentials.sub.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin-common.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin-import-different.sub.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin-import-missingheader.sub.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin-import-same.sub.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin-import-wrongheader.sub.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin-root-different.sub.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin-root-missingheader.sub.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin-root-same.sub.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin-root-wrongheader.sub.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin-scripterror.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/crossorigin.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/currentScript-null-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/currentScript-null.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/currentscript.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/custom-element-exception-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/custom-element-exception.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/cycle-tdz-access-a.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/cycle-tdz-access.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/cycle-unresolvable-a.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/cycle-unresolvable.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/dynamic-imports-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/dynamic-imports-fetch-error.sub-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/dynamic-imports-fetch-error.sub.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/dynamic-imports-script-error-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/dynamic-imports-script-error.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/dynamic-imports.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/inline-event-handler-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/inline-event-handler.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/propagate-nonce-external-classic-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/propagate-nonce-external-classic.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/propagate-nonce-external-module-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/propagate-nonce-external-module.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/propagate-nonce-external.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/propagate-nonce-inline-classic-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/propagate-nonce-inline-classic.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/propagate-nonce-inline-module-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/propagate-nonce-inline-module.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/string-compilation-base-url-classic-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/string-compilation-base-url-classic.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/string-compilation-base-url-module-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/string-compilation-base-url-module.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/string-compilation-classic-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/string-compilation-classic.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/string-compilation-module-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/string-compilation-module.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/dynamic-import/w3c-import.log: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/error-and-slow-dependency-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/error-and-slow-dependency.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/errorhandling-parseerror-common.js: Added.
        (errorHandler):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/errorhandling-parseerror-dependent.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/errorhandling-parseerror-dependent.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/errorhandling-parseerror-dependentmultiple.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/errorhandling-parseerror-dependentmultiple.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/errorhandling-parseerror-root.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/errorhandling-wrongMimetype-import.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/errorhandling-wrongMimetype.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/errorhandling.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/evaluation-error-1-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/evaluation-error-1.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/evaluation-error-2-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/evaluation-error-2.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/evaluation-error-3-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/evaluation-error-3.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/evaluation-error-4-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/evaluation-error-4.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/execorder-dynamicordered2.js: Added.
        (test_dynamicOrdered.step):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/execorder-dynamicordered3.js: Added.
        (test_dynamicOrdered.step):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/execorder-dynamicordered4.js: Added.
        (test_dynamicOrdered.step):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/execorder-dynamicunordered1.js: Added.
        (test_dynamicUnordered1.step):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/execorder-dynamicunordered2.js: Added.
        (test_dynamicUnordered2.step):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/execorder-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/execorder-parsedordered2.js: Added.
        (test_parsedOrdered.step):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/execorder-parsedordered4.js: Added.
        (test_parsedOrdered.step):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/execorder-parsedunordered1.js: Added.
        (test_parsedUnordered1.step):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/execorder-parsedunordered2.js: Added.
        (test_parsedUnordered2.step):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/execorder.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/export-something-nested.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/export-something.js: Added.
        (export.set_foo):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/fetch-error-1-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/fetch-error-1.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/fetch-error-2-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/fetch-error-2.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/fetch-error-2.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/import-something-namespace.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/import-subgraph-404-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/import-subgraph-404.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports-a.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports-b.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports-cycle-a.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports-cycle-b.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports-cycle.js: Added.
        (test_importCycle.step):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports-inc-a.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports-inc-ab.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports-inc-b.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports-self-inner.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports-self.js: Added.
        (test_importSelf.step):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/imports.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-1-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-1.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-1.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-2-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-2.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-3-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-3.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-4-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-4.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-4a.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-4b.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-4c.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-4d.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-5-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-5.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-5a.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-5b.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-5c.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-5d.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-5e.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-6-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-6.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-6a.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-6b.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-6c.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-6d.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-7-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-7.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-7a.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-7b.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-7c.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-7d.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-7e.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-7f.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/instantiation-error-8.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/integrity-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/integrity-matches-inner.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/integrity-matches.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/integrity-mismatches-inner.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/integrity-mismatches.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/integrity.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/late-namespace-request-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/late-namespace-request.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/late-star-export-request-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/late-star-export-request.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/load-error-events-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/load-error-events-inline-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/load-error-events-inline.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/load-error-events.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/missing-export-nested.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/missing-export.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/module-in-xhtml-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/module-in-xhtml.xhtml: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/module-vs-script-1-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/module-vs-script-1.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/module-vs-script-2-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/module-vs-script-2.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/nested-missing-export.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/nomodule-attribute-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/nomodule-attribute.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/404-but-js.asis: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/500-but-js.asis: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/check-cookie.py: Added.
        (main):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/credentials-iframe.sub.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/delayed-modulescript.py: Added.
        (main):
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/import-non-utf8-with-charset-header.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/import-non-utf8.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/import-utf8-with-charset-header.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/import-utf8.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/imports-404-but-js.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/imports-500-but-js.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/imports-b-cross-origin.sub.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/resources/w3c-import.log: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/script-for-event-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/script-for-event.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/set-currentScript-on-window.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/single-evaluation-1-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/single-evaluation-1.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/single-evaluation-2-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/single-evaluation-2.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/slow-cycle-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/slow-cycle.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/slow-module-graph-a.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/slow-module-graph-b.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/specifier-error-expected.txt: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/specifier-error.html: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/syntaxerror-nested.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/syntaxerror.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/this-nested.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/this.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/throw-error.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/throw-nested.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/throw.js: Added.
        * web-platform-tests/html/semantics/scripting-1/the-script-element/module/w3c-import.log: Added.

2018-01-23  Javier Fernandez  <jfernandez@igalia.com>

        [css-align] 'left' and 'right' should parse as invalid in block/cross-axis alignment
        https://bugs.webkit.org/show_bug.cgi?id=181792

        Reviewed by Antti Koivisto.

        Imported new Web Platform Tests for the css-align module.

        * resources/import-expectations.json:
        * web-platform-tests/css/css-align-3/content-distribution/w3c-import.log: Removed.
        * web-platform-tests/css/css-align-3/default-alignment/w3c-import.log: Removed.
        * web-platform-tests/css/css-align-3/resources/alignment-parsing-utils.js: Removed.
        * web-platform-tests/css/css-align-3/self-alignment/w3c-import.log: Removed.
        * web-platform-tests/css/css-align/content-distribution/parse-align-content-001-expected.txt: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-align-content-001.html: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-align-content-002-expected.txt: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-align-content-002.html: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-align-content-003-expected.txt: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-align-content-003.html: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-align-content-004-expected.txt: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-align-content-004.html: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-align-content-005-expected.txt: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-align-content-005.html: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-justify-content-001-expected.txt: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-justify-content-001.html: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-justify-content-002-expected.txt: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-justify-content-002.html: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-justify-content-003-expected.txt: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-justify-content-003.html: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-justify-content-004-expected.txt: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-justify-content-004.html: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-justify-content-005-expected.txt: Added.
        * web-platform-tests/css/css-align/content-distribution/parse-justify-content-005.html: Added.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-001-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-001-expected.txt.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-001.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-001.html.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-002-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-002-expected.txt.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-002.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-002.html.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-003-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-003-expected.txt.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-003.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-003.html.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-004-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-004-expected.txt.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-004.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-004.html.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-005-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-005-expected.txt.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-005.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-005.html.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-006-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-006-expected.txt.
        * web-platform-tests/css/css-align/content-distribution/place-content-shorthand-006.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/content-distribution/place-content-shorthand-006.html.
        * web-platform-tests/css/css-align/content-distribution/w3c-import.log: Added.
        * web-platform-tests/css/css-align/default-alignment/justify-items-legacy-001-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/justify-items-legacy-001-expected.txt.
        * web-platform-tests/css/css-align/default-alignment/justify-items-legacy-001.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/justify-items-legacy-001.html.
        * web-platform-tests/css/css-align/default-alignment/parse-align-items-001-expected.txt: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-align-items-001.html: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-align-items-002-expected.txt: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-align-items-002.html: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-align-items-003-expected.txt: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-align-items-003.html: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-align-items-004-expected.txt: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-align-items-004.html: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-align-items-005-expected.txt: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-align-items-005.html: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-001-expected.txt: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-001.html: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-002-expected.txt: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-002.html: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-003-expected.txt: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-003.html: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-004-expected.txt: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-004.html: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-005-expected.txt: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-005.html: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-006-expected.txt: Added.
        * web-platform-tests/css/css-align/default-alignment/parse-justify-items-006.html: Added.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-001-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-001-expected.txt.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-001.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-001.html.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-002-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-002-expected.txt.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-002.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-002.html.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-003-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-003-expected.txt.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-003.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-003.html.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-004-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-004-expected.txt.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-004.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-004.html.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-005-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-005-expected.txt.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-005.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-005.html.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-006-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-006-expected.txt.
        * web-platform-tests/css/css-align/default-alignment/place-items-shorthand-006.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/default-alignment/place-items-shorthand-006.html.
        * web-platform-tests/css/css-align/default-alignment/w3c-import.log: Added.
        * web-platform-tests/css/css-align/distribution-values/space-evenly-001-expected.xht: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/distribution-values/space-evenly-001-expected.xht.
        * web-platform-tests/css/css-align/distribution-values/space-evenly-001.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/distribution-values/space-evenly-001.html.
        * web-platform-tests/css/css-align/distribution-values/w3c-import.log: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/distribution-values/w3c-import.log.
        * web-platform-tests/css/css-align/resources/alignment-parsing-utils.js: Added.
        (checkPlaceShorhand):
        (checkPlaceShorhandLonghands):
        (checkPlaceShorthandInvalidValues):
        (checkValues):
        (checkBadValues):
        (checkInitialValues):
        (checkInheritValues):
        (checkLegacyValues):
        (checkSupportedValues):
        * web-platform-tests/css/css-align/resources/w3c-import.log: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/resources/w3c-import.log.
        * web-platform-tests/css/css-align/self-alignment/parse-align-self-001-expected.txt: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-align-self-001.html: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-align-self-002-expected.txt: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-align-self-002.html: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-align-self-003-expected.txt: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-align-self-003.html: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-align-self-004-expected.txt: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-align-self-004.html: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-align-self-005-expected.txt: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-align-self-005.html: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-justify-self-001-expected.txt: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-justify-self-001.html: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-justify-self-002-expected.txt: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-justify-self-002.html: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-justify-self-003-expected.txt: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-justify-self-003.html: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-justify-self-004-expected.txt: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-justify-self-004.html: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-justify-self-005-expected.txt: Added.
        * web-platform-tests/css/css-align/self-alignment/parse-justify-self-005.html: Added.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-001-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-001-expected.txt.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-001.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-001.html.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-002-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-002-expected.txt.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-002.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-002.html.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-003-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-003-expected.txt.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-003.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-003.html.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-004-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-004-expected.txt.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-004.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-004.html.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-005-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-005-expected.txt.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-005.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-005.html.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-006-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-006-expected.txt.
        * web-platform-tests/css/css-align/self-alignment/place-self-shorthand-006.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-align-3/self-alignment/place-self-shorthand-006.html.
        * web-platform-tests/css/css-align/self-alignment/w3c-import.log: Added.

2018-01-23  Brady Eidson  <beidson@apple.com>

        Allow passing MessagePorts across processes (e.g. ServiceWorkers).
        https://bugs.webkit.org/show_bug.cgi?id=181178

        Reviewed by Andy Estes.

        Re-baseline for many new passes and a few new failure modes.

        * web-platform-tests/service-workers/service-worker/ServiceWorkerGlobalScope/extendable-message-event.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/ServiceWorkerGlobalScope/postmessage.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/ServiceWorkerGlobalScope/registration-attribute.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/ServiceWorkerGlobalScope/unregister.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/claim-affect-other-registration.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/claim-fetch.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/claim-not-using-registration.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/claim-using-registration.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/claim-worker-fetch.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/client-id.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/clients-get-cross-origin.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/clients-get.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/clients-matchall-client-types.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/clients-matchall-exact-controller.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/clients-matchall-order.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/clients-matchall.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/extendable-event-async-waituntil.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-event-async-respond-with.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-event-respond-with-stops-propagation.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-event-throws-after-respond-with.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-request-css-base-url.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-request-css-images.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-request-fallback.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-request-no-freshness-headers.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-request-resources.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/immutable-prototype-serviceworker.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/registration-end-to-end.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/registration-events.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/skip-waiting-installed.https-expected.txt:

2018-01-22  Chris Nardi  <csnardi1@gmail.com>

        Parse calc() in CSS media queries
        https://bugs.webkit.org/show_bug.cgi?id=181716

        Reviewed by Antti Koivisto.

        * resources/import-expectations.json:
        * resources/resource-files.json:
        * web-platform-tests/css/mediaqueries/OWNERS: Added.
        * web-platform-tests/css/mediaqueries/aspect-ratio-001-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/aspect-ratio-001.html: Added.
        * web-platform-tests/css/mediaqueries/aspect-ratio-002-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/aspect-ratio-002.html: Added.
        * web-platform-tests/css/mediaqueries/aspect-ratio-003-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/aspect-ratio-003.html: Added.
        * web-platform-tests/css/mediaqueries/aspect-ratio-004-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/aspect-ratio-004.html: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-001-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-001.html: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-002-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-002.html: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-003-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-003.html: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-004-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-004.html: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-005-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-005.html: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-006-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/device-aspect-ratio-006.html: Added.
        * web-platform-tests/css/mediaqueries/min-width-001-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/min-width-001.xht: Added.
        * web-platform-tests/css/mediaqueries/min-width-tables-001-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/min-width-tables-001.html: Added.
        * web-platform-tests/css/mediaqueries/mq-calc-001-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/mq-calc-001.html: Added.
        * web-platform-tests/css/mediaqueries/mq-calc-002-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/mq-calc-002.html: Added.
        * web-platform-tests/css/mediaqueries/mq-calc-003-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/mq-calc-003.html: Added.
        * web-platform-tests/css/mediaqueries/mq-calc-004-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/mq-calc-004.html: Added.
        * web-platform-tests/css/mediaqueries/mq-calc-005-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/mq-calc-005.html: Added.
        * web-platform-tests/css/mediaqueries/mq-invalid-media-type-001-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/mq-invalid-media-type-001.html: Added.
        * web-platform-tests/css/mediaqueries/mq-invalid-media-type-002-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/mq-invalid-media-type-002.html: Added.
        * web-platform-tests/css/mediaqueries/mq-invalid-media-type-003-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/mq-invalid-media-type-003.html: Added.
        * web-platform-tests/css/mediaqueries/mq-invalid-media-type-004-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/mq-invalid-media-type-004.html: Added.
        * web-platform-tests/css/mediaqueries/relative-units-001-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/relative-units-001.html: Added.
        * web-platform-tests/css/mediaqueries/relative-units-002-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/relative-units-002.html: Added.
        * web-platform-tests/css/mediaqueries/relative-units-003-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/relative-units-003.html: Added.
        * web-platform-tests/css/mediaqueries/relative-units-004-expected.xht: Added.
        * web-platform-tests/css/mediaqueries/relative-units-004.html: Added.
        * web-platform-tests/css/mediaqueries/support/media_queries_iframe.html: Renamed from LayoutTests/fast/media/w3c/resources/media_queries_iframe.html.
        * web-platform-tests/css/mediaqueries/support/min-width-tables-001-iframe.html: Added.
        * web-platform-tests/css/mediaqueries/support/w3c-import.log: Added.
        * web-platform-tests/css/mediaqueries/test_media_queries-expected.txt: Renamed from LayoutTests/fast/media/w3c/test_media_queries-expected.txt.
        * web-platform-tests/css/mediaqueries/test_media_queries.html: Renamed from LayoutTests/fast/media/w3c/test_media_queries.html.
        * web-platform-tests/css/mediaqueries/w3c-import.log: Added.

2018-01-22  Manuel Rego Casasnovas  <rego@igalia.com>

        [css-grid] Spanning Grid item has too much space at the bottom / is too high
        https://bugs.webkit.org/show_bug.cgi?id=181677

        Imported WPT tests to check this change.

        Reviewed by Javier Fernandez.

        * web-platform-tests/css/css-grid/layout-algorithm/grid-find-fr-size-gutters-001-expected.txt: Added.
        * web-platform-tests/css/css-grid/layout-algorithm/grid-find-fr-size-gutters-001.html: Added.
        * web-platform-tests/css/css-grid/layout-algorithm/grid-find-fr-size-gutters-002-expected.txt: Added.
        * web-platform-tests/css/css-grid/layout-algorithm/grid-find-fr-size-gutters-002.html: Added.
        * web-platform-tests/css/css-grid/layout-algorithm/w3c-import.log:

2018-01-20  Youenn Fablet  <youenn@apple.com>

        fetch redirect is incompatible with "no-cors" mode
        https://bugs.webkit.org/show_bug.cgi?id=181866
        <rdar://problem/35827140>

        Reviewed by Chris Dumez.

        * web-platform-tests/fetch/api/redirect/redirect-mode-expected.txt:
        * web-platform-tests/fetch/api/redirect/redirect-mode-worker-expected.txt:
        * web-platform-tests/fetch/api/redirect/redirect-mode.js:
        (redirectMode):
        * web-platform-tests/service-workers/service-worker/fetch-event-redirect.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-event-redirect.https.html:
        * web-platform-tests/service-workers/service-worker/fetch-request-redirect.https-expected.txt:

2018-01-19  Joseph Pecoraro  <pecoraro@apple.com>

        AppCache: Log a Deprecation warning to the Console when AppCache is used
        https://bugs.webkit.org/show_bug.cgi?id=181778

        Reviewed by Alex Christensen.

        * web-platform-tests/html/browsers/offline/appcache/workers/appcache-worker-expected.txt:
        * web-platform-tests/html/browsers/offline/introduction-4/event_cached-expected.txt:
        * web-platform-tests/html/browsers/offline/introduction-4/event_checking-expected.txt:
        * web-platform-tests/html/browsers/offline/introduction-4/event_noupdate-expected.txt:
        * web-platform-tests/html/browsers/offline/introduction-4/event_progress-expected.txt:
        * web-platform-tests/html/browsers/offline/manifest_url_check-expected.txt:
        * web-platform-tests/service-workers/service-worker/appcache-ordering-main.https-expected.txt:

2018-01-17  Ali Juma  <ajuma@chromium.org>

        Update web platform tests for Visual Viewport API
        https://bugs.webkit.org/show_bug.cgi?id=181689

        Reviewed by Alex Christensen.

        Rename the test directory from 'viewport' to 'visual-viewport', and update
        viewport-resize-event-on-load-overflowing-page.html.

        This corresponds to the following upstream commits:
        1) https://github.com/w3c/web-platform-tests/commit/f878fee4df619e55c7fbfce1a2ff5e5d4d83a03b
        2) https://github.com/w3c/web-platform-tests/commit/03a684d63e62d85cffed38bc942f468692d7d54f

        * resources/import-expectations.json:
        * web-platform-tests/viewport/w3c-import.log: Removed.
        * web-platform-tests/visual-viewport/viewport-no-resize-event-on-overflow-recalc-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-no-resize-event-on-overflow-recalc-expected.txt.
        * web-platform-tests/visual-viewport/viewport-no-resize-event-on-overflow-recalc.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-no-resize-event-on-overflow-recalc.html.
        * web-platform-tests/visual-viewport/viewport-read-size-causes-layout-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-read-size-causes-layout-expected.txt.
        * web-platform-tests/visual-viewport/viewport-read-size-causes-layout.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-read-size-causes-layout.html.
        * web-platform-tests/visual-viewport/viewport-read-size-in-iframe-causes-layout-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-read-size-in-iframe-causes-layout-expected.txt.
        * web-platform-tests/visual-viewport/viewport-read-size-in-iframe-causes-layout.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-read-size-in-iframe-causes-layout.html.
        * web-platform-tests/visual-viewport/viewport-resize-event-on-load-overflowing-page-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-resize-event-on-load-overflowing-page-expected.txt.
        * web-platform-tests/visual-viewport/viewport-resize-event-on-load-overflowing-page.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-resize-event-on-load-overflowing-page.html.
        * web-platform-tests/visual-viewport/viewport-scrollbars-cause-resize-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-scrollbars-cause-resize-expected.txt.
        * web-platform-tests/visual-viewport/viewport-scrollbars-cause-resize.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-scrollbars-cause-resize.html.
        * web-platform-tests/visual-viewport/viewport-type-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-type-expected.txt.
        * web-platform-tests/visual-viewport/viewport-type.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-type.html.
        * web-platform-tests/visual-viewport/viewport-unscaled-scale-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-scale-expected.txt.
        * web-platform-tests/visual-viewport/viewport-unscaled-scale-iframe-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-scale-iframe-expected.txt.
        * web-platform-tests/visual-viewport/viewport-unscaled-scale-iframe.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-scale-iframe.html.
        * web-platform-tests/visual-viewport/viewport-unscaled-scale.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-scale.html.
        * web-platform-tests/visual-viewport/viewport-unscaled-scroll-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-scroll-expected.txt.
        * web-platform-tests/visual-viewport/viewport-unscaled-scroll-iframe-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-scroll-iframe-expected.txt.
        * web-platform-tests/visual-viewport/viewport-unscaled-scroll-iframe.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-scroll-iframe.html.
        * web-platform-tests/visual-viewport/viewport-unscaled-scroll.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-scroll.html.
        * web-platform-tests/visual-viewport/viewport-unscaled-size-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-size-expected.txt.
        * web-platform-tests/visual-viewport/viewport-unscaled-size-iframe-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-size-iframe-expected.txt.
        * web-platform-tests/visual-viewport/viewport-unscaled-size-iframe.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-size-iframe.html.
        * web-platform-tests/visual-viewport/viewport-unscaled-size.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport-unscaled-size.html.
        * web-platform-tests/visual-viewport/viewport_support.js: Renamed from LayoutTests/imported/w3c/web-platform-tests/viewport/viewport_support.js.
        * web-platform-tests/visual-viewport/w3c-import.log: Added.

2018-01-12  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Implement dummy WebAuthN IDLs
        https://bugs.webkit.org/show_bug.cgi?id=181627
        <rdar://problem/36459864>

        Reviewed by Alex Christensen.

        * web-platform-tests/credential-management/credentialscontainer-create-basics.https-expected.txt:

2018-01-11  Youenn Fablet  <youenn@apple.com>

        Redirected iframe loading with Request.redirect=follow should fail
        https://bugs.webkit.org/show_bug.cgi?id=181491

        Reviewed by Alex Christensen.

        Updated tests to output a more deterministic output, more debuggable.
        Made use of media.js to allow loading either oga or mp3 when oga is not supported.

        * web-platform-tests/service-workers/service-worker/fetch-request-redirect.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-request-redirect.https.html:

2018-01-10  Youenn Fablet  <youenn@apple.com>

        Use no-cache fetch mode when loading main documents with location.reload()
        https://bugs.webkit.org/show_bug.cgi?id=181285

        Reviewed by Alex Christensen.

        * web-platform-tests/service-workers/service-worker/fetch-event.https-expected.txt:

2018-01-09  Chris Dumez  <cdumez@apple.com>

        We should not return undefined for most properties of a detached Window
        https://bugs.webkit.org/show_bug.cgi?id=181416
        <rdar://problem/36162489>

        Reviewed by Ryosuke Niwa.

        Rebaseline several WPT tests now that more checks are passing.

        * web-platform-tests/custom-elements/custom-element-registry/per-global-expected.txt:
        * web-platform-tests/html/semantics/embedded-content/the-iframe-element/iframe-append-to-child-document-expected.txt:
        * web-platform-tests/service-workers/service-worker/detached-context.https-expected.txt:

2018-01-09  Matt Lewis  <jlewis3@apple.com>

        Unreviewed, rolling out r226531.

        This caused test failures on macOS WK2.

        Reverted changeset:

        "Use no-cache fetch mode when loading main documents with
        location.reload()"
        https://bugs.webkit.org/show_bug.cgi?id=181285
        https://trac.webkit.org/changeset/226531

2018-01-09  Youenn Fablet  <youenn@apple.com>

        Make imported/w3c/web-platform-tests/service-workers/service-worker/fetch-canvas-tainting-cache.https.html robust to quota error
        https://bugs.webkit.org/show_bug.cgi?id=181404

        Reviewed by Alex Christensen.

        Ensure fetch event promise is resolved in case cache is used.
        Ensure each cache entry is deleted to not hit any cache quota error.
        Test was previously deleting the whole cache, but in WebKit, the quota
        in such a case will only be updated when the cache is garbaged collected, which is not deterministic.
        Make tests output more results to improve debugability.

        * web-platform-tests/service-workers/service-worker/fetch-canvas-tainting-cache.https.html:
        * web-platform-tests/service-workers/service-worker/fetch-canvas-tainting.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-canvas-tainting.https.html:
        * web-platform-tests/service-workers/service-worker/resources/fetch-canvas-tainting-iframe.html:

2018-01-09  Youenn Fablet  <youenn@apple.com>

        [iOS Debug WK2] Layout Test imported/w3c/web-platform-tests/service-workers/service-worker/register-closed-window.https.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=181087
        <rdar://problem/36188109>

        Reviewed by Chris Dumez.

        Updated test to get a more deterministic output.

        * web-platform-tests/service-workers/service-worker/register-closed-window.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/resources/register-closed-window-iframe.html:

2018-01-09  Youenn Fablet  <youenn@apple.com>

        Add CSP support to service workers
        https://bugs.webkit.org/show_bug.cgi?id=181385

        Reviewed by Chris Dumez.

        * web-platform-tests/service-workers/service-worker/service-worker-csp-connect.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/service-worker-csp-default.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/service-worker-csp-script.https-expected.txt:

2018-01-09  Ali Juma  <ajuma@chromium.org>

        Implement VisualViewport API events
        https://bugs.webkit.org/show_bug.cgi?id=179386

        Reviewed by Frdric Wang.

        Update expectation for a viewport WPT that now passes.

        * web-platform-tests/viewport/viewport-resize-event-on-load-overflowing-page-expected.txt:

2018-01-08  Chris Nardi  <csnardi1@gmail.com>

        ::first-letter incorrectly selects grapheme pairs
        https://bugs.webkit.org/show_bug.cgi?id=181315

        Reviewed by Darin Adler.

        Updated css-pseudo-4 to latest WPT revision and added first-letter-004.html.

        * web-platform-tests/css/css-pseudo-4/first-letter-004-expected.html: Added.
        * web-platform-tests/css/css-pseudo-4/first-letter-004.html: Added.
        * web-platform-tests/css/css-pseudo-4/marker-color-expected.html:
        * web-platform-tests/css/css-pseudo-4/marker-color.html:
        * web-platform-tests/css/css-pseudo-4/marker-font-properties.html:
        * web-platform-tests/css/css-pseudo-4/w3c-import.log:

2018-01-08  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r226532 and r226540.
        https://bugs.webkit.org/show_bug.cgi?id=181422

        jessie says basic browsing does not seem to work (Requested by
        alexchristensen on #webkit).

        Reverted changesets:

        "Add CSP support to service workers"
        https://bugs.webkit.org/show_bug.cgi?id=181385
        https://trac.webkit.org/changeset/226532

        "SWClientConnection should not keep references to service
        worker jobs"
        https://bugs.webkit.org/show_bug.cgi?id=181381
        https://trac.webkit.org/changeset/226540

2018-01-08  Youenn Fablet  <youenn@apple.com>

        Add CSP support to service workers
        https://bugs.webkit.org/show_bug.cgi?id=181385

        Reviewed by Chris Dumez.

        * web-platform-tests/service-workers/service-worker/service-worker-csp-connect.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/service-worker-csp-default.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/service-worker-csp-script.https-expected.txt:

2018-01-08  Youenn Fablet  <youenn@apple.com>

        Use no-cache fetch mode when loading main documents with location.reload()
        https://bugs.webkit.org/show_bug.cgi?id=181285

        Reviewed by Alex Christensen.

        * web-platform-tests/service-workers/service-worker/fetch-event.https-expected.txt:

2018-01-08  Ms2ger  <Ms2ger@igalia.com>

        Update imagebitmap tests.
        https://bugs.webkit.org/show_bug.cgi?id=181379

        Unreviewed test gardening.

        * web-platform-tests/2dcontext/imagebitmap/common.js:
        * web-platform-tests/2dcontext/imagebitmap/createImageBitmap-drawImage-expected.txt:
        * web-platform-tests/2dcontext/imagebitmap/createImageBitmap-drawImage.html:
        * web-platform-tests/2dcontext/imagebitmap/createImageBitmap-invalid-args-expected.txt:
        * web-platform-tests/2dcontext/imagebitmap/createImageBitmap-invalid-args.html:

2018-01-07  Ms2ger  <Ms2ger@igalia.com>

        Implement createImageBitmap(ImageBitmap)
        https://bugs.webkit.org/show_bug.cgi?id=181287

        Reviewed by Darin Adler.

        * web-platform-tests/2dcontext/imagebitmap/createImageBitmap-drawImage-expected.txt: rebaseline.

2018-01-05  Alex Christensen  <achristensen@webkit.org>

        Forbid < and > in URL hosts
        https://bugs.webkit.org/show_bug.cgi?id=181308
        <rdar://problem/36012757>

        Reviewed by Tim Horton.

        * web-platform-tests/url/a-element-expected.txt:
        * web-platform-tests/url/a-element-origin-expected.txt:
        * web-platform-tests/url/a-element-origin-xhtml-expected.txt:
        * web-platform-tests/url/a-element-xhtml-expected.txt:
        * web-platform-tests/url/url-constructor-expected.txt:
        * web-platform-tests/url/url-origin-expected.txt:

2018-01-05  Youenn Fablet  <youenn@apple.com>

        Skip LayoutTests/imported/w3c/web-platform-tests/service-workers/service-worker/claim-shared-worker-fetch.https.html
        https://bugs.webkit.org/show_bug.cgi?id=181329

        Unreviewed.

        * web-platform-tests/service-workers/service-worker/claim-shared-worker-fetch.https-expected.txt: Removed.

2018-01-05  Youenn Fablet  <youenn@apple.com>

        LayoutTests/imported/w3c/web-platform-tests/service-workers/service-worker/fetch-event.https.html should not expect Upgrade-Insecure Requests header
        https://bugs.webkit.org/show_bug.cgi?id=181286

        Reviewed by Alex Christensen.

        Test previously expected upgrade-insecure-requests header to be inserted in a HTTP request.
        Given the request URL is HTTPS, there is no need for that header.

        * web-platform-tests/service-workers/service-worker/fetch-event.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-event.https.html:

2018-01-04  Youenn Fablet  <youenn@apple.com>

        FetchResponse should set its internal response text encoding name
        https://bugs.webkit.org/show_bug.cgi?id=181284

        Reviewed by Alex Christensen.

        * web-platform-tests/service-workers/service-worker/fetch-event.https-expected.txt:

2018-01-04  Youenn Fablet  <youenn@apple.com>

        Service Worker should expose redirect mode for navigation loads as manual
        https://bugs.webkit.org/show_bug.cgi?id=181067

        Reviewed by Alex Christensen.

        Updating test to match the latest fetch spec.

        * web-platform-tests/service-workers/service-worker/navigation-redirect-to-http.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/request-end-to-end.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/request-end-to-end.https.html:

2018-01-04  Youenn Fablet  <youenn@apple.com>

        Implement  https://fetch.spec.whatwg.org/#main-fetch default referrer policy setting
        https://bugs.webkit.org/show_bug.cgi?id=181239

        Reviewed by Alex Christensen.

        Updated test to output more tests for better error reporting.
        Also updated to relax the settings so that HTTP loads are done even though the page is HTTPS.
        Updated referrer computation since it should be done based on the fetch context and not its parent context.

        * web-platform-tests/service-workers/service-worker/fetch-event-referrer-policy.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-event-referrer-policy.https.html:

2018-01-02  Youenn Fablet  <youenn@apple.com>

        Memory cache should not reuse resources with different credential fetch option
        https://bugs.webkit.org/show_bug.cgi?id=181212

        Reviewed by Alex Christensen.

        * web-platform-tests/service-workers/service-worker/fetch-cors-xhr.https-expected.txt:

2018-01-02  Jiewen Tan  <jiewen_tan@apple.com>

        Update Credential Management API for WebAuthentication
        https://bugs.webkit.org/show_bug.cgi?id=181082
        <rdar://problem/36055239>

        Reviewed by Brent Fulgham.

        * web-platform-tests/credential-management/credentialscontainer-create-basics.https-expected.txt:
        * web-platform-tests/credential-management/idl.https-expected.txt:

2018-01-02  Ms2ger  <Ms2ger@igalia.com>

        Update imported/w3c/web-platform-tests/html/browsers/windows/browsing-context.html from upstream wpt.
        https://bugs.webkit.org/show_bug.cgi?id=172255

        Unreviewed test gardening.

        * web-platform-tests/html/browsers/windows/browsing-context-expected.txt: rebaseline.
        * web-platform-tests/html/browsers/windows/browsing-context.html: update.

== Rolled over to ChangeLog-2018-01-01 ==
