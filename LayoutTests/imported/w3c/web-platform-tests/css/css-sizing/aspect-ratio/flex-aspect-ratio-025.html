<!DOCTYPE html>
<html>
  <title>CSS aspect-ratio: Test flex item's resolved width/min-width with border-box box-sizing in a row flex container</title>
  <link rel="author" title="Ting-Yu Lin" href="mailto:tlin@mozilla.com">
  <link rel="author" title="Mozilla" href="https://www.mozilla.org/">
  <link rel="help" href="https://drafts.csswg.org/css-sizing-4/#aspect-ratio">
  <link rel="match" href="../../reference/ref-filled-green-200px-square.html" />
  <style>
  .flexContainer {
    display: flex;
    flex-direction: row;
    width: 1px;
  }
  .item {
    background: green;
    padding-top: 15px;
    box-sizing: border-box;
  }
  </style>

  <p>Test passes if there is a filled green square and <strong>no red</strong>.</p>

  <!-- In the following four flex containers, the aspect-ratio works with border-box. -->
  <div class="flexContainer" style="width: auto;">
    <!-- The border-box height 25px is transferred to the main axis,
         yielding a resolved flex base size of 200px. -->
    <div class="item" style="min-width:0; height: 25px; aspect-ratio: 8/1;"></div>
  </div>

  <div class="flexContainer">
    <!-- The border-box height 25px is transferred to the main axis,
         yielding a resolved min-width:auto of 200px. -->
    <div class="item" style="height: 25px; aspect-ratio: 8/1;"></div>
  </div>

  <div class="flexContainer">
    <!-- The border-box min-height 25px is transferred to the main axis,
         yielding a resolved min-width:auto of 200px. -->
    <div class="item" style="min-height: 25px; aspect-ratio: 8/1;"></div>
  </div>

  <div class="flexContainer">
    <!-- The border-box height 25px (clamped by max-height) is transferred to the main axis,
         yielding a resolved min-width:auto of 200px. -->
    <div class="item" style="max-height: 25px; height: 100px; aspect-ratio: 8/1;"></div>
  </div>

  <!-- In the following four flex containers, the aspect-ratio works with content-box
       because its value contains 'auto'. -->
  <div class="flexContainer" style="width: auto;">
    <!-- The content-box height 10px is transferred to the main axis,
         yielding a resolved flex base size of 200px. -->
    <div class="item" style="min-width:0; height: 25px; aspect-ratio: auto 20/1;"></div>
  </div>

  <div class="flexContainer">
    <!-- The content-box height 10px is transferred to the main axis,
         yielding a resolved min-width:auto of 200px. -->
    <div class="item" style="height: 25px; aspect-ratio: auto 20/1;"></div>
  </div>

  <div class="flexContainer">
    <!-- The content-box min-height 10px is transferred to the main axis,
         yielding a resolved min-width:auto of 200px. -->
    <div class="item" style="min-height: 25px; aspect-ratio: auto 20/1;"></div>
  </div>

  <div class="flexContainer">
    <!-- The content-box height 10px (clamped by max-height) is transferred
         to the main axis, yielding a resolved min-width:auto of 200px. -->
    <div class="item" style="max-height: 25px; height: 100px; aspect-ratio: auto 20/1;"></div>
  </div>
</html>
