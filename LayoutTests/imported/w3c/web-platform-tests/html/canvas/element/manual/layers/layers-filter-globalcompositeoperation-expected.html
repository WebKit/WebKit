<body>
<p class="desc"> Test to ensure beginlayer works for filter and global composition. </p>
<script>
    var canvas, ctx;
    canvas = document.createElement("canvas");
    canvas.width = 200;
    canvas.height = 200;
    document.body.appendChild(canvas);

    ctx = canvas.getContext("2d");
    ctx.fillStyle = 'rgba(0,0,255,1)';

    var circle = new Path2D();
    circle.arc(90, 90, 40, 0, 2 * Math.PI);
    ctx.fill(circle);

    ctx.globalCompositeOperation = 'source-in';
    ctx.filter = 'drop-shadow(-9px 9px 0px #e81)';

    canvas2 = document.createElement("canvas");
    ctx2 = canvas2.getContext("2d");

    ctx2.fillStyle = 'rgba(225,0,0,1)';
    ctx2.fillRect(50,50,75,50);
    ctx2.fillStyle = 'rgba(0,255,0,1)';
    ctx2.fillRect(70,70,75,50);

    ctx.drawImage(canvas2,0,0);
</script>
</body>