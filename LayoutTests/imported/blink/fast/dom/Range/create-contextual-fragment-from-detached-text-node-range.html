<!DOCTYPE html>
<p>Test of createContextualFragment from a Range whose context is a detached text node. If the test succeeds you will see the word "PASS" below.</p>
<p id="result"></p>
<script>
if (window.testRunner)
    testRunner.dumpAsText();

var textNode = document.createTextNode("Text node without an element parent");
var range = document.createRange();
range.setStart(textNode, 0);
var fragment = range.createContextualFragment('<p id="fragment">Inserted fragment</p>');
document.body.appendChild(fragment);
var p = document.getElementById('fragment');

var result = document.getElementById('result');
result.textContent = (p && p.parentElement === document.body && p.namespaceURI === 'http://www.w3.org/1999/xhtml') ? 'PASS' : 'FAIL';
</script>

