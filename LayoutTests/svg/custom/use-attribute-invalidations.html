<!DOCTYPE HTML>
<html>
<body>
<p>This test passes if there are three 100x100px green squares in a diagonal line below:</p>
<svg width="300" height="300">
    <defs>
        <symbol id="symbol" width="100">
            <rect width="100%" height="100%" fill="green"/>
        </symbol>
    </defs>
    <svg x="0" y="0" width="100" height="100">
        <use id="use1" xlink:href="#symbol"/>
    </svg>
    <use id="use2" xlink:href="#symbol" x="100" y="100" width="10" height="100"/>
    <use id="use3" xlink:href="#symbol" x="200" y="200" width="100" height="10"/>
</svg>
<script>
    // Force layout since the intention is to test behavior of changes *after* layout has occurred.
    // FIXME: Find a clean reliable way to do this; Blink tests were using requestAnimationFrame,
    // which seems like it would be racy and wrong, but perhaps they have some rationale for that.
    document.body.offsetTop;

    document.getElementById('use2').removeAttribute('width');
    document.getElementById('use3').setAttribute('height', '100');
</script>
</body>
</html>
