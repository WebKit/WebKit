<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>SVG inside transformed div</title>
  <style>
    body {
      background-color: white;
    }
    .box {
      height: 400px;
      width: 400px;
      margin: 50px;
      border: 1px solid black;
      -webkit-transform: translate(30px, 30px) rotate(20deg);
    }
  </style>
</head>
<body>
  <p>CSS Transformed HTML div with SVG inside it. Animated SVG should repaint correctly.</p>
  <div class="box">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 480 360">
        <rect id="rect" stroke-width="5" fill="blue" stroke="pink" width="100" height="100" />
        <text id="text" x="150" stroke-width="2px" stroke="green" font-size="20px">This is some text</text>
        <image id="image" y="150" width="100" height="100" xlink:href="foo.png" />
      </svg>
  </div>
</body>
<script>
function doTheMoves() {
    document.getElementById("rect").setAttribute("x", "300");
    document.getElementById("text").setAttribute("y", "300");
    document.getElementById("image").setAttribute("x", "350");
    document.getElementById("image").setAttribute("y", "320");
    if (window.layoutTestController)
        layoutTestController.notifyDone();
}
if (window.layoutTestController)
    layoutTestController.waitUntilDone();

window.onload = function() {
    // Delay until after the first paint
    setTimeout(doTheMoves, 100);
}
</script>
</html>
